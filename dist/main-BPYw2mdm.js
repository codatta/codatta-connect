var NR = Object.defineProperty;
var LR = (t, e, r) => e in t ? NR(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r;
var Ds = (t, e, r) => LR(t, typeof e != "symbol" ? e + "" : e, r);
import * as Gt from "react";
import pv, { createContext as Sa, useContext as Tn, useState as Qt, useEffect as Dn, forwardRef as gv, createElement as qd, useId as mv, useCallback as vv, Component as kR, useLayoutEffect as $R, useRef as Zn, useInsertionEffect as b5, useMemo as wi, Fragment as y5, Children as BR, isValidElement as FR } from "react";
import "https://o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js";
var gn = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function ts(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
function bv(t) {
  if (t.__esModule) return t;
  var e = t.default;
  if (typeof e == "function") {
    var r = function n() {
      return this instanceof n ? Reflect.construct(e, arguments, this.constructor) : e.apply(this, arguments);
    };
    r.prototype = e.prototype;
  } else r = {};
  return Object.defineProperty(r, "__esModule", { value: !0 }), Object.keys(t).forEach(function(n) {
    var i = Object.getOwnPropertyDescriptor(t, n);
    Object.defineProperty(r, n, i.get ? i : {
      enumerable: !0,
      get: function() {
        return t[n];
      }
    });
  }), r;
}
var Ym = { exports: {} }, gf = {};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var d2;
function jR() {
  if (d2) return gf;
  d2 = 1;
  var t = pv, e = Symbol.for("react.element"), r = Symbol.for("react.fragment"), n = Object.prototype.hasOwnProperty, i = t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, s = { key: !0, ref: !0, __self: !0, __source: !0 };
  function o(a, u, l) {
    var d, p = {}, w = null, A = null;
    l !== void 0 && (w = "" + l), u.key !== void 0 && (w = "" + u.key), u.ref !== void 0 && (A = u.ref);
    for (d in u) n.call(u, d) && !s.hasOwnProperty(d) && (p[d] = u[d]);
    if (a && a.defaultProps) for (d in u = a.defaultProps, u) p[d] === void 0 && (p[d] = u[d]);
    return { $$typeof: e, type: a, key: w, ref: A, props: p, _owner: i.current };
  }
  return gf.Fragment = r, gf.jsx = o, gf.jsxs = o, gf;
}
var mf = {};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var p2;
function UR() {
  return p2 || (p2 = 1, process.env.NODE_ENV !== "production" && function() {
    var t = pv, e = Symbol.for("react.element"), r = Symbol.for("react.portal"), n = Symbol.for("react.fragment"), i = Symbol.for("react.strict_mode"), s = Symbol.for("react.profiler"), o = Symbol.for("react.provider"), a = Symbol.for("react.context"), u = Symbol.for("react.forward_ref"), l = Symbol.for("react.suspense"), d = Symbol.for("react.suspense_list"), p = Symbol.for("react.memo"), w = Symbol.for("react.lazy"), A = Symbol.for("react.offscreen"), M = Symbol.iterator, N = "@@iterator";
    function L(j) {
      if (j === null || typeof j != "object")
        return null;
      var se = M && j[M] || j[N];
      return typeof se == "function" ? se : null;
    }
    var B = t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
    function $(j) {
      {
        for (var se = arguments.length, he = new Array(se > 1 ? se - 1 : 0), xe = 1; xe < se; xe++)
          he[xe - 1] = arguments[xe];
        H("error", j, he);
      }
    }
    function H(j, se, he) {
      {
        var xe = B.ReactDebugCurrentFrame, Te = xe.getStackAddendum();
        Te !== "" && (se += "%s", he = he.concat([Te]));
        var Re = he.map(function(nt) {
          return String(nt);
        });
        Re.unshift("Warning: " + se), Function.prototype.apply.call(console[j], console, Re);
      }
    }
    var W = !1, V = !1, te = !1, R = !1, K = !1, ge;
    ge = Symbol.for("react.module.reference");
    function Ee(j) {
      return !!(typeof j == "string" || typeof j == "function" || j === n || j === s || K || j === i || j === l || j === d || R || j === A || W || V || te || typeof j == "object" && j !== null && (j.$$typeof === w || j.$$typeof === p || j.$$typeof === o || j.$$typeof === a || j.$$typeof === u || // This needs to include all possible module reference object
      // types supported by any Flight configuration anywhere since
      // we don't know which Flight build this will end up being used
      // with.
      j.$$typeof === ge || j.getModuleId !== void 0));
    }
    function Y(j, se, he) {
      var xe = j.displayName;
      if (xe)
        return xe;
      var Te = se.displayName || se.name || "";
      return Te !== "" ? he + "(" + Te + ")" : he;
    }
    function S(j) {
      return j.displayName || "Context";
    }
    function m(j) {
      if (j == null)
        return null;
      if (typeof j.tag == "number" && $("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."), typeof j == "function")
        return j.displayName || j.name || null;
      if (typeof j == "string")
        return j;
      switch (j) {
        case n:
          return "Fragment";
        case r:
          return "Portal";
        case s:
          return "Profiler";
        case i:
          return "StrictMode";
        case l:
          return "Suspense";
        case d:
          return "SuspenseList";
      }
      if (typeof j == "object")
        switch (j.$$typeof) {
          case a:
            var se = j;
            return S(se) + ".Consumer";
          case o:
            var he = j;
            return S(he._context) + ".Provider";
          case u:
            return Y(j, j.render, "ForwardRef");
          case p:
            var xe = j.displayName || null;
            return xe !== null ? xe : m(j.type) || "Memo";
          case w: {
            var Te = j, Re = Te._payload, nt = Te._init;
            try {
              return m(nt(Re));
            } catch {
              return null;
            }
          }
        }
      return null;
    }
    var f = Object.assign, g = 0, b, x, _, E, v, P, I;
    function F() {
    }
    F.__reactDisabledLog = !0;
    function ce() {
      {
        if (g === 0) {
          b = console.log, x = console.info, _ = console.warn, E = console.error, v = console.group, P = console.groupCollapsed, I = console.groupEnd;
          var j = {
            configurable: !0,
            enumerable: !0,
            value: F,
            writable: !0
          };
          Object.defineProperties(console, {
            info: j,
            log: j,
            warn: j,
            error: j,
            group: j,
            groupCollapsed: j,
            groupEnd: j
          });
        }
        g++;
      }
    }
    function D() {
      {
        if (g--, g === 0) {
          var j = {
            configurable: !0,
            enumerable: !0,
            writable: !0
          };
          Object.defineProperties(console, {
            log: f({}, j, {
              value: b
            }),
            info: f({}, j, {
              value: x
            }),
            warn: f({}, j, {
              value: _
            }),
            error: f({}, j, {
              value: E
            }),
            group: f({}, j, {
              value: v
            }),
            groupCollapsed: f({}, j, {
              value: P
            }),
            groupEnd: f({}, j, {
              value: I
            })
          });
        }
        g < 0 && $("disabledDepth fell below zero. This is a bug in React. Please file an issue.");
      }
    }
    var oe = B.ReactCurrentDispatcher, Z;
    function J(j, se, he) {
      {
        if (Z === void 0)
          try {
            throw Error();
          } catch (Te) {
            var xe = Te.stack.trim().match(/\n( *(at )?)/);
            Z = xe && xe[1] || "";
          }
        return `
` + Z + j;
      }
    }
    var Q = !1, T;
    {
      var X = typeof WeakMap == "function" ? WeakMap : Map;
      T = new X();
    }
    function re(j, se) {
      if (!j || Q)
        return "";
      {
        var he = T.get(j);
        if (he !== void 0)
          return he;
      }
      var xe;
      Q = !0;
      var Te = Error.prepareStackTrace;
      Error.prepareStackTrace = void 0;
      var Re;
      Re = oe.current, oe.current = null, ce();
      try {
        if (se) {
          var nt = function() {
            throw Error();
          };
          if (Object.defineProperty(nt.prototype, "props", {
            set: function() {
              throw Error();
            }
          }), typeof Reflect == "object" && Reflect.construct) {
            try {
              Reflect.construct(nt, []);
            } catch (_t) {
              xe = _t;
            }
            Reflect.construct(j, [], nt);
          } else {
            try {
              nt.call();
            } catch (_t) {
              xe = _t;
            }
            j.call(nt.prototype);
          }
        } else {
          try {
            throw Error();
          } catch (_t) {
            xe = _t;
          }
          j();
        }
      } catch (_t) {
        if (_t && xe && typeof _t.stack == "string") {
          for (var je = _t.stack.split(`
`), pt = xe.stack.split(`
`), it = je.length - 1, et = pt.length - 1; it >= 1 && et >= 0 && je[it] !== pt[et]; )
            et--;
          for (; it >= 1 && et >= 0; it--, et--)
            if (je[it] !== pt[et]) {
              if (it !== 1 || et !== 1)
                do
                  if (it--, et--, et < 0 || je[it] !== pt[et]) {
                    var St = `
` + je[it].replace(" at new ", " at ");
                    return j.displayName && St.includes("<anonymous>") && (St = St.replace("<anonymous>", j.displayName)), typeof j == "function" && T.set(j, St), St;
                  }
                while (it >= 1 && et >= 0);
              break;
            }
        }
      } finally {
        Q = !1, oe.current = Re, D(), Error.prepareStackTrace = Te;
      }
      var Tt = j ? j.displayName || j.name : "", At = Tt ? J(Tt) : "";
      return typeof j == "function" && T.set(j, At), At;
    }
    function de(j, se, he) {
      return re(j, !1);
    }
    function ie(j) {
      var se = j.prototype;
      return !!(se && se.isReactComponent);
    }
    function ue(j, se, he) {
      if (j == null)
        return "";
      if (typeof j == "function")
        return re(j, ie(j));
      if (typeof j == "string")
        return J(j);
      switch (j) {
        case l:
          return J("Suspense");
        case d:
          return J("SuspenseList");
      }
      if (typeof j == "object")
        switch (j.$$typeof) {
          case u:
            return de(j.render);
          case p:
            return ue(j.type, se, he);
          case w: {
            var xe = j, Te = xe._payload, Re = xe._init;
            try {
              return ue(Re(Te), se, he);
            } catch {
            }
          }
        }
      return "";
    }
    var ve = Object.prototype.hasOwnProperty, Pe = {}, De = B.ReactDebugCurrentFrame;
    function Ce(j) {
      if (j) {
        var se = j._owner, he = ue(j.type, j._source, se ? se.type : null);
        De.setExtraStackFrame(he);
      } else
        De.setExtraStackFrame(null);
    }
    function $e(j, se, he, xe, Te) {
      {
        var Re = Function.call.bind(ve);
        for (var nt in j)
          if (Re(j, nt)) {
            var je = void 0;
            try {
              if (typeof j[nt] != "function") {
                var pt = Error((xe || "React class") + ": " + he + " type `" + nt + "` is invalid; it must be a function, usually from the `prop-types` package, but received `" + typeof j[nt] + "`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");
                throw pt.name = "Invariant Violation", pt;
              }
              je = j[nt](se, nt, xe, he, null, "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");
            } catch (it) {
              je = it;
            }
            je && !(je instanceof Error) && (Ce(Te), $("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).", xe || "React class", he, nt, typeof je), Ce(null)), je instanceof Error && !(je.message in Pe) && (Pe[je.message] = !0, Ce(Te), $("Failed %s type: %s", he, je.message), Ce(null));
          }
      }
    }
    var Me = Array.isArray;
    function Ne(j) {
      return Me(j);
    }
    function Ke(j) {
      {
        var se = typeof Symbol == "function" && Symbol.toStringTag, he = se && j[Symbol.toStringTag] || j.constructor.name || "Object";
        return he;
      }
    }
    function Le(j) {
      try {
        return qe(j), !1;
      } catch {
        return !0;
      }
    }
    function qe(j) {
      return "" + j;
    }
    function ze(j) {
      if (Le(j))
        return $("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.", Ke(j)), qe(j);
    }
    var _e = B.ReactCurrentOwner, Ze = {
      key: !0,
      ref: !0,
      __self: !0,
      __source: !0
    }, at, ke, Qe;
    Qe = {};
    function tt(j) {
      if (ve.call(j, "ref")) {
        var se = Object.getOwnPropertyDescriptor(j, "ref").get;
        if (se && se.isReactWarning)
          return !1;
      }
      return j.ref !== void 0;
    }
    function Ye(j) {
      if (ve.call(j, "key")) {
        var se = Object.getOwnPropertyDescriptor(j, "key").get;
        if (se && se.isReactWarning)
          return !1;
      }
      return j.key !== void 0;
    }
    function dt(j, se) {
      if (typeof j.ref == "string" && _e.current && se && _e.current.stateNode !== se) {
        var he = m(_e.current.type);
        Qe[he] || ($('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref', m(_e.current.type), j.ref), Qe[he] = !0);
      }
    }
    function lt(j, se) {
      {
        var he = function() {
          at || (at = !0, $("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", se));
        };
        he.isReactWarning = !0, Object.defineProperty(j, "key", {
          get: he,
          configurable: !0
        });
      }
    }
    function ct(j, se) {
      {
        var he = function() {
          ke || (ke = !0, $("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", se));
        };
        he.isReactWarning = !0, Object.defineProperty(j, "ref", {
          get: he,
          configurable: !0
        });
      }
    }
    var qt = function(j, se, he, xe, Te, Re, nt) {
      var je = {
        // This tag allows us to uniquely identify this as a React Element
        $$typeof: e,
        // Built-in properties that belong on the element
        type: j,
        key: se,
        ref: he,
        props: nt,
        // Record the component responsible for creating this element.
        _owner: Re
      };
      return je._store = {}, Object.defineProperty(je._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: !1
      }), Object.defineProperty(je, "_self", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: xe
      }), Object.defineProperty(je, "_source", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: Te
      }), Object.freeze && (Object.freeze(je.props), Object.freeze(je)), je;
    };
    function Yt(j, se, he, xe, Te) {
      {
        var Re, nt = {}, je = null, pt = null;
        he !== void 0 && (ze(he), je = "" + he), Ye(se) && (ze(se.key), je = "" + se.key), tt(se) && (pt = se.ref, dt(se, Te));
        for (Re in se)
          ve.call(se, Re) && !Ze.hasOwnProperty(Re) && (nt[Re] = se[Re]);
        if (j && j.defaultProps) {
          var it = j.defaultProps;
          for (Re in it)
            nt[Re] === void 0 && (nt[Re] = it[Re]);
        }
        if (je || pt) {
          var et = typeof j == "function" ? j.displayName || j.name || "Unknown" : j;
          je && lt(nt, et), pt && ct(nt, et);
        }
        return qt(j, je, pt, Te, xe, _e.current, nt);
      }
    }
    var Et = B.ReactCurrentOwner, er = B.ReactDebugCurrentFrame;
    function Jt(j) {
      if (j) {
        var se = j._owner, he = ue(j.type, j._source, se ? se.type : null);
        er.setExtraStackFrame(he);
      } else
        er.setExtraStackFrame(null);
    }
    var Dt;
    Dt = !1;
    function kt(j) {
      return typeof j == "object" && j !== null && j.$$typeof === e;
    }
    function Ct() {
      {
        if (Et.current) {
          var j = m(Et.current.type);
          if (j)
            return `

Check the render method of \`` + j + "`.";
        }
        return "";
      }
    }
    function gt(j) {
      return "";
    }
    var Rt = {};
    function Nt(j) {
      {
        var se = Ct();
        if (!se) {
          var he = typeof j == "string" ? j : j.displayName || j.name;
          he && (se = `

Check the top-level render call using <` + he + ">.");
        }
        return se;
      }
    }
    function vt(j, se) {
      {
        if (!j._store || j._store.validated || j.key != null)
          return;
        j._store.validated = !0;
        var he = Nt(se);
        if (Rt[he])
          return;
        Rt[he] = !0;
        var xe = "";
        j && j._owner && j._owner !== Et.current && (xe = " It was passed a child from " + m(j._owner.type) + "."), Jt(j), $('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.', he, xe), Jt(null);
      }
    }
    function $t(j, se) {
      {
        if (typeof j != "object")
          return;
        if (Ne(j))
          for (var he = 0; he < j.length; he++) {
            var xe = j[he];
            kt(xe) && vt(xe, se);
          }
        else if (kt(j))
          j._store && (j._store.validated = !0);
        else if (j) {
          var Te = L(j);
          if (typeof Te == "function" && Te !== j.entries)
            for (var Re = Te.call(j), nt; !(nt = Re.next()).done; )
              kt(nt.value) && vt(nt.value, se);
        }
      }
    }
    function Ft(j) {
      {
        var se = j.type;
        if (se == null || typeof se == "string")
          return;
        var he;
        if (typeof se == "function")
          he = se.propTypes;
        else if (typeof se == "object" && (se.$$typeof === u || // Note: Memo only checks outer props here.
        // Inner props are checked in the reconciler.
        se.$$typeof === p))
          he = se.propTypes;
        else
          return;
        if (he) {
          var xe = m(se);
          $e(he, j.props, "prop", xe, j);
        } else if (se.PropTypes !== void 0 && !Dt) {
          Dt = !0;
          var Te = m(se);
          $("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?", Te || "Unknown");
        }
        typeof se.getDefaultProps == "function" && !se.getDefaultProps.isReactClassApproved && $("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.");
      }
    }
    function rt(j) {
      {
        for (var se = Object.keys(j.props), he = 0; he < se.length; he++) {
          var xe = se[he];
          if (xe !== "children" && xe !== "key") {
            Jt(j), $("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.", xe), Jt(null);
            break;
          }
        }
        j.ref !== null && (Jt(j), $("Invalid attribute `ref` supplied to `React.Fragment`."), Jt(null));
      }
    }
    var Bt = {};
    function k(j, se, he, xe, Te, Re) {
      {
        var nt = Ee(j);
        if (!nt) {
          var je = "";
          (j === void 0 || typeof j == "object" && j !== null && Object.keys(j).length === 0) && (je += " You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");
          var pt = gt();
          pt ? je += pt : je += Ct();
          var it;
          j === null ? it = "null" : Ne(j) ? it = "array" : j !== void 0 && j.$$typeof === e ? (it = "<" + (m(j.type) || "Unknown") + " />", je = " Did you accidentally export a JSX literal instead of a component?") : it = typeof j, $("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s", it, je);
        }
        var et = Yt(j, se, he, Te, Re);
        if (et == null)
          return et;
        if (nt) {
          var St = se.children;
          if (St !== void 0)
            if (xe)
              if (Ne(St)) {
                for (var Tt = 0; Tt < St.length; Tt++)
                  $t(St[Tt], j);
                Object.freeze && Object.freeze(St);
              } else
                $("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");
            else
              $t(St, j);
        }
        if (ve.call(se, "key")) {
          var At = m(j), _t = Object.keys(se).filter(function(st) {
            return st !== "key";
          }), ht = _t.length > 0 ? "{key: someKey, " + _t.join(": ..., ") + ": ...}" : "{key: someKey}";
          if (!Bt[At + ht]) {
            var xt = _t.length > 0 ? "{" + _t.join(": ..., ") + ": ...}" : "{}";
            $(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`, ht, At, xt, At), Bt[At + ht] = !0;
          }
        }
        return j === n ? rt(et) : Ft(et), et;
      }
    }
    function U(j, se, he) {
      return k(j, se, he, !0);
    }
    function z(j, se, he) {
      return k(j, se, he, !1);
    }
    var C = z, G = U;
    mf.Fragment = n, mf.jsx = C, mf.jsxs = G;
  }()), mf;
}
process.env.NODE_ENV === "production" ? Ym.exports = jR() : Ym.exports = UR();
var pe = Ym.exports;
const Os = "https://static.codatta.io/codatta-connect/wallet-icons.svg?v=2", qR = [
  {
    featured: !0,
    name: "MetaMask",
    rdns: "io.metamask",
    image: `${Os}#metamask`,
    getWallet: {
      chrome_store_id: "nkbihfbeogaeaoehlefnkodbefgpgknn",
      brave_store_id: "nkbihfbeogaeaoehlefnkodbefgpgknn",
      edge_addon_id: "ejbalbakoplchlghecdalmeeeajnimhm",
      firefox_addon_id: "ether-metamask",
      play_store_id: "io.metamask",
      app_store_id: "id1438144202"
    },
    deep_link: "metamask://wc",
    universal_link: "https://metamask.app.link/wc"
  },
  {
    featured: !0,
    name: "OKX Wallet",
    rdns: "com.okex.wallet",
    image: `${Os}#okx`,
    getWallet: {
      chrome_store_id: "mcohilncbfahbmgdjkbpemcciiolgcge",
      brave_store_id: "mcohilncbfahbmgdjkbpemcciiolgcge",
      edge_addon_id: "pbpjkcldjiffchgbbndmhojiacbgflha",
      play_store_id: "com.okinc.okex.gp",
      app_store_id: "id1327268470"
    },
    deep_link: "okex://main/wc",
    universal_link: "okex://main/wc"
  },
  {
    featured: !0,
    name: "WalletConnect",
    image: `${Os}#walletconnect`
  },
  {
    featured: !1,
    name: "Coinbase Wallet",
    image: `${Os}#coinbase`
  },
  {
    featured: !1,
    name: "GateWallet",
    rdns: "io.gate.wallet",
    image: `${Os}#6e528abf-7a7d-47bd-d84d-481f169b1200`,
    getWallet: {
      chrome_store_id: "cpmkedoipcpimgecpmgpldfpohjplkpp",
      brave_store_id: "cpmkedoipcpimgecpmgpldfpohjplkpp",
      play_store_id: "com.gateio.gateio",
      app_store_id: "id1294998195",
      mac_app_store_id: "id1609559473"
    },
    deep_link: "https://www.gate.io/mobileapp",
    universal_link: "https://www.gate.io/mobileapp"
  },
  {
    featured: !1,
    name: "Onekey",
    rdns: "so.onekey.app.wallet",
    image: `${Os}#onekey`,
    getWallet: {
      chrome_store_id: "jnmbobjmhlngoefaiojfljckilhhlhcj",
      brave_store_id: "jnmbobjmhlngoefaiojfljckilhhlhcj",
      play_store_id: "so.onekey.app.wallet",
      app_store_id: "id1609559473"
    },
    deep_link: "onekey-wallet://",
    universal_link: "onekey://wc"
  },
  {
    featured: !1,
    name: "Infinity Wallet",
    image: `${Os}#9f259366-0bcd-4817-0af9-f78773e41900`,
    desktop_link: "infinity://wc"
  },
  {
    name: "Rabby Wallet",
    rdns: "io.rabby",
    featured: !1,
    image: `${Os}#rabby`,
    getWallet: {
      chrome_store_id: "acmacodkjbdgmoleebolmdjonilkdbch",
      brave_store_id: "acmacodkjbdgmoleebolmdjonilkdbch",
      play_store_id: "com.debank.rabbymobile",
      app_store_id: "id6474381673"
    }
  },
  {
    name: "Binance Web3 Wallet",
    featured: !1,
    image: `${Os}#ebac7b39-688c-41e3-7912-a4fefba74600`,
    getWallet: {
      play_store_id: "com.binance.dev",
      app_store_id: "id1436799971"
    }
  },
  {
    name: "Rainbow Wallet",
    rdns: "me.rainbow",
    featured: !1,
    image: `${Os}#rainbow`,
    getWallet: {
      chrome_store_id: "opfgelmcmbiajamepnmloijbpoleiama",
      edge_addon_id: "cpojfbodiccabbabgimdeohkkpjfpbnf",
      firefox_addon_id: "rainbow-extension",
      app_store_id: "id1457119021",
      play_store_id: "me.rainbow"
    }
  }
];
function zR(t, e) {
  const r = t.exec(e);
  return r == null ? void 0 : r.groups;
}
const g2 = /^tuple(?<array>(\[(\d*)\])*)$/;
function Jm(t) {
  let e = t.type;
  if (g2.test(t.type) && "components" in t) {
    e = "(";
    const r = t.components.length;
    for (let i = 0; i < r; i++) {
      const s = t.components[i];
      e += Jm(s), i < r - 1 && (e += ", ");
    }
    const n = zR(g2, t.type);
    return e += `)${(n == null ? void 0 : n.array) ?? ""}`, Jm({
      ...t,
      type: e
    });
  }
  return "indexed" in t && t.indexed && (e = `${e} indexed`), t.name ? `${e} ${t.name}` : e;
}
function vf(t) {
  let e = "";
  const r = t.length;
  for (let n = 0; n < r; n++) {
    const i = t[n];
    e += Jm(i), n !== r - 1 && (e += ", ");
  }
  return e;
}
function WR(t) {
  return t.type === "function" ? `function ${t.name}(${vf(t.inputs)})${t.stateMutability && t.stateMutability !== "nonpayable" ? ` ${t.stateMutability}` : ""}${t.outputs.length ? ` returns (${vf(t.outputs)})` : ""}` : t.type === "event" ? `event ${t.name}(${vf(t.inputs)})` : t.type === "error" ? `error ${t.name}(${vf(t.inputs)})` : t.type === "constructor" ? `constructor(${vf(t.inputs)})${t.stateMutability === "payable" ? " payable" : ""}` : t.type === "fallback" ? "fallback()" : "receive() external payable";
}
function bi(t, e, r) {
  const n = t[e.name];
  if (typeof n == "function")
    return n;
  const i = t[r];
  return typeof i == "function" ? i : (s) => e(t, s);
}
function vu(t, { includeName: e = !1 } = {}) {
  if (t.type !== "function" && t.type !== "event" && t.type !== "error")
    throw new rD(t.type);
  return `${t.name}(${yv(t.inputs, { includeName: e })})`;
}
function yv(t, { includeName: e = !1 } = {}) {
  return t ? t.map((r) => HR(r, { includeName: e })).join(e ? ", " : ",") : "";
}
function HR(t, { includeName: e }) {
  return t.type.startsWith("tuple") ? `(${yv(t.components, { includeName: e })})${t.type.slice(5)}` : t.type + (e && t.name ? ` ${t.name}` : "");
}
function va(t, { strict: e = !0 } = {}) {
  return !t || typeof t != "string" ? !1 : e ? /^0x[0-9a-fA-F]*$/.test(t) : t.startsWith("0x");
}
function An(t) {
  return va(t, { strict: !1 }) ? Math.ceil((t.length - 2) / 2) : t.length;
}
const w5 = "2.21.45";
let bf = {
  getDocsUrl: ({ docsBaseUrl: t, docsPath: e = "", docsSlug: r }) => e ? `${t ?? "https://viem.sh"}${e}${r ? `#${r}` : ""}` : void 0,
  version: `viem@${w5}`
};
class yt extends Error {
  constructor(e, r = {}) {
    var a;
    const n = (() => {
      var u;
      return r.cause instanceof yt ? r.cause.details : (u = r.cause) != null && u.message ? r.cause.message : r.details;
    })(), i = r.cause instanceof yt && r.cause.docsPath || r.docsPath, s = (a = bf.getDocsUrl) == null ? void 0 : a.call(bf, { ...r, docsPath: i }), o = [
      e || "An error occurred.",
      "",
      ...r.metaMessages ? [...r.metaMessages, ""] : [],
      ...s ? [`Docs: ${s}`] : [],
      ...n ? [`Details: ${n}`] : [],
      ...bf.version ? [`Version: ${bf.version}`] : []
    ].join(`
`);
    super(o, r.cause ? { cause: r.cause } : void 0), Object.defineProperty(this, "details", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "docsPath", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "metaMessages", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "shortMessage", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "version", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "name", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: "BaseError"
    }), this.details = n, this.docsPath = i, this.metaMessages = r.metaMessages, this.name = r.name ?? this.name, this.shortMessage = e, this.version = w5;
  }
  walk(e) {
    return x5(this, e);
  }
}
function x5(t, e) {
  return e != null && e(t) ? t : t && typeof t == "object" && "cause" in t && t.cause !== void 0 ? x5(t.cause, e) : e ? null : t;
}
class KR extends yt {
  constructor({ docsPath: e }) {
    super([
      "A constructor was not found on the ABI.",
      "Make sure you are using the correct ABI and that the constructor exists on it."
    ].join(`
`), {
      docsPath: e,
      name: "AbiConstructorNotFoundError"
    });
  }
}
class m2 extends yt {
  constructor({ docsPath: e }) {
    super([
      "Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.",
      "Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."
    ].join(`
`), {
      docsPath: e,
      name: "AbiConstructorParamsNotFoundError"
    });
  }
}
class VR extends yt {
  constructor({ data: e, params: r, size: n }) {
    super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`), {
      metaMessages: [
        `Params: (${yv(r, { includeName: !0 })})`,
        `Data:   ${e} (${n} bytes)`
      ],
      name: "AbiDecodingDataSizeTooSmallError"
    }), Object.defineProperty(this, "data", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "params", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "size", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.data = e, this.params = r, this.size = n;
  }
}
class wv extends yt {
  constructor() {
    super('Cannot decode zero data ("0x") with ABI parameters.', {
      name: "AbiDecodingZeroDataError"
    });
  }
}
class GR extends yt {
  constructor({ expectedLength: e, givenLength: r, type: n }) {
    super([
      `ABI encoding array length mismatch for type ${n}.`,
      `Expected length: ${e}`,
      `Given length: ${r}`
    ].join(`
`), { name: "AbiEncodingArrayLengthMismatchError" });
  }
}
class YR extends yt {
  constructor({ expectedSize: e, value: r }) {
    super(`Size of bytes "${r}" (bytes${An(r)}) does not match expected size (bytes${e}).`, { name: "AbiEncodingBytesSizeMismatchError" });
  }
}
class JR extends yt {
  constructor({ expectedLength: e, givenLength: r }) {
    super([
      "ABI encoding params/values length mismatch.",
      `Expected length (params): ${e}`,
      `Given length (values): ${r}`
    ].join(`
`), { name: "AbiEncodingLengthMismatchError" });
  }
}
class _5 extends yt {
  constructor(e, { docsPath: r }) {
    super([
      `Encoded error signature "${e}" not found on ABI.`,
      "Make sure you are using the correct ABI and that the error exists on it.",
      `You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`
    ].join(`
`), {
      docsPath: r,
      name: "AbiErrorSignatureNotFoundError"
    }), Object.defineProperty(this, "signature", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.signature = e;
  }
}
class v2 extends yt {
  constructor(e, { docsPath: r } = {}) {
    super([
      `Function ${e ? `"${e}" ` : ""}not found on ABI.`,
      "Make sure you are using the correct ABI and that the function exists on it."
    ].join(`
`), {
      docsPath: r,
      name: "AbiFunctionNotFoundError"
    });
  }
}
class XR extends yt {
  constructor(e, r) {
    super("Found ambiguous types in overloaded ABI items.", {
      metaMessages: [
        `\`${e.type}\` in \`${vu(e.abiItem)}\`, and`,
        `\`${r.type}\` in \`${vu(r.abiItem)}\``,
        "",
        "These types encode differently and cannot be distinguished at runtime.",
        "Remove one of the ambiguous items in the ABI."
      ],
      name: "AbiItemAmbiguityError"
    });
  }
}
class ZR extends yt {
  constructor({ expectedSize: e, givenSize: r }) {
    super(`Expected bytes${e}, got bytes${r}.`, {
      name: "BytesSizeMismatchError"
    });
  }
}
class QR extends yt {
  constructor(e, { docsPath: r }) {
    super([
      `Type "${e}" is not a valid encoding type.`,
      "Please provide a valid ABI type."
    ].join(`
`), { docsPath: r, name: "InvalidAbiEncodingType" });
  }
}
class eD extends yt {
  constructor(e, { docsPath: r }) {
    super([
      `Type "${e}" is not a valid decoding type.`,
      "Please provide a valid ABI type."
    ].join(`
`), { docsPath: r, name: "InvalidAbiDecodingType" });
  }
}
class tD extends yt {
  constructor(e) {
    super([`Value "${e}" is not a valid array.`].join(`
`), {
      name: "InvalidArrayError"
    });
  }
}
class rD extends yt {
  constructor(e) {
    super([
      `"${e}" is not a valid definition type.`,
      'Valid types: "function", "event", "error"'
    ].join(`
`), { name: "InvalidDefinitionTypeError" });
  }
}
class E5 extends yt {
  constructor({ offset: e, position: r, size: n }) {
    super(`Slice ${r === "start" ? "starting" : "ending"} at offset "${e}" is out-of-bounds (size: ${n}).`, { name: "SliceOffsetOutOfBoundsError" });
  }
}
class S5 extends yt {
  constructor({ size: e, targetSize: r, type: n }) {
    super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`, { name: "SizeExceedsPaddingSizeError" });
  }
}
class b2 extends yt {
  constructor({ size: e, targetSize: r, type: n }) {
    super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`, { name: "InvalidBytesLengthError" });
  }
}
function Tu(t, { dir: e, size: r = 32 } = {}) {
  return typeof t == "string" ? ma(t, { dir: e, size: r }) : nD(t, { dir: e, size: r });
}
function ma(t, { dir: e, size: r = 32 } = {}) {
  if (r === null)
    return t;
  const n = t.replace("0x", "");
  if (n.length > r * 2)
    throw new S5({
      size: Math.ceil(n.length / 2),
      targetSize: r,
      type: "hex"
    });
  return `0x${n[e === "right" ? "padEnd" : "padStart"](r * 2, "0")}`;
}
function nD(t, { dir: e, size: r = 32 } = {}) {
  if (r === null)
    return t;
  if (t.length > r)
    throw new S5({
      size: t.length,
      targetSize: r,
      type: "bytes"
    });
  const n = new Uint8Array(r);
  for (let i = 0; i < r; i++) {
    const s = e === "right";
    n[s ? i : r - i - 1] = t[s ? i : t.length - i - 1];
  }
  return n;
}
class iD extends yt {
  constructor({ max: e, min: r, signed: n, size: i, value: s }) {
    super(`Number "${s}" is not in safe ${i ? `${i * 8}-bit ${n ? "signed" : "unsigned"} ` : ""}integer range ${e ? `(${r} to ${e})` : `(above ${r})`}`, { name: "IntegerOutOfRangeError" });
  }
}
class sD extends yt {
  constructor(e) {
    super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`, {
      name: "InvalidBytesBooleanError"
    });
  }
}
class oD extends yt {
  constructor({ givenSize: e, maxSize: r }) {
    super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`, { name: "SizeOverflowError" });
  }
}
function xv(t, { dir: e = "left" } = {}) {
  let r = typeof t == "string" ? t.replace("0x", "") : t, n = 0;
  for (let i = 0; i < r.length - 1 && r[e === "left" ? i : r.length - i - 1].toString() === "0"; i++)
    n++;
  return r = e === "left" ? r.slice(n) : r.slice(0, r.length - n), typeof t == "string" ? (r.length === 1 && e === "right" && (r = `${r}0`), `0x${r.length % 2 === 1 ? `0${r}` : r}`) : r;
}
function to(t, { size: e }) {
  if (An(t) > e)
    throw new oD({
      givenSize: An(t),
      maxSize: e
    });
}
function el(t, e = {}) {
  const { signed: r } = e;
  e.size && to(t, { size: e.size });
  const n = BigInt(t);
  if (!r)
    return n;
  const i = (t.length - 2) / 2, s = (1n << BigInt(i) * 8n - 1n) - 1n;
  return n <= s ? n : n - BigInt(`0x${"f".padStart(i * 2, "f")}`) - 1n;
}
function bu(t, e = {}) {
  return Number(el(t, e));
}
const aD = /* @__PURE__ */ Array.from({ length: 256 }, (t, e) => e.toString(16).padStart(2, "0"));
function zd(t, e = {}) {
  return typeof t == "number" || typeof t == "bigint" ? Mr(t, e) : typeof t == "string" ? I0(t, e) : typeof t == "boolean" ? A5(t, e) : xi(t, e);
}
function A5(t, e = {}) {
  const r = `0x${Number(t)}`;
  return typeof e.size == "number" ? (to(r, { size: e.size }), Tu(r, { size: e.size })) : r;
}
function xi(t, e = {}) {
  let r = "";
  for (let i = 0; i < t.length; i++)
    r += aD[t[i]];
  const n = `0x${r}`;
  return typeof e.size == "number" ? (to(n, { size: e.size }), Tu(n, { dir: "right", size: e.size })) : n;
}
function Mr(t, e = {}) {
  const { signed: r, size: n } = e, i = BigInt(t);
  let s;
  n ? r ? s = (1n << BigInt(n) * 8n - 1n) - 1n : s = 2n ** (BigInt(n) * 8n) - 1n : typeof t == "number" && (s = BigInt(Number.MAX_SAFE_INTEGER));
  const o = typeof s == "bigint" && r ? -s - 1n : 0;
  if (s && i > s || i < o) {
    const u = typeof t == "bigint" ? "n" : "";
    throw new iD({
      max: s ? `${s}${u}` : void 0,
      min: `${o}${u}`,
      signed: r,
      size: n,
      value: `${t}${u}`
    });
  }
  const a = `0x${(r && i < 0 ? (1n << BigInt(n * 8)) + BigInt(i) : i).toString(16)}`;
  return n ? Tu(a, { size: n }) : a;
}
const cD = /* @__PURE__ */ new TextEncoder();
function I0(t, e = {}) {
  const r = cD.encode(t);
  return xi(r, e);
}
const uD = /* @__PURE__ */ new TextEncoder();
function _v(t, e = {}) {
  return typeof t == "number" || typeof t == "bigint" ? lD(t, e) : typeof t == "boolean" ? fD(t, e) : va(t) ? Lo(t, e) : P5(t, e);
}
function fD(t, e = {}) {
  const r = new Uint8Array(1);
  return r[0] = Number(t), typeof e.size == "number" ? (to(r, { size: e.size }), Tu(r, { size: e.size })) : r;
}
const go = {
  zero: 48,
  nine: 57,
  A: 65,
  F: 70,
  a: 97,
  f: 102
};
function y2(t) {
  if (t >= go.zero && t <= go.nine)
    return t - go.zero;
  if (t >= go.A && t <= go.F)
    return t - (go.A - 10);
  if (t >= go.a && t <= go.f)
    return t - (go.a - 10);
}
function Lo(t, e = {}) {
  let r = t;
  e.size && (to(r, { size: e.size }), r = Tu(r, { dir: "right", size: e.size }));
  let n = r.slice(2);
  n.length % 2 && (n = `0${n}`);
  const i = n.length / 2, s = new Uint8Array(i);
  for (let o = 0, a = 0; o < i; o++) {
    const u = y2(n.charCodeAt(a++)), l = y2(n.charCodeAt(a++));
    if (u === void 0 || l === void 0)
      throw new yt(`Invalid byte sequence ("${n[a - 2]}${n[a - 1]}" in "${n}").`);
    s[o] = u * 16 + l;
  }
  return s;
}
function lD(t, e) {
  const r = Mr(t, e);
  return Lo(r);
}
function P5(t, e = {}) {
  const r = uD.encode(t);
  return typeof e.size == "number" ? (to(r, { size: e.size }), Tu(r, { dir: "right", size: e.size })) : r;
}
function Wd(t) {
  if (!Number.isSafeInteger(t) || t < 0)
    throw new Error(`positive integer expected, not ${t}`);
}
function hD(t) {
  return t instanceof Uint8Array || t != null && typeof t == "object" && t.constructor.name === "Uint8Array";
}
function Ll(t, ...e) {
  if (!hD(t))
    throw new Error("Uint8Array expected");
  if (e.length > 0 && !e.includes(t.length))
    throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`);
}
function gse(t) {
  if (typeof t != "function" || typeof t.create != "function")
    throw new Error("Hash should be wrapped by utils.wrapConstructor");
  Wd(t.outputLen), Wd(t.blockLen);
}
function Hd(t, e = !0) {
  if (t.destroyed)
    throw new Error("Hash instance has been destroyed");
  if (e && t.finished)
    throw new Error("Hash#digest() has already been called");
}
function M5(t, e) {
  Ll(t);
  const r = e.outputLen;
  if (t.length < r)
    throw new Error(`digestInto() expects output buffer of length at least ${r}`);
}
const rd = /* @__PURE__ */ BigInt(2 ** 32 - 1), w2 = /* @__PURE__ */ BigInt(32);
function dD(t, e = !1) {
  return e ? { h: Number(t & rd), l: Number(t >> w2 & rd) } : { h: Number(t >> w2 & rd) | 0, l: Number(t & rd) | 0 };
}
function pD(t, e = !1) {
  let r = new Uint32Array(t.length), n = new Uint32Array(t.length);
  for (let i = 0; i < t.length; i++) {
    const { h: s, l: o } = dD(t[i], e);
    [r[i], n[i]] = [s, o];
  }
  return [r, n];
}
const gD = (t, e, r) => t << r | e >>> 32 - r, mD = (t, e, r) => e << r | t >>> 32 - r, vD = (t, e, r) => e << r - 32 | t >>> 64 - r, bD = (t, e, r) => t << r - 32 | e >>> 64 - r, qc = typeof globalThis == "object" && "crypto" in globalThis ? globalThis.crypto : void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const yD = (t) => new Uint32Array(t.buffer, t.byteOffset, Math.floor(t.byteLength / 4)), Bg = (t) => new DataView(t.buffer, t.byteOffset, t.byteLength), Ns = (t, e) => t << 32 - e | t >>> e, x2 = new Uint8Array(new Uint32Array([287454020]).buffer)[0] === 68, wD = (t) => t << 24 & 4278190080 | t << 8 & 16711680 | t >>> 8 & 65280 | t >>> 24 & 255;
function _2(t) {
  for (let e = 0; e < t.length; e++)
    t[e] = wD(t[e]);
}
const xD = /* @__PURE__ */ Array.from({ length: 256 }, (t, e) => e.toString(16).padStart(2, "0"));
function _D(t) {
  Ll(t);
  let e = "";
  for (let r = 0; r < t.length; r++)
    e += xD[t[r]];
  return e;
}
function ED(t) {
  if (typeof t != "string")
    throw new Error(`utf8ToBytes expected string, got ${typeof t}`);
  return new Uint8Array(new TextEncoder().encode(t));
}
function C0(t) {
  return typeof t == "string" && (t = ED(t)), Ll(t), t;
}
function mse(...t) {
  let e = 0;
  for (let n = 0; n < t.length; n++) {
    const i = t[n];
    Ll(i), e += i.length;
  }
  const r = new Uint8Array(e);
  for (let n = 0, i = 0; n < t.length; n++) {
    const s = t[n];
    r.set(s, i), i += s.length;
  }
  return r;
}
class I5 {
  // Safe version that clones internal state
  clone() {
    return this._cloneInto();
  }
}
function C5(t) {
  const e = (n) => t().update(C0(n)).digest(), r = t();
  return e.outputLen = r.outputLen, e.blockLen = r.blockLen, e.create = () => t(), e;
}
function SD(t) {
  const e = (n, i) => t(i).update(C0(n)).digest(), r = t({});
  return e.outputLen = r.outputLen, e.blockLen = r.blockLen, e.create = (n) => t(n), e;
}
function vse(t = 32) {
  if (qc && typeof qc.getRandomValues == "function")
    return qc.getRandomValues(new Uint8Array(t));
  if (qc && typeof qc.randomBytes == "function")
    return qc.randomBytes(t);
  throw new Error("crypto.getRandomValues must be defined");
}
const T5 = [], R5 = [], D5 = [], AD = /* @__PURE__ */ BigInt(0), yf = /* @__PURE__ */ BigInt(1), PD = /* @__PURE__ */ BigInt(2), MD = /* @__PURE__ */ BigInt(7), ID = /* @__PURE__ */ BigInt(256), CD = /* @__PURE__ */ BigInt(113);
for (let t = 0, e = yf, r = 1, n = 0; t < 24; t++) {
  [r, n] = [n, (2 * r + 3 * n) % 5], T5.push(2 * (5 * n + r)), R5.push((t + 1) * (t + 2) / 2 % 64);
  let i = AD;
  for (let s = 0; s < 7; s++)
    e = (e << yf ^ (e >> MD) * CD) % ID, e & PD && (i ^= yf << (yf << /* @__PURE__ */ BigInt(s)) - yf);
  D5.push(i);
}
const [TD, RD] = /* @__PURE__ */ pD(D5, !0), E2 = (t, e, r) => r > 32 ? vD(t, e, r) : gD(t, e, r), S2 = (t, e, r) => r > 32 ? bD(t, e, r) : mD(t, e, r);
function O5(t, e = 24) {
  const r = new Uint32Array(10);
  for (let n = 24 - e; n < 24; n++) {
    for (let o = 0; o < 10; o++)
      r[o] = t[o] ^ t[o + 10] ^ t[o + 20] ^ t[o + 30] ^ t[o + 40];
    for (let o = 0; o < 10; o += 2) {
      const a = (o + 8) % 10, u = (o + 2) % 10, l = r[u], d = r[u + 1], p = E2(l, d, 1) ^ r[a], w = S2(l, d, 1) ^ r[a + 1];
      for (let A = 0; A < 50; A += 10)
        t[o + A] ^= p, t[o + A + 1] ^= w;
    }
    let i = t[2], s = t[3];
    for (let o = 0; o < 24; o++) {
      const a = R5[o], u = E2(i, s, a), l = S2(i, s, a), d = T5[o];
      i = t[d], s = t[d + 1], t[d] = u, t[d + 1] = l;
    }
    for (let o = 0; o < 50; o += 10) {
      for (let a = 0; a < 10; a++)
        r[a] = t[o + a];
      for (let a = 0; a < 10; a++)
        t[o + a] ^= ~r[(a + 2) % 10] & r[(a + 4) % 10];
    }
    t[0] ^= TD[n], t[1] ^= RD[n];
  }
  r.fill(0);
}
class kl extends I5 {
  // NOTE: we accept arguments in bytes instead of bits here.
  constructor(e, r, n, i = !1, s = 24) {
    if (super(), this.blockLen = e, this.suffix = r, this.outputLen = n, this.enableXOF = i, this.rounds = s, this.pos = 0, this.posOut = 0, this.finished = !1, this.destroyed = !1, Wd(n), 0 >= this.blockLen || this.blockLen >= 200)
      throw new Error("Sha3 supports only keccak-f1600 function");
    this.state = new Uint8Array(200), this.state32 = yD(this.state);
  }
  keccak() {
    x2 || _2(this.state32), O5(this.state32, this.rounds), x2 || _2(this.state32), this.posOut = 0, this.pos = 0;
  }
  update(e) {
    Hd(this);
    const { blockLen: r, state: n } = this;
    e = C0(e);
    const i = e.length;
    for (let s = 0; s < i; ) {
      const o = Math.min(r - this.pos, i - s);
      for (let a = 0; a < o; a++)
        n[this.pos++] ^= e[s++];
      this.pos === r && this.keccak();
    }
    return this;
  }
  finish() {
    if (this.finished)
      return;
    this.finished = !0;
    const { state: e, suffix: r, pos: n, blockLen: i } = this;
    e[n] ^= r, r & 128 && n === i - 1 && this.keccak(), e[i - 1] ^= 128, this.keccak();
  }
  writeInto(e) {
    Hd(this, !1), Ll(e), this.finish();
    const r = this.state, { blockLen: n } = this;
    for (let i = 0, s = e.length; i < s; ) {
      this.posOut >= n && this.keccak();
      const o = Math.min(n - this.posOut, s - i);
      e.set(r.subarray(this.posOut, this.posOut + o), i), this.posOut += o, i += o;
    }
    return e;
  }
  xofInto(e) {
    if (!this.enableXOF)
      throw new Error("XOF is not possible for this instance");
    return this.writeInto(e);
  }
  xof(e) {
    return Wd(e), this.xofInto(new Uint8Array(e));
  }
  digestInto(e) {
    if (M5(e, this), this.finished)
      throw new Error("digest() was already called");
    return this.writeInto(e), this.destroy(), e;
  }
  digest() {
    return this.digestInto(new Uint8Array(this.outputLen));
  }
  destroy() {
    this.destroyed = !0, this.state.fill(0);
  }
  _cloneInto(e) {
    const { blockLen: r, suffix: n, outputLen: i, rounds: s, enableXOF: o } = this;
    return e || (e = new kl(r, n, i, o, s)), e.state32.set(this.state32), e.pos = this.pos, e.posOut = this.posOut, e.finished = this.finished, e.rounds = s, e.suffix = n, e.outputLen = i, e.enableXOF = o, e.destroyed = this.destroyed, e;
  }
}
const Aa = (t, e, r) => C5(() => new kl(e, t, r)), DD = /* @__PURE__ */ Aa(6, 144, 224 / 8), OD = /* @__PURE__ */ Aa(6, 136, 256 / 8), ND = /* @__PURE__ */ Aa(6, 104, 384 / 8), LD = /* @__PURE__ */ Aa(6, 72, 512 / 8), kD = /* @__PURE__ */ Aa(1, 144, 224 / 8), N5 = /* @__PURE__ */ Aa(1, 136, 256 / 8), $D = /* @__PURE__ */ Aa(1, 104, 384 / 8), BD = /* @__PURE__ */ Aa(1, 72, 512 / 8), L5 = (t, e, r) => SD((n = {}) => new kl(e, t, n.dkLen === void 0 ? r : n.dkLen, !0)), FD = /* @__PURE__ */ L5(31, 168, 128 / 8), jD = /* @__PURE__ */ L5(31, 136, 256 / 8), UD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Keccak: kl,
  keccakP: O5,
  keccak_224: kD,
  keccak_256: N5,
  keccak_384: $D,
  keccak_512: BD,
  sha3_224: DD,
  sha3_256: OD,
  sha3_384: ND,
  sha3_512: LD,
  shake128: FD,
  shake256: jD
}, Symbol.toStringTag, { value: "Module" }));
function $l(t, e) {
  const r = e || "hex", n = N5(va(t, { strict: !1 }) ? _v(t) : t);
  return r === "bytes" ? n : zd(n);
}
const qD = (t) => $l(_v(t));
function zD(t) {
  return qD(t);
}
function WD(t) {
  let e = !0, r = "", n = 0, i = "", s = !1;
  for (let o = 0; o < t.length; o++) {
    const a = t[o];
    if (["(", ")", ","].includes(a) && (e = !0), a === "(" && n++, a === ")" && n--, !!e) {
      if (n === 0) {
        if (a === " " && ["event", "function", ""].includes(i))
          i = "";
        else if (i += a, a === ")") {
          s = !0;
          break;
        }
        continue;
      }
      if (a === " ") {
        t[o - 1] !== "," && r !== "," && r !== ",(" && (r = "", e = !1);
        continue;
      }
      i += a, r += a;
    }
  }
  if (!s)
    throw new yt("Unable to normalize signature.");
  return i;
}
const HD = (t) => {
  const e = typeof t == "string" ? t : WR(t);
  return WD(e);
};
function k5(t) {
  return zD(HD(t));
}
const KD = k5;
class yu extends yt {
  constructor({ address: e }) {
    super(`Address "${e}" is invalid.`, {
      metaMessages: [
        "- Address must be a hex value of 20 bytes (40 hex characters).",
        "- Address must match its checksum counterpart."
      ],
      name: "InvalidAddressError"
    });
  }
}
class T0 extends Map {
  constructor(e) {
    super(), Object.defineProperty(this, "maxSize", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.maxSize = e;
  }
  get(e) {
    const r = super.get(e);
    return super.has(e) && r !== void 0 && (this.delete(e), super.set(e, r)), r;
  }
  set(e, r) {
    if (super.set(e, r), this.maxSize && this.size > this.maxSize) {
      const n = this.keys().next().value;
      n && this.delete(n);
    }
    return this;
  }
}
const Fg = /* @__PURE__ */ new T0(8192);
function Bl(t, e) {
  if (Fg.has(`${t}.${e}`))
    return Fg.get(`${t}.${e}`);
  const r = t.substring(2).toLowerCase(), n = $l(P5(r), "bytes"), i = r.split("");
  for (let o = 0; o < 40; o += 2)
    n[o >> 1] >> 4 >= 8 && i[o] && (i[o] = i[o].toUpperCase()), (n[o >> 1] & 15) >= 8 && i[o + 1] && (i[o + 1] = i[o + 1].toUpperCase());
  const s = `0x${i.join("")}`;
  return Fg.set(`${t}.${e}`, s), s;
}
function Ev(t, e) {
  if (!ko(t, { strict: !1 }))
    throw new yu({ address: t });
  return Bl(t, e);
}
const VD = /^0x[a-fA-F0-9]{40}$/, jg = /* @__PURE__ */ new T0(8192);
function ko(t, e) {
  const { strict: r = !0 } = e ?? {}, n = `${t}.${r}`;
  if (jg.has(n))
    return jg.get(n);
  const i = VD.test(t) ? t.toLowerCase() === t ? !0 : r ? Bl(t) === t : !0 : !1;
  return jg.set(n, i), i;
}
function wu(t) {
  return typeof t[0] == "string" ? R0(t) : GD(t);
}
function GD(t) {
  let e = 0;
  for (const i of t)
    e += i.length;
  const r = new Uint8Array(e);
  let n = 0;
  for (const i of t)
    r.set(i, n), n += i.length;
  return r;
}
function R0(t) {
  return `0x${t.reduce((e, r) => e + r.replace("0x", ""), "")}`;
}
function Kd(t, e, r, { strict: n } = {}) {
  return va(t, { strict: !1 }) ? YD(t, e, r, {
    strict: n
  }) : F5(t, e, r, {
    strict: n
  });
}
function $5(t, e) {
  if (typeof e == "number" && e > 0 && e > An(t) - 1)
    throw new E5({
      offset: e,
      position: "start",
      size: An(t)
    });
}
function B5(t, e, r) {
  if (typeof e == "number" && typeof r == "number" && An(t) !== r - e)
    throw new E5({
      offset: r,
      position: "end",
      size: An(t)
    });
}
function F5(t, e, r, { strict: n } = {}) {
  $5(t, e);
  const i = t.slice(e, r);
  return n && B5(i, e, r), i;
}
function YD(t, e, r, { strict: n } = {}) {
  $5(t, e);
  const i = `0x${t.replace("0x", "").slice((e ?? 0) * 2, (r ?? t.length) * 2)}`;
  return n && B5(i, e, r), i;
}
function j5(t, e) {
  if (t.length !== e.length)
    throw new JR({
      expectedLength: t.length,
      givenLength: e.length
    });
  const r = JD({
    params: t,
    values: e
  }), n = Av(r);
  return n.length === 0 ? "0x" : n;
}
function JD({ params: t, values: e }) {
  const r = [];
  for (let n = 0; n < t.length; n++)
    r.push(Sv({ param: t[n], value: e[n] }));
  return r;
}
function Sv({ param: t, value: e }) {
  const r = Pv(t.type);
  if (r) {
    const [n, i] = r;
    return ZD(e, { length: n, param: { ...t, type: i } });
  }
  if (t.type === "tuple")
    return nO(e, {
      param: t
    });
  if (t.type === "address")
    return XD(e);
  if (t.type === "bool")
    return eO(e);
  if (t.type.startsWith("uint") || t.type.startsWith("int")) {
    const n = t.type.startsWith("int");
    return tO(e, { signed: n });
  }
  if (t.type.startsWith("bytes"))
    return QD(e, { param: t });
  if (t.type === "string")
    return rO(e);
  throw new QR(t.type, {
    docsPath: "/docs/contract/encodeAbiParameters"
  });
}
function Av(t) {
  let e = 0;
  for (let s = 0; s < t.length; s++) {
    const { dynamic: o, encoded: a } = t[s];
    o ? e += 32 : e += An(a);
  }
  const r = [], n = [];
  let i = 0;
  for (let s = 0; s < t.length; s++) {
    const { dynamic: o, encoded: a } = t[s];
    o ? (r.push(Mr(e + i, { size: 32 })), n.push(a), i += An(a)) : r.push(a);
  }
  return wu([...r, ...n]);
}
function XD(t) {
  if (!ko(t))
    throw new yu({ address: t });
  return { dynamic: !1, encoded: ma(t.toLowerCase()) };
}
function ZD(t, { length: e, param: r }) {
  const n = e === null;
  if (!Array.isArray(t))
    throw new tD(t);
  if (!n && t.length !== e)
    throw new GR({
      expectedLength: e,
      givenLength: t.length,
      type: `${r.type}[${e}]`
    });
  let i = !1;
  const s = [];
  for (let o = 0; o < t.length; o++) {
    const a = Sv({ param: r, value: t[o] });
    a.dynamic && (i = !0), s.push(a);
  }
  if (n || i) {
    const o = Av(s);
    if (n) {
      const a = Mr(s.length, { size: 32 });
      return {
        dynamic: !0,
        encoded: s.length > 0 ? wu([a, o]) : a
      };
    }
    if (i)
      return { dynamic: !0, encoded: o };
  }
  return {
    dynamic: !1,
    encoded: wu(s.map(({ encoded: o }) => o))
  };
}
function QD(t, { param: e }) {
  const [, r] = e.type.split("bytes"), n = An(t);
  if (!r) {
    let i = t;
    return n % 32 !== 0 && (i = ma(i, {
      dir: "right",
      size: Math.ceil((t.length - 2) / 2 / 32) * 32
    })), {
      dynamic: !0,
      encoded: wu([ma(Mr(n, { size: 32 })), i])
    };
  }
  if (n !== Number.parseInt(r))
    throw new YR({
      expectedSize: Number.parseInt(r),
      value: t
    });
  return { dynamic: !1, encoded: ma(t, { dir: "right" }) };
}
function eO(t) {
  if (typeof t != "boolean")
    throw new yt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);
  return { dynamic: !1, encoded: ma(A5(t)) };
}
function tO(t, { signed: e }) {
  return {
    dynamic: !1,
    encoded: Mr(t, {
      size: 32,
      signed: e
    })
  };
}
function rO(t) {
  const e = I0(t), r = Math.ceil(An(e) / 32), n = [];
  for (let i = 0; i < r; i++)
    n.push(ma(Kd(e, i * 32, (i + 1) * 32), {
      dir: "right"
    }));
  return {
    dynamic: !0,
    encoded: wu([
      ma(Mr(An(e), { size: 32 })),
      ...n
    ])
  };
}
function nO(t, { param: e }) {
  let r = !1;
  const n = [];
  for (let i = 0; i < e.components.length; i++) {
    const s = e.components[i], o = Array.isArray(t) ? i : s.name, a = Sv({
      param: s,
      value: t[o]
    });
    n.push(a), a.dynamic && (r = !0);
  }
  return {
    dynamic: r,
    encoded: r ? Av(n) : wu(n.map(({ encoded: i }) => i))
  };
}
function Pv(t) {
  const e = t.match(/^(.*)\[(\d+)?\]$/);
  return e ? (
    // Return `null` if the array is dynamic.
    [e[2] ? Number(e[2]) : null, e[1]]
  ) : void 0;
}
const Mv = (t) => Kd(k5(t), 0, 4);
function U5(t) {
  const { abi: e, args: r = [], name: n } = t, i = va(n, { strict: !1 }), s = e.filter((a) => i ? a.type === "function" ? Mv(a) === n : a.type === "event" ? KD(a) === n : !1 : "name" in a && a.name === n);
  if (s.length === 0)
    return;
  if (s.length === 1)
    return s[0];
  let o;
  for (const a of s) {
    if (!("inputs" in a))
      continue;
    if (!r || r.length === 0) {
      if (!a.inputs || a.inputs.length === 0)
        return a;
      continue;
    }
    if (!a.inputs || a.inputs.length === 0 || a.inputs.length !== r.length)
      continue;
    if (r.every((l, d) => {
      const p = "inputs" in a && a.inputs[d];
      return p ? Xm(l, p) : !1;
    })) {
      if (o && "inputs" in o && o.inputs) {
        const l = q5(a.inputs, o.inputs, r);
        if (l)
          throw new XR({
            abiItem: a,
            type: l[0]
          }, {
            abiItem: o,
            type: l[1]
          });
      }
      o = a;
    }
  }
  return o || s[0];
}
function Xm(t, e) {
  const r = typeof t, n = e.type;
  switch (n) {
    case "address":
      return ko(t, { strict: !1 });
    case "bool":
      return r === "boolean";
    case "function":
      return r === "string";
    case "string":
      return r === "string";
    default:
      return n === "tuple" && "components" in e ? Object.values(e.components).every((i, s) => Xm(Object.values(t)[s], i)) : /^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n) ? r === "number" || r === "bigint" : /^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n) ? r === "string" || t instanceof Uint8Array : /[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n) ? Array.isArray(t) && t.every((i) => Xm(i, {
        ...e,
        // Pop off `[]` or `[M]` from end of type
        type: n.replace(/(\[[0-9]{0,}\])$/, "")
      })) : !1;
  }
}
function q5(t, e, r) {
  for (const n in t) {
    const i = t[n], s = e[n];
    if (i.type === "tuple" && s.type === "tuple" && "components" in i && "components" in s)
      return q5(i.components, s.components, r[n]);
    const o = [i.type, s.type];
    if (o.includes("address") && o.includes("bytes20") ? !0 : o.includes("address") && o.includes("string") ? ko(r[n], { strict: !1 }) : o.includes("address") && o.includes("bytes") ? ko(r[n], { strict: !1 }) : !1)
      return o;
  }
}
function qo(t) {
  return typeof t == "string" ? { address: t, type: "json-rpc" } : t;
}
const A2 = "/docs/contract/encodeFunctionData";
function iO(t) {
  const { abi: e, args: r, functionName: n } = t;
  let i = e[0];
  if (n) {
    const s = U5({
      abi: e,
      args: r,
      name: n
    });
    if (!s)
      throw new v2(n, { docsPath: A2 });
    i = s;
  }
  if (i.type !== "function")
    throw new v2(void 0, { docsPath: A2 });
  return {
    abi: [i],
    functionName: Mv(vu(i))
  };
}
function sO(t) {
  const { args: e } = t, { abi: r, functionName: n } = (() => {
    var a;
    return t.abi.length === 1 && ((a = t.functionName) != null && a.startsWith("0x")) ? t : iO(t);
  })(), i = r[0], s = n, o = "inputs" in i && i.inputs ? j5(i.inputs, e ?? []) : void 0;
  return R0([s, o ?? "0x"]);
}
const oO = {
  1: "An `assert` condition failed.",
  17: "Arithmetic operation resulted in underflow or overflow.",
  18: "Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",
  33: "Attempted to convert to an invalid type.",
  34: "Attempted to access a storage byte array that is incorrectly encoded.",
  49: "Performed `.pop()` on an empty array",
  50: "Array index is out of bounds.",
  65: "Allocated too much memory or created an array which is too large.",
  81: "Attempted to call a zero-initialized variable of internal function type."
}, aO = {
  inputs: [
    {
      name: "message",
      type: "string"
    }
  ],
  name: "Error",
  type: "error"
}, cO = {
  inputs: [
    {
      name: "reason",
      type: "uint256"
    }
  ],
  name: "Panic",
  type: "error"
};
class P2 extends yt {
  constructor({ offset: e }) {
    super(`Offset \`${e}\` cannot be negative.`, {
      name: "NegativeOffsetError"
    });
  }
}
class uO extends yt {
  constructor({ length: e, position: r }) {
    super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`, { name: "PositionOutOfBoundsError" });
  }
}
class fO extends yt {
  constructor({ count: e, limit: r }) {
    super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`, { name: "RecursiveReadLimitExceededError" });
  }
}
const lO = {
  bytes: new Uint8Array(),
  dataView: new DataView(new ArrayBuffer(0)),
  position: 0,
  positionReadCount: /* @__PURE__ */ new Map(),
  recursiveReadCount: 0,
  recursiveReadLimit: Number.POSITIVE_INFINITY,
  assertReadLimit() {
    if (this.recursiveReadCount >= this.recursiveReadLimit)
      throw new fO({
        count: this.recursiveReadCount + 1,
        limit: this.recursiveReadLimit
      });
  },
  assertPosition(t) {
    if (t < 0 || t > this.bytes.length - 1)
      throw new uO({
        length: this.bytes.length,
        position: t
      });
  },
  decrementPosition(t) {
    if (t < 0)
      throw new P2({ offset: t });
    const e = this.position - t;
    this.assertPosition(e), this.position = e;
  },
  getReadCount(t) {
    return this.positionReadCount.get(t || this.position) || 0;
  },
  incrementPosition(t) {
    if (t < 0)
      throw new P2({ offset: t });
    const e = this.position + t;
    this.assertPosition(e), this.position = e;
  },
  inspectByte(t) {
    const e = t ?? this.position;
    return this.assertPosition(e), this.bytes[e];
  },
  inspectBytes(t, e) {
    const r = e ?? this.position;
    return this.assertPosition(r + t - 1), this.bytes.subarray(r, r + t);
  },
  inspectUint8(t) {
    const e = t ?? this.position;
    return this.assertPosition(e), this.bytes[e];
  },
  inspectUint16(t) {
    const e = t ?? this.position;
    return this.assertPosition(e + 1), this.dataView.getUint16(e);
  },
  inspectUint24(t) {
    const e = t ?? this.position;
    return this.assertPosition(e + 2), (this.dataView.getUint16(e) << 8) + this.dataView.getUint8(e + 2);
  },
  inspectUint32(t) {
    const e = t ?? this.position;
    return this.assertPosition(e + 3), this.dataView.getUint32(e);
  },
  pushByte(t) {
    this.assertPosition(this.position), this.bytes[this.position] = t, this.position++;
  },
  pushBytes(t) {
    this.assertPosition(this.position + t.length - 1), this.bytes.set(t, this.position), this.position += t.length;
  },
  pushUint8(t) {
    this.assertPosition(this.position), this.bytes[this.position] = t, this.position++;
  },
  pushUint16(t) {
    this.assertPosition(this.position + 1), this.dataView.setUint16(this.position, t), this.position += 2;
  },
  pushUint24(t) {
    this.assertPosition(this.position + 2), this.dataView.setUint16(this.position, t >> 8), this.dataView.setUint8(this.position + 2, t & 255), this.position += 3;
  },
  pushUint32(t) {
    this.assertPosition(this.position + 3), this.dataView.setUint32(this.position, t), this.position += 4;
  },
  readByte() {
    this.assertReadLimit(), this._touch();
    const t = this.inspectByte();
    return this.position++, t;
  },
  readBytes(t, e) {
    this.assertReadLimit(), this._touch();
    const r = this.inspectBytes(t);
    return this.position += e ?? t, r;
  },
  readUint8() {
    this.assertReadLimit(), this._touch();
    const t = this.inspectUint8();
    return this.position += 1, t;
  },
  readUint16() {
    this.assertReadLimit(), this._touch();
    const t = this.inspectUint16();
    return this.position += 2, t;
  },
  readUint24() {
    this.assertReadLimit(), this._touch();
    const t = this.inspectUint24();
    return this.position += 3, t;
  },
  readUint32() {
    this.assertReadLimit(), this._touch();
    const t = this.inspectUint32();
    return this.position += 4, t;
  },
  get remaining() {
    return this.bytes.length - this.position;
  },
  setPosition(t) {
    const e = this.position;
    return this.assertPosition(t), this.position = t, () => this.position = e;
  },
  _touch() {
    if (this.recursiveReadLimit === Number.POSITIVE_INFINITY)
      return;
    const t = this.getReadCount();
    this.positionReadCount.set(this.position, t + 1), t > 0 && this.recursiveReadCount++;
  }
};
function Iv(t, { recursiveReadLimit: e = 8192 } = {}) {
  const r = Object.create(lO);
  return r.bytes = t, r.dataView = new DataView(t.buffer, t.byteOffset, t.byteLength), r.positionReadCount = /* @__PURE__ */ new Map(), r.recursiveReadLimit = e, r;
}
function hO(t, e = {}) {
  typeof e.size < "u" && to(t, { size: e.size });
  const r = xi(t, e);
  return el(r, e);
}
function dO(t, e = {}) {
  let r = t;
  if (typeof e.size < "u" && (to(r, { size: e.size }), r = xv(r)), r.length > 1 || r[0] > 1)
    throw new sD(r);
  return !!r[0];
}
function Io(t, e = {}) {
  typeof e.size < "u" && to(t, { size: e.size });
  const r = xi(t, e);
  return bu(r, e);
}
function pO(t, e = {}) {
  let r = t;
  return typeof e.size < "u" && (to(r, { size: e.size }), r = xv(r, { dir: "right" })), new TextDecoder().decode(r);
}
function gO(t, e) {
  const r = typeof e == "string" ? Lo(e) : e, n = Iv(r);
  if (An(r) === 0 && t.length > 0)
    throw new wv();
  if (An(e) && An(e) < 32)
    throw new VR({
      data: typeof e == "string" ? e : xi(e),
      params: t,
      size: An(e)
    });
  let i = 0;
  const s = [];
  for (let o = 0; o < t.length; ++o) {
    const a = t[o];
    n.setPosition(i);
    const [u, l] = au(n, a, {
      staticPosition: 0
    });
    i += l, s.push(u);
  }
  return s;
}
function au(t, e, { staticPosition: r }) {
  const n = Pv(e.type);
  if (n) {
    const [i, s] = n;
    return vO(t, { ...e, type: s }, { length: i, staticPosition: r });
  }
  if (e.type === "tuple")
    return xO(t, e, { staticPosition: r });
  if (e.type === "address")
    return mO(t);
  if (e.type === "bool")
    return bO(t);
  if (e.type.startsWith("bytes"))
    return yO(t, e, { staticPosition: r });
  if (e.type.startsWith("uint") || e.type.startsWith("int"))
    return wO(t, e);
  if (e.type === "string")
    return _O(t, { staticPosition: r });
  throw new eD(e.type, {
    docsPath: "/docs/contract/decodeAbiParameters"
  });
}
const M2 = 32, Zm = 32;
function mO(t) {
  const e = t.readBytes(32);
  return [Bl(xi(F5(e, -20))), 32];
}
function vO(t, e, { length: r, staticPosition: n }) {
  if (!r) {
    const o = Io(t.readBytes(Zm)), a = n + o, u = a + M2;
    t.setPosition(a);
    const l = Io(t.readBytes(M2)), d = tl(e);
    let p = 0;
    const w = [];
    for (let A = 0; A < l; ++A) {
      t.setPosition(u + (d ? A * 32 : p));
      const [M, N] = au(t, e, {
        staticPosition: u
      });
      p += N, w.push(M);
    }
    return t.setPosition(n + 32), [w, 32];
  }
  if (tl(e)) {
    const o = Io(t.readBytes(Zm)), a = n + o, u = [];
    for (let l = 0; l < r; ++l) {
      t.setPosition(a + l * 32);
      const [d] = au(t, e, {
        staticPosition: a
      });
      u.push(d);
    }
    return t.setPosition(n + 32), [u, 32];
  }
  let i = 0;
  const s = [];
  for (let o = 0; o < r; ++o) {
    const [a, u] = au(t, e, {
      staticPosition: n + i
    });
    i += u, s.push(a);
  }
  return [s, i];
}
function bO(t) {
  return [dO(t.readBytes(32), { size: 32 }), 32];
}
function yO(t, e, { staticPosition: r }) {
  const [n, i] = e.type.split("bytes");
  if (!i) {
    const o = Io(t.readBytes(32));
    t.setPosition(r + o);
    const a = Io(t.readBytes(32));
    if (a === 0)
      return t.setPosition(r + 32), ["0x", 32];
    const u = t.readBytes(a);
    return t.setPosition(r + 32), [xi(u), 32];
  }
  return [xi(t.readBytes(Number.parseInt(i), 32)), 32];
}
function wO(t, e) {
  const r = e.type.startsWith("int"), n = Number.parseInt(e.type.split("int")[1] || "256"), i = t.readBytes(32);
  return [
    n > 48 ? hO(i, { signed: r }) : Io(i, { signed: r }),
    32
  ];
}
function xO(t, e, { staticPosition: r }) {
  const n = e.components.length === 0 || e.components.some(({ name: o }) => !o), i = n ? [] : {};
  let s = 0;
  if (tl(e)) {
    const o = Io(t.readBytes(Zm)), a = r + o;
    for (let u = 0; u < e.components.length; ++u) {
      const l = e.components[u];
      t.setPosition(a + s);
      const [d, p] = au(t, l, {
        staticPosition: a
      });
      s += p, i[n ? u : l == null ? void 0 : l.name] = d;
    }
    return t.setPosition(r + 32), [i, 32];
  }
  for (let o = 0; o < e.components.length; ++o) {
    const a = e.components[o], [u, l] = au(t, a, {
      staticPosition: r
    });
    i[n ? o : a == null ? void 0 : a.name] = u, s += l;
  }
  return [i, s];
}
function _O(t, { staticPosition: e }) {
  const r = Io(t.readBytes(32)), n = e + r;
  t.setPosition(n);
  const i = Io(t.readBytes(32));
  if (i === 0)
    return t.setPosition(e + 32), ["", 32];
  const s = t.readBytes(i, 32), o = pO(xv(s));
  return t.setPosition(e + 32), [o, 32];
}
function tl(t) {
  var n;
  const { type: e } = t;
  if (e === "string" || e === "bytes" || e.endsWith("[]"))
    return !0;
  if (e === "tuple")
    return (n = t.components) == null ? void 0 : n.some(tl);
  const r = Pv(t.type);
  return !!(r && tl({ ...t, type: r[1] }));
}
function EO(t) {
  const { abi: e, data: r } = t, n = Kd(r, 0, 4);
  if (n === "0x")
    throw new wv();
  const s = [...e || [], aO, cO].find((o) => o.type === "error" && n === Mv(vu(o)));
  if (!s)
    throw new _5(n, {
      docsPath: "/docs/contract/decodeErrorResult"
    });
  return {
    abiItem: s,
    args: "inputs" in s && s.inputs && s.inputs.length > 0 ? gO(s.inputs, Kd(r, 4)) : void 0,
    errorName: s.name
  };
}
const Ru = (t, e, r) => JSON.stringify(t, (n, i) => typeof i == "bigint" ? i.toString() : i, r);
function z5({ abiItem: t, args: e, includeFunctionName: r = !0, includeName: n = !1 }) {
  if ("name" in t && "inputs" in t && t.inputs)
    return `${r ? t.name : ""}(${t.inputs.map((i, s) => `${n && i.name ? `${i.name}: ` : ""}${typeof e[s] == "object" ? Ru(e[s]) : e[s]}`).join(", ")})`;
}
const SO = {
  gwei: 9,
  wei: 18
}, AO = {
  ether: -9,
  wei: 9
};
function W5(t, e) {
  let r = t.toString();
  const n = r.startsWith("-");
  n && (r = r.slice(1)), r = r.padStart(e, "0");
  let [i, s] = [
    r.slice(0, r.length - e),
    r.slice(r.length - e)
  ];
  return s = s.replace(/(0+)$/, ""), `${n ? "-" : ""}${i || "0"}${s ? `.${s}` : ""}`;
}
function H5(t, e = "wei") {
  return W5(t, SO[e]);
}
function Es(t, e = "wei") {
  return W5(t, AO[e]);
}
class PO extends yt {
  constructor({ address: e }) {
    super(`State for account "${e}" is set multiple times.`, {
      name: "AccountStateConflictError"
    });
  }
}
class MO extends yt {
  constructor() {
    super("state and stateDiff are set on the same account.", {
      name: "StateAssignmentConflictError"
    });
  }
}
function D0(t) {
  const e = Object.entries(t).map(([n, i]) => i === void 0 || i === !1 ? null : [n, i]).filter(Boolean), r = e.reduce((n, [i]) => Math.max(n, i.length), 0);
  return e.map(([n, i]) => `  ${`${n}:`.padEnd(r + 1)}  ${i}`).join(`
`);
}
class IO extends yt {
  constructor() {
    super([
      "Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.",
      "Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."
    ].join(`
`), { name: "FeeConflictError" });
  }
}
class CO extends yt {
  constructor({ transaction: e }) {
    super("Cannot infer a transaction type from provided transaction.", {
      metaMessages: [
        "Provided Transaction:",
        "{",
        D0(e),
        "}",
        "",
        "To infer the type, either provide:",
        "- a `type` to the Transaction, or",
        "- an EIP-1559 Transaction with `maxFeePerGas`, or",
        "- an EIP-2930 Transaction with `gasPrice` & `accessList`, or",
        "- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or",
        "- an EIP-7702 Transaction with `authorizationList`, or",
        "- a Legacy Transaction with `gasPrice`"
      ],
      name: "InvalidSerializableTransactionError"
    });
  }
}
class TO extends yt {
  constructor(e, { account: r, docsPath: n, chain: i, data: s, gas: o, gasPrice: a, maxFeePerGas: u, maxPriorityFeePerGas: l, nonce: d, to: p, value: w }) {
    var M;
    const A = D0({
      chain: i && `${i == null ? void 0 : i.name} (id: ${i == null ? void 0 : i.id})`,
      from: r == null ? void 0 : r.address,
      to: p,
      value: typeof w < "u" && `${H5(w)} ${((M = i == null ? void 0 : i.nativeCurrency) == null ? void 0 : M.symbol) || "ETH"}`,
      data: s,
      gas: o,
      gasPrice: typeof a < "u" && `${Es(a)} gwei`,
      maxFeePerGas: typeof u < "u" && `${Es(u)} gwei`,
      maxPriorityFeePerGas: typeof l < "u" && `${Es(l)} gwei`,
      nonce: d
    });
    super(e.shortMessage, {
      cause: e,
      docsPath: n,
      metaMessages: [
        ...e.metaMessages ? [...e.metaMessages, " "] : [],
        "Request Arguments:",
        A
      ].filter(Boolean),
      name: "TransactionExecutionError"
    }), Object.defineProperty(this, "cause", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.cause = e;
  }
}
const RO = (t) => t, K5 = (t) => t;
class DO extends yt {
  constructor(e, { abi: r, args: n, contractAddress: i, docsPath: s, functionName: o, sender: a }) {
    const u = U5({ abi: r, args: n, name: o }), l = u ? z5({
      abiItem: u,
      args: n,
      includeFunctionName: !1,
      includeName: !1
    }) : void 0, d = u ? vu(u, { includeName: !0 }) : void 0, p = D0({
      address: i && RO(i),
      function: d,
      args: l && l !== "()" && `${[...Array((o == null ? void 0 : o.length) ?? 0).keys()].map(() => " ").join("")}${l}`,
      sender: a
    });
    super(e.shortMessage || `An unknown error occurred while executing the contract function "${o}".`, {
      cause: e,
      docsPath: s,
      metaMessages: [
        ...e.metaMessages ? [...e.metaMessages, " "] : [],
        p && "Contract Call:",
        p
      ].filter(Boolean),
      name: "ContractFunctionExecutionError"
    }), Object.defineProperty(this, "abi", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "args", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "cause", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "contractAddress", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "formattedArgs", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "functionName", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "sender", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.abi = r, this.args = n, this.cause = e, this.contractAddress = i, this.functionName = o, this.sender = a;
  }
}
class OO extends yt {
  constructor({ abi: e, data: r, functionName: n, message: i }) {
    let s, o, a, u;
    if (r && r !== "0x")
      try {
        o = EO({ abi: e, data: r });
        const { abiItem: d, errorName: p, args: w } = o;
        if (p === "Error")
          u = w[0];
        else if (p === "Panic") {
          const [A] = w;
          u = oO[A];
        } else {
          const A = d ? vu(d, { includeName: !0 }) : void 0, M = d && w ? z5({
            abiItem: d,
            args: w,
            includeFunctionName: !1,
            includeName: !1
          }) : void 0;
          a = [
            A ? `Error: ${A}` : "",
            M && M !== "()" ? `       ${[...Array((p == null ? void 0 : p.length) ?? 0).keys()].map(() => " ").join("")}${M}` : ""
          ];
        }
      } catch (d) {
        s = d;
      }
    else i && (u = i);
    let l;
    s instanceof _5 && (l = s.signature, a = [
      `Unable to decode signature "${l}" as it was not found on the provided ABI.`,
      "Make sure you are using the correct ABI and that the error exists on it.",
      `You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`
    ]), super(u && u !== "execution reverted" || l ? [
      `The contract function "${n}" reverted with the following ${l ? "signature" : "reason"}:`,
      u || l
    ].join(`
`) : `The contract function "${n}" reverted.`, {
      cause: s,
      metaMessages: a,
      name: "ContractFunctionRevertedError"
    }), Object.defineProperty(this, "data", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "reason", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "signature", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.data = o, this.reason = u, this.signature = l;
  }
}
class NO extends yt {
  constructor({ functionName: e }) {
    super(`The contract function "${e}" returned no data ("0x").`, {
      metaMessages: [
        "This could be due to any of the following:",
        `  - The contract does not have the function "${e}",`,
        "  - The parameters passed to the contract function may be invalid, or",
        "  - The address is not a contract."
      ],
      name: "ContractFunctionZeroDataError"
    });
  }
}
class LO extends yt {
  constructor({ data: e, message: r }) {
    super(r || "", { name: "RawContractError" }), Object.defineProperty(this, "code", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: 3
    }), Object.defineProperty(this, "data", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.data = e;
  }
}
class V5 extends yt {
  constructor({ body: e, cause: r, details: n, headers: i, status: s, url: o }) {
    super("HTTP request failed.", {
      cause: r,
      details: n,
      metaMessages: [
        s && `Status: ${s}`,
        `URL: ${K5(o)}`,
        e && `Request body: ${Ru(e)}`
      ].filter(Boolean),
      name: "HttpRequestError"
    }), Object.defineProperty(this, "body", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "headers", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "status", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), Object.defineProperty(this, "url", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.body = e, this.headers = i, this.status = s, this.url = o;
  }
}
class kO extends yt {
  constructor({ body: e, error: r, url: n }) {
    super("RPC Request failed.", {
      cause: r,
      details: r.message,
      metaMessages: [`URL: ${K5(n)}`, `Request body: ${Ru(e)}`],
      name: "RpcRequestError"
    }), Object.defineProperty(this, "code", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.code = r.code;
  }
}
const $O = -1;
class Si extends yt {
  constructor(e, { code: r, docsPath: n, metaMessages: i, name: s, shortMessage: o }) {
    super(o, {
      cause: e,
      docsPath: n,
      metaMessages: i || (e == null ? void 0 : e.metaMessages),
      name: s || "RpcError"
    }), Object.defineProperty(this, "code", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.name = s || e.name, this.code = e instanceof kO ? e.code : r ?? $O;
  }
}
class Du extends Si {
  constructor(e, r) {
    super(e, r), Object.defineProperty(this, "data", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.data = r.data;
  }
}
class rl extends Si {
  constructor(e) {
    super(e, {
      code: rl.code,
      name: "ParseRpcError",
      shortMessage: "Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."
    });
  }
}
Object.defineProperty(rl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32700
});
class nl extends Si {
  constructor(e) {
    super(e, {
      code: nl.code,
      name: "InvalidRequestRpcError",
      shortMessage: "JSON is not a valid request object."
    });
  }
}
Object.defineProperty(nl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32600
});
class il extends Si {
  constructor(e, { method: r } = {}) {
    super(e, {
      code: il.code,
      name: "MethodNotFoundRpcError",
      shortMessage: `The method${r ? ` "${r}"` : ""} does not exist / is not available.`
    });
  }
}
Object.defineProperty(il, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32601
});
class sl extends Si {
  constructor(e) {
    super(e, {
      code: sl.code,
      name: "InvalidParamsRpcError",
      shortMessage: [
        "Invalid parameters were provided to the RPC method.",
        "Double check you have provided the correct parameters."
      ].join(`
`)
    });
  }
}
Object.defineProperty(sl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32602
});
class uc extends Si {
  constructor(e) {
    super(e, {
      code: uc.code,
      name: "InternalRpcError",
      shortMessage: "An internal error was received."
    });
  }
}
Object.defineProperty(uc, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32603
});
class ol extends Si {
  constructor(e) {
    super(e, {
      code: ol.code,
      name: "InvalidInputRpcError",
      shortMessage: [
        "Missing or invalid parameters.",
        "Double check you have provided the correct parameters."
      ].join(`
`)
    });
  }
}
Object.defineProperty(ol, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32e3
});
class al extends Si {
  constructor(e) {
    super(e, {
      code: al.code,
      name: "ResourceNotFoundRpcError",
      shortMessage: "Requested resource not found."
    }), Object.defineProperty(this, "name", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: "ResourceNotFoundRpcError"
    });
  }
}
Object.defineProperty(al, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32001
});
class cl extends Si {
  constructor(e) {
    super(e, {
      code: cl.code,
      name: "ResourceUnavailableRpcError",
      shortMessage: "Requested resource not available."
    });
  }
}
Object.defineProperty(cl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32002
});
class ul extends Si {
  constructor(e) {
    super(e, {
      code: ul.code,
      name: "TransactionRejectedRpcError",
      shortMessage: "Transaction creation failed."
    });
  }
}
Object.defineProperty(ul, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32003
});
class fl extends Si {
  constructor(e, { method: r } = {}) {
    super(e, {
      code: fl.code,
      name: "MethodNotSupportedRpcError",
      shortMessage: `Method${r ? ` "${r}"` : ""} is not implemented.`
    });
  }
}
Object.defineProperty(fl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32004
});
class xu extends Si {
  constructor(e) {
    super(e, {
      code: xu.code,
      name: "LimitExceededRpcError",
      shortMessage: "Request exceeds defined limit."
    });
  }
}
Object.defineProperty(xu, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32005
});
class ll extends Si {
  constructor(e) {
    super(e, {
      code: ll.code,
      name: "JsonRpcVersionUnsupportedError",
      shortMessage: "Version of JSON-RPC protocol is not supported."
    });
  }
}
Object.defineProperty(ll, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: -32006
});
class cu extends Du {
  constructor(e) {
    super(e, {
      code: cu.code,
      name: "UserRejectedRequestError",
      shortMessage: "User rejected the request."
    });
  }
}
Object.defineProperty(cu, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: 4001
});
class hl extends Du {
  constructor(e) {
    super(e, {
      code: hl.code,
      name: "UnauthorizedProviderError",
      shortMessage: "The requested method and/or account has not been authorized by the user."
    });
  }
}
Object.defineProperty(hl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: 4100
});
class dl extends Du {
  constructor(e, { method: r } = {}) {
    super(e, {
      code: dl.code,
      name: "UnsupportedProviderMethodError",
      shortMessage: `The Provider does not support the requested method${r ? ` " ${r}"` : ""}.`
    });
  }
}
Object.defineProperty(dl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: 4200
});
class pl extends Du {
  constructor(e) {
    super(e, {
      code: pl.code,
      name: "ProviderDisconnectedError",
      shortMessage: "The Provider is disconnected from all chains."
    });
  }
}
Object.defineProperty(pl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: 4900
});
class gl extends Du {
  constructor(e) {
    super(e, {
      code: gl.code,
      name: "ChainDisconnectedError",
      shortMessage: "The Provider is not connected to the requested chain."
    });
  }
}
Object.defineProperty(gl, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: 4901
});
class ml extends Du {
  constructor(e) {
    super(e, {
      code: ml.code,
      name: "SwitchChainError",
      shortMessage: "An error occurred when attempting to switch chain."
    });
  }
}
Object.defineProperty(ml, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: 4902
});
class BO extends Si {
  constructor(e) {
    super(e, {
      name: "UnknownRpcError",
      shortMessage: "An unknown RPC error occurred."
    });
  }
}
const FO = 3;
function jO(t, { abi: e, address: r, args: n, docsPath: i, functionName: s, sender: o }) {
  const { code: a, data: u, message: l, shortMessage: d } = t instanceof LO ? t : t instanceof yt ? t.walk((w) => "data" in w) || t.walk() : {}, p = t instanceof wv ? new NO({ functionName: s }) : [FO, uc.code].includes(a) && (u || l || d) ? new OO({
    abi: e,
    data: typeof u == "object" ? u.data : u,
    functionName: s,
    message: d ?? l
  }) : t;
  return new DO(p, {
    abi: e,
    args: n,
    contractAddress: r,
    docsPath: i,
    functionName: s,
    sender: o
  });
}
function UO(t) {
  const e = $l(`0x${t.substring(4)}`).substring(26);
  return Bl(`0x${e}`);
}
async function qO({ hash: t, signature: e }) {
  const r = va(t) ? t : zd(t), { secp256k1: n } = await import("./secp256k1-zOw5-Bh-.js");
  return `0x${(() => {
    if (typeof e == "object" && "r" in e && "s" in e) {
      const { r: l, s: d, v: p, yParity: w } = e, A = Number(w ?? p), M = I2(A);
      return new n.Signature(el(l), el(d)).addRecoveryBit(M);
    }
    const o = va(e) ? e : zd(e), a = bu(`0x${o.slice(130)}`), u = I2(a);
    return n.Signature.fromCompact(o.substring(2, 130)).addRecoveryBit(u);
  })().recoverPublicKey(r.substring(2)).toHex(!1)}`;
}
function I2(t) {
  if (t === 0 || t === 1)
    return t;
  if (t === 27)
    return 0;
  if (t === 28)
    return 1;
  throw new Error("Invalid yParityOrV value");
}
async function zO({ hash: t, signature: e }) {
  return UO(await qO({ hash: t, signature: e }));
}
function WO(t, e = "hex") {
  const r = G5(t), n = Iv(new Uint8Array(r.length));
  return r.encode(n), e === "hex" ? xi(n.bytes) : n.bytes;
}
function G5(t) {
  return Array.isArray(t) ? HO(t.map((e) => G5(e))) : KO(t);
}
function HO(t) {
  const e = t.reduce((i, s) => i + s.length, 0), r = Y5(e);
  return {
    length: e <= 55 ? 1 + e : 1 + r + e,
    encode(i) {
      e <= 55 ? i.pushByte(192 + e) : (i.pushByte(247 + r), r === 1 ? i.pushUint8(e) : r === 2 ? i.pushUint16(e) : r === 3 ? i.pushUint24(e) : i.pushUint32(e));
      for (const { encode: s } of t)
        s(i);
    }
  };
}
function KO(t) {
  const e = typeof t == "string" ? Lo(t) : t, r = Y5(e.length);
  return {
    length: e.length === 1 && e[0] < 128 ? 1 : e.length <= 55 ? 1 + e.length : 1 + r + e.length,
    encode(i) {
      e.length === 1 && e[0] < 128 ? i.pushBytes(e) : e.length <= 55 ? (i.pushByte(128 + e.length), i.pushBytes(e)) : (i.pushByte(183 + r), r === 1 ? i.pushUint8(e.length) : r === 2 ? i.pushUint16(e.length) : r === 3 ? i.pushUint24(e.length) : i.pushUint32(e.length), i.pushBytes(e));
    }
  };
}
function Y5(t) {
  if (t < 2 ** 8)
    return 1;
  if (t < 2 ** 16)
    return 2;
  if (t < 2 ** 24)
    return 3;
  if (t < 2 ** 32)
    return 4;
  throw new yt("Length is too large.");
}
function VO(t) {
  const { chainId: e, contractAddress: r, nonce: n, to: i } = t, s = $l(R0([
    "0x05",
    WO([
      e ? Mr(e) : "0x",
      r,
      n ? Mr(n) : "0x"
    ])
  ]));
  return i === "bytes" ? Lo(s) : s;
}
async function J5(t) {
  const { authorization: e, signature: r } = t;
  return zO({
    hash: VO(e),
    signature: r ?? e
  });
}
class GO extends yt {
  constructor(e, { account: r, docsPath: n, chain: i, data: s, gas: o, gasPrice: a, maxFeePerGas: u, maxPriorityFeePerGas: l, nonce: d, to: p, value: w }) {
    var M;
    const A = D0({
      from: r == null ? void 0 : r.address,
      to: p,
      value: typeof w < "u" && `${H5(w)} ${((M = i == null ? void 0 : i.nativeCurrency) == null ? void 0 : M.symbol) || "ETH"}`,
      data: s,
      gas: o,
      gasPrice: typeof a < "u" && `${Es(a)} gwei`,
      maxFeePerGas: typeof u < "u" && `${Es(u)} gwei`,
      maxPriorityFeePerGas: typeof l < "u" && `${Es(l)} gwei`,
      nonce: d
    });
    super(e.shortMessage, {
      cause: e,
      docsPath: n,
      metaMessages: [
        ...e.metaMessages ? [...e.metaMessages, " "] : [],
        "Estimate Gas Arguments:",
        A
      ].filter(Boolean),
      name: "EstimateGasExecutionError"
    }), Object.defineProperty(this, "cause", {
      enumerable: !0,
      configurable: !0,
      writable: !0,
      value: void 0
    }), this.cause = e;
  }
}
class Zc extends yt {
  constructor({ cause: e, message: r } = {}) {
    var i;
    const n = (i = r == null ? void 0 : r.replace("execution reverted: ", "")) == null ? void 0 : i.replace("execution reverted", "");
    super(`Execution reverted ${n ? `with reason: ${n}` : "for an unknown reason"}.`, {
      cause: e,
      name: "ExecutionRevertedError"
    });
  }
}
Object.defineProperty(Zc, "code", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: 3
});
Object.defineProperty(Zc, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /execution reverted/
});
class Vd extends yt {
  constructor({ cause: e, maxFeePerGas: r } = {}) {
    super(`The fee cap (\`maxFeePerGas\`${r ? ` = ${Es(r)} gwei` : ""}) cannot be higher than the maximum allowed value (2^256-1).`, {
      cause: e,
      name: "FeeCapTooHighError"
    });
  }
}
Object.defineProperty(Vd, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/
});
class Qm extends yt {
  constructor({ cause: e, maxFeePerGas: r } = {}) {
    super(`The fee cap (\`maxFeePerGas\`${r ? ` = ${Es(r)}` : ""} gwei) cannot be lower than the block base fee.`, {
      cause: e,
      name: "FeeCapTooLowError"
    });
  }
}
Object.defineProperty(Qm, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/
});
class e1 extends yt {
  constructor({ cause: e, nonce: r } = {}) {
    super(`Nonce provided for the transaction ${r ? `(${r}) ` : ""}is higher than the next one expected.`, { cause: e, name: "NonceTooHighError" });
  }
}
Object.defineProperty(e1, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /nonce too high/
});
class t1 extends yt {
  constructor({ cause: e, nonce: r } = {}) {
    super([
      `Nonce provided for the transaction ${r ? `(${r}) ` : ""}is lower than the current nonce of the account.`,
      "Try increasing the nonce or find the latest nonce with `getTransactionCount`."
    ].join(`
`), { cause: e, name: "NonceTooLowError" });
  }
}
Object.defineProperty(t1, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /nonce too low|transaction already imported|already known/
});
class r1 extends yt {
  constructor({ cause: e, nonce: r } = {}) {
    super(`Nonce provided for the transaction ${r ? `(${r}) ` : ""}exceeds the maximum allowed nonce.`, { cause: e, name: "NonceMaxValueError" });
  }
}
Object.defineProperty(r1, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /nonce has max value/
});
class n1 extends yt {
  constructor({ cause: e } = {}) {
    super([
      "The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."
    ].join(`
`), {
      cause: e,
      metaMessages: [
        "This error could arise when the account does not have enough funds to:",
        " - pay for the total gas fee,",
        " - pay for the value to send.",
        " ",
        "The cost of the transaction is calculated as `gas * gas fee + value`, where:",
        " - `gas` is the amount of gas needed for transaction to execute,",
        " - `gas fee` is the gas fee,",
        " - `value` is the amount of ether to send to the recipient."
      ],
      name: "InsufficientFundsError"
    });
  }
}
Object.defineProperty(n1, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /insufficient funds|exceeds transaction sender account balance/
});
class i1 extends yt {
  constructor({ cause: e, gas: r } = {}) {
    super(`The amount of gas ${r ? `(${r}) ` : ""}provided for the transaction exceeds the limit allowed for the block.`, {
      cause: e,
      name: "IntrinsicGasTooHighError"
    });
  }
}
Object.defineProperty(i1, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /intrinsic gas too high|gas limit reached/
});
class s1 extends yt {
  constructor({ cause: e, gas: r } = {}) {
    super(`The amount of gas ${r ? `(${r}) ` : ""}provided for the transaction is too low.`, {
      cause: e,
      name: "IntrinsicGasTooLowError"
    });
  }
}
Object.defineProperty(s1, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /intrinsic gas too low/
});
class o1 extends yt {
  constructor({ cause: e }) {
    super("The transaction type is not supported for this chain.", {
      cause: e,
      name: "TransactionTypeNotSupportedError"
    });
  }
}
Object.defineProperty(o1, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /transaction type not valid/
});
class Gd extends yt {
  constructor({ cause: e, maxPriorityFeePerGas: r, maxFeePerGas: n } = {}) {
    super([
      `The provided tip (\`maxPriorityFeePerGas\`${r ? ` = ${Es(r)} gwei` : ""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n ? ` = ${Es(n)} gwei` : ""}).`
    ].join(`
`), {
      cause: e,
      name: "TipAboveFeeCapError"
    });
  }
}
Object.defineProperty(Gd, "nodeMessage", {
  enumerable: !0,
  configurable: !0,
  writable: !0,
  value: /max priority fee per gas higher than max fee per gas|tip higher than fee cap/
});
class Cv extends yt {
  constructor({ cause: e }) {
    super(`An error occurred while executing: ${e == null ? void 0 : e.shortMessage}`, {
      cause: e,
      name: "UnknownNodeError"
    });
  }
}
function X5(t, e) {
  const r = (t.details || "").toLowerCase(), n = t instanceof yt ? t.walk((i) => (i == null ? void 0 : i.code) === Zc.code) : t;
  return n instanceof yt ? new Zc({
    cause: t,
    message: n.details
  }) : Zc.nodeMessage.test(r) ? new Zc({
    cause: t,
    message: t.details
  }) : Vd.nodeMessage.test(r) ? new Vd({
    cause: t,
    maxFeePerGas: e == null ? void 0 : e.maxFeePerGas
  }) : Qm.nodeMessage.test(r) ? new Qm({
    cause: t,
    maxFeePerGas: e == null ? void 0 : e.maxFeePerGas
  }) : e1.nodeMessage.test(r) ? new e1({ cause: t, nonce: e == null ? void 0 : e.nonce }) : t1.nodeMessage.test(r) ? new t1({ cause: t, nonce: e == null ? void 0 : e.nonce }) : r1.nodeMessage.test(r) ? new r1({ cause: t, nonce: e == null ? void 0 : e.nonce }) : n1.nodeMessage.test(r) ? new n1({ cause: t }) : i1.nodeMessage.test(r) ? new i1({ cause: t, gas: e == null ? void 0 : e.gas }) : s1.nodeMessage.test(r) ? new s1({ cause: t, gas: e == null ? void 0 : e.gas }) : o1.nodeMessage.test(r) ? new o1({ cause: t }) : Gd.nodeMessage.test(r) ? new Gd({
    cause: t,
    maxFeePerGas: e == null ? void 0 : e.maxFeePerGas,
    maxPriorityFeePerGas: e == null ? void 0 : e.maxPriorityFeePerGas
  }) : new Cv({
    cause: t
  });
}
function YO(t, { docsPath: e, ...r }) {
  const n = (() => {
    const i = X5(t, r);
    return i instanceof Cv ? t : i;
  })();
  return new GO(n, {
    docsPath: e,
    ...r
  });
}
function Z5(t, { format: e }) {
  if (!e)
    return {};
  const r = {};
  function n(s) {
    const o = Object.keys(s);
    for (const a of o)
      a in t && (r[a] = t[a]), s[a] && typeof s[a] == "object" && !Array.isArray(s[a]) && n(s[a]);
  }
  const i = e(t || {});
  return n(i), r;
}
const JO = {
  legacy: "0x0",
  eip2930: "0x1",
  eip1559: "0x2",
  eip4844: "0x3",
  eip7702: "0x4"
};
function Tv(t) {
  const e = {};
  return typeof t.authorizationList < "u" && (e.authorizationList = XO(t.authorizationList)), typeof t.accessList < "u" && (e.accessList = t.accessList), typeof t.blobVersionedHashes < "u" && (e.blobVersionedHashes = t.blobVersionedHashes), typeof t.blobs < "u" && (typeof t.blobs[0] != "string" ? e.blobs = t.blobs.map((r) => xi(r)) : e.blobs = t.blobs), typeof t.data < "u" && (e.data = t.data), typeof t.from < "u" && (e.from = t.from), typeof t.gas < "u" && (e.gas = Mr(t.gas)), typeof t.gasPrice < "u" && (e.gasPrice = Mr(t.gasPrice)), typeof t.maxFeePerBlobGas < "u" && (e.maxFeePerBlobGas = Mr(t.maxFeePerBlobGas)), typeof t.maxFeePerGas < "u" && (e.maxFeePerGas = Mr(t.maxFeePerGas)), typeof t.maxPriorityFeePerGas < "u" && (e.maxPriorityFeePerGas = Mr(t.maxPriorityFeePerGas)), typeof t.nonce < "u" && (e.nonce = Mr(t.nonce)), typeof t.to < "u" && (e.to = t.to), typeof t.type < "u" && (e.type = JO[t.type]), typeof t.value < "u" && (e.value = Mr(t.value)), e;
}
function XO(t) {
  return t.map((e) => ({
    address: e.contractAddress,
    r: e.r,
    s: e.s,
    chainId: Mr(e.chainId),
    nonce: Mr(e.nonce),
    ...typeof e.yParity < "u" ? { yParity: Mr(e.yParity) } : {},
    ...typeof e.v < "u" && typeof e.yParity > "u" ? { v: Mr(e.v) } : {}
  }));
}
function C2(t) {
  if (!(!t || t.length === 0))
    return t.reduce((e, { slot: r, value: n }) => {
      if (r.length !== 66)
        throw new b2({
          size: r.length,
          targetSize: 66,
          type: "hex"
        });
      if (n.length !== 66)
        throw new b2({
          size: n.length,
          targetSize: 66,
          type: "hex"
        });
      return e[r] = n, e;
    }, {});
}
function ZO(t) {
  const { balance: e, nonce: r, state: n, stateDiff: i, code: s } = t, o = {};
  if (s !== void 0 && (o.code = s), e !== void 0 && (o.balance = Mr(e)), r !== void 0 && (o.nonce = Mr(r)), n !== void 0 && (o.state = C2(n)), i !== void 0) {
    if (o.state)
      throw new MO();
    o.stateDiff = C2(i);
  }
  return o;
}
function QO(t) {
  if (!t)
    return;
  const e = {};
  for (const { address: r, ...n } of t) {
    if (!ko(r, { strict: !1 }))
      throw new yu({ address: r });
    if (e[r])
      throw new PO({ address: r });
    e[r] = ZO(n);
  }
  return e;
}
const eN = 2n ** 256n - 1n;
function O0(t) {
  const { account: e, gasPrice: r, maxFeePerGas: n, maxPriorityFeePerGas: i, to: s } = t, o = e ? qo(e) : void 0;
  if (o && !ko(o.address))
    throw new yu({ address: o.address });
  if (s && !ko(s))
    throw new yu({ address: s });
  if (typeof r < "u" && (typeof n < "u" || typeof i < "u"))
    throw new IO();
  if (n && n > eN)
    throw new Vd({ maxFeePerGas: n });
  if (i && n && i > n)
    throw new Gd({ maxFeePerGas: n, maxPriorityFeePerGas: i });
}
class tN extends yt {
  constructor() {
    super("`baseFeeMultiplier` must be greater than 1.", {
      name: "BaseFeeScalarError"
    });
  }
}
class Rv extends yt {
  constructor() {
    super("Chain does not support EIP-1559 fees.", {
      name: "Eip1559FeesNotSupportedError"
    });
  }
}
class rN extends yt {
  constructor({ maxPriorityFeePerGas: e }) {
    super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Es(e)} gwei).`, { name: "MaxFeePerGasTooLowError" });
  }
}
class nN extends yt {
  constructor({ blockHash: e, blockNumber: r }) {
    let n = "Block";
    e && (n = `Block at hash "${e}"`), r && (n = `Block at number "${r}"`), super(`${n} could not be found.`, { name: "BlockNotFoundError" });
  }
}
const iN = {
  "0x0": "legacy",
  "0x1": "eip2930",
  "0x2": "eip1559",
  "0x3": "eip4844",
  "0x4": "eip7702"
};
function sN(t) {
  const e = {
    ...t,
    blockHash: t.blockHash ? t.blockHash : null,
    blockNumber: t.blockNumber ? BigInt(t.blockNumber) : null,
    chainId: t.chainId ? bu(t.chainId) : void 0,
    gas: t.gas ? BigInt(t.gas) : void 0,
    gasPrice: t.gasPrice ? BigInt(t.gasPrice) : void 0,
    maxFeePerBlobGas: t.maxFeePerBlobGas ? BigInt(t.maxFeePerBlobGas) : void 0,
    maxFeePerGas: t.maxFeePerGas ? BigInt(t.maxFeePerGas) : void 0,
    maxPriorityFeePerGas: t.maxPriorityFeePerGas ? BigInt(t.maxPriorityFeePerGas) : void 0,
    nonce: t.nonce ? bu(t.nonce) : void 0,
    to: t.to ? t.to : null,
    transactionIndex: t.transactionIndex ? Number(t.transactionIndex) : null,
    type: t.type ? iN[t.type] : void 0,
    typeHex: t.type ? t.type : void 0,
    value: t.value ? BigInt(t.value) : void 0,
    v: t.v ? BigInt(t.v) : void 0
  };
  return t.authorizationList && (e.authorizationList = oN(t.authorizationList)), e.yParity = (() => {
    if (t.yParity)
      return Number(t.yParity);
    if (typeof e.v == "bigint") {
      if (e.v === 0n || e.v === 27n)
        return 0;
      if (e.v === 1n || e.v === 28n)
        return 1;
      if (e.v >= 35n)
        return e.v % 2n === 0n ? 1 : 0;
    }
  })(), e.type === "legacy" && (delete e.accessList, delete e.maxFeePerBlobGas, delete e.maxFeePerGas, delete e.maxPriorityFeePerGas, delete e.yParity), e.type === "eip2930" && (delete e.maxFeePerBlobGas, delete e.maxFeePerGas, delete e.maxPriorityFeePerGas), e.type === "eip1559" && delete e.maxFeePerBlobGas, e;
}
function oN(t) {
  return t.map((e) => ({
    contractAddress: e.address,
    chainId: Number(e.chainId),
    nonce: Number(e.nonce),
    r: e.r,
    s: e.s,
    yParity: Number(e.yParity)
  }));
}
function aN(t) {
  const e = (t.transactions ?? []).map((r) => typeof r == "string" ? r : sN(r));
  return {
    ...t,
    baseFeePerGas: t.baseFeePerGas ? BigInt(t.baseFeePerGas) : null,
    blobGasUsed: t.blobGasUsed ? BigInt(t.blobGasUsed) : void 0,
    difficulty: t.difficulty ? BigInt(t.difficulty) : void 0,
    excessBlobGas: t.excessBlobGas ? BigInt(t.excessBlobGas) : void 0,
    gasLimit: t.gasLimit ? BigInt(t.gasLimit) : void 0,
    gasUsed: t.gasUsed ? BigInt(t.gasUsed) : void 0,
    hash: t.hash ? t.hash : null,
    logsBloom: t.logsBloom ? t.logsBloom : null,
    nonce: t.nonce ? t.nonce : null,
    number: t.number ? BigInt(t.number) : null,
    size: t.size ? BigInt(t.size) : void 0,
    timestamp: t.timestamp ? BigInt(t.timestamp) : void 0,
    transactions: e,
    totalDifficulty: t.totalDifficulty ? BigInt(t.totalDifficulty) : null
  };
}
async function Yd(t, { blockHash: e, blockNumber: r, blockTag: n, includeTransactions: i } = {}) {
  var d, p, w;
  const s = n ?? "latest", o = i ?? !1, a = r !== void 0 ? Mr(r) : void 0;
  let u = null;
  if (e ? u = await t.request({
    method: "eth_getBlockByHash",
    params: [e, o]
  }, { dedupe: !0 }) : u = await t.request({
    method: "eth_getBlockByNumber",
    params: [a || s, o]
  }, { dedupe: !!a }), !u)
    throw new nN({ blockHash: e, blockNumber: r });
  return (((w = (p = (d = t.chain) == null ? void 0 : d.formatters) == null ? void 0 : p.block) == null ? void 0 : w.format) || aN)(u);
}
async function Q5(t) {
  const e = await t.request({
    method: "eth_gasPrice"
  });
  return BigInt(e);
}
async function cN(t, e) {
  var s, o;
  const { block: r, chain: n = t.chain, request: i } = e || {};
  try {
    const a = ((s = n == null ? void 0 : n.fees) == null ? void 0 : s.maxPriorityFeePerGas) ?? ((o = n == null ? void 0 : n.fees) == null ? void 0 : o.defaultPriorityFee);
    if (typeof a == "function") {
      const l = r || await bi(t, Yd, "getBlock")({}), d = await a({
        block: l,
        client: t,
        request: i
      });
      if (d === null)
        throw new Error();
      return d;
    }
    if (typeof a < "u")
      return a;
    const u = await t.request({
      method: "eth_maxPriorityFeePerGas"
    });
    return el(u);
  } catch {
    const [a, u] = await Promise.all([
      r ? Promise.resolve(r) : bi(t, Yd, "getBlock")({}),
      bi(t, Q5, "getGasPrice")({})
    ]);
    if (typeof a.baseFeePerGas != "bigint")
      throw new Rv();
    const l = u - a.baseFeePerGas;
    return l < 0n ? 0n : l;
  }
}
async function T2(t, e) {
  var w, A;
  const { block: r, chain: n = t.chain, request: i, type: s = "eip1559" } = e || {}, o = await (async () => {
    var M, N;
    return typeof ((M = n == null ? void 0 : n.fees) == null ? void 0 : M.baseFeeMultiplier) == "function" ? n.fees.baseFeeMultiplier({
      block: r,
      client: t,
      request: i
    }) : ((N = n == null ? void 0 : n.fees) == null ? void 0 : N.baseFeeMultiplier) ?? 1.2;
  })();
  if (o < 1)
    throw new tN();
  const u = 10 ** (((w = o.toString().split(".")[1]) == null ? void 0 : w.length) ?? 0), l = (M) => M * BigInt(Math.ceil(o * u)) / BigInt(u), d = r || await bi(t, Yd, "getBlock")({});
  if (typeof ((A = n == null ? void 0 : n.fees) == null ? void 0 : A.estimateFeesPerGas) == "function") {
    const M = await n.fees.estimateFeesPerGas({
      block: r,
      client: t,
      multiply: l,
      request: i,
      type: s
    });
    if (M !== null)
      return M;
  }
  if (s === "eip1559") {
    if (typeof d.baseFeePerGas != "bigint")
      throw new Rv();
    const M = typeof (i == null ? void 0 : i.maxPriorityFeePerGas) == "bigint" ? i.maxPriorityFeePerGas : await cN(t, {
      block: d,
      chain: n,
      request: i
    }), N = l(d.baseFeePerGas);
    return {
      maxFeePerGas: (i == null ? void 0 : i.maxFeePerGas) ?? N + M,
      maxPriorityFeePerGas: M
    };
  }
  return {
    gasPrice: (i == null ? void 0 : i.gasPrice) ?? l(await bi(t, Q5, "getGasPrice")({}))
  };
}
async function uN(t, { address: e, blockTag: r = "latest", blockNumber: n }) {
  const i = await t.request({
    method: "eth_getTransactionCount",
    params: [e, n ? Mr(n) : r]
  }, { dedupe: !!n });
  return bu(i);
}
function e4(t) {
  const { kzg: e } = t, r = t.to ?? (typeof t.blobs[0] == "string" ? "hex" : "bytes"), n = typeof t.blobs[0] == "string" ? t.blobs.map((s) => Lo(s)) : t.blobs, i = [];
  for (const s of n)
    i.push(Uint8Array.from(e.blobToKzgCommitment(s)));
  return r === "bytes" ? i : i.map((s) => xi(s));
}
function t4(t) {
  const { kzg: e } = t, r = t.to ?? (typeof t.blobs[0] == "string" ? "hex" : "bytes"), n = typeof t.blobs[0] == "string" ? t.blobs.map((o) => Lo(o)) : t.blobs, i = typeof t.commitments[0] == "string" ? t.commitments.map((o) => Lo(o)) : t.commitments, s = [];
  for (let o = 0; o < n.length; o++) {
    const a = n[o], u = i[o];
    s.push(Uint8Array.from(e.computeBlobKzgProof(a, u)));
  }
  return r === "bytes" ? s : s.map((o) => xi(o));
}
function fN(t, e, r, n) {
  if (typeof t.setBigUint64 == "function")
    return t.setBigUint64(e, r, n);
  const i = BigInt(32), s = BigInt(4294967295), o = Number(r >> i & s), a = Number(r & s), u = n ? 4 : 0, l = n ? 0 : 4;
  t.setUint32(e + u, o, n), t.setUint32(e + l, a, n);
}
const lN = (t, e, r) => t & e ^ ~t & r, hN = (t, e, r) => t & e ^ t & r ^ e & r;
class dN extends I5 {
  constructor(e, r, n, i) {
    super(), this.blockLen = e, this.outputLen = r, this.padOffset = n, this.isLE = i, this.finished = !1, this.length = 0, this.pos = 0, this.destroyed = !1, this.buffer = new Uint8Array(e), this.view = Bg(this.buffer);
  }
  update(e) {
    Hd(this);
    const { view: r, buffer: n, blockLen: i } = this;
    e = C0(e);
    const s = e.length;
    for (let o = 0; o < s; ) {
      const a = Math.min(i - this.pos, s - o);
      if (a === i) {
        const u = Bg(e);
        for (; i <= s - o; o += i)
          this.process(u, o);
        continue;
      }
      n.set(e.subarray(o, o + a), this.pos), this.pos += a, o += a, this.pos === i && (this.process(r, 0), this.pos = 0);
    }
    return this.length += e.length, this.roundClean(), this;
  }
  digestInto(e) {
    Hd(this), M5(e, this), this.finished = !0;
    const { buffer: r, view: n, blockLen: i, isLE: s } = this;
    let { pos: o } = this;
    r[o++] = 128, this.buffer.subarray(o).fill(0), this.padOffset > i - o && (this.process(n, 0), o = 0);
    for (let p = o; p < i; p++)
      r[p] = 0;
    fN(n, i - 8, BigInt(this.length * 8), s), this.process(n, 0);
    const a = Bg(e), u = this.outputLen;
    if (u % 4)
      throw new Error("_sha2: outputLen should be aligned to 32bit");
    const l = u / 4, d = this.get();
    if (l > d.length)
      throw new Error("_sha2: outputLen bigger than state");
    for (let p = 0; p < l; p++)
      a.setUint32(4 * p, d[p], s);
  }
  digest() {
    const { buffer: e, outputLen: r } = this;
    this.digestInto(e);
    const n = e.slice(0, r);
    return this.destroy(), n;
  }
  _cloneInto(e) {
    e || (e = new this.constructor()), e.set(...this.get());
    const { blockLen: r, buffer: n, length: i, finished: s, destroyed: o, pos: a } = this;
    return e.length = i, e.pos = a, e.finished = s, e.destroyed = o, i % r && e.buffer.set(n), e;
  }
}
const pN = /* @__PURE__ */ new Uint32Array([
  1116352408,
  1899447441,
  3049323471,
  3921009573,
  961987163,
  1508970993,
  2453635748,
  2870763221,
  3624381080,
  310598401,
  607225278,
  1426881987,
  1925078388,
  2162078206,
  2614888103,
  3248222580,
  3835390401,
  4022224774,
  264347078,
  604807628,
  770255983,
  1249150122,
  1555081692,
  1996064986,
  2554220882,
  2821834349,
  2952996808,
  3210313671,
  3336571891,
  3584528711,
  113926993,
  338241895,
  666307205,
  773529912,
  1294757372,
  1396182291,
  1695183700,
  1986661051,
  2177026350,
  2456956037,
  2730485921,
  2820302411,
  3259730800,
  3345764771,
  3516065817,
  3600352804,
  4094571909,
  275423344,
  430227734,
  506948616,
  659060556,
  883997877,
  958139571,
  1322822218,
  1537002063,
  1747873779,
  1955562222,
  2024104815,
  2227730452,
  2361852424,
  2428436474,
  2756734187,
  3204031479,
  3329325298
]), Qo = /* @__PURE__ */ new Uint32Array([
  1779033703,
  3144134277,
  1013904242,
  2773480762,
  1359893119,
  2600822924,
  528734635,
  1541459225
]), ea = /* @__PURE__ */ new Uint32Array(64);
let gN = class extends dN {
  constructor() {
    super(64, 32, 8, !1), this.A = Qo[0] | 0, this.B = Qo[1] | 0, this.C = Qo[2] | 0, this.D = Qo[3] | 0, this.E = Qo[4] | 0, this.F = Qo[5] | 0, this.G = Qo[6] | 0, this.H = Qo[7] | 0;
  }
  get() {
    const { A: e, B: r, C: n, D: i, E: s, F: o, G: a, H: u } = this;
    return [e, r, n, i, s, o, a, u];
  }
  // prettier-ignore
  set(e, r, n, i, s, o, a, u) {
    this.A = e | 0, this.B = r | 0, this.C = n | 0, this.D = i | 0, this.E = s | 0, this.F = o | 0, this.G = a | 0, this.H = u | 0;
  }
  process(e, r) {
    for (let p = 0; p < 16; p++, r += 4)
      ea[p] = e.getUint32(r, !1);
    for (let p = 16; p < 64; p++) {
      const w = ea[p - 15], A = ea[p - 2], M = Ns(w, 7) ^ Ns(w, 18) ^ w >>> 3, N = Ns(A, 17) ^ Ns(A, 19) ^ A >>> 10;
      ea[p] = N + ea[p - 7] + M + ea[p - 16] | 0;
    }
    let { A: n, B: i, C: s, D: o, E: a, F: u, G: l, H: d } = this;
    for (let p = 0; p < 64; p++) {
      const w = Ns(a, 6) ^ Ns(a, 11) ^ Ns(a, 25), A = d + w + lN(a, u, l) + pN[p] + ea[p] | 0, N = (Ns(n, 2) ^ Ns(n, 13) ^ Ns(n, 22)) + hN(n, i, s) | 0;
      d = l, l = u, u = a, a = o + A | 0, o = s, s = i, i = n, n = A + N | 0;
    }
    n = n + this.A | 0, i = i + this.B | 0, s = s + this.C | 0, o = o + this.D | 0, a = a + this.E | 0, u = u + this.F | 0, l = l + this.G | 0, d = d + this.H | 0, this.set(n, i, s, o, a, u, l, d);
  }
  roundClean() {
    ea.fill(0);
  }
  destroy() {
    this.set(0, 0, 0, 0, 0, 0, 0, 0), this.buffer.fill(0);
  }
};
const r4 = /* @__PURE__ */ C5(() => new gN());
function mN(t, e) {
  return r4(va(t, { strict: !1 }) ? _v(t) : t);
}
function vN(t) {
  const { commitment: e, version: r = 1 } = t, n = t.to ?? (typeof e == "string" ? "hex" : "bytes"), i = mN(e);
  return i.set([r], 0), n === "bytes" ? i : xi(i);
}
function bN(t) {
  const { commitments: e, version: r } = t, n = t.to ?? (typeof e[0] == "string" ? "hex" : "bytes"), i = [];
  for (const s of e)
    i.push(vN({
      commitment: s,
      to: n,
      version: r
    }));
  return i;
}
const R2 = 6, n4 = 32, Dv = 4096, i4 = n4 * Dv, D2 = i4 * R2 - // terminator byte (0x80).
1 - // zero byte (0x00) appended to each field element.
1 * Dv * R2;
class yN extends yt {
  constructor({ maxSize: e, size: r }) {
    super("Blob size is too large.", {
      metaMessages: [`Max: ${e} bytes`, `Given: ${r} bytes`],
      name: "BlobSizeTooLargeError"
    });
  }
}
class wN extends yt {
  constructor() {
    super("Blob data must not be empty.", { name: "EmptyBlobError" });
  }
}
function xN(t) {
  const e = t.to ?? (typeof t.data == "string" ? "hex" : "bytes"), r = typeof t.data == "string" ? Lo(t.data) : t.data, n = An(r);
  if (!n)
    throw new wN();
  if (n > D2)
    throw new yN({
      maxSize: D2,
      size: n
    });
  const i = [];
  let s = !0, o = 0;
  for (; s; ) {
    const a = Iv(new Uint8Array(i4));
    let u = 0;
    for (; u < Dv; ) {
      const l = r.slice(o, o + (n4 - 1));
      if (a.pushByte(0), a.pushBytes(l), l.length < 31) {
        a.pushByte(128), s = !1;
        break;
      }
      u++, o += 31;
    }
    i.push(a);
  }
  return e === "bytes" ? i.map((a) => a.bytes) : i.map((a) => xi(a.bytes));
}
function _N(t) {
  const { data: e, kzg: r, to: n } = t, i = t.blobs ?? xN({ data: e, to: n }), s = t.commitments ?? e4({ blobs: i, kzg: r, to: n }), o = t.proofs ?? t4({ blobs: i, commitments: s, kzg: r, to: n }), a = [];
  for (let u = 0; u < i.length; u++)
    a.push({
      blob: i[u],
      commitment: s[u],
      proof: o[u]
    });
  return a;
}
function EN(t) {
  if (t.type)
    return t.type;
  if (typeof t.authorizationList < "u")
    return "eip7702";
  if (typeof t.blobs < "u" || typeof t.blobVersionedHashes < "u" || typeof t.maxFeePerBlobGas < "u" || typeof t.sidecars < "u")
    return "eip4844";
  if (typeof t.maxFeePerGas < "u" || typeof t.maxPriorityFeePerGas < "u")
    return "eip1559";
  if (typeof t.gasPrice < "u")
    return typeof t.accessList < "u" ? "eip2930" : "legacy";
  throw new CO({ transaction: t });
}
async function N0(t) {
  const e = await t.request({
    method: "eth_chainId"
  }, { dedupe: !0 });
  return bu(e);
}
const s4 = [
  "blobVersionedHashes",
  "chainId",
  "fees",
  "gas",
  "nonce",
  "type"
];
async function Ov(t, e) {
  const { account: r = t.account, blobs: n, chain: i, gas: s, kzg: o, nonce: a, nonceManager: u, parameters: l = s4, type: d } = e, p = r && qo(r), w = { ...e, ...p ? { from: p == null ? void 0 : p.address } : {} };
  let A;
  async function M() {
    return A || (A = await bi(t, Yd, "getBlock")({ blockTag: "latest" }), A);
  }
  let N;
  async function L() {
    return N || (i ? i.id : typeof e.chainId < "u" ? e.chainId : (N = await bi(t, N0, "getChainId")({}), N));
  }
  if ((l.includes("blobVersionedHashes") || l.includes("sidecars")) && n && o) {
    const B = e4({ blobs: n, kzg: o });
    if (l.includes("blobVersionedHashes")) {
      const $ = bN({
        commitments: B,
        to: "hex"
      });
      w.blobVersionedHashes = $;
    }
    if (l.includes("sidecars")) {
      const $ = t4({ blobs: n, commitments: B, kzg: o }), H = _N({
        blobs: n,
        commitments: B,
        proofs: $,
        to: "hex"
      });
      w.sidecars = H;
    }
  }
  if (l.includes("chainId") && (w.chainId = await L()), l.includes("nonce") && typeof a > "u" && p)
    if (u) {
      const B = await L();
      w.nonce = await u.consume({
        address: p.address,
        chainId: B,
        client: t
      });
    } else
      w.nonce = await bi(t, uN, "getTransactionCount")({
        address: p.address,
        blockTag: "pending"
      });
  if ((l.includes("fees") || l.includes("type")) && typeof d > "u")
    try {
      w.type = EN(w);
    } catch {
      const B = await M();
      w.type = typeof (B == null ? void 0 : B.baseFeePerGas) == "bigint" ? "eip1559" : "legacy";
    }
  if (l.includes("fees"))
    if (w.type !== "legacy" && w.type !== "eip2930") {
      if (typeof w.maxFeePerGas > "u" || typeof w.maxPriorityFeePerGas > "u") {
        const B = await M(), { maxFeePerGas: $, maxPriorityFeePerGas: H } = await T2(t, {
          block: B,
          chain: i,
          request: w
        });
        if (typeof e.maxPriorityFeePerGas > "u" && e.maxFeePerGas && e.maxFeePerGas < H)
          throw new rN({
            maxPriorityFeePerGas: H
          });
        w.maxPriorityFeePerGas = H, w.maxFeePerGas = $;
      }
    } else {
      if (typeof e.maxFeePerGas < "u" || typeof e.maxPriorityFeePerGas < "u")
        throw new Rv();
      const B = await M(), { gasPrice: $ } = await T2(t, {
        block: B,
        chain: i,
        request: w,
        type: "legacy"
      });
      w.gasPrice = $;
    }
  return l.includes("gas") && typeof s > "u" && (w.gas = await bi(t, AN, "estimateGas")({
    ...w,
    account: p && { address: p.address, type: "json-rpc" }
  })), O0(w), delete w.parameters, w;
}
async function SN(t, { address: e, blockNumber: r, blockTag: n = "latest" }) {
  const i = r ? Mr(r) : void 0, s = await t.request({
    method: "eth_getBalance",
    params: [e, i || n]
  });
  return BigInt(s);
}
async function AN(t, e) {
  var i, s, o;
  const { account: r = t.account } = e, n = r ? qo(r) : void 0;
  try {
    let f = function(b) {
      const { block: x, request: _, rpcStateOverride: E } = b;
      return t.request({
        method: "eth_estimateGas",
        params: E ? [_, x ?? "latest", E] : x ? [_, x] : [_]
      });
    };
    const { accessList: a, authorizationList: u, blobs: l, blobVersionedHashes: d, blockNumber: p, blockTag: w, data: A, gas: M, gasPrice: N, maxFeePerBlobGas: L, maxFeePerGas: B, maxPriorityFeePerGas: $, nonce: H, value: W, stateOverride: V, ...te } = await Ov(t, {
      ...e,
      parameters: (
        // Some RPC Providers do not compute versioned hashes from blobs. We will need
        // to compute them.
        (n == null ? void 0 : n.type) === "local" ? void 0 : ["blobVersionedHashes"]
      )
    }), K = (p ? Mr(p) : void 0) || w, ge = QO(V), Ee = await (async () => {
      if (te.to)
        return te.to;
      if (u && u.length > 0)
        return await J5({
          authorization: u[0]
        }).catch(() => {
          throw new yt("`to` is required. Could not infer from `authorizationList`");
        });
    })();
    O0(e);
    const Y = (o = (s = (i = t.chain) == null ? void 0 : i.formatters) == null ? void 0 : s.transactionRequest) == null ? void 0 : o.format, m = (Y || Tv)({
      // Pick out extra data that might exist on the chain's transaction request type.
      ...Z5(te, { format: Y }),
      from: n == null ? void 0 : n.address,
      accessList: a,
      authorizationList: u,
      blobs: l,
      blobVersionedHashes: d,
      data: A,
      gas: M,
      gasPrice: N,
      maxFeePerBlobGas: L,
      maxFeePerGas: B,
      maxPriorityFeePerGas: $,
      nonce: H,
      to: Ee,
      value: W
    });
    let g = BigInt(await f({ block: K, request: m, rpcStateOverride: ge }));
    if (u) {
      const b = await SN(t, { address: m.from }), x = await Promise.all(u.map(async (_) => {
        const { contractAddress: E } = _, v = await f({
          block: K,
          request: {
            authorizationList: void 0,
            data: A,
            from: n == null ? void 0 : n.address,
            to: E,
            value: Mr(b)
          },
          rpcStateOverride: ge
        }).catch(() => 100000n);
        return 2n * BigInt(v);
      }));
      g += x.reduce((_, E) => _ + E, 0n);
    }
    return g;
  } catch (a) {
    throw YO(a, {
      ...e,
      account: n,
      chain: t.chain
    });
  }
}
class PN extends yt {
  constructor({ chain: e, currentChainId: r }) {
    super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`, {
      metaMessages: [
        `Current Chain ID:  ${r}`,
        `Expected Chain ID: ${e.id} – ${e.name}`
      ],
      name: "ChainMismatchError"
    });
  }
}
class MN extends yt {
  constructor() {
    super([
      "No chain was provided to the request.",
      "Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."
    ].join(`
`), {
      name: "ChainNotFoundError"
    });
  }
}
const Ug = "/docs/contract/encodeDeployData";
function IN(t) {
  const { abi: e, args: r, bytecode: n } = t;
  if (!r || r.length === 0)
    return n;
  const i = e.find((o) => "type" in o && o.type === "constructor");
  if (!i)
    throw new KR({ docsPath: Ug });
  if (!("inputs" in i))
    throw new m2({ docsPath: Ug });
  if (!i.inputs || i.inputs.length === 0)
    throw new m2({ docsPath: Ug });
  const s = j5(i.inputs, r);
  return R0([n, s]);
}
async function CN(t) {
  return new Promise((e) => setTimeout(e, t));
}
class Fl extends yt {
  constructor({ docsPath: e } = {}) {
    super([
      "Could not find an Account to execute with this Action.",
      "Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."
    ].join(`
`), {
      docsPath: e,
      docsSlug: "account",
      name: "AccountNotFoundError"
    });
  }
}
class qg extends yt {
  constructor({ docsPath: e, metaMessages: r, type: n }) {
    super(`Account type "${n}" is not supported.`, {
      docsPath: e,
      metaMessages: r,
      name: "AccountTypeNotSupportedError"
    });
  }
}
function o4({ chain: t, currentChainId: e }) {
  if (!t)
    throw new MN();
  if (e !== t.id)
    throw new PN({ chain: t, currentChainId: e });
}
function TN(t, { docsPath: e, ...r }) {
  const n = (() => {
    const i = X5(t, r);
    return i instanceof Cv ? t : i;
  })();
  return new TO(n, {
    docsPath: e,
    ...r
  });
}
async function a4(t, { serializedTransaction: e }) {
  return t.request({
    method: "eth_sendRawTransaction",
    params: [e]
  }, { retryCount: 0 });
}
const zg = new T0(128);
async function Nv(t, e) {
  var B, $, H, W;
  const { account: r = t.account, chain: n = t.chain, accessList: i, authorizationList: s, blobs: o, data: a, gas: u, gasPrice: l, maxFeePerBlobGas: d, maxFeePerGas: p, maxPriorityFeePerGas: w, nonce: A, value: M, ...N } = e;
  if (typeof r > "u")
    throw new Fl({
      docsPath: "/docs/actions/wallet/sendTransaction"
    });
  const L = r ? qo(r) : null;
  try {
    O0(e);
    const V = await (async () => {
      if (e.to)
        return e.to;
      if (s && s.length > 0)
        return await J5({
          authorization: s[0]
        }).catch(() => {
          throw new yt("`to` is required. Could not infer from `authorizationList`.");
        });
    })();
    if ((L == null ? void 0 : L.type) === "json-rpc" || L === null) {
      let te;
      n !== null && (te = await bi(t, N0, "getChainId")({}), o4({
        currentChainId: te,
        chain: n
      }));
      const R = (H = ($ = (B = t.chain) == null ? void 0 : B.formatters) == null ? void 0 : $.transactionRequest) == null ? void 0 : H.format, ge = (R || Tv)({
        // Pick out extra data that might exist on the chain's transaction request type.
        ...Z5(N, { format: R }),
        accessList: i,
        authorizationList: s,
        blobs: o,
        chainId: te,
        data: a,
        from: L == null ? void 0 : L.address,
        gas: u,
        gasPrice: l,
        maxFeePerBlobGas: d,
        maxFeePerGas: p,
        maxPriorityFeePerGas: w,
        nonce: A,
        to: V,
        value: M
      }), Ee = zg.get(t.uid), Y = Ee ? "wallet_sendTransaction" : "eth_sendTransaction";
      try {
        return await t.request({
          method: Y,
          params: [ge]
        }, { retryCount: 0 });
      } catch (S) {
        if (Ee === !1)
          throw S;
        const m = S;
        if (m.name === "InvalidInputRpcError" || m.name === "InvalidParamsRpcError" || m.name === "MethodNotFoundRpcError" || m.name === "MethodNotSupportedRpcError")
          return await t.request({
            method: "wallet_sendTransaction",
            params: [ge]
          }, { retryCount: 0 }).then((f) => (zg.set(t.uid, !0), f)).catch((f) => {
            const g = f;
            throw g.name === "MethodNotFoundRpcError" || g.name === "MethodNotSupportedRpcError" ? (zg.set(t.uid, !1), m) : g;
          });
        throw m;
      }
    }
    if ((L == null ? void 0 : L.type) === "local") {
      const te = await bi(t, Ov, "prepareTransactionRequest")({
        account: L,
        accessList: i,
        authorizationList: s,
        blobs: o,
        chain: n,
        data: a,
        gas: u,
        gasPrice: l,
        maxFeePerBlobGas: d,
        maxFeePerGas: p,
        maxPriorityFeePerGas: w,
        nonce: A,
        nonceManager: L.nonceManager,
        parameters: [...s4, "sidecars"],
        value: M,
        ...N,
        to: V
      }), R = (W = n == null ? void 0 : n.serializers) == null ? void 0 : W.transaction, K = await L.signTransaction(te, {
        serializer: R
      });
      return await bi(t, a4, "sendRawTransaction")({
        serializedTransaction: K
      });
    }
    throw (L == null ? void 0 : L.type) === "smart" ? new qg({
      metaMessages: [
        "Consider using the `sendUserOperation` Action instead."
      ],
      docsPath: "/docs/actions/bundler/sendUserOperation",
      type: "smart"
    }) : new qg({
      docsPath: "/docs/actions/wallet/sendTransaction",
      type: L == null ? void 0 : L.type
    });
  } catch (V) {
    throw V instanceof qg ? V : TN(V, {
      ...e,
      account: L,
      chain: e.chain || void 0
    });
  }
}
async function RN(t, e) {
  const { abi: r, account: n = t.account, address: i, args: s, dataSuffix: o, functionName: a, ...u } = e;
  if (typeof n > "u")
    throw new Fl({
      docsPath: "/docs/contract/writeContract"
    });
  const l = n ? qo(n) : null, d = sO({
    abi: r,
    args: s,
    functionName: a
  });
  try {
    return await bi(t, Nv, "sendTransaction")({
      data: `${d}${o ? o.replace("0x", "") : ""}`,
      to: i,
      account: l,
      ...u
    });
  } catch (p) {
    throw jO(p, {
      abi: r,
      address: i,
      args: s,
      docsPath: "/docs/contract/writeContract",
      functionName: a,
      sender: l == null ? void 0 : l.address
    });
  }
}
async function DN(t, { chain: e }) {
  const { id: r, name: n, nativeCurrency: i, rpcUrls: s, blockExplorers: o } = e;
  await t.request({
    method: "wallet_addEthereumChain",
    params: [
      {
        chainId: Mr(r),
        chainName: n,
        nativeCurrency: i,
        rpcUrls: s.default.http,
        blockExplorerUrls: o ? Object.values(o).map(({ url: a }) => a) : void 0
      }
    ]
  }, { dedupe: !0, retryCount: 0 });
}
const a1 = 256;
let nd = a1, id;
function c4(t = 11) {
  if (!id || nd + t > a1 * 2) {
    id = "", nd = 0;
    for (let e = 0; e < a1; e++)
      id += (256 + Math.random() * 256 | 0).toString(16).substring(1);
  }
  return id.substring(nd, nd++ + t);
}
function ON(t) {
  const { batch: e, cacheTime: r = t.pollingInterval ?? 4e3, ccipRead: n, key: i = "base", name: s = "Base Client", pollingInterval: o = 4e3, type: a = "base" } = t, u = t.chain, l = t.account ? qo(t.account) : void 0, { config: d, request: p, value: w } = t.transport({
    chain: u,
    pollingInterval: o
  }), A = { ...d, ...w }, M = {
    account: l,
    batch: e,
    cacheTime: r,
    ccipRead: n,
    chain: u,
    key: i,
    name: s,
    pollingInterval: o,
    request: p,
    transport: A,
    type: a,
    uid: c4()
  };
  function N(L) {
    return (B) => {
      const $ = B(L);
      for (const W in M)
        delete $[W];
      const H = { ...L, ...$ };
      return Object.assign(H, { extend: N(H) });
    };
  }
  return Object.assign(M, { extend: N(M) });
}
const sd = /* @__PURE__ */ new T0(8192);
function NN(t, { enabled: e = !0, id: r }) {
  if (!e || !r)
    return t();
  if (sd.get(r))
    return sd.get(r);
  const n = t().finally(() => sd.delete(r));
  return sd.set(r, n), n;
}
function LN(t, { delay: e = 100, retryCount: r = 2, shouldRetry: n = () => !0 } = {}) {
  return new Promise((i, s) => {
    const o = async ({ count: a = 0 } = {}) => {
      const u = async ({ error: l }) => {
        const d = typeof e == "function" ? e({ count: a, error: l }) : e;
        d && await CN(d), o({ count: a + 1 });
      };
      try {
        const l = await t();
        i(l);
      } catch (l) {
        if (a < r && await n({ count: a, error: l }))
          return u({ error: l });
        s(l);
      }
    };
    o();
  });
}
function kN(t, e = {}) {
  return async (r, n = {}) => {
    const { dedupe: i = !1, retryDelay: s = 150, retryCount: o = 3, uid: a } = {
      ...e,
      ...n
    }, u = i ? $l(I0(`${a}.${Ru(r)}`)) : void 0;
    return NN(() => LN(async () => {
      try {
        return await t(r);
      } catch (l) {
        const d = l;
        switch (d.code) {
          case rl.code:
            throw new rl(d);
          case nl.code:
            throw new nl(d);
          case il.code:
            throw new il(d, { method: r.method });
          case sl.code:
            throw new sl(d);
          case uc.code:
            throw new uc(d);
          case ol.code:
            throw new ol(d);
          case al.code:
            throw new al(d);
          case cl.code:
            throw new cl(d);
          case ul.code:
            throw new ul(d);
          case fl.code:
            throw new fl(d, {
              method: r.method
            });
          case xu.code:
            throw new xu(d);
          case ll.code:
            throw new ll(d);
          case cu.code:
            throw new cu(d);
          case hl.code:
            throw new hl(d);
          case dl.code:
            throw new dl(d);
          case pl.code:
            throw new pl(d);
          case gl.code:
            throw new gl(d);
          case ml.code:
            throw new ml(d);
          case 5e3:
            throw new cu(d);
          default:
            throw l instanceof yt ? l : new BO(d);
        }
      }
    }, {
      delay: ({ count: l, error: d }) => {
        var p;
        if (d && d instanceof V5) {
          const w = (p = d == null ? void 0 : d.headers) == null ? void 0 : p.get("Retry-After");
          if (w != null && w.match(/\d/))
            return Number.parseInt(w) * 1e3;
        }
        return ~~(1 << l) * s;
      },
      retryCount: o,
      shouldRetry: ({ error: l }) => $N(l)
    }), { enabled: i, id: u });
  };
}
function $N(t) {
  return "code" in t && typeof t.code == "number" ? t.code === -1 || t.code === xu.code || t.code === uc.code : t instanceof V5 && t.status ? t.status === 403 || t.status === 408 || t.status === 413 || t.status === 429 || t.status === 500 || t.status === 502 || t.status === 503 || t.status === 504 : !0;
}
function BN({ key: t, name: e, request: r, retryCount: n = 3, retryDelay: i = 150, timeout: s, type: o }, a) {
  const u = c4();
  return {
    config: {
      key: t,
      name: e,
      request: r,
      retryCount: n,
      retryDelay: i,
      timeout: s,
      type: o
    },
    request: kN(r, { retryCount: n, retryDelay: i, uid: u }),
    value: a
  };
}
function FN(t, e = {}) {
  const { key: r = "custom", name: n = "Custom Provider", retryDelay: i } = e;
  return ({ retryCount: s }) => BN({
    key: r,
    name: n,
    request: t.request.bind(t),
    retryCount: e.retryCount ?? s,
    retryDelay: i,
    type: "custom"
  });
}
const jN = /^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/, UN = /^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;
class qN extends yt {
  constructor({ domain: e }) {
    super(`Invalid domain "${Ru(e)}".`, {
      metaMessages: ["Must be a valid EIP-712 domain."]
    });
  }
}
class zN extends yt {
  constructor({ primaryType: e, types: r }) {
    super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`, {
      docsPath: "/api/glossary/Errors#typeddatainvalidprimarytypeerror",
      metaMessages: ["Check that the primary type is a key in `types`."]
    });
  }
}
class WN extends yt {
  constructor({ type: e }) {
    super(`Struct type "${e}" is invalid.`, {
      metaMessages: ["Struct type must not be a Solidity type."],
      name: "InvalidStructTypeError"
    });
  }
}
function HN(t) {
  const { domain: e, message: r, primaryType: n, types: i } = t, s = (u, l) => {
    const d = { ...l };
    for (const p of u) {
      const { name: w, type: A } = p;
      A === "address" && (d[w] = d[w].toLowerCase());
    }
    return d;
  }, o = i.EIP712Domain ? e ? s(i.EIP712Domain, e) : {} : {}, a = (() => {
    if (n !== "EIP712Domain")
      return s(i[n], r);
  })();
  return Ru({ domain: o, message: a, primaryType: n, types: i });
}
function KN(t) {
  const { domain: e, message: r, primaryType: n, types: i } = t, s = (o, a) => {
    for (const u of o) {
      const { name: l, type: d } = u, p = a[l], w = d.match(UN);
      if (w && (typeof p == "number" || typeof p == "bigint")) {
        const [N, L, B] = w;
        Mr(p, {
          signed: L === "int",
          size: Number.parseInt(B) / 8
        });
      }
      if (d === "address" && typeof p == "string" && !ko(p))
        throw new yu({ address: p });
      const A = d.match(jN);
      if (A) {
        const [N, L] = A;
        if (L && An(p) !== Number.parseInt(L))
          throw new ZR({
            expectedSize: Number.parseInt(L),
            givenSize: An(p)
          });
      }
      const M = i[d];
      M && (GN(d), s(M, p));
    }
  };
  if (i.EIP712Domain && e) {
    if (typeof e != "object")
      throw new qN({ domain: e });
    s(i.EIP712Domain, e);
  }
  if (n !== "EIP712Domain")
    if (i[n])
      s(i[n], r);
    else
      throw new zN({ primaryType: n, types: i });
}
function VN({ domain: t }) {
  return [
    typeof (t == null ? void 0 : t.name) == "string" && { name: "name", type: "string" },
    (t == null ? void 0 : t.version) && { name: "version", type: "string" },
    typeof (t == null ? void 0 : t.chainId) == "number" && {
      name: "chainId",
      type: "uint256"
    },
    (t == null ? void 0 : t.verifyingContract) && {
      name: "verifyingContract",
      type: "address"
    },
    (t == null ? void 0 : t.salt) && { name: "salt", type: "bytes32" }
  ].filter(Boolean);
}
function GN(t) {
  if (t === "address" || t === "bool" || t === "string" || t.startsWith("bytes") || t.startsWith("uint") || t.startsWith("int"))
    throw new WN({ type: t });
}
function YN(t, e) {
  const { abi: r, args: n, bytecode: i, ...s } = e, o = IN({ abi: r, args: n, bytecode: i });
  return Nv(t, {
    ...s,
    data: o
  });
}
async function JN(t) {
  var r;
  return ((r = t.account) == null ? void 0 : r.type) === "local" ? [t.account.address] : (await t.request({ method: "eth_accounts" }, { dedupe: !0 })).map((n) => Bl(n));
}
async function XN(t) {
  return await t.request({ method: "wallet_getPermissions" }, { dedupe: !0 });
}
async function ZN(t) {
  return (await t.request({ method: "eth_requestAccounts" }, { dedupe: !0, retryCount: 0 })).map((r) => Ev(r));
}
async function QN(t, e) {
  return t.request({
    method: "wallet_requestPermissions",
    params: [e]
  }, { retryCount: 0 });
}
async function eL(t, { account: e = t.account, message: r }) {
  if (!e)
    throw new Fl({
      docsPath: "/docs/actions/wallet/signMessage"
    });
  const n = qo(e);
  if (n.signMessage)
    return n.signMessage({ message: r });
  const i = typeof r == "string" ? I0(r) : r.raw instanceof Uint8Array ? zd(r.raw) : r.raw;
  return t.request({
    method: "personal_sign",
    params: [i, n.address]
  }, { retryCount: 0 });
}
async function tL(t, e) {
  var l, d, p, w;
  const { account: r = t.account, chain: n = t.chain, ...i } = e;
  if (!r)
    throw new Fl({
      docsPath: "/docs/actions/wallet/signTransaction"
    });
  const s = qo(r);
  O0({
    account: s,
    ...e
  });
  const o = await bi(t, N0, "getChainId")({});
  n !== null && o4({
    currentChainId: o,
    chain: n
  });
  const a = (n == null ? void 0 : n.formatters) || ((l = t.chain) == null ? void 0 : l.formatters), u = ((d = a == null ? void 0 : a.transactionRequest) == null ? void 0 : d.format) || Tv;
  return s.signTransaction ? s.signTransaction({
    ...i,
    chainId: o
  }, { serializer: (w = (p = t.chain) == null ? void 0 : p.serializers) == null ? void 0 : w.transaction }) : await t.request({
    method: "eth_signTransaction",
    params: [
      {
        ...u(i),
        chainId: Mr(o),
        from: s.address
      }
    ]
  }, { retryCount: 0 });
}
async function rL(t, e) {
  const { account: r = t.account, domain: n, message: i, primaryType: s } = e;
  if (!r)
    throw new Fl({
      docsPath: "/docs/actions/wallet/signTypedData"
    });
  const o = qo(r), a = {
    EIP712Domain: VN({ domain: n }),
    ...e.types
  };
  if (KN({ domain: n, message: i, primaryType: s, types: a }), o.signTypedData)
    return o.signTypedData({ domain: n, message: i, primaryType: s, types: a });
  const u = HN({ domain: n, message: i, primaryType: s, types: a });
  return t.request({
    method: "eth_signTypedData_v4",
    params: [o.address, u]
  }, { retryCount: 0 });
}
async function nL(t, { id: e }) {
  await t.request({
    method: "wallet_switchEthereumChain",
    params: [
      {
        chainId: Mr(e)
      }
    ]
  }, { retryCount: 0 });
}
async function iL(t, e) {
  return await t.request({
    method: "wallet_watchAsset",
    params: e
  }, { retryCount: 0 });
}
function sL(t) {
  return {
    addChain: (e) => DN(t, e),
    deployContract: (e) => YN(t, e),
    getAddresses: () => JN(t),
    getChainId: () => N0(t),
    getPermissions: () => XN(t),
    prepareTransactionRequest: (e) => Ov(t, e),
    requestAddresses: () => ZN(t),
    requestPermissions: (e) => QN(t, e),
    sendRawTransaction: (e) => a4(t, e),
    sendTransaction: (e) => Nv(t, e),
    signMessage: (e) => eL(t, e),
    signTransaction: (e) => tL(t, e),
    signTypedData: (e) => rL(t, e),
    switchChain: (e) => nL(t, e),
    watchAsset: (e) => iL(t, e),
    writeContract: (e) => RN(t, e)
  };
}
function oL(t) {
  const { key: e = "wallet", name: r = "Wallet Client", transport: n } = t;
  return ON({
    ...t,
    key: e,
    name: r,
    transport: n,
    type: "walletClient"
  }).extend(sL);
}
class vl {
  constructor(e) {
    Ds(this, "_key");
    Ds(this, "_config", null);
    Ds(this, "_provider", null);
    Ds(this, "_connected", !1);
    Ds(this, "_address", null);
    Ds(this, "_fatured", !1);
    Ds(this, "_installed", !1);
    Ds(this, "lastUsed", !1);
    var r;
    if ("name" in e && "image" in e)
      this._key = e.name, this._config = e, this._fatured = e.featured;
    else if ("session" in e) {
      if (!e.session) throw new Error("session is null");
      this._key = (r = e.session) == null ? void 0 : r.peer.metadata.name, this._provider = e, this._config = {
        name: e.session.peer.metadata.name,
        image: e.session.peer.metadata.icons[0],
        featured: !1
      };
    } else if ("info" in e)
      console.log(e.info, "installed"), this._key = e.info.name, this._provider = e.provider, this._installed = !0, this._config = {
        name: e.info.name,
        image: e.info.icon,
        featured: !1
      }, this.testConnect();
    else
      throw new Error("unknown params");
  }
  get address() {
    return this._address;
  }
  get connected() {
    return this._connected;
  }
  get featured() {
    return this._fatured;
  }
  get key() {
    return this._key;
  }
  get installed() {
    return this._installed;
  }
  get client() {
    return this._provider ? oL({ transport: FN(this._provider) }) : null;
  }
  get config() {
    return this._config;
  }
  static fromWalletConfig(e) {
    return new vl(e);
  }
  EIP6963Detected(e) {
    this._provider = e.provider, this._installed = !0, this._provider.on("disconnect", this.disconnect), this._provider.on("accountsChanged", (r) => {
      this._address = r[0], this._connected = !0;
    }), this.testConnect();
  }
  setUniversalProvider(e) {
    this._provider = e, this.testConnect();
  }
  async testConnect() {
    var r;
    const e = await ((r = this.client) == null ? void 0 : r.getAddresses());
    e && e.length > 0 ? (this._address = e[0], this._connected = !0) : (this._address = null, this._connected = !1);
  }
  async connect() {
    var r;
    const e = await ((r = this.client) == null ? void 0 : r.request({ method: "eth_requestAccounts", params: void 0 }));
    if (!e) throw new Error("connect failed");
    return e;
  }
  async getAddress() {
    var r;
    const e = await ((r = this.client) == null ? void 0 : r.getAddresses());
    if (!e) throw new Error("get address failed");
    return e[0];
  }
  async getChain() {
    var r;
    const e = await ((r = this.client) == null ? void 0 : r.getChainId());
    if (!e) throw new Error("get chain failed");
    return e;
  }
  async signMessage(e, r) {
    var i;
    return await ((i = this.client) == null ? void 0 : i.signMessage({ message: e, account: r }));
  }
  async disconnect() {
    this._provider && "session" in this._provider && await this._provider.disconnect(), this._connected = !1, this._address = null;
  }
}
var Lv = { exports: {} }, uu = typeof Reflect == "object" ? Reflect : null, O2 = uu && typeof uu.apply == "function" ? uu.apply : function(e, r, n) {
  return Function.prototype.apply.call(e, r, n);
}, xd;
uu && typeof uu.ownKeys == "function" ? xd = uu.ownKeys : Object.getOwnPropertySymbols ? xd = function(e) {
  return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
} : xd = function(e) {
  return Object.getOwnPropertyNames(e);
};
function aL(t) {
  console && console.warn && console.warn(t);
}
var u4 = Number.isNaN || function(e) {
  return e !== e;
};
function kr() {
  kr.init.call(this);
}
Lv.exports = kr;
Lv.exports.once = lL;
kr.EventEmitter = kr;
kr.prototype._events = void 0;
kr.prototype._eventsCount = 0;
kr.prototype._maxListeners = void 0;
var N2 = 10;
function L0(t) {
  if (typeof t != "function")
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof t);
}
Object.defineProperty(kr, "defaultMaxListeners", {
  enumerable: !0,
  get: function() {
    return N2;
  },
  set: function(t) {
    if (typeof t != "number" || t < 0 || u4(t))
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + t + ".");
    N2 = t;
  }
});
kr.init = function() {
  (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
};
kr.prototype.setMaxListeners = function(e) {
  if (typeof e != "number" || e < 0 || u4(e))
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e + ".");
  return this._maxListeners = e, this;
};
function f4(t) {
  return t._maxListeners === void 0 ? kr.defaultMaxListeners : t._maxListeners;
}
kr.prototype.getMaxListeners = function() {
  return f4(this);
};
kr.prototype.emit = function(e) {
  for (var r = [], n = 1; n < arguments.length; n++) r.push(arguments[n]);
  var i = e === "error", s = this._events;
  if (s !== void 0)
    i = i && s.error === void 0;
  else if (!i)
    return !1;
  if (i) {
    var o;
    if (r.length > 0 && (o = r[0]), o instanceof Error)
      throw o;
    var a = new Error("Unhandled error." + (o ? " (" + o.message + ")" : ""));
    throw a.context = o, a;
  }
  var u = s[e];
  if (u === void 0)
    return !1;
  if (typeof u == "function")
    O2(u, this, r);
  else
    for (var l = u.length, d = g4(u, l), n = 0; n < l; ++n)
      O2(d[n], this, r);
  return !0;
};
function l4(t, e, r, n) {
  var i, s, o;
  if (L0(r), s = t._events, s === void 0 ? (s = t._events = /* @__PURE__ */ Object.create(null), t._eventsCount = 0) : (s.newListener !== void 0 && (t.emit(
    "newListener",
    e,
    r.listener ? r.listener : r
  ), s = t._events), o = s[e]), o === void 0)
    o = s[e] = r, ++t._eventsCount;
  else if (typeof o == "function" ? o = s[e] = n ? [r, o] : [o, r] : n ? o.unshift(r) : o.push(r), i = f4(t), i > 0 && o.length > i && !o.warned) {
    o.warned = !0;
    var a = new Error("Possible EventEmitter memory leak detected. " + o.length + " " + String(e) + " listeners added. Use emitter.setMaxListeners() to increase limit");
    a.name = "MaxListenersExceededWarning", a.emitter = t, a.type = e, a.count = o.length, aL(a);
  }
  return t;
}
kr.prototype.addListener = function(e, r) {
  return l4(this, e, r, !1);
};
kr.prototype.on = kr.prototype.addListener;
kr.prototype.prependListener = function(e, r) {
  return l4(this, e, r, !0);
};
function cL() {
  if (!this.fired)
    return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
}
function h4(t, e, r) {
  var n = { fired: !1, wrapFn: void 0, target: t, type: e, listener: r }, i = cL.bind(n);
  return i.listener = r, n.wrapFn = i, i;
}
kr.prototype.once = function(e, r) {
  return L0(r), this.on(e, h4(this, e, r)), this;
};
kr.prototype.prependOnceListener = function(e, r) {
  return L0(r), this.prependListener(e, h4(this, e, r)), this;
};
kr.prototype.removeListener = function(e, r) {
  var n, i, s, o, a;
  if (L0(r), i = this._events, i === void 0)
    return this;
  if (n = i[e], n === void 0)
    return this;
  if (n === r || n.listener === r)
    --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete i[e], i.removeListener && this.emit("removeListener", e, n.listener || r));
  else if (typeof n != "function") {
    for (s = -1, o = n.length - 1; o >= 0; o--)
      if (n[o] === r || n[o].listener === r) {
        a = n[o].listener, s = o;
        break;
      }
    if (s < 0)
      return this;
    s === 0 ? n.shift() : uL(n, s), n.length === 1 && (i[e] = n[0]), i.removeListener !== void 0 && this.emit("removeListener", e, a || r);
  }
  return this;
};
kr.prototype.off = kr.prototype.removeListener;
kr.prototype.removeAllListeners = function(e) {
  var r, n, i;
  if (n = this._events, n === void 0)
    return this;
  if (n.removeListener === void 0)
    return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : n[e] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete n[e]), this;
  if (arguments.length === 0) {
    var s = Object.keys(n), o;
    for (i = 0; i < s.length; ++i)
      o = s[i], o !== "removeListener" && this.removeAllListeners(o);
    return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
  }
  if (r = n[e], typeof r == "function")
    this.removeListener(e, r);
  else if (r !== void 0)
    for (i = r.length - 1; i >= 0; i--)
      this.removeListener(e, r[i]);
  return this;
};
function d4(t, e, r) {
  var n = t._events;
  if (n === void 0)
    return [];
  var i = n[e];
  return i === void 0 ? [] : typeof i == "function" ? r ? [i.listener || i] : [i] : r ? fL(i) : g4(i, i.length);
}
kr.prototype.listeners = function(e) {
  return d4(this, e, !0);
};
kr.prototype.rawListeners = function(e) {
  return d4(this, e, !1);
};
kr.listenerCount = function(t, e) {
  return typeof t.listenerCount == "function" ? t.listenerCount(e) : p4.call(t, e);
};
kr.prototype.listenerCount = p4;
function p4(t) {
  var e = this._events;
  if (e !== void 0) {
    var r = e[t];
    if (typeof r == "function")
      return 1;
    if (r !== void 0)
      return r.length;
  }
  return 0;
}
kr.prototype.eventNames = function() {
  return this._eventsCount > 0 ? xd(this._events) : [];
};
function g4(t, e) {
  for (var r = new Array(e), n = 0; n < e; ++n)
    r[n] = t[n];
  return r;
}
function uL(t, e) {
  for (; e + 1 < t.length; e++)
    t[e] = t[e + 1];
  t.pop();
}
function fL(t) {
  for (var e = new Array(t.length), r = 0; r < e.length; ++r)
    e[r] = t[r].listener || t[r];
  return e;
}
function lL(t, e) {
  return new Promise(function(r, n) {
    function i(o) {
      t.removeListener(e, s), n(o);
    }
    function s() {
      typeof t.removeListener == "function" && t.removeListener("error", i), r([].slice.call(arguments));
    }
    m4(t, e, s, { once: !0 }), e !== "error" && hL(t, i, { once: !0 });
  });
}
function hL(t, e, r) {
  typeof t.on == "function" && m4(t, "error", e, r);
}
function m4(t, e, r, n) {
  if (typeof t.on == "function")
    n.once ? t.once(e, r) : t.on(e, r);
  else if (typeof t.addEventListener == "function")
    t.addEventListener(e, function i(s) {
      n.once && t.removeEventListener(e, i), r(s);
    });
  else
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof t);
}
var rs = Lv.exports;
const kv = /* @__PURE__ */ ts(rs);
var mt = {};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var c1 = function(t, e) {
  return c1 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n) n.hasOwnProperty(i) && (r[i] = n[i]);
  }, c1(t, e);
};
function dL(t, e) {
  c1(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var u1 = function() {
  return u1 = Object.assign || function(e) {
    for (var r, n = 1, i = arguments.length; n < i; n++) {
      r = arguments[n];
      for (var s in r) Object.prototype.hasOwnProperty.call(r, s) && (e[s] = r[s]);
    }
    return e;
  }, u1.apply(this, arguments);
};
function pL(t, e) {
  var r = {};
  for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, n = Object.getOwnPropertySymbols(t); i < n.length; i++)
      e.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[i]) && (r[n[i]] = t[n[i]]);
  return r;
}
function gL(t, e, r, n) {
  var i = arguments.length, s = i < 3 ? e : n === null ? n = Object.getOwnPropertyDescriptor(e, r) : n, o;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") s = Reflect.decorate(t, e, r, n);
  else for (var a = t.length - 1; a >= 0; a--) (o = t[a]) && (s = (i < 3 ? o(s) : i > 3 ? o(e, r, s) : o(e, r)) || s);
  return i > 3 && s && Object.defineProperty(e, r, s), s;
}
function mL(t, e) {
  return function(r, n) {
    e(r, n, t);
  };
}
function vL(t, e) {
  if (typeof Reflect == "object" && typeof Reflect.metadata == "function") return Reflect.metadata(t, e);
}
function bL(t, e, r, n) {
  function i(s) {
    return s instanceof r ? s : new r(function(o) {
      o(s);
    });
  }
  return new (r || (r = Promise))(function(s, o) {
    function a(d) {
      try {
        l(n.next(d));
      } catch (p) {
        o(p);
      }
    }
    function u(d) {
      try {
        l(n.throw(d));
      } catch (p) {
        o(p);
      }
    }
    function l(d) {
      d.done ? s(d.value) : i(d.value).then(a, u);
    }
    l((n = n.apply(t, e || [])).next());
  });
}
function yL(t, e) {
  var r = { label: 0, sent: function() {
    if (s[0] & 1) throw s[1];
    return s[1];
  }, trys: [], ops: [] }, n, i, s, o;
  return o = { next: a(0), throw: a(1), return: a(2) }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function a(l) {
    return function(d) {
      return u([l, d]);
    };
  }
  function u(l) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (s = l[0] & 2 ? i.return : l[0] ? i.throw || ((s = i.return) && s.call(i), 0) : i.next) && !(s = s.call(i, l[1])).done) return s;
      switch (i = 0, s && (l = [l[0] & 2, s.value]), l[0]) {
        case 0:
        case 1:
          s = l;
          break;
        case 4:
          return r.label++, { value: l[1], done: !1 };
        case 5:
          r.label++, i = l[1], l = [0];
          continue;
        case 7:
          l = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (s = r.trys, !(s = s.length > 0 && s[s.length - 1]) && (l[0] === 6 || l[0] === 2)) {
            r = 0;
            continue;
          }
          if (l[0] === 3 && (!s || l[1] > s[0] && l[1] < s[3])) {
            r.label = l[1];
            break;
          }
          if (l[0] === 6 && r.label < s[1]) {
            r.label = s[1], s = l;
            break;
          }
          if (s && r.label < s[2]) {
            r.label = s[2], r.ops.push(l);
            break;
          }
          s[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      l = e.call(t, r);
    } catch (d) {
      l = [6, d], i = 0;
    } finally {
      n = s = 0;
    }
    if (l[0] & 5) throw l[1];
    return { value: l[0] ? l[1] : void 0, done: !0 };
  }
}
function wL(t, e, r, n) {
  n === void 0 && (n = r), t[n] = e[r];
}
function xL(t, e) {
  for (var r in t) r !== "default" && !e.hasOwnProperty(r) && (e[r] = t[r]);
}
function f1(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function v4(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, s = [], o;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) s.push(i.value);
  } catch (a) {
    o = { error: a };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o) throw o.error;
    }
  }
  return s;
}
function _L() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t = t.concat(v4(arguments[e]));
  return t;
}
function EL() {
  for (var t = 0, e = 0, r = arguments.length; e < r; e++) t += arguments[e].length;
  for (var n = Array(t), i = 0, e = 0; e < r; e++)
    for (var s = arguments[e], o = 0, a = s.length; o < a; o++, i++)
      n[i] = s[o];
  return n;
}
function bl(t) {
  return this instanceof bl ? (this.v = t, this) : new bl(t);
}
function SL(t, e, r) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var n = r.apply(t, e || []), i, s = [];
  return i = {}, o("next"), o("throw"), o("return"), i[Symbol.asyncIterator] = function() {
    return this;
  }, i;
  function o(w) {
    n[w] && (i[w] = function(A) {
      return new Promise(function(M, N) {
        s.push([w, A, M, N]) > 1 || a(w, A);
      });
    });
  }
  function a(w, A) {
    try {
      u(n[w](A));
    } catch (M) {
      p(s[0][3], M);
    }
  }
  function u(w) {
    w.value instanceof bl ? Promise.resolve(w.value.v).then(l, d) : p(s[0][2], w);
  }
  function l(w) {
    a("next", w);
  }
  function d(w) {
    a("throw", w);
  }
  function p(w, A) {
    w(A), s.shift(), s.length && a(s[0][0], s[0][1]);
  }
}
function AL(t) {
  var e, r;
  return e = {}, n("next"), n("throw", function(i) {
    throw i;
  }), n("return"), e[Symbol.iterator] = function() {
    return this;
  }, e;
  function n(i, s) {
    e[i] = t[i] ? function(o) {
      return (r = !r) ? { value: bl(t[i](o)), done: i === "return" } : s ? s(o) : o;
    } : s;
  }
}
function PL(t) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var e = t[Symbol.asyncIterator], r;
  return e ? e.call(t) : (t = typeof f1 == "function" ? f1(t) : t[Symbol.iterator](), r = {}, n("next"), n("throw"), n("return"), r[Symbol.asyncIterator] = function() {
    return this;
  }, r);
  function n(s) {
    r[s] = t[s] && function(o) {
      return new Promise(function(a, u) {
        o = t[s](o), i(a, u, o.done, o.value);
      });
    };
  }
  function i(s, o, a, u) {
    Promise.resolve(u).then(function(l) {
      s({ value: l, done: a });
    }, o);
  }
}
function ML(t, e) {
  return Object.defineProperty ? Object.defineProperty(t, "raw", { value: e }) : t.raw = e, t;
}
function IL(t) {
  if (t && t.__esModule) return t;
  var e = {};
  if (t != null) for (var r in t) Object.hasOwnProperty.call(t, r) && (e[r] = t[r]);
  return e.default = t, e;
}
function CL(t) {
  return t && t.__esModule ? t : { default: t };
}
function TL(t, e) {
  if (!e.has(t))
    throw new TypeError("attempted to get private field on non-instance");
  return e.get(t);
}
function RL(t, e, r) {
  if (!e.has(t))
    throw new TypeError("attempted to set private field on non-instance");
  return e.set(t, r), r;
}
const DL = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get __assign() {
    return u1;
  },
  __asyncDelegator: AL,
  __asyncGenerator: SL,
  __asyncValues: PL,
  __await: bl,
  __awaiter: bL,
  __classPrivateFieldGet: TL,
  __classPrivateFieldSet: RL,
  __createBinding: wL,
  __decorate: gL,
  __exportStar: xL,
  __extends: dL,
  __generator: yL,
  __importDefault: CL,
  __importStar: IL,
  __makeTemplateObject: ML,
  __metadata: vL,
  __param: mL,
  __read: v4,
  __rest: pL,
  __spread: _L,
  __spreadArrays: EL,
  __values: f1
}, Symbol.toStringTag, { value: "Module" })), jl = /* @__PURE__ */ bv(DL);
var Wg = {}, wf = {}, L2;
function OL() {
  if (L2) return wf;
  L2 = 1, Object.defineProperty(wf, "__esModule", { value: !0 }), wf.delay = void 0;
  function t(e) {
    return new Promise((r) => {
      setTimeout(() => {
        r(!0);
      }, e);
    });
  }
  return wf.delay = t, wf;
}
var qa = {}, Hg = {}, za = {}, k2;
function NL() {
  return k2 || (k2 = 1, Object.defineProperty(za, "__esModule", { value: !0 }), za.ONE_THOUSAND = za.ONE_HUNDRED = void 0, za.ONE_HUNDRED = 100, za.ONE_THOUSAND = 1e3), za;
}
var Kg = {}, $2;
function LL() {
  return $2 || ($2 = 1, function(t) {
    Object.defineProperty(t, "__esModule", { value: !0 }), t.ONE_YEAR = t.FOUR_WEEKS = t.THREE_WEEKS = t.TWO_WEEKS = t.ONE_WEEK = t.THIRTY_DAYS = t.SEVEN_DAYS = t.FIVE_DAYS = t.THREE_DAYS = t.ONE_DAY = t.TWENTY_FOUR_HOURS = t.TWELVE_HOURS = t.SIX_HOURS = t.THREE_HOURS = t.ONE_HOUR = t.SIXTY_MINUTES = t.THIRTY_MINUTES = t.TEN_MINUTES = t.FIVE_MINUTES = t.ONE_MINUTE = t.SIXTY_SECONDS = t.THIRTY_SECONDS = t.TEN_SECONDS = t.FIVE_SECONDS = t.ONE_SECOND = void 0, t.ONE_SECOND = 1, t.FIVE_SECONDS = 5, t.TEN_SECONDS = 10, t.THIRTY_SECONDS = 30, t.SIXTY_SECONDS = 60, t.ONE_MINUTE = t.SIXTY_SECONDS, t.FIVE_MINUTES = t.ONE_MINUTE * 5, t.TEN_MINUTES = t.ONE_MINUTE * 10, t.THIRTY_MINUTES = t.ONE_MINUTE * 30, t.SIXTY_MINUTES = t.ONE_MINUTE * 60, t.ONE_HOUR = t.SIXTY_MINUTES, t.THREE_HOURS = t.ONE_HOUR * 3, t.SIX_HOURS = t.ONE_HOUR * 6, t.TWELVE_HOURS = t.ONE_HOUR * 12, t.TWENTY_FOUR_HOURS = t.ONE_HOUR * 24, t.ONE_DAY = t.TWENTY_FOUR_HOURS, t.THREE_DAYS = t.ONE_DAY * 3, t.FIVE_DAYS = t.ONE_DAY * 5, t.SEVEN_DAYS = t.ONE_DAY * 7, t.THIRTY_DAYS = t.ONE_DAY * 30, t.ONE_WEEK = t.SEVEN_DAYS, t.TWO_WEEKS = t.ONE_WEEK * 2, t.THREE_WEEKS = t.ONE_WEEK * 3, t.FOUR_WEEKS = t.ONE_WEEK * 4, t.ONE_YEAR = t.ONE_DAY * 365;
  }(Kg)), Kg;
}
var B2;
function b4() {
  return B2 || (B2 = 1, function(t) {
    Object.defineProperty(t, "__esModule", { value: !0 });
    const e = jl;
    e.__exportStar(NL(), t), e.__exportStar(LL(), t);
  }(Hg)), Hg;
}
var F2;
function kL() {
  if (F2) return qa;
  F2 = 1, Object.defineProperty(qa, "__esModule", { value: !0 }), qa.fromMiliseconds = qa.toMiliseconds = void 0;
  const t = b4();
  function e(n) {
    return n * t.ONE_THOUSAND;
  }
  qa.toMiliseconds = e;
  function r(n) {
    return Math.floor(n / t.ONE_THOUSAND);
  }
  return qa.fromMiliseconds = r, qa;
}
var j2;
function $L() {
  return j2 || (j2 = 1, function(t) {
    Object.defineProperty(t, "__esModule", { value: !0 });
    const e = jl;
    e.__exportStar(OL(), t), e.__exportStar(kL(), t);
  }(Wg)), Wg;
}
var zc = {}, U2;
function BL() {
  if (U2) return zc;
  U2 = 1, Object.defineProperty(zc, "__esModule", { value: !0 }), zc.Watch = void 0;
  class t {
    constructor() {
      this.timestamps = /* @__PURE__ */ new Map();
    }
    start(r) {
      if (this.timestamps.has(r))
        throw new Error(`Watch already started for label: ${r}`);
      this.timestamps.set(r, { started: Date.now() });
    }
    stop(r) {
      const n = this.get(r);
      if (typeof n.elapsed < "u")
        throw new Error(`Watch already stopped for label: ${r}`);
      const i = Date.now() - n.started;
      this.timestamps.set(r, { started: n.started, elapsed: i });
    }
    get(r) {
      const n = this.timestamps.get(r);
      if (typeof n > "u")
        throw new Error(`No timestamp found for label: ${r}`);
      return n;
    }
    elapsed(r) {
      const n = this.get(r);
      return n.elapsed || Date.now() - n.started;
    }
  }
  return zc.Watch = t, zc.default = t, zc;
}
var Vg = {}, xf = {}, q2;
function FL() {
  if (q2) return xf;
  q2 = 1, Object.defineProperty(xf, "__esModule", { value: !0 }), xf.IWatch = void 0;
  class t {
  }
  return xf.IWatch = t, xf;
}
var z2;
function jL() {
  return z2 || (z2 = 1, function(t) {
    Object.defineProperty(t, "__esModule", { value: !0 }), jl.__exportStar(FL(), t);
  }(Vg)), Vg;
}
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 });
  const e = jl;
  e.__exportStar($L(), t), e.__exportStar(BL(), t), e.__exportStar(jL(), t), e.__exportStar(b4(), t);
})(mt);
class vc {
}
let UL = class extends vc {
  constructor(e) {
    super();
  }
};
const W2 = mt.FIVE_SECONDS, Ou = { pulse: "heartbeat_pulse" };
let qL = class y4 extends UL {
  constructor(e) {
    super(e), this.events = new rs.EventEmitter(), this.interval = W2, this.interval = (e == null ? void 0 : e.interval) || W2;
  }
  static async init(e) {
    const r = new y4(e);
    return await r.init(), r;
  }
  async init() {
    await this.initialize();
  }
  stop() {
    clearInterval(this.intervalRef);
  }
  on(e, r) {
    this.events.on(e, r);
  }
  once(e, r) {
    this.events.once(e, r);
  }
  off(e, r) {
    this.events.off(e, r);
  }
  removeListener(e, r) {
    this.events.removeListener(e, r);
  }
  async initialize() {
    this.intervalRef = setInterval(() => this.pulse(), mt.toMiliseconds(this.interval));
  }
  pulse() {
    this.events.emit(Ou.pulse);
  }
};
const zL = /"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/, WL = /"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/, HL = /^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;
function KL(t, e) {
  if (t === "__proto__" || t === "constructor" && e && typeof e == "object" && "prototype" in e) {
    VL(t);
    return;
  }
  return e;
}
function VL(t) {
  console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`);
}
function od(t, e = {}) {
  if (typeof t != "string")
    return t;
  const r = t.trim();
  if (
    // eslint-disable-next-line unicorn/prefer-at
    t[0] === '"' && t.endsWith('"') && !t.includes("\\")
  )
    return r.slice(1, -1);
  if (r.length <= 9) {
    const n = r.toLowerCase();
    if (n === "true")
      return !0;
    if (n === "false")
      return !1;
    if (n === "undefined")
      return;
    if (n === "null")
      return null;
    if (n === "nan")
      return Number.NaN;
    if (n === "infinity")
      return Number.POSITIVE_INFINITY;
    if (n === "-infinity")
      return Number.NEGATIVE_INFINITY;
  }
  if (!HL.test(t)) {
    if (e.strict)
      throw new SyntaxError("[destr] Invalid JSON");
    return t;
  }
  try {
    if (zL.test(t) || WL.test(t)) {
      if (e.strict)
        throw new Error("[destr] Possible prototype pollution");
      return JSON.parse(t, KL);
    }
    return JSON.parse(t);
  } catch (n) {
    if (e.strict)
      throw n;
    return t;
  }
}
function GL(t) {
  return !t || typeof t.then != "function" ? Promise.resolve(t) : t;
}
function Cn(t, ...e) {
  try {
    return GL(t(...e));
  } catch (r) {
    return Promise.reject(r);
  }
}
function YL(t) {
  const e = typeof t;
  return t === null || e !== "object" && e !== "function";
}
function JL(t) {
  const e = Object.getPrototypeOf(t);
  return !e || e.isPrototypeOf(Object);
}
function _d(t) {
  if (YL(t))
    return String(t);
  if (JL(t) || Array.isArray(t))
    return JSON.stringify(t);
  if (typeof t.toJSON == "function")
    return _d(t.toJSON());
  throw new Error("[unstorage] Cannot stringify value!");
}
function w4() {
  if (typeof Buffer > "u")
    throw new TypeError("[unstorage] Buffer is not supported!");
}
const l1 = "base64:";
function XL(t) {
  if (typeof t == "string")
    return t;
  w4();
  const e = Buffer.from(t).toString("base64");
  return l1 + e;
}
function ZL(t) {
  return typeof t != "string" || !t.startsWith(l1) ? t : (w4(), Buffer.from(t.slice(l1.length), "base64"));
}
function pi(t) {
  return t ? t.split("?")[0].replace(/[/\\]/g, ":").replace(/:+/g, ":").replace(/^:|:$/g, "") : "";
}
function QL(...t) {
  return pi(t.join(":"));
}
function ad(t) {
  return t = pi(t), t ? t + ":" : "";
}
const ek = "memory", tk = () => {
  const t = /* @__PURE__ */ new Map();
  return {
    name: ek,
    getInstance: () => t,
    hasItem(e) {
      return t.has(e);
    },
    getItem(e) {
      return t.get(e) ?? null;
    },
    getItemRaw(e) {
      return t.get(e) ?? null;
    },
    setItem(e, r) {
      t.set(e, r);
    },
    setItemRaw(e, r) {
      t.set(e, r);
    },
    removeItem(e) {
      t.delete(e);
    },
    getKeys() {
      return [...t.keys()];
    },
    clear() {
      t.clear();
    },
    dispose() {
      t.clear();
    }
  };
};
function rk(t = {}) {
  const e = {
    mounts: { "": t.driver || tk() },
    mountpoints: [""],
    watching: !1,
    watchListeners: [],
    unwatch: {}
  }, r = (l) => {
    for (const d of e.mountpoints)
      if (l.startsWith(d))
        return {
          base: d,
          relativeKey: l.slice(d.length),
          driver: e.mounts[d]
        };
    return {
      base: "",
      relativeKey: l,
      driver: e.mounts[""]
    };
  }, n = (l, d) => e.mountpoints.filter(
    (p) => p.startsWith(l) || d && l.startsWith(p)
  ).map((p) => ({
    relativeBase: l.length > p.length ? l.slice(p.length) : void 0,
    mountpoint: p,
    driver: e.mounts[p]
  })), i = (l, d) => {
    if (e.watching) {
      d = pi(d);
      for (const p of e.watchListeners)
        p(l, d);
    }
  }, s = async () => {
    if (!e.watching) {
      e.watching = !0;
      for (const l in e.mounts)
        e.unwatch[l] = await H2(
          e.mounts[l],
          i,
          l
        );
    }
  }, o = async () => {
    if (e.watching) {
      for (const l in e.unwatch)
        await e.unwatch[l]();
      e.unwatch = {}, e.watching = !1;
    }
  }, a = (l, d, p) => {
    const w = /* @__PURE__ */ new Map(), A = (M) => {
      let N = w.get(M.base);
      return N || (N = {
        driver: M.driver,
        base: M.base,
        items: []
      }, w.set(M.base, N)), N;
    };
    for (const M of l) {
      const N = typeof M == "string", L = pi(N ? M : M.key), B = N ? void 0 : M.value, $ = N || !M.options ? d : { ...d, ...M.options }, H = r(L);
      A(H).items.push({
        key: L,
        value: B,
        relativeKey: H.relativeKey,
        options: $
      });
    }
    return Promise.all([...w.values()].map((M) => p(M))).then(
      (M) => M.flat()
    );
  }, u = {
    // Item
    hasItem(l, d = {}) {
      l = pi(l);
      const { relativeKey: p, driver: w } = r(l);
      return Cn(w.hasItem, p, d);
    },
    getItem(l, d = {}) {
      l = pi(l);
      const { relativeKey: p, driver: w } = r(l);
      return Cn(w.getItem, p, d).then(
        (A) => od(A)
      );
    },
    getItems(l, d) {
      return a(l, d, (p) => p.driver.getItems ? Cn(
        p.driver.getItems,
        p.items.map((w) => ({
          key: w.relativeKey,
          options: w.options
        })),
        d
      ).then(
        (w) => w.map((A) => ({
          key: QL(p.base, A.key),
          value: od(A.value)
        }))
      ) : Promise.all(
        p.items.map((w) => Cn(
          p.driver.getItem,
          w.relativeKey,
          w.options
        ).then((A) => ({
          key: w.key,
          value: od(A)
        })))
      ));
    },
    getItemRaw(l, d = {}) {
      l = pi(l);
      const { relativeKey: p, driver: w } = r(l);
      return w.getItemRaw ? Cn(w.getItemRaw, p, d) : Cn(w.getItem, p, d).then(
        (A) => ZL(A)
      );
    },
    async setItem(l, d, p = {}) {
      if (d === void 0)
        return u.removeItem(l);
      l = pi(l);
      const { relativeKey: w, driver: A } = r(l);
      A.setItem && (await Cn(A.setItem, w, _d(d), p), A.watch || i("update", l));
    },
    async setItems(l, d) {
      await a(l, d, async (p) => {
        if (p.driver.setItems)
          return Cn(
            p.driver.setItems,
            p.items.map((w) => ({
              key: w.relativeKey,
              value: _d(w.value),
              options: w.options
            })),
            d
          );
        p.driver.setItem && await Promise.all(
          p.items.map((w) => Cn(
            p.driver.setItem,
            w.relativeKey,
            _d(w.value),
            w.options
          ))
        );
      });
    },
    async setItemRaw(l, d, p = {}) {
      if (d === void 0)
        return u.removeItem(l, p);
      l = pi(l);
      const { relativeKey: w, driver: A } = r(l);
      if (A.setItemRaw)
        await Cn(A.setItemRaw, w, d, p);
      else if (A.setItem)
        await Cn(A.setItem, w, XL(d), p);
      else
        return;
      A.watch || i("update", l);
    },
    async removeItem(l, d = {}) {
      typeof d == "boolean" && (d = { removeMeta: d }), l = pi(l);
      const { relativeKey: p, driver: w } = r(l);
      w.removeItem && (await Cn(w.removeItem, p, d), (d.removeMeta || d.removeMata) && await Cn(w.removeItem, p + "$", d), w.watch || i("remove", l));
    },
    // Meta
    async getMeta(l, d = {}) {
      typeof d == "boolean" && (d = { nativeOnly: d }), l = pi(l);
      const { relativeKey: p, driver: w } = r(l), A = /* @__PURE__ */ Object.create(null);
      if (w.getMeta && Object.assign(A, await Cn(w.getMeta, p, d)), !d.nativeOnly) {
        const M = await Cn(
          w.getItem,
          p + "$",
          d
        ).then((N) => od(N));
        M && typeof M == "object" && (typeof M.atime == "string" && (M.atime = new Date(M.atime)), typeof M.mtime == "string" && (M.mtime = new Date(M.mtime)), Object.assign(A, M));
      }
      return A;
    },
    setMeta(l, d, p = {}) {
      return this.setItem(l + "$", d, p);
    },
    removeMeta(l, d = {}) {
      return this.removeItem(l + "$", d);
    },
    // Keys
    async getKeys(l, d = {}) {
      l = ad(l);
      const p = n(l, !0);
      let w = [];
      const A = [];
      for (const M of p) {
        const N = await Cn(
          M.driver.getKeys,
          M.relativeBase,
          d
        );
        for (const L of N) {
          const B = M.mountpoint + pi(L);
          w.some(($) => B.startsWith($)) || A.push(B);
        }
        w = [
          M.mountpoint,
          ...w.filter((L) => !L.startsWith(M.mountpoint))
        ];
      }
      return l ? A.filter(
        (M) => M.startsWith(l) && M[M.length - 1] !== "$"
      ) : A.filter((M) => M[M.length - 1] !== "$");
    },
    // Utils
    async clear(l, d = {}) {
      l = ad(l), await Promise.all(
        n(l, !1).map(async (p) => {
          if (p.driver.clear)
            return Cn(p.driver.clear, p.relativeBase, d);
          if (p.driver.removeItem) {
            const w = await p.driver.getKeys(p.relativeBase || "", d);
            return Promise.all(
              w.map((A) => p.driver.removeItem(A, d))
            );
          }
        })
      );
    },
    async dispose() {
      await Promise.all(
        Object.values(e.mounts).map((l) => K2(l))
      );
    },
    async watch(l) {
      return await s(), e.watchListeners.push(l), async () => {
        e.watchListeners = e.watchListeners.filter(
          (d) => d !== l
        ), e.watchListeners.length === 0 && await o();
      };
    },
    async unwatch() {
      e.watchListeners = [], await o();
    },
    // Mount
    mount(l, d) {
      if (l = ad(l), l && e.mounts[l])
        throw new Error(`already mounted at ${l}`);
      return l && (e.mountpoints.push(l), e.mountpoints.sort((p, w) => w.length - p.length)), e.mounts[l] = d, e.watching && Promise.resolve(H2(d, i, l)).then((p) => {
        e.unwatch[l] = p;
      }).catch(console.error), u;
    },
    async unmount(l, d = !0) {
      l = ad(l), !(!l || !e.mounts[l]) && (e.watching && l in e.unwatch && (e.unwatch[l](), delete e.unwatch[l]), d && await K2(e.mounts[l]), e.mountpoints = e.mountpoints.filter((p) => p !== l), delete e.mounts[l]);
    },
    getMount(l = "") {
      l = pi(l) + ":";
      const d = r(l);
      return {
        driver: d.driver,
        base: d.base
      };
    },
    getMounts(l = "", d = {}) {
      return l = pi(l), n(l, d.parents).map((w) => ({
        driver: w.driver,
        base: w.mountpoint
      }));
    },
    // Aliases
    keys: (l, d = {}) => u.getKeys(l, d),
    get: (l, d = {}) => u.getItem(l, d),
    set: (l, d, p = {}) => u.setItem(l, d, p),
    has: (l, d = {}) => u.hasItem(l, d),
    del: (l, d = {}) => u.removeItem(l, d),
    remove: (l, d = {}) => u.removeItem(l, d)
  };
  return u;
}
function H2(t, e, r) {
  return t.watch ? t.watch((n, i) => e(n, r + i)) : () => {
  };
}
async function K2(t) {
  typeof t.dispose == "function" && await Cn(t.dispose);
}
function bc(t) {
  return new Promise((e, r) => {
    t.oncomplete = t.onsuccess = () => e(t.result), t.onabort = t.onerror = () => r(t.error);
  });
}
function x4(t, e) {
  const r = indexedDB.open(t);
  r.onupgradeneeded = () => r.result.createObjectStore(e);
  const n = bc(r);
  return (i, s) => n.then((o) => s(o.transaction(e, i).objectStore(e)));
}
let Gg;
function Ul() {
  return Gg || (Gg = x4("keyval-store", "keyval")), Gg;
}
function V2(t, e = Ul()) {
  return e("readonly", (r) => bc(r.get(t)));
}
function nk(t, e, r = Ul()) {
  return r("readwrite", (n) => (n.put(e, t), bc(n.transaction)));
}
function ik(t, e = Ul()) {
  return e("readwrite", (r) => (r.delete(t), bc(r.transaction)));
}
function sk(t = Ul()) {
  return t("readwrite", (e) => (e.clear(), bc(e.transaction)));
}
function ok(t, e) {
  return t.openCursor().onsuccess = function() {
    this.result && (e(this.result), this.result.continue());
  }, bc(t.transaction);
}
function ak(t = Ul()) {
  return t("readonly", (e) => {
    if (e.getAllKeys)
      return bc(e.getAllKeys());
    const r = [];
    return ok(e, (n) => r.push(n.key)).then(() => r);
  });
}
const ck = (t) => JSON.stringify(t, (e, r) => typeof r == "bigint" ? r.toString() + "n" : r), uk = (t) => {
  const e = /([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g, r = t.replace(e, '$1"$2n"$3');
  return JSON.parse(r, (n, i) => typeof i == "string" && i.match(/^\d+n$/) ? BigInt(i.substring(0, i.length - 1)) : i);
};
function fc(t) {
  if (typeof t != "string")
    throw new Error(`Cannot safe json parse value of type ${typeof t}`);
  try {
    return uk(t);
  } catch {
    return t;
  }
}
function $o(t) {
  return typeof t == "string" ? t : ck(t) || "";
}
const fk = "idb-keyval";
var lk = (t = {}) => {
  const e = t.base && t.base.length > 0 ? `${t.base}:` : "", r = (i) => e + i;
  let n;
  return t.dbName && t.storeName && (n = x4(t.dbName, t.storeName)), { name: fk, options: t, async hasItem(i) {
    return !(typeof await V2(r(i), n) > "u");
  }, async getItem(i) {
    return await V2(r(i), n) ?? null;
  }, setItem(i, s) {
    return nk(r(i), s, n);
  }, removeItem(i) {
    return ik(r(i), n);
  }, getKeys() {
    return ak(n);
  }, clear() {
    return sk(n);
  } };
};
const hk = "WALLET_CONNECT_V2_INDEXED_DB", dk = "keyvaluestorage";
let pk = class {
  constructor() {
    this.indexedDb = rk({ driver: lk({ dbName: hk, storeName: dk }) });
  }
  async getKeys() {
    return this.indexedDb.getKeys();
  }
  async getEntries() {
    return (await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e) => [e.key, e.value]);
  }
  async getItem(e) {
    const r = await this.indexedDb.getItem(e);
    if (r !== null) return r;
  }
  async setItem(e, r) {
    await this.indexedDb.setItem(e, $o(r));
  }
  async removeItem(e) {
    await this.indexedDb.removeItem(e);
  }
};
var Yg = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, Ed = { exports: {} };
(function() {
  let t;
  function e() {
  }
  t = e, t.prototype.getItem = function(r) {
    return this.hasOwnProperty(r) ? String(this[r]) : null;
  }, t.prototype.setItem = function(r, n) {
    this[r] = String(n);
  }, t.prototype.removeItem = function(r) {
    delete this[r];
  }, t.prototype.clear = function() {
    const r = this;
    Object.keys(r).forEach(function(n) {
      r[n] = void 0, delete r[n];
    });
  }, t.prototype.key = function(r) {
    return r = r || 0, Object.keys(this)[r];
  }, t.prototype.__defineGetter__("length", function() {
    return Object.keys(this).length;
  }), typeof Yg < "u" && Yg.localStorage ? Ed.exports = Yg.localStorage : typeof window < "u" && window.localStorage ? Ed.exports = window.localStorage : Ed.exports = new e();
})();
function gk(t) {
  var e;
  return [t[0], fc((e = t[1]) != null ? e : "")];
}
let mk = class {
  constructor() {
    this.localStorage = Ed.exports;
  }
  async getKeys() {
    return Object.keys(this.localStorage);
  }
  async getEntries() {
    return Object.entries(this.localStorage).map(gk);
  }
  async getItem(e) {
    const r = this.localStorage.getItem(e);
    if (r !== null) return fc(r);
  }
  async setItem(e, r) {
    this.localStorage.setItem(e, $o(r));
  }
  async removeItem(e) {
    this.localStorage.removeItem(e);
  }
};
const vk = "wc_storage_version", G2 = 1, bk = async (t, e, r) => {
  const n = vk, i = await e.getItem(n);
  if (i && i >= G2) {
    r(e);
    return;
  }
  const s = await t.getKeys();
  if (!s.length) {
    r(e);
    return;
  }
  const o = [];
  for (; s.length; ) {
    const a = s.shift();
    if (!a) continue;
    const u = a.toLowerCase();
    if (u.includes("wc@") || u.includes("walletconnect") || u.includes("wc_") || u.includes("wallet_connect")) {
      const l = await t.getItem(a);
      await e.setItem(a, l), o.push(a);
    }
  }
  await e.setItem(n, G2), r(e), yk(t, o);
}, yk = async (t, e) => {
  e.length && e.forEach(async (r) => {
    await t.removeItem(r);
  });
};
let wk = class {
  constructor() {
    this.initialized = !1, this.setInitialized = (r) => {
      this.storage = r, this.initialized = !0;
    };
    const e = new mk();
    this.storage = e;
    try {
      const r = new pk();
      bk(e, r, this.setInitialized);
    } catch {
      this.initialized = !0;
    }
  }
  async getKeys() {
    return await this.initialize(), this.storage.getKeys();
  }
  async getEntries() {
    return await this.initialize(), this.storage.getEntries();
  }
  async getItem(e) {
    return await this.initialize(), this.storage.getItem(e);
  }
  async setItem(e, r) {
    return await this.initialize(), this.storage.setItem(e, r);
  }
  async removeItem(e) {
    return await this.initialize(), this.storage.removeItem(e);
  }
  async initialize() {
    this.initialized || await new Promise((e) => {
      const r = setInterval(() => {
        this.initialized && (clearInterval(r), e());
      }, 20);
    });
  }
};
function xk(t) {
  try {
    return JSON.stringify(t);
  } catch {
    return '"[Circular]"';
  }
}
var _k = Ek;
function Ek(t, e, r) {
  var n = r && r.stringify || xk, i = 1;
  if (typeof t == "object" && t !== null) {
    var s = e.length + i;
    if (s === 1) return t;
    var o = new Array(s);
    o[0] = n(t);
    for (var a = 1; a < s; a++)
      o[a] = n(e[a]);
    return o.join(" ");
  }
  if (typeof t != "string")
    return t;
  var u = e.length;
  if (u === 0) return t;
  for (var l = "", d = 1 - i, p = -1, w = t && t.length || 0, A = 0; A < w; ) {
    if (t.charCodeAt(A) === 37 && A + 1 < w) {
      switch (p = p > -1 ? p : 0, t.charCodeAt(A + 1)) {
        case 100:
        case 102:
          if (d >= u || e[d] == null) break;
          p < A && (l += t.slice(p, A)), l += Number(e[d]), p = A + 2, A++;
          break;
        case 105:
          if (d >= u || e[d] == null) break;
          p < A && (l += t.slice(p, A)), l += Math.floor(Number(e[d])), p = A + 2, A++;
          break;
        case 79:
        case 111:
        case 106:
          if (d >= u || e[d] === void 0) break;
          p < A && (l += t.slice(p, A));
          var M = typeof e[d];
          if (M === "string") {
            l += "'" + e[d] + "'", p = A + 2, A++;
            break;
          }
          if (M === "function") {
            l += e[d].name || "<anonymous>", p = A + 2, A++;
            break;
          }
          l += n(e[d]), p = A + 2, A++;
          break;
        case 115:
          if (d >= u)
            break;
          p < A && (l += t.slice(p, A)), l += String(e[d]), p = A + 2, A++;
          break;
        case 37:
          p < A && (l += t.slice(p, A)), l += "%", p = A + 2, A++, d--;
          break;
      }
      ++d;
    }
    ++A;
  }
  return p === -1 ? t : (p < w && (l += t.slice(p)), l);
}
const Y2 = _k;
var Jc = Bo;
const yl = Ok().console || {}, Sk = {
  mapHttpRequest: cd,
  mapHttpResponse: cd,
  wrapRequestSerializer: Jg,
  wrapResponseSerializer: Jg,
  wrapErrorSerializer: Jg,
  req: cd,
  res: cd,
  err: Ck
};
function Ak(t, e) {
  return Array.isArray(t) ? t.filter(function(n) {
    return n !== "!stdSerializers.err";
  }) : t === !0 ? Object.keys(e) : !1;
}
function Bo(t) {
  t = t || {}, t.browser = t.browser || {};
  const e = t.browser.transmit;
  if (e && typeof e.send != "function")
    throw Error("pino: transmit option must have a send function");
  const r = t.browser.write || yl;
  t.browser.write && (t.browser.asObject = !0);
  const n = t.serializers || {}, i = Ak(t.browser.serialize, n);
  let s = t.browser.serialize;
  Array.isArray(t.browser.serialize) && t.browser.serialize.indexOf("!stdSerializers.err") > -1 && (s = !1);
  const o = ["error", "fatal", "warn", "info", "debug", "trace"];
  typeof r == "function" && (r.error = r.fatal = r.warn = r.info = r.debug = r.trace = r), t.enabled === !1 && (t.level = "silent");
  const a = t.level || "info", u = Object.create(r);
  u.log || (u.log = wl), Object.defineProperty(u, "levelVal", {
    get: d
  }), Object.defineProperty(u, "level", {
    get: p,
    set: w
  });
  const l = {
    transmit: e,
    serialize: i,
    asObject: t.browser.asObject,
    levels: o,
    timestamp: Tk(t)
  };
  u.levels = Bo.levels, u.level = a, u.setMaxListeners = u.getMaxListeners = u.emit = u.addListener = u.on = u.prependListener = u.once = u.prependOnceListener = u.removeListener = u.removeAllListeners = u.listeners = u.listenerCount = u.eventNames = u.write = u.flush = wl, u.serializers = n, u._serialize = i, u._stdErrSerialize = s, u.child = A, e && (u._logEvent = h1());
  function d() {
    return this.level === "silent" ? 1 / 0 : this.levels.values[this.level];
  }
  function p() {
    return this._level;
  }
  function w(M) {
    if (M !== "silent" && !this.levels.values[M])
      throw Error("unknown level " + M);
    this._level = M, Wc(l, u, "error", "log"), Wc(l, u, "fatal", "error"), Wc(l, u, "warn", "error"), Wc(l, u, "info", "log"), Wc(l, u, "debug", "log"), Wc(l, u, "trace", "log");
  }
  function A(M, N) {
    if (!M)
      throw new Error("missing bindings for child Pino");
    N = N || {}, i && M.serializers && (N.serializers = M.serializers);
    const L = N.serializers;
    if (i && L) {
      var B = Object.assign({}, n, L), $ = t.browser.serialize === !0 ? Object.keys(B) : i;
      delete M.serializers, k0([M], $, B, this._stdErrSerialize);
    }
    function H(W) {
      this._childLevel = (W._childLevel | 0) + 1, this.error = Hc(W, M, "error"), this.fatal = Hc(W, M, "fatal"), this.warn = Hc(W, M, "warn"), this.info = Hc(W, M, "info"), this.debug = Hc(W, M, "debug"), this.trace = Hc(W, M, "trace"), B && (this.serializers = B, this._serialize = $), e && (this._logEvent = h1(
        [].concat(W._logEvent.bindings, M)
      ));
    }
    return H.prototype = this, new H(this);
  }
  return u;
}
Bo.levels = {
  values: {
    fatal: 60,
    error: 50,
    warn: 40,
    info: 30,
    debug: 20,
    trace: 10
  },
  labels: {
    10: "trace",
    20: "debug",
    30: "info",
    40: "warn",
    50: "error",
    60: "fatal"
  }
};
Bo.stdSerializers = Sk;
Bo.stdTimeFunctions = Object.assign({}, { nullTime: _4, epochTime: E4, unixTime: Rk, isoTime: Dk });
function Wc(t, e, r, n) {
  const i = Object.getPrototypeOf(e);
  e[r] = e.levelVal > e.levels.values[r] ? wl : i[r] ? i[r] : yl[r] || yl[n] || wl, Pk(t, e, r);
}
function Pk(t, e, r) {
  !t.transmit && e[r] === wl || (e[r] = /* @__PURE__ */ function(n) {
    return function() {
      const s = t.timestamp(), o = new Array(arguments.length), a = Object.getPrototypeOf && Object.getPrototypeOf(this) === yl ? yl : this;
      for (var u = 0; u < o.length; u++) o[u] = arguments[u];
      if (t.serialize && !t.asObject && k0(o, this._serialize, this.serializers, this._stdErrSerialize), t.asObject ? n.call(a, Mk(this, r, o, s)) : n.apply(a, o), t.transmit) {
        const l = t.transmit.level || e.level, d = Bo.levels.values[l], p = Bo.levels.values[r];
        if (p < d) return;
        Ik(this, {
          ts: s,
          methodLevel: r,
          methodValue: p,
          send: t.transmit.send,
          val: e.levelVal
        }, o);
      }
    };
  }(e[r]));
}
function Mk(t, e, r, n) {
  t._serialize && k0(r, t._serialize, t.serializers, t._stdErrSerialize);
  const i = r.slice();
  let s = i[0];
  const o = {};
  n && (o.time = n), o.level = Bo.levels.values[e];
  let a = (t._childLevel | 0) + 1;
  if (a < 1 && (a = 1), s !== null && typeof s == "object") {
    for (; a-- && typeof i[0] == "object"; )
      Object.assign(o, i.shift());
    s = i.length ? Y2(i.shift(), i) : void 0;
  } else typeof s == "string" && (s = Y2(i.shift(), i));
  return s !== void 0 && (o.msg = s), o;
}
function k0(t, e, r, n) {
  for (const i in t)
    if (n && t[i] instanceof Error)
      t[i] = Bo.stdSerializers.err(t[i]);
    else if (typeof t[i] == "object" && !Array.isArray(t[i]))
      for (const s in t[i])
        e && e.indexOf(s) > -1 && s in r && (t[i][s] = r[s](t[i][s]));
}
function Hc(t, e, r) {
  return function() {
    const n = new Array(1 + arguments.length);
    n[0] = e;
    for (var i = 1; i < n.length; i++)
      n[i] = arguments[i - 1];
    return t[r].apply(this, n);
  };
}
function Ik(t, e, r) {
  const n = e.send, i = e.ts, s = e.methodLevel, o = e.methodValue, a = e.val, u = t._logEvent.bindings;
  k0(
    r,
    t._serialize || Object.keys(t.serializers),
    t.serializers,
    t._stdErrSerialize === void 0 ? !0 : t._stdErrSerialize
  ), t._logEvent.ts = i, t._logEvent.messages = r.filter(function(l) {
    return u.indexOf(l) === -1;
  }), t._logEvent.level.label = s, t._logEvent.level.value = o, n(s, t._logEvent, a), t._logEvent = h1(u);
}
function h1(t) {
  return {
    ts: 0,
    messages: [],
    bindings: t || [],
    level: { label: "", value: 0 }
  };
}
function Ck(t) {
  const e = {
    type: t.constructor.name,
    msg: t.message,
    stack: t.stack
  };
  for (const r in t)
    e[r] === void 0 && (e[r] = t[r]);
  return e;
}
function Tk(t) {
  return typeof t.timestamp == "function" ? t.timestamp : t.timestamp === !1 ? _4 : E4;
}
function cd() {
  return {};
}
function Jg(t) {
  return t;
}
function wl() {
}
function _4() {
  return !1;
}
function E4() {
  return Date.now();
}
function Rk() {
  return Math.round(Date.now() / 1e3);
}
function Dk() {
  return new Date(Date.now()).toISOString();
}
function Ok() {
  function t(e) {
    return typeof e < "u" && e;
  }
  try {
    return typeof globalThis < "u" || Object.defineProperty(Object.prototype, "globalThis", {
      get: function() {
        return delete Object.prototype.globalThis, this.globalThis = this;
      },
      configurable: !0
    }), globalThis;
  } catch {
    return t(self) || t(window) || t(this) || {};
  }
}
const ql = /* @__PURE__ */ ts(Jc), Nk = { level: "info" }, zl = "custom_context", $v = 1e3 * 1024;
let Lk = class {
  constructor(e) {
    this.nodeValue = e, this.sizeInBytes = new TextEncoder().encode(this.nodeValue).length, this.next = null;
  }
  get value() {
    return this.nodeValue;
  }
  get size() {
    return this.sizeInBytes;
  }
}, J2 = class {
  constructor(e) {
    this.head = null, this.tail = null, this.lengthInNodes = 0, this.maxSizeInBytes = e, this.sizeInBytes = 0;
  }
  append(e) {
    const r = new Lk(e);
    if (r.size > this.maxSizeInBytes) throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);
    for (; this.size + r.size > this.maxSizeInBytes; ) this.shift();
    this.head ? (this.tail && (this.tail.next = r), this.tail = r) : (this.head = r, this.tail = r), this.lengthInNodes++, this.sizeInBytes += r.size;
  }
  shift() {
    if (!this.head) return;
    const e = this.head;
    this.head = this.head.next, this.head || (this.tail = null), this.lengthInNodes--, this.sizeInBytes -= e.size;
  }
  toArray() {
    const e = [];
    let r = this.head;
    for (; r !== null; ) e.push(r.value), r = r.next;
    return e;
  }
  get length() {
    return this.lengthInNodes;
  }
  get size() {
    return this.sizeInBytes;
  }
  toOrderedArray() {
    return Array.from(this);
  }
  [Symbol.iterator]() {
    let e = this.head;
    return { next: () => {
      if (!e) return { done: !0, value: null };
      const r = e.value;
      return e = e.next, { done: !1, value: r };
    } };
  }
}, S4 = class {
  constructor(e, r = $v) {
    this.level = e ?? "error", this.levelValue = Jc.levels.values[this.level], this.MAX_LOG_SIZE_IN_BYTES = r, this.logs = new J2(this.MAX_LOG_SIZE_IN_BYTES);
  }
  forwardToConsole(e, r) {
    r === Jc.levels.values.error ? console.error(e) : r === Jc.levels.values.warn ? console.warn(e) : r === Jc.levels.values.debug ? console.debug(e) : r === Jc.levels.values.trace ? console.trace(e) : console.log(e);
  }
  appendToLogs(e) {
    this.logs.append($o({ timestamp: (/* @__PURE__ */ new Date()).toISOString(), log: e }));
    const r = typeof e == "string" ? JSON.parse(e).level : e.level;
    r >= this.levelValue && this.forwardToConsole(e, r);
  }
  getLogs() {
    return this.logs;
  }
  clearLogs() {
    this.logs = new J2(this.MAX_LOG_SIZE_IN_BYTES);
  }
  getLogArray() {
    return Array.from(this.logs);
  }
  logsToBlob(e) {
    const r = this.getLogArray();
    return r.push($o({ extraMetadata: e })), new Blob(r, { type: "application/json" });
  }
}, kk = class {
  constructor(e, r = $v) {
    this.baseChunkLogger = new S4(e, r);
  }
  write(e) {
    this.baseChunkLogger.appendToLogs(e);
  }
  getLogs() {
    return this.baseChunkLogger.getLogs();
  }
  clearLogs() {
    this.baseChunkLogger.clearLogs();
  }
  getLogArray() {
    return this.baseChunkLogger.getLogArray();
  }
  logsToBlob(e) {
    return this.baseChunkLogger.logsToBlob(e);
  }
  downloadLogsBlobInBrowser(e) {
    const r = URL.createObjectURL(this.logsToBlob(e)), n = document.createElement("a");
    n.href = r, n.download = `walletconnect-logs-${(/* @__PURE__ */ new Date()).toISOString()}.txt`, document.body.appendChild(n), n.click(), document.body.removeChild(n), URL.revokeObjectURL(r);
  }
}, $k = class {
  constructor(e, r = $v) {
    this.baseChunkLogger = new S4(e, r);
  }
  write(e) {
    this.baseChunkLogger.appendToLogs(e);
  }
  getLogs() {
    return this.baseChunkLogger.getLogs();
  }
  clearLogs() {
    this.baseChunkLogger.clearLogs();
  }
  getLogArray() {
    return this.baseChunkLogger.getLogArray();
  }
  logsToBlob(e) {
    return this.baseChunkLogger.logsToBlob(e);
  }
};
var Bk = Object.defineProperty, Fk = Object.defineProperties, jk = Object.getOwnPropertyDescriptors, X2 = Object.getOwnPropertySymbols, Uk = Object.prototype.hasOwnProperty, qk = Object.prototype.propertyIsEnumerable, Z2 = (t, e, r) => e in t ? Bk(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, Jd = (t, e) => {
  for (var r in e || (e = {})) Uk.call(e, r) && Z2(t, r, e[r]);
  if (X2) for (var r of X2(e)) qk.call(e, r) && Z2(t, r, e[r]);
  return t;
}, Xd = (t, e) => Fk(t, jk(e));
function $0(t) {
  return Xd(Jd({}, t), { level: (t == null ? void 0 : t.level) || Nk.level });
}
function zk(t, e = zl) {
  return t[e] || "";
}
function Wk(t, e, r = zl) {
  return t[r] = e, t;
}
function Ai(t, e = zl) {
  let r = "";
  return typeof t.bindings > "u" ? r = zk(t, e) : r = t.bindings().context || "", r;
}
function Hk(t, e, r = zl) {
  const n = Ai(t, r);
  return n.trim() ? `${n}/${e}` : e;
}
function ci(t, e, r = zl) {
  const n = Hk(t, e, r), i = t.child({ context: n });
  return Wk(i, n, r);
}
function Kk(t) {
  var e, r;
  const n = new kk((e = t.opts) == null ? void 0 : e.level, t.maxSizeInBytes);
  return { logger: ql(Xd(Jd({}, t.opts), { level: "trace", browser: Xd(Jd({}, (r = t.opts) == null ? void 0 : r.browser), { write: (i) => n.write(i) }) })), chunkLoggerController: n };
}
function Vk(t) {
  var e;
  const r = new $k((e = t.opts) == null ? void 0 : e.level, t.maxSizeInBytes);
  return { logger: ql(Xd(Jd({}, t.opts), { level: "trace" }), r), chunkLoggerController: r };
}
function Gk(t) {
  return typeof t.loggerOverride < "u" && typeof t.loggerOverride != "string" ? { logger: t.loggerOverride, chunkLoggerController: null } : typeof window < "u" ? Kk(t) : Vk(t);
}
let Yk = class extends vc {
  constructor(e) {
    super(), this.opts = e, this.protocol = "wc", this.version = 2;
  }
}, Jk = class extends vc {
  constructor(e, r) {
    super(), this.core = e, this.logger = r, this.records = /* @__PURE__ */ new Map();
  }
}, Xk = class {
  constructor(e, r) {
    this.logger = e, this.core = r;
  }
}, Zk = class extends vc {
  constructor(e, r) {
    super(), this.relayer = e, this.logger = r;
  }
}, Qk = class extends vc {
  constructor(e) {
    super();
  }
}, e$ = class {
  constructor(e, r, n, i) {
    this.core = e, this.logger = r, this.name = n;
  }
}, t$ = class extends vc {
  constructor(e, r) {
    super(), this.relayer = e, this.logger = r;
  }
}, r$ = class extends vc {
  constructor(e, r) {
    super(), this.core = e, this.logger = r;
  }
}, n$ = class {
  constructor(e, r, n) {
    this.core = e, this.logger = r, this.store = n;
  }
}, i$ = class {
  constructor(e, r) {
    this.projectId = e, this.logger = r;
  }
}, s$ = class {
  constructor(e, r, n) {
    this.core = e, this.logger = r, this.telemetryEnabled = n;
  }
}, o$ = class {
  constructor(e) {
    this.opts = e, this.protocol = "wc", this.version = 2;
  }
}, a$ = class {
  constructor(e) {
    this.client = e;
  }
};
var Bv = {}, Pa = {}, B0 = {}, F0 = {};
Object.defineProperty(F0, "__esModule", { value: !0 });
F0.BrowserRandomSource = void 0;
const Q2 = 65536;
class c$ {
  constructor() {
    this.isAvailable = !1, this.isInstantiated = !1;
    const e = typeof self < "u" ? self.crypto || self.msCrypto : null;
    e && e.getRandomValues !== void 0 && (this._crypto = e, this.isAvailable = !0, this.isInstantiated = !0);
  }
  randomBytes(e) {
    if (!this.isAvailable || !this._crypto)
      throw new Error("Browser random byte generator is not available.");
    const r = new Uint8Array(e);
    for (let n = 0; n < r.length; n += Q2)
      this._crypto.getRandomValues(r.subarray(n, n + Math.min(r.length - n, Q2)));
    return r;
  }
}
F0.BrowserRandomSource = c$;
function A4(t) {
  throw new Error('Could not dynamically require "' + t + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var j0 = {}, ki = {};
Object.defineProperty(ki, "__esModule", { value: !0 });
function u$(t) {
  for (var e = 0; e < t.length; e++)
    t[e] = 0;
  return t;
}
ki.wipe = u$;
const f$ = {}, l$ = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: f$
}, Symbol.toStringTag, { value: "Module" })), Wl = /* @__PURE__ */ bv(l$);
Object.defineProperty(j0, "__esModule", { value: !0 });
j0.NodeRandomSource = void 0;
const h$ = ki;
class d$ {
  constructor() {
    if (this.isAvailable = !1, this.isInstantiated = !1, typeof A4 < "u") {
      const e = Wl;
      e && e.randomBytes && (this._crypto = e, this.isAvailable = !0, this.isInstantiated = !0);
    }
  }
  randomBytes(e) {
    if (!this.isAvailable || !this._crypto)
      throw new Error("Node.js random byte generator is not available.");
    let r = this._crypto.randomBytes(e);
    if (r.length !== e)
      throw new Error("NodeRandomSource: got fewer bytes than requested");
    const n = new Uint8Array(e);
    for (let i = 0; i < n.length; i++)
      n[i] = r[i];
    return (0, h$.wipe)(r), n;
  }
}
j0.NodeRandomSource = d$;
Object.defineProperty(B0, "__esModule", { value: !0 });
B0.SystemRandomSource = void 0;
const p$ = F0, g$ = j0;
class m$ {
  constructor() {
    if (this.isAvailable = !1, this.name = "", this._source = new p$.BrowserRandomSource(), this._source.isAvailable) {
      this.isAvailable = !0, this.name = "Browser";
      return;
    }
    if (this._source = new g$.NodeRandomSource(), this._source.isAvailable) {
      this.isAvailable = !0, this.name = "Node";
      return;
    }
  }
  randomBytes(e) {
    if (!this.isAvailable)
      throw new Error("System random byte generator is not available.");
    return this._source.randomBytes(e);
  }
}
B0.SystemRandomSource = m$;
var ar = {}, P4 = {};
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 });
  function e(a, u) {
    var l = a >>> 16 & 65535, d = a & 65535, p = u >>> 16 & 65535, w = u & 65535;
    return d * w + (l * w + d * p << 16 >>> 0) | 0;
  }
  t.mul = Math.imul || e;
  function r(a, u) {
    return a + u | 0;
  }
  t.add = r;
  function n(a, u) {
    return a - u | 0;
  }
  t.sub = n;
  function i(a, u) {
    return a << u | a >>> 32 - u;
  }
  t.rotl = i;
  function s(a, u) {
    return a << 32 - u | a >>> u;
  }
  t.rotr = s;
  function o(a) {
    return typeof a == "number" && isFinite(a) && Math.floor(a) === a;
  }
  t.isInteger = Number.isInteger || o, t.MAX_SAFE_INTEGER = 9007199254740991, t.isSafeInteger = function(a) {
    return t.isInteger(a) && a >= -t.MAX_SAFE_INTEGER && a <= t.MAX_SAFE_INTEGER;
  };
})(P4);
Object.defineProperty(ar, "__esModule", { value: !0 });
var M4 = P4;
function v$(t, e) {
  return e === void 0 && (e = 0), (t[e + 0] << 8 | t[e + 1]) << 16 >> 16;
}
ar.readInt16BE = v$;
function b$(t, e) {
  return e === void 0 && (e = 0), (t[e + 0] << 8 | t[e + 1]) >>> 0;
}
ar.readUint16BE = b$;
function y$(t, e) {
  return e === void 0 && (e = 0), (t[e + 1] << 8 | t[e]) << 16 >> 16;
}
ar.readInt16LE = y$;
function w$(t, e) {
  return e === void 0 && (e = 0), (t[e + 1] << 8 | t[e]) >>> 0;
}
ar.readUint16LE = w$;
function I4(t, e, r) {
  return e === void 0 && (e = new Uint8Array(2)), r === void 0 && (r = 0), e[r + 0] = t >>> 8, e[r + 1] = t >>> 0, e;
}
ar.writeUint16BE = I4;
ar.writeInt16BE = I4;
function C4(t, e, r) {
  return e === void 0 && (e = new Uint8Array(2)), r === void 0 && (r = 0), e[r + 0] = t >>> 0, e[r + 1] = t >>> 8, e;
}
ar.writeUint16LE = C4;
ar.writeInt16LE = C4;
function d1(t, e) {
  return e === void 0 && (e = 0), t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3];
}
ar.readInt32BE = d1;
function p1(t, e) {
  return e === void 0 && (e = 0), (t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3]) >>> 0;
}
ar.readUint32BE = p1;
function g1(t, e) {
  return e === void 0 && (e = 0), t[e + 3] << 24 | t[e + 2] << 16 | t[e + 1] << 8 | t[e];
}
ar.readInt32LE = g1;
function m1(t, e) {
  return e === void 0 && (e = 0), (t[e + 3] << 24 | t[e + 2] << 16 | t[e + 1] << 8 | t[e]) >>> 0;
}
ar.readUint32LE = m1;
function Zd(t, e, r) {
  return e === void 0 && (e = new Uint8Array(4)), r === void 0 && (r = 0), e[r + 0] = t >>> 24, e[r + 1] = t >>> 16, e[r + 2] = t >>> 8, e[r + 3] = t >>> 0, e;
}
ar.writeUint32BE = Zd;
ar.writeInt32BE = Zd;
function Qd(t, e, r) {
  return e === void 0 && (e = new Uint8Array(4)), r === void 0 && (r = 0), e[r + 0] = t >>> 0, e[r + 1] = t >>> 8, e[r + 2] = t >>> 16, e[r + 3] = t >>> 24, e;
}
ar.writeUint32LE = Qd;
ar.writeInt32LE = Qd;
function x$(t, e) {
  e === void 0 && (e = 0);
  var r = d1(t, e), n = d1(t, e + 4);
  return r * 4294967296 + n - (n >> 31) * 4294967296;
}
ar.readInt64BE = x$;
function _$(t, e) {
  e === void 0 && (e = 0);
  var r = p1(t, e), n = p1(t, e + 4);
  return r * 4294967296 + n;
}
ar.readUint64BE = _$;
function E$(t, e) {
  e === void 0 && (e = 0);
  var r = g1(t, e), n = g1(t, e + 4);
  return n * 4294967296 + r - (r >> 31) * 4294967296;
}
ar.readInt64LE = E$;
function S$(t, e) {
  e === void 0 && (e = 0);
  var r = m1(t, e), n = m1(t, e + 4);
  return n * 4294967296 + r;
}
ar.readUint64LE = S$;
function T4(t, e, r) {
  return e === void 0 && (e = new Uint8Array(8)), r === void 0 && (r = 0), Zd(t / 4294967296 >>> 0, e, r), Zd(t >>> 0, e, r + 4), e;
}
ar.writeUint64BE = T4;
ar.writeInt64BE = T4;
function R4(t, e, r) {
  return e === void 0 && (e = new Uint8Array(8)), r === void 0 && (r = 0), Qd(t >>> 0, e, r), Qd(t / 4294967296 >>> 0, e, r + 4), e;
}
ar.writeUint64LE = R4;
ar.writeInt64LE = R4;
function A$(t, e, r) {
  if (r === void 0 && (r = 0), t % 8 !== 0)
    throw new Error("readUintBE supports only bitLengths divisible by 8");
  if (t / 8 > e.length - r)
    throw new Error("readUintBE: array is too short for the given bitLength");
  for (var n = 0, i = 1, s = t / 8 + r - 1; s >= r; s--)
    n += e[s] * i, i *= 256;
  return n;
}
ar.readUintBE = A$;
function P$(t, e, r) {
  if (r === void 0 && (r = 0), t % 8 !== 0)
    throw new Error("readUintLE supports only bitLengths divisible by 8");
  if (t / 8 > e.length - r)
    throw new Error("readUintLE: array is too short for the given bitLength");
  for (var n = 0, i = 1, s = r; s < r + t / 8; s++)
    n += e[s] * i, i *= 256;
  return n;
}
ar.readUintLE = P$;
function M$(t, e, r, n) {
  if (r === void 0 && (r = new Uint8Array(t / 8)), n === void 0 && (n = 0), t % 8 !== 0)
    throw new Error("writeUintBE supports only bitLengths divisible by 8");
  if (!M4.isSafeInteger(e))
    throw new Error("writeUintBE value must be an integer");
  for (var i = 1, s = t / 8 + n - 1; s >= n; s--)
    r[s] = e / i & 255, i *= 256;
  return r;
}
ar.writeUintBE = M$;
function I$(t, e, r, n) {
  if (r === void 0 && (r = new Uint8Array(t / 8)), n === void 0 && (n = 0), t % 8 !== 0)
    throw new Error("writeUintLE supports only bitLengths divisible by 8");
  if (!M4.isSafeInteger(e))
    throw new Error("writeUintLE value must be an integer");
  for (var i = 1, s = n; s < n + t / 8; s++)
    r[s] = e / i & 255, i *= 256;
  return r;
}
ar.writeUintLE = I$;
function C$(t, e) {
  e === void 0 && (e = 0);
  var r = new DataView(t.buffer, t.byteOffset, t.byteLength);
  return r.getFloat32(e);
}
ar.readFloat32BE = C$;
function T$(t, e) {
  e === void 0 && (e = 0);
  var r = new DataView(t.buffer, t.byteOffset, t.byteLength);
  return r.getFloat32(e, !0);
}
ar.readFloat32LE = T$;
function R$(t, e) {
  e === void 0 && (e = 0);
  var r = new DataView(t.buffer, t.byteOffset, t.byteLength);
  return r.getFloat64(e);
}
ar.readFloat64BE = R$;
function D$(t, e) {
  e === void 0 && (e = 0);
  var r = new DataView(t.buffer, t.byteOffset, t.byteLength);
  return r.getFloat64(e, !0);
}
ar.readFloat64LE = D$;
function O$(t, e, r) {
  e === void 0 && (e = new Uint8Array(4)), r === void 0 && (r = 0);
  var n = new DataView(e.buffer, e.byteOffset, e.byteLength);
  return n.setFloat32(r, t), e;
}
ar.writeFloat32BE = O$;
function N$(t, e, r) {
  e === void 0 && (e = new Uint8Array(4)), r === void 0 && (r = 0);
  var n = new DataView(e.buffer, e.byteOffset, e.byteLength);
  return n.setFloat32(r, t, !0), e;
}
ar.writeFloat32LE = N$;
function L$(t, e, r) {
  e === void 0 && (e = new Uint8Array(8)), r === void 0 && (r = 0);
  var n = new DataView(e.buffer, e.byteOffset, e.byteLength);
  return n.setFloat64(r, t), e;
}
ar.writeFloat64BE = L$;
function k$(t, e, r) {
  e === void 0 && (e = new Uint8Array(8)), r === void 0 && (r = 0);
  var n = new DataView(e.buffer, e.byteOffset, e.byteLength);
  return n.setFloat64(r, t, !0), e;
}
ar.writeFloat64LE = k$;
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 }), t.randomStringForEntropy = t.randomString = t.randomUint32 = t.randomBytes = t.defaultRandomSource = void 0;
  const e = B0, r = ar, n = ki;
  t.defaultRandomSource = new e.SystemRandomSource();
  function i(l, d = t.defaultRandomSource) {
    return d.randomBytes(l);
  }
  t.randomBytes = i;
  function s(l = t.defaultRandomSource) {
    const d = i(4, l), p = (0, r.readUint32LE)(d);
    return (0, n.wipe)(d), p;
  }
  t.randomUint32 = s;
  const o = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
  function a(l, d = o, p = t.defaultRandomSource) {
    if (d.length < 2)
      throw new Error("randomString charset is too short");
    if (d.length > 256)
      throw new Error("randomString charset is too long");
    let w = "";
    const A = d.length, M = 256 - 256 % A;
    for (; l > 0; ) {
      const N = i(Math.ceil(l * 256 / M), p);
      for (let L = 0; L < N.length && l > 0; L++) {
        const B = N[L];
        B < M && (w += d.charAt(B % A), l--);
      }
      (0, n.wipe)(N);
    }
    return w;
  }
  t.randomString = a;
  function u(l, d = o, p = t.defaultRandomSource) {
    const w = Math.ceil(l / (Math.log(d.length) / Math.LN2));
    return a(w, d, p);
  }
  t.randomStringForEntropy = u;
})(Pa);
var D4 = {};
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 });
  var e = ar, r = ki;
  t.DIGEST_LENGTH = 64, t.BLOCK_SIZE = 128;
  var n = (
    /** @class */
    function() {
      function a() {
        this.digestLength = t.DIGEST_LENGTH, this.blockSize = t.BLOCK_SIZE, this._stateHi = new Int32Array(8), this._stateLo = new Int32Array(8), this._tempHi = new Int32Array(16), this._tempLo = new Int32Array(16), this._buffer = new Uint8Array(256), this._bufferLength = 0, this._bytesHashed = 0, this._finished = !1, this.reset();
      }
      return a.prototype._initState = function() {
        this._stateHi[0] = 1779033703, this._stateHi[1] = 3144134277, this._stateHi[2] = 1013904242, this._stateHi[3] = 2773480762, this._stateHi[4] = 1359893119, this._stateHi[5] = 2600822924, this._stateHi[6] = 528734635, this._stateHi[7] = 1541459225, this._stateLo[0] = 4089235720, this._stateLo[1] = 2227873595, this._stateLo[2] = 4271175723, this._stateLo[3] = 1595750129, this._stateLo[4] = 2917565137, this._stateLo[5] = 725511199, this._stateLo[6] = 4215389547, this._stateLo[7] = 327033209;
      }, a.prototype.reset = function() {
        return this._initState(), this._bufferLength = 0, this._bytesHashed = 0, this._finished = !1, this;
      }, a.prototype.clean = function() {
        r.wipe(this._buffer), r.wipe(this._tempHi), r.wipe(this._tempLo), this.reset();
      }, a.prototype.update = function(u, l) {
        if (l === void 0 && (l = u.length), this._finished)
          throw new Error("SHA512: can't update because hash was finished.");
        var d = 0;
        if (this._bytesHashed += l, this._bufferLength > 0) {
          for (; this._bufferLength < t.BLOCK_SIZE && l > 0; )
            this._buffer[this._bufferLength++] = u[d++], l--;
          this._bufferLength === this.blockSize && (s(this._tempHi, this._tempLo, this._stateHi, this._stateLo, this._buffer, 0, this.blockSize), this._bufferLength = 0);
        }
        for (l >= this.blockSize && (d = s(this._tempHi, this._tempLo, this._stateHi, this._stateLo, u, d, l), l %= this.blockSize); l > 0; )
          this._buffer[this._bufferLength++] = u[d++], l--;
        return this;
      }, a.prototype.finish = function(u) {
        if (!this._finished) {
          var l = this._bytesHashed, d = this._bufferLength, p = l / 536870912 | 0, w = l << 3, A = l % 128 < 112 ? 128 : 256;
          this._buffer[d] = 128;
          for (var M = d + 1; M < A - 8; M++)
            this._buffer[M] = 0;
          e.writeUint32BE(p, this._buffer, A - 8), e.writeUint32BE(w, this._buffer, A - 4), s(this._tempHi, this._tempLo, this._stateHi, this._stateLo, this._buffer, 0, A), this._finished = !0;
        }
        for (var M = 0; M < this.digestLength / 8; M++)
          e.writeUint32BE(this._stateHi[M], u, M * 8), e.writeUint32BE(this._stateLo[M], u, M * 8 + 4);
        return this;
      }, a.prototype.digest = function() {
        var u = new Uint8Array(this.digestLength);
        return this.finish(u), u;
      }, a.prototype.saveState = function() {
        if (this._finished)
          throw new Error("SHA256: cannot save finished state");
        return {
          stateHi: new Int32Array(this._stateHi),
          stateLo: new Int32Array(this._stateLo),
          buffer: this._bufferLength > 0 ? new Uint8Array(this._buffer) : void 0,
          bufferLength: this._bufferLength,
          bytesHashed: this._bytesHashed
        };
      }, a.prototype.restoreState = function(u) {
        return this._stateHi.set(u.stateHi), this._stateLo.set(u.stateLo), this._bufferLength = u.bufferLength, u.buffer && this._buffer.set(u.buffer), this._bytesHashed = u.bytesHashed, this._finished = !1, this;
      }, a.prototype.cleanSavedState = function(u) {
        r.wipe(u.stateHi), r.wipe(u.stateLo), u.buffer && r.wipe(u.buffer), u.bufferLength = 0, u.bytesHashed = 0;
      }, a;
    }()
  );
  t.SHA512 = n;
  var i = new Int32Array([
    1116352408,
    3609767458,
    1899447441,
    602891725,
    3049323471,
    3964484399,
    3921009573,
    2173295548,
    961987163,
    4081628472,
    1508970993,
    3053834265,
    2453635748,
    2937671579,
    2870763221,
    3664609560,
    3624381080,
    2734883394,
    310598401,
    1164996542,
    607225278,
    1323610764,
    1426881987,
    3590304994,
    1925078388,
    4068182383,
    2162078206,
    991336113,
    2614888103,
    633803317,
    3248222580,
    3479774868,
    3835390401,
    2666613458,
    4022224774,
    944711139,
    264347078,
    2341262773,
    604807628,
    2007800933,
    770255983,
    1495990901,
    1249150122,
    1856431235,
    1555081692,
    3175218132,
    1996064986,
    2198950837,
    2554220882,
    3999719339,
    2821834349,
    766784016,
    2952996808,
    2566594879,
    3210313671,
    3203337956,
    3336571891,
    1034457026,
    3584528711,
    2466948901,
    113926993,
    3758326383,
    338241895,
    168717936,
    666307205,
    1188179964,
    773529912,
    1546045734,
    1294757372,
    1522805485,
    1396182291,
    2643833823,
    1695183700,
    2343527390,
    1986661051,
    1014477480,
    2177026350,
    1206759142,
    2456956037,
    344077627,
    2730485921,
    1290863460,
    2820302411,
    3158454273,
    3259730800,
    3505952657,
    3345764771,
    106217008,
    3516065817,
    3606008344,
    3600352804,
    1432725776,
    4094571909,
    1467031594,
    275423344,
    851169720,
    430227734,
    3100823752,
    506948616,
    1363258195,
    659060556,
    3750685593,
    883997877,
    3785050280,
    958139571,
    3318307427,
    1322822218,
    3812723403,
    1537002063,
    2003034995,
    1747873779,
    3602036899,
    1955562222,
    1575990012,
    2024104815,
    1125592928,
    2227730452,
    2716904306,
    2361852424,
    442776044,
    2428436474,
    593698344,
    2756734187,
    3733110249,
    3204031479,
    2999351573,
    3329325298,
    3815920427,
    3391569614,
    3928383900,
    3515267271,
    566280711,
    3940187606,
    3454069534,
    4118630271,
    4000239992,
    116418474,
    1914138554,
    174292421,
    2731055270,
    289380356,
    3203993006,
    460393269,
    320620315,
    685471733,
    587496836,
    852142971,
    1086792851,
    1017036298,
    365543100,
    1126000580,
    2618297676,
    1288033470,
    3409855158,
    1501505948,
    4234509866,
    1607167915,
    987167468,
    1816402316,
    1246189591
  ]);
  function s(a, u, l, d, p, w, A) {
    for (var M = l[0], N = l[1], L = l[2], B = l[3], $ = l[4], H = l[5], W = l[6], V = l[7], te = d[0], R = d[1], K = d[2], ge = d[3], Ee = d[4], Y = d[5], S = d[6], m = d[7], f, g, b, x, _, E, v, P; A >= 128; ) {
      for (var I = 0; I < 16; I++) {
        var F = 8 * I + w;
        a[I] = e.readUint32BE(p, F), u[I] = e.readUint32BE(p, F + 4);
      }
      for (var I = 0; I < 80; I++) {
        var ce = M, D = N, oe = L, Z = B, J = $, Q = H, T = W, X = V, re = te, de = R, ie = K, ue = ge, ve = Ee, Pe = Y, De = S, Ce = m;
        if (f = V, g = m, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = ($ >>> 14 | Ee << 18) ^ ($ >>> 18 | Ee << 14) ^ (Ee >>> 9 | $ << 23), g = (Ee >>> 14 | $ << 18) ^ (Ee >>> 18 | $ << 14) ^ ($ >>> 9 | Ee << 23), _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, f = $ & H ^ ~$ & W, g = Ee & Y ^ ~Ee & S, _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, f = i[I * 2], g = i[I * 2 + 1], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, f = a[I % 16], g = u[I % 16], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, b = v & 65535 | P << 16, x = _ & 65535 | E << 16, f = b, g = x, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = (M >>> 28 | te << 4) ^ (te >>> 2 | M << 30) ^ (te >>> 7 | M << 25), g = (te >>> 28 | M << 4) ^ (M >>> 2 | te << 30) ^ (M >>> 7 | te << 25), _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, f = M & N ^ M & L ^ N & L, g = te & R ^ te & K ^ R & K, _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, X = v & 65535 | P << 16, Ce = _ & 65535 | E << 16, f = Z, g = ue, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = b, g = x, _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, Z = v & 65535 | P << 16, ue = _ & 65535 | E << 16, N = ce, L = D, B = oe, $ = Z, H = J, W = Q, V = T, M = X, R = re, K = de, ge = ie, Ee = ue, Y = ve, S = Pe, m = De, te = Ce, I % 16 === 15)
          for (var F = 0; F < 16; F++)
            f = a[F], g = u[F], _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = a[(F + 9) % 16], g = u[(F + 9) % 16], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, b = a[(F + 1) % 16], x = u[(F + 1) % 16], f = (b >>> 1 | x << 31) ^ (b >>> 8 | x << 24) ^ b >>> 7, g = (x >>> 1 | b << 31) ^ (x >>> 8 | b << 24) ^ (x >>> 7 | b << 25), _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, b = a[(F + 14) % 16], x = u[(F + 14) % 16], f = (b >>> 19 | x << 13) ^ (x >>> 29 | b << 3) ^ b >>> 6, g = (x >>> 19 | b << 13) ^ (b >>> 29 | x << 3) ^ (x >>> 6 | b << 26), _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, a[F] = v & 65535 | P << 16, u[F] = _ & 65535 | E << 16;
      }
      f = M, g = te, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[0], g = d[0], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[0] = M = v & 65535 | P << 16, d[0] = te = _ & 65535 | E << 16, f = N, g = R, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[1], g = d[1], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[1] = N = v & 65535 | P << 16, d[1] = R = _ & 65535 | E << 16, f = L, g = K, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[2], g = d[2], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[2] = L = v & 65535 | P << 16, d[2] = K = _ & 65535 | E << 16, f = B, g = ge, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[3], g = d[3], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[3] = B = v & 65535 | P << 16, d[3] = ge = _ & 65535 | E << 16, f = $, g = Ee, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[4], g = d[4], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[4] = $ = v & 65535 | P << 16, d[4] = Ee = _ & 65535 | E << 16, f = H, g = Y, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[5], g = d[5], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[5] = H = v & 65535 | P << 16, d[5] = Y = _ & 65535 | E << 16, f = W, g = S, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[6], g = d[6], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[6] = W = v & 65535 | P << 16, d[6] = S = _ & 65535 | E << 16, f = V, g = m, _ = g & 65535, E = g >>> 16, v = f & 65535, P = f >>> 16, f = l[7], g = d[7], _ += g & 65535, E += g >>> 16, v += f & 65535, P += f >>> 16, E += _ >>> 16, v += E >>> 16, P += v >>> 16, l[7] = V = v & 65535 | P << 16, d[7] = m = _ & 65535 | E << 16, w += 128, A -= 128;
    }
    return w;
  }
  function o(a) {
    var u = new n();
    u.update(a);
    var l = u.digest();
    return u.clean(), l;
  }
  t.hash = o;
})(D4);
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 }), t.convertSecretKeyToX25519 = t.convertPublicKeyToX25519 = t.verify = t.sign = t.extractPublicKeyFromSecretKey = t.generateKeyPair = t.generateKeyPairFromSeed = t.SEED_LENGTH = t.SECRET_KEY_LENGTH = t.PUBLIC_KEY_LENGTH = t.SIGNATURE_LENGTH = void 0;
  const e = Pa, r = D4, n = ki;
  t.SIGNATURE_LENGTH = 64, t.PUBLIC_KEY_LENGTH = 32, t.SECRET_KEY_LENGTH = 64, t.SEED_LENGTH = 32;
  function i(Z) {
    const J = new Float64Array(16);
    if (Z)
      for (let Q = 0; Q < Z.length; Q++)
        J[Q] = Z[Q];
    return J;
  }
  const s = new Uint8Array(32);
  s[0] = 9;
  const o = i(), a = i([1]), u = i([
    30883,
    4953,
    19914,
    30187,
    55467,
    16705,
    2637,
    112,
    59544,
    30585,
    16505,
    36039,
    65139,
    11119,
    27886,
    20995
  ]), l = i([
    61785,
    9906,
    39828,
    60374,
    45398,
    33411,
    5274,
    224,
    53552,
    61171,
    33010,
    6542,
    64743,
    22239,
    55772,
    9222
  ]), d = i([
    54554,
    36645,
    11616,
    51542,
    42930,
    38181,
    51040,
    26924,
    56412,
    64982,
    57905,
    49316,
    21502,
    52590,
    14035,
    8553
  ]), p = i([
    26200,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214,
    26214
  ]), w = i([
    41136,
    18958,
    6951,
    50414,
    58488,
    44335,
    6150,
    12099,
    55207,
    15867,
    153,
    11085,
    57099,
    20417,
    9344,
    11139
  ]);
  function A(Z, J) {
    for (let Q = 0; Q < 16; Q++)
      Z[Q] = J[Q] | 0;
  }
  function M(Z) {
    let J = 1;
    for (let Q = 0; Q < 16; Q++) {
      let T = Z[Q] + J + 65535;
      J = Math.floor(T / 65536), Z[Q] = T - J * 65536;
    }
    Z[0] += J - 1 + 37 * (J - 1);
  }
  function N(Z, J, Q) {
    const T = ~(Q - 1);
    for (let X = 0; X < 16; X++) {
      const re = T & (Z[X] ^ J[X]);
      Z[X] ^= re, J[X] ^= re;
    }
  }
  function L(Z, J) {
    const Q = i(), T = i();
    for (let X = 0; X < 16; X++)
      T[X] = J[X];
    M(T), M(T), M(T);
    for (let X = 0; X < 2; X++) {
      Q[0] = T[0] - 65517;
      for (let de = 1; de < 15; de++)
        Q[de] = T[de] - 65535 - (Q[de - 1] >> 16 & 1), Q[de - 1] &= 65535;
      Q[15] = T[15] - 32767 - (Q[14] >> 16 & 1);
      const re = Q[15] >> 16 & 1;
      Q[14] &= 65535, N(T, Q, 1 - re);
    }
    for (let X = 0; X < 16; X++)
      Z[2 * X] = T[X] & 255, Z[2 * X + 1] = T[X] >> 8;
  }
  function B(Z, J) {
    let Q = 0;
    for (let T = 0; T < 32; T++)
      Q |= Z[T] ^ J[T];
    return (1 & Q - 1 >>> 8) - 1;
  }
  function $(Z, J) {
    const Q = new Uint8Array(32), T = new Uint8Array(32);
    return L(Q, Z), L(T, J), B(Q, T);
  }
  function H(Z) {
    const J = new Uint8Array(32);
    return L(J, Z), J[0] & 1;
  }
  function W(Z, J) {
    for (let Q = 0; Q < 16; Q++)
      Z[Q] = J[2 * Q] + (J[2 * Q + 1] << 8);
    Z[15] &= 32767;
  }
  function V(Z, J, Q) {
    for (let T = 0; T < 16; T++)
      Z[T] = J[T] + Q[T];
  }
  function te(Z, J, Q) {
    for (let T = 0; T < 16; T++)
      Z[T] = J[T] - Q[T];
  }
  function R(Z, J, Q) {
    let T, X, re = 0, de = 0, ie = 0, ue = 0, ve = 0, Pe = 0, De = 0, Ce = 0, $e = 0, Me = 0, Ne = 0, Ke = 0, Le = 0, qe = 0, ze = 0, _e = 0, Ze = 0, at = 0, ke = 0, Qe = 0, tt = 0, Ye = 0, dt = 0, lt = 0, ct = 0, qt = 0, Yt = 0, Et = 0, er = 0, Jt = 0, Dt = 0, kt = Q[0], Ct = Q[1], gt = Q[2], Rt = Q[3], Nt = Q[4], vt = Q[5], $t = Q[6], Ft = Q[7], rt = Q[8], Bt = Q[9], k = Q[10], U = Q[11], z = Q[12], C = Q[13], G = Q[14], j = Q[15];
    T = J[0], re += T * kt, de += T * Ct, ie += T * gt, ue += T * Rt, ve += T * Nt, Pe += T * vt, De += T * $t, Ce += T * Ft, $e += T * rt, Me += T * Bt, Ne += T * k, Ke += T * U, Le += T * z, qe += T * C, ze += T * G, _e += T * j, T = J[1], de += T * kt, ie += T * Ct, ue += T * gt, ve += T * Rt, Pe += T * Nt, De += T * vt, Ce += T * $t, $e += T * Ft, Me += T * rt, Ne += T * Bt, Ke += T * k, Le += T * U, qe += T * z, ze += T * C, _e += T * G, Ze += T * j, T = J[2], ie += T * kt, ue += T * Ct, ve += T * gt, Pe += T * Rt, De += T * Nt, Ce += T * vt, $e += T * $t, Me += T * Ft, Ne += T * rt, Ke += T * Bt, Le += T * k, qe += T * U, ze += T * z, _e += T * C, Ze += T * G, at += T * j, T = J[3], ue += T * kt, ve += T * Ct, Pe += T * gt, De += T * Rt, Ce += T * Nt, $e += T * vt, Me += T * $t, Ne += T * Ft, Ke += T * rt, Le += T * Bt, qe += T * k, ze += T * U, _e += T * z, Ze += T * C, at += T * G, ke += T * j, T = J[4], ve += T * kt, Pe += T * Ct, De += T * gt, Ce += T * Rt, $e += T * Nt, Me += T * vt, Ne += T * $t, Ke += T * Ft, Le += T * rt, qe += T * Bt, ze += T * k, _e += T * U, Ze += T * z, at += T * C, ke += T * G, Qe += T * j, T = J[5], Pe += T * kt, De += T * Ct, Ce += T * gt, $e += T * Rt, Me += T * Nt, Ne += T * vt, Ke += T * $t, Le += T * Ft, qe += T * rt, ze += T * Bt, _e += T * k, Ze += T * U, at += T * z, ke += T * C, Qe += T * G, tt += T * j, T = J[6], De += T * kt, Ce += T * Ct, $e += T * gt, Me += T * Rt, Ne += T * Nt, Ke += T * vt, Le += T * $t, qe += T * Ft, ze += T * rt, _e += T * Bt, Ze += T * k, at += T * U, ke += T * z, Qe += T * C, tt += T * G, Ye += T * j, T = J[7], Ce += T * kt, $e += T * Ct, Me += T * gt, Ne += T * Rt, Ke += T * Nt, Le += T * vt, qe += T * $t, ze += T * Ft, _e += T * rt, Ze += T * Bt, at += T * k, ke += T * U, Qe += T * z, tt += T * C, Ye += T * G, dt += T * j, T = J[8], $e += T * kt, Me += T * Ct, Ne += T * gt, Ke += T * Rt, Le += T * Nt, qe += T * vt, ze += T * $t, _e += T * Ft, Ze += T * rt, at += T * Bt, ke += T * k, Qe += T * U, tt += T * z, Ye += T * C, dt += T * G, lt += T * j, T = J[9], Me += T * kt, Ne += T * Ct, Ke += T * gt, Le += T * Rt, qe += T * Nt, ze += T * vt, _e += T * $t, Ze += T * Ft, at += T * rt, ke += T * Bt, Qe += T * k, tt += T * U, Ye += T * z, dt += T * C, lt += T * G, ct += T * j, T = J[10], Ne += T * kt, Ke += T * Ct, Le += T * gt, qe += T * Rt, ze += T * Nt, _e += T * vt, Ze += T * $t, at += T * Ft, ke += T * rt, Qe += T * Bt, tt += T * k, Ye += T * U, dt += T * z, lt += T * C, ct += T * G, qt += T * j, T = J[11], Ke += T * kt, Le += T * Ct, qe += T * gt, ze += T * Rt, _e += T * Nt, Ze += T * vt, at += T * $t, ke += T * Ft, Qe += T * rt, tt += T * Bt, Ye += T * k, dt += T * U, lt += T * z, ct += T * C, qt += T * G, Yt += T * j, T = J[12], Le += T * kt, qe += T * Ct, ze += T * gt, _e += T * Rt, Ze += T * Nt, at += T * vt, ke += T * $t, Qe += T * Ft, tt += T * rt, Ye += T * Bt, dt += T * k, lt += T * U, ct += T * z, qt += T * C, Yt += T * G, Et += T * j, T = J[13], qe += T * kt, ze += T * Ct, _e += T * gt, Ze += T * Rt, at += T * Nt, ke += T * vt, Qe += T * $t, tt += T * Ft, Ye += T * rt, dt += T * Bt, lt += T * k, ct += T * U, qt += T * z, Yt += T * C, Et += T * G, er += T * j, T = J[14], ze += T * kt, _e += T * Ct, Ze += T * gt, at += T * Rt, ke += T * Nt, Qe += T * vt, tt += T * $t, Ye += T * Ft, dt += T * rt, lt += T * Bt, ct += T * k, qt += T * U, Yt += T * z, Et += T * C, er += T * G, Jt += T * j, T = J[15], _e += T * kt, Ze += T * Ct, at += T * gt, ke += T * Rt, Qe += T * Nt, tt += T * vt, Ye += T * $t, dt += T * Ft, lt += T * rt, ct += T * Bt, qt += T * k, Yt += T * U, Et += T * z, er += T * C, Jt += T * G, Dt += T * j, re += 38 * Ze, de += 38 * at, ie += 38 * ke, ue += 38 * Qe, ve += 38 * tt, Pe += 38 * Ye, De += 38 * dt, Ce += 38 * lt, $e += 38 * ct, Me += 38 * qt, Ne += 38 * Yt, Ke += 38 * Et, Le += 38 * er, qe += 38 * Jt, ze += 38 * Dt, X = 1, T = re + X + 65535, X = Math.floor(T / 65536), re = T - X * 65536, T = de + X + 65535, X = Math.floor(T / 65536), de = T - X * 65536, T = ie + X + 65535, X = Math.floor(T / 65536), ie = T - X * 65536, T = ue + X + 65535, X = Math.floor(T / 65536), ue = T - X * 65536, T = ve + X + 65535, X = Math.floor(T / 65536), ve = T - X * 65536, T = Pe + X + 65535, X = Math.floor(T / 65536), Pe = T - X * 65536, T = De + X + 65535, X = Math.floor(T / 65536), De = T - X * 65536, T = Ce + X + 65535, X = Math.floor(T / 65536), Ce = T - X * 65536, T = $e + X + 65535, X = Math.floor(T / 65536), $e = T - X * 65536, T = Me + X + 65535, X = Math.floor(T / 65536), Me = T - X * 65536, T = Ne + X + 65535, X = Math.floor(T / 65536), Ne = T - X * 65536, T = Ke + X + 65535, X = Math.floor(T / 65536), Ke = T - X * 65536, T = Le + X + 65535, X = Math.floor(T / 65536), Le = T - X * 65536, T = qe + X + 65535, X = Math.floor(T / 65536), qe = T - X * 65536, T = ze + X + 65535, X = Math.floor(T / 65536), ze = T - X * 65536, T = _e + X + 65535, X = Math.floor(T / 65536), _e = T - X * 65536, re += X - 1 + 37 * (X - 1), X = 1, T = re + X + 65535, X = Math.floor(T / 65536), re = T - X * 65536, T = de + X + 65535, X = Math.floor(T / 65536), de = T - X * 65536, T = ie + X + 65535, X = Math.floor(T / 65536), ie = T - X * 65536, T = ue + X + 65535, X = Math.floor(T / 65536), ue = T - X * 65536, T = ve + X + 65535, X = Math.floor(T / 65536), ve = T - X * 65536, T = Pe + X + 65535, X = Math.floor(T / 65536), Pe = T - X * 65536, T = De + X + 65535, X = Math.floor(T / 65536), De = T - X * 65536, T = Ce + X + 65535, X = Math.floor(T / 65536), Ce = T - X * 65536, T = $e + X + 65535, X = Math.floor(T / 65536), $e = T - X * 65536, T = Me + X + 65535, X = Math.floor(T / 65536), Me = T - X * 65536, T = Ne + X + 65535, X = Math.floor(T / 65536), Ne = T - X * 65536, T = Ke + X + 65535, X = Math.floor(T / 65536), Ke = T - X * 65536, T = Le + X + 65535, X = Math.floor(T / 65536), Le = T - X * 65536, T = qe + X + 65535, X = Math.floor(T / 65536), qe = T - X * 65536, T = ze + X + 65535, X = Math.floor(T / 65536), ze = T - X * 65536, T = _e + X + 65535, X = Math.floor(T / 65536), _e = T - X * 65536, re += X - 1 + 37 * (X - 1), Z[0] = re, Z[1] = de, Z[2] = ie, Z[3] = ue, Z[4] = ve, Z[5] = Pe, Z[6] = De, Z[7] = Ce, Z[8] = $e, Z[9] = Me, Z[10] = Ne, Z[11] = Ke, Z[12] = Le, Z[13] = qe, Z[14] = ze, Z[15] = _e;
  }
  function K(Z, J) {
    R(Z, J, J);
  }
  function ge(Z, J) {
    const Q = i();
    let T;
    for (T = 0; T < 16; T++)
      Q[T] = J[T];
    for (T = 253; T >= 0; T--)
      K(Q, Q), T !== 2 && T !== 4 && R(Q, Q, J);
    for (T = 0; T < 16; T++)
      Z[T] = Q[T];
  }
  function Ee(Z, J) {
    const Q = i();
    let T;
    for (T = 0; T < 16; T++)
      Q[T] = J[T];
    for (T = 250; T >= 0; T--)
      K(Q, Q), T !== 1 && R(Q, Q, J);
    for (T = 0; T < 16; T++)
      Z[T] = Q[T];
  }
  function Y(Z, J) {
    const Q = i(), T = i(), X = i(), re = i(), de = i(), ie = i(), ue = i(), ve = i(), Pe = i();
    te(Q, Z[1], Z[0]), te(Pe, J[1], J[0]), R(Q, Q, Pe), V(T, Z[0], Z[1]), V(Pe, J[0], J[1]), R(T, T, Pe), R(X, Z[3], J[3]), R(X, X, l), R(re, Z[2], J[2]), V(re, re, re), te(de, T, Q), te(ie, re, X), V(ue, re, X), V(ve, T, Q), R(Z[0], de, ie), R(Z[1], ve, ue), R(Z[2], ue, ie), R(Z[3], de, ve);
  }
  function S(Z, J, Q) {
    for (let T = 0; T < 4; T++)
      N(Z[T], J[T], Q);
  }
  function m(Z, J) {
    const Q = i(), T = i(), X = i();
    ge(X, J[2]), R(Q, J[0], X), R(T, J[1], X), L(Z, T), Z[31] ^= H(Q) << 7;
  }
  function f(Z, J, Q) {
    A(Z[0], o), A(Z[1], a), A(Z[2], a), A(Z[3], o);
    for (let T = 255; T >= 0; --T) {
      const X = Q[T / 8 | 0] >> (T & 7) & 1;
      S(Z, J, X), Y(J, Z), Y(Z, Z), S(Z, J, X);
    }
  }
  function g(Z, J) {
    const Q = [i(), i(), i(), i()];
    A(Q[0], d), A(Q[1], p), A(Q[2], a), R(Q[3], d, p), f(Z, Q, J);
  }
  function b(Z) {
    if (Z.length !== t.SEED_LENGTH)
      throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);
    const J = (0, r.hash)(Z);
    J[0] &= 248, J[31] &= 127, J[31] |= 64;
    const Q = new Uint8Array(32), T = [i(), i(), i(), i()];
    g(T, J), m(Q, T);
    const X = new Uint8Array(64);
    return X.set(Z), X.set(Q, 32), {
      publicKey: Q,
      secretKey: X
    };
  }
  t.generateKeyPairFromSeed = b;
  function x(Z) {
    const J = (0, e.randomBytes)(32, Z), Q = b(J);
    return (0, n.wipe)(J), Q;
  }
  t.generateKeyPair = x;
  function _(Z) {
    if (Z.length !== t.SECRET_KEY_LENGTH)
      throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);
    return new Uint8Array(Z.subarray(32));
  }
  t.extractPublicKeyFromSecretKey = _;
  const E = new Float64Array([
    237,
    211,
    245,
    92,
    26,
    99,
    18,
    88,
    214,
    156,
    247,
    162,
    222,
    249,
    222,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    16
  ]);
  function v(Z, J) {
    let Q, T, X, re;
    for (T = 63; T >= 32; --T) {
      for (Q = 0, X = T - 32, re = T - 12; X < re; ++X)
        J[X] += Q - 16 * J[T] * E[X - (T - 32)], Q = Math.floor((J[X] + 128) / 256), J[X] -= Q * 256;
      J[X] += Q, J[T] = 0;
    }
    for (Q = 0, X = 0; X < 32; X++)
      J[X] += Q - (J[31] >> 4) * E[X], Q = J[X] >> 8, J[X] &= 255;
    for (X = 0; X < 32; X++)
      J[X] -= Q * E[X];
    for (T = 0; T < 32; T++)
      J[T + 1] += J[T] >> 8, Z[T] = J[T] & 255;
  }
  function P(Z) {
    const J = new Float64Array(64);
    for (let Q = 0; Q < 64; Q++)
      J[Q] = Z[Q];
    for (let Q = 0; Q < 64; Q++)
      Z[Q] = 0;
    v(Z, J);
  }
  function I(Z, J) {
    const Q = new Float64Array(64), T = [i(), i(), i(), i()], X = (0, r.hash)(Z.subarray(0, 32));
    X[0] &= 248, X[31] &= 127, X[31] |= 64;
    const re = new Uint8Array(64);
    re.set(X.subarray(32), 32);
    const de = new r.SHA512();
    de.update(re.subarray(32)), de.update(J);
    const ie = de.digest();
    de.clean(), P(ie), g(T, ie), m(re, T), de.reset(), de.update(re.subarray(0, 32)), de.update(Z.subarray(32)), de.update(J);
    const ue = de.digest();
    P(ue);
    for (let ve = 0; ve < 32; ve++)
      Q[ve] = ie[ve];
    for (let ve = 0; ve < 32; ve++)
      for (let Pe = 0; Pe < 32; Pe++)
        Q[ve + Pe] += ue[ve] * X[Pe];
    return v(re.subarray(32), Q), re;
  }
  t.sign = I;
  function F(Z, J) {
    const Q = i(), T = i(), X = i(), re = i(), de = i(), ie = i(), ue = i();
    return A(Z[2], a), W(Z[1], J), K(X, Z[1]), R(re, X, u), te(X, X, Z[2]), V(re, Z[2], re), K(de, re), K(ie, de), R(ue, ie, de), R(Q, ue, X), R(Q, Q, re), Ee(Q, Q), R(Q, Q, X), R(Q, Q, re), R(Q, Q, re), R(Z[0], Q, re), K(T, Z[0]), R(T, T, re), $(T, X) && R(Z[0], Z[0], w), K(T, Z[0]), R(T, T, re), $(T, X) ? -1 : (H(Z[0]) === J[31] >> 7 && te(Z[0], o, Z[0]), R(Z[3], Z[0], Z[1]), 0);
  }
  function ce(Z, J, Q) {
    const T = new Uint8Array(32), X = [i(), i(), i(), i()], re = [i(), i(), i(), i()];
    if (Q.length !== t.SIGNATURE_LENGTH)
      throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);
    if (F(re, Z))
      return !1;
    const de = new r.SHA512();
    de.update(Q.subarray(0, 32)), de.update(Z), de.update(J);
    const ie = de.digest();
    return P(ie), f(X, re, ie), g(re, Q.subarray(32)), Y(X, re), m(T, X), !B(Q, T);
  }
  t.verify = ce;
  function D(Z) {
    let J = [i(), i(), i(), i()];
    if (F(J, Z))
      throw new Error("Ed25519: invalid public key");
    let Q = i(), T = i(), X = J[1];
    V(Q, a, X), te(T, a, X), ge(T, T), R(Q, Q, T);
    let re = new Uint8Array(32);
    return L(re, Q), re;
  }
  t.convertPublicKeyToX25519 = D;
  function oe(Z) {
    const J = (0, r.hash)(Z.subarray(0, 32));
    J[0] &= 248, J[31] &= 127, J[31] |= 64;
    const Q = new Uint8Array(J.subarray(0, 32));
    return (0, n.wipe)(J), Q;
  }
  t.convertSecretKeyToX25519 = oe;
})(Bv);
const $$ = "EdDSA", B$ = "JWT", e0 = ".", U0 = "base64url", O4 = "utf8", N4 = "utf8", F$ = ":", j$ = "did", U$ = "key", ex = "base58btc", q$ = "z", z$ = "K36", W$ = 32;
function L4(t = 0) {
  return globalThis.Buffer != null && globalThis.Buffer.allocUnsafe != null ? globalThis.Buffer.allocUnsafe(t) : new Uint8Array(t);
}
function Sd(t, e) {
  e || (e = t.reduce((i, s) => i + s.length, 0));
  const r = L4(e);
  let n = 0;
  for (const i of t)
    r.set(i, n), n += i.length;
  return r;
}
function H$(t, e) {
  if (t.length >= 255)
    throw new TypeError("Alphabet too long");
  for (var r = new Uint8Array(256), n = 0; n < r.length; n++)
    r[n] = 255;
  for (var i = 0; i < t.length; i++) {
    var s = t.charAt(i), o = s.charCodeAt(0);
    if (r[o] !== 255)
      throw new TypeError(s + " is ambiguous");
    r[o] = i;
  }
  var a = t.length, u = t.charAt(0), l = Math.log(a) / Math.log(256), d = Math.log(256) / Math.log(a);
  function p(M) {
    if (M instanceof Uint8Array || (ArrayBuffer.isView(M) ? M = new Uint8Array(M.buffer, M.byteOffset, M.byteLength) : Array.isArray(M) && (M = Uint8Array.from(M))), !(M instanceof Uint8Array))
      throw new TypeError("Expected Uint8Array");
    if (M.length === 0)
      return "";
    for (var N = 0, L = 0, B = 0, $ = M.length; B !== $ && M[B] === 0; )
      B++, N++;
    for (var H = ($ - B) * d + 1 >>> 0, W = new Uint8Array(H); B !== $; ) {
      for (var V = M[B], te = 0, R = H - 1; (V !== 0 || te < L) && R !== -1; R--, te++)
        V += 256 * W[R] >>> 0, W[R] = V % a >>> 0, V = V / a >>> 0;
      if (V !== 0)
        throw new Error("Non-zero carry");
      L = te, B++;
    }
    for (var K = H - L; K !== H && W[K] === 0; )
      K++;
    for (var ge = u.repeat(N); K < H; ++K)
      ge += t.charAt(W[K]);
    return ge;
  }
  function w(M) {
    if (typeof M != "string")
      throw new TypeError("Expected String");
    if (M.length === 0)
      return new Uint8Array();
    var N = 0;
    if (M[N] !== " ") {
      for (var L = 0, B = 0; M[N] === u; )
        L++, N++;
      for (var $ = (M.length - N) * l + 1 >>> 0, H = new Uint8Array($); M[N]; ) {
        var W = r[M.charCodeAt(N)];
        if (W === 255)
          return;
        for (var V = 0, te = $ - 1; (W !== 0 || V < B) && te !== -1; te--, V++)
          W += a * H[te] >>> 0, H[te] = W % 256 >>> 0, W = W / 256 >>> 0;
        if (W !== 0)
          throw new Error("Non-zero carry");
        B = V, N++;
      }
      if (M[N] !== " ") {
        for (var R = $ - B; R !== $ && H[R] === 0; )
          R++;
        for (var K = new Uint8Array(L + ($ - R)), ge = L; R !== $; )
          K[ge++] = H[R++];
        return K;
      }
    }
  }
  function A(M) {
    var N = w(M);
    if (N)
      return N;
    throw new Error(`Non-${e} character`);
  }
  return {
    encode: p,
    decodeUnsafe: w,
    decode: A
  };
}
var K$ = H$, V$ = K$;
const G$ = (t) => {
  if (t instanceof Uint8Array && t.constructor.name === "Uint8Array")
    return t;
  if (t instanceof ArrayBuffer)
    return new Uint8Array(t);
  if (ArrayBuffer.isView(t))
    return new Uint8Array(t.buffer, t.byteOffset, t.byteLength);
  throw new Error("Unknown type, must be binary type");
}, Y$ = (t) => new TextEncoder().encode(t), J$ = (t) => new TextDecoder().decode(t);
class X$ {
  constructor(e, r, n) {
    this.name = e, this.prefix = r, this.baseEncode = n;
  }
  encode(e) {
    if (e instanceof Uint8Array)
      return `${this.prefix}${this.baseEncode(e)}`;
    throw Error("Unknown type, must be binary type");
  }
}
class Z$ {
  constructor(e, r, n) {
    if (this.name = e, this.prefix = r, r.codePointAt(0) === void 0)
      throw new Error("Invalid prefix character");
    this.prefixCodePoint = r.codePointAt(0), this.baseDecode = n;
  }
  decode(e) {
    if (typeof e == "string") {
      if (e.codePointAt(0) !== this.prefixCodePoint)
        throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);
      return this.baseDecode(e.slice(this.prefix.length));
    } else
      throw Error("Can only multibase decode strings");
  }
  or(e) {
    return k4(this, e);
  }
}
class Q$ {
  constructor(e) {
    this.decoders = e;
  }
  or(e) {
    return k4(this, e);
  }
  decode(e) {
    const r = e[0], n = this.decoders[r];
    if (n)
      return n.decode(e);
    throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`);
  }
}
const k4 = (t, e) => new Q$({
  ...t.decoders || { [t.prefix]: t },
  ...e.decoders || { [e.prefix]: e }
});
class eB {
  constructor(e, r, n, i) {
    this.name = e, this.prefix = r, this.baseEncode = n, this.baseDecode = i, this.encoder = new X$(e, r, n), this.decoder = new Z$(e, r, i);
  }
  encode(e) {
    return this.encoder.encode(e);
  }
  decode(e) {
    return this.decoder.decode(e);
  }
}
const q0 = ({ name: t, prefix: e, encode: r, decode: n }) => new eB(t, e, r, n), Hl = ({ prefix: t, name: e, alphabet: r }) => {
  const { encode: n, decode: i } = V$(r, e);
  return q0({
    prefix: t,
    name: e,
    encode: n,
    decode: (s) => G$(i(s))
  });
}, tB = (t, e, r, n) => {
  const i = {};
  for (let d = 0; d < e.length; ++d)
    i[e[d]] = d;
  let s = t.length;
  for (; t[s - 1] === "="; )
    --s;
  const o = new Uint8Array(s * r / 8 | 0);
  let a = 0, u = 0, l = 0;
  for (let d = 0; d < s; ++d) {
    const p = i[t[d]];
    if (p === void 0)
      throw new SyntaxError(`Non-${n} character`);
    u = u << r | p, a += r, a >= 8 && (a -= 8, o[l++] = 255 & u >> a);
  }
  if (a >= r || 255 & u << 8 - a)
    throw new SyntaxError("Unexpected end of data");
  return o;
}, rB = (t, e, r) => {
  const n = e[e.length - 1] === "=", i = (1 << r) - 1;
  let s = "", o = 0, a = 0;
  for (let u = 0; u < t.length; ++u)
    for (a = a << 8 | t[u], o += 8; o > r; )
      o -= r, s += e[i & a >> o];
  if (o && (s += e[i & a << r - o]), n)
    for (; s.length * r & 7; )
      s += "=";
  return s;
}, qn = ({ name: t, prefix: e, bitsPerChar: r, alphabet: n }) => q0({
  prefix: e,
  name: t,
  encode(i) {
    return rB(i, n, r);
  },
  decode(i) {
    return tB(i, n, r, t);
  }
}), nB = q0({
  prefix: "\0",
  name: "identity",
  encode: (t) => J$(t),
  decode: (t) => Y$(t)
}), iB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  identity: nB
}, Symbol.toStringTag, { value: "Module" })), sB = qn({
  prefix: "0",
  name: "base2",
  alphabet: "01",
  bitsPerChar: 1
}), oB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base2: sB
}, Symbol.toStringTag, { value: "Module" })), aB = qn({
  prefix: "7",
  name: "base8",
  alphabet: "01234567",
  bitsPerChar: 3
}), cB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base8: aB
}, Symbol.toStringTag, { value: "Module" })), uB = Hl({
  prefix: "9",
  name: "base10",
  alphabet: "0123456789"
}), fB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base10: uB
}, Symbol.toStringTag, { value: "Module" })), lB = qn({
  prefix: "f",
  name: "base16",
  alphabet: "0123456789abcdef",
  bitsPerChar: 4
}), hB = qn({
  prefix: "F",
  name: "base16upper",
  alphabet: "0123456789ABCDEF",
  bitsPerChar: 4
}), dB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base16: lB,
  base16upper: hB
}, Symbol.toStringTag, { value: "Module" })), pB = qn({
  prefix: "b",
  name: "base32",
  alphabet: "abcdefghijklmnopqrstuvwxyz234567",
  bitsPerChar: 5
}), gB = qn({
  prefix: "B",
  name: "base32upper",
  alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",
  bitsPerChar: 5
}), mB = qn({
  prefix: "c",
  name: "base32pad",
  alphabet: "abcdefghijklmnopqrstuvwxyz234567=",
  bitsPerChar: 5
}), vB = qn({
  prefix: "C",
  name: "base32padupper",
  alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",
  bitsPerChar: 5
}), bB = qn({
  prefix: "v",
  name: "base32hex",
  alphabet: "0123456789abcdefghijklmnopqrstuv",
  bitsPerChar: 5
}), yB = qn({
  prefix: "V",
  name: "base32hexupper",
  alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV",
  bitsPerChar: 5
}), wB = qn({
  prefix: "t",
  name: "base32hexpad",
  alphabet: "0123456789abcdefghijklmnopqrstuv=",
  bitsPerChar: 5
}), xB = qn({
  prefix: "T",
  name: "base32hexpadupper",
  alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV=",
  bitsPerChar: 5
}), _B = qn({
  prefix: "h",
  name: "base32z",
  alphabet: "ybndrfg8ejkmcpqxot1uwisza345h769",
  bitsPerChar: 5
}), EB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base32: pB,
  base32hex: bB,
  base32hexpad: wB,
  base32hexpadupper: xB,
  base32hexupper: yB,
  base32pad: mB,
  base32padupper: vB,
  base32upper: gB,
  base32z: _B
}, Symbol.toStringTag, { value: "Module" })), SB = Hl({
  prefix: "k",
  name: "base36",
  alphabet: "0123456789abcdefghijklmnopqrstuvwxyz"
}), AB = Hl({
  prefix: "K",
  name: "base36upper",
  alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
}), PB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base36: SB,
  base36upper: AB
}, Symbol.toStringTag, { value: "Module" })), MB = Hl({
  name: "base58btc",
  prefix: "z",
  alphabet: "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"
}), IB = Hl({
  name: "base58flickr",
  prefix: "Z",
  alphabet: "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
}), CB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base58btc: MB,
  base58flickr: IB
}, Symbol.toStringTag, { value: "Module" })), TB = qn({
  prefix: "m",
  name: "base64",
  alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
  bitsPerChar: 6
}), RB = qn({
  prefix: "M",
  name: "base64pad",
  alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
  bitsPerChar: 6
}), DB = qn({
  prefix: "u",
  name: "base64url",
  alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",
  bitsPerChar: 6
}), OB = qn({
  prefix: "U",
  name: "base64urlpad",
  alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",
  bitsPerChar: 6
}), NB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base64: TB,
  base64pad: RB,
  base64url: DB,
  base64urlpad: OB
}, Symbol.toStringTag, { value: "Module" })), $4 = Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"), LB = $4.reduce((t, e, r) => (t[r] = e, t), []), kB = $4.reduce((t, e, r) => (t[e.codePointAt(0)] = r, t), []);
function $B(t) {
  return t.reduce((e, r) => (e += LB[r], e), "");
}
function BB(t) {
  const e = [];
  for (const r of t) {
    const n = kB[r.codePointAt(0)];
    if (n === void 0)
      throw new Error(`Non-base256emoji character: ${r}`);
    e.push(n);
  }
  return new Uint8Array(e);
}
const FB = q0({
  prefix: "🚀",
  name: "base256emoji",
  encode: $B,
  decode: BB
}), jB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  base256emoji: FB
}, Symbol.toStringTag, { value: "Module" }));
new TextEncoder();
new TextDecoder();
const tx = {
  ...iB,
  ...oB,
  ...cB,
  ...fB,
  ...dB,
  ...EB,
  ...PB,
  ...CB,
  ...NB,
  ...jB
};
function B4(t, e, r, n) {
  return {
    name: t,
    prefix: e,
    encoder: {
      name: t,
      prefix: e,
      encode: r
    },
    decoder: { decode: n }
  };
}
const rx = B4("utf8", "u", (t) => "u" + new TextDecoder("utf8").decode(t), (t) => new TextEncoder().encode(t.substring(1))), Xg = B4("ascii", "a", (t) => {
  let e = "a";
  for (let r = 0; r < t.length; r++)
    e += String.fromCharCode(t[r]);
  return e;
}, (t) => {
  t = t.substring(1);
  const e = L4(t.length);
  for (let r = 0; r < t.length; r++)
    e[r] = t.charCodeAt(r);
  return e;
}), F4 = {
  utf8: rx,
  "utf-8": rx,
  hex: tx.base16,
  latin1: Xg,
  ascii: Xg,
  binary: Xg,
  ...tx
};
function On(t, e = "utf8") {
  const r = F4[e];
  if (!r)
    throw new Error(`Unsupported encoding "${e}"`);
  return (e === "utf8" || e === "utf-8") && globalThis.Buffer != null && globalThis.Buffer.from != null ? globalThis.Buffer.from(t.buffer, t.byteOffset, t.byteLength).toString("utf8") : r.encoder.encode(t).substring(1);
}
function Rn(t, e = "utf8") {
  const r = F4[e];
  if (!r)
    throw new Error(`Unsupported encoding "${e}"`);
  return (e === "utf8" || e === "utf-8") && globalThis.Buffer != null && globalThis.Buffer.from != null ? globalThis.Buffer.from(t, "utf8") : r.decoder.decode(`${r.prefix}${t}`);
}
function nx(t) {
  return fc(On(Rn(t, U0), O4));
}
function t0(t) {
  return On(Rn($o(t), O4), U0);
}
function j4(t) {
  const e = Rn(z$, ex), r = q$ + On(Sd([e, t]), ex);
  return [j$, U$, r].join(F$);
}
function UB(t) {
  return On(t, U0);
}
function qB(t) {
  return Rn(t, U0);
}
function zB(t) {
  return Rn([t0(t.header), t0(t.payload)].join(e0), N4);
}
function WB(t) {
  return [
    t0(t.header),
    t0(t.payload),
    UB(t.signature)
  ].join(e0);
}
function v1(t) {
  const e = t.split(e0), r = nx(e[0]), n = nx(e[1]), i = qB(e[2]), s = Rn(e.slice(0, 2).join(e0), N4);
  return { header: r, payload: n, signature: i, data: s };
}
function ix(t = Pa.randomBytes(W$)) {
  return Bv.generateKeyPairFromSeed(t);
}
async function HB(t, e, r, n, i = mt.fromMiliseconds(Date.now())) {
  const s = { alg: $$, typ: B$ }, o = j4(n.publicKey), a = i + r, u = { iss: o, sub: t, aud: e, iat: i, exp: a }, l = zB({ header: s, payload: u }), d = Bv.sign(n.secretKey, l);
  return WB({ header: s, payload: u, signature: d });
}
var sx = function(t, e, r) {
  if (r || arguments.length === 2) for (var n = 0, i = e.length, s; n < i; n++)
    (s || !(n in e)) && (s || (s = Array.prototype.slice.call(e, 0, n)), s[n] = e[n]);
  return t.concat(s || Array.prototype.slice.call(e));
}, KB = (
  /** @class */
  /* @__PURE__ */ function() {
    function t(e, r, n) {
      this.name = e, this.version = r, this.os = n, this.type = "browser";
    }
    return t;
  }()
), VB = (
  /** @class */
  /* @__PURE__ */ function() {
    function t(e) {
      this.version = e, this.type = "node", this.name = "node", this.os = process.platform;
    }
    return t;
  }()
), GB = (
  /** @class */
  /* @__PURE__ */ function() {
    function t(e, r, n, i) {
      this.name = e, this.version = r, this.os = n, this.bot = i, this.type = "bot-device";
    }
    return t;
  }()
), YB = (
  /** @class */
  /* @__PURE__ */ function() {
    function t() {
      this.type = "bot", this.bot = !0, this.name = "bot", this.version = null, this.os = null;
    }
    return t;
  }()
), JB = (
  /** @class */
  /* @__PURE__ */ function() {
    function t() {
      this.type = "react-native", this.name = "react-native", this.version = null, this.os = null;
    }
    return t;
  }()
), XB = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/, ZB = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/, ox = 3, QB = [
  ["aol", /AOLShield\/([0-9\._]+)/],
  ["edge", /Edge\/([0-9\._]+)/],
  ["edge-ios", /EdgiOS\/([0-9\._]+)/],
  ["yandexbrowser", /YaBrowser\/([0-9\._]+)/],
  ["kakaotalk", /KAKAOTALK\s([0-9\.]+)/],
  ["samsung", /SamsungBrowser\/([0-9\.]+)/],
  ["silk", /\bSilk\/([0-9._-]+)\b/],
  ["miui", /MiuiBrowser\/([0-9\.]+)$/],
  ["beaker", /BeakerBrowser\/([0-9\.]+)/],
  ["edge-chromium", /EdgA?\/([0-9\.]+)/],
  [
    "chromium-webview",
    /(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/
  ],
  ["chrome", /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],
  ["phantomjs", /PhantomJS\/([0-9\.]+)(:?\s|$)/],
  ["crios", /CriOS\/([0-9\.]+)(:?\s|$)/],
  ["firefox", /Firefox\/([0-9\.]+)(?:\s|$)/],
  ["fxios", /FxiOS\/([0-9\.]+)/],
  ["opera-mini", /Opera Mini.*Version\/([0-9\.]+)/],
  ["opera", /Opera\/([0-9\.]+)(?:\s|$)/],
  ["opera", /OPR\/([0-9\.]+)(:?\s|$)/],
  ["pie", /^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],
  ["pie", /^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],
  ["netfront", /^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],
  ["ie", /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],
  ["ie", /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],
  ["ie", /MSIE\s(7\.0)/],
  ["bb10", /BB10;\sTouch.*Version\/([0-9\.]+)/],
  ["android", /Android\s([0-9\.]+)/],
  ["ios", /Version\/([0-9\._]+).*Mobile.*Safari.*/],
  ["safari", /Version\/([0-9\._]+).*Safari/],
  ["facebook", /FB[AS]V\/([0-9\.]+)/],
  ["instagram", /Instagram\s([0-9\.]+)/],
  ["ios-webview", /AppleWebKit\/([0-9\.]+).*Mobile/],
  ["ios-webview", /AppleWebKit\/([0-9\.]+).*Gecko\)$/],
  ["curl", /^curl\/([0-9\.]+)$/],
  ["searchbot", XB]
], ax = [
  ["iOS", /iP(hone|od|ad)/],
  ["Android OS", /Android/],
  ["BlackBerry OS", /BlackBerry|BB10/],
  ["Windows Mobile", /IEMobile/],
  ["Amazon OS", /Kindle/],
  ["Windows 3.11", /Win16/],
  ["Windows 95", /(Windows 95)|(Win95)|(Windows_95)/],
  ["Windows 98", /(Windows 98)|(Win98)/],
  ["Windows 2000", /(Windows NT 5.0)|(Windows 2000)/],
  ["Windows XP", /(Windows NT 5.1)|(Windows XP)/],
  ["Windows Server 2003", /(Windows NT 5.2)/],
  ["Windows Vista", /(Windows NT 6.0)/],
  ["Windows 7", /(Windows NT 6.1)/],
  ["Windows 8", /(Windows NT 6.2)/],
  ["Windows 8.1", /(Windows NT 6.3)/],
  ["Windows 10", /(Windows NT 10.0)/],
  ["Windows ME", /Windows ME/],
  ["Windows CE", /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],
  ["Open BSD", /OpenBSD/],
  ["Sun OS", /SunOS/],
  ["Chrome OS", /CrOS/],
  ["Linux", /(Linux)|(X11)/],
  ["Mac OS", /(Mac_PowerPC)|(Macintosh)/],
  ["QNX", /QNX/],
  ["BeOS", /BeOS/],
  ["OS/2", /OS\/2/]
];
function eF(t) {
  return typeof document > "u" && typeof navigator < "u" && navigator.product === "ReactNative" ? new JB() : typeof navigator < "u" ? rF(navigator.userAgent) : iF();
}
function tF(t) {
  return t !== "" && QB.reduce(function(e, r) {
    var n = r[0], i = r[1];
    if (e)
      return e;
    var s = i.exec(t);
    return !!s && [n, s];
  }, !1);
}
function rF(t) {
  var e = tF(t);
  if (!e)
    return null;
  var r = e[0], n = e[1];
  if (r === "searchbot")
    return new YB();
  var i = n[1] && n[1].split(".").join("_").split("_").slice(0, 3);
  i ? i.length < ox && (i = sx(sx([], i, !0), sF(ox - i.length), !0)) : i = [];
  var s = i.join("."), o = nF(t), a = ZB.exec(t);
  return a && a[1] ? new GB(r, s, o, a[1]) : new KB(r, s, o);
}
function nF(t) {
  for (var e = 0, r = ax.length; e < r; e++) {
    var n = ax[e], i = n[0], s = n[1], o = s.exec(t);
    if (o)
      return i;
  }
  return null;
}
function iF() {
  var t = typeof process < "u" && process.version;
  return t ? new VB(process.version.slice(1)) : null;
}
function sF(t) {
  for (var e = [], r = 0; r < t; r++)
    e.push("0");
  return e;
}
var Wr = {};
Object.defineProperty(Wr, "__esModule", { value: !0 });
Wr.getLocalStorage = Wr.getLocalStorageOrThrow = Wr.getCrypto = Wr.getCryptoOrThrow = U4 = Wr.getLocation = Wr.getLocationOrThrow = Fv = Wr.getNavigator = Wr.getNavigatorOrThrow = Kl = Wr.getDocument = Wr.getDocumentOrThrow = Wr.getFromWindowOrThrow = Wr.getFromWindow = void 0;
function yc(t) {
  let e;
  return typeof window < "u" && typeof window[t] < "u" && (e = window[t]), e;
}
Wr.getFromWindow = yc;
function Nu(t) {
  const e = yc(t);
  if (!e)
    throw new Error(`${t} is not defined in Window`);
  return e;
}
Wr.getFromWindowOrThrow = Nu;
function oF() {
  return Nu("document");
}
Wr.getDocumentOrThrow = oF;
function aF() {
  return yc("document");
}
var Kl = Wr.getDocument = aF;
function cF() {
  return Nu("navigator");
}
Wr.getNavigatorOrThrow = cF;
function uF() {
  return yc("navigator");
}
var Fv = Wr.getNavigator = uF;
function fF() {
  return Nu("location");
}
Wr.getLocationOrThrow = fF;
function lF() {
  return yc("location");
}
var U4 = Wr.getLocation = lF;
function hF() {
  return Nu("crypto");
}
Wr.getCryptoOrThrow = hF;
function dF() {
  return yc("crypto");
}
Wr.getCrypto = dF;
function pF() {
  return Nu("localStorage");
}
Wr.getLocalStorageOrThrow = pF;
function gF() {
  return yc("localStorage");
}
Wr.getLocalStorage = gF;
var jv = {};
Object.defineProperty(jv, "__esModule", { value: !0 });
var q4 = jv.getWindowMetadata = void 0;
const cx = Wr;
function mF() {
  let t, e;
  try {
    t = cx.getDocumentOrThrow(), e = cx.getLocationOrThrow();
  } catch {
    return null;
  }
  function r() {
    const p = t.getElementsByTagName("link"), w = [];
    for (let A = 0; A < p.length; A++) {
      const M = p[A], N = M.getAttribute("rel");
      if (N && N.toLowerCase().indexOf("icon") > -1) {
        const L = M.getAttribute("href");
        if (L)
          if (L.toLowerCase().indexOf("https:") === -1 && L.toLowerCase().indexOf("http:") === -1 && L.indexOf("//") !== 0) {
            let B = e.protocol + "//" + e.host;
            if (L.indexOf("/") === 0)
              B += L;
            else {
              const $ = e.pathname.split("/");
              $.pop();
              const H = $.join("/");
              B += H + "/" + L;
            }
            w.push(B);
          } else if (L.indexOf("//") === 0) {
            const B = e.protocol + L;
            w.push(B);
          } else
            w.push(L);
      }
    }
    return w;
  }
  function n(...p) {
    const w = t.getElementsByTagName("meta");
    for (let A = 0; A < w.length; A++) {
      const M = w[A], N = ["itemprop", "property", "name"].map((L) => M.getAttribute(L)).filter((L) => L ? p.includes(L) : !1);
      if (N.length && N) {
        const L = M.getAttribute("content");
        if (L)
          return L;
      }
    }
    return "";
  }
  function i() {
    let p = n("name", "og:site_name", "og:title", "twitter:title");
    return p || (p = t.title), p;
  }
  function s() {
    return n("description", "og:description", "twitter:description", "keywords");
  }
  const o = i(), a = s(), u = e.origin, l = r();
  return {
    description: a,
    url: u,
    icons: l,
    name: o
  };
}
q4 = jv.getWindowMetadata = mF;
var xl = {}, vF = (t) => encodeURIComponent(t).replace(/[!'()*]/g, (e) => `%${e.charCodeAt(0).toString(16).toUpperCase()}`), z4 = "%[a-f0-9]{2}", ux = new RegExp("(" + z4 + ")|([^%]+?)", "gi"), fx = new RegExp("(" + z4 + ")+", "gi");
function b1(t, e) {
  try {
    return [decodeURIComponent(t.join(""))];
  } catch {
  }
  if (t.length === 1)
    return t;
  e = e || 1;
  var r = t.slice(0, e), n = t.slice(e);
  return Array.prototype.concat.call([], b1(r), b1(n));
}
function bF(t) {
  try {
    return decodeURIComponent(t);
  } catch {
    for (var e = t.match(ux) || [], r = 1; r < e.length; r++)
      t = b1(e, r).join(""), e = t.match(ux) || [];
    return t;
  }
}
function yF(t) {
  for (var e = {
    "%FE%FF": "��",
    "%FF%FE": "��"
  }, r = fx.exec(t); r; ) {
    try {
      e[r[0]] = decodeURIComponent(r[0]);
    } catch {
      var n = bF(r[0]);
      n !== r[0] && (e[r[0]] = n);
    }
    r = fx.exec(t);
  }
  e["%C2"] = "�";
  for (var i = Object.keys(e), s = 0; s < i.length; s++) {
    var o = i[s];
    t = t.replace(new RegExp(o, "g"), e[o]);
  }
  return t;
}
var wF = function(t) {
  if (typeof t != "string")
    throw new TypeError("Expected `encodedURI` to be of type `string`, got `" + typeof t + "`");
  try {
    return t = t.replace(/\+/g, " "), decodeURIComponent(t);
  } catch {
    return yF(t);
  }
}, xF = (t, e) => {
  if (!(typeof t == "string" && typeof e == "string"))
    throw new TypeError("Expected the arguments to be of type `string`");
  if (e === "")
    return [t];
  const r = t.indexOf(e);
  return r === -1 ? [t] : [
    t.slice(0, r),
    t.slice(r + e.length)
  ];
}, _F = function(t, e) {
  for (var r = {}, n = Object.keys(t), i = Array.isArray(e), s = 0; s < n.length; s++) {
    var o = n[s], a = t[o];
    (i ? e.indexOf(o) !== -1 : e(o, a, t)) && (r[o] = a);
  }
  return r;
};
(function(t) {
  const e = vF, r = wF, n = xF, i = _F, s = ($) => $ == null, o = Symbol("encodeFragmentIdentifier");
  function a($) {
    switch ($.arrayFormat) {
      case "index":
        return (H) => (W, V) => {
          const te = W.length;
          return V === void 0 || $.skipNull && V === null || $.skipEmptyString && V === "" ? W : V === null ? [...W, [d(H, $), "[", te, "]"].join("")] : [
            ...W,
            [d(H, $), "[", d(te, $), "]=", d(V, $)].join("")
          ];
        };
      case "bracket":
        return (H) => (W, V) => V === void 0 || $.skipNull && V === null || $.skipEmptyString && V === "" ? W : V === null ? [...W, [d(H, $), "[]"].join("")] : [...W, [d(H, $), "[]=", d(V, $)].join("")];
      case "colon-list-separator":
        return (H) => (W, V) => V === void 0 || $.skipNull && V === null || $.skipEmptyString && V === "" ? W : V === null ? [...W, [d(H, $), ":list="].join("")] : [...W, [d(H, $), ":list=", d(V, $)].join("")];
      case "comma":
      case "separator":
      case "bracket-separator": {
        const H = $.arrayFormat === "bracket-separator" ? "[]=" : "=";
        return (W) => (V, te) => te === void 0 || $.skipNull && te === null || $.skipEmptyString && te === "" ? V : (te = te === null ? "" : te, V.length === 0 ? [[d(W, $), H, d(te, $)].join("")] : [[V, d(te, $)].join($.arrayFormatSeparator)]);
      }
      default:
        return (H) => (W, V) => V === void 0 || $.skipNull && V === null || $.skipEmptyString && V === "" ? W : V === null ? [...W, d(H, $)] : [...W, [d(H, $), "=", d(V, $)].join("")];
    }
  }
  function u($) {
    let H;
    switch ($.arrayFormat) {
      case "index":
        return (W, V, te) => {
          if (H = /\[(\d*)\]$/.exec(W), W = W.replace(/\[\d*\]$/, ""), !H) {
            te[W] = V;
            return;
          }
          te[W] === void 0 && (te[W] = {}), te[W][H[1]] = V;
        };
      case "bracket":
        return (W, V, te) => {
          if (H = /(\[\])$/.exec(W), W = W.replace(/\[\]$/, ""), !H) {
            te[W] = V;
            return;
          }
          if (te[W] === void 0) {
            te[W] = [V];
            return;
          }
          te[W] = [].concat(te[W], V);
        };
      case "colon-list-separator":
        return (W, V, te) => {
          if (H = /(:list)$/.exec(W), W = W.replace(/:list$/, ""), !H) {
            te[W] = V;
            return;
          }
          if (te[W] === void 0) {
            te[W] = [V];
            return;
          }
          te[W] = [].concat(te[W], V);
        };
      case "comma":
      case "separator":
        return (W, V, te) => {
          const R = typeof V == "string" && V.includes($.arrayFormatSeparator), K = typeof V == "string" && !R && p(V, $).includes($.arrayFormatSeparator);
          V = K ? p(V, $) : V;
          const ge = R || K ? V.split($.arrayFormatSeparator).map((Ee) => p(Ee, $)) : V === null ? V : p(V, $);
          te[W] = ge;
        };
      case "bracket-separator":
        return (W, V, te) => {
          const R = /(\[\])$/.test(W);
          if (W = W.replace(/\[\]$/, ""), !R) {
            te[W] = V && p(V, $);
            return;
          }
          const K = V === null ? [] : V.split($.arrayFormatSeparator).map((ge) => p(ge, $));
          if (te[W] === void 0) {
            te[W] = K;
            return;
          }
          te[W] = [].concat(te[W], K);
        };
      default:
        return (W, V, te) => {
          if (te[W] === void 0) {
            te[W] = V;
            return;
          }
          te[W] = [].concat(te[W], V);
        };
    }
  }
  function l($) {
    if (typeof $ != "string" || $.length !== 1)
      throw new TypeError("arrayFormatSeparator must be single character string");
  }
  function d($, H) {
    return H.encode ? H.strict ? e($) : encodeURIComponent($) : $;
  }
  function p($, H) {
    return H.decode ? r($) : $;
  }
  function w($) {
    return Array.isArray($) ? $.sort() : typeof $ == "object" ? w(Object.keys($)).sort((H, W) => Number(H) - Number(W)).map((H) => $[H]) : $;
  }
  function A($) {
    const H = $.indexOf("#");
    return H !== -1 && ($ = $.slice(0, H)), $;
  }
  function M($) {
    let H = "";
    const W = $.indexOf("#");
    return W !== -1 && (H = $.slice(W)), H;
  }
  function N($) {
    $ = A($);
    const H = $.indexOf("?");
    return H === -1 ? "" : $.slice(H + 1);
  }
  function L($, H) {
    return H.parseNumbers && !Number.isNaN(Number($)) && typeof $ == "string" && $.trim() !== "" ? $ = Number($) : H.parseBooleans && $ !== null && ($.toLowerCase() === "true" || $.toLowerCase() === "false") && ($ = $.toLowerCase() === "true"), $;
  }
  function B($, H) {
    H = Object.assign({
      decode: !0,
      sort: !0,
      arrayFormat: "none",
      arrayFormatSeparator: ",",
      parseNumbers: !1,
      parseBooleans: !1
    }, H), l(H.arrayFormatSeparator);
    const W = u(H), V = /* @__PURE__ */ Object.create(null);
    if (typeof $ != "string" || ($ = $.trim().replace(/^[?#&]/, ""), !$))
      return V;
    for (const te of $.split("&")) {
      if (te === "")
        continue;
      let [R, K] = n(H.decode ? te.replace(/\+/g, " ") : te, "=");
      K = K === void 0 ? null : ["comma", "separator", "bracket-separator"].includes(H.arrayFormat) ? K : p(K, H), W(p(R, H), K, V);
    }
    for (const te of Object.keys(V)) {
      const R = V[te];
      if (typeof R == "object" && R !== null)
        for (const K of Object.keys(R))
          R[K] = L(R[K], H);
      else
        V[te] = L(R, H);
    }
    return H.sort === !1 ? V : (H.sort === !0 ? Object.keys(V).sort() : Object.keys(V).sort(H.sort)).reduce((te, R) => {
      const K = V[R];
      return K && typeof K == "object" && !Array.isArray(K) ? te[R] = w(K) : te[R] = K, te;
    }, /* @__PURE__ */ Object.create(null));
  }
  t.extract = N, t.parse = B, t.stringify = ($, H) => {
    if (!$)
      return "";
    H = Object.assign({
      encode: !0,
      strict: !0,
      arrayFormat: "none",
      arrayFormatSeparator: ","
    }, H), l(H.arrayFormatSeparator);
    const W = (K) => H.skipNull && s($[K]) || H.skipEmptyString && $[K] === "", V = a(H), te = {};
    for (const K of Object.keys($))
      W(K) || (te[K] = $[K]);
    const R = Object.keys(te);
    return H.sort !== !1 && R.sort(H.sort), R.map((K) => {
      const ge = $[K];
      return ge === void 0 ? "" : ge === null ? d(K, H) : Array.isArray(ge) ? ge.length === 0 && H.arrayFormat === "bracket-separator" ? d(K, H) + "[]" : ge.reduce(V(K), []).join("&") : d(K, H) + "=" + d(ge, H);
    }).filter((K) => K.length > 0).join("&");
  }, t.parseUrl = ($, H) => {
    H = Object.assign({
      decode: !0
    }, H);
    const [W, V] = n($, "#");
    return Object.assign(
      {
        url: W.split("?")[0] || "",
        query: B(N($), H)
      },
      H && H.parseFragmentIdentifier && V ? { fragmentIdentifier: p(V, H) } : {}
    );
  }, t.stringifyUrl = ($, H) => {
    H = Object.assign({
      encode: !0,
      strict: !0,
      [o]: !0
    }, H);
    const W = A($.url).split("?")[0] || "", V = t.extract($.url), te = t.parse(V, { sort: !1 }), R = Object.assign(te, $.query);
    let K = t.stringify(R, H);
    K && (K = `?${K}`);
    let ge = M($.url);
    return $.fragmentIdentifier && (ge = `#${H[o] ? d($.fragmentIdentifier, H) : $.fragmentIdentifier}`), `${W}${K}${ge}`;
  }, t.pick = ($, H, W) => {
    W = Object.assign({
      parseFragmentIdentifier: !0,
      [o]: !1
    }, W);
    const { url: V, query: te, fragmentIdentifier: R } = t.parseUrl($, W);
    return t.stringifyUrl({
      url: V,
      query: i(te, H),
      fragmentIdentifier: R
    }, W);
  }, t.exclude = ($, H, W) => {
    const V = Array.isArray(H) ? (te) => !H.includes(te) : (te, R) => !H(te, R);
    return t.pick($, V, W);
  };
})(xl);
var W4 = { exports: {} };
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
(function(t) {
  (function() {
    var e = "input is invalid type", r = "finalize already called", n = typeof window == "object", i = n ? window : {};
    i.JS_SHA3_NO_WINDOW && (n = !1);
    var s = !n && typeof self == "object", o = !i.JS_SHA3_NO_NODE_JS && typeof process == "object" && process.versions && process.versions.node;
    o ? i = gn : s && (i = self);
    var a = !i.JS_SHA3_NO_COMMON_JS && !0 && t.exports, u = !i.JS_SHA3_NO_ARRAY_BUFFER && typeof ArrayBuffer < "u", l = "0123456789abcdef".split(""), d = [31, 7936, 2031616, 520093696], p = [4, 1024, 262144, 67108864], w = [1, 256, 65536, 16777216], A = [6, 1536, 393216, 100663296], M = [0, 8, 16, 24], N = [
      1,
      0,
      32898,
      0,
      32906,
      2147483648,
      2147516416,
      2147483648,
      32907,
      0,
      2147483649,
      0,
      2147516545,
      2147483648,
      32777,
      2147483648,
      138,
      0,
      136,
      0,
      2147516425,
      0,
      2147483658,
      0,
      2147516555,
      0,
      139,
      2147483648,
      32905,
      2147483648,
      32771,
      2147483648,
      32770,
      2147483648,
      128,
      2147483648,
      32778,
      0,
      2147483658,
      2147483648,
      2147516545,
      2147483648,
      32896,
      2147483648,
      2147483649,
      0,
      2147516424,
      2147483648
    ], L = [224, 256, 384, 512], B = [128, 256], $ = ["hex", "buffer", "arrayBuffer", "array", "digest"], H = {
      128: 168,
      256: 136
    };
    (i.JS_SHA3_NO_NODE_JS || !Array.isArray) && (Array.isArray = function(D) {
      return Object.prototype.toString.call(D) === "[object Array]";
    }), u && (i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView) && (ArrayBuffer.isView = function(D) {
      return typeof D == "object" && D.buffer && D.buffer.constructor === ArrayBuffer;
    });
    for (var W = function(D, oe, Z) {
      return function(J) {
        return new I(D, oe, D).update(J)[Z]();
      };
    }, V = function(D, oe, Z) {
      return function(J, Q) {
        return new I(D, oe, Q).update(J)[Z]();
      };
    }, te = function(D, oe, Z) {
      return function(J, Q, T, X) {
        return f["cshake" + D].update(J, Q, T, X)[Z]();
      };
    }, R = function(D, oe, Z) {
      return function(J, Q, T, X) {
        return f["kmac" + D].update(J, Q, T, X)[Z]();
      };
    }, K = function(D, oe, Z, J) {
      for (var Q = 0; Q < $.length; ++Q) {
        var T = $[Q];
        D[T] = oe(Z, J, T);
      }
      return D;
    }, ge = function(D, oe) {
      var Z = W(D, oe, "hex");
      return Z.create = function() {
        return new I(D, oe, D);
      }, Z.update = function(J) {
        return Z.create().update(J);
      }, K(Z, W, D, oe);
    }, Ee = function(D, oe) {
      var Z = V(D, oe, "hex");
      return Z.create = function(J) {
        return new I(D, oe, J);
      }, Z.update = function(J, Q) {
        return Z.create(Q).update(J);
      }, K(Z, V, D, oe);
    }, Y = function(D, oe) {
      var Z = H[D], J = te(D, oe, "hex");
      return J.create = function(Q, T, X) {
        return !T && !X ? f["shake" + D].create(Q) : new I(D, oe, Q).bytepad([T, X], Z);
      }, J.update = function(Q, T, X, re) {
        return J.create(T, X, re).update(Q);
      }, K(J, te, D, oe);
    }, S = function(D, oe) {
      var Z = H[D], J = R(D, oe, "hex");
      return J.create = function(Q, T, X) {
        return new F(D, oe, T).bytepad(["KMAC", X], Z).bytepad([Q], Z);
      }, J.update = function(Q, T, X, re) {
        return J.create(Q, X, re).update(T);
      }, K(J, R, D, oe);
    }, m = [
      { name: "keccak", padding: w, bits: L, createMethod: ge },
      { name: "sha3", padding: A, bits: L, createMethod: ge },
      { name: "shake", padding: d, bits: B, createMethod: Ee },
      { name: "cshake", padding: p, bits: B, createMethod: Y },
      { name: "kmac", padding: p, bits: B, createMethod: S }
    ], f = {}, g = [], b = 0; b < m.length; ++b)
      for (var x = m[b], _ = x.bits, E = 0; E < _.length; ++E) {
        var v = x.name + "_" + _[E];
        if (g.push(v), f[v] = x.createMethod(_[E], x.padding), x.name !== "sha3") {
          var P = x.name + _[E];
          g.push(P), f[P] = f[v];
        }
      }
    function I(D, oe, Z) {
      this.blocks = [], this.s = [], this.padding = oe, this.outputBits = Z, this.reset = !0, this.finalized = !1, this.block = 0, this.start = 0, this.blockCount = 1600 - (D << 1) >> 5, this.byteCount = this.blockCount << 2, this.outputBlocks = Z >> 5, this.extraBytes = (Z & 31) >> 3;
      for (var J = 0; J < 50; ++J)
        this.s[J] = 0;
    }
    I.prototype.update = function(D) {
      if (this.finalized)
        throw new Error(r);
      var oe, Z = typeof D;
      if (Z !== "string") {
        if (Z === "object") {
          if (D === null)
            throw new Error(e);
          if (u && D.constructor === ArrayBuffer)
            D = new Uint8Array(D);
          else if (!Array.isArray(D) && (!u || !ArrayBuffer.isView(D)))
            throw new Error(e);
        } else
          throw new Error(e);
        oe = !0;
      }
      for (var J = this.blocks, Q = this.byteCount, T = D.length, X = this.blockCount, re = 0, de = this.s, ie, ue; re < T; ) {
        if (this.reset)
          for (this.reset = !1, J[0] = this.block, ie = 1; ie < X + 1; ++ie)
            J[ie] = 0;
        if (oe)
          for (ie = this.start; re < T && ie < Q; ++re)
            J[ie >> 2] |= D[re] << M[ie++ & 3];
        else
          for (ie = this.start; re < T && ie < Q; ++re)
            ue = D.charCodeAt(re), ue < 128 ? J[ie >> 2] |= ue << M[ie++ & 3] : ue < 2048 ? (J[ie >> 2] |= (192 | ue >> 6) << M[ie++ & 3], J[ie >> 2] |= (128 | ue & 63) << M[ie++ & 3]) : ue < 55296 || ue >= 57344 ? (J[ie >> 2] |= (224 | ue >> 12) << M[ie++ & 3], J[ie >> 2] |= (128 | ue >> 6 & 63) << M[ie++ & 3], J[ie >> 2] |= (128 | ue & 63) << M[ie++ & 3]) : (ue = 65536 + ((ue & 1023) << 10 | D.charCodeAt(++re) & 1023), J[ie >> 2] |= (240 | ue >> 18) << M[ie++ & 3], J[ie >> 2] |= (128 | ue >> 12 & 63) << M[ie++ & 3], J[ie >> 2] |= (128 | ue >> 6 & 63) << M[ie++ & 3], J[ie >> 2] |= (128 | ue & 63) << M[ie++ & 3]);
        if (this.lastByteIndex = ie, ie >= Q) {
          for (this.start = ie - Q, this.block = J[X], ie = 0; ie < X; ++ie)
            de[ie] ^= J[ie];
          ce(de), this.reset = !0;
        } else
          this.start = ie;
      }
      return this;
    }, I.prototype.encode = function(D, oe) {
      var Z = D & 255, J = 1, Q = [Z];
      for (D = D >> 8, Z = D & 255; Z > 0; )
        Q.unshift(Z), D = D >> 8, Z = D & 255, ++J;
      return oe ? Q.push(J) : Q.unshift(J), this.update(Q), Q.length;
    }, I.prototype.encodeString = function(D) {
      var oe, Z = typeof D;
      if (Z !== "string") {
        if (Z === "object") {
          if (D === null)
            throw new Error(e);
          if (u && D.constructor === ArrayBuffer)
            D = new Uint8Array(D);
          else if (!Array.isArray(D) && (!u || !ArrayBuffer.isView(D)))
            throw new Error(e);
        } else
          throw new Error(e);
        oe = !0;
      }
      var J = 0, Q = D.length;
      if (oe)
        J = Q;
      else
        for (var T = 0; T < D.length; ++T) {
          var X = D.charCodeAt(T);
          X < 128 ? J += 1 : X < 2048 ? J += 2 : X < 55296 || X >= 57344 ? J += 3 : (X = 65536 + ((X & 1023) << 10 | D.charCodeAt(++T) & 1023), J += 4);
        }
      return J += this.encode(J * 8), this.update(D), J;
    }, I.prototype.bytepad = function(D, oe) {
      for (var Z = this.encode(oe), J = 0; J < D.length; ++J)
        Z += this.encodeString(D[J]);
      var Q = oe - Z % oe, T = [];
      return T.length = Q, this.update(T), this;
    }, I.prototype.finalize = function() {
      if (!this.finalized) {
        this.finalized = !0;
        var D = this.blocks, oe = this.lastByteIndex, Z = this.blockCount, J = this.s;
        if (D[oe >> 2] |= this.padding[oe & 3], this.lastByteIndex === this.byteCount)
          for (D[0] = D[Z], oe = 1; oe < Z + 1; ++oe)
            D[oe] = 0;
        for (D[Z - 1] |= 2147483648, oe = 0; oe < Z; ++oe)
          J[oe] ^= D[oe];
        ce(J);
      }
    }, I.prototype.toString = I.prototype.hex = function() {
      this.finalize();
      for (var D = this.blockCount, oe = this.s, Z = this.outputBlocks, J = this.extraBytes, Q = 0, T = 0, X = "", re; T < Z; ) {
        for (Q = 0; Q < D && T < Z; ++Q, ++T)
          re = oe[Q], X += l[re >> 4 & 15] + l[re & 15] + l[re >> 12 & 15] + l[re >> 8 & 15] + l[re >> 20 & 15] + l[re >> 16 & 15] + l[re >> 28 & 15] + l[re >> 24 & 15];
        T % D === 0 && (ce(oe), Q = 0);
      }
      return J && (re = oe[Q], X += l[re >> 4 & 15] + l[re & 15], J > 1 && (X += l[re >> 12 & 15] + l[re >> 8 & 15]), J > 2 && (X += l[re >> 20 & 15] + l[re >> 16 & 15])), X;
    }, I.prototype.arrayBuffer = function() {
      this.finalize();
      var D = this.blockCount, oe = this.s, Z = this.outputBlocks, J = this.extraBytes, Q = 0, T = 0, X = this.outputBits >> 3, re;
      J ? re = new ArrayBuffer(Z + 1 << 2) : re = new ArrayBuffer(X);
      for (var de = new Uint32Array(re); T < Z; ) {
        for (Q = 0; Q < D && T < Z; ++Q, ++T)
          de[T] = oe[Q];
        T % D === 0 && ce(oe);
      }
      return J && (de[Q] = oe[Q], re = re.slice(0, X)), re;
    }, I.prototype.buffer = I.prototype.arrayBuffer, I.prototype.digest = I.prototype.array = function() {
      this.finalize();
      for (var D = this.blockCount, oe = this.s, Z = this.outputBlocks, J = this.extraBytes, Q = 0, T = 0, X = [], re, de; T < Z; ) {
        for (Q = 0; Q < D && T < Z; ++Q, ++T)
          re = T << 2, de = oe[Q], X[re] = de & 255, X[re + 1] = de >> 8 & 255, X[re + 2] = de >> 16 & 255, X[re + 3] = de >> 24 & 255;
        T % D === 0 && ce(oe);
      }
      return J && (re = T << 2, de = oe[Q], X[re] = de & 255, J > 1 && (X[re + 1] = de >> 8 & 255), J > 2 && (X[re + 2] = de >> 16 & 255)), X;
    };
    function F(D, oe, Z) {
      I.call(this, D, oe, Z);
    }
    F.prototype = new I(), F.prototype.finalize = function() {
      return this.encode(this.outputBits, !0), I.prototype.finalize.call(this);
    };
    var ce = function(D) {
      var oe, Z, J, Q, T, X, re, de, ie, ue, ve, Pe, De, Ce, $e, Me, Ne, Ke, Le, qe, ze, _e, Ze, at, ke, Qe, tt, Ye, dt, lt, ct, qt, Yt, Et, er, Jt, Dt, kt, Ct, gt, Rt, Nt, vt, $t, Ft, rt, Bt, k, U, z, C, G, j, se, he, xe, Te, Re, nt, je, pt, it, et;
      for (J = 0; J < 48; J += 2)
        Q = D[0] ^ D[10] ^ D[20] ^ D[30] ^ D[40], T = D[1] ^ D[11] ^ D[21] ^ D[31] ^ D[41], X = D[2] ^ D[12] ^ D[22] ^ D[32] ^ D[42], re = D[3] ^ D[13] ^ D[23] ^ D[33] ^ D[43], de = D[4] ^ D[14] ^ D[24] ^ D[34] ^ D[44], ie = D[5] ^ D[15] ^ D[25] ^ D[35] ^ D[45], ue = D[6] ^ D[16] ^ D[26] ^ D[36] ^ D[46], ve = D[7] ^ D[17] ^ D[27] ^ D[37] ^ D[47], Pe = D[8] ^ D[18] ^ D[28] ^ D[38] ^ D[48], De = D[9] ^ D[19] ^ D[29] ^ D[39] ^ D[49], oe = Pe ^ (X << 1 | re >>> 31), Z = De ^ (re << 1 | X >>> 31), D[0] ^= oe, D[1] ^= Z, D[10] ^= oe, D[11] ^= Z, D[20] ^= oe, D[21] ^= Z, D[30] ^= oe, D[31] ^= Z, D[40] ^= oe, D[41] ^= Z, oe = Q ^ (de << 1 | ie >>> 31), Z = T ^ (ie << 1 | de >>> 31), D[2] ^= oe, D[3] ^= Z, D[12] ^= oe, D[13] ^= Z, D[22] ^= oe, D[23] ^= Z, D[32] ^= oe, D[33] ^= Z, D[42] ^= oe, D[43] ^= Z, oe = X ^ (ue << 1 | ve >>> 31), Z = re ^ (ve << 1 | ue >>> 31), D[4] ^= oe, D[5] ^= Z, D[14] ^= oe, D[15] ^= Z, D[24] ^= oe, D[25] ^= Z, D[34] ^= oe, D[35] ^= Z, D[44] ^= oe, D[45] ^= Z, oe = de ^ (Pe << 1 | De >>> 31), Z = ie ^ (De << 1 | Pe >>> 31), D[6] ^= oe, D[7] ^= Z, D[16] ^= oe, D[17] ^= Z, D[26] ^= oe, D[27] ^= Z, D[36] ^= oe, D[37] ^= Z, D[46] ^= oe, D[47] ^= Z, oe = ue ^ (Q << 1 | T >>> 31), Z = ve ^ (T << 1 | Q >>> 31), D[8] ^= oe, D[9] ^= Z, D[18] ^= oe, D[19] ^= Z, D[28] ^= oe, D[29] ^= Z, D[38] ^= oe, D[39] ^= Z, D[48] ^= oe, D[49] ^= Z, Ce = D[0], $e = D[1], rt = D[11] << 4 | D[10] >>> 28, Bt = D[10] << 4 | D[11] >>> 28, Ye = D[20] << 3 | D[21] >>> 29, dt = D[21] << 3 | D[20] >>> 29, je = D[31] << 9 | D[30] >>> 23, pt = D[30] << 9 | D[31] >>> 23, Nt = D[40] << 18 | D[41] >>> 14, vt = D[41] << 18 | D[40] >>> 14, Et = D[2] << 1 | D[3] >>> 31, er = D[3] << 1 | D[2] >>> 31, Me = D[13] << 12 | D[12] >>> 20, Ne = D[12] << 12 | D[13] >>> 20, k = D[22] << 10 | D[23] >>> 22, U = D[23] << 10 | D[22] >>> 22, lt = D[33] << 13 | D[32] >>> 19, ct = D[32] << 13 | D[33] >>> 19, it = D[42] << 2 | D[43] >>> 30, et = D[43] << 2 | D[42] >>> 30, se = D[5] << 30 | D[4] >>> 2, he = D[4] << 30 | D[5] >>> 2, Jt = D[14] << 6 | D[15] >>> 26, Dt = D[15] << 6 | D[14] >>> 26, Ke = D[25] << 11 | D[24] >>> 21, Le = D[24] << 11 | D[25] >>> 21, z = D[34] << 15 | D[35] >>> 17, C = D[35] << 15 | D[34] >>> 17, qt = D[45] << 29 | D[44] >>> 3, Yt = D[44] << 29 | D[45] >>> 3, at = D[6] << 28 | D[7] >>> 4, ke = D[7] << 28 | D[6] >>> 4, xe = D[17] << 23 | D[16] >>> 9, Te = D[16] << 23 | D[17] >>> 9, kt = D[26] << 25 | D[27] >>> 7, Ct = D[27] << 25 | D[26] >>> 7, qe = D[36] << 21 | D[37] >>> 11, ze = D[37] << 21 | D[36] >>> 11, G = D[47] << 24 | D[46] >>> 8, j = D[46] << 24 | D[47] >>> 8, $t = D[8] << 27 | D[9] >>> 5, Ft = D[9] << 27 | D[8] >>> 5, Qe = D[18] << 20 | D[19] >>> 12, tt = D[19] << 20 | D[18] >>> 12, Re = D[29] << 7 | D[28] >>> 25, nt = D[28] << 7 | D[29] >>> 25, gt = D[38] << 8 | D[39] >>> 24, Rt = D[39] << 8 | D[38] >>> 24, _e = D[48] << 14 | D[49] >>> 18, Ze = D[49] << 14 | D[48] >>> 18, D[0] = Ce ^ ~Me & Ke, D[1] = $e ^ ~Ne & Le, D[10] = at ^ ~Qe & Ye, D[11] = ke ^ ~tt & dt, D[20] = Et ^ ~Jt & kt, D[21] = er ^ ~Dt & Ct, D[30] = $t ^ ~rt & k, D[31] = Ft ^ ~Bt & U, D[40] = se ^ ~xe & Re, D[41] = he ^ ~Te & nt, D[2] = Me ^ ~Ke & qe, D[3] = Ne ^ ~Le & ze, D[12] = Qe ^ ~Ye & lt, D[13] = tt ^ ~dt & ct, D[22] = Jt ^ ~kt & gt, D[23] = Dt ^ ~Ct & Rt, D[32] = rt ^ ~k & z, D[33] = Bt ^ ~U & C, D[42] = xe ^ ~Re & je, D[43] = Te ^ ~nt & pt, D[4] = Ke ^ ~qe & _e, D[5] = Le ^ ~ze & Ze, D[14] = Ye ^ ~lt & qt, D[15] = dt ^ ~ct & Yt, D[24] = kt ^ ~gt & Nt, D[25] = Ct ^ ~Rt & vt, D[34] = k ^ ~z & G, D[35] = U ^ ~C & j, D[44] = Re ^ ~je & it, D[45] = nt ^ ~pt & et, D[6] = qe ^ ~_e & Ce, D[7] = ze ^ ~Ze & $e, D[16] = lt ^ ~qt & at, D[17] = ct ^ ~Yt & ke, D[26] = gt ^ ~Nt & Et, D[27] = Rt ^ ~vt & er, D[36] = z ^ ~G & $t, D[37] = C ^ ~j & Ft, D[46] = je ^ ~it & se, D[47] = pt ^ ~et & he, D[8] = _e ^ ~Ce & Me, D[9] = Ze ^ ~$e & Ne, D[18] = qt ^ ~at & Qe, D[19] = Yt ^ ~ke & tt, D[28] = Nt ^ ~Et & Jt, D[29] = vt ^ ~er & Dt, D[38] = G ^ ~$t & rt, D[39] = j ^ ~Ft & Bt, D[48] = it ^ ~se & xe, D[49] = et ^ ~he & Te, D[0] ^= N[J], D[1] ^= N[J + 1];
    };
    if (a)
      t.exports = f;
    else
      for (b = 0; b < g.length; ++b)
        i[g[b]] = f[g[b]];
  })();
})(W4);
var EF = W4.exports;
const SF = /* @__PURE__ */ ts(EF), AF = "logger/5.7.0";
let lx = !1, hx = !1;
const Ad = { debug: 1, default: 2, info: 2, warning: 3, error: 4, off: 5 };
let dx = Ad.default, Zg = null;
function PF() {
  try {
    const t = [];
    if (["NFD", "NFC", "NFKD", "NFKC"].forEach((e) => {
      try {
        if ("test".normalize(e) !== "test")
          throw new Error("bad normalize");
      } catch {
        t.push(e);
      }
    }), t.length)
      throw new Error("missing " + t.join(", "));
    if ("é".normalize("NFD") !== "é")
      throw new Error("broken implementation");
  } catch (t) {
    return t.message;
  }
  return null;
}
const px = PF();
var y1;
(function(t) {
  t.DEBUG = "DEBUG", t.INFO = "INFO", t.WARNING = "WARNING", t.ERROR = "ERROR", t.OFF = "OFF";
})(y1 || (y1 = {}));
var ws;
(function(t) {
  t.UNKNOWN_ERROR = "UNKNOWN_ERROR", t.NOT_IMPLEMENTED = "NOT_IMPLEMENTED", t.UNSUPPORTED_OPERATION = "UNSUPPORTED_OPERATION", t.NETWORK_ERROR = "NETWORK_ERROR", t.SERVER_ERROR = "SERVER_ERROR", t.TIMEOUT = "TIMEOUT", t.BUFFER_OVERRUN = "BUFFER_OVERRUN", t.NUMERIC_FAULT = "NUMERIC_FAULT", t.MISSING_NEW = "MISSING_NEW", t.INVALID_ARGUMENT = "INVALID_ARGUMENT", t.MISSING_ARGUMENT = "MISSING_ARGUMENT", t.UNEXPECTED_ARGUMENT = "UNEXPECTED_ARGUMENT", t.CALL_EXCEPTION = "CALL_EXCEPTION", t.INSUFFICIENT_FUNDS = "INSUFFICIENT_FUNDS", t.NONCE_EXPIRED = "NONCE_EXPIRED", t.REPLACEMENT_UNDERPRICED = "REPLACEMENT_UNDERPRICED", t.UNPREDICTABLE_GAS_LIMIT = "UNPREDICTABLE_GAS_LIMIT", t.TRANSACTION_REPLACED = "TRANSACTION_REPLACED", t.ACTION_REJECTED = "ACTION_REJECTED";
})(ws || (ws = {}));
const gx = "0123456789abcdef";
class Yr {
  constructor(e) {
    Object.defineProperty(this, "version", {
      enumerable: !0,
      value: e,
      writable: !1
    });
  }
  _log(e, r) {
    const n = e.toLowerCase();
    Ad[n] == null && this.throwArgumentError("invalid log level name", "logLevel", e), !(dx > Ad[n]) && console.log.apply(console, r);
  }
  debug(...e) {
    this._log(Yr.levels.DEBUG, e);
  }
  info(...e) {
    this._log(Yr.levels.INFO, e);
  }
  warn(...e) {
    this._log(Yr.levels.WARNING, e);
  }
  makeError(e, r, n) {
    if (hx)
      return this.makeError("censored error", r, {});
    r || (r = Yr.errors.UNKNOWN_ERROR), n || (n = {});
    const i = [];
    Object.keys(n).forEach((u) => {
      const l = n[u];
      try {
        if (l instanceof Uint8Array) {
          let d = "";
          for (let p = 0; p < l.length; p++)
            d += gx[l[p] >> 4], d += gx[l[p] & 15];
          i.push(u + "=Uint8Array(0x" + d + ")");
        } else
          i.push(u + "=" + JSON.stringify(l));
      } catch {
        i.push(u + "=" + JSON.stringify(n[u].toString()));
      }
    }), i.push(`code=${r}`), i.push(`version=${this.version}`);
    const s = e;
    let o = "";
    switch (r) {
      case ws.NUMERIC_FAULT: {
        o = "NUMERIC_FAULT";
        const u = e;
        switch (u) {
          case "overflow":
          case "underflow":
          case "division-by-zero":
            o += "-" + u;
            break;
          case "negative-power":
          case "negative-width":
            o += "-unsupported";
            break;
          case "unbound-bitwise-result":
            o += "-unbound-result";
            break;
        }
        break;
      }
      case ws.CALL_EXCEPTION:
      case ws.INSUFFICIENT_FUNDS:
      case ws.MISSING_NEW:
      case ws.NONCE_EXPIRED:
      case ws.REPLACEMENT_UNDERPRICED:
      case ws.TRANSACTION_REPLACED:
      case ws.UNPREDICTABLE_GAS_LIMIT:
        o = r;
        break;
    }
    o && (e += " [ See: https://links.ethers.org/v5-errors-" + o + " ]"), i.length && (e += " (" + i.join(", ") + ")");
    const a = new Error(e);
    return a.reason = s, a.code = r, Object.keys(n).forEach(function(u) {
      a[u] = n[u];
    }), a;
  }
  throwError(e, r, n) {
    throw this.makeError(e, r, n);
  }
  throwArgumentError(e, r, n) {
    return this.throwError(e, Yr.errors.INVALID_ARGUMENT, {
      argument: r,
      value: n
    });
  }
  assert(e, r, n, i) {
    e || this.throwError(r, n, i);
  }
  assertArgument(e, r, n, i) {
    e || this.throwArgumentError(r, n, i);
  }
  checkNormalize(e) {
    px && this.throwError("platform missing String.prototype.normalize", Yr.errors.UNSUPPORTED_OPERATION, {
      operation: "String.prototype.normalize",
      form: px
    });
  }
  checkSafeUint53(e, r) {
    typeof e == "number" && (r == null && (r = "value not safe"), (e < 0 || e >= 9007199254740991) && this.throwError(r, Yr.errors.NUMERIC_FAULT, {
      operation: "checkSafeInteger",
      fault: "out-of-safe-range",
      value: e
    }), e % 1 && this.throwError(r, Yr.errors.NUMERIC_FAULT, {
      operation: "checkSafeInteger",
      fault: "non-integer",
      value: e
    }));
  }
  checkArgumentCount(e, r, n) {
    n ? n = ": " + n : n = "", e < r && this.throwError("missing argument" + n, Yr.errors.MISSING_ARGUMENT, {
      count: e,
      expectedCount: r
    }), e > r && this.throwError("too many arguments" + n, Yr.errors.UNEXPECTED_ARGUMENT, {
      count: e,
      expectedCount: r
    });
  }
  checkNew(e, r) {
    (e === Object || e == null) && this.throwError("missing new", Yr.errors.MISSING_NEW, { name: r.name });
  }
  checkAbstract(e, r) {
    e === r ? this.throwError("cannot instantiate abstract class " + JSON.stringify(r.name) + " directly; use a sub-class", Yr.errors.UNSUPPORTED_OPERATION, { name: e.name, operation: "new" }) : (e === Object || e == null) && this.throwError("missing new", Yr.errors.MISSING_NEW, { name: r.name });
  }
  static globalLogger() {
    return Zg || (Zg = new Yr(AF)), Zg;
  }
  static setCensorship(e, r) {
    if (!e && r && this.globalLogger().throwError("cannot permanently disable censorship", Yr.errors.UNSUPPORTED_OPERATION, {
      operation: "setCensorship"
    }), lx) {
      if (!e)
        return;
      this.globalLogger().throwError("error censorship permanent", Yr.errors.UNSUPPORTED_OPERATION, {
        operation: "setCensorship"
      });
    }
    hx = !!e, lx = !!r;
  }
  static setLogLevel(e) {
    const r = Ad[e.toLowerCase()];
    if (r == null) {
      Yr.globalLogger().warn("invalid log level - " + e);
      return;
    }
    dx = r;
  }
  static from(e) {
    return new Yr(e);
  }
}
Yr.errors = ws;
Yr.levels = y1;
const MF = "bytes/5.7.0", hn = new Yr(MF);
function H4(t) {
  return !!t.toHexString;
}
function fu(t) {
  return t.slice || (t.slice = function() {
    const e = Array.prototype.slice.call(arguments);
    return fu(new Uint8Array(Array.prototype.slice.apply(t, e)));
  }), t;
}
function IF(t) {
  return zs(t) && !(t.length % 2) || Uv(t);
}
function mx(t) {
  return typeof t == "number" && t == t && t % 1 === 0;
}
function Uv(t) {
  if (t == null)
    return !1;
  if (t.constructor === Uint8Array)
    return !0;
  if (typeof t == "string" || !mx(t.length) || t.length < 0)
    return !1;
  for (let e = 0; e < t.length; e++) {
    const r = t[e];
    if (!mx(r) || r < 0 || r >= 256)
      return !1;
  }
  return !0;
}
function wn(t, e) {
  if (e || (e = {}), typeof t == "number") {
    hn.checkSafeUint53(t, "invalid arrayify value");
    const r = [];
    for (; t; )
      r.unshift(t & 255), t = parseInt(String(t / 256));
    return r.length === 0 && r.push(0), fu(new Uint8Array(r));
  }
  if (e.allowMissingPrefix && typeof t == "string" && t.substring(0, 2) !== "0x" && (t = "0x" + t), H4(t) && (t = t.toHexString()), zs(t)) {
    let r = t.substring(2);
    r.length % 2 && (e.hexPad === "left" ? r = "0" + r : e.hexPad === "right" ? r += "0" : hn.throwArgumentError("hex data is odd-length", "value", t));
    const n = [];
    for (let i = 0; i < r.length; i += 2)
      n.push(parseInt(r.substring(i, i + 2), 16));
    return fu(new Uint8Array(n));
  }
  return Uv(t) ? fu(new Uint8Array(t)) : hn.throwArgumentError("invalid arrayify value", "value", t);
}
function CF(t) {
  const e = t.map((i) => wn(i)), r = e.reduce((i, s) => i + s.length, 0), n = new Uint8Array(r);
  return e.reduce((i, s) => (n.set(s, i), i + s.length), 0), fu(n);
}
function TF(t, e) {
  t = wn(t), t.length > e && hn.throwArgumentError("value out of range", "value", arguments[0]);
  const r = new Uint8Array(e);
  return r.set(t, e - t.length), fu(r);
}
function zs(t, e) {
  return !(typeof t != "string" || !t.match(/^0x[0-9A-Fa-f]*$/) || e && t.length !== 2 + 2 * e);
}
const Qg = "0123456789abcdef";
function Ri(t, e) {
  if (e || (e = {}), typeof t == "number") {
    hn.checkSafeUint53(t, "invalid hexlify value");
    let r = "";
    for (; t; )
      r = Qg[t & 15] + r, t = Math.floor(t / 16);
    return r.length ? (r.length % 2 && (r = "0" + r), "0x" + r) : "0x00";
  }
  if (typeof t == "bigint")
    return t = t.toString(16), t.length % 2 ? "0x0" + t : "0x" + t;
  if (e.allowMissingPrefix && typeof t == "string" && t.substring(0, 2) !== "0x" && (t = "0x" + t), H4(t))
    return t.toHexString();
  if (zs(t))
    return t.length % 2 && (e.hexPad === "left" ? t = "0x0" + t.substring(2) : e.hexPad === "right" ? t += "0" : hn.throwArgumentError("hex data is odd-length", "value", t)), t.toLowerCase();
  if (Uv(t)) {
    let r = "0x";
    for (let n = 0; n < t.length; n++) {
      let i = t[n];
      r += Qg[(i & 240) >> 4] + Qg[i & 15];
    }
    return r;
  }
  return hn.throwArgumentError("invalid hexlify value", "value", t);
}
function RF(t) {
  if (typeof t != "string")
    t = Ri(t);
  else if (!zs(t) || t.length % 2)
    return null;
  return (t.length - 2) / 2;
}
function vx(t, e, r) {
  return typeof t != "string" ? t = Ri(t) : (!zs(t) || t.length % 2) && hn.throwArgumentError("invalid hexData", "value", t), e = 2 + 2 * e, "0x" + t.substring(e);
}
function lu(t, e) {
  for (typeof t != "string" ? t = Ri(t) : zs(t) || hn.throwArgumentError("invalid hex string", "value", t), t.length > 2 * e + 2 && hn.throwArgumentError("value out of range", "value", arguments[1]); t.length < 2 * e + 2; )
    t = "0x0" + t.substring(2);
  return t;
}
function K4(t) {
  const e = {
    r: "0x",
    s: "0x",
    _vs: "0x",
    recoveryParam: 0,
    v: 0,
    yParityAndS: "0x",
    compact: "0x"
  };
  if (IF(t)) {
    let r = wn(t);
    r.length === 64 ? (e.v = 27 + (r[32] >> 7), r[32] &= 127, e.r = Ri(r.slice(0, 32)), e.s = Ri(r.slice(32, 64))) : r.length === 65 ? (e.r = Ri(r.slice(0, 32)), e.s = Ri(r.slice(32, 64)), e.v = r[64]) : hn.throwArgumentError("invalid signature string", "signature", t), e.v < 27 && (e.v === 0 || e.v === 1 ? e.v += 27 : hn.throwArgumentError("signature invalid v byte", "signature", t)), e.recoveryParam = 1 - e.v % 2, e.recoveryParam && (r[32] |= 128), e._vs = Ri(r.slice(32, 64));
  } else {
    if (e.r = t.r, e.s = t.s, e.v = t.v, e.recoveryParam = t.recoveryParam, e._vs = t._vs, e._vs != null) {
      const i = TF(wn(e._vs), 32);
      e._vs = Ri(i);
      const s = i[0] >= 128 ? 1 : 0;
      e.recoveryParam == null ? e.recoveryParam = s : e.recoveryParam !== s && hn.throwArgumentError("signature recoveryParam mismatch _vs", "signature", t), i[0] &= 127;
      const o = Ri(i);
      e.s == null ? e.s = o : e.s !== o && hn.throwArgumentError("signature v mismatch _vs", "signature", t);
    }
    if (e.recoveryParam == null)
      e.v == null ? hn.throwArgumentError("signature missing v and recoveryParam", "signature", t) : e.v === 0 || e.v === 1 ? e.recoveryParam = e.v : e.recoveryParam = 1 - e.v % 2;
    else if (e.v == null)
      e.v = 27 + e.recoveryParam;
    else {
      const i = e.v === 0 || e.v === 1 ? e.v : 1 - e.v % 2;
      e.recoveryParam !== i && hn.throwArgumentError("signature recoveryParam mismatch v", "signature", t);
    }
    e.r == null || !zs(e.r) ? hn.throwArgumentError("signature missing or invalid r", "signature", t) : e.r = lu(e.r, 32), e.s == null || !zs(e.s) ? hn.throwArgumentError("signature missing or invalid s", "signature", t) : e.s = lu(e.s, 32);
    const r = wn(e.s);
    r[0] >= 128 && hn.throwArgumentError("signature s out of range", "signature", t), e.recoveryParam && (r[0] |= 128);
    const n = Ri(r);
    e._vs && (zs(e._vs) || hn.throwArgumentError("signature invalid _vs", "signature", t), e._vs = lu(e._vs, 32)), e._vs == null ? e._vs = n : e._vs !== n && hn.throwArgumentError("signature _vs mismatch v and s", "signature", t);
  }
  return e.yParityAndS = e._vs, e.compact = e.r + e.yParityAndS.substring(2), e;
}
function qv(t) {
  return "0x" + SF.keccak_256(wn(t));
}
var zv = { exports: {} };
zv.exports;
(function(t) {
  (function(e, r) {
    function n(m, f) {
      if (!m) throw new Error(f || "Assertion failed");
    }
    function i(m, f) {
      m.super_ = f;
      var g = function() {
      };
      g.prototype = f.prototype, m.prototype = new g(), m.prototype.constructor = m;
    }
    function s(m, f, g) {
      if (s.isBN(m))
        return m;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, m !== null && ((f === "le" || f === "be") && (g = f, f = 10), this._init(m || 0, f || 10, g || "be"));
    }
    typeof e == "object" ? e.exports = s : r.BN = s, s.BN = s, s.wordSize = 26;
    var o;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? o = window.Buffer : o = Wl.Buffer;
    } catch {
    }
    s.isBN = function(f) {
      return f instanceof s ? !0 : f !== null && typeof f == "object" && f.constructor.wordSize === s.wordSize && Array.isArray(f.words);
    }, s.max = function(f, g) {
      return f.cmp(g) > 0 ? f : g;
    }, s.min = function(f, g) {
      return f.cmp(g) < 0 ? f : g;
    }, s.prototype._init = function(f, g, b) {
      if (typeof f == "number")
        return this._initNumber(f, g, b);
      if (typeof f == "object")
        return this._initArray(f, g, b);
      g === "hex" && (g = 16), n(g === (g | 0) && g >= 2 && g <= 36), f = f.toString().replace(/\s+/g, "");
      var x = 0;
      f[0] === "-" && (x++, this.negative = 1), x < f.length && (g === 16 ? this._parseHex(f, x, b) : (this._parseBase(f, g, x), b === "le" && this._initArray(this.toArray(), g, b)));
    }, s.prototype._initNumber = function(f, g, b) {
      f < 0 && (this.negative = 1, f = -f), f < 67108864 ? (this.words = [f & 67108863], this.length = 1) : f < 4503599627370496 ? (this.words = [
        f & 67108863,
        f / 67108864 & 67108863
      ], this.length = 2) : (n(f < 9007199254740992), this.words = [
        f & 67108863,
        f / 67108864 & 67108863,
        1
      ], this.length = 3), b === "le" && this._initArray(this.toArray(), g, b);
    }, s.prototype._initArray = function(f, g, b) {
      if (n(typeof f.length == "number"), f.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(f.length / 3), this.words = new Array(this.length);
      for (var x = 0; x < this.length; x++)
        this.words[x] = 0;
      var _, E, v = 0;
      if (b === "be")
        for (x = f.length - 1, _ = 0; x >= 0; x -= 3)
          E = f[x] | f[x - 1] << 8 | f[x - 2] << 16, this.words[_] |= E << v & 67108863, this.words[_ + 1] = E >>> 26 - v & 67108863, v += 24, v >= 26 && (v -= 26, _++);
      else if (b === "le")
        for (x = 0, _ = 0; x < f.length; x += 3)
          E = f[x] | f[x + 1] << 8 | f[x + 2] << 16, this.words[_] |= E << v & 67108863, this.words[_ + 1] = E >>> 26 - v & 67108863, v += 24, v >= 26 && (v -= 26, _++);
      return this._strip();
    };
    function a(m, f) {
      var g = m.charCodeAt(f);
      if (g >= 48 && g <= 57)
        return g - 48;
      if (g >= 65 && g <= 70)
        return g - 55;
      if (g >= 97 && g <= 102)
        return g - 87;
      n(!1, "Invalid character in " + m);
    }
    function u(m, f, g) {
      var b = a(m, g);
      return g - 1 >= f && (b |= a(m, g - 1) << 4), b;
    }
    s.prototype._parseHex = function(f, g, b) {
      this.length = Math.ceil((f.length - g) / 6), this.words = new Array(this.length);
      for (var x = 0; x < this.length; x++)
        this.words[x] = 0;
      var _ = 0, E = 0, v;
      if (b === "be")
        for (x = f.length - 1; x >= g; x -= 2)
          v = u(f, g, x) << _, this.words[E] |= v & 67108863, _ >= 18 ? (_ -= 18, E += 1, this.words[E] |= v >>> 26) : _ += 8;
      else {
        var P = f.length - g;
        for (x = P % 2 === 0 ? g + 1 : g; x < f.length; x += 2)
          v = u(f, g, x) << _, this.words[E] |= v & 67108863, _ >= 18 ? (_ -= 18, E += 1, this.words[E] |= v >>> 26) : _ += 8;
      }
      this._strip();
    };
    function l(m, f, g, b) {
      for (var x = 0, _ = 0, E = Math.min(m.length, g), v = f; v < E; v++) {
        var P = m.charCodeAt(v) - 48;
        x *= b, P >= 49 ? _ = P - 49 + 10 : P >= 17 ? _ = P - 17 + 10 : _ = P, n(P >= 0 && _ < b, "Invalid character"), x += _;
      }
      return x;
    }
    s.prototype._parseBase = function(f, g, b) {
      this.words = [0], this.length = 1;
      for (var x = 0, _ = 1; _ <= 67108863; _ *= g)
        x++;
      x--, _ = _ / g | 0;
      for (var E = f.length - b, v = E % x, P = Math.min(E, E - v) + b, I = 0, F = b; F < P; F += x)
        I = l(f, F, F + x, g), this.imuln(_), this.words[0] + I < 67108864 ? this.words[0] += I : this._iaddn(I);
      if (v !== 0) {
        var ce = 1;
        for (I = l(f, F, f.length, g), F = 0; F < v; F++)
          ce *= g;
        this.imuln(ce), this.words[0] + I < 67108864 ? this.words[0] += I : this._iaddn(I);
      }
      this._strip();
    }, s.prototype.copy = function(f) {
      f.words = new Array(this.length);
      for (var g = 0; g < this.length; g++)
        f.words[g] = this.words[g];
      f.length = this.length, f.negative = this.negative, f.red = this.red;
    };
    function d(m, f) {
      m.words = f.words, m.length = f.length, m.negative = f.negative, m.red = f.red;
    }
    if (s.prototype._move = function(f) {
      d(f, this);
    }, s.prototype.clone = function() {
      var f = new s(null);
      return this.copy(f), f;
    }, s.prototype._expand = function(f) {
      for (; this.length < f; )
        this.words[this.length++] = 0;
      return this;
    }, s.prototype._strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, s.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, typeof Symbol < "u" && typeof Symbol.for == "function")
      try {
        s.prototype[Symbol.for("nodejs.util.inspect.custom")] = p;
      } catch {
        s.prototype.inspect = p;
      }
    else
      s.prototype.inspect = p;
    function p() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    }
    var w = [
      "",
      "0",
      "00",
      "000",
      "0000",
      "00000",
      "000000",
      "0000000",
      "00000000",
      "000000000",
      "0000000000",
      "00000000000",
      "000000000000",
      "0000000000000",
      "00000000000000",
      "000000000000000",
      "0000000000000000",
      "00000000000000000",
      "000000000000000000",
      "0000000000000000000",
      "00000000000000000000",
      "000000000000000000000",
      "0000000000000000000000",
      "00000000000000000000000",
      "000000000000000000000000",
      "0000000000000000000000000"
    ], A = [
      0,
      0,
      25,
      16,
      12,
      11,
      10,
      9,
      8,
      8,
      7,
      7,
      7,
      7,
      6,
      6,
      6,
      6,
      6,
      6,
      6,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5
    ], M = [
      0,
      0,
      33554432,
      43046721,
      16777216,
      48828125,
      60466176,
      40353607,
      16777216,
      43046721,
      1e7,
      19487171,
      35831808,
      62748517,
      7529536,
      11390625,
      16777216,
      24137569,
      34012224,
      47045881,
      64e6,
      4084101,
      5153632,
      6436343,
      7962624,
      9765625,
      11881376,
      14348907,
      17210368,
      20511149,
      243e5,
      28629151,
      33554432,
      39135393,
      45435424,
      52521875,
      60466176
    ];
    s.prototype.toString = function(f, g) {
      f = f || 10, g = g | 0 || 1;
      var b;
      if (f === 16 || f === "hex") {
        b = "";
        for (var x = 0, _ = 0, E = 0; E < this.length; E++) {
          var v = this.words[E], P = ((v << x | _) & 16777215).toString(16);
          _ = v >>> 24 - x & 16777215, x += 2, x >= 26 && (x -= 26, E--), _ !== 0 || E !== this.length - 1 ? b = w[6 - P.length] + P + b : b = P + b;
        }
        for (_ !== 0 && (b = _.toString(16) + b); b.length % g !== 0; )
          b = "0" + b;
        return this.negative !== 0 && (b = "-" + b), b;
      }
      if (f === (f | 0) && f >= 2 && f <= 36) {
        var I = A[f], F = M[f];
        b = "";
        var ce = this.clone();
        for (ce.negative = 0; !ce.isZero(); ) {
          var D = ce.modrn(F).toString(f);
          ce = ce.idivn(F), ce.isZero() ? b = D + b : b = w[I - D.length] + D + b;
        }
        for (this.isZero() && (b = "0" + b); b.length % g !== 0; )
          b = "0" + b;
        return this.negative !== 0 && (b = "-" + b), b;
      }
      n(!1, "Base should be between 2 and 36");
    }, s.prototype.toNumber = function() {
      var f = this.words[0];
      return this.length === 2 ? f += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? f += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && n(!1, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -f : f;
    }, s.prototype.toJSON = function() {
      return this.toString(16, 2);
    }, o && (s.prototype.toBuffer = function(f, g) {
      return this.toArrayLike(o, f, g);
    }), s.prototype.toArray = function(f, g) {
      return this.toArrayLike(Array, f, g);
    };
    var N = function(f, g) {
      return f.allocUnsafe ? f.allocUnsafe(g) : new f(g);
    };
    s.prototype.toArrayLike = function(f, g, b) {
      this._strip();
      var x = this.byteLength(), _ = b || Math.max(1, x);
      n(x <= _, "byte array longer than desired length"), n(_ > 0, "Requested array length <= 0");
      var E = N(f, _), v = g === "le" ? "LE" : "BE";
      return this["_toArrayLike" + v](E, x), E;
    }, s.prototype._toArrayLikeLE = function(f, g) {
      for (var b = 0, x = 0, _ = 0, E = 0; _ < this.length; _++) {
        var v = this.words[_] << E | x;
        f[b++] = v & 255, b < f.length && (f[b++] = v >> 8 & 255), b < f.length && (f[b++] = v >> 16 & 255), E === 6 ? (b < f.length && (f[b++] = v >> 24 & 255), x = 0, E = 0) : (x = v >>> 24, E += 2);
      }
      if (b < f.length)
        for (f[b++] = x; b < f.length; )
          f[b++] = 0;
    }, s.prototype._toArrayLikeBE = function(f, g) {
      for (var b = f.length - 1, x = 0, _ = 0, E = 0; _ < this.length; _++) {
        var v = this.words[_] << E | x;
        f[b--] = v & 255, b >= 0 && (f[b--] = v >> 8 & 255), b >= 0 && (f[b--] = v >> 16 & 255), E === 6 ? (b >= 0 && (f[b--] = v >> 24 & 255), x = 0, E = 0) : (x = v >>> 24, E += 2);
      }
      if (b >= 0)
        for (f[b--] = x; b >= 0; )
          f[b--] = 0;
    }, Math.clz32 ? s.prototype._countBits = function(f) {
      return 32 - Math.clz32(f);
    } : s.prototype._countBits = function(f) {
      var g = f, b = 0;
      return g >= 4096 && (b += 13, g >>>= 13), g >= 64 && (b += 7, g >>>= 7), g >= 8 && (b += 4, g >>>= 4), g >= 2 && (b += 2, g >>>= 2), b + g;
    }, s.prototype._zeroBits = function(f) {
      if (f === 0) return 26;
      var g = f, b = 0;
      return g & 8191 || (b += 13, g >>>= 13), g & 127 || (b += 7, g >>>= 7), g & 15 || (b += 4, g >>>= 4), g & 3 || (b += 2, g >>>= 2), g & 1 || b++, b;
    }, s.prototype.bitLength = function() {
      var f = this.words[this.length - 1], g = this._countBits(f);
      return (this.length - 1) * 26 + g;
    };
    function L(m) {
      for (var f = new Array(m.bitLength()), g = 0; g < f.length; g++) {
        var b = g / 26 | 0, x = g % 26;
        f[g] = m.words[b] >>> x & 1;
      }
      return f;
    }
    s.prototype.zeroBits = function() {
      if (this.isZero()) return 0;
      for (var f = 0, g = 0; g < this.length; g++) {
        var b = this._zeroBits(this.words[g]);
        if (f += b, b !== 26) break;
      }
      return f;
    }, s.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, s.prototype.toTwos = function(f) {
      return this.negative !== 0 ? this.abs().inotn(f).iaddn(1) : this.clone();
    }, s.prototype.fromTwos = function(f) {
      return this.testn(f - 1) ? this.notn(f).iaddn(1).ineg() : this.clone();
    }, s.prototype.isNeg = function() {
      return this.negative !== 0;
    }, s.prototype.neg = function() {
      return this.clone().ineg();
    }, s.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, s.prototype.iuor = function(f) {
      for (; this.length < f.length; )
        this.words[this.length++] = 0;
      for (var g = 0; g < f.length; g++)
        this.words[g] = this.words[g] | f.words[g];
      return this._strip();
    }, s.prototype.ior = function(f) {
      return n((this.negative | f.negative) === 0), this.iuor(f);
    }, s.prototype.or = function(f) {
      return this.length > f.length ? this.clone().ior(f) : f.clone().ior(this);
    }, s.prototype.uor = function(f) {
      return this.length > f.length ? this.clone().iuor(f) : f.clone().iuor(this);
    }, s.prototype.iuand = function(f) {
      var g;
      this.length > f.length ? g = f : g = this;
      for (var b = 0; b < g.length; b++)
        this.words[b] = this.words[b] & f.words[b];
      return this.length = g.length, this._strip();
    }, s.prototype.iand = function(f) {
      return n((this.negative | f.negative) === 0), this.iuand(f);
    }, s.prototype.and = function(f) {
      return this.length > f.length ? this.clone().iand(f) : f.clone().iand(this);
    }, s.prototype.uand = function(f) {
      return this.length > f.length ? this.clone().iuand(f) : f.clone().iuand(this);
    }, s.prototype.iuxor = function(f) {
      var g, b;
      this.length > f.length ? (g = this, b = f) : (g = f, b = this);
      for (var x = 0; x < b.length; x++)
        this.words[x] = g.words[x] ^ b.words[x];
      if (this !== g)
        for (; x < g.length; x++)
          this.words[x] = g.words[x];
      return this.length = g.length, this._strip();
    }, s.prototype.ixor = function(f) {
      return n((this.negative | f.negative) === 0), this.iuxor(f);
    }, s.prototype.xor = function(f) {
      return this.length > f.length ? this.clone().ixor(f) : f.clone().ixor(this);
    }, s.prototype.uxor = function(f) {
      return this.length > f.length ? this.clone().iuxor(f) : f.clone().iuxor(this);
    }, s.prototype.inotn = function(f) {
      n(typeof f == "number" && f >= 0);
      var g = Math.ceil(f / 26) | 0, b = f % 26;
      this._expand(g), b > 0 && g--;
      for (var x = 0; x < g; x++)
        this.words[x] = ~this.words[x] & 67108863;
      return b > 0 && (this.words[x] = ~this.words[x] & 67108863 >> 26 - b), this._strip();
    }, s.prototype.notn = function(f) {
      return this.clone().inotn(f);
    }, s.prototype.setn = function(f, g) {
      n(typeof f == "number" && f >= 0);
      var b = f / 26 | 0, x = f % 26;
      return this._expand(b + 1), g ? this.words[b] = this.words[b] | 1 << x : this.words[b] = this.words[b] & ~(1 << x), this._strip();
    }, s.prototype.iadd = function(f) {
      var g;
      if (this.negative !== 0 && f.negative === 0)
        return this.negative = 0, g = this.isub(f), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && f.negative !== 0)
        return f.negative = 0, g = this.isub(f), f.negative = 1, g._normSign();
      var b, x;
      this.length > f.length ? (b = this, x = f) : (b = f, x = this);
      for (var _ = 0, E = 0; E < x.length; E++)
        g = (b.words[E] | 0) + (x.words[E] | 0) + _, this.words[E] = g & 67108863, _ = g >>> 26;
      for (; _ !== 0 && E < b.length; E++)
        g = (b.words[E] | 0) + _, this.words[E] = g & 67108863, _ = g >>> 26;
      if (this.length = b.length, _ !== 0)
        this.words[this.length] = _, this.length++;
      else if (b !== this)
        for (; E < b.length; E++)
          this.words[E] = b.words[E];
      return this;
    }, s.prototype.add = function(f) {
      var g;
      return f.negative !== 0 && this.negative === 0 ? (f.negative = 0, g = this.sub(f), f.negative ^= 1, g) : f.negative === 0 && this.negative !== 0 ? (this.negative = 0, g = f.sub(this), this.negative = 1, g) : this.length > f.length ? this.clone().iadd(f) : f.clone().iadd(this);
    }, s.prototype.isub = function(f) {
      if (f.negative !== 0) {
        f.negative = 0;
        var g = this.iadd(f);
        return f.negative = 1, g._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(f), this.negative = 1, this._normSign();
      var b = this.cmp(f);
      if (b === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var x, _;
      b > 0 ? (x = this, _ = f) : (x = f, _ = this);
      for (var E = 0, v = 0; v < _.length; v++)
        g = (x.words[v] | 0) - (_.words[v] | 0) + E, E = g >> 26, this.words[v] = g & 67108863;
      for (; E !== 0 && v < x.length; v++)
        g = (x.words[v] | 0) + E, E = g >> 26, this.words[v] = g & 67108863;
      if (E === 0 && v < x.length && x !== this)
        for (; v < x.length; v++)
          this.words[v] = x.words[v];
      return this.length = Math.max(this.length, v), x !== this && (this.negative = 1), this._strip();
    }, s.prototype.sub = function(f) {
      return this.clone().isub(f);
    };
    function B(m, f, g) {
      g.negative = f.negative ^ m.negative;
      var b = m.length + f.length | 0;
      g.length = b, b = b - 1 | 0;
      var x = m.words[0] | 0, _ = f.words[0] | 0, E = x * _, v = E & 67108863, P = E / 67108864 | 0;
      g.words[0] = v;
      for (var I = 1; I < b; I++) {
        for (var F = P >>> 26, ce = P & 67108863, D = Math.min(I, f.length - 1), oe = Math.max(0, I - m.length + 1); oe <= D; oe++) {
          var Z = I - oe | 0;
          x = m.words[Z] | 0, _ = f.words[oe] | 0, E = x * _ + ce, F += E / 67108864 | 0, ce = E & 67108863;
        }
        g.words[I] = ce | 0, P = F | 0;
      }
      return P !== 0 ? g.words[I] = P | 0 : g.length--, g._strip();
    }
    var $ = function(f, g, b) {
      var x = f.words, _ = g.words, E = b.words, v = 0, P, I, F, ce = x[0] | 0, D = ce & 8191, oe = ce >>> 13, Z = x[1] | 0, J = Z & 8191, Q = Z >>> 13, T = x[2] | 0, X = T & 8191, re = T >>> 13, de = x[3] | 0, ie = de & 8191, ue = de >>> 13, ve = x[4] | 0, Pe = ve & 8191, De = ve >>> 13, Ce = x[5] | 0, $e = Ce & 8191, Me = Ce >>> 13, Ne = x[6] | 0, Ke = Ne & 8191, Le = Ne >>> 13, qe = x[7] | 0, ze = qe & 8191, _e = qe >>> 13, Ze = x[8] | 0, at = Ze & 8191, ke = Ze >>> 13, Qe = x[9] | 0, tt = Qe & 8191, Ye = Qe >>> 13, dt = _[0] | 0, lt = dt & 8191, ct = dt >>> 13, qt = _[1] | 0, Yt = qt & 8191, Et = qt >>> 13, er = _[2] | 0, Jt = er & 8191, Dt = er >>> 13, kt = _[3] | 0, Ct = kt & 8191, gt = kt >>> 13, Rt = _[4] | 0, Nt = Rt & 8191, vt = Rt >>> 13, $t = _[5] | 0, Ft = $t & 8191, rt = $t >>> 13, Bt = _[6] | 0, k = Bt & 8191, U = Bt >>> 13, z = _[7] | 0, C = z & 8191, G = z >>> 13, j = _[8] | 0, se = j & 8191, he = j >>> 13, xe = _[9] | 0, Te = xe & 8191, Re = xe >>> 13;
      b.negative = f.negative ^ g.negative, b.length = 19, P = Math.imul(D, lt), I = Math.imul(D, ct), I = I + Math.imul(oe, lt) | 0, F = Math.imul(oe, ct);
      var nt = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (nt >>> 26) | 0, nt &= 67108863, P = Math.imul(J, lt), I = Math.imul(J, ct), I = I + Math.imul(Q, lt) | 0, F = Math.imul(Q, ct), P = P + Math.imul(D, Yt) | 0, I = I + Math.imul(D, Et) | 0, I = I + Math.imul(oe, Yt) | 0, F = F + Math.imul(oe, Et) | 0;
      var je = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (je >>> 26) | 0, je &= 67108863, P = Math.imul(X, lt), I = Math.imul(X, ct), I = I + Math.imul(re, lt) | 0, F = Math.imul(re, ct), P = P + Math.imul(J, Yt) | 0, I = I + Math.imul(J, Et) | 0, I = I + Math.imul(Q, Yt) | 0, F = F + Math.imul(Q, Et) | 0, P = P + Math.imul(D, Jt) | 0, I = I + Math.imul(D, Dt) | 0, I = I + Math.imul(oe, Jt) | 0, F = F + Math.imul(oe, Dt) | 0;
      var pt = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, P = Math.imul(ie, lt), I = Math.imul(ie, ct), I = I + Math.imul(ue, lt) | 0, F = Math.imul(ue, ct), P = P + Math.imul(X, Yt) | 0, I = I + Math.imul(X, Et) | 0, I = I + Math.imul(re, Yt) | 0, F = F + Math.imul(re, Et) | 0, P = P + Math.imul(J, Jt) | 0, I = I + Math.imul(J, Dt) | 0, I = I + Math.imul(Q, Jt) | 0, F = F + Math.imul(Q, Dt) | 0, P = P + Math.imul(D, Ct) | 0, I = I + Math.imul(D, gt) | 0, I = I + Math.imul(oe, Ct) | 0, F = F + Math.imul(oe, gt) | 0;
      var it = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (it >>> 26) | 0, it &= 67108863, P = Math.imul(Pe, lt), I = Math.imul(Pe, ct), I = I + Math.imul(De, lt) | 0, F = Math.imul(De, ct), P = P + Math.imul(ie, Yt) | 0, I = I + Math.imul(ie, Et) | 0, I = I + Math.imul(ue, Yt) | 0, F = F + Math.imul(ue, Et) | 0, P = P + Math.imul(X, Jt) | 0, I = I + Math.imul(X, Dt) | 0, I = I + Math.imul(re, Jt) | 0, F = F + Math.imul(re, Dt) | 0, P = P + Math.imul(J, Ct) | 0, I = I + Math.imul(J, gt) | 0, I = I + Math.imul(Q, Ct) | 0, F = F + Math.imul(Q, gt) | 0, P = P + Math.imul(D, Nt) | 0, I = I + Math.imul(D, vt) | 0, I = I + Math.imul(oe, Nt) | 0, F = F + Math.imul(oe, vt) | 0;
      var et = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, P = Math.imul($e, lt), I = Math.imul($e, ct), I = I + Math.imul(Me, lt) | 0, F = Math.imul(Me, ct), P = P + Math.imul(Pe, Yt) | 0, I = I + Math.imul(Pe, Et) | 0, I = I + Math.imul(De, Yt) | 0, F = F + Math.imul(De, Et) | 0, P = P + Math.imul(ie, Jt) | 0, I = I + Math.imul(ie, Dt) | 0, I = I + Math.imul(ue, Jt) | 0, F = F + Math.imul(ue, Dt) | 0, P = P + Math.imul(X, Ct) | 0, I = I + Math.imul(X, gt) | 0, I = I + Math.imul(re, Ct) | 0, F = F + Math.imul(re, gt) | 0, P = P + Math.imul(J, Nt) | 0, I = I + Math.imul(J, vt) | 0, I = I + Math.imul(Q, Nt) | 0, F = F + Math.imul(Q, vt) | 0, P = P + Math.imul(D, Ft) | 0, I = I + Math.imul(D, rt) | 0, I = I + Math.imul(oe, Ft) | 0, F = F + Math.imul(oe, rt) | 0;
      var St = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (St >>> 26) | 0, St &= 67108863, P = Math.imul(Ke, lt), I = Math.imul(Ke, ct), I = I + Math.imul(Le, lt) | 0, F = Math.imul(Le, ct), P = P + Math.imul($e, Yt) | 0, I = I + Math.imul($e, Et) | 0, I = I + Math.imul(Me, Yt) | 0, F = F + Math.imul(Me, Et) | 0, P = P + Math.imul(Pe, Jt) | 0, I = I + Math.imul(Pe, Dt) | 0, I = I + Math.imul(De, Jt) | 0, F = F + Math.imul(De, Dt) | 0, P = P + Math.imul(ie, Ct) | 0, I = I + Math.imul(ie, gt) | 0, I = I + Math.imul(ue, Ct) | 0, F = F + Math.imul(ue, gt) | 0, P = P + Math.imul(X, Nt) | 0, I = I + Math.imul(X, vt) | 0, I = I + Math.imul(re, Nt) | 0, F = F + Math.imul(re, vt) | 0, P = P + Math.imul(J, Ft) | 0, I = I + Math.imul(J, rt) | 0, I = I + Math.imul(Q, Ft) | 0, F = F + Math.imul(Q, rt) | 0, P = P + Math.imul(D, k) | 0, I = I + Math.imul(D, U) | 0, I = I + Math.imul(oe, k) | 0, F = F + Math.imul(oe, U) | 0;
      var Tt = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (Tt >>> 26) | 0, Tt &= 67108863, P = Math.imul(ze, lt), I = Math.imul(ze, ct), I = I + Math.imul(_e, lt) | 0, F = Math.imul(_e, ct), P = P + Math.imul(Ke, Yt) | 0, I = I + Math.imul(Ke, Et) | 0, I = I + Math.imul(Le, Yt) | 0, F = F + Math.imul(Le, Et) | 0, P = P + Math.imul($e, Jt) | 0, I = I + Math.imul($e, Dt) | 0, I = I + Math.imul(Me, Jt) | 0, F = F + Math.imul(Me, Dt) | 0, P = P + Math.imul(Pe, Ct) | 0, I = I + Math.imul(Pe, gt) | 0, I = I + Math.imul(De, Ct) | 0, F = F + Math.imul(De, gt) | 0, P = P + Math.imul(ie, Nt) | 0, I = I + Math.imul(ie, vt) | 0, I = I + Math.imul(ue, Nt) | 0, F = F + Math.imul(ue, vt) | 0, P = P + Math.imul(X, Ft) | 0, I = I + Math.imul(X, rt) | 0, I = I + Math.imul(re, Ft) | 0, F = F + Math.imul(re, rt) | 0, P = P + Math.imul(J, k) | 0, I = I + Math.imul(J, U) | 0, I = I + Math.imul(Q, k) | 0, F = F + Math.imul(Q, U) | 0, P = P + Math.imul(D, C) | 0, I = I + Math.imul(D, G) | 0, I = I + Math.imul(oe, C) | 0, F = F + Math.imul(oe, G) | 0;
      var At = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (At >>> 26) | 0, At &= 67108863, P = Math.imul(at, lt), I = Math.imul(at, ct), I = I + Math.imul(ke, lt) | 0, F = Math.imul(ke, ct), P = P + Math.imul(ze, Yt) | 0, I = I + Math.imul(ze, Et) | 0, I = I + Math.imul(_e, Yt) | 0, F = F + Math.imul(_e, Et) | 0, P = P + Math.imul(Ke, Jt) | 0, I = I + Math.imul(Ke, Dt) | 0, I = I + Math.imul(Le, Jt) | 0, F = F + Math.imul(Le, Dt) | 0, P = P + Math.imul($e, Ct) | 0, I = I + Math.imul($e, gt) | 0, I = I + Math.imul(Me, Ct) | 0, F = F + Math.imul(Me, gt) | 0, P = P + Math.imul(Pe, Nt) | 0, I = I + Math.imul(Pe, vt) | 0, I = I + Math.imul(De, Nt) | 0, F = F + Math.imul(De, vt) | 0, P = P + Math.imul(ie, Ft) | 0, I = I + Math.imul(ie, rt) | 0, I = I + Math.imul(ue, Ft) | 0, F = F + Math.imul(ue, rt) | 0, P = P + Math.imul(X, k) | 0, I = I + Math.imul(X, U) | 0, I = I + Math.imul(re, k) | 0, F = F + Math.imul(re, U) | 0, P = P + Math.imul(J, C) | 0, I = I + Math.imul(J, G) | 0, I = I + Math.imul(Q, C) | 0, F = F + Math.imul(Q, G) | 0, P = P + Math.imul(D, se) | 0, I = I + Math.imul(D, he) | 0, I = I + Math.imul(oe, se) | 0, F = F + Math.imul(oe, he) | 0;
      var _t = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, P = Math.imul(tt, lt), I = Math.imul(tt, ct), I = I + Math.imul(Ye, lt) | 0, F = Math.imul(Ye, ct), P = P + Math.imul(at, Yt) | 0, I = I + Math.imul(at, Et) | 0, I = I + Math.imul(ke, Yt) | 0, F = F + Math.imul(ke, Et) | 0, P = P + Math.imul(ze, Jt) | 0, I = I + Math.imul(ze, Dt) | 0, I = I + Math.imul(_e, Jt) | 0, F = F + Math.imul(_e, Dt) | 0, P = P + Math.imul(Ke, Ct) | 0, I = I + Math.imul(Ke, gt) | 0, I = I + Math.imul(Le, Ct) | 0, F = F + Math.imul(Le, gt) | 0, P = P + Math.imul($e, Nt) | 0, I = I + Math.imul($e, vt) | 0, I = I + Math.imul(Me, Nt) | 0, F = F + Math.imul(Me, vt) | 0, P = P + Math.imul(Pe, Ft) | 0, I = I + Math.imul(Pe, rt) | 0, I = I + Math.imul(De, Ft) | 0, F = F + Math.imul(De, rt) | 0, P = P + Math.imul(ie, k) | 0, I = I + Math.imul(ie, U) | 0, I = I + Math.imul(ue, k) | 0, F = F + Math.imul(ue, U) | 0, P = P + Math.imul(X, C) | 0, I = I + Math.imul(X, G) | 0, I = I + Math.imul(re, C) | 0, F = F + Math.imul(re, G) | 0, P = P + Math.imul(J, se) | 0, I = I + Math.imul(J, he) | 0, I = I + Math.imul(Q, se) | 0, F = F + Math.imul(Q, he) | 0, P = P + Math.imul(D, Te) | 0, I = I + Math.imul(D, Re) | 0, I = I + Math.imul(oe, Te) | 0, F = F + Math.imul(oe, Re) | 0;
      var ht = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, P = Math.imul(tt, Yt), I = Math.imul(tt, Et), I = I + Math.imul(Ye, Yt) | 0, F = Math.imul(Ye, Et), P = P + Math.imul(at, Jt) | 0, I = I + Math.imul(at, Dt) | 0, I = I + Math.imul(ke, Jt) | 0, F = F + Math.imul(ke, Dt) | 0, P = P + Math.imul(ze, Ct) | 0, I = I + Math.imul(ze, gt) | 0, I = I + Math.imul(_e, Ct) | 0, F = F + Math.imul(_e, gt) | 0, P = P + Math.imul(Ke, Nt) | 0, I = I + Math.imul(Ke, vt) | 0, I = I + Math.imul(Le, Nt) | 0, F = F + Math.imul(Le, vt) | 0, P = P + Math.imul($e, Ft) | 0, I = I + Math.imul($e, rt) | 0, I = I + Math.imul(Me, Ft) | 0, F = F + Math.imul(Me, rt) | 0, P = P + Math.imul(Pe, k) | 0, I = I + Math.imul(Pe, U) | 0, I = I + Math.imul(De, k) | 0, F = F + Math.imul(De, U) | 0, P = P + Math.imul(ie, C) | 0, I = I + Math.imul(ie, G) | 0, I = I + Math.imul(ue, C) | 0, F = F + Math.imul(ue, G) | 0, P = P + Math.imul(X, se) | 0, I = I + Math.imul(X, he) | 0, I = I + Math.imul(re, se) | 0, F = F + Math.imul(re, he) | 0, P = P + Math.imul(J, Te) | 0, I = I + Math.imul(J, Re) | 0, I = I + Math.imul(Q, Te) | 0, F = F + Math.imul(Q, Re) | 0;
      var xt = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, P = Math.imul(tt, Jt), I = Math.imul(tt, Dt), I = I + Math.imul(Ye, Jt) | 0, F = Math.imul(Ye, Dt), P = P + Math.imul(at, Ct) | 0, I = I + Math.imul(at, gt) | 0, I = I + Math.imul(ke, Ct) | 0, F = F + Math.imul(ke, gt) | 0, P = P + Math.imul(ze, Nt) | 0, I = I + Math.imul(ze, vt) | 0, I = I + Math.imul(_e, Nt) | 0, F = F + Math.imul(_e, vt) | 0, P = P + Math.imul(Ke, Ft) | 0, I = I + Math.imul(Ke, rt) | 0, I = I + Math.imul(Le, Ft) | 0, F = F + Math.imul(Le, rt) | 0, P = P + Math.imul($e, k) | 0, I = I + Math.imul($e, U) | 0, I = I + Math.imul(Me, k) | 0, F = F + Math.imul(Me, U) | 0, P = P + Math.imul(Pe, C) | 0, I = I + Math.imul(Pe, G) | 0, I = I + Math.imul(De, C) | 0, F = F + Math.imul(De, G) | 0, P = P + Math.imul(ie, se) | 0, I = I + Math.imul(ie, he) | 0, I = I + Math.imul(ue, se) | 0, F = F + Math.imul(ue, he) | 0, P = P + Math.imul(X, Te) | 0, I = I + Math.imul(X, Re) | 0, I = I + Math.imul(re, Te) | 0, F = F + Math.imul(re, Re) | 0;
      var st = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (st >>> 26) | 0, st &= 67108863, P = Math.imul(tt, Ct), I = Math.imul(tt, gt), I = I + Math.imul(Ye, Ct) | 0, F = Math.imul(Ye, gt), P = P + Math.imul(at, Nt) | 0, I = I + Math.imul(at, vt) | 0, I = I + Math.imul(ke, Nt) | 0, F = F + Math.imul(ke, vt) | 0, P = P + Math.imul(ze, Ft) | 0, I = I + Math.imul(ze, rt) | 0, I = I + Math.imul(_e, Ft) | 0, F = F + Math.imul(_e, rt) | 0, P = P + Math.imul(Ke, k) | 0, I = I + Math.imul(Ke, U) | 0, I = I + Math.imul(Le, k) | 0, F = F + Math.imul(Le, U) | 0, P = P + Math.imul($e, C) | 0, I = I + Math.imul($e, G) | 0, I = I + Math.imul(Me, C) | 0, F = F + Math.imul(Me, G) | 0, P = P + Math.imul(Pe, se) | 0, I = I + Math.imul(Pe, he) | 0, I = I + Math.imul(De, se) | 0, F = F + Math.imul(De, he) | 0, P = P + Math.imul(ie, Te) | 0, I = I + Math.imul(ie, Re) | 0, I = I + Math.imul(ue, Te) | 0, F = F + Math.imul(ue, Re) | 0;
      var bt = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (bt >>> 26) | 0, bt &= 67108863, P = Math.imul(tt, Nt), I = Math.imul(tt, vt), I = I + Math.imul(Ye, Nt) | 0, F = Math.imul(Ye, vt), P = P + Math.imul(at, Ft) | 0, I = I + Math.imul(at, rt) | 0, I = I + Math.imul(ke, Ft) | 0, F = F + Math.imul(ke, rt) | 0, P = P + Math.imul(ze, k) | 0, I = I + Math.imul(ze, U) | 0, I = I + Math.imul(_e, k) | 0, F = F + Math.imul(_e, U) | 0, P = P + Math.imul(Ke, C) | 0, I = I + Math.imul(Ke, G) | 0, I = I + Math.imul(Le, C) | 0, F = F + Math.imul(Le, G) | 0, P = P + Math.imul($e, se) | 0, I = I + Math.imul($e, he) | 0, I = I + Math.imul(Me, se) | 0, F = F + Math.imul(Me, he) | 0, P = P + Math.imul(Pe, Te) | 0, I = I + Math.imul(Pe, Re) | 0, I = I + Math.imul(De, Te) | 0, F = F + Math.imul(De, Re) | 0;
      var ut = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (ut >>> 26) | 0, ut &= 67108863, P = Math.imul(tt, Ft), I = Math.imul(tt, rt), I = I + Math.imul(Ye, Ft) | 0, F = Math.imul(Ye, rt), P = P + Math.imul(at, k) | 0, I = I + Math.imul(at, U) | 0, I = I + Math.imul(ke, k) | 0, F = F + Math.imul(ke, U) | 0, P = P + Math.imul(ze, C) | 0, I = I + Math.imul(ze, G) | 0, I = I + Math.imul(_e, C) | 0, F = F + Math.imul(_e, G) | 0, P = P + Math.imul(Ke, se) | 0, I = I + Math.imul(Ke, he) | 0, I = I + Math.imul(Le, se) | 0, F = F + Math.imul(Le, he) | 0, P = P + Math.imul($e, Te) | 0, I = I + Math.imul($e, Re) | 0, I = I + Math.imul(Me, Te) | 0, F = F + Math.imul(Me, Re) | 0;
      var ot = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (ot >>> 26) | 0, ot &= 67108863, P = Math.imul(tt, k), I = Math.imul(tt, U), I = I + Math.imul(Ye, k) | 0, F = Math.imul(Ye, U), P = P + Math.imul(at, C) | 0, I = I + Math.imul(at, G) | 0, I = I + Math.imul(ke, C) | 0, F = F + Math.imul(ke, G) | 0, P = P + Math.imul(ze, se) | 0, I = I + Math.imul(ze, he) | 0, I = I + Math.imul(_e, se) | 0, F = F + Math.imul(_e, he) | 0, P = P + Math.imul(Ke, Te) | 0, I = I + Math.imul(Ke, Re) | 0, I = I + Math.imul(Le, Te) | 0, F = F + Math.imul(Le, Re) | 0;
      var Se = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (Se >>> 26) | 0, Se &= 67108863, P = Math.imul(tt, C), I = Math.imul(tt, G), I = I + Math.imul(Ye, C) | 0, F = Math.imul(Ye, G), P = P + Math.imul(at, se) | 0, I = I + Math.imul(at, he) | 0, I = I + Math.imul(ke, se) | 0, F = F + Math.imul(ke, he) | 0, P = P + Math.imul(ze, Te) | 0, I = I + Math.imul(ze, Re) | 0, I = I + Math.imul(_e, Te) | 0, F = F + Math.imul(_e, Re) | 0;
      var Ae = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (Ae >>> 26) | 0, Ae &= 67108863, P = Math.imul(tt, se), I = Math.imul(tt, he), I = I + Math.imul(Ye, se) | 0, F = Math.imul(Ye, he), P = P + Math.imul(at, Te) | 0, I = I + Math.imul(at, Re) | 0, I = I + Math.imul(ke, Te) | 0, F = F + Math.imul(ke, Re) | 0;
      var Ve = (v + P | 0) + ((I & 8191) << 13) | 0;
      v = (F + (I >>> 13) | 0) + (Ve >>> 26) | 0, Ve &= 67108863, P = Math.imul(tt, Te), I = Math.imul(tt, Re), I = I + Math.imul(Ye, Te) | 0, F = Math.imul(Ye, Re);
      var Fe = (v + P | 0) + ((I & 8191) << 13) | 0;
      return v = (F + (I >>> 13) | 0) + (Fe >>> 26) | 0, Fe &= 67108863, E[0] = nt, E[1] = je, E[2] = pt, E[3] = it, E[4] = et, E[5] = St, E[6] = Tt, E[7] = At, E[8] = _t, E[9] = ht, E[10] = xt, E[11] = st, E[12] = bt, E[13] = ut, E[14] = ot, E[15] = Se, E[16] = Ae, E[17] = Ve, E[18] = Fe, v !== 0 && (E[19] = v, b.length++), b;
    };
    Math.imul || ($ = B);
    function H(m, f, g) {
      g.negative = f.negative ^ m.negative, g.length = m.length + f.length;
      for (var b = 0, x = 0, _ = 0; _ < g.length - 1; _++) {
        var E = x;
        x = 0;
        for (var v = b & 67108863, P = Math.min(_, f.length - 1), I = Math.max(0, _ - m.length + 1); I <= P; I++) {
          var F = _ - I, ce = m.words[F] | 0, D = f.words[I] | 0, oe = ce * D, Z = oe & 67108863;
          E = E + (oe / 67108864 | 0) | 0, Z = Z + v | 0, v = Z & 67108863, E = E + (Z >>> 26) | 0, x += E >>> 26, E &= 67108863;
        }
        g.words[_] = v, b = E, E = x;
      }
      return b !== 0 ? g.words[_] = b : g.length--, g._strip();
    }
    function W(m, f, g) {
      return H(m, f, g);
    }
    s.prototype.mulTo = function(f, g) {
      var b, x = this.length + f.length;
      return this.length === 10 && f.length === 10 ? b = $(this, f, g) : x < 63 ? b = B(this, f, g) : x < 1024 ? b = H(this, f, g) : b = W(this, f, g), b;
    }, s.prototype.mul = function(f) {
      var g = new s(null);
      return g.words = new Array(this.length + f.length), this.mulTo(f, g);
    }, s.prototype.mulf = function(f) {
      var g = new s(null);
      return g.words = new Array(this.length + f.length), W(this, f, g);
    }, s.prototype.imul = function(f) {
      return this.clone().mulTo(f, this);
    }, s.prototype.imuln = function(f) {
      var g = f < 0;
      g && (f = -f), n(typeof f == "number"), n(f < 67108864);
      for (var b = 0, x = 0; x < this.length; x++) {
        var _ = (this.words[x] | 0) * f, E = (_ & 67108863) + (b & 67108863);
        b >>= 26, b += _ / 67108864 | 0, b += E >>> 26, this.words[x] = E & 67108863;
      }
      return b !== 0 && (this.words[x] = b, this.length++), g ? this.ineg() : this;
    }, s.prototype.muln = function(f) {
      return this.clone().imuln(f);
    }, s.prototype.sqr = function() {
      return this.mul(this);
    }, s.prototype.isqr = function() {
      return this.imul(this.clone());
    }, s.prototype.pow = function(f) {
      var g = L(f);
      if (g.length === 0) return new s(1);
      for (var b = this, x = 0; x < g.length && g[x] === 0; x++, b = b.sqr())
        ;
      if (++x < g.length)
        for (var _ = b.sqr(); x < g.length; x++, _ = _.sqr())
          g[x] !== 0 && (b = b.mul(_));
      return b;
    }, s.prototype.iushln = function(f) {
      n(typeof f == "number" && f >= 0);
      var g = f % 26, b = (f - g) / 26, x = 67108863 >>> 26 - g << 26 - g, _;
      if (g !== 0) {
        var E = 0;
        for (_ = 0; _ < this.length; _++) {
          var v = this.words[_] & x, P = (this.words[_] | 0) - v << g;
          this.words[_] = P | E, E = v >>> 26 - g;
        }
        E && (this.words[_] = E, this.length++);
      }
      if (b !== 0) {
        for (_ = this.length - 1; _ >= 0; _--)
          this.words[_ + b] = this.words[_];
        for (_ = 0; _ < b; _++)
          this.words[_] = 0;
        this.length += b;
      }
      return this._strip();
    }, s.prototype.ishln = function(f) {
      return n(this.negative === 0), this.iushln(f);
    }, s.prototype.iushrn = function(f, g, b) {
      n(typeof f == "number" && f >= 0);
      var x;
      g ? x = (g - g % 26) / 26 : x = 0;
      var _ = f % 26, E = Math.min((f - _) / 26, this.length), v = 67108863 ^ 67108863 >>> _ << _, P = b;
      if (x -= E, x = Math.max(0, x), P) {
        for (var I = 0; I < E; I++)
          P.words[I] = this.words[I];
        P.length = E;
      }
      if (E !== 0) if (this.length > E)
        for (this.length -= E, I = 0; I < this.length; I++)
          this.words[I] = this.words[I + E];
      else
        this.words[0] = 0, this.length = 1;
      var F = 0;
      for (I = this.length - 1; I >= 0 && (F !== 0 || I >= x); I--) {
        var ce = this.words[I] | 0;
        this.words[I] = F << 26 - _ | ce >>> _, F = ce & v;
      }
      return P && F !== 0 && (P.words[P.length++] = F), this.length === 0 && (this.words[0] = 0, this.length = 1), this._strip();
    }, s.prototype.ishrn = function(f, g, b) {
      return n(this.negative === 0), this.iushrn(f, g, b);
    }, s.prototype.shln = function(f) {
      return this.clone().ishln(f);
    }, s.prototype.ushln = function(f) {
      return this.clone().iushln(f);
    }, s.prototype.shrn = function(f) {
      return this.clone().ishrn(f);
    }, s.prototype.ushrn = function(f) {
      return this.clone().iushrn(f);
    }, s.prototype.testn = function(f) {
      n(typeof f == "number" && f >= 0);
      var g = f % 26, b = (f - g) / 26, x = 1 << g;
      if (this.length <= b) return !1;
      var _ = this.words[b];
      return !!(_ & x);
    }, s.prototype.imaskn = function(f) {
      n(typeof f == "number" && f >= 0);
      var g = f % 26, b = (f - g) / 26;
      if (n(this.negative === 0, "imaskn works only with positive numbers"), this.length <= b)
        return this;
      if (g !== 0 && b++, this.length = Math.min(b, this.length), g !== 0) {
        var x = 67108863 ^ 67108863 >>> g << g;
        this.words[this.length - 1] &= x;
      }
      return this._strip();
    }, s.prototype.maskn = function(f) {
      return this.clone().imaskn(f);
    }, s.prototype.iaddn = function(f) {
      return n(typeof f == "number"), n(f < 67108864), f < 0 ? this.isubn(-f) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) <= f ? (this.words[0] = f - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(f), this.negative = 1, this) : this._iaddn(f);
    }, s.prototype._iaddn = function(f) {
      this.words[0] += f;
      for (var g = 0; g < this.length && this.words[g] >= 67108864; g++)
        this.words[g] -= 67108864, g === this.length - 1 ? this.words[g + 1] = 1 : this.words[g + 1]++;
      return this.length = Math.max(this.length, g + 1), this;
    }, s.prototype.isubn = function(f) {
      if (n(typeof f == "number"), n(f < 67108864), f < 0) return this.iaddn(-f);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(f), this.negative = 1, this;
      if (this.words[0] -= f, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var g = 0; g < this.length && this.words[g] < 0; g++)
          this.words[g] += 67108864, this.words[g + 1] -= 1;
      return this._strip();
    }, s.prototype.addn = function(f) {
      return this.clone().iaddn(f);
    }, s.prototype.subn = function(f) {
      return this.clone().isubn(f);
    }, s.prototype.iabs = function() {
      return this.negative = 0, this;
    }, s.prototype.abs = function() {
      return this.clone().iabs();
    }, s.prototype._ishlnsubmul = function(f, g, b) {
      var x = f.length + b, _;
      this._expand(x);
      var E, v = 0;
      for (_ = 0; _ < f.length; _++) {
        E = (this.words[_ + b] | 0) + v;
        var P = (f.words[_] | 0) * g;
        E -= P & 67108863, v = (E >> 26) - (P / 67108864 | 0), this.words[_ + b] = E & 67108863;
      }
      for (; _ < this.length - b; _++)
        E = (this.words[_ + b] | 0) + v, v = E >> 26, this.words[_ + b] = E & 67108863;
      if (v === 0) return this._strip();
      for (n(v === -1), v = 0, _ = 0; _ < this.length; _++)
        E = -(this.words[_] | 0) + v, v = E >> 26, this.words[_] = E & 67108863;
      return this.negative = 1, this._strip();
    }, s.prototype._wordDiv = function(f, g) {
      var b = this.length - f.length, x = this.clone(), _ = f, E = _.words[_.length - 1] | 0, v = this._countBits(E);
      b = 26 - v, b !== 0 && (_ = _.ushln(b), x.iushln(b), E = _.words[_.length - 1] | 0);
      var P = x.length - _.length, I;
      if (g !== "mod") {
        I = new s(null), I.length = P + 1, I.words = new Array(I.length);
        for (var F = 0; F < I.length; F++)
          I.words[F] = 0;
      }
      var ce = x.clone()._ishlnsubmul(_, 1, P);
      ce.negative === 0 && (x = ce, I && (I.words[P] = 1));
      for (var D = P - 1; D >= 0; D--) {
        var oe = (x.words[_.length + D] | 0) * 67108864 + (x.words[_.length + D - 1] | 0);
        for (oe = Math.min(oe / E | 0, 67108863), x._ishlnsubmul(_, oe, D); x.negative !== 0; )
          oe--, x.negative = 0, x._ishlnsubmul(_, 1, D), x.isZero() || (x.negative ^= 1);
        I && (I.words[D] = oe);
      }
      return I && I._strip(), x._strip(), g !== "div" && b !== 0 && x.iushrn(b), {
        div: I || null,
        mod: x
      };
    }, s.prototype.divmod = function(f, g, b) {
      if (n(!f.isZero()), this.isZero())
        return {
          div: new s(0),
          mod: new s(0)
        };
      var x, _, E;
      return this.negative !== 0 && f.negative === 0 ? (E = this.neg().divmod(f, g), g !== "mod" && (x = E.div.neg()), g !== "div" && (_ = E.mod.neg(), b && _.negative !== 0 && _.iadd(f)), {
        div: x,
        mod: _
      }) : this.negative === 0 && f.negative !== 0 ? (E = this.divmod(f.neg(), g), g !== "mod" && (x = E.div.neg()), {
        div: x,
        mod: E.mod
      }) : this.negative & f.negative ? (E = this.neg().divmod(f.neg(), g), g !== "div" && (_ = E.mod.neg(), b && _.negative !== 0 && _.isub(f)), {
        div: E.div,
        mod: _
      }) : f.length > this.length || this.cmp(f) < 0 ? {
        div: new s(0),
        mod: this
      } : f.length === 1 ? g === "div" ? {
        div: this.divn(f.words[0]),
        mod: null
      } : g === "mod" ? {
        div: null,
        mod: new s(this.modrn(f.words[0]))
      } : {
        div: this.divn(f.words[0]),
        mod: new s(this.modrn(f.words[0]))
      } : this._wordDiv(f, g);
    }, s.prototype.div = function(f) {
      return this.divmod(f, "div", !1).div;
    }, s.prototype.mod = function(f) {
      return this.divmod(f, "mod", !1).mod;
    }, s.prototype.umod = function(f) {
      return this.divmod(f, "mod", !0).mod;
    }, s.prototype.divRound = function(f) {
      var g = this.divmod(f);
      if (g.mod.isZero()) return g.div;
      var b = g.div.negative !== 0 ? g.mod.isub(f) : g.mod, x = f.ushrn(1), _ = f.andln(1), E = b.cmp(x);
      return E < 0 || _ === 1 && E === 0 ? g.div : g.div.negative !== 0 ? g.div.isubn(1) : g.div.iaddn(1);
    }, s.prototype.modrn = function(f) {
      var g = f < 0;
      g && (f = -f), n(f <= 67108863);
      for (var b = (1 << 26) % f, x = 0, _ = this.length - 1; _ >= 0; _--)
        x = (b * x + (this.words[_] | 0)) % f;
      return g ? -x : x;
    }, s.prototype.modn = function(f) {
      return this.modrn(f);
    }, s.prototype.idivn = function(f) {
      var g = f < 0;
      g && (f = -f), n(f <= 67108863);
      for (var b = 0, x = this.length - 1; x >= 0; x--) {
        var _ = (this.words[x] | 0) + b * 67108864;
        this.words[x] = _ / f | 0, b = _ % f;
      }
      return this._strip(), g ? this.ineg() : this;
    }, s.prototype.divn = function(f) {
      return this.clone().idivn(f);
    }, s.prototype.egcd = function(f) {
      n(f.negative === 0), n(!f.isZero());
      var g = this, b = f.clone();
      g.negative !== 0 ? g = g.umod(f) : g = g.clone();
      for (var x = new s(1), _ = new s(0), E = new s(0), v = new s(1), P = 0; g.isEven() && b.isEven(); )
        g.iushrn(1), b.iushrn(1), ++P;
      for (var I = b.clone(), F = g.clone(); !g.isZero(); ) {
        for (var ce = 0, D = 1; !(g.words[0] & D) && ce < 26; ++ce, D <<= 1) ;
        if (ce > 0)
          for (g.iushrn(ce); ce-- > 0; )
            (x.isOdd() || _.isOdd()) && (x.iadd(I), _.isub(F)), x.iushrn(1), _.iushrn(1);
        for (var oe = 0, Z = 1; !(b.words[0] & Z) && oe < 26; ++oe, Z <<= 1) ;
        if (oe > 0)
          for (b.iushrn(oe); oe-- > 0; )
            (E.isOdd() || v.isOdd()) && (E.iadd(I), v.isub(F)), E.iushrn(1), v.iushrn(1);
        g.cmp(b) >= 0 ? (g.isub(b), x.isub(E), _.isub(v)) : (b.isub(g), E.isub(x), v.isub(_));
      }
      return {
        a: E,
        b: v,
        gcd: b.iushln(P)
      };
    }, s.prototype._invmp = function(f) {
      n(f.negative === 0), n(!f.isZero());
      var g = this, b = f.clone();
      g.negative !== 0 ? g = g.umod(f) : g = g.clone();
      for (var x = new s(1), _ = new s(0), E = b.clone(); g.cmpn(1) > 0 && b.cmpn(1) > 0; ) {
        for (var v = 0, P = 1; !(g.words[0] & P) && v < 26; ++v, P <<= 1) ;
        if (v > 0)
          for (g.iushrn(v); v-- > 0; )
            x.isOdd() && x.iadd(E), x.iushrn(1);
        for (var I = 0, F = 1; !(b.words[0] & F) && I < 26; ++I, F <<= 1) ;
        if (I > 0)
          for (b.iushrn(I); I-- > 0; )
            _.isOdd() && _.iadd(E), _.iushrn(1);
        g.cmp(b) >= 0 ? (g.isub(b), x.isub(_)) : (b.isub(g), _.isub(x));
      }
      var ce;
      return g.cmpn(1) === 0 ? ce = x : ce = _, ce.cmpn(0) < 0 && ce.iadd(f), ce;
    }, s.prototype.gcd = function(f) {
      if (this.isZero()) return f.abs();
      if (f.isZero()) return this.abs();
      var g = this.clone(), b = f.clone();
      g.negative = 0, b.negative = 0;
      for (var x = 0; g.isEven() && b.isEven(); x++)
        g.iushrn(1), b.iushrn(1);
      do {
        for (; g.isEven(); )
          g.iushrn(1);
        for (; b.isEven(); )
          b.iushrn(1);
        var _ = g.cmp(b);
        if (_ < 0) {
          var E = g;
          g = b, b = E;
        } else if (_ === 0 || b.cmpn(1) === 0)
          break;
        g.isub(b);
      } while (!0);
      return b.iushln(x);
    }, s.prototype.invm = function(f) {
      return this.egcd(f).a.umod(f);
    }, s.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, s.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, s.prototype.andln = function(f) {
      return this.words[0] & f;
    }, s.prototype.bincn = function(f) {
      n(typeof f == "number");
      var g = f % 26, b = (f - g) / 26, x = 1 << g;
      if (this.length <= b)
        return this._expand(b + 1), this.words[b] |= x, this;
      for (var _ = x, E = b; _ !== 0 && E < this.length; E++) {
        var v = this.words[E] | 0;
        v += _, _ = v >>> 26, v &= 67108863, this.words[E] = v;
      }
      return _ !== 0 && (this.words[E] = _, this.length++), this;
    }, s.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, s.prototype.cmpn = function(f) {
      var g = f < 0;
      if (this.negative !== 0 && !g) return -1;
      if (this.negative === 0 && g) return 1;
      this._strip();
      var b;
      if (this.length > 1)
        b = 1;
      else {
        g && (f = -f), n(f <= 67108863, "Number is too big");
        var x = this.words[0] | 0;
        b = x === f ? 0 : x < f ? -1 : 1;
      }
      return this.negative !== 0 ? -b | 0 : b;
    }, s.prototype.cmp = function(f) {
      if (this.negative !== 0 && f.negative === 0) return -1;
      if (this.negative === 0 && f.negative !== 0) return 1;
      var g = this.ucmp(f);
      return this.negative !== 0 ? -g | 0 : g;
    }, s.prototype.ucmp = function(f) {
      if (this.length > f.length) return 1;
      if (this.length < f.length) return -1;
      for (var g = 0, b = this.length - 1; b >= 0; b--) {
        var x = this.words[b] | 0, _ = f.words[b] | 0;
        if (x !== _) {
          x < _ ? g = -1 : x > _ && (g = 1);
          break;
        }
      }
      return g;
    }, s.prototype.gtn = function(f) {
      return this.cmpn(f) === 1;
    }, s.prototype.gt = function(f) {
      return this.cmp(f) === 1;
    }, s.prototype.gten = function(f) {
      return this.cmpn(f) >= 0;
    }, s.prototype.gte = function(f) {
      return this.cmp(f) >= 0;
    }, s.prototype.ltn = function(f) {
      return this.cmpn(f) === -1;
    }, s.prototype.lt = function(f) {
      return this.cmp(f) === -1;
    }, s.prototype.lten = function(f) {
      return this.cmpn(f) <= 0;
    }, s.prototype.lte = function(f) {
      return this.cmp(f) <= 0;
    }, s.prototype.eqn = function(f) {
      return this.cmpn(f) === 0;
    }, s.prototype.eq = function(f) {
      return this.cmp(f) === 0;
    }, s.red = function(f) {
      return new Y(f);
    }, s.prototype.toRed = function(f) {
      return n(!this.red, "Already a number in reduction context"), n(this.negative === 0, "red works only with positives"), f.convertTo(this)._forceRed(f);
    }, s.prototype.fromRed = function() {
      return n(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, s.prototype._forceRed = function(f) {
      return this.red = f, this;
    }, s.prototype.forceRed = function(f) {
      return n(!this.red, "Already a number in reduction context"), this._forceRed(f);
    }, s.prototype.redAdd = function(f) {
      return n(this.red, "redAdd works only with red numbers"), this.red.add(this, f);
    }, s.prototype.redIAdd = function(f) {
      return n(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, f);
    }, s.prototype.redSub = function(f) {
      return n(this.red, "redSub works only with red numbers"), this.red.sub(this, f);
    }, s.prototype.redISub = function(f) {
      return n(this.red, "redISub works only with red numbers"), this.red.isub(this, f);
    }, s.prototype.redShl = function(f) {
      return n(this.red, "redShl works only with red numbers"), this.red.shl(this, f);
    }, s.prototype.redMul = function(f) {
      return n(this.red, "redMul works only with red numbers"), this.red._verify2(this, f), this.red.mul(this, f);
    }, s.prototype.redIMul = function(f) {
      return n(this.red, "redMul works only with red numbers"), this.red._verify2(this, f), this.red.imul(this, f);
    }, s.prototype.redSqr = function() {
      return n(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, s.prototype.redISqr = function() {
      return n(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, s.prototype.redSqrt = function() {
      return n(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, s.prototype.redInvm = function() {
      return n(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, s.prototype.redNeg = function() {
      return n(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, s.prototype.redPow = function(f) {
      return n(this.red && !f.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, f);
    };
    var V = {
      k256: null,
      p224: null,
      p192: null,
      p25519: null
    };
    function te(m, f) {
      this.name = m, this.p = new s(f, 16), this.n = this.p.bitLength(), this.k = new s(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    te.prototype._tmp = function() {
      var f = new s(null);
      return f.words = new Array(Math.ceil(this.n / 13)), f;
    }, te.prototype.ireduce = function(f) {
      var g = f, b;
      do
        this.split(g, this.tmp), g = this.imulK(g), g = g.iadd(this.tmp), b = g.bitLength();
      while (b > this.n);
      var x = b < this.n ? -1 : g.ucmp(this.p);
      return x === 0 ? (g.words[0] = 0, g.length = 1) : x > 0 ? g.isub(this.p) : g.strip !== void 0 ? g.strip() : g._strip(), g;
    }, te.prototype.split = function(f, g) {
      f.iushrn(this.n, 0, g);
    }, te.prototype.imulK = function(f) {
      return f.imul(this.k);
    };
    function R() {
      te.call(
        this,
        "k256",
        "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f"
      );
    }
    i(R, te), R.prototype.split = function(f, g) {
      for (var b = 4194303, x = Math.min(f.length, 9), _ = 0; _ < x; _++)
        g.words[_] = f.words[_];
      if (g.length = x, f.length <= 9) {
        f.words[0] = 0, f.length = 1;
        return;
      }
      var E = f.words[9];
      for (g.words[g.length++] = E & b, _ = 10; _ < f.length; _++) {
        var v = f.words[_] | 0;
        f.words[_ - 10] = (v & b) << 4 | E >>> 22, E = v;
      }
      E >>>= 22, f.words[_ - 10] = E, E === 0 && f.length > 10 ? f.length -= 10 : f.length -= 9;
    }, R.prototype.imulK = function(f) {
      f.words[f.length] = 0, f.words[f.length + 1] = 0, f.length += 2;
      for (var g = 0, b = 0; b < f.length; b++) {
        var x = f.words[b] | 0;
        g += x * 977, f.words[b] = g & 67108863, g = x * 64 + (g / 67108864 | 0);
      }
      return f.words[f.length - 1] === 0 && (f.length--, f.words[f.length - 1] === 0 && f.length--), f;
    };
    function K() {
      te.call(
        this,
        "p224",
        "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001"
      );
    }
    i(K, te);
    function ge() {
      te.call(
        this,
        "p192",
        "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff"
      );
    }
    i(ge, te);
    function Ee() {
      te.call(
        this,
        "25519",
        "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed"
      );
    }
    i(Ee, te), Ee.prototype.imulK = function(f) {
      for (var g = 0, b = 0; b < f.length; b++) {
        var x = (f.words[b] | 0) * 19 + g, _ = x & 67108863;
        x >>>= 26, f.words[b] = _, g = x;
      }
      return g !== 0 && (f.words[f.length++] = g), f;
    }, s._prime = function(f) {
      if (V[f]) return V[f];
      var g;
      if (f === "k256")
        g = new R();
      else if (f === "p224")
        g = new K();
      else if (f === "p192")
        g = new ge();
      else if (f === "p25519")
        g = new Ee();
      else
        throw new Error("Unknown prime " + f);
      return V[f] = g, g;
    };
    function Y(m) {
      if (typeof m == "string") {
        var f = s._prime(m);
        this.m = f.p, this.prime = f;
      } else
        n(m.gtn(1), "modulus must be greater than 1"), this.m = m, this.prime = null;
    }
    Y.prototype._verify1 = function(f) {
      n(f.negative === 0, "red works only with positives"), n(f.red, "red works only with red numbers");
    }, Y.prototype._verify2 = function(f, g) {
      n((f.negative | g.negative) === 0, "red works only with positives"), n(
        f.red && f.red === g.red,
        "red works only with red numbers"
      );
    }, Y.prototype.imod = function(f) {
      return this.prime ? this.prime.ireduce(f)._forceRed(this) : (d(f, f.umod(this.m)._forceRed(this)), f);
    }, Y.prototype.neg = function(f) {
      return f.isZero() ? f.clone() : this.m.sub(f)._forceRed(this);
    }, Y.prototype.add = function(f, g) {
      this._verify2(f, g);
      var b = f.add(g);
      return b.cmp(this.m) >= 0 && b.isub(this.m), b._forceRed(this);
    }, Y.prototype.iadd = function(f, g) {
      this._verify2(f, g);
      var b = f.iadd(g);
      return b.cmp(this.m) >= 0 && b.isub(this.m), b;
    }, Y.prototype.sub = function(f, g) {
      this._verify2(f, g);
      var b = f.sub(g);
      return b.cmpn(0) < 0 && b.iadd(this.m), b._forceRed(this);
    }, Y.prototype.isub = function(f, g) {
      this._verify2(f, g);
      var b = f.isub(g);
      return b.cmpn(0) < 0 && b.iadd(this.m), b;
    }, Y.prototype.shl = function(f, g) {
      return this._verify1(f), this.imod(f.ushln(g));
    }, Y.prototype.imul = function(f, g) {
      return this._verify2(f, g), this.imod(f.imul(g));
    }, Y.prototype.mul = function(f, g) {
      return this._verify2(f, g), this.imod(f.mul(g));
    }, Y.prototype.isqr = function(f) {
      return this.imul(f, f.clone());
    }, Y.prototype.sqr = function(f) {
      return this.mul(f, f);
    }, Y.prototype.sqrt = function(f) {
      if (f.isZero()) return f.clone();
      var g = this.m.andln(3);
      if (n(g % 2 === 1), g === 3) {
        var b = this.m.add(new s(1)).iushrn(2);
        return this.pow(f, b);
      }
      for (var x = this.m.subn(1), _ = 0; !x.isZero() && x.andln(1) === 0; )
        _++, x.iushrn(1);
      n(!x.isZero());
      var E = new s(1).toRed(this), v = E.redNeg(), P = this.m.subn(1).iushrn(1), I = this.m.bitLength();
      for (I = new s(2 * I * I).toRed(this); this.pow(I, P).cmp(v) !== 0; )
        I.redIAdd(v);
      for (var F = this.pow(I, x), ce = this.pow(f, x.addn(1).iushrn(1)), D = this.pow(f, x), oe = _; D.cmp(E) !== 0; ) {
        for (var Z = D, J = 0; Z.cmp(E) !== 0; J++)
          Z = Z.redSqr();
        n(J < oe);
        var Q = this.pow(F, new s(1).iushln(oe - J - 1));
        ce = ce.redMul(Q), F = Q.redSqr(), D = D.redMul(F), oe = J;
      }
      return ce;
    }, Y.prototype.invm = function(f) {
      var g = f._invmp(this.m);
      return g.negative !== 0 ? (g.negative = 0, this.imod(g).redNeg()) : this.imod(g);
    }, Y.prototype.pow = function(f, g) {
      if (g.isZero()) return new s(1).toRed(this);
      if (g.cmpn(1) === 0) return f.clone();
      var b = 4, x = new Array(1 << b);
      x[0] = new s(1).toRed(this), x[1] = f;
      for (var _ = 2; _ < x.length; _++)
        x[_] = this.mul(x[_ - 1], f);
      var E = x[0], v = 0, P = 0, I = g.bitLength() % 26;
      for (I === 0 && (I = 26), _ = g.length - 1; _ >= 0; _--) {
        for (var F = g.words[_], ce = I - 1; ce >= 0; ce--) {
          var D = F >> ce & 1;
          if (E !== x[0] && (E = this.sqr(E)), D === 0 && v === 0) {
            P = 0;
            continue;
          }
          v <<= 1, v |= D, P++, !(P !== b && (_ !== 0 || ce !== 0)) && (E = this.mul(E, x[v]), P = 0, v = 0);
        }
        I = 26;
      }
      return E;
    }, Y.prototype.convertTo = function(f) {
      var g = f.umod(this.m);
      return g === f ? g.clone() : g;
    }, Y.prototype.convertFrom = function(f) {
      var g = f.clone();
      return g.red = null, g;
    }, s.mont = function(f) {
      return new S(f);
    };
    function S(m) {
      Y.call(this, m), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new s(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    i(S, Y), S.prototype.convertTo = function(f) {
      return this.imod(f.ushln(this.shift));
    }, S.prototype.convertFrom = function(f) {
      var g = this.imod(f.mul(this.rinv));
      return g.red = null, g;
    }, S.prototype.imul = function(f, g) {
      if (f.isZero() || g.isZero())
        return f.words[0] = 0, f.length = 1, f;
      var b = f.imul(g), x = b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), _ = b.isub(x).iushrn(this.shift), E = _;
      return _.cmp(this.m) >= 0 ? E = _.isub(this.m) : _.cmpn(0) < 0 && (E = _.iadd(this.m)), E._forceRed(this);
    }, S.prototype.mul = function(f, g) {
      if (f.isZero() || g.isZero()) return new s(0)._forceRed(this);
      var b = f.mul(g), x = b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), _ = b.isub(x).iushrn(this.shift), E = _;
      return _.cmp(this.m) >= 0 ? E = _.isub(this.m) : _.cmpn(0) < 0 && (E = _.iadd(this.m)), E._forceRed(this);
    }, S.prototype.invm = function(f) {
      var g = this.imod(f._invmp(this.m).mul(this.r2));
      return g._forceRed(this);
    };
  })(t, gn);
})(zv);
var DF = zv.exports;
const sr = /* @__PURE__ */ ts(DF);
var OF = sr.BN;
function NF(t) {
  return new OF(t, 36).toString(16);
}
const LF = "strings/5.7.0", kF = new Yr(LF);
var r0;
(function(t) {
  t.current = "", t.NFC = "NFC", t.NFD = "NFD", t.NFKC = "NFKC", t.NFKD = "NFKD";
})(r0 || (r0 = {}));
var bx;
(function(t) {
  t.UNEXPECTED_CONTINUE = "unexpected continuation byte", t.BAD_PREFIX = "bad codepoint prefix", t.OVERRUN = "string overrun", t.MISSING_CONTINUE = "missing continuation byte", t.OUT_OF_RANGE = "out of UTF-8 range", t.UTF16_SURROGATE = "UTF-16 surrogate", t.OVERLONG = "overlong representation";
})(bx || (bx = {}));
function em(t, e = r0.current) {
  e != r0.current && (kF.checkNormalize(), t = t.normalize(e));
  let r = [];
  for (let n = 0; n < t.length; n++) {
    const i = t.charCodeAt(n);
    if (i < 128)
      r.push(i);
    else if (i < 2048)
      r.push(i >> 6 | 192), r.push(i & 63 | 128);
    else if ((i & 64512) == 55296) {
      n++;
      const s = t.charCodeAt(n);
      if (n >= t.length || (s & 64512) !== 56320)
        throw new Error("invalid utf-8 string");
      const o = 65536 + ((i & 1023) << 10) + (s & 1023);
      r.push(o >> 18 | 240), r.push(o >> 12 & 63 | 128), r.push(o >> 6 & 63 | 128), r.push(o & 63 | 128);
    } else
      r.push(i >> 12 | 224), r.push(i >> 6 & 63 | 128), r.push(i & 63 | 128);
  }
  return wn(r);
}
const $F = `Ethereum Signed Message:
`;
function V4(t) {
  return typeof t == "string" && (t = em(t)), qv(CF([
    em($F),
    em(String(t.length)),
    t
  ]));
}
const BF = "address/5.7.0", $f = new Yr(BF);
function yx(t) {
  zs(t, 20) || $f.throwArgumentError("invalid address", "address", t), t = t.toLowerCase();
  const e = t.substring(2).split(""), r = new Uint8Array(40);
  for (let i = 0; i < 40; i++)
    r[i] = e[i].charCodeAt(0);
  const n = wn(qv(r));
  for (let i = 0; i < 40; i += 2)
    n[i >> 1] >> 4 >= 8 && (e[i] = e[i].toUpperCase()), (n[i >> 1] & 15) >= 8 && (e[i + 1] = e[i + 1].toUpperCase());
  return "0x" + e.join("");
}
const FF = 9007199254740991;
function jF(t) {
  return Math.log10 ? Math.log10(t) : Math.log(t) / Math.LN10;
}
const Wv = {};
for (let t = 0; t < 10; t++)
  Wv[String(t)] = String(t);
for (let t = 0; t < 26; t++)
  Wv[String.fromCharCode(65 + t)] = String(10 + t);
const wx = Math.floor(jF(FF));
function UF(t) {
  t = t.toUpperCase(), t = t.substring(4) + t.substring(0, 2) + "00";
  let e = t.split("").map((n) => Wv[n]).join("");
  for (; e.length >= wx; ) {
    let n = e.substring(0, wx);
    e = parseInt(n, 10) % 97 + e.substring(n.length);
  }
  let r = String(98 - parseInt(e, 10) % 97);
  for (; r.length < 2; )
    r = "0" + r;
  return r;
}
function qF(t) {
  let e = null;
  if (typeof t != "string" && $f.throwArgumentError("invalid address", "address", t), t.match(/^(0x)?[0-9a-fA-F]{40}$/))
    t.substring(0, 2) !== "0x" && (t = "0x" + t), e = yx(t), t.match(/([A-F].*[a-f])|([a-f].*[A-F])/) && e !== t && $f.throwArgumentError("bad address checksum", "address", t);
  else if (t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)) {
    for (t.substring(2, 4) !== UF(t) && $f.throwArgumentError("bad icap checksum", "address", t), e = NF(t.substring(4)); e.length < 40; )
      e = "0" + e;
    e = yx("0x" + e);
  } else
    $f.throwArgumentError("invalid address", "address", t);
  return e;
}
function _f(t, e, r) {
  Object.defineProperty(t, e, {
    enumerable: !0,
    value: r,
    writable: !1
  });
}
var Vl = {}, xr = {}, wc = G4;
function G4(t, e) {
  if (!t)
    throw new Error(e || "Assertion failed");
}
G4.equal = function(e, r, n) {
  if (e != r)
    throw new Error(n || "Assertion failed: " + e + " != " + r);
};
var w1 = { exports: {} };
typeof Object.create == "function" ? w1.exports = function(e, r) {
  r && (e.super_ = r, e.prototype = Object.create(r.prototype, {
    constructor: {
      value: e,
      enumerable: !1,
      writable: !0,
      configurable: !0
    }
  }));
} : w1.exports = function(e, r) {
  if (r) {
    e.super_ = r;
    var n = function() {
    };
    n.prototype = r.prototype, e.prototype = new n(), e.prototype.constructor = e;
  }
};
var z0 = w1.exports, zF = wc, WF = z0;
xr.inherits = WF;
function HF(t, e) {
  return (t.charCodeAt(e) & 64512) !== 55296 || e < 0 || e + 1 >= t.length ? !1 : (t.charCodeAt(e + 1) & 64512) === 56320;
}
function KF(t, e) {
  if (Array.isArray(t))
    return t.slice();
  if (!t)
    return [];
  var r = [];
  if (typeof t == "string")
    if (e) {
      if (e === "hex")
        for (t = t.replace(/[^a-z0-9]+/ig, ""), t.length % 2 !== 0 && (t = "0" + t), i = 0; i < t.length; i += 2)
          r.push(parseInt(t[i] + t[i + 1], 16));
    } else for (var n = 0, i = 0; i < t.length; i++) {
      var s = t.charCodeAt(i);
      s < 128 ? r[n++] = s : s < 2048 ? (r[n++] = s >> 6 | 192, r[n++] = s & 63 | 128) : HF(t, i) ? (s = 65536 + ((s & 1023) << 10) + (t.charCodeAt(++i) & 1023), r[n++] = s >> 18 | 240, r[n++] = s >> 12 & 63 | 128, r[n++] = s >> 6 & 63 | 128, r[n++] = s & 63 | 128) : (r[n++] = s >> 12 | 224, r[n++] = s >> 6 & 63 | 128, r[n++] = s & 63 | 128);
    }
  else
    for (i = 0; i < t.length; i++)
      r[i] = t[i] | 0;
  return r;
}
xr.toArray = KF;
function VF(t) {
  for (var e = "", r = 0; r < t.length; r++)
    e += J4(t[r].toString(16));
  return e;
}
xr.toHex = VF;
function Y4(t) {
  var e = t >>> 24 | t >>> 8 & 65280 | t << 8 & 16711680 | (t & 255) << 24;
  return e >>> 0;
}
xr.htonl = Y4;
function GF(t, e) {
  for (var r = "", n = 0; n < t.length; n++) {
    var i = t[n];
    e === "little" && (i = Y4(i)), r += X4(i.toString(16));
  }
  return r;
}
xr.toHex32 = GF;
function J4(t) {
  return t.length === 1 ? "0" + t : t;
}
xr.zero2 = J4;
function X4(t) {
  return t.length === 7 ? "0" + t : t.length === 6 ? "00" + t : t.length === 5 ? "000" + t : t.length === 4 ? "0000" + t : t.length === 3 ? "00000" + t : t.length === 2 ? "000000" + t : t.length === 1 ? "0000000" + t : t;
}
xr.zero8 = X4;
function YF(t, e, r, n) {
  var i = r - e;
  zF(i % 4 === 0);
  for (var s = new Array(i / 4), o = 0, a = e; o < s.length; o++, a += 4) {
    var u;
    n === "big" ? u = t[a] << 24 | t[a + 1] << 16 | t[a + 2] << 8 | t[a + 3] : u = t[a + 3] << 24 | t[a + 2] << 16 | t[a + 1] << 8 | t[a], s[o] = u >>> 0;
  }
  return s;
}
xr.join32 = YF;
function JF(t, e) {
  for (var r = new Array(t.length * 4), n = 0, i = 0; n < t.length; n++, i += 4) {
    var s = t[n];
    e === "big" ? (r[i] = s >>> 24, r[i + 1] = s >>> 16 & 255, r[i + 2] = s >>> 8 & 255, r[i + 3] = s & 255) : (r[i + 3] = s >>> 24, r[i + 2] = s >>> 16 & 255, r[i + 1] = s >>> 8 & 255, r[i] = s & 255);
  }
  return r;
}
xr.split32 = JF;
function XF(t, e) {
  return t >>> e | t << 32 - e;
}
xr.rotr32 = XF;
function ZF(t, e) {
  return t << e | t >>> 32 - e;
}
xr.rotl32 = ZF;
function QF(t, e) {
  return t + e >>> 0;
}
xr.sum32 = QF;
function ej(t, e, r) {
  return t + e + r >>> 0;
}
xr.sum32_3 = ej;
function tj(t, e, r, n) {
  return t + e + r + n >>> 0;
}
xr.sum32_4 = tj;
function rj(t, e, r, n, i) {
  return t + e + r + n + i >>> 0;
}
xr.sum32_5 = rj;
function nj(t, e, r, n) {
  var i = t[e], s = t[e + 1], o = n + s >>> 0, a = (o < n ? 1 : 0) + r + i;
  t[e] = a >>> 0, t[e + 1] = o;
}
xr.sum64 = nj;
function ij(t, e, r, n) {
  var i = e + n >>> 0, s = (i < e ? 1 : 0) + t + r;
  return s >>> 0;
}
xr.sum64_hi = ij;
function sj(t, e, r, n) {
  var i = e + n;
  return i >>> 0;
}
xr.sum64_lo = sj;
function oj(t, e, r, n, i, s, o, a) {
  var u = 0, l = e;
  l = l + n >>> 0, u += l < e ? 1 : 0, l = l + s >>> 0, u += l < s ? 1 : 0, l = l + a >>> 0, u += l < a ? 1 : 0;
  var d = t + r + i + o + u;
  return d >>> 0;
}
xr.sum64_4_hi = oj;
function aj(t, e, r, n, i, s, o, a) {
  var u = e + n + s + a;
  return u >>> 0;
}
xr.sum64_4_lo = aj;
function cj(t, e, r, n, i, s, o, a, u, l) {
  var d = 0, p = e;
  p = p + n >>> 0, d += p < e ? 1 : 0, p = p + s >>> 0, d += p < s ? 1 : 0, p = p + a >>> 0, d += p < a ? 1 : 0, p = p + l >>> 0, d += p < l ? 1 : 0;
  var w = t + r + i + o + u + d;
  return w >>> 0;
}
xr.sum64_5_hi = cj;
function uj(t, e, r, n, i, s, o, a, u, l) {
  var d = e + n + s + a + l;
  return d >>> 0;
}
xr.sum64_5_lo = uj;
function fj(t, e, r) {
  var n = e << 32 - r | t >>> r;
  return n >>> 0;
}
xr.rotr64_hi = fj;
function lj(t, e, r) {
  var n = t << 32 - r | e >>> r;
  return n >>> 0;
}
xr.rotr64_lo = lj;
function hj(t, e, r) {
  return t >>> r;
}
xr.shr64_hi = hj;
function dj(t, e, r) {
  var n = t << 32 - r | e >>> r;
  return n >>> 0;
}
xr.shr64_lo = dj;
var Lu = {}, xx = xr, pj = wc;
function W0() {
  this.pending = null, this.pendingTotal = 0, this.blockSize = this.constructor.blockSize, this.outSize = this.constructor.outSize, this.hmacStrength = this.constructor.hmacStrength, this.padLength = this.constructor.padLength / 8, this.endian = "big", this._delta8 = this.blockSize / 8, this._delta32 = this.blockSize / 32;
}
Lu.BlockHash = W0;
W0.prototype.update = function(e, r) {
  if (e = xx.toArray(e, r), this.pending ? this.pending = this.pending.concat(e) : this.pending = e, this.pendingTotal += e.length, this.pending.length >= this._delta8) {
    e = this.pending;
    var n = e.length % this._delta8;
    this.pending = e.slice(e.length - n, e.length), this.pending.length === 0 && (this.pending = null), e = xx.join32(e, 0, e.length - n, this.endian);
    for (var i = 0; i < e.length; i += this._delta32)
      this._update(e, i, i + this._delta32);
  }
  return this;
};
W0.prototype.digest = function(e) {
  return this.update(this._pad()), pj(this.pending === null), this._digest(e);
};
W0.prototype._pad = function() {
  var e = this.pendingTotal, r = this._delta8, n = r - (e + this.padLength) % r, i = new Array(n + this.padLength);
  i[0] = 128;
  for (var s = 1; s < n; s++)
    i[s] = 0;
  if (e <<= 3, this.endian === "big") {
    for (var o = 8; o < this.padLength; o++)
      i[s++] = 0;
    i[s++] = 0, i[s++] = 0, i[s++] = 0, i[s++] = 0, i[s++] = e >>> 24 & 255, i[s++] = e >>> 16 & 255, i[s++] = e >>> 8 & 255, i[s++] = e & 255;
  } else
    for (i[s++] = e & 255, i[s++] = e >>> 8 & 255, i[s++] = e >>> 16 & 255, i[s++] = e >>> 24 & 255, i[s++] = 0, i[s++] = 0, i[s++] = 0, i[s++] = 0, o = 8; o < this.padLength; o++)
      i[s++] = 0;
  return i;
};
var ku = {}, ro = {}, gj = xr, Ws = gj.rotr32;
function mj(t, e, r, n) {
  if (t === 0)
    return Z4(e, r, n);
  if (t === 1 || t === 3)
    return e8(e, r, n);
  if (t === 2)
    return Q4(e, r, n);
}
ro.ft_1 = mj;
function Z4(t, e, r) {
  return t & e ^ ~t & r;
}
ro.ch32 = Z4;
function Q4(t, e, r) {
  return t & e ^ t & r ^ e & r;
}
ro.maj32 = Q4;
function e8(t, e, r) {
  return t ^ e ^ r;
}
ro.p32 = e8;
function vj(t) {
  return Ws(t, 2) ^ Ws(t, 13) ^ Ws(t, 22);
}
ro.s0_256 = vj;
function bj(t) {
  return Ws(t, 6) ^ Ws(t, 11) ^ Ws(t, 25);
}
ro.s1_256 = bj;
function yj(t) {
  return Ws(t, 7) ^ Ws(t, 18) ^ t >>> 3;
}
ro.g0_256 = yj;
function wj(t) {
  return Ws(t, 17) ^ Ws(t, 19) ^ t >>> 10;
}
ro.g1_256 = wj;
var _u = xr, xj = Lu, _j = ro, tm = _u.rotl32, Ef = _u.sum32, Ej = _u.sum32_5, Sj = _j.ft_1, t8 = xj.BlockHash, Aj = [
  1518500249,
  1859775393,
  2400959708,
  3395469782
];
function Js() {
  if (!(this instanceof Js))
    return new Js();
  t8.call(this), this.h = [
    1732584193,
    4023233417,
    2562383102,
    271733878,
    3285377520
  ], this.W = new Array(80);
}
_u.inherits(Js, t8);
var Pj = Js;
Js.blockSize = 512;
Js.outSize = 160;
Js.hmacStrength = 80;
Js.padLength = 64;
Js.prototype._update = function(e, r) {
  for (var n = this.W, i = 0; i < 16; i++)
    n[i] = e[r + i];
  for (; i < n.length; i++)
    n[i] = tm(n[i - 3] ^ n[i - 8] ^ n[i - 14] ^ n[i - 16], 1);
  var s = this.h[0], o = this.h[1], a = this.h[2], u = this.h[3], l = this.h[4];
  for (i = 0; i < n.length; i++) {
    var d = ~~(i / 20), p = Ej(tm(s, 5), Sj(d, o, a, u), l, n[i], Aj[d]);
    l = u, u = a, a = tm(o, 30), o = s, s = p;
  }
  this.h[0] = Ef(this.h[0], s), this.h[1] = Ef(this.h[1], o), this.h[2] = Ef(this.h[2], a), this.h[3] = Ef(this.h[3], u), this.h[4] = Ef(this.h[4], l);
};
Js.prototype._digest = function(e) {
  return e === "hex" ? _u.toHex32(this.h, "big") : _u.split32(this.h, "big");
};
var Eu = xr, Mj = Lu, $u = ro, Ij = wc, gs = Eu.sum32, Cj = Eu.sum32_4, Tj = Eu.sum32_5, Rj = $u.ch32, Dj = $u.maj32, Oj = $u.s0_256, Nj = $u.s1_256, Lj = $u.g0_256, kj = $u.g1_256, r8 = Mj.BlockHash, $j = [
  1116352408,
  1899447441,
  3049323471,
  3921009573,
  961987163,
  1508970993,
  2453635748,
  2870763221,
  3624381080,
  310598401,
  607225278,
  1426881987,
  1925078388,
  2162078206,
  2614888103,
  3248222580,
  3835390401,
  4022224774,
  264347078,
  604807628,
  770255983,
  1249150122,
  1555081692,
  1996064986,
  2554220882,
  2821834349,
  2952996808,
  3210313671,
  3336571891,
  3584528711,
  113926993,
  338241895,
  666307205,
  773529912,
  1294757372,
  1396182291,
  1695183700,
  1986661051,
  2177026350,
  2456956037,
  2730485921,
  2820302411,
  3259730800,
  3345764771,
  3516065817,
  3600352804,
  4094571909,
  275423344,
  430227734,
  506948616,
  659060556,
  883997877,
  958139571,
  1322822218,
  1537002063,
  1747873779,
  1955562222,
  2024104815,
  2227730452,
  2361852424,
  2428436474,
  2756734187,
  3204031479,
  3329325298
];
function Xs() {
  if (!(this instanceof Xs))
    return new Xs();
  r8.call(this), this.h = [
    1779033703,
    3144134277,
    1013904242,
    2773480762,
    1359893119,
    2600822924,
    528734635,
    1541459225
  ], this.k = $j, this.W = new Array(64);
}
Eu.inherits(Xs, r8);
var n8 = Xs;
Xs.blockSize = 512;
Xs.outSize = 256;
Xs.hmacStrength = 192;
Xs.padLength = 64;
Xs.prototype._update = function(e, r) {
  for (var n = this.W, i = 0; i < 16; i++)
    n[i] = e[r + i];
  for (; i < n.length; i++)
    n[i] = Cj(kj(n[i - 2]), n[i - 7], Lj(n[i - 15]), n[i - 16]);
  var s = this.h[0], o = this.h[1], a = this.h[2], u = this.h[3], l = this.h[4], d = this.h[5], p = this.h[6], w = this.h[7];
  for (Ij(this.k.length === n.length), i = 0; i < n.length; i++) {
    var A = Tj(w, Nj(l), Rj(l, d, p), this.k[i], n[i]), M = gs(Oj(s), Dj(s, o, a));
    w = p, p = d, d = l, l = gs(u, A), u = a, a = o, o = s, s = gs(A, M);
  }
  this.h[0] = gs(this.h[0], s), this.h[1] = gs(this.h[1], o), this.h[2] = gs(this.h[2], a), this.h[3] = gs(this.h[3], u), this.h[4] = gs(this.h[4], l), this.h[5] = gs(this.h[5], d), this.h[6] = gs(this.h[6], p), this.h[7] = gs(this.h[7], w);
};
Xs.prototype._digest = function(e) {
  return e === "hex" ? Eu.toHex32(this.h, "big") : Eu.split32(this.h, "big");
};
var x1 = xr, i8 = n8;
function Fo() {
  if (!(this instanceof Fo))
    return new Fo();
  i8.call(this), this.h = [
    3238371032,
    914150663,
    812702999,
    4144912697,
    4290775857,
    1750603025,
    1694076839,
    3204075428
  ];
}
x1.inherits(Fo, i8);
var Bj = Fo;
Fo.blockSize = 512;
Fo.outSize = 224;
Fo.hmacStrength = 192;
Fo.padLength = 64;
Fo.prototype._digest = function(e) {
  return e === "hex" ? x1.toHex32(this.h.slice(0, 7), "big") : x1.split32(this.h.slice(0, 7), "big");
};
var _i = xr, Fj = Lu, jj = wc, Hs = _i.rotr64_hi, Ks = _i.rotr64_lo, s8 = _i.shr64_hi, o8 = _i.shr64_lo, ta = _i.sum64, rm = _i.sum64_hi, nm = _i.sum64_lo, Uj = _i.sum64_4_hi, qj = _i.sum64_4_lo, zj = _i.sum64_5_hi, Wj = _i.sum64_5_lo, a8 = Fj.BlockHash, Hj = [
  1116352408,
  3609767458,
  1899447441,
  602891725,
  3049323471,
  3964484399,
  3921009573,
  2173295548,
  961987163,
  4081628472,
  1508970993,
  3053834265,
  2453635748,
  2937671579,
  2870763221,
  3664609560,
  3624381080,
  2734883394,
  310598401,
  1164996542,
  607225278,
  1323610764,
  1426881987,
  3590304994,
  1925078388,
  4068182383,
  2162078206,
  991336113,
  2614888103,
  633803317,
  3248222580,
  3479774868,
  3835390401,
  2666613458,
  4022224774,
  944711139,
  264347078,
  2341262773,
  604807628,
  2007800933,
  770255983,
  1495990901,
  1249150122,
  1856431235,
  1555081692,
  3175218132,
  1996064986,
  2198950837,
  2554220882,
  3999719339,
  2821834349,
  766784016,
  2952996808,
  2566594879,
  3210313671,
  3203337956,
  3336571891,
  1034457026,
  3584528711,
  2466948901,
  113926993,
  3758326383,
  338241895,
  168717936,
  666307205,
  1188179964,
  773529912,
  1546045734,
  1294757372,
  1522805485,
  1396182291,
  2643833823,
  1695183700,
  2343527390,
  1986661051,
  1014477480,
  2177026350,
  1206759142,
  2456956037,
  344077627,
  2730485921,
  1290863460,
  2820302411,
  3158454273,
  3259730800,
  3505952657,
  3345764771,
  106217008,
  3516065817,
  3606008344,
  3600352804,
  1432725776,
  4094571909,
  1467031594,
  275423344,
  851169720,
  430227734,
  3100823752,
  506948616,
  1363258195,
  659060556,
  3750685593,
  883997877,
  3785050280,
  958139571,
  3318307427,
  1322822218,
  3812723403,
  1537002063,
  2003034995,
  1747873779,
  3602036899,
  1955562222,
  1575990012,
  2024104815,
  1125592928,
  2227730452,
  2716904306,
  2361852424,
  442776044,
  2428436474,
  593698344,
  2756734187,
  3733110249,
  3204031479,
  2999351573,
  3329325298,
  3815920427,
  3391569614,
  3928383900,
  3515267271,
  566280711,
  3940187606,
  3454069534,
  4118630271,
  4000239992,
  116418474,
  1914138554,
  174292421,
  2731055270,
  289380356,
  3203993006,
  460393269,
  320620315,
  685471733,
  587496836,
  852142971,
  1086792851,
  1017036298,
  365543100,
  1126000580,
  2618297676,
  1288033470,
  3409855158,
  1501505948,
  4234509866,
  1607167915,
  987167468,
  1816402316,
  1246189591
];
function Ss() {
  if (!(this instanceof Ss))
    return new Ss();
  a8.call(this), this.h = [
    1779033703,
    4089235720,
    3144134277,
    2227873595,
    1013904242,
    4271175723,
    2773480762,
    1595750129,
    1359893119,
    2917565137,
    2600822924,
    725511199,
    528734635,
    4215389547,
    1541459225,
    327033209
  ], this.k = Hj, this.W = new Array(160);
}
_i.inherits(Ss, a8);
var c8 = Ss;
Ss.blockSize = 1024;
Ss.outSize = 512;
Ss.hmacStrength = 192;
Ss.padLength = 128;
Ss.prototype._prepareBlock = function(e, r) {
  for (var n = this.W, i = 0; i < 32; i++)
    n[i] = e[r + i];
  for (; i < n.length; i += 2) {
    var s = rU(n[i - 4], n[i - 3]), o = nU(n[i - 4], n[i - 3]), a = n[i - 14], u = n[i - 13], l = eU(n[i - 30], n[i - 29]), d = tU(n[i - 30], n[i - 29]), p = n[i - 32], w = n[i - 31];
    n[i] = Uj(
      s,
      o,
      a,
      u,
      l,
      d,
      p,
      w
    ), n[i + 1] = qj(
      s,
      o,
      a,
      u,
      l,
      d,
      p,
      w
    );
  }
};
Ss.prototype._update = function(e, r) {
  this._prepareBlock(e, r);
  var n = this.W, i = this.h[0], s = this.h[1], o = this.h[2], a = this.h[3], u = this.h[4], l = this.h[5], d = this.h[6], p = this.h[7], w = this.h[8], A = this.h[9], M = this.h[10], N = this.h[11], L = this.h[12], B = this.h[13], $ = this.h[14], H = this.h[15];
  jj(this.k.length === n.length);
  for (var W = 0; W < n.length; W += 2) {
    var V = $, te = H, R = Zj(w, A), K = Qj(w, A), ge = Kj(w, A, M, N, L), Ee = Vj(w, A, M, N, L, B), Y = this.k[W], S = this.k[W + 1], m = n[W], f = n[W + 1], g = zj(
      V,
      te,
      R,
      K,
      ge,
      Ee,
      Y,
      S,
      m,
      f
    ), b = Wj(
      V,
      te,
      R,
      K,
      ge,
      Ee,
      Y,
      S,
      m,
      f
    );
    V = Jj(i, s), te = Xj(i, s), R = Gj(i, s, o, a, u), K = Yj(i, s, o, a, u, l);
    var x = rm(V, te, R, K), _ = nm(V, te, R, K);
    $ = L, H = B, L = M, B = N, M = w, N = A, w = rm(d, p, g, b), A = nm(p, p, g, b), d = u, p = l, u = o, l = a, o = i, a = s, i = rm(g, b, x, _), s = nm(g, b, x, _);
  }
  ta(this.h, 0, i, s), ta(this.h, 2, o, a), ta(this.h, 4, u, l), ta(this.h, 6, d, p), ta(this.h, 8, w, A), ta(this.h, 10, M, N), ta(this.h, 12, L, B), ta(this.h, 14, $, H);
};
Ss.prototype._digest = function(e) {
  return e === "hex" ? _i.toHex32(this.h, "big") : _i.split32(this.h, "big");
};
function Kj(t, e, r, n, i) {
  var s = t & r ^ ~t & i;
  return s < 0 && (s += 4294967296), s;
}
function Vj(t, e, r, n, i, s) {
  var o = e & n ^ ~e & s;
  return o < 0 && (o += 4294967296), o;
}
function Gj(t, e, r, n, i) {
  var s = t & r ^ t & i ^ r & i;
  return s < 0 && (s += 4294967296), s;
}
function Yj(t, e, r, n, i, s) {
  var o = e & n ^ e & s ^ n & s;
  return o < 0 && (o += 4294967296), o;
}
function Jj(t, e) {
  var r = Hs(t, e, 28), n = Hs(e, t, 2), i = Hs(e, t, 7), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
function Xj(t, e) {
  var r = Ks(t, e, 28), n = Ks(e, t, 2), i = Ks(e, t, 7), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
function Zj(t, e) {
  var r = Hs(t, e, 14), n = Hs(t, e, 18), i = Hs(e, t, 9), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
function Qj(t, e) {
  var r = Ks(t, e, 14), n = Ks(t, e, 18), i = Ks(e, t, 9), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
function eU(t, e) {
  var r = Hs(t, e, 1), n = Hs(t, e, 8), i = s8(t, e, 7), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
function tU(t, e) {
  var r = Ks(t, e, 1), n = Ks(t, e, 8), i = o8(t, e, 7), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
function rU(t, e) {
  var r = Hs(t, e, 19), n = Hs(e, t, 29), i = s8(t, e, 6), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
function nU(t, e) {
  var r = Ks(t, e, 19), n = Ks(e, t, 29), i = o8(t, e, 6), s = r ^ n ^ i;
  return s < 0 && (s += 4294967296), s;
}
var _1 = xr, u8 = c8;
function jo() {
  if (!(this instanceof jo))
    return new jo();
  u8.call(this), this.h = [
    3418070365,
    3238371032,
    1654270250,
    914150663,
    2438529370,
    812702999,
    355462360,
    4144912697,
    1731405415,
    4290775857,
    2394180231,
    1750603025,
    3675008525,
    1694076839,
    1203062813,
    3204075428
  ];
}
_1.inherits(jo, u8);
var iU = jo;
jo.blockSize = 1024;
jo.outSize = 384;
jo.hmacStrength = 192;
jo.padLength = 128;
jo.prototype._digest = function(e) {
  return e === "hex" ? _1.toHex32(this.h.slice(0, 12), "big") : _1.split32(this.h.slice(0, 12), "big");
};
ku.sha1 = Pj;
ku.sha224 = Bj;
ku.sha256 = n8;
ku.sha384 = iU;
ku.sha512 = c8;
var f8 = {}, lc = xr, sU = Lu, ud = lc.rotl32, _x = lc.sum32, Sf = lc.sum32_3, Ex = lc.sum32_4, l8 = sU.BlockHash;
function Zs() {
  if (!(this instanceof Zs))
    return new Zs();
  l8.call(this), this.h = [1732584193, 4023233417, 2562383102, 271733878, 3285377520], this.endian = "little";
}
lc.inherits(Zs, l8);
f8.ripemd160 = Zs;
Zs.blockSize = 512;
Zs.outSize = 160;
Zs.hmacStrength = 192;
Zs.padLength = 64;
Zs.prototype._update = function(e, r) {
  for (var n = this.h[0], i = this.h[1], s = this.h[2], o = this.h[3], a = this.h[4], u = n, l = i, d = s, p = o, w = a, A = 0; A < 80; A++) {
    var M = _x(
      ud(
        Ex(n, Sx(A, i, s, o), e[cU[A] + r], oU(A)),
        fU[A]
      ),
      a
    );
    n = a, a = o, o = ud(s, 10), s = i, i = M, M = _x(
      ud(
        Ex(u, Sx(79 - A, l, d, p), e[uU[A] + r], aU(A)),
        lU[A]
      ),
      w
    ), u = w, w = p, p = ud(d, 10), d = l, l = M;
  }
  M = Sf(this.h[1], s, p), this.h[1] = Sf(this.h[2], o, w), this.h[2] = Sf(this.h[3], a, u), this.h[3] = Sf(this.h[4], n, l), this.h[4] = Sf(this.h[0], i, d), this.h[0] = M;
};
Zs.prototype._digest = function(e) {
  return e === "hex" ? lc.toHex32(this.h, "little") : lc.split32(this.h, "little");
};
function Sx(t, e, r, n) {
  return t <= 15 ? e ^ r ^ n : t <= 31 ? e & r | ~e & n : t <= 47 ? (e | ~r) ^ n : t <= 63 ? e & n | r & ~n : e ^ (r | ~n);
}
function oU(t) {
  return t <= 15 ? 0 : t <= 31 ? 1518500249 : t <= 47 ? 1859775393 : t <= 63 ? 2400959708 : 2840853838;
}
function aU(t) {
  return t <= 15 ? 1352829926 : t <= 31 ? 1548603684 : t <= 47 ? 1836072691 : t <= 63 ? 2053994217 : 0;
}
var cU = [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  12,
  13,
  14,
  15,
  7,
  4,
  13,
  1,
  10,
  6,
  15,
  3,
  12,
  0,
  9,
  5,
  2,
  14,
  11,
  8,
  3,
  10,
  14,
  4,
  9,
  15,
  8,
  1,
  2,
  7,
  0,
  6,
  13,
  11,
  5,
  12,
  1,
  9,
  11,
  10,
  0,
  8,
  12,
  4,
  13,
  3,
  7,
  15,
  14,
  5,
  6,
  2,
  4,
  0,
  5,
  9,
  7,
  12,
  2,
  10,
  14,
  1,
  3,
  8,
  11,
  6,
  15,
  13
], uU = [
  5,
  14,
  7,
  0,
  9,
  2,
  11,
  4,
  13,
  6,
  15,
  8,
  1,
  10,
  3,
  12,
  6,
  11,
  3,
  7,
  0,
  13,
  5,
  10,
  14,
  15,
  8,
  12,
  4,
  9,
  1,
  2,
  15,
  5,
  1,
  3,
  7,
  14,
  6,
  9,
  11,
  8,
  12,
  2,
  10,
  0,
  4,
  13,
  8,
  6,
  4,
  1,
  3,
  11,
  15,
  0,
  5,
  12,
  2,
  13,
  9,
  7,
  10,
  14,
  12,
  15,
  10,
  4,
  1,
  5,
  8,
  7,
  6,
  2,
  13,
  14,
  0,
  3,
  9,
  11
], fU = [
  11,
  14,
  15,
  12,
  5,
  8,
  7,
  9,
  11,
  13,
  14,
  15,
  6,
  7,
  9,
  8,
  7,
  6,
  8,
  13,
  11,
  9,
  7,
  15,
  7,
  12,
  15,
  9,
  11,
  7,
  13,
  12,
  11,
  13,
  6,
  7,
  14,
  9,
  13,
  15,
  14,
  8,
  13,
  6,
  5,
  12,
  7,
  5,
  11,
  12,
  14,
  15,
  14,
  15,
  9,
  8,
  9,
  14,
  5,
  6,
  8,
  6,
  5,
  12,
  9,
  15,
  5,
  11,
  6,
  8,
  13,
  12,
  5,
  12,
  13,
  14,
  11,
  8,
  5,
  6
], lU = [
  8,
  9,
  9,
  11,
  13,
  15,
  15,
  5,
  7,
  7,
  8,
  11,
  14,
  14,
  12,
  6,
  9,
  13,
  15,
  7,
  12,
  8,
  9,
  11,
  7,
  7,
  12,
  7,
  6,
  15,
  13,
  11,
  9,
  7,
  15,
  11,
  8,
  6,
  6,
  14,
  12,
  13,
  5,
  14,
  13,
  13,
  7,
  5,
  15,
  5,
  8,
  11,
  14,
  14,
  6,
  14,
  6,
  9,
  12,
  9,
  12,
  5,
  15,
  8,
  8,
  5,
  12,
  9,
  12,
  5,
  14,
  6,
  8,
  13,
  6,
  5,
  15,
  13,
  11,
  11
], hU = xr, dU = wc;
function Su(t, e, r) {
  if (!(this instanceof Su))
    return new Su(t, e, r);
  this.Hash = t, this.blockSize = t.blockSize / 8, this.outSize = t.outSize / 8, this.inner = null, this.outer = null, this._init(hU.toArray(e, r));
}
var pU = Su;
Su.prototype._init = function(e) {
  e.length > this.blockSize && (e = new this.Hash().update(e).digest()), dU(e.length <= this.blockSize);
  for (var r = e.length; r < this.blockSize; r++)
    e.push(0);
  for (r = 0; r < e.length; r++)
    e[r] ^= 54;
  for (this.inner = new this.Hash().update(e), r = 0; r < e.length; r++)
    e[r] ^= 106;
  this.outer = new this.Hash().update(e);
};
Su.prototype.update = function(e, r) {
  return this.inner.update(e, r), this;
};
Su.prototype.digest = function(e) {
  return this.outer.update(this.inner.digest()), this.outer.digest(e);
};
(function(t) {
  var e = t;
  e.utils = xr, e.common = Lu, e.sha = ku, e.ripemd = f8, e.hmac = pU, e.sha1 = e.sha.sha1, e.sha256 = e.sha.sha256, e.sha224 = e.sha.sha224, e.sha384 = e.sha.sha384, e.sha512 = e.sha.sha512, e.ripemd160 = e.ripemd.ripemd160;
})(Vl);
const yo = /* @__PURE__ */ ts(Vl);
function Bu(t, e, r) {
  return r = {
    path: e,
    exports: {},
    require: function(n, i) {
      return gU(n, i ?? r.path);
    }
  }, t(r, r.exports), r.exports;
}
function gU() {
  throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
}
var Hv = h8;
function h8(t, e) {
  if (!t)
    throw new Error(e || "Assertion failed");
}
h8.equal = function(e, r, n) {
  if (e != r)
    throw new Error(n || "Assertion failed: " + e + " != " + r);
};
var xs = Bu(function(t, e) {
  var r = e;
  function n(o, a) {
    if (Array.isArray(o))
      return o.slice();
    if (!o)
      return [];
    var u = [];
    if (typeof o != "string") {
      for (var l = 0; l < o.length; l++)
        u[l] = o[l] | 0;
      return u;
    }
    if (a === "hex") {
      o = o.replace(/[^a-z0-9]+/ig, ""), o.length % 2 !== 0 && (o = "0" + o);
      for (var l = 0; l < o.length; l += 2)
        u.push(parseInt(o[l] + o[l + 1], 16));
    } else
      for (var l = 0; l < o.length; l++) {
        var d = o.charCodeAt(l), p = d >> 8, w = d & 255;
        p ? u.push(p, w) : u.push(w);
      }
    return u;
  }
  r.toArray = n;
  function i(o) {
    return o.length === 1 ? "0" + o : o;
  }
  r.zero2 = i;
  function s(o) {
    for (var a = "", u = 0; u < o.length; u++)
      a += i(o[u].toString(16));
    return a;
  }
  r.toHex = s, r.encode = function(a, u) {
    return u === "hex" ? s(a) : a;
  };
}), $i = Bu(function(t, e) {
  var r = e;
  r.assert = Hv, r.toArray = xs.toArray, r.zero2 = xs.zero2, r.toHex = xs.toHex, r.encode = xs.encode;
  function n(u, l, d) {
    var p = new Array(Math.max(u.bitLength(), d) + 1);
    p.fill(0);
    for (var w = 1 << l + 1, A = u.clone(), M = 0; M < p.length; M++) {
      var N, L = A.andln(w - 1);
      A.isOdd() ? (L > (w >> 1) - 1 ? N = (w >> 1) - L : N = L, A.isubn(N)) : N = 0, p[M] = N, A.iushrn(1);
    }
    return p;
  }
  r.getNAF = n;
  function i(u, l) {
    var d = [
      [],
      []
    ];
    u = u.clone(), l = l.clone();
    for (var p = 0, w = 0, A; u.cmpn(-p) > 0 || l.cmpn(-w) > 0; ) {
      var M = u.andln(3) + p & 3, N = l.andln(3) + w & 3;
      M === 3 && (M = -1), N === 3 && (N = -1);
      var L;
      M & 1 ? (A = u.andln(7) + p & 7, (A === 3 || A === 5) && N === 2 ? L = -M : L = M) : L = 0, d[0].push(L);
      var B;
      N & 1 ? (A = l.andln(7) + w & 7, (A === 3 || A === 5) && M === 2 ? B = -N : B = N) : B = 0, d[1].push(B), 2 * p === L + 1 && (p = 1 - p), 2 * w === B + 1 && (w = 1 - w), u.iushrn(1), l.iushrn(1);
    }
    return d;
  }
  r.getJSF = i;
  function s(u, l, d) {
    var p = "_" + l;
    u.prototype[l] = function() {
      return this[p] !== void 0 ? this[p] : this[p] = d.call(this);
    };
  }
  r.cachedProperty = s;
  function o(u) {
    return typeof u == "string" ? r.toArray(u, "hex") : u;
  }
  r.parseBytes = o;
  function a(u) {
    return new sr(u, "hex", "le");
  }
  r.intFromLE = a;
}), n0 = $i.getNAF, mU = $i.getJSF, i0 = $i.assert;
function Ma(t, e) {
  this.type = t, this.p = new sr(e.p, 16), this.red = e.prime ? sr.red(e.prime) : sr.mont(this.p), this.zero = new sr(0).toRed(this.red), this.one = new sr(1).toRed(this.red), this.two = new sr(2).toRed(this.red), this.n = e.n && new sr(e.n, 16), this.g = e.g && this.pointFromJSON(e.g, e.gRed), this._wnafT1 = new Array(4), this._wnafT2 = new Array(4), this._wnafT3 = new Array(4), this._wnafT4 = new Array(4), this._bitLength = this.n ? this.n.bitLength() : 0;
  var r = this.n && this.p.div(this.n);
  !r || r.cmpn(100) > 0 ? this.redN = null : (this._maxwellTrick = !0, this.redN = this.n.toRed(this.red));
}
var xc = Ma;
Ma.prototype.point = function() {
  throw new Error("Not implemented");
};
Ma.prototype.validate = function() {
  throw new Error("Not implemented");
};
Ma.prototype._fixedNafMul = function(e, r) {
  i0(e.precomputed);
  var n = e._getDoubles(), i = n0(r, 1, this._bitLength), s = (1 << n.step + 1) - (n.step % 2 === 0 ? 2 : 1);
  s /= 3;
  var o = [], a, u;
  for (a = 0; a < i.length; a += n.step) {
    u = 0;
    for (var l = a + n.step - 1; l >= a; l--)
      u = (u << 1) + i[l];
    o.push(u);
  }
  for (var d = this.jpoint(null, null, null), p = this.jpoint(null, null, null), w = s; w > 0; w--) {
    for (a = 0; a < o.length; a++)
      u = o[a], u === w ? p = p.mixedAdd(n.points[a]) : u === -w && (p = p.mixedAdd(n.points[a].neg()));
    d = d.add(p);
  }
  return d.toP();
};
Ma.prototype._wnafMul = function(e, r) {
  var n = 4, i = e._getNAFPoints(n);
  n = i.wnd;
  for (var s = i.points, o = n0(r, n, this._bitLength), a = this.jpoint(null, null, null), u = o.length - 1; u >= 0; u--) {
    for (var l = 0; u >= 0 && o[u] === 0; u--)
      l++;
    if (u >= 0 && l++, a = a.dblp(l), u < 0)
      break;
    var d = o[u];
    i0(d !== 0), e.type === "affine" ? d > 0 ? a = a.mixedAdd(s[d - 1 >> 1]) : a = a.mixedAdd(s[-d - 1 >> 1].neg()) : d > 0 ? a = a.add(s[d - 1 >> 1]) : a = a.add(s[-d - 1 >> 1].neg());
  }
  return e.type === "affine" ? a.toP() : a;
};
Ma.prototype._wnafMulAdd = function(e, r, n, i, s) {
  var o = this._wnafT1, a = this._wnafT2, u = this._wnafT3, l = 0, d, p, w;
  for (d = 0; d < i; d++) {
    w = r[d];
    var A = w._getNAFPoints(e);
    o[d] = A.wnd, a[d] = A.points;
  }
  for (d = i - 1; d >= 1; d -= 2) {
    var M = d - 1, N = d;
    if (o[M] !== 1 || o[N] !== 1) {
      u[M] = n0(n[M], o[M], this._bitLength), u[N] = n0(n[N], o[N], this._bitLength), l = Math.max(u[M].length, l), l = Math.max(u[N].length, l);
      continue;
    }
    var L = [
      r[M],
      /* 1 */
      null,
      /* 3 */
      null,
      /* 5 */
      r[N]
      /* 7 */
    ];
    r[M].y.cmp(r[N].y) === 0 ? (L[1] = r[M].add(r[N]), L[2] = r[M].toJ().mixedAdd(r[N].neg())) : r[M].y.cmp(r[N].y.redNeg()) === 0 ? (L[1] = r[M].toJ().mixedAdd(r[N]), L[2] = r[M].add(r[N].neg())) : (L[1] = r[M].toJ().mixedAdd(r[N]), L[2] = r[M].toJ().mixedAdd(r[N].neg()));
    var B = [
      -3,
      /* -1 -1 */
      -1,
      /* -1 0 */
      -5,
      /* -1 1 */
      -7,
      /* 0 -1 */
      0,
      /* 0 0 */
      7,
      /* 0 1 */
      5,
      /* 1 -1 */
      1,
      /* 1 0 */
      3
      /* 1 1 */
    ], $ = mU(n[M], n[N]);
    for (l = Math.max($[0].length, l), u[M] = new Array(l), u[N] = new Array(l), p = 0; p < l; p++) {
      var H = $[0][p] | 0, W = $[1][p] | 0;
      u[M][p] = B[(H + 1) * 3 + (W + 1)], u[N][p] = 0, a[M] = L;
    }
  }
  var V = this.jpoint(null, null, null), te = this._wnafT4;
  for (d = l; d >= 0; d--) {
    for (var R = 0; d >= 0; ) {
      var K = !0;
      for (p = 0; p < i; p++)
        te[p] = u[p][d] | 0, te[p] !== 0 && (K = !1);
      if (!K)
        break;
      R++, d--;
    }
    if (d >= 0 && R++, V = V.dblp(R), d < 0)
      break;
    for (p = 0; p < i; p++) {
      var ge = te[p];
      ge !== 0 && (ge > 0 ? w = a[p][ge - 1 >> 1] : ge < 0 && (w = a[p][-ge - 1 >> 1].neg()), w.type === "affine" ? V = V.mixedAdd(w) : V = V.add(w));
    }
  }
  for (d = 0; d < i; d++)
    a[d] = null;
  return s ? V : V.toP();
};
function ns(t, e) {
  this.curve = t, this.type = e, this.precomputed = null;
}
Ma.BasePoint = ns;
ns.prototype.eq = function() {
  throw new Error("Not implemented");
};
ns.prototype.validate = function() {
  return this.curve.validate(this);
};
Ma.prototype.decodePoint = function(e, r) {
  e = $i.toArray(e, r);
  var n = this.p.byteLength();
  if ((e[0] === 4 || e[0] === 6 || e[0] === 7) && e.length - 1 === 2 * n) {
    e[0] === 6 ? i0(e[e.length - 1] % 2 === 0) : e[0] === 7 && i0(e[e.length - 1] % 2 === 1);
    var i = this.point(
      e.slice(1, 1 + n),
      e.slice(1 + n, 1 + 2 * n)
    );
    return i;
  } else if ((e[0] === 2 || e[0] === 3) && e.length - 1 === n)
    return this.pointFromX(e.slice(1, 1 + n), e[0] === 3);
  throw new Error("Unknown point format");
};
ns.prototype.encodeCompressed = function(e) {
  return this.encode(e, !0);
};
ns.prototype._encode = function(e) {
  var r = this.curve.p.byteLength(), n = this.getX().toArray("be", r);
  return e ? [this.getY().isEven() ? 2 : 3].concat(n) : [4].concat(n, this.getY().toArray("be", r));
};
ns.prototype.encode = function(e, r) {
  return $i.encode(this._encode(r), e);
};
ns.prototype.precompute = function(e) {
  if (this.precomputed)
    return this;
  var r = {
    doubles: null,
    naf: null,
    beta: null
  };
  return r.naf = this._getNAFPoints(8), r.doubles = this._getDoubles(4, e), r.beta = this._getBeta(), this.precomputed = r, this;
};
ns.prototype._hasDoubles = function(e) {
  if (!this.precomputed)
    return !1;
  var r = this.precomputed.doubles;
  return r ? r.points.length >= Math.ceil((e.bitLength() + 1) / r.step) : !1;
};
ns.prototype._getDoubles = function(e, r) {
  if (this.precomputed && this.precomputed.doubles)
    return this.precomputed.doubles;
  for (var n = [this], i = this, s = 0; s < r; s += e) {
    for (var o = 0; o < e; o++)
      i = i.dbl();
    n.push(i);
  }
  return {
    step: e,
    points: n
  };
};
ns.prototype._getNAFPoints = function(e) {
  if (this.precomputed && this.precomputed.naf)
    return this.precomputed.naf;
  for (var r = [this], n = (1 << e) - 1, i = n === 1 ? null : this.dbl(), s = 1; s < n; s++)
    r[s] = r[s - 1].add(i);
  return {
    wnd: e,
    points: r
  };
};
ns.prototype._getBeta = function() {
  return null;
};
ns.prototype.dblp = function(e) {
  for (var r = this, n = 0; n < e; n++)
    r = r.dbl();
  return r;
};
var Kv = Bu(function(t) {
  typeof Object.create == "function" ? t.exports = function(r, n) {
    n && (r.super_ = n, r.prototype = Object.create(n.prototype, {
      constructor: {
        value: r,
        enumerable: !1,
        writable: !0,
        configurable: !0
      }
    }));
  } : t.exports = function(r, n) {
    if (n) {
      r.super_ = n;
      var i = function() {
      };
      i.prototype = n.prototype, r.prototype = new i(), r.prototype.constructor = r;
    }
  };
}), vU = $i.assert;
function is(t) {
  xc.call(this, "short", t), this.a = new sr(t.a, 16).toRed(this.red), this.b = new sr(t.b, 16).toRed(this.red), this.tinv = this.two.redInvm(), this.zeroA = this.a.fromRed().cmpn(0) === 0, this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0, this.endo = this._getEndomorphism(t), this._endoWnafT1 = new Array(4), this._endoWnafT2 = new Array(4);
}
Kv(is, xc);
var bU = is;
is.prototype._getEndomorphism = function(e) {
  if (!(!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)) {
    var r, n;
    if (e.beta)
      r = new sr(e.beta, 16).toRed(this.red);
    else {
      var i = this._getEndoRoots(this.p);
      r = i[0].cmp(i[1]) < 0 ? i[0] : i[1], r = r.toRed(this.red);
    }
    if (e.lambda)
      n = new sr(e.lambda, 16);
    else {
      var s = this._getEndoRoots(this.n);
      this.g.mul(s[0]).x.cmp(this.g.x.redMul(r)) === 0 ? n = s[0] : (n = s[1], vU(this.g.mul(n).x.cmp(this.g.x.redMul(r)) === 0));
    }
    var o;
    return e.basis ? o = e.basis.map(function(a) {
      return {
        a: new sr(a.a, 16),
        b: new sr(a.b, 16)
      };
    }) : o = this._getEndoBasis(n), {
      beta: r,
      lambda: n,
      basis: o
    };
  }
};
is.prototype._getEndoRoots = function(e) {
  var r = e === this.p ? this.red : sr.mont(e), n = new sr(2).toRed(r).redInvm(), i = n.redNeg(), s = new sr(3).toRed(r).redNeg().redSqrt().redMul(n), o = i.redAdd(s).fromRed(), a = i.redSub(s).fromRed();
  return [o, a];
};
is.prototype._getEndoBasis = function(e) {
  for (var r = this.n.ushrn(Math.floor(this.n.bitLength() / 2)), n = e, i = this.n.clone(), s = new sr(1), o = new sr(0), a = new sr(0), u = new sr(1), l, d, p, w, A, M, N, L = 0, B, $; n.cmpn(0) !== 0; ) {
    var H = i.div(n);
    B = i.sub(H.mul(n)), $ = a.sub(H.mul(s));
    var W = u.sub(H.mul(o));
    if (!p && B.cmp(r) < 0)
      l = N.neg(), d = s, p = B.neg(), w = $;
    else if (p && ++L === 2)
      break;
    N = B, i = n, n = B, a = s, s = $, u = o, o = W;
  }
  A = B.neg(), M = $;
  var V = p.sqr().add(w.sqr()), te = A.sqr().add(M.sqr());
  return te.cmp(V) >= 0 && (A = l, M = d), p.negative && (p = p.neg(), w = w.neg()), A.negative && (A = A.neg(), M = M.neg()), [
    { a: p, b: w },
    { a: A, b: M }
  ];
};
is.prototype._endoSplit = function(e) {
  var r = this.endo.basis, n = r[0], i = r[1], s = i.b.mul(e).divRound(this.n), o = n.b.neg().mul(e).divRound(this.n), a = s.mul(n.a), u = o.mul(i.a), l = s.mul(n.b), d = o.mul(i.b), p = e.sub(a).sub(u), w = l.add(d).neg();
  return { k1: p, k2: w };
};
is.prototype.pointFromX = function(e, r) {
  e = new sr(e, 16), e.red || (e = e.toRed(this.red));
  var n = e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b), i = n.redSqrt();
  if (i.redSqr().redSub(n).cmp(this.zero) !== 0)
    throw new Error("invalid point");
  var s = i.fromRed().isOdd();
  return (r && !s || !r && s) && (i = i.redNeg()), this.point(e, i);
};
is.prototype.validate = function(e) {
  if (e.inf)
    return !0;
  var r = e.x, n = e.y, i = this.a.redMul(r), s = r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);
  return n.redSqr().redISub(s).cmpn(0) === 0;
};
is.prototype._endoWnafMulAdd = function(e, r, n) {
  for (var i = this._endoWnafT1, s = this._endoWnafT2, o = 0; o < e.length; o++) {
    var a = this._endoSplit(r[o]), u = e[o], l = u._getBeta();
    a.k1.negative && (a.k1.ineg(), u = u.neg(!0)), a.k2.negative && (a.k2.ineg(), l = l.neg(!0)), i[o * 2] = u, i[o * 2 + 1] = l, s[o * 2] = a.k1, s[o * 2 + 1] = a.k2;
  }
  for (var d = this._wnafMulAdd(1, i, s, o * 2, n), p = 0; p < o * 2; p++)
    i[p] = null, s[p] = null;
  return d;
};
function kn(t, e, r, n) {
  xc.BasePoint.call(this, t, "affine"), e === null && r === null ? (this.x = null, this.y = null, this.inf = !0) : (this.x = new sr(e, 16), this.y = new sr(r, 16), n && (this.x.forceRed(this.curve.red), this.y.forceRed(this.curve.red)), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.inf = !1);
}
Kv(kn, xc.BasePoint);
is.prototype.point = function(e, r, n) {
  return new kn(this, e, r, n);
};
is.prototype.pointFromJSON = function(e, r) {
  return kn.fromJSON(this, e, r);
};
kn.prototype._getBeta = function() {
  if (this.curve.endo) {
    var e = this.precomputed;
    if (e && e.beta)
      return e.beta;
    var r = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);
    if (e) {
      var n = this.curve, i = function(s) {
        return n.point(s.x.redMul(n.endo.beta), s.y);
      };
      e.beta = r, r.precomputed = {
        beta: null,
        naf: e.naf && {
          wnd: e.naf.wnd,
          points: e.naf.points.map(i)
        },
        doubles: e.doubles && {
          step: e.doubles.step,
          points: e.doubles.points.map(i)
        }
      };
    }
    return r;
  }
};
kn.prototype.toJSON = function() {
  return this.precomputed ? [this.x, this.y, this.precomputed && {
    doubles: this.precomputed.doubles && {
      step: this.precomputed.doubles.step,
      points: this.precomputed.doubles.points.slice(1)
    },
    naf: this.precomputed.naf && {
      wnd: this.precomputed.naf.wnd,
      points: this.precomputed.naf.points.slice(1)
    }
  }] : [this.x, this.y];
};
kn.fromJSON = function(e, r, n) {
  typeof r == "string" && (r = JSON.parse(r));
  var i = e.point(r[0], r[1], n);
  if (!r[2])
    return i;
  function s(a) {
    return e.point(a[0], a[1], n);
  }
  var o = r[2];
  return i.precomputed = {
    beta: null,
    doubles: o.doubles && {
      step: o.doubles.step,
      points: [i].concat(o.doubles.points.map(s))
    },
    naf: o.naf && {
      wnd: o.naf.wnd,
      points: [i].concat(o.naf.points.map(s))
    }
  }, i;
};
kn.prototype.inspect = function() {
  return this.isInfinity() ? "<EC Point Infinity>" : "<EC Point x: " + this.x.fromRed().toString(16, 2) + " y: " + this.y.fromRed().toString(16, 2) + ">";
};
kn.prototype.isInfinity = function() {
  return this.inf;
};
kn.prototype.add = function(e) {
  if (this.inf)
    return e;
  if (e.inf)
    return this;
  if (this.eq(e))
    return this.dbl();
  if (this.neg().eq(e))
    return this.curve.point(null, null);
  if (this.x.cmp(e.x) === 0)
    return this.curve.point(null, null);
  var r = this.y.redSub(e.y);
  r.cmpn(0) !== 0 && (r = r.redMul(this.x.redSub(e.x).redInvm()));
  var n = r.redSqr().redISub(this.x).redISub(e.x), i = r.redMul(this.x.redSub(n)).redISub(this.y);
  return this.curve.point(n, i);
};
kn.prototype.dbl = function() {
  if (this.inf)
    return this;
  var e = this.y.redAdd(this.y);
  if (e.cmpn(0) === 0)
    return this.curve.point(null, null);
  var r = this.curve.a, n = this.x.redSqr(), i = e.redInvm(), s = n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i), o = s.redSqr().redISub(this.x.redAdd(this.x)), a = s.redMul(this.x.redSub(o)).redISub(this.y);
  return this.curve.point(o, a);
};
kn.prototype.getX = function() {
  return this.x.fromRed();
};
kn.prototype.getY = function() {
  return this.y.fromRed();
};
kn.prototype.mul = function(e) {
  return e = new sr(e, 16), this.isInfinity() ? this : this._hasDoubles(e) ? this.curve._fixedNafMul(this, e) : this.curve.endo ? this.curve._endoWnafMulAdd([this], [e]) : this.curve._wnafMul(this, e);
};
kn.prototype.mulAdd = function(e, r, n) {
  var i = [this, r], s = [e, n];
  return this.curve.endo ? this.curve._endoWnafMulAdd(i, s) : this.curve._wnafMulAdd(1, i, s, 2);
};
kn.prototype.jmulAdd = function(e, r, n) {
  var i = [this, r], s = [e, n];
  return this.curve.endo ? this.curve._endoWnafMulAdd(i, s, !0) : this.curve._wnafMulAdd(1, i, s, 2, !0);
};
kn.prototype.eq = function(e) {
  return this === e || this.inf === e.inf && (this.inf || this.x.cmp(e.x) === 0 && this.y.cmp(e.y) === 0);
};
kn.prototype.neg = function(e) {
  if (this.inf)
    return this;
  var r = this.curve.point(this.x, this.y.redNeg());
  if (e && this.precomputed) {
    var n = this.precomputed, i = function(s) {
      return s.neg();
    };
    r.precomputed = {
      naf: n.naf && {
        wnd: n.naf.wnd,
        points: n.naf.points.map(i)
      },
      doubles: n.doubles && {
        step: n.doubles.step,
        points: n.doubles.points.map(i)
      }
    };
  }
  return r;
};
kn.prototype.toJ = function() {
  if (this.inf)
    return this.curve.jpoint(null, null, null);
  var e = this.curve.jpoint(this.x, this.y, this.curve.one);
  return e;
};
function zn(t, e, r, n) {
  xc.BasePoint.call(this, t, "jacobian"), e === null && r === null && n === null ? (this.x = this.curve.one, this.y = this.curve.one, this.z = new sr(0)) : (this.x = new sr(e, 16), this.y = new sr(r, 16), this.z = new sr(n, 16)), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.z.red || (this.z = this.z.toRed(this.curve.red)), this.zOne = this.z === this.curve.one;
}
Kv(zn, xc.BasePoint);
is.prototype.jpoint = function(e, r, n) {
  return new zn(this, e, r, n);
};
zn.prototype.toP = function() {
  if (this.isInfinity())
    return this.curve.point(null, null);
  var e = this.z.redInvm(), r = e.redSqr(), n = this.x.redMul(r), i = this.y.redMul(r).redMul(e);
  return this.curve.point(n, i);
};
zn.prototype.neg = function() {
  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);
};
zn.prototype.add = function(e) {
  if (this.isInfinity())
    return e;
  if (e.isInfinity())
    return this;
  var r = e.z.redSqr(), n = this.z.redSqr(), i = this.x.redMul(r), s = e.x.redMul(n), o = this.y.redMul(r.redMul(e.z)), a = e.y.redMul(n.redMul(this.z)), u = i.redSub(s), l = o.redSub(a);
  if (u.cmpn(0) === 0)
    return l.cmpn(0) !== 0 ? this.curve.jpoint(null, null, null) : this.dbl();
  var d = u.redSqr(), p = d.redMul(u), w = i.redMul(d), A = l.redSqr().redIAdd(p).redISub(w).redISub(w), M = l.redMul(w.redISub(A)).redISub(o.redMul(p)), N = this.z.redMul(e.z).redMul(u);
  return this.curve.jpoint(A, M, N);
};
zn.prototype.mixedAdd = function(e) {
  if (this.isInfinity())
    return e.toJ();
  if (e.isInfinity())
    return this;
  var r = this.z.redSqr(), n = this.x, i = e.x.redMul(r), s = this.y, o = e.y.redMul(r).redMul(this.z), a = n.redSub(i), u = s.redSub(o);
  if (a.cmpn(0) === 0)
    return u.cmpn(0) !== 0 ? this.curve.jpoint(null, null, null) : this.dbl();
  var l = a.redSqr(), d = l.redMul(a), p = n.redMul(l), w = u.redSqr().redIAdd(d).redISub(p).redISub(p), A = u.redMul(p.redISub(w)).redISub(s.redMul(d)), M = this.z.redMul(a);
  return this.curve.jpoint(w, A, M);
};
zn.prototype.dblp = function(e) {
  if (e === 0)
    return this;
  if (this.isInfinity())
    return this;
  if (!e)
    return this.dbl();
  var r;
  if (this.curve.zeroA || this.curve.threeA) {
    var n = this;
    for (r = 0; r < e; r++)
      n = n.dbl();
    return n;
  }
  var i = this.curve.a, s = this.curve.tinv, o = this.x, a = this.y, u = this.z, l = u.redSqr().redSqr(), d = a.redAdd(a);
  for (r = 0; r < e; r++) {
    var p = o.redSqr(), w = d.redSqr(), A = w.redSqr(), M = p.redAdd(p).redIAdd(p).redIAdd(i.redMul(l)), N = o.redMul(w), L = M.redSqr().redISub(N.redAdd(N)), B = N.redISub(L), $ = M.redMul(B);
    $ = $.redIAdd($).redISub(A);
    var H = d.redMul(u);
    r + 1 < e && (l = l.redMul(A)), o = L, u = H, d = $;
  }
  return this.curve.jpoint(o, d.redMul(s), u);
};
zn.prototype.dbl = function() {
  return this.isInfinity() ? this : this.curve.zeroA ? this._zeroDbl() : this.curve.threeA ? this._threeDbl() : this._dbl();
};
zn.prototype._zeroDbl = function() {
  var e, r, n;
  if (this.zOne) {
    var i = this.x.redSqr(), s = this.y.redSqr(), o = s.redSqr(), a = this.x.redAdd(s).redSqr().redISub(i).redISub(o);
    a = a.redIAdd(a);
    var u = i.redAdd(i).redIAdd(i), l = u.redSqr().redISub(a).redISub(a), d = o.redIAdd(o);
    d = d.redIAdd(d), d = d.redIAdd(d), e = l, r = u.redMul(a.redISub(l)).redISub(d), n = this.y.redAdd(this.y);
  } else {
    var p = this.x.redSqr(), w = this.y.redSqr(), A = w.redSqr(), M = this.x.redAdd(w).redSqr().redISub(p).redISub(A);
    M = M.redIAdd(M);
    var N = p.redAdd(p).redIAdd(p), L = N.redSqr(), B = A.redIAdd(A);
    B = B.redIAdd(B), B = B.redIAdd(B), e = L.redISub(M).redISub(M), r = N.redMul(M.redISub(e)).redISub(B), n = this.y.redMul(this.z), n = n.redIAdd(n);
  }
  return this.curve.jpoint(e, r, n);
};
zn.prototype._threeDbl = function() {
  var e, r, n;
  if (this.zOne) {
    var i = this.x.redSqr(), s = this.y.redSqr(), o = s.redSqr(), a = this.x.redAdd(s).redSqr().redISub(i).redISub(o);
    a = a.redIAdd(a);
    var u = i.redAdd(i).redIAdd(i).redIAdd(this.curve.a), l = u.redSqr().redISub(a).redISub(a);
    e = l;
    var d = o.redIAdd(o);
    d = d.redIAdd(d), d = d.redIAdd(d), r = u.redMul(a.redISub(l)).redISub(d), n = this.y.redAdd(this.y);
  } else {
    var p = this.z.redSqr(), w = this.y.redSqr(), A = this.x.redMul(w), M = this.x.redSub(p).redMul(this.x.redAdd(p));
    M = M.redAdd(M).redIAdd(M);
    var N = A.redIAdd(A);
    N = N.redIAdd(N);
    var L = N.redAdd(N);
    e = M.redSqr().redISub(L), n = this.y.redAdd(this.z).redSqr().redISub(w).redISub(p);
    var B = w.redSqr();
    B = B.redIAdd(B), B = B.redIAdd(B), B = B.redIAdd(B), r = M.redMul(N.redISub(e)).redISub(B);
  }
  return this.curve.jpoint(e, r, n);
};
zn.prototype._dbl = function() {
  var e = this.curve.a, r = this.x, n = this.y, i = this.z, s = i.redSqr().redSqr(), o = r.redSqr(), a = n.redSqr(), u = o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)), l = r.redAdd(r);
  l = l.redIAdd(l);
  var d = l.redMul(a), p = u.redSqr().redISub(d.redAdd(d)), w = d.redISub(p), A = a.redSqr();
  A = A.redIAdd(A), A = A.redIAdd(A), A = A.redIAdd(A);
  var M = u.redMul(w).redISub(A), N = n.redAdd(n).redMul(i);
  return this.curve.jpoint(p, M, N);
};
zn.prototype.trpl = function() {
  if (!this.curve.zeroA)
    return this.dbl().add(this);
  var e = this.x.redSqr(), r = this.y.redSqr(), n = this.z.redSqr(), i = r.redSqr(), s = e.redAdd(e).redIAdd(e), o = s.redSqr(), a = this.x.redAdd(r).redSqr().redISub(e).redISub(i);
  a = a.redIAdd(a), a = a.redAdd(a).redIAdd(a), a = a.redISub(o);
  var u = a.redSqr(), l = i.redIAdd(i);
  l = l.redIAdd(l), l = l.redIAdd(l), l = l.redIAdd(l);
  var d = s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(l), p = r.redMul(d);
  p = p.redIAdd(p), p = p.redIAdd(p);
  var w = this.x.redMul(u).redISub(p);
  w = w.redIAdd(w), w = w.redIAdd(w);
  var A = this.y.redMul(d.redMul(l.redISub(d)).redISub(a.redMul(u)));
  A = A.redIAdd(A), A = A.redIAdd(A), A = A.redIAdd(A);
  var M = this.z.redAdd(a).redSqr().redISub(n).redISub(u);
  return this.curve.jpoint(w, A, M);
};
zn.prototype.mul = function(e, r) {
  return e = new sr(e, r), this.curve._wnafMul(this, e);
};
zn.prototype.eq = function(e) {
  if (e.type === "affine")
    return this.eq(e.toJ());
  if (this === e)
    return !0;
  var r = this.z.redSqr(), n = e.z.redSqr();
  if (this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0) !== 0)
    return !1;
  var i = r.redMul(this.z), s = n.redMul(e.z);
  return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0) === 0;
};
zn.prototype.eqXToP = function(e) {
  var r = this.z.redSqr(), n = e.toRed(this.curve.red).redMul(r);
  if (this.x.cmp(n) === 0)
    return !0;
  for (var i = e.clone(), s = this.curve.redN.redMul(r); ; ) {
    if (i.iadd(this.curve.n), i.cmp(this.curve.p) >= 0)
      return !1;
    if (n.redIAdd(s), this.x.cmp(n) === 0)
      return !0;
  }
};
zn.prototype.inspect = function() {
  return this.isInfinity() ? "<EC JPoint Infinity>" : "<EC JPoint x: " + this.x.toString(16, 2) + " y: " + this.y.toString(16, 2) + " z: " + this.z.toString(16, 2) + ">";
};
zn.prototype.isInfinity = function() {
  return this.z.cmpn(0) === 0;
};
var Pd = Bu(function(t, e) {
  var r = e;
  r.base = xc, r.short = bU, r.mont = /*RicMoo:ethers:require(./mont)*/
  null, r.edwards = /*RicMoo:ethers:require(./edwards)*/
  null;
}), Md = Bu(function(t, e) {
  var r = e, n = $i.assert;
  function i(a) {
    a.type === "short" ? this.curve = new Pd.short(a) : a.type === "edwards" ? this.curve = new Pd.edwards(a) : this.curve = new Pd.mont(a), this.g = this.curve.g, this.n = this.curve.n, this.hash = a.hash, n(this.g.validate(), "Invalid curve"), n(this.g.mul(this.n).isInfinity(), "Invalid curve, G*N != O");
  }
  r.PresetCurve = i;
  function s(a, u) {
    Object.defineProperty(r, a, {
      configurable: !0,
      enumerable: !0,
      get: function() {
        var l = new i(u);
        return Object.defineProperty(r, a, {
          configurable: !0,
          enumerable: !0,
          value: l
        }), l;
      }
    });
  }
  s("p192", {
    type: "short",
    prime: "p192",
    p: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
    a: "ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",
    b: "64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",
    n: "ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",
    hash: yo.sha256,
    gRed: !1,
    g: [
      "188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012",
      "07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"
    ]
  }), s("p224", {
    type: "short",
    prime: "p224",
    p: "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",
    a: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",
    b: "b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
    n: "ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",
    hash: yo.sha256,
    gRed: !1,
    g: [
      "b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21",
      "bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"
    ]
  }), s("p256", {
    type: "short",
    prime: null,
    p: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",
    a: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",
    b: "5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",
    n: "ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
    hash: yo.sha256,
    gRed: !1,
    g: [
      "6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296",
      "4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"
    ]
  }), s("p384", {
    type: "short",
    prime: null,
    p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",
    a: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",
    b: "b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
    n: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",
    hash: yo.sha384,
    gRed: !1,
    g: [
      "aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7",
      "3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"
    ]
  }), s("p521", {
    type: "short",
    prime: null,
    p: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
    a: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",
    b: "00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",
    n: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",
    hash: yo.sha512,
    gRed: !1,
    g: [
      "000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
      "00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"
    ]
  }), s("curve25519", {
    type: "mont",
    prime: "p25519",
    p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
    a: "76d06",
    b: "1",
    n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
    hash: yo.sha256,
    gRed: !1,
    g: [
      "9"
    ]
  }), s("ed25519", {
    type: "edwards",
    prime: "p25519",
    p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
    a: "-1",
    c: "1",
    // -121665 * (121666^(-1)) (mod P)
    d: "52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",
    n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
    hash: yo.sha256,
    gRed: !1,
    g: [
      "216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a",
      // 4/5
      "6666666666666666666666666666666666666666666666666666666666666658"
    ]
  });
  var o;
  try {
    o = /*RicMoo:ethers:require(./precomputed/secp256k1)*/
    null.crash();
  } catch {
    o = void 0;
  }
  s("secp256k1", {
    type: "short",
    prime: "k256",
    p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",
    a: "0",
    b: "7",
    n: "ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
    h: "1",
    hash: yo.sha256,
    // Precomputed endomorphism
    beta: "7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",
    lambda: "5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",
    basis: [
      {
        a: "3086d221a7d46bcde86c90e49284eb15",
        b: "-e4437ed6010e88286f547fa90abfe4c3"
      },
      {
        a: "114ca50f7a8e2f3f657c1108d9d44cfd8",
        b: "3086d221a7d46bcde86c90e49284eb15"
      }
    ],
    gRed: !1,
    g: [
      "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",
      "483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",
      o
    ]
  });
});
function ba(t) {
  if (!(this instanceof ba))
    return new ba(t);
  this.hash = t.hash, this.predResist = !!t.predResist, this.outLen = this.hash.outSize, this.minEntropy = t.minEntropy || this.hash.hmacStrength, this._reseed = null, this.reseedInterval = null, this.K = null, this.V = null;
  var e = xs.toArray(t.entropy, t.entropyEnc || "hex"), r = xs.toArray(t.nonce, t.nonceEnc || "hex"), n = xs.toArray(t.pers, t.persEnc || "hex");
  Hv(
    e.length >= this.minEntropy / 8,
    "Not enough entropy. Minimum is: " + this.minEntropy + " bits"
  ), this._init(e, r, n);
}
var d8 = ba;
ba.prototype._init = function(e, r, n) {
  var i = e.concat(r).concat(n);
  this.K = new Array(this.outLen / 8), this.V = new Array(this.outLen / 8);
  for (var s = 0; s < this.V.length; s++)
    this.K[s] = 0, this.V[s] = 1;
  this._update(i), this._reseed = 1, this.reseedInterval = 281474976710656;
};
ba.prototype._hmac = function() {
  return new yo.hmac(this.hash, this.K);
};
ba.prototype._update = function(e) {
  var r = this._hmac().update(this.V).update([0]);
  e && (r = r.update(e)), this.K = r.digest(), this.V = this._hmac().update(this.V).digest(), e && (this.K = this._hmac().update(this.V).update([1]).update(e).digest(), this.V = this._hmac().update(this.V).digest());
};
ba.prototype.reseed = function(e, r, n, i) {
  typeof r != "string" && (i = n, n = r, r = null), e = xs.toArray(e, r), n = xs.toArray(n, i), Hv(
    e.length >= this.minEntropy / 8,
    "Not enough entropy. Minimum is: " + this.minEntropy + " bits"
  ), this._update(e.concat(n || [])), this._reseed = 1;
};
ba.prototype.generate = function(e, r, n, i) {
  if (this._reseed > this.reseedInterval)
    throw new Error("Reseed is required");
  typeof r != "string" && (i = n, n = r, r = null), n && (n = xs.toArray(n, i || "hex"), this._update(n));
  for (var s = []; s.length < e; )
    this.V = this._hmac().update(this.V).digest(), s = s.concat(this.V);
  var o = s.slice(0, e);
  return this._update(n), this._reseed++, xs.encode(o, r);
};
var E1 = $i.assert;
function Qn(t, e) {
  this.ec = t, this.priv = null, this.pub = null, e.priv && this._importPrivate(e.priv, e.privEnc), e.pub && this._importPublic(e.pub, e.pubEnc);
}
var Vv = Qn;
Qn.fromPublic = function(e, r, n) {
  return r instanceof Qn ? r : new Qn(e, {
    pub: r,
    pubEnc: n
  });
};
Qn.fromPrivate = function(e, r, n) {
  return r instanceof Qn ? r : new Qn(e, {
    priv: r,
    privEnc: n
  });
};
Qn.prototype.validate = function() {
  var e = this.getPublic();
  return e.isInfinity() ? { result: !1, reason: "Invalid public key" } : e.validate() ? e.mul(this.ec.curve.n).isInfinity() ? { result: !0, reason: null } : { result: !1, reason: "Public key * N != O" } : { result: !1, reason: "Public key is not a point" };
};
Qn.prototype.getPublic = function(e, r) {
  return typeof e == "string" && (r = e, e = null), this.pub || (this.pub = this.ec.g.mul(this.priv)), r ? this.pub.encode(r, e) : this.pub;
};
Qn.prototype.getPrivate = function(e) {
  return e === "hex" ? this.priv.toString(16, 2) : this.priv;
};
Qn.prototype._importPrivate = function(e, r) {
  this.priv = new sr(e, r || 16), this.priv = this.priv.umod(this.ec.curve.n);
};
Qn.prototype._importPublic = function(e, r) {
  if (e.x || e.y) {
    this.ec.curve.type === "mont" ? E1(e.x, "Need x coordinate") : (this.ec.curve.type === "short" || this.ec.curve.type === "edwards") && E1(e.x && e.y, "Need both x and y coordinate"), this.pub = this.ec.curve.point(e.x, e.y);
    return;
  }
  this.pub = this.ec.curve.decodePoint(e, r);
};
Qn.prototype.derive = function(e) {
  return e.validate() || E1(e.validate(), "public point not validated"), e.mul(this.priv).getX();
};
Qn.prototype.sign = function(e, r, n) {
  return this.ec.sign(e, this, r, n);
};
Qn.prototype.verify = function(e, r) {
  return this.ec.verify(e, r, this);
};
Qn.prototype.inspect = function() {
  return "<Key priv: " + (this.priv && this.priv.toString(16, 2)) + " pub: " + (this.pub && this.pub.inspect()) + " >";
};
var yU = $i.assert;
function H0(t, e) {
  if (t instanceof H0)
    return t;
  this._importDER(t, e) || (yU(t.r && t.s, "Signature without r or s"), this.r = new sr(t.r, 16), this.s = new sr(t.s, 16), t.recoveryParam === void 0 ? this.recoveryParam = null : this.recoveryParam = t.recoveryParam);
}
var K0 = H0;
function wU() {
  this.place = 0;
}
function im(t, e) {
  var r = t[e.place++];
  if (!(r & 128))
    return r;
  var n = r & 15;
  if (n === 0 || n > 4)
    return !1;
  for (var i = 0, s = 0, o = e.place; s < n; s++, o++)
    i <<= 8, i |= t[o], i >>>= 0;
  return i <= 127 ? !1 : (e.place = o, i);
}
function Ax(t) {
  for (var e = 0, r = t.length - 1; !t[e] && !(t[e + 1] & 128) && e < r; )
    e++;
  return e === 0 ? t : t.slice(e);
}
H0.prototype._importDER = function(e, r) {
  e = $i.toArray(e, r);
  var n = new wU();
  if (e[n.place++] !== 48)
    return !1;
  var i = im(e, n);
  if (i === !1 || i + n.place !== e.length || e[n.place++] !== 2)
    return !1;
  var s = im(e, n);
  if (s === !1)
    return !1;
  var o = e.slice(n.place, s + n.place);
  if (n.place += s, e[n.place++] !== 2)
    return !1;
  var a = im(e, n);
  if (a === !1 || e.length !== a + n.place)
    return !1;
  var u = e.slice(n.place, a + n.place);
  if (o[0] === 0)
    if (o[1] & 128)
      o = o.slice(1);
    else
      return !1;
  if (u[0] === 0)
    if (u[1] & 128)
      u = u.slice(1);
    else
      return !1;
  return this.r = new sr(o), this.s = new sr(u), this.recoveryParam = null, !0;
};
function sm(t, e) {
  if (e < 128) {
    t.push(e);
    return;
  }
  var r = 1 + (Math.log(e) / Math.LN2 >>> 3);
  for (t.push(r | 128); --r; )
    t.push(e >>> (r << 3) & 255);
  t.push(e);
}
H0.prototype.toDER = function(e) {
  var r = this.r.toArray(), n = this.s.toArray();
  for (r[0] & 128 && (r = [0].concat(r)), n[0] & 128 && (n = [0].concat(n)), r = Ax(r), n = Ax(n); !n[0] && !(n[1] & 128); )
    n = n.slice(1);
  var i = [2];
  sm(i, r.length), i = i.concat(r), i.push(2), sm(i, n.length);
  var s = i.concat(n), o = [48];
  return sm(o, s.length), o = o.concat(s), $i.encode(o, e);
};
var xU = (
  /*RicMoo:ethers:require(brorand)*/
  function() {
    throw new Error("unsupported");
  }
), p8 = $i.assert;
function Qi(t) {
  if (!(this instanceof Qi))
    return new Qi(t);
  typeof t == "string" && (p8(
    Object.prototype.hasOwnProperty.call(Md, t),
    "Unknown curve " + t
  ), t = Md[t]), t instanceof Md.PresetCurve && (t = { curve: t }), this.curve = t.curve.curve, this.n = this.curve.n, this.nh = this.n.ushrn(1), this.g = this.curve.g, this.g = t.curve.g, this.g.precompute(t.curve.n.bitLength() + 1), this.hash = t.hash || t.curve.hash;
}
var _U = Qi;
Qi.prototype.keyPair = function(e) {
  return new Vv(this, e);
};
Qi.prototype.keyFromPrivate = function(e, r) {
  return Vv.fromPrivate(this, e, r);
};
Qi.prototype.keyFromPublic = function(e, r) {
  return Vv.fromPublic(this, e, r);
};
Qi.prototype.genKeyPair = function(e) {
  e || (e = {});
  for (var r = new d8({
    hash: this.hash,
    pers: e.pers,
    persEnc: e.persEnc || "utf8",
    entropy: e.entropy || xU(this.hash.hmacStrength),
    entropyEnc: e.entropy && e.entropyEnc || "utf8",
    nonce: this.n.toArray()
  }), n = this.n.byteLength(), i = this.n.sub(new sr(2)); ; ) {
    var s = new sr(r.generate(n));
    if (!(s.cmp(i) > 0))
      return s.iaddn(1), this.keyFromPrivate(s);
  }
};
Qi.prototype._truncateToN = function(e, r) {
  var n = e.byteLength() * 8 - this.n.bitLength();
  return n > 0 && (e = e.ushrn(n)), !r && e.cmp(this.n) >= 0 ? e.sub(this.n) : e;
};
Qi.prototype.sign = function(e, r, n, i) {
  typeof n == "object" && (i = n, n = null), i || (i = {}), r = this.keyFromPrivate(r, n), e = this._truncateToN(new sr(e, 16));
  for (var s = this.n.byteLength(), o = r.getPrivate().toArray("be", s), a = e.toArray("be", s), u = new d8({
    hash: this.hash,
    entropy: o,
    nonce: a,
    pers: i.pers,
    persEnc: i.persEnc || "utf8"
  }), l = this.n.sub(new sr(1)), d = 0; ; d++) {
    var p = i.k ? i.k(d) : new sr(u.generate(this.n.byteLength()));
    if (p = this._truncateToN(p, !0), !(p.cmpn(1) <= 0 || p.cmp(l) >= 0)) {
      var w = this.g.mul(p);
      if (!w.isInfinity()) {
        var A = w.getX(), M = A.umod(this.n);
        if (M.cmpn(0) !== 0) {
          var N = p.invm(this.n).mul(M.mul(r.getPrivate()).iadd(e));
          if (N = N.umod(this.n), N.cmpn(0) !== 0) {
            var L = (w.getY().isOdd() ? 1 : 0) | (A.cmp(M) !== 0 ? 2 : 0);
            return i.canonical && N.cmp(this.nh) > 0 && (N = this.n.sub(N), L ^= 1), new K0({ r: M, s: N, recoveryParam: L });
          }
        }
      }
    }
  }
};
Qi.prototype.verify = function(e, r, n, i) {
  e = this._truncateToN(new sr(e, 16)), n = this.keyFromPublic(n, i), r = new K0(r, "hex");
  var s = r.r, o = r.s;
  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0 || o.cmpn(1) < 0 || o.cmp(this.n) >= 0)
    return !1;
  var a = o.invm(this.n), u = a.mul(e).umod(this.n), l = a.mul(s).umod(this.n), d;
  return this.curve._maxwellTrick ? (d = this.g.jmulAdd(u, n.getPublic(), l), d.isInfinity() ? !1 : d.eqXToP(s)) : (d = this.g.mulAdd(u, n.getPublic(), l), d.isInfinity() ? !1 : d.getX().umod(this.n).cmp(s) === 0);
};
Qi.prototype.recoverPubKey = function(t, e, r, n) {
  p8((3 & r) === r, "The recovery param is more than two bits"), e = new K0(e, n);
  var i = this.n, s = new sr(t), o = e.r, a = e.s, u = r & 1, l = r >> 1;
  if (o.cmp(this.curve.p.umod(this.curve.n)) >= 0 && l)
    throw new Error("Unable to find sencond key candinate");
  l ? o = this.curve.pointFromX(o.add(this.curve.n), u) : o = this.curve.pointFromX(o, u);
  var d = e.r.invm(i), p = i.sub(s).mul(d).umod(i), w = a.mul(d).umod(i);
  return this.g.mulAdd(p, o, w);
};
Qi.prototype.getKeyRecoveryParam = function(t, e, r, n) {
  if (e = new K0(e, n), e.recoveryParam !== null)
    return e.recoveryParam;
  for (var i = 0; i < 4; i++) {
    var s;
    try {
      s = this.recoverPubKey(t, e, i);
    } catch {
      continue;
    }
    if (s.eq(r))
      return i;
  }
  throw new Error("Unable to find valid recovery factor");
};
var EU = Bu(function(t, e) {
  var r = e;
  r.version = "6.5.4", r.utils = $i, r.rand = /*RicMoo:ethers:require(brorand)*/
  function() {
    throw new Error("unsupported");
  }, r.curve = Pd, r.curves = Md, r.ec = _U, r.eddsa = /*RicMoo:ethers:require(./elliptic/eddsa)*/
  null;
}), SU = EU.ec;
const AU = "signing-key/5.7.0", S1 = new Yr(AU);
let om = null;
function aa() {
  return om || (om = new SU("secp256k1")), om;
}
class PU {
  constructor(e) {
    _f(this, "curve", "secp256k1"), _f(this, "privateKey", Ri(e)), RF(this.privateKey) !== 32 && S1.throwArgumentError("invalid private key", "privateKey", "[[ REDACTED ]]");
    const r = aa().keyFromPrivate(wn(this.privateKey));
    _f(this, "publicKey", "0x" + r.getPublic(!1, "hex")), _f(this, "compressedPublicKey", "0x" + r.getPublic(!0, "hex")), _f(this, "_isSigningKey", !0);
  }
  _addPoint(e) {
    const r = aa().keyFromPublic(wn(this.publicKey)), n = aa().keyFromPublic(wn(e));
    return "0x" + r.pub.add(n.pub).encodeCompressed("hex");
  }
  signDigest(e) {
    const r = aa().keyFromPrivate(wn(this.privateKey)), n = wn(e);
    n.length !== 32 && S1.throwArgumentError("bad digest length", "digest", e);
    const i = r.sign(n, { canonical: !0 });
    return K4({
      recoveryParam: i.recoveryParam,
      r: lu("0x" + i.r.toString(16), 32),
      s: lu("0x" + i.s.toString(16), 32)
    });
  }
  computeSharedSecret(e) {
    const r = aa().keyFromPrivate(wn(this.privateKey)), n = aa().keyFromPublic(wn(g8(e)));
    return lu("0x" + r.derive(n.getPublic()).toString(16), 32);
  }
  static isSigningKey(e) {
    return !!(e && e._isSigningKey);
  }
}
function MU(t, e) {
  const r = K4(e), n = { r: wn(r.r), s: wn(r.s) };
  return "0x" + aa().recoverPubKey(wn(t), n, r.recoveryParam).encode("hex", !1);
}
function g8(t, e) {
  const r = wn(t);
  return r.length === 32 ? new PU(r).publicKey : r.length === 33 ? "0x" + aa().keyFromPublic(r).getPublic(!1, "hex") : r.length === 65 ? Ri(r) : S1.throwArgumentError("invalid public or private key", "key", "[REDACTED]");
}
var Px;
(function(t) {
  t[t.legacy = 0] = "legacy", t[t.eip2930 = 1] = "eip2930", t[t.eip1559 = 2] = "eip1559";
})(Px || (Px = {}));
function IU(t) {
  const e = g8(t);
  return qF(vx(qv(vx(e, 1)), 12));
}
function CU(t, e) {
  return IU(MU(wn(t), e));
}
var Gv = {}, V0 = {};
Object.defineProperty(V0, "__esModule", { value: !0 });
var Gn = ar, A1 = ki, TU = 20;
function RU(t, e, r) {
  for (var n = 1634760805, i = 857760878, s = 2036477234, o = 1797285236, a = r[3] << 24 | r[2] << 16 | r[1] << 8 | r[0], u = r[7] << 24 | r[6] << 16 | r[5] << 8 | r[4], l = r[11] << 24 | r[10] << 16 | r[9] << 8 | r[8], d = r[15] << 24 | r[14] << 16 | r[13] << 8 | r[12], p = r[19] << 24 | r[18] << 16 | r[17] << 8 | r[16], w = r[23] << 24 | r[22] << 16 | r[21] << 8 | r[20], A = r[27] << 24 | r[26] << 16 | r[25] << 8 | r[24], M = r[31] << 24 | r[30] << 16 | r[29] << 8 | r[28], N = e[3] << 24 | e[2] << 16 | e[1] << 8 | e[0], L = e[7] << 24 | e[6] << 16 | e[5] << 8 | e[4], B = e[11] << 24 | e[10] << 16 | e[9] << 8 | e[8], $ = e[15] << 24 | e[14] << 16 | e[13] << 8 | e[12], H = n, W = i, V = s, te = o, R = a, K = u, ge = l, Ee = d, Y = p, S = w, m = A, f = M, g = N, b = L, x = B, _ = $, E = 0; E < TU; E += 2)
    H = H + R | 0, g ^= H, g = g >>> 16 | g << 16, Y = Y + g | 0, R ^= Y, R = R >>> 20 | R << 12, W = W + K | 0, b ^= W, b = b >>> 16 | b << 16, S = S + b | 0, K ^= S, K = K >>> 20 | K << 12, V = V + ge | 0, x ^= V, x = x >>> 16 | x << 16, m = m + x | 0, ge ^= m, ge = ge >>> 20 | ge << 12, te = te + Ee | 0, _ ^= te, _ = _ >>> 16 | _ << 16, f = f + _ | 0, Ee ^= f, Ee = Ee >>> 20 | Ee << 12, V = V + ge | 0, x ^= V, x = x >>> 24 | x << 8, m = m + x | 0, ge ^= m, ge = ge >>> 25 | ge << 7, te = te + Ee | 0, _ ^= te, _ = _ >>> 24 | _ << 8, f = f + _ | 0, Ee ^= f, Ee = Ee >>> 25 | Ee << 7, W = W + K | 0, b ^= W, b = b >>> 24 | b << 8, S = S + b | 0, K ^= S, K = K >>> 25 | K << 7, H = H + R | 0, g ^= H, g = g >>> 24 | g << 8, Y = Y + g | 0, R ^= Y, R = R >>> 25 | R << 7, H = H + K | 0, _ ^= H, _ = _ >>> 16 | _ << 16, m = m + _ | 0, K ^= m, K = K >>> 20 | K << 12, W = W + ge | 0, g ^= W, g = g >>> 16 | g << 16, f = f + g | 0, ge ^= f, ge = ge >>> 20 | ge << 12, V = V + Ee | 0, b ^= V, b = b >>> 16 | b << 16, Y = Y + b | 0, Ee ^= Y, Ee = Ee >>> 20 | Ee << 12, te = te + R | 0, x ^= te, x = x >>> 16 | x << 16, S = S + x | 0, R ^= S, R = R >>> 20 | R << 12, V = V + Ee | 0, b ^= V, b = b >>> 24 | b << 8, Y = Y + b | 0, Ee ^= Y, Ee = Ee >>> 25 | Ee << 7, te = te + R | 0, x ^= te, x = x >>> 24 | x << 8, S = S + x | 0, R ^= S, R = R >>> 25 | R << 7, W = W + ge | 0, g ^= W, g = g >>> 24 | g << 8, f = f + g | 0, ge ^= f, ge = ge >>> 25 | ge << 7, H = H + K | 0, _ ^= H, _ = _ >>> 24 | _ << 8, m = m + _ | 0, K ^= m, K = K >>> 25 | K << 7;
  Gn.writeUint32LE(H + n | 0, t, 0), Gn.writeUint32LE(W + i | 0, t, 4), Gn.writeUint32LE(V + s | 0, t, 8), Gn.writeUint32LE(te + o | 0, t, 12), Gn.writeUint32LE(R + a | 0, t, 16), Gn.writeUint32LE(K + u | 0, t, 20), Gn.writeUint32LE(ge + l | 0, t, 24), Gn.writeUint32LE(Ee + d | 0, t, 28), Gn.writeUint32LE(Y + p | 0, t, 32), Gn.writeUint32LE(S + w | 0, t, 36), Gn.writeUint32LE(m + A | 0, t, 40), Gn.writeUint32LE(f + M | 0, t, 44), Gn.writeUint32LE(g + N | 0, t, 48), Gn.writeUint32LE(b + L | 0, t, 52), Gn.writeUint32LE(x + B | 0, t, 56), Gn.writeUint32LE(_ + $ | 0, t, 60);
}
function m8(t, e, r, n, i) {
  if (i === void 0 && (i = 0), t.length !== 32)
    throw new Error("ChaCha: key size must be 32 bytes");
  if (n.length < r.length)
    throw new Error("ChaCha: destination is shorter than source");
  var s, o;
  if (i === 0) {
    if (e.length !== 8 && e.length !== 12)
      throw new Error("ChaCha nonce must be 8 or 12 bytes");
    s = new Uint8Array(16), o = s.length - e.length, s.set(e, o);
  } else {
    if (e.length !== 16)
      throw new Error("ChaCha nonce with counter must be 16 bytes");
    s = e, o = i;
  }
  for (var a = new Uint8Array(64), u = 0; u < r.length; u += 64) {
    RU(a, s, t);
    for (var l = u; l < u + 64 && l < r.length; l++)
      n[l] = r[l] ^ a[l - u];
    OU(s, 0, o);
  }
  return A1.wipe(a), i === 0 && A1.wipe(s), n;
}
V0.streamXOR = m8;
function DU(t, e, r, n) {
  return n === void 0 && (n = 0), A1.wipe(r), m8(t, e, r, r, n);
}
V0.stream = DU;
function OU(t, e, r) {
  for (var n = 1; r--; )
    n = n + (t[e] & 255) | 0, t[e] = n & 255, n >>>= 8, e++;
  if (n > 0)
    throw new Error("ChaCha: counter overflow");
}
var v8 = {}, Ia = {};
Object.defineProperty(Ia, "__esModule", { value: !0 });
function NU(t, e, r) {
  return ~(t - 1) & e | t - 1 & r;
}
Ia.select = NU;
function LU(t, e) {
  return (t | 0) - (e | 0) - 1 >>> 31 & 1;
}
Ia.lessOrEqual = LU;
function b8(t, e) {
  if (t.length !== e.length)
    return 0;
  for (var r = 0, n = 0; n < t.length; n++)
    r |= t[n] ^ e[n];
  return 1 & r - 1 >>> 8;
}
Ia.compare = b8;
function kU(t, e) {
  return t.length === 0 || e.length === 0 ? !1 : b8(t, e) !== 0;
}
Ia.equal = kU;
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 });
  var e = Ia, r = ki;
  t.DIGEST_LENGTH = 16;
  var n = (
    /** @class */
    function() {
      function o(a) {
        this.digestLength = t.DIGEST_LENGTH, this._buffer = new Uint8Array(16), this._r = new Uint16Array(10), this._h = new Uint16Array(10), this._pad = new Uint16Array(8), this._leftover = 0, this._fin = 0, this._finished = !1;
        var u = a[0] | a[1] << 8;
        this._r[0] = u & 8191;
        var l = a[2] | a[3] << 8;
        this._r[1] = (u >>> 13 | l << 3) & 8191;
        var d = a[4] | a[5] << 8;
        this._r[2] = (l >>> 10 | d << 6) & 7939;
        var p = a[6] | a[7] << 8;
        this._r[3] = (d >>> 7 | p << 9) & 8191;
        var w = a[8] | a[9] << 8;
        this._r[4] = (p >>> 4 | w << 12) & 255, this._r[5] = w >>> 1 & 8190;
        var A = a[10] | a[11] << 8;
        this._r[6] = (w >>> 14 | A << 2) & 8191;
        var M = a[12] | a[13] << 8;
        this._r[7] = (A >>> 11 | M << 5) & 8065;
        var N = a[14] | a[15] << 8;
        this._r[8] = (M >>> 8 | N << 8) & 8191, this._r[9] = N >>> 5 & 127, this._pad[0] = a[16] | a[17] << 8, this._pad[1] = a[18] | a[19] << 8, this._pad[2] = a[20] | a[21] << 8, this._pad[3] = a[22] | a[23] << 8, this._pad[4] = a[24] | a[25] << 8, this._pad[5] = a[26] | a[27] << 8, this._pad[6] = a[28] | a[29] << 8, this._pad[7] = a[30] | a[31] << 8;
      }
      return o.prototype._blocks = function(a, u, l) {
        for (var d = this._fin ? 0 : 2048, p = this._h[0], w = this._h[1], A = this._h[2], M = this._h[3], N = this._h[4], L = this._h[5], B = this._h[6], $ = this._h[7], H = this._h[8], W = this._h[9], V = this._r[0], te = this._r[1], R = this._r[2], K = this._r[3], ge = this._r[4], Ee = this._r[5], Y = this._r[6], S = this._r[7], m = this._r[8], f = this._r[9]; l >= 16; ) {
          var g = a[u + 0] | a[u + 1] << 8;
          p += g & 8191;
          var b = a[u + 2] | a[u + 3] << 8;
          w += (g >>> 13 | b << 3) & 8191;
          var x = a[u + 4] | a[u + 5] << 8;
          A += (b >>> 10 | x << 6) & 8191;
          var _ = a[u + 6] | a[u + 7] << 8;
          M += (x >>> 7 | _ << 9) & 8191;
          var E = a[u + 8] | a[u + 9] << 8;
          N += (_ >>> 4 | E << 12) & 8191, L += E >>> 1 & 8191;
          var v = a[u + 10] | a[u + 11] << 8;
          B += (E >>> 14 | v << 2) & 8191;
          var P = a[u + 12] | a[u + 13] << 8;
          $ += (v >>> 11 | P << 5) & 8191;
          var I = a[u + 14] | a[u + 15] << 8;
          H += (P >>> 8 | I << 8) & 8191, W += I >>> 5 | d;
          var F = 0, ce = F;
          ce += p * V, ce += w * (5 * f), ce += A * (5 * m), ce += M * (5 * S), ce += N * (5 * Y), F = ce >>> 13, ce &= 8191, ce += L * (5 * Ee), ce += B * (5 * ge), ce += $ * (5 * K), ce += H * (5 * R), ce += W * (5 * te), F += ce >>> 13, ce &= 8191;
          var D = F;
          D += p * te, D += w * V, D += A * (5 * f), D += M * (5 * m), D += N * (5 * S), F = D >>> 13, D &= 8191, D += L * (5 * Y), D += B * (5 * Ee), D += $ * (5 * ge), D += H * (5 * K), D += W * (5 * R), F += D >>> 13, D &= 8191;
          var oe = F;
          oe += p * R, oe += w * te, oe += A * V, oe += M * (5 * f), oe += N * (5 * m), F = oe >>> 13, oe &= 8191, oe += L * (5 * S), oe += B * (5 * Y), oe += $ * (5 * Ee), oe += H * (5 * ge), oe += W * (5 * K), F += oe >>> 13, oe &= 8191;
          var Z = F;
          Z += p * K, Z += w * R, Z += A * te, Z += M * V, Z += N * (5 * f), F = Z >>> 13, Z &= 8191, Z += L * (5 * m), Z += B * (5 * S), Z += $ * (5 * Y), Z += H * (5 * Ee), Z += W * (5 * ge), F += Z >>> 13, Z &= 8191;
          var J = F;
          J += p * ge, J += w * K, J += A * R, J += M * te, J += N * V, F = J >>> 13, J &= 8191, J += L * (5 * f), J += B * (5 * m), J += $ * (5 * S), J += H * (5 * Y), J += W * (5 * Ee), F += J >>> 13, J &= 8191;
          var Q = F;
          Q += p * Ee, Q += w * ge, Q += A * K, Q += M * R, Q += N * te, F = Q >>> 13, Q &= 8191, Q += L * V, Q += B * (5 * f), Q += $ * (5 * m), Q += H * (5 * S), Q += W * (5 * Y), F += Q >>> 13, Q &= 8191;
          var T = F;
          T += p * Y, T += w * Ee, T += A * ge, T += M * K, T += N * R, F = T >>> 13, T &= 8191, T += L * te, T += B * V, T += $ * (5 * f), T += H * (5 * m), T += W * (5 * S), F += T >>> 13, T &= 8191;
          var X = F;
          X += p * S, X += w * Y, X += A * Ee, X += M * ge, X += N * K, F = X >>> 13, X &= 8191, X += L * R, X += B * te, X += $ * V, X += H * (5 * f), X += W * (5 * m), F += X >>> 13, X &= 8191;
          var re = F;
          re += p * m, re += w * S, re += A * Y, re += M * Ee, re += N * ge, F = re >>> 13, re &= 8191, re += L * K, re += B * R, re += $ * te, re += H * V, re += W * (5 * f), F += re >>> 13, re &= 8191;
          var de = F;
          de += p * f, de += w * m, de += A * S, de += M * Y, de += N * Ee, F = de >>> 13, de &= 8191, de += L * ge, de += B * K, de += $ * R, de += H * te, de += W * V, F += de >>> 13, de &= 8191, F = (F << 2) + F | 0, F = F + ce | 0, ce = F & 8191, F = F >>> 13, D += F, p = ce, w = D, A = oe, M = Z, N = J, L = Q, B = T, $ = X, H = re, W = de, u += 16, l -= 16;
        }
        this._h[0] = p, this._h[1] = w, this._h[2] = A, this._h[3] = M, this._h[4] = N, this._h[5] = L, this._h[6] = B, this._h[7] = $, this._h[8] = H, this._h[9] = W;
      }, o.prototype.finish = function(a, u) {
        u === void 0 && (u = 0);
        var l = new Uint16Array(10), d, p, w, A;
        if (this._leftover) {
          for (A = this._leftover, this._buffer[A++] = 1; A < 16; A++)
            this._buffer[A] = 0;
          this._fin = 1, this._blocks(this._buffer, 0, 16);
        }
        for (d = this._h[1] >>> 13, this._h[1] &= 8191, A = 2; A < 10; A++)
          this._h[A] += d, d = this._h[A] >>> 13, this._h[A] &= 8191;
        for (this._h[0] += d * 5, d = this._h[0] >>> 13, this._h[0] &= 8191, this._h[1] += d, d = this._h[1] >>> 13, this._h[1] &= 8191, this._h[2] += d, l[0] = this._h[0] + 5, d = l[0] >>> 13, l[0] &= 8191, A = 1; A < 10; A++)
          l[A] = this._h[A] + d, d = l[A] >>> 13, l[A] &= 8191;
        for (l[9] -= 8192, p = (d ^ 1) - 1, A = 0; A < 10; A++)
          l[A] &= p;
        for (p = ~p, A = 0; A < 10; A++)
          this._h[A] = this._h[A] & p | l[A];
        for (this._h[0] = (this._h[0] | this._h[1] << 13) & 65535, this._h[1] = (this._h[1] >>> 3 | this._h[2] << 10) & 65535, this._h[2] = (this._h[2] >>> 6 | this._h[3] << 7) & 65535, this._h[3] = (this._h[3] >>> 9 | this._h[4] << 4) & 65535, this._h[4] = (this._h[4] >>> 12 | this._h[5] << 1 | this._h[6] << 14) & 65535, this._h[5] = (this._h[6] >>> 2 | this._h[7] << 11) & 65535, this._h[6] = (this._h[7] >>> 5 | this._h[8] << 8) & 65535, this._h[7] = (this._h[8] >>> 8 | this._h[9] << 5) & 65535, w = this._h[0] + this._pad[0], this._h[0] = w & 65535, A = 1; A < 8; A++)
          w = (this._h[A] + this._pad[A] | 0) + (w >>> 16) | 0, this._h[A] = w & 65535;
        return a[u + 0] = this._h[0] >>> 0, a[u + 1] = this._h[0] >>> 8, a[u + 2] = this._h[1] >>> 0, a[u + 3] = this._h[1] >>> 8, a[u + 4] = this._h[2] >>> 0, a[u + 5] = this._h[2] >>> 8, a[u + 6] = this._h[3] >>> 0, a[u + 7] = this._h[3] >>> 8, a[u + 8] = this._h[4] >>> 0, a[u + 9] = this._h[4] >>> 8, a[u + 10] = this._h[5] >>> 0, a[u + 11] = this._h[5] >>> 8, a[u + 12] = this._h[6] >>> 0, a[u + 13] = this._h[6] >>> 8, a[u + 14] = this._h[7] >>> 0, a[u + 15] = this._h[7] >>> 8, this._finished = !0, this;
      }, o.prototype.update = function(a) {
        var u = 0, l = a.length, d;
        if (this._leftover) {
          d = 16 - this._leftover, d > l && (d = l);
          for (var p = 0; p < d; p++)
            this._buffer[this._leftover + p] = a[u + p];
          if (l -= d, u += d, this._leftover += d, this._leftover < 16)
            return this;
          this._blocks(this._buffer, 0, 16), this._leftover = 0;
        }
        if (l >= 16 && (d = l - l % 16, this._blocks(a, u, d), u += d, l -= d), l) {
          for (var p = 0; p < l; p++)
            this._buffer[this._leftover + p] = a[u + p];
          this._leftover += l;
        }
        return this;
      }, o.prototype.digest = function() {
        if (this._finished)
          throw new Error("Poly1305 was finished");
        var a = new Uint8Array(16);
        return this.finish(a), a;
      }, o.prototype.clean = function() {
        return r.wipe(this._buffer), r.wipe(this._r), r.wipe(this._h), r.wipe(this._pad), this._leftover = 0, this._fin = 0, this._finished = !0, this;
      }, o;
    }()
  );
  t.Poly1305 = n;
  function i(o, a) {
    var u = new n(o);
    u.update(a);
    var l = u.digest();
    return u.clean(), l;
  }
  t.oneTimeAuth = i;
  function s(o, a) {
    return o.length !== t.DIGEST_LENGTH || a.length !== t.DIGEST_LENGTH ? !1 : e.equal(o, a);
  }
  t.equal = s;
})(v8);
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 });
  var e = V0, r = v8, n = ki, i = ar, s = Ia;
  t.KEY_LENGTH = 32, t.NONCE_LENGTH = 12, t.TAG_LENGTH = 16;
  var o = new Uint8Array(16), a = (
    /** @class */
    function() {
      function u(l) {
        if (this.nonceLength = t.NONCE_LENGTH, this.tagLength = t.TAG_LENGTH, l.length !== t.KEY_LENGTH)
          throw new Error("ChaCha20Poly1305 needs 32-byte key");
        this._key = new Uint8Array(l);
      }
      return u.prototype.seal = function(l, d, p, w) {
        if (l.length > 16)
          throw new Error("ChaCha20Poly1305: incorrect nonce length");
        var A = new Uint8Array(16);
        A.set(l, A.length - l.length);
        var M = new Uint8Array(32);
        e.stream(this._key, A, M, 4);
        var N = d.length + this.tagLength, L;
        if (w) {
          if (w.length !== N)
            throw new Error("ChaCha20Poly1305: incorrect destination length");
          L = w;
        } else
          L = new Uint8Array(N);
        return e.streamXOR(this._key, A, d, L, 4), this._authenticate(L.subarray(L.length - this.tagLength, L.length), M, L.subarray(0, L.length - this.tagLength), p), n.wipe(A), L;
      }, u.prototype.open = function(l, d, p, w) {
        if (l.length > 16)
          throw new Error("ChaCha20Poly1305: incorrect nonce length");
        if (d.length < this.tagLength)
          return null;
        var A = new Uint8Array(16);
        A.set(l, A.length - l.length);
        var M = new Uint8Array(32);
        e.stream(this._key, A, M, 4);
        var N = new Uint8Array(this.tagLength);
        if (this._authenticate(N, M, d.subarray(0, d.length - this.tagLength), p), !s.equal(N, d.subarray(d.length - this.tagLength, d.length)))
          return null;
        var L = d.length - this.tagLength, B;
        if (w) {
          if (w.length !== L)
            throw new Error("ChaCha20Poly1305: incorrect destination length");
          B = w;
        } else
          B = new Uint8Array(L);
        return e.streamXOR(this._key, A, d.subarray(0, d.length - this.tagLength), B, 4), n.wipe(A), B;
      }, u.prototype.clean = function() {
        return n.wipe(this._key), this;
      }, u.prototype._authenticate = function(l, d, p, w) {
        var A = new r.Poly1305(d);
        w && (A.update(w), w.length % 16 > 0 && A.update(o.subarray(w.length % 16))), A.update(p), p.length % 16 > 0 && A.update(o.subarray(p.length % 16));
        var M = new Uint8Array(8);
        w && i.writeUint64LE(w.length, M), A.update(M), i.writeUint64LE(p.length, M), A.update(M);
        for (var N = A.digest(), L = 0; L < N.length; L++)
          l[L] = N[L];
        A.clean(), n.wipe(N), n.wipe(M);
      }, u;
    }()
  );
  t.ChaCha20Poly1305 = a;
})(Gv);
var y8 = {}, Gl = {}, Yv = {};
Object.defineProperty(Yv, "__esModule", { value: !0 });
function $U(t) {
  return typeof t.saveState < "u" && typeof t.restoreState < "u" && typeof t.cleanSavedState < "u";
}
Yv.isSerializableHash = $U;
Object.defineProperty(Gl, "__esModule", { value: !0 });
var Ls = Yv, BU = Ia, FU = ki, w8 = (
  /** @class */
  function() {
    function t(e, r) {
      this._finished = !1, this._inner = new e(), this._outer = new e(), this.blockSize = this._outer.blockSize, this.digestLength = this._outer.digestLength;
      var n = new Uint8Array(this.blockSize);
      r.length > this.blockSize ? this._inner.update(r).finish(n).clean() : n.set(r);
      for (var i = 0; i < n.length; i++)
        n[i] ^= 54;
      this._inner.update(n);
      for (var i = 0; i < n.length; i++)
        n[i] ^= 106;
      this._outer.update(n), Ls.isSerializableHash(this._inner) && Ls.isSerializableHash(this._outer) && (this._innerKeyedState = this._inner.saveState(), this._outerKeyedState = this._outer.saveState()), FU.wipe(n);
    }
    return t.prototype.reset = function() {
      if (!Ls.isSerializableHash(this._inner) || !Ls.isSerializableHash(this._outer))
        throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");
      return this._inner.restoreState(this._innerKeyedState), this._outer.restoreState(this._outerKeyedState), this._finished = !1, this;
    }, t.prototype.clean = function() {
      Ls.isSerializableHash(this._inner) && this._inner.cleanSavedState(this._innerKeyedState), Ls.isSerializableHash(this._outer) && this._outer.cleanSavedState(this._outerKeyedState), this._inner.clean(), this._outer.clean();
    }, t.prototype.update = function(e) {
      return this._inner.update(e), this;
    }, t.prototype.finish = function(e) {
      return this._finished ? (this._outer.finish(e), this) : (this._inner.finish(e), this._outer.update(e.subarray(0, this.digestLength)).finish(e), this._finished = !0, this);
    }, t.prototype.digest = function() {
      var e = new Uint8Array(this.digestLength);
      return this.finish(e), e;
    }, t.prototype.saveState = function() {
      if (!Ls.isSerializableHash(this._inner))
        throw new Error("hmac: can't saveState() because hash doesn't implement it");
      return this._inner.saveState();
    }, t.prototype.restoreState = function(e) {
      if (!Ls.isSerializableHash(this._inner) || !Ls.isSerializableHash(this._outer))
        throw new Error("hmac: can't restoreState() because hash doesn't implement it");
      return this._inner.restoreState(e), this._outer.restoreState(this._outerKeyedState), this._finished = !1, this;
    }, t.prototype.cleanSavedState = function(e) {
      if (!Ls.isSerializableHash(this._inner))
        throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");
      this._inner.cleanSavedState(e);
    }, t;
  }()
);
Gl.HMAC = w8;
function jU(t, e, r) {
  var n = new w8(t, e);
  n.update(r);
  var i = n.digest();
  return n.clean(), i;
}
Gl.hmac = jU;
Gl.equal = BU.equal;
Object.defineProperty(y8, "__esModule", { value: !0 });
var Mx = Gl, Ix = ki, UU = (
  /** @class */
  function() {
    function t(e, r, n, i) {
      n === void 0 && (n = new Uint8Array(0)), this._counter = new Uint8Array(1), this._hash = e, this._info = i;
      var s = Mx.hmac(this._hash, n, r);
      this._hmac = new Mx.HMAC(e, s), this._buffer = new Uint8Array(this._hmac.digestLength), this._bufpos = this._buffer.length;
    }
    return t.prototype._fillBuffer = function() {
      this._counter[0]++;
      var e = this._counter[0];
      if (e === 0)
        throw new Error("hkdf: cannot expand more");
      this._hmac.reset(), e > 1 && this._hmac.update(this._buffer), this._info && this._hmac.update(this._info), this._hmac.update(this._counter), this._hmac.finish(this._buffer), this._bufpos = 0;
    }, t.prototype.expand = function(e) {
      for (var r = new Uint8Array(e), n = 0; n < r.length; n++)
        this._bufpos === this._buffer.length && this._fillBuffer(), r[n] = this._buffer[this._bufpos++];
      return r;
    }, t.prototype.clean = function() {
      this._hmac.clean(), Ix.wipe(this._buffer), Ix.wipe(this._counter), this._bufpos = 0;
    }, t;
  }()
), qU = y8.HKDF = UU, Yl = {};
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 });
  var e = ar, r = ki;
  t.DIGEST_LENGTH = 32, t.BLOCK_SIZE = 64;
  var n = (
    /** @class */
    function() {
      function a() {
        this.digestLength = t.DIGEST_LENGTH, this.blockSize = t.BLOCK_SIZE, this._state = new Int32Array(8), this._temp = new Int32Array(64), this._buffer = new Uint8Array(128), this._bufferLength = 0, this._bytesHashed = 0, this._finished = !1, this.reset();
      }
      return a.prototype._initState = function() {
        this._state[0] = 1779033703, this._state[1] = 3144134277, this._state[2] = 1013904242, this._state[3] = 2773480762, this._state[4] = 1359893119, this._state[5] = 2600822924, this._state[6] = 528734635, this._state[7] = 1541459225;
      }, a.prototype.reset = function() {
        return this._initState(), this._bufferLength = 0, this._bytesHashed = 0, this._finished = !1, this;
      }, a.prototype.clean = function() {
        r.wipe(this._buffer), r.wipe(this._temp), this.reset();
      }, a.prototype.update = function(u, l) {
        if (l === void 0 && (l = u.length), this._finished)
          throw new Error("SHA256: can't update because hash was finished.");
        var d = 0;
        if (this._bytesHashed += l, this._bufferLength > 0) {
          for (; this._bufferLength < this.blockSize && l > 0; )
            this._buffer[this._bufferLength++] = u[d++], l--;
          this._bufferLength === this.blockSize && (s(this._temp, this._state, this._buffer, 0, this.blockSize), this._bufferLength = 0);
        }
        for (l >= this.blockSize && (d = s(this._temp, this._state, u, d, l), l %= this.blockSize); l > 0; )
          this._buffer[this._bufferLength++] = u[d++], l--;
        return this;
      }, a.prototype.finish = function(u) {
        if (!this._finished) {
          var l = this._bytesHashed, d = this._bufferLength, p = l / 536870912 | 0, w = l << 3, A = l % 64 < 56 ? 64 : 128;
          this._buffer[d] = 128;
          for (var M = d + 1; M < A - 8; M++)
            this._buffer[M] = 0;
          e.writeUint32BE(p, this._buffer, A - 8), e.writeUint32BE(w, this._buffer, A - 4), s(this._temp, this._state, this._buffer, 0, A), this._finished = !0;
        }
        for (var M = 0; M < this.digestLength / 4; M++)
          e.writeUint32BE(this._state[M], u, M * 4);
        return this;
      }, a.prototype.digest = function() {
        var u = new Uint8Array(this.digestLength);
        return this.finish(u), u;
      }, a.prototype.saveState = function() {
        if (this._finished)
          throw new Error("SHA256: cannot save finished state");
        return {
          state: new Int32Array(this._state),
          buffer: this._bufferLength > 0 ? new Uint8Array(this._buffer) : void 0,
          bufferLength: this._bufferLength,
          bytesHashed: this._bytesHashed
        };
      }, a.prototype.restoreState = function(u) {
        return this._state.set(u.state), this._bufferLength = u.bufferLength, u.buffer && this._buffer.set(u.buffer), this._bytesHashed = u.bytesHashed, this._finished = !1, this;
      }, a.prototype.cleanSavedState = function(u) {
        r.wipe(u.state), u.buffer && r.wipe(u.buffer), u.bufferLength = 0, u.bytesHashed = 0;
      }, a;
    }()
  );
  t.SHA256 = n;
  var i = new Int32Array([
    1116352408,
    1899447441,
    3049323471,
    3921009573,
    961987163,
    1508970993,
    2453635748,
    2870763221,
    3624381080,
    310598401,
    607225278,
    1426881987,
    1925078388,
    2162078206,
    2614888103,
    3248222580,
    3835390401,
    4022224774,
    264347078,
    604807628,
    770255983,
    1249150122,
    1555081692,
    1996064986,
    2554220882,
    2821834349,
    2952996808,
    3210313671,
    3336571891,
    3584528711,
    113926993,
    338241895,
    666307205,
    773529912,
    1294757372,
    1396182291,
    1695183700,
    1986661051,
    2177026350,
    2456956037,
    2730485921,
    2820302411,
    3259730800,
    3345764771,
    3516065817,
    3600352804,
    4094571909,
    275423344,
    430227734,
    506948616,
    659060556,
    883997877,
    958139571,
    1322822218,
    1537002063,
    1747873779,
    1955562222,
    2024104815,
    2227730452,
    2361852424,
    2428436474,
    2756734187,
    3204031479,
    3329325298
  ]);
  function s(a, u, l, d, p) {
    for (; p >= 64; ) {
      for (var w = u[0], A = u[1], M = u[2], N = u[3], L = u[4], B = u[5], $ = u[6], H = u[7], W = 0; W < 16; W++) {
        var V = d + W * 4;
        a[W] = e.readUint32BE(l, V);
      }
      for (var W = 16; W < 64; W++) {
        var te = a[W - 2], R = (te >>> 17 | te << 15) ^ (te >>> 19 | te << 13) ^ te >>> 10;
        te = a[W - 15];
        var K = (te >>> 7 | te << 25) ^ (te >>> 18 | te << 14) ^ te >>> 3;
        a[W] = (R + a[W - 7] | 0) + (K + a[W - 16] | 0);
      }
      for (var W = 0; W < 64; W++) {
        var R = (((L >>> 6 | L << 26) ^ (L >>> 11 | L << 21) ^ (L >>> 25 | L << 7)) + (L & B ^ ~L & $) | 0) + (H + (i[W] + a[W] | 0) | 0) | 0, K = ((w >>> 2 | w << 30) ^ (w >>> 13 | w << 19) ^ (w >>> 22 | w << 10)) + (w & A ^ w & M ^ A & M) | 0;
        H = $, $ = B, B = L, L = N + R | 0, N = M, M = A, A = w, w = R + K | 0;
      }
      u[0] += w, u[1] += A, u[2] += M, u[3] += N, u[4] += L, u[5] += B, u[6] += $, u[7] += H, d += 64, p -= 64;
    }
    return d;
  }
  function o(a) {
    var u = new n();
    u.update(a);
    var l = u.digest();
    return u.clean(), l;
  }
  t.hash = o;
})(Yl);
var Jv = {};
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 }), t.sharedKey = t.generateKeyPair = t.generateKeyPairFromSeed = t.scalarMultBase = t.scalarMult = t.SHARED_KEY_LENGTH = t.SECRET_KEY_LENGTH = t.PUBLIC_KEY_LENGTH = void 0;
  const e = Pa, r = ki;
  t.PUBLIC_KEY_LENGTH = 32, t.SECRET_KEY_LENGTH = 32, t.SHARED_KEY_LENGTH = 32;
  function n(W) {
    const V = new Float64Array(16);
    if (W)
      for (let te = 0; te < W.length; te++)
        V[te] = W[te];
    return V;
  }
  const i = new Uint8Array(32);
  i[0] = 9;
  const s = n([56129, 1]);
  function o(W) {
    let V = 1;
    for (let te = 0; te < 16; te++) {
      let R = W[te] + V + 65535;
      V = Math.floor(R / 65536), W[te] = R - V * 65536;
    }
    W[0] += V - 1 + 37 * (V - 1);
  }
  function a(W, V, te) {
    const R = ~(te - 1);
    for (let K = 0; K < 16; K++) {
      const ge = R & (W[K] ^ V[K]);
      W[K] ^= ge, V[K] ^= ge;
    }
  }
  function u(W, V) {
    const te = n(), R = n();
    for (let K = 0; K < 16; K++)
      R[K] = V[K];
    o(R), o(R), o(R);
    for (let K = 0; K < 2; K++) {
      te[0] = R[0] - 65517;
      for (let Ee = 1; Ee < 15; Ee++)
        te[Ee] = R[Ee] - 65535 - (te[Ee - 1] >> 16 & 1), te[Ee - 1] &= 65535;
      te[15] = R[15] - 32767 - (te[14] >> 16 & 1);
      const ge = te[15] >> 16 & 1;
      te[14] &= 65535, a(R, te, 1 - ge);
    }
    for (let K = 0; K < 16; K++)
      W[2 * K] = R[K] & 255, W[2 * K + 1] = R[K] >> 8;
  }
  function l(W, V) {
    for (let te = 0; te < 16; te++)
      W[te] = V[2 * te] + (V[2 * te + 1] << 8);
    W[15] &= 32767;
  }
  function d(W, V, te) {
    for (let R = 0; R < 16; R++)
      W[R] = V[R] + te[R];
  }
  function p(W, V, te) {
    for (let R = 0; R < 16; R++)
      W[R] = V[R] - te[R];
  }
  function w(W, V, te) {
    let R, K, ge = 0, Ee = 0, Y = 0, S = 0, m = 0, f = 0, g = 0, b = 0, x = 0, _ = 0, E = 0, v = 0, P = 0, I = 0, F = 0, ce = 0, D = 0, oe = 0, Z = 0, J = 0, Q = 0, T = 0, X = 0, re = 0, de = 0, ie = 0, ue = 0, ve = 0, Pe = 0, De = 0, Ce = 0, $e = te[0], Me = te[1], Ne = te[2], Ke = te[3], Le = te[4], qe = te[5], ze = te[6], _e = te[7], Ze = te[8], at = te[9], ke = te[10], Qe = te[11], tt = te[12], Ye = te[13], dt = te[14], lt = te[15];
    R = V[0], ge += R * $e, Ee += R * Me, Y += R * Ne, S += R * Ke, m += R * Le, f += R * qe, g += R * ze, b += R * _e, x += R * Ze, _ += R * at, E += R * ke, v += R * Qe, P += R * tt, I += R * Ye, F += R * dt, ce += R * lt, R = V[1], Ee += R * $e, Y += R * Me, S += R * Ne, m += R * Ke, f += R * Le, g += R * qe, b += R * ze, x += R * _e, _ += R * Ze, E += R * at, v += R * ke, P += R * Qe, I += R * tt, F += R * Ye, ce += R * dt, D += R * lt, R = V[2], Y += R * $e, S += R * Me, m += R * Ne, f += R * Ke, g += R * Le, b += R * qe, x += R * ze, _ += R * _e, E += R * Ze, v += R * at, P += R * ke, I += R * Qe, F += R * tt, ce += R * Ye, D += R * dt, oe += R * lt, R = V[3], S += R * $e, m += R * Me, f += R * Ne, g += R * Ke, b += R * Le, x += R * qe, _ += R * ze, E += R * _e, v += R * Ze, P += R * at, I += R * ke, F += R * Qe, ce += R * tt, D += R * Ye, oe += R * dt, Z += R * lt, R = V[4], m += R * $e, f += R * Me, g += R * Ne, b += R * Ke, x += R * Le, _ += R * qe, E += R * ze, v += R * _e, P += R * Ze, I += R * at, F += R * ke, ce += R * Qe, D += R * tt, oe += R * Ye, Z += R * dt, J += R * lt, R = V[5], f += R * $e, g += R * Me, b += R * Ne, x += R * Ke, _ += R * Le, E += R * qe, v += R * ze, P += R * _e, I += R * Ze, F += R * at, ce += R * ke, D += R * Qe, oe += R * tt, Z += R * Ye, J += R * dt, Q += R * lt, R = V[6], g += R * $e, b += R * Me, x += R * Ne, _ += R * Ke, E += R * Le, v += R * qe, P += R * ze, I += R * _e, F += R * Ze, ce += R * at, D += R * ke, oe += R * Qe, Z += R * tt, J += R * Ye, Q += R * dt, T += R * lt, R = V[7], b += R * $e, x += R * Me, _ += R * Ne, E += R * Ke, v += R * Le, P += R * qe, I += R * ze, F += R * _e, ce += R * Ze, D += R * at, oe += R * ke, Z += R * Qe, J += R * tt, Q += R * Ye, T += R * dt, X += R * lt, R = V[8], x += R * $e, _ += R * Me, E += R * Ne, v += R * Ke, P += R * Le, I += R * qe, F += R * ze, ce += R * _e, D += R * Ze, oe += R * at, Z += R * ke, J += R * Qe, Q += R * tt, T += R * Ye, X += R * dt, re += R * lt, R = V[9], _ += R * $e, E += R * Me, v += R * Ne, P += R * Ke, I += R * Le, F += R * qe, ce += R * ze, D += R * _e, oe += R * Ze, Z += R * at, J += R * ke, Q += R * Qe, T += R * tt, X += R * Ye, re += R * dt, de += R * lt, R = V[10], E += R * $e, v += R * Me, P += R * Ne, I += R * Ke, F += R * Le, ce += R * qe, D += R * ze, oe += R * _e, Z += R * Ze, J += R * at, Q += R * ke, T += R * Qe, X += R * tt, re += R * Ye, de += R * dt, ie += R * lt, R = V[11], v += R * $e, P += R * Me, I += R * Ne, F += R * Ke, ce += R * Le, D += R * qe, oe += R * ze, Z += R * _e, J += R * Ze, Q += R * at, T += R * ke, X += R * Qe, re += R * tt, de += R * Ye, ie += R * dt, ue += R * lt, R = V[12], P += R * $e, I += R * Me, F += R * Ne, ce += R * Ke, D += R * Le, oe += R * qe, Z += R * ze, J += R * _e, Q += R * Ze, T += R * at, X += R * ke, re += R * Qe, de += R * tt, ie += R * Ye, ue += R * dt, ve += R * lt, R = V[13], I += R * $e, F += R * Me, ce += R * Ne, D += R * Ke, oe += R * Le, Z += R * qe, J += R * ze, Q += R * _e, T += R * Ze, X += R * at, re += R * ke, de += R * Qe, ie += R * tt, ue += R * Ye, ve += R * dt, Pe += R * lt, R = V[14], F += R * $e, ce += R * Me, D += R * Ne, oe += R * Ke, Z += R * Le, J += R * qe, Q += R * ze, T += R * _e, X += R * Ze, re += R * at, de += R * ke, ie += R * Qe, ue += R * tt, ve += R * Ye, Pe += R * dt, De += R * lt, R = V[15], ce += R * $e, D += R * Me, oe += R * Ne, Z += R * Ke, J += R * Le, Q += R * qe, T += R * ze, X += R * _e, re += R * Ze, de += R * at, ie += R * ke, ue += R * Qe, ve += R * tt, Pe += R * Ye, De += R * dt, Ce += R * lt, ge += 38 * D, Ee += 38 * oe, Y += 38 * Z, S += 38 * J, m += 38 * Q, f += 38 * T, g += 38 * X, b += 38 * re, x += 38 * de, _ += 38 * ie, E += 38 * ue, v += 38 * ve, P += 38 * Pe, I += 38 * De, F += 38 * Ce, K = 1, R = ge + K + 65535, K = Math.floor(R / 65536), ge = R - K * 65536, R = Ee + K + 65535, K = Math.floor(R / 65536), Ee = R - K * 65536, R = Y + K + 65535, K = Math.floor(R / 65536), Y = R - K * 65536, R = S + K + 65535, K = Math.floor(R / 65536), S = R - K * 65536, R = m + K + 65535, K = Math.floor(R / 65536), m = R - K * 65536, R = f + K + 65535, K = Math.floor(R / 65536), f = R - K * 65536, R = g + K + 65535, K = Math.floor(R / 65536), g = R - K * 65536, R = b + K + 65535, K = Math.floor(R / 65536), b = R - K * 65536, R = x + K + 65535, K = Math.floor(R / 65536), x = R - K * 65536, R = _ + K + 65535, K = Math.floor(R / 65536), _ = R - K * 65536, R = E + K + 65535, K = Math.floor(R / 65536), E = R - K * 65536, R = v + K + 65535, K = Math.floor(R / 65536), v = R - K * 65536, R = P + K + 65535, K = Math.floor(R / 65536), P = R - K * 65536, R = I + K + 65535, K = Math.floor(R / 65536), I = R - K * 65536, R = F + K + 65535, K = Math.floor(R / 65536), F = R - K * 65536, R = ce + K + 65535, K = Math.floor(R / 65536), ce = R - K * 65536, ge += K - 1 + 37 * (K - 1), K = 1, R = ge + K + 65535, K = Math.floor(R / 65536), ge = R - K * 65536, R = Ee + K + 65535, K = Math.floor(R / 65536), Ee = R - K * 65536, R = Y + K + 65535, K = Math.floor(R / 65536), Y = R - K * 65536, R = S + K + 65535, K = Math.floor(R / 65536), S = R - K * 65536, R = m + K + 65535, K = Math.floor(R / 65536), m = R - K * 65536, R = f + K + 65535, K = Math.floor(R / 65536), f = R - K * 65536, R = g + K + 65535, K = Math.floor(R / 65536), g = R - K * 65536, R = b + K + 65535, K = Math.floor(R / 65536), b = R - K * 65536, R = x + K + 65535, K = Math.floor(R / 65536), x = R - K * 65536, R = _ + K + 65535, K = Math.floor(R / 65536), _ = R - K * 65536, R = E + K + 65535, K = Math.floor(R / 65536), E = R - K * 65536, R = v + K + 65535, K = Math.floor(R / 65536), v = R - K * 65536, R = P + K + 65535, K = Math.floor(R / 65536), P = R - K * 65536, R = I + K + 65535, K = Math.floor(R / 65536), I = R - K * 65536, R = F + K + 65535, K = Math.floor(R / 65536), F = R - K * 65536, R = ce + K + 65535, K = Math.floor(R / 65536), ce = R - K * 65536, ge += K - 1 + 37 * (K - 1), W[0] = ge, W[1] = Ee, W[2] = Y, W[3] = S, W[4] = m, W[5] = f, W[6] = g, W[7] = b, W[8] = x, W[9] = _, W[10] = E, W[11] = v, W[12] = P, W[13] = I, W[14] = F, W[15] = ce;
  }
  function A(W, V) {
    w(W, V, V);
  }
  function M(W, V) {
    const te = n();
    for (let R = 0; R < 16; R++)
      te[R] = V[R];
    for (let R = 253; R >= 0; R--)
      A(te, te), R !== 2 && R !== 4 && w(te, te, V);
    for (let R = 0; R < 16; R++)
      W[R] = te[R];
  }
  function N(W, V) {
    const te = new Uint8Array(32), R = new Float64Array(80), K = n(), ge = n(), Ee = n(), Y = n(), S = n(), m = n();
    for (let x = 0; x < 31; x++)
      te[x] = W[x];
    te[31] = W[31] & 127 | 64, te[0] &= 248, l(R, V);
    for (let x = 0; x < 16; x++)
      ge[x] = R[x];
    K[0] = Y[0] = 1;
    for (let x = 254; x >= 0; --x) {
      const _ = te[x >>> 3] >>> (x & 7) & 1;
      a(K, ge, _), a(Ee, Y, _), d(S, K, Ee), p(K, K, Ee), d(Ee, ge, Y), p(ge, ge, Y), A(Y, S), A(m, K), w(K, Ee, K), w(Ee, ge, S), d(S, K, Ee), p(K, K, Ee), A(ge, K), p(Ee, Y, m), w(K, Ee, s), d(K, K, Y), w(Ee, Ee, K), w(K, Y, m), w(Y, ge, R), A(ge, S), a(K, ge, _), a(Ee, Y, _);
    }
    for (let x = 0; x < 16; x++)
      R[x + 16] = K[x], R[x + 32] = Ee[x], R[x + 48] = ge[x], R[x + 64] = Y[x];
    const f = R.subarray(32), g = R.subarray(16);
    M(f, f), w(g, g, f);
    const b = new Uint8Array(32);
    return u(b, g), b;
  }
  t.scalarMult = N;
  function L(W) {
    return N(W, i);
  }
  t.scalarMultBase = L;
  function B(W) {
    if (W.length !== t.SECRET_KEY_LENGTH)
      throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);
    const V = new Uint8Array(W);
    return {
      publicKey: L(V),
      secretKey: V
    };
  }
  t.generateKeyPairFromSeed = B;
  function $(W) {
    const V = (0, e.randomBytes)(32, W), te = B(V);
    return (0, r.wipe)(V), te;
  }
  t.generateKeyPair = $;
  function H(W, V, te = !1) {
    if (W.length !== t.PUBLIC_KEY_LENGTH)
      throw new Error("X25519: incorrect secret key length");
    if (V.length !== t.PUBLIC_KEY_LENGTH)
      throw new Error("X25519: incorrect public key length");
    const R = N(W, V);
    if (te) {
      let K = 0;
      for (let ge = 0; ge < R.length; ge++)
        K |= R[ge];
      if (K === 0)
        throw new Error("X25519: invalid shared key");
    }
    return R;
  }
  t.sharedKey = H;
})(Jv);
var x8 = {};
const zU = "elliptic", WU = "6.6.0", HU = "EC cryptography", KU = "lib/elliptic.js", VU = [
  "lib"
], GU = {
  lint: "eslint lib test",
  "lint:fix": "npm run lint -- --fix",
  unit: "istanbul test _mocha --reporter=spec test/index.js",
  test: "npm run lint && npm run unit",
  version: "grunt dist && git add dist/"
}, YU = {
  type: "git",
  url: "git@github.com:indutny/elliptic"
}, JU = [
  "EC",
  "Elliptic",
  "curve",
  "Cryptography"
], XU = "Fedor Indutny <fedor@indutny.com>", ZU = "MIT", QU = {
  url: "https://github.com/indutny/elliptic/issues"
}, eq = "https://github.com/indutny/elliptic", tq = {
  brfs: "^2.0.2",
  coveralls: "^3.1.0",
  eslint: "^7.6.0",
  grunt: "^1.2.1",
  "grunt-browserify": "^5.3.0",
  "grunt-cli": "^1.3.2",
  "grunt-contrib-connect": "^3.0.0",
  "grunt-contrib-copy": "^1.0.0",
  "grunt-contrib-uglify": "^5.0.0",
  "grunt-mocha-istanbul": "^5.0.2",
  "grunt-saucelabs": "^9.0.1",
  istanbul: "^0.4.5",
  mocha: "^8.0.1"
}, rq = {
  "bn.js": "^4.11.9",
  brorand: "^1.1.0",
  "hash.js": "^1.0.0",
  "hmac-drbg": "^1.0.1",
  inherits: "^2.0.4",
  "minimalistic-assert": "^1.0.1",
  "minimalistic-crypto-utils": "^1.0.1"
}, nq = {
  name: zU,
  version: WU,
  description: HU,
  main: KU,
  files: VU,
  scripts: GU,
  repository: YU,
  keywords: JU,
  author: XU,
  license: ZU,
  bugs: QU,
  homepage: eq,
  devDependencies: tq,
  dependencies: rq
};
var Bi = {}, Xv = { exports: {} };
Xv.exports;
(function(t) {
  (function(e, r) {
    function n(Y, S) {
      if (!Y) throw new Error(S || "Assertion failed");
    }
    function i(Y, S) {
      Y.super_ = S;
      var m = function() {
      };
      m.prototype = S.prototype, Y.prototype = new m(), Y.prototype.constructor = Y;
    }
    function s(Y, S, m) {
      if (s.isBN(Y))
        return Y;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, Y !== null && ((S === "le" || S === "be") && (m = S, S = 10), this._init(Y || 0, S || 10, m || "be"));
    }
    typeof e == "object" ? e.exports = s : r.BN = s, s.BN = s, s.wordSize = 26;
    var o;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? o = window.Buffer : o = Wl.Buffer;
    } catch {
    }
    s.isBN = function(S) {
      return S instanceof s ? !0 : S !== null && typeof S == "object" && S.constructor.wordSize === s.wordSize && Array.isArray(S.words);
    }, s.max = function(S, m) {
      return S.cmp(m) > 0 ? S : m;
    }, s.min = function(S, m) {
      return S.cmp(m) < 0 ? S : m;
    }, s.prototype._init = function(S, m, f) {
      if (typeof S == "number")
        return this._initNumber(S, m, f);
      if (typeof S == "object")
        return this._initArray(S, m, f);
      m === "hex" && (m = 16), n(m === (m | 0) && m >= 2 && m <= 36), S = S.toString().replace(/\s+/g, "");
      var g = 0;
      S[0] === "-" && (g++, this.negative = 1), g < S.length && (m === 16 ? this._parseHex(S, g, f) : (this._parseBase(S, m, g), f === "le" && this._initArray(this.toArray(), m, f)));
    }, s.prototype._initNumber = function(S, m, f) {
      S < 0 && (this.negative = 1, S = -S), S < 67108864 ? (this.words = [S & 67108863], this.length = 1) : S < 4503599627370496 ? (this.words = [
        S & 67108863,
        S / 67108864 & 67108863
      ], this.length = 2) : (n(S < 9007199254740992), this.words = [
        S & 67108863,
        S / 67108864 & 67108863,
        1
      ], this.length = 3), f === "le" && this._initArray(this.toArray(), m, f);
    }, s.prototype._initArray = function(S, m, f) {
      if (n(typeof S.length == "number"), S.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(S.length / 3), this.words = new Array(this.length);
      for (var g = 0; g < this.length; g++)
        this.words[g] = 0;
      var b, x, _ = 0;
      if (f === "be")
        for (g = S.length - 1, b = 0; g >= 0; g -= 3)
          x = S[g] | S[g - 1] << 8 | S[g - 2] << 16, this.words[b] |= x << _ & 67108863, this.words[b + 1] = x >>> 26 - _ & 67108863, _ += 24, _ >= 26 && (_ -= 26, b++);
      else if (f === "le")
        for (g = 0, b = 0; g < S.length; g += 3)
          x = S[g] | S[g + 1] << 8 | S[g + 2] << 16, this.words[b] |= x << _ & 67108863, this.words[b + 1] = x >>> 26 - _ & 67108863, _ += 24, _ >= 26 && (_ -= 26, b++);
      return this.strip();
    };
    function a(Y, S) {
      var m = Y.charCodeAt(S);
      return m >= 65 && m <= 70 ? m - 55 : m >= 97 && m <= 102 ? m - 87 : m - 48 & 15;
    }
    function u(Y, S, m) {
      var f = a(Y, m);
      return m - 1 >= S && (f |= a(Y, m - 1) << 4), f;
    }
    s.prototype._parseHex = function(S, m, f) {
      this.length = Math.ceil((S.length - m) / 6), this.words = new Array(this.length);
      for (var g = 0; g < this.length; g++)
        this.words[g] = 0;
      var b = 0, x = 0, _;
      if (f === "be")
        for (g = S.length - 1; g >= m; g -= 2)
          _ = u(S, m, g) << b, this.words[x] |= _ & 67108863, b >= 18 ? (b -= 18, x += 1, this.words[x] |= _ >>> 26) : b += 8;
      else {
        var E = S.length - m;
        for (g = E % 2 === 0 ? m + 1 : m; g < S.length; g += 2)
          _ = u(S, m, g) << b, this.words[x] |= _ & 67108863, b >= 18 ? (b -= 18, x += 1, this.words[x] |= _ >>> 26) : b += 8;
      }
      this.strip();
    };
    function l(Y, S, m, f) {
      for (var g = 0, b = Math.min(Y.length, m), x = S; x < b; x++) {
        var _ = Y.charCodeAt(x) - 48;
        g *= f, _ >= 49 ? g += _ - 49 + 10 : _ >= 17 ? g += _ - 17 + 10 : g += _;
      }
      return g;
    }
    s.prototype._parseBase = function(S, m, f) {
      this.words = [0], this.length = 1;
      for (var g = 0, b = 1; b <= 67108863; b *= m)
        g++;
      g--, b = b / m | 0;
      for (var x = S.length - f, _ = x % g, E = Math.min(x, x - _) + f, v = 0, P = f; P < E; P += g)
        v = l(S, P, P + g, m), this.imuln(b), this.words[0] + v < 67108864 ? this.words[0] += v : this._iaddn(v);
      if (_ !== 0) {
        var I = 1;
        for (v = l(S, P, S.length, m), P = 0; P < _; P++)
          I *= m;
        this.imuln(I), this.words[0] + v < 67108864 ? this.words[0] += v : this._iaddn(v);
      }
      this.strip();
    }, s.prototype.copy = function(S) {
      S.words = new Array(this.length);
      for (var m = 0; m < this.length; m++)
        S.words[m] = this.words[m];
      S.length = this.length, S.negative = this.negative, S.red = this.red;
    }, s.prototype.clone = function() {
      var S = new s(null);
      return this.copy(S), S;
    }, s.prototype._expand = function(S) {
      for (; this.length < S; )
        this.words[this.length++] = 0;
      return this;
    }, s.prototype.strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, s.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, s.prototype.inspect = function() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    };
    var d = [
      "",
      "0",
      "00",
      "000",
      "0000",
      "00000",
      "000000",
      "0000000",
      "00000000",
      "000000000",
      "0000000000",
      "00000000000",
      "000000000000",
      "0000000000000",
      "00000000000000",
      "000000000000000",
      "0000000000000000",
      "00000000000000000",
      "000000000000000000",
      "0000000000000000000",
      "00000000000000000000",
      "000000000000000000000",
      "0000000000000000000000",
      "00000000000000000000000",
      "000000000000000000000000",
      "0000000000000000000000000"
    ], p = [
      0,
      0,
      25,
      16,
      12,
      11,
      10,
      9,
      8,
      8,
      7,
      7,
      7,
      7,
      6,
      6,
      6,
      6,
      6,
      6,
      6,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5,
      5
    ], w = [
      0,
      0,
      33554432,
      43046721,
      16777216,
      48828125,
      60466176,
      40353607,
      16777216,
      43046721,
      1e7,
      19487171,
      35831808,
      62748517,
      7529536,
      11390625,
      16777216,
      24137569,
      34012224,
      47045881,
      64e6,
      4084101,
      5153632,
      6436343,
      7962624,
      9765625,
      11881376,
      14348907,
      17210368,
      20511149,
      243e5,
      28629151,
      33554432,
      39135393,
      45435424,
      52521875,
      60466176
    ];
    s.prototype.toString = function(S, m) {
      S = S || 10, m = m | 0 || 1;
      var f;
      if (S === 16 || S === "hex") {
        f = "";
        for (var g = 0, b = 0, x = 0; x < this.length; x++) {
          var _ = this.words[x], E = ((_ << g | b) & 16777215).toString(16);
          b = _ >>> 24 - g & 16777215, g += 2, g >= 26 && (g -= 26, x--), b !== 0 || x !== this.length - 1 ? f = d[6 - E.length] + E + f : f = E + f;
        }
        for (b !== 0 && (f = b.toString(16) + f); f.length % m !== 0; )
          f = "0" + f;
        return this.negative !== 0 && (f = "-" + f), f;
      }
      if (S === (S | 0) && S >= 2 && S <= 36) {
        var v = p[S], P = w[S];
        f = "";
        var I = this.clone();
        for (I.negative = 0; !I.isZero(); ) {
          var F = I.modn(P).toString(S);
          I = I.idivn(P), I.isZero() ? f = F + f : f = d[v - F.length] + F + f;
        }
        for (this.isZero() && (f = "0" + f); f.length % m !== 0; )
          f = "0" + f;
        return this.negative !== 0 && (f = "-" + f), f;
      }
      n(!1, "Base should be between 2 and 36");
    }, s.prototype.toNumber = function() {
      var S = this.words[0];
      return this.length === 2 ? S += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? S += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && n(!1, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -S : S;
    }, s.prototype.toJSON = function() {
      return this.toString(16);
    }, s.prototype.toBuffer = function(S, m) {
      return n(typeof o < "u"), this.toArrayLike(o, S, m);
    }, s.prototype.toArray = function(S, m) {
      return this.toArrayLike(Array, S, m);
    }, s.prototype.toArrayLike = function(S, m, f) {
      var g = this.byteLength(), b = f || Math.max(1, g);
      n(g <= b, "byte array longer than desired length"), n(b > 0, "Requested array length <= 0"), this.strip();
      var x = m === "le", _ = new S(b), E, v, P = this.clone();
      if (x) {
        for (v = 0; !P.isZero(); v++)
          E = P.andln(255), P.iushrn(8), _[v] = E;
        for (; v < b; v++)
          _[v] = 0;
      } else {
        for (v = 0; v < b - g; v++)
          _[v] = 0;
        for (v = 0; !P.isZero(); v++)
          E = P.andln(255), P.iushrn(8), _[b - v - 1] = E;
      }
      return _;
    }, Math.clz32 ? s.prototype._countBits = function(S) {
      return 32 - Math.clz32(S);
    } : s.prototype._countBits = function(S) {
      var m = S, f = 0;
      return m >= 4096 && (f += 13, m >>>= 13), m >= 64 && (f += 7, m >>>= 7), m >= 8 && (f += 4, m >>>= 4), m >= 2 && (f += 2, m >>>= 2), f + m;
    }, s.prototype._zeroBits = function(S) {
      if (S === 0) return 26;
      var m = S, f = 0;
      return m & 8191 || (f += 13, m >>>= 13), m & 127 || (f += 7, m >>>= 7), m & 15 || (f += 4, m >>>= 4), m & 3 || (f += 2, m >>>= 2), m & 1 || f++, f;
    }, s.prototype.bitLength = function() {
      var S = this.words[this.length - 1], m = this._countBits(S);
      return (this.length - 1) * 26 + m;
    };
    function A(Y) {
      for (var S = new Array(Y.bitLength()), m = 0; m < S.length; m++) {
        var f = m / 26 | 0, g = m % 26;
        S[m] = (Y.words[f] & 1 << g) >>> g;
      }
      return S;
    }
    s.prototype.zeroBits = function() {
      if (this.isZero()) return 0;
      for (var S = 0, m = 0; m < this.length; m++) {
        var f = this._zeroBits(this.words[m]);
        if (S += f, f !== 26) break;
      }
      return S;
    }, s.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, s.prototype.toTwos = function(S) {
      return this.negative !== 0 ? this.abs().inotn(S).iaddn(1) : this.clone();
    }, s.prototype.fromTwos = function(S) {
      return this.testn(S - 1) ? this.notn(S).iaddn(1).ineg() : this.clone();
    }, s.prototype.isNeg = function() {
      return this.negative !== 0;
    }, s.prototype.neg = function() {
      return this.clone().ineg();
    }, s.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, s.prototype.iuor = function(S) {
      for (; this.length < S.length; )
        this.words[this.length++] = 0;
      for (var m = 0; m < S.length; m++)
        this.words[m] = this.words[m] | S.words[m];
      return this.strip();
    }, s.prototype.ior = function(S) {
      return n((this.negative | S.negative) === 0), this.iuor(S);
    }, s.prototype.or = function(S) {
      return this.length > S.length ? this.clone().ior(S) : S.clone().ior(this);
    }, s.prototype.uor = function(S) {
      return this.length > S.length ? this.clone().iuor(S) : S.clone().iuor(this);
    }, s.prototype.iuand = function(S) {
      var m;
      this.length > S.length ? m = S : m = this;
      for (var f = 0; f < m.length; f++)
        this.words[f] = this.words[f] & S.words[f];
      return this.length = m.length, this.strip();
    }, s.prototype.iand = function(S) {
      return n((this.negative | S.negative) === 0), this.iuand(S);
    }, s.prototype.and = function(S) {
      return this.length > S.length ? this.clone().iand(S) : S.clone().iand(this);
    }, s.prototype.uand = function(S) {
      return this.length > S.length ? this.clone().iuand(S) : S.clone().iuand(this);
    }, s.prototype.iuxor = function(S) {
      var m, f;
      this.length > S.length ? (m = this, f = S) : (m = S, f = this);
      for (var g = 0; g < f.length; g++)
        this.words[g] = m.words[g] ^ f.words[g];
      if (this !== m)
        for (; g < m.length; g++)
          this.words[g] = m.words[g];
      return this.length = m.length, this.strip();
    }, s.prototype.ixor = function(S) {
      return n((this.negative | S.negative) === 0), this.iuxor(S);
    }, s.prototype.xor = function(S) {
      return this.length > S.length ? this.clone().ixor(S) : S.clone().ixor(this);
    }, s.prototype.uxor = function(S) {
      return this.length > S.length ? this.clone().iuxor(S) : S.clone().iuxor(this);
    }, s.prototype.inotn = function(S) {
      n(typeof S == "number" && S >= 0);
      var m = Math.ceil(S / 26) | 0, f = S % 26;
      this._expand(m), f > 0 && m--;
      for (var g = 0; g < m; g++)
        this.words[g] = ~this.words[g] & 67108863;
      return f > 0 && (this.words[g] = ~this.words[g] & 67108863 >> 26 - f), this.strip();
    }, s.prototype.notn = function(S) {
      return this.clone().inotn(S);
    }, s.prototype.setn = function(S, m) {
      n(typeof S == "number" && S >= 0);
      var f = S / 26 | 0, g = S % 26;
      return this._expand(f + 1), m ? this.words[f] = this.words[f] | 1 << g : this.words[f] = this.words[f] & ~(1 << g), this.strip();
    }, s.prototype.iadd = function(S) {
      var m;
      if (this.negative !== 0 && S.negative === 0)
        return this.negative = 0, m = this.isub(S), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && S.negative !== 0)
        return S.negative = 0, m = this.isub(S), S.negative = 1, m._normSign();
      var f, g;
      this.length > S.length ? (f = this, g = S) : (f = S, g = this);
      for (var b = 0, x = 0; x < g.length; x++)
        m = (f.words[x] | 0) + (g.words[x] | 0) + b, this.words[x] = m & 67108863, b = m >>> 26;
      for (; b !== 0 && x < f.length; x++)
        m = (f.words[x] | 0) + b, this.words[x] = m & 67108863, b = m >>> 26;
      if (this.length = f.length, b !== 0)
        this.words[this.length] = b, this.length++;
      else if (f !== this)
        for (; x < f.length; x++)
          this.words[x] = f.words[x];
      return this;
    }, s.prototype.add = function(S) {
      var m;
      return S.negative !== 0 && this.negative === 0 ? (S.negative = 0, m = this.sub(S), S.negative ^= 1, m) : S.negative === 0 && this.negative !== 0 ? (this.negative = 0, m = S.sub(this), this.negative = 1, m) : this.length > S.length ? this.clone().iadd(S) : S.clone().iadd(this);
    }, s.prototype.isub = function(S) {
      if (S.negative !== 0) {
        S.negative = 0;
        var m = this.iadd(S);
        return S.negative = 1, m._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(S), this.negative = 1, this._normSign();
      var f = this.cmp(S);
      if (f === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var g, b;
      f > 0 ? (g = this, b = S) : (g = S, b = this);
      for (var x = 0, _ = 0; _ < b.length; _++)
        m = (g.words[_] | 0) - (b.words[_] | 0) + x, x = m >> 26, this.words[_] = m & 67108863;
      for (; x !== 0 && _ < g.length; _++)
        m = (g.words[_] | 0) + x, x = m >> 26, this.words[_] = m & 67108863;
      if (x === 0 && _ < g.length && g !== this)
        for (; _ < g.length; _++)
          this.words[_] = g.words[_];
      return this.length = Math.max(this.length, _), g !== this && (this.negative = 1), this.strip();
    }, s.prototype.sub = function(S) {
      return this.clone().isub(S);
    };
    function M(Y, S, m) {
      m.negative = S.negative ^ Y.negative;
      var f = Y.length + S.length | 0;
      m.length = f, f = f - 1 | 0;
      var g = Y.words[0] | 0, b = S.words[0] | 0, x = g * b, _ = x & 67108863, E = x / 67108864 | 0;
      m.words[0] = _;
      for (var v = 1; v < f; v++) {
        for (var P = E >>> 26, I = E & 67108863, F = Math.min(v, S.length - 1), ce = Math.max(0, v - Y.length + 1); ce <= F; ce++) {
          var D = v - ce | 0;
          g = Y.words[D] | 0, b = S.words[ce] | 0, x = g * b + I, P += x / 67108864 | 0, I = x & 67108863;
        }
        m.words[v] = I | 0, E = P | 0;
      }
      return E !== 0 ? m.words[v] = E | 0 : m.length--, m.strip();
    }
    var N = function(S, m, f) {
      var g = S.words, b = m.words, x = f.words, _ = 0, E, v, P, I = g[0] | 0, F = I & 8191, ce = I >>> 13, D = g[1] | 0, oe = D & 8191, Z = D >>> 13, J = g[2] | 0, Q = J & 8191, T = J >>> 13, X = g[3] | 0, re = X & 8191, de = X >>> 13, ie = g[4] | 0, ue = ie & 8191, ve = ie >>> 13, Pe = g[5] | 0, De = Pe & 8191, Ce = Pe >>> 13, $e = g[6] | 0, Me = $e & 8191, Ne = $e >>> 13, Ke = g[7] | 0, Le = Ke & 8191, qe = Ke >>> 13, ze = g[8] | 0, _e = ze & 8191, Ze = ze >>> 13, at = g[9] | 0, ke = at & 8191, Qe = at >>> 13, tt = b[0] | 0, Ye = tt & 8191, dt = tt >>> 13, lt = b[1] | 0, ct = lt & 8191, qt = lt >>> 13, Yt = b[2] | 0, Et = Yt & 8191, er = Yt >>> 13, Jt = b[3] | 0, Dt = Jt & 8191, kt = Jt >>> 13, Ct = b[4] | 0, gt = Ct & 8191, Rt = Ct >>> 13, Nt = b[5] | 0, vt = Nt & 8191, $t = Nt >>> 13, Ft = b[6] | 0, rt = Ft & 8191, Bt = Ft >>> 13, k = b[7] | 0, U = k & 8191, z = k >>> 13, C = b[8] | 0, G = C & 8191, j = C >>> 13, se = b[9] | 0, he = se & 8191, xe = se >>> 13;
      f.negative = S.negative ^ m.negative, f.length = 19, E = Math.imul(F, Ye), v = Math.imul(F, dt), v = v + Math.imul(ce, Ye) | 0, P = Math.imul(ce, dt);
      var Te = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (Te >>> 26) | 0, Te &= 67108863, E = Math.imul(oe, Ye), v = Math.imul(oe, dt), v = v + Math.imul(Z, Ye) | 0, P = Math.imul(Z, dt), E = E + Math.imul(F, ct) | 0, v = v + Math.imul(F, qt) | 0, v = v + Math.imul(ce, ct) | 0, P = P + Math.imul(ce, qt) | 0;
      var Re = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (Re >>> 26) | 0, Re &= 67108863, E = Math.imul(Q, Ye), v = Math.imul(Q, dt), v = v + Math.imul(T, Ye) | 0, P = Math.imul(T, dt), E = E + Math.imul(oe, ct) | 0, v = v + Math.imul(oe, qt) | 0, v = v + Math.imul(Z, ct) | 0, P = P + Math.imul(Z, qt) | 0, E = E + Math.imul(F, Et) | 0, v = v + Math.imul(F, er) | 0, v = v + Math.imul(ce, Et) | 0, P = P + Math.imul(ce, er) | 0;
      var nt = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (nt >>> 26) | 0, nt &= 67108863, E = Math.imul(re, Ye), v = Math.imul(re, dt), v = v + Math.imul(de, Ye) | 0, P = Math.imul(de, dt), E = E + Math.imul(Q, ct) | 0, v = v + Math.imul(Q, qt) | 0, v = v + Math.imul(T, ct) | 0, P = P + Math.imul(T, qt) | 0, E = E + Math.imul(oe, Et) | 0, v = v + Math.imul(oe, er) | 0, v = v + Math.imul(Z, Et) | 0, P = P + Math.imul(Z, er) | 0, E = E + Math.imul(F, Dt) | 0, v = v + Math.imul(F, kt) | 0, v = v + Math.imul(ce, Dt) | 0, P = P + Math.imul(ce, kt) | 0;
      var je = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (je >>> 26) | 0, je &= 67108863, E = Math.imul(ue, Ye), v = Math.imul(ue, dt), v = v + Math.imul(ve, Ye) | 0, P = Math.imul(ve, dt), E = E + Math.imul(re, ct) | 0, v = v + Math.imul(re, qt) | 0, v = v + Math.imul(de, ct) | 0, P = P + Math.imul(de, qt) | 0, E = E + Math.imul(Q, Et) | 0, v = v + Math.imul(Q, er) | 0, v = v + Math.imul(T, Et) | 0, P = P + Math.imul(T, er) | 0, E = E + Math.imul(oe, Dt) | 0, v = v + Math.imul(oe, kt) | 0, v = v + Math.imul(Z, Dt) | 0, P = P + Math.imul(Z, kt) | 0, E = E + Math.imul(F, gt) | 0, v = v + Math.imul(F, Rt) | 0, v = v + Math.imul(ce, gt) | 0, P = P + Math.imul(ce, Rt) | 0;
      var pt = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, E = Math.imul(De, Ye), v = Math.imul(De, dt), v = v + Math.imul(Ce, Ye) | 0, P = Math.imul(Ce, dt), E = E + Math.imul(ue, ct) | 0, v = v + Math.imul(ue, qt) | 0, v = v + Math.imul(ve, ct) | 0, P = P + Math.imul(ve, qt) | 0, E = E + Math.imul(re, Et) | 0, v = v + Math.imul(re, er) | 0, v = v + Math.imul(de, Et) | 0, P = P + Math.imul(de, er) | 0, E = E + Math.imul(Q, Dt) | 0, v = v + Math.imul(Q, kt) | 0, v = v + Math.imul(T, Dt) | 0, P = P + Math.imul(T, kt) | 0, E = E + Math.imul(oe, gt) | 0, v = v + Math.imul(oe, Rt) | 0, v = v + Math.imul(Z, gt) | 0, P = P + Math.imul(Z, Rt) | 0, E = E + Math.imul(F, vt) | 0, v = v + Math.imul(F, $t) | 0, v = v + Math.imul(ce, vt) | 0, P = P + Math.imul(ce, $t) | 0;
      var it = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (it >>> 26) | 0, it &= 67108863, E = Math.imul(Me, Ye), v = Math.imul(Me, dt), v = v + Math.imul(Ne, Ye) | 0, P = Math.imul(Ne, dt), E = E + Math.imul(De, ct) | 0, v = v + Math.imul(De, qt) | 0, v = v + Math.imul(Ce, ct) | 0, P = P + Math.imul(Ce, qt) | 0, E = E + Math.imul(ue, Et) | 0, v = v + Math.imul(ue, er) | 0, v = v + Math.imul(ve, Et) | 0, P = P + Math.imul(ve, er) | 0, E = E + Math.imul(re, Dt) | 0, v = v + Math.imul(re, kt) | 0, v = v + Math.imul(de, Dt) | 0, P = P + Math.imul(de, kt) | 0, E = E + Math.imul(Q, gt) | 0, v = v + Math.imul(Q, Rt) | 0, v = v + Math.imul(T, gt) | 0, P = P + Math.imul(T, Rt) | 0, E = E + Math.imul(oe, vt) | 0, v = v + Math.imul(oe, $t) | 0, v = v + Math.imul(Z, vt) | 0, P = P + Math.imul(Z, $t) | 0, E = E + Math.imul(F, rt) | 0, v = v + Math.imul(F, Bt) | 0, v = v + Math.imul(ce, rt) | 0, P = P + Math.imul(ce, Bt) | 0;
      var et = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, E = Math.imul(Le, Ye), v = Math.imul(Le, dt), v = v + Math.imul(qe, Ye) | 0, P = Math.imul(qe, dt), E = E + Math.imul(Me, ct) | 0, v = v + Math.imul(Me, qt) | 0, v = v + Math.imul(Ne, ct) | 0, P = P + Math.imul(Ne, qt) | 0, E = E + Math.imul(De, Et) | 0, v = v + Math.imul(De, er) | 0, v = v + Math.imul(Ce, Et) | 0, P = P + Math.imul(Ce, er) | 0, E = E + Math.imul(ue, Dt) | 0, v = v + Math.imul(ue, kt) | 0, v = v + Math.imul(ve, Dt) | 0, P = P + Math.imul(ve, kt) | 0, E = E + Math.imul(re, gt) | 0, v = v + Math.imul(re, Rt) | 0, v = v + Math.imul(de, gt) | 0, P = P + Math.imul(de, Rt) | 0, E = E + Math.imul(Q, vt) | 0, v = v + Math.imul(Q, $t) | 0, v = v + Math.imul(T, vt) | 0, P = P + Math.imul(T, $t) | 0, E = E + Math.imul(oe, rt) | 0, v = v + Math.imul(oe, Bt) | 0, v = v + Math.imul(Z, rt) | 0, P = P + Math.imul(Z, Bt) | 0, E = E + Math.imul(F, U) | 0, v = v + Math.imul(F, z) | 0, v = v + Math.imul(ce, U) | 0, P = P + Math.imul(ce, z) | 0;
      var St = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (St >>> 26) | 0, St &= 67108863, E = Math.imul(_e, Ye), v = Math.imul(_e, dt), v = v + Math.imul(Ze, Ye) | 0, P = Math.imul(Ze, dt), E = E + Math.imul(Le, ct) | 0, v = v + Math.imul(Le, qt) | 0, v = v + Math.imul(qe, ct) | 0, P = P + Math.imul(qe, qt) | 0, E = E + Math.imul(Me, Et) | 0, v = v + Math.imul(Me, er) | 0, v = v + Math.imul(Ne, Et) | 0, P = P + Math.imul(Ne, er) | 0, E = E + Math.imul(De, Dt) | 0, v = v + Math.imul(De, kt) | 0, v = v + Math.imul(Ce, Dt) | 0, P = P + Math.imul(Ce, kt) | 0, E = E + Math.imul(ue, gt) | 0, v = v + Math.imul(ue, Rt) | 0, v = v + Math.imul(ve, gt) | 0, P = P + Math.imul(ve, Rt) | 0, E = E + Math.imul(re, vt) | 0, v = v + Math.imul(re, $t) | 0, v = v + Math.imul(de, vt) | 0, P = P + Math.imul(de, $t) | 0, E = E + Math.imul(Q, rt) | 0, v = v + Math.imul(Q, Bt) | 0, v = v + Math.imul(T, rt) | 0, P = P + Math.imul(T, Bt) | 0, E = E + Math.imul(oe, U) | 0, v = v + Math.imul(oe, z) | 0, v = v + Math.imul(Z, U) | 0, P = P + Math.imul(Z, z) | 0, E = E + Math.imul(F, G) | 0, v = v + Math.imul(F, j) | 0, v = v + Math.imul(ce, G) | 0, P = P + Math.imul(ce, j) | 0;
      var Tt = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (Tt >>> 26) | 0, Tt &= 67108863, E = Math.imul(ke, Ye), v = Math.imul(ke, dt), v = v + Math.imul(Qe, Ye) | 0, P = Math.imul(Qe, dt), E = E + Math.imul(_e, ct) | 0, v = v + Math.imul(_e, qt) | 0, v = v + Math.imul(Ze, ct) | 0, P = P + Math.imul(Ze, qt) | 0, E = E + Math.imul(Le, Et) | 0, v = v + Math.imul(Le, er) | 0, v = v + Math.imul(qe, Et) | 0, P = P + Math.imul(qe, er) | 0, E = E + Math.imul(Me, Dt) | 0, v = v + Math.imul(Me, kt) | 0, v = v + Math.imul(Ne, Dt) | 0, P = P + Math.imul(Ne, kt) | 0, E = E + Math.imul(De, gt) | 0, v = v + Math.imul(De, Rt) | 0, v = v + Math.imul(Ce, gt) | 0, P = P + Math.imul(Ce, Rt) | 0, E = E + Math.imul(ue, vt) | 0, v = v + Math.imul(ue, $t) | 0, v = v + Math.imul(ve, vt) | 0, P = P + Math.imul(ve, $t) | 0, E = E + Math.imul(re, rt) | 0, v = v + Math.imul(re, Bt) | 0, v = v + Math.imul(de, rt) | 0, P = P + Math.imul(de, Bt) | 0, E = E + Math.imul(Q, U) | 0, v = v + Math.imul(Q, z) | 0, v = v + Math.imul(T, U) | 0, P = P + Math.imul(T, z) | 0, E = E + Math.imul(oe, G) | 0, v = v + Math.imul(oe, j) | 0, v = v + Math.imul(Z, G) | 0, P = P + Math.imul(Z, j) | 0, E = E + Math.imul(F, he) | 0, v = v + Math.imul(F, xe) | 0, v = v + Math.imul(ce, he) | 0, P = P + Math.imul(ce, xe) | 0;
      var At = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (At >>> 26) | 0, At &= 67108863, E = Math.imul(ke, ct), v = Math.imul(ke, qt), v = v + Math.imul(Qe, ct) | 0, P = Math.imul(Qe, qt), E = E + Math.imul(_e, Et) | 0, v = v + Math.imul(_e, er) | 0, v = v + Math.imul(Ze, Et) | 0, P = P + Math.imul(Ze, er) | 0, E = E + Math.imul(Le, Dt) | 0, v = v + Math.imul(Le, kt) | 0, v = v + Math.imul(qe, Dt) | 0, P = P + Math.imul(qe, kt) | 0, E = E + Math.imul(Me, gt) | 0, v = v + Math.imul(Me, Rt) | 0, v = v + Math.imul(Ne, gt) | 0, P = P + Math.imul(Ne, Rt) | 0, E = E + Math.imul(De, vt) | 0, v = v + Math.imul(De, $t) | 0, v = v + Math.imul(Ce, vt) | 0, P = P + Math.imul(Ce, $t) | 0, E = E + Math.imul(ue, rt) | 0, v = v + Math.imul(ue, Bt) | 0, v = v + Math.imul(ve, rt) | 0, P = P + Math.imul(ve, Bt) | 0, E = E + Math.imul(re, U) | 0, v = v + Math.imul(re, z) | 0, v = v + Math.imul(de, U) | 0, P = P + Math.imul(de, z) | 0, E = E + Math.imul(Q, G) | 0, v = v + Math.imul(Q, j) | 0, v = v + Math.imul(T, G) | 0, P = P + Math.imul(T, j) | 0, E = E + Math.imul(oe, he) | 0, v = v + Math.imul(oe, xe) | 0, v = v + Math.imul(Z, he) | 0, P = P + Math.imul(Z, xe) | 0;
      var _t = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, E = Math.imul(ke, Et), v = Math.imul(ke, er), v = v + Math.imul(Qe, Et) | 0, P = Math.imul(Qe, er), E = E + Math.imul(_e, Dt) | 0, v = v + Math.imul(_e, kt) | 0, v = v + Math.imul(Ze, Dt) | 0, P = P + Math.imul(Ze, kt) | 0, E = E + Math.imul(Le, gt) | 0, v = v + Math.imul(Le, Rt) | 0, v = v + Math.imul(qe, gt) | 0, P = P + Math.imul(qe, Rt) | 0, E = E + Math.imul(Me, vt) | 0, v = v + Math.imul(Me, $t) | 0, v = v + Math.imul(Ne, vt) | 0, P = P + Math.imul(Ne, $t) | 0, E = E + Math.imul(De, rt) | 0, v = v + Math.imul(De, Bt) | 0, v = v + Math.imul(Ce, rt) | 0, P = P + Math.imul(Ce, Bt) | 0, E = E + Math.imul(ue, U) | 0, v = v + Math.imul(ue, z) | 0, v = v + Math.imul(ve, U) | 0, P = P + Math.imul(ve, z) | 0, E = E + Math.imul(re, G) | 0, v = v + Math.imul(re, j) | 0, v = v + Math.imul(de, G) | 0, P = P + Math.imul(de, j) | 0, E = E + Math.imul(Q, he) | 0, v = v + Math.imul(Q, xe) | 0, v = v + Math.imul(T, he) | 0, P = P + Math.imul(T, xe) | 0;
      var ht = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, E = Math.imul(ke, Dt), v = Math.imul(ke, kt), v = v + Math.imul(Qe, Dt) | 0, P = Math.imul(Qe, kt), E = E + Math.imul(_e, gt) | 0, v = v + Math.imul(_e, Rt) | 0, v = v + Math.imul(Ze, gt) | 0, P = P + Math.imul(Ze, Rt) | 0, E = E + Math.imul(Le, vt) | 0, v = v + Math.imul(Le, $t) | 0, v = v + Math.imul(qe, vt) | 0, P = P + Math.imul(qe, $t) | 0, E = E + Math.imul(Me, rt) | 0, v = v + Math.imul(Me, Bt) | 0, v = v + Math.imul(Ne, rt) | 0, P = P + Math.imul(Ne, Bt) | 0, E = E + Math.imul(De, U) | 0, v = v + Math.imul(De, z) | 0, v = v + Math.imul(Ce, U) | 0, P = P + Math.imul(Ce, z) | 0, E = E + Math.imul(ue, G) | 0, v = v + Math.imul(ue, j) | 0, v = v + Math.imul(ve, G) | 0, P = P + Math.imul(ve, j) | 0, E = E + Math.imul(re, he) | 0, v = v + Math.imul(re, xe) | 0, v = v + Math.imul(de, he) | 0, P = P + Math.imul(de, xe) | 0;
      var xt = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, E = Math.imul(ke, gt), v = Math.imul(ke, Rt), v = v + Math.imul(Qe, gt) | 0, P = Math.imul(Qe, Rt), E = E + Math.imul(_e, vt) | 0, v = v + Math.imul(_e, $t) | 0, v = v + Math.imul(Ze, vt) | 0, P = P + Math.imul(Ze, $t) | 0, E = E + Math.imul(Le, rt) | 0, v = v + Math.imul(Le, Bt) | 0, v = v + Math.imul(qe, rt) | 0, P = P + Math.imul(qe, Bt) | 0, E = E + Math.imul(Me, U) | 0, v = v + Math.imul(Me, z) | 0, v = v + Math.imul(Ne, U) | 0, P = P + Math.imul(Ne, z) | 0, E = E + Math.imul(De, G) | 0, v = v + Math.imul(De, j) | 0, v = v + Math.imul(Ce, G) | 0, P = P + Math.imul(Ce, j) | 0, E = E + Math.imul(ue, he) | 0, v = v + Math.imul(ue, xe) | 0, v = v + Math.imul(ve, he) | 0, P = P + Math.imul(ve, xe) | 0;
      var st = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (st >>> 26) | 0, st &= 67108863, E = Math.imul(ke, vt), v = Math.imul(ke, $t), v = v + Math.imul(Qe, vt) | 0, P = Math.imul(Qe, $t), E = E + Math.imul(_e, rt) | 0, v = v + Math.imul(_e, Bt) | 0, v = v + Math.imul(Ze, rt) | 0, P = P + Math.imul(Ze, Bt) | 0, E = E + Math.imul(Le, U) | 0, v = v + Math.imul(Le, z) | 0, v = v + Math.imul(qe, U) | 0, P = P + Math.imul(qe, z) | 0, E = E + Math.imul(Me, G) | 0, v = v + Math.imul(Me, j) | 0, v = v + Math.imul(Ne, G) | 0, P = P + Math.imul(Ne, j) | 0, E = E + Math.imul(De, he) | 0, v = v + Math.imul(De, xe) | 0, v = v + Math.imul(Ce, he) | 0, P = P + Math.imul(Ce, xe) | 0;
      var bt = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (bt >>> 26) | 0, bt &= 67108863, E = Math.imul(ke, rt), v = Math.imul(ke, Bt), v = v + Math.imul(Qe, rt) | 0, P = Math.imul(Qe, Bt), E = E + Math.imul(_e, U) | 0, v = v + Math.imul(_e, z) | 0, v = v + Math.imul(Ze, U) | 0, P = P + Math.imul(Ze, z) | 0, E = E + Math.imul(Le, G) | 0, v = v + Math.imul(Le, j) | 0, v = v + Math.imul(qe, G) | 0, P = P + Math.imul(qe, j) | 0, E = E + Math.imul(Me, he) | 0, v = v + Math.imul(Me, xe) | 0, v = v + Math.imul(Ne, he) | 0, P = P + Math.imul(Ne, xe) | 0;
      var ut = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (ut >>> 26) | 0, ut &= 67108863, E = Math.imul(ke, U), v = Math.imul(ke, z), v = v + Math.imul(Qe, U) | 0, P = Math.imul(Qe, z), E = E + Math.imul(_e, G) | 0, v = v + Math.imul(_e, j) | 0, v = v + Math.imul(Ze, G) | 0, P = P + Math.imul(Ze, j) | 0, E = E + Math.imul(Le, he) | 0, v = v + Math.imul(Le, xe) | 0, v = v + Math.imul(qe, he) | 0, P = P + Math.imul(qe, xe) | 0;
      var ot = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (ot >>> 26) | 0, ot &= 67108863, E = Math.imul(ke, G), v = Math.imul(ke, j), v = v + Math.imul(Qe, G) | 0, P = Math.imul(Qe, j), E = E + Math.imul(_e, he) | 0, v = v + Math.imul(_e, xe) | 0, v = v + Math.imul(Ze, he) | 0, P = P + Math.imul(Ze, xe) | 0;
      var Se = (_ + E | 0) + ((v & 8191) << 13) | 0;
      _ = (P + (v >>> 13) | 0) + (Se >>> 26) | 0, Se &= 67108863, E = Math.imul(ke, he), v = Math.imul(ke, xe), v = v + Math.imul(Qe, he) | 0, P = Math.imul(Qe, xe);
      var Ae = (_ + E | 0) + ((v & 8191) << 13) | 0;
      return _ = (P + (v >>> 13) | 0) + (Ae >>> 26) | 0, Ae &= 67108863, x[0] = Te, x[1] = Re, x[2] = nt, x[3] = je, x[4] = pt, x[5] = it, x[6] = et, x[7] = St, x[8] = Tt, x[9] = At, x[10] = _t, x[11] = ht, x[12] = xt, x[13] = st, x[14] = bt, x[15] = ut, x[16] = ot, x[17] = Se, x[18] = Ae, _ !== 0 && (x[19] = _, f.length++), f;
    };
    Math.imul || (N = M);
    function L(Y, S, m) {
      m.negative = S.negative ^ Y.negative, m.length = Y.length + S.length;
      for (var f = 0, g = 0, b = 0; b < m.length - 1; b++) {
        var x = g;
        g = 0;
        for (var _ = f & 67108863, E = Math.min(b, S.length - 1), v = Math.max(0, b - Y.length + 1); v <= E; v++) {
          var P = b - v, I = Y.words[P] | 0, F = S.words[v] | 0, ce = I * F, D = ce & 67108863;
          x = x + (ce / 67108864 | 0) | 0, D = D + _ | 0, _ = D & 67108863, x = x + (D >>> 26) | 0, g += x >>> 26, x &= 67108863;
        }
        m.words[b] = _, f = x, x = g;
      }
      return f !== 0 ? m.words[b] = f : m.length--, m.strip();
    }
    function B(Y, S, m) {
      var f = new $();
      return f.mulp(Y, S, m);
    }
    s.prototype.mulTo = function(S, m) {
      var f, g = this.length + S.length;
      return this.length === 10 && S.length === 10 ? f = N(this, S, m) : g < 63 ? f = M(this, S, m) : g < 1024 ? f = L(this, S, m) : f = B(this, S, m), f;
    };
    function $(Y, S) {
      this.x = Y, this.y = S;
    }
    $.prototype.makeRBT = function(S) {
      for (var m = new Array(S), f = s.prototype._countBits(S) - 1, g = 0; g < S; g++)
        m[g] = this.revBin(g, f, S);
      return m;
    }, $.prototype.revBin = function(S, m, f) {
      if (S === 0 || S === f - 1) return S;
      for (var g = 0, b = 0; b < m; b++)
        g |= (S & 1) << m - b - 1, S >>= 1;
      return g;
    }, $.prototype.permute = function(S, m, f, g, b, x) {
      for (var _ = 0; _ < x; _++)
        g[_] = m[S[_]], b[_] = f[S[_]];
    }, $.prototype.transform = function(S, m, f, g, b, x) {
      this.permute(x, S, m, f, g, b);
      for (var _ = 1; _ < b; _ <<= 1)
        for (var E = _ << 1, v = Math.cos(2 * Math.PI / E), P = Math.sin(2 * Math.PI / E), I = 0; I < b; I += E)
          for (var F = v, ce = P, D = 0; D < _; D++) {
            var oe = f[I + D], Z = g[I + D], J = f[I + D + _], Q = g[I + D + _], T = F * J - ce * Q;
            Q = F * Q + ce * J, J = T, f[I + D] = oe + J, g[I + D] = Z + Q, f[I + D + _] = oe - J, g[I + D + _] = Z - Q, D !== E && (T = v * F - P * ce, ce = v * ce + P * F, F = T);
          }
    }, $.prototype.guessLen13b = function(S, m) {
      var f = Math.max(m, S) | 1, g = f & 1, b = 0;
      for (f = f / 2 | 0; f; f = f >>> 1)
        b++;
      return 1 << b + 1 + g;
    }, $.prototype.conjugate = function(S, m, f) {
      if (!(f <= 1))
        for (var g = 0; g < f / 2; g++) {
          var b = S[g];
          S[g] = S[f - g - 1], S[f - g - 1] = b, b = m[g], m[g] = -m[f - g - 1], m[f - g - 1] = -b;
        }
    }, $.prototype.normalize13b = function(S, m) {
      for (var f = 0, g = 0; g < m / 2; g++) {
        var b = Math.round(S[2 * g + 1] / m) * 8192 + Math.round(S[2 * g] / m) + f;
        S[g] = b & 67108863, b < 67108864 ? f = 0 : f = b / 67108864 | 0;
      }
      return S;
    }, $.prototype.convert13b = function(S, m, f, g) {
      for (var b = 0, x = 0; x < m; x++)
        b = b + (S[x] | 0), f[2 * x] = b & 8191, b = b >>> 13, f[2 * x + 1] = b & 8191, b = b >>> 13;
      for (x = 2 * m; x < g; ++x)
        f[x] = 0;
      n(b === 0), n((b & -8192) === 0);
    }, $.prototype.stub = function(S) {
      for (var m = new Array(S), f = 0; f < S; f++)
        m[f] = 0;
      return m;
    }, $.prototype.mulp = function(S, m, f) {
      var g = 2 * this.guessLen13b(S.length, m.length), b = this.makeRBT(g), x = this.stub(g), _ = new Array(g), E = new Array(g), v = new Array(g), P = new Array(g), I = new Array(g), F = new Array(g), ce = f.words;
      ce.length = g, this.convert13b(S.words, S.length, _, g), this.convert13b(m.words, m.length, P, g), this.transform(_, x, E, v, g, b), this.transform(P, x, I, F, g, b);
      for (var D = 0; D < g; D++) {
        var oe = E[D] * I[D] - v[D] * F[D];
        v[D] = E[D] * F[D] + v[D] * I[D], E[D] = oe;
      }
      return this.conjugate(E, v, g), this.transform(E, v, ce, x, g, b), this.conjugate(ce, x, g), this.normalize13b(ce, g), f.negative = S.negative ^ m.negative, f.length = S.length + m.length, f.strip();
    }, s.prototype.mul = function(S) {
      var m = new s(null);
      return m.words = new Array(this.length + S.length), this.mulTo(S, m);
    }, s.prototype.mulf = function(S) {
      var m = new s(null);
      return m.words = new Array(this.length + S.length), B(this, S, m);
    }, s.prototype.imul = function(S) {
      return this.clone().mulTo(S, this);
    }, s.prototype.imuln = function(S) {
      n(typeof S == "number"), n(S < 67108864);
      for (var m = 0, f = 0; f < this.length; f++) {
        var g = (this.words[f] | 0) * S, b = (g & 67108863) + (m & 67108863);
        m >>= 26, m += g / 67108864 | 0, m += b >>> 26, this.words[f] = b & 67108863;
      }
      return m !== 0 && (this.words[f] = m, this.length++), this;
    }, s.prototype.muln = function(S) {
      return this.clone().imuln(S);
    }, s.prototype.sqr = function() {
      return this.mul(this);
    }, s.prototype.isqr = function() {
      return this.imul(this.clone());
    }, s.prototype.pow = function(S) {
      var m = A(S);
      if (m.length === 0) return new s(1);
      for (var f = this, g = 0; g < m.length && m[g] === 0; g++, f = f.sqr())
        ;
      if (++g < m.length)
        for (var b = f.sqr(); g < m.length; g++, b = b.sqr())
          m[g] !== 0 && (f = f.mul(b));
      return f;
    }, s.prototype.iushln = function(S) {
      n(typeof S == "number" && S >= 0);
      var m = S % 26, f = (S - m) / 26, g = 67108863 >>> 26 - m << 26 - m, b;
      if (m !== 0) {
        var x = 0;
        for (b = 0; b < this.length; b++) {
          var _ = this.words[b] & g, E = (this.words[b] | 0) - _ << m;
          this.words[b] = E | x, x = _ >>> 26 - m;
        }
        x && (this.words[b] = x, this.length++);
      }
      if (f !== 0) {
        for (b = this.length - 1; b >= 0; b--)
          this.words[b + f] = this.words[b];
        for (b = 0; b < f; b++)
          this.words[b] = 0;
        this.length += f;
      }
      return this.strip();
    }, s.prototype.ishln = function(S) {
      return n(this.negative === 0), this.iushln(S);
    }, s.prototype.iushrn = function(S, m, f) {
      n(typeof S == "number" && S >= 0);
      var g;
      m ? g = (m - m % 26) / 26 : g = 0;
      var b = S % 26, x = Math.min((S - b) / 26, this.length), _ = 67108863 ^ 67108863 >>> b << b, E = f;
      if (g -= x, g = Math.max(0, g), E) {
        for (var v = 0; v < x; v++)
          E.words[v] = this.words[v];
        E.length = x;
      }
      if (x !== 0) if (this.length > x)
        for (this.length -= x, v = 0; v < this.length; v++)
          this.words[v] = this.words[v + x];
      else
        this.words[0] = 0, this.length = 1;
      var P = 0;
      for (v = this.length - 1; v >= 0 && (P !== 0 || v >= g); v--) {
        var I = this.words[v] | 0;
        this.words[v] = P << 26 - b | I >>> b, P = I & _;
      }
      return E && P !== 0 && (E.words[E.length++] = P), this.length === 0 && (this.words[0] = 0, this.length = 1), this.strip();
    }, s.prototype.ishrn = function(S, m, f) {
      return n(this.negative === 0), this.iushrn(S, m, f);
    }, s.prototype.shln = function(S) {
      return this.clone().ishln(S);
    }, s.prototype.ushln = function(S) {
      return this.clone().iushln(S);
    }, s.prototype.shrn = function(S) {
      return this.clone().ishrn(S);
    }, s.prototype.ushrn = function(S) {
      return this.clone().iushrn(S);
    }, s.prototype.testn = function(S) {
      n(typeof S == "number" && S >= 0);
      var m = S % 26, f = (S - m) / 26, g = 1 << m;
      if (this.length <= f) return !1;
      var b = this.words[f];
      return !!(b & g);
    }, s.prototype.imaskn = function(S) {
      n(typeof S == "number" && S >= 0);
      var m = S % 26, f = (S - m) / 26;
      if (n(this.negative === 0, "imaskn works only with positive numbers"), this.length <= f)
        return this;
      if (m !== 0 && f++, this.length = Math.min(f, this.length), m !== 0) {
        var g = 67108863 ^ 67108863 >>> m << m;
        this.words[this.length - 1] &= g;
      }
      return this.strip();
    }, s.prototype.maskn = function(S) {
      return this.clone().imaskn(S);
    }, s.prototype.iaddn = function(S) {
      return n(typeof S == "number"), n(S < 67108864), S < 0 ? this.isubn(-S) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) < S ? (this.words[0] = S - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(S), this.negative = 1, this) : this._iaddn(S);
    }, s.prototype._iaddn = function(S) {
      this.words[0] += S;
      for (var m = 0; m < this.length && this.words[m] >= 67108864; m++)
        this.words[m] -= 67108864, m === this.length - 1 ? this.words[m + 1] = 1 : this.words[m + 1]++;
      return this.length = Math.max(this.length, m + 1), this;
    }, s.prototype.isubn = function(S) {
      if (n(typeof S == "number"), n(S < 67108864), S < 0) return this.iaddn(-S);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(S), this.negative = 1, this;
      if (this.words[0] -= S, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var m = 0; m < this.length && this.words[m] < 0; m++)
          this.words[m] += 67108864, this.words[m + 1] -= 1;
      return this.strip();
    }, s.prototype.addn = function(S) {
      return this.clone().iaddn(S);
    }, s.prototype.subn = function(S) {
      return this.clone().isubn(S);
    }, s.prototype.iabs = function() {
      return this.negative = 0, this;
    }, s.prototype.abs = function() {
      return this.clone().iabs();
    }, s.prototype._ishlnsubmul = function(S, m, f) {
      var g = S.length + f, b;
      this._expand(g);
      var x, _ = 0;
      for (b = 0; b < S.length; b++) {
        x = (this.words[b + f] | 0) + _;
        var E = (S.words[b] | 0) * m;
        x -= E & 67108863, _ = (x >> 26) - (E / 67108864 | 0), this.words[b + f] = x & 67108863;
      }
      for (; b < this.length - f; b++)
        x = (this.words[b + f] | 0) + _, _ = x >> 26, this.words[b + f] = x & 67108863;
      if (_ === 0) return this.strip();
      for (n(_ === -1), _ = 0, b = 0; b < this.length; b++)
        x = -(this.words[b] | 0) + _, _ = x >> 26, this.words[b] = x & 67108863;
      return this.negative = 1, this.strip();
    }, s.prototype._wordDiv = function(S, m) {
      var f = this.length - S.length, g = this.clone(), b = S, x = b.words[b.length - 1] | 0, _ = this._countBits(x);
      f = 26 - _, f !== 0 && (b = b.ushln(f), g.iushln(f), x = b.words[b.length - 1] | 0);
      var E = g.length - b.length, v;
      if (m !== "mod") {
        v = new s(null), v.length = E + 1, v.words = new Array(v.length);
        for (var P = 0; P < v.length; P++)
          v.words[P] = 0;
      }
      var I = g.clone()._ishlnsubmul(b, 1, E);
      I.negative === 0 && (g = I, v && (v.words[E] = 1));
      for (var F = E - 1; F >= 0; F--) {
        var ce = (g.words[b.length + F] | 0) * 67108864 + (g.words[b.length + F - 1] | 0);
        for (ce = Math.min(ce / x | 0, 67108863), g._ishlnsubmul(b, ce, F); g.negative !== 0; )
          ce--, g.negative = 0, g._ishlnsubmul(b, 1, F), g.isZero() || (g.negative ^= 1);
        v && (v.words[F] = ce);
      }
      return v && v.strip(), g.strip(), m !== "div" && f !== 0 && g.iushrn(f), {
        div: v || null,
        mod: g
      };
    }, s.prototype.divmod = function(S, m, f) {
      if (n(!S.isZero()), this.isZero())
        return {
          div: new s(0),
          mod: new s(0)
        };
      var g, b, x;
      return this.negative !== 0 && S.negative === 0 ? (x = this.neg().divmod(S, m), m !== "mod" && (g = x.div.neg()), m !== "div" && (b = x.mod.neg(), f && b.negative !== 0 && b.iadd(S)), {
        div: g,
        mod: b
      }) : this.negative === 0 && S.negative !== 0 ? (x = this.divmod(S.neg(), m), m !== "mod" && (g = x.div.neg()), {
        div: g,
        mod: x.mod
      }) : this.negative & S.negative ? (x = this.neg().divmod(S.neg(), m), m !== "div" && (b = x.mod.neg(), f && b.negative !== 0 && b.isub(S)), {
        div: x.div,
        mod: b
      }) : S.length > this.length || this.cmp(S) < 0 ? {
        div: new s(0),
        mod: this
      } : S.length === 1 ? m === "div" ? {
        div: this.divn(S.words[0]),
        mod: null
      } : m === "mod" ? {
        div: null,
        mod: new s(this.modn(S.words[0]))
      } : {
        div: this.divn(S.words[0]),
        mod: new s(this.modn(S.words[0]))
      } : this._wordDiv(S, m);
    }, s.prototype.div = function(S) {
      return this.divmod(S, "div", !1).div;
    }, s.prototype.mod = function(S) {
      return this.divmod(S, "mod", !1).mod;
    }, s.prototype.umod = function(S) {
      return this.divmod(S, "mod", !0).mod;
    }, s.prototype.divRound = function(S) {
      var m = this.divmod(S);
      if (m.mod.isZero()) return m.div;
      var f = m.div.negative !== 0 ? m.mod.isub(S) : m.mod, g = S.ushrn(1), b = S.andln(1), x = f.cmp(g);
      return x < 0 || b === 1 && x === 0 ? m.div : m.div.negative !== 0 ? m.div.isubn(1) : m.div.iaddn(1);
    }, s.prototype.modn = function(S) {
      n(S <= 67108863);
      for (var m = (1 << 26) % S, f = 0, g = this.length - 1; g >= 0; g--)
        f = (m * f + (this.words[g] | 0)) % S;
      return f;
    }, s.prototype.idivn = function(S) {
      n(S <= 67108863);
      for (var m = 0, f = this.length - 1; f >= 0; f--) {
        var g = (this.words[f] | 0) + m * 67108864;
        this.words[f] = g / S | 0, m = g % S;
      }
      return this.strip();
    }, s.prototype.divn = function(S) {
      return this.clone().idivn(S);
    }, s.prototype.egcd = function(S) {
      n(S.negative === 0), n(!S.isZero());
      var m = this, f = S.clone();
      m.negative !== 0 ? m = m.umod(S) : m = m.clone();
      for (var g = new s(1), b = new s(0), x = new s(0), _ = new s(1), E = 0; m.isEven() && f.isEven(); )
        m.iushrn(1), f.iushrn(1), ++E;
      for (var v = f.clone(), P = m.clone(); !m.isZero(); ) {
        for (var I = 0, F = 1; !(m.words[0] & F) && I < 26; ++I, F <<= 1) ;
        if (I > 0)
          for (m.iushrn(I); I-- > 0; )
            (g.isOdd() || b.isOdd()) && (g.iadd(v), b.isub(P)), g.iushrn(1), b.iushrn(1);
        for (var ce = 0, D = 1; !(f.words[0] & D) && ce < 26; ++ce, D <<= 1) ;
        if (ce > 0)
          for (f.iushrn(ce); ce-- > 0; )
            (x.isOdd() || _.isOdd()) && (x.iadd(v), _.isub(P)), x.iushrn(1), _.iushrn(1);
        m.cmp(f) >= 0 ? (m.isub(f), g.isub(x), b.isub(_)) : (f.isub(m), x.isub(g), _.isub(b));
      }
      return {
        a: x,
        b: _,
        gcd: f.iushln(E)
      };
    }, s.prototype._invmp = function(S) {
      n(S.negative === 0), n(!S.isZero());
      var m = this, f = S.clone();
      m.negative !== 0 ? m = m.umod(S) : m = m.clone();
      for (var g = new s(1), b = new s(0), x = f.clone(); m.cmpn(1) > 0 && f.cmpn(1) > 0; ) {
        for (var _ = 0, E = 1; !(m.words[0] & E) && _ < 26; ++_, E <<= 1) ;
        if (_ > 0)
          for (m.iushrn(_); _-- > 0; )
            g.isOdd() && g.iadd(x), g.iushrn(1);
        for (var v = 0, P = 1; !(f.words[0] & P) && v < 26; ++v, P <<= 1) ;
        if (v > 0)
          for (f.iushrn(v); v-- > 0; )
            b.isOdd() && b.iadd(x), b.iushrn(1);
        m.cmp(f) >= 0 ? (m.isub(f), g.isub(b)) : (f.isub(m), b.isub(g));
      }
      var I;
      return m.cmpn(1) === 0 ? I = g : I = b, I.cmpn(0) < 0 && I.iadd(S), I;
    }, s.prototype.gcd = function(S) {
      if (this.isZero()) return S.abs();
      if (S.isZero()) return this.abs();
      var m = this.clone(), f = S.clone();
      m.negative = 0, f.negative = 0;
      for (var g = 0; m.isEven() && f.isEven(); g++)
        m.iushrn(1), f.iushrn(1);
      do {
        for (; m.isEven(); )
          m.iushrn(1);
        for (; f.isEven(); )
          f.iushrn(1);
        var b = m.cmp(f);
        if (b < 0) {
          var x = m;
          m = f, f = x;
        } else if (b === 0 || f.cmpn(1) === 0)
          break;
        m.isub(f);
      } while (!0);
      return f.iushln(g);
    }, s.prototype.invm = function(S) {
      return this.egcd(S).a.umod(S);
    }, s.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, s.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, s.prototype.andln = function(S) {
      return this.words[0] & S;
    }, s.prototype.bincn = function(S) {
      n(typeof S == "number");
      var m = S % 26, f = (S - m) / 26, g = 1 << m;
      if (this.length <= f)
        return this._expand(f + 1), this.words[f] |= g, this;
      for (var b = g, x = f; b !== 0 && x < this.length; x++) {
        var _ = this.words[x] | 0;
        _ += b, b = _ >>> 26, _ &= 67108863, this.words[x] = _;
      }
      return b !== 0 && (this.words[x] = b, this.length++), this;
    }, s.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, s.prototype.cmpn = function(S) {
      var m = S < 0;
      if (this.negative !== 0 && !m) return -1;
      if (this.negative === 0 && m) return 1;
      this.strip();
      var f;
      if (this.length > 1)
        f = 1;
      else {
        m && (S = -S), n(S <= 67108863, "Number is too big");
        var g = this.words[0] | 0;
        f = g === S ? 0 : g < S ? -1 : 1;
      }
      return this.negative !== 0 ? -f | 0 : f;
    }, s.prototype.cmp = function(S) {
      if (this.negative !== 0 && S.negative === 0) return -1;
      if (this.negative === 0 && S.negative !== 0) return 1;
      var m = this.ucmp(S);
      return this.negative !== 0 ? -m | 0 : m;
    }, s.prototype.ucmp = function(S) {
      if (this.length > S.length) return 1;
      if (this.length < S.length) return -1;
      for (var m = 0, f = this.length - 1; f >= 0; f--) {
        var g = this.words[f] | 0, b = S.words[f] | 0;
        if (g !== b) {
          g < b ? m = -1 : g > b && (m = 1);
          break;
        }
      }
      return m;
    }, s.prototype.gtn = function(S) {
      return this.cmpn(S) === 1;
    }, s.prototype.gt = function(S) {
      return this.cmp(S) === 1;
    }, s.prototype.gten = function(S) {
      return this.cmpn(S) >= 0;
    }, s.prototype.gte = function(S) {
      return this.cmp(S) >= 0;
    }, s.prototype.ltn = function(S) {
      return this.cmpn(S) === -1;
    }, s.prototype.lt = function(S) {
      return this.cmp(S) === -1;
    }, s.prototype.lten = function(S) {
      return this.cmpn(S) <= 0;
    }, s.prototype.lte = function(S) {
      return this.cmp(S) <= 0;
    }, s.prototype.eqn = function(S) {
      return this.cmpn(S) === 0;
    }, s.prototype.eq = function(S) {
      return this.cmp(S) === 0;
    }, s.red = function(S) {
      return new ge(S);
    }, s.prototype.toRed = function(S) {
      return n(!this.red, "Already a number in reduction context"), n(this.negative === 0, "red works only with positives"), S.convertTo(this)._forceRed(S);
    }, s.prototype.fromRed = function() {
      return n(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, s.prototype._forceRed = function(S) {
      return this.red = S, this;
    }, s.prototype.forceRed = function(S) {
      return n(!this.red, "Already a number in reduction context"), this._forceRed(S);
    }, s.prototype.redAdd = function(S) {
      return n(this.red, "redAdd works only with red numbers"), this.red.add(this, S);
    }, s.prototype.redIAdd = function(S) {
      return n(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, S);
    }, s.prototype.redSub = function(S) {
      return n(this.red, "redSub works only with red numbers"), this.red.sub(this, S);
    }, s.prototype.redISub = function(S) {
      return n(this.red, "redISub works only with red numbers"), this.red.isub(this, S);
    }, s.prototype.redShl = function(S) {
      return n(this.red, "redShl works only with red numbers"), this.red.shl(this, S);
    }, s.prototype.redMul = function(S) {
      return n(this.red, "redMul works only with red numbers"), this.red._verify2(this, S), this.red.mul(this, S);
    }, s.prototype.redIMul = function(S) {
      return n(this.red, "redMul works only with red numbers"), this.red._verify2(this, S), this.red.imul(this, S);
    }, s.prototype.redSqr = function() {
      return n(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, s.prototype.redISqr = function() {
      return n(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, s.prototype.redSqrt = function() {
      return n(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, s.prototype.redInvm = function() {
      return n(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, s.prototype.redNeg = function() {
      return n(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, s.prototype.redPow = function(S) {
      return n(this.red && !S.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, S);
    };
    var H = {
      k256: null,
      p224: null,
      p192: null,
      p25519: null
    };
    function W(Y, S) {
      this.name = Y, this.p = new s(S, 16), this.n = this.p.bitLength(), this.k = new s(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    W.prototype._tmp = function() {
      var S = new s(null);
      return S.words = new Array(Math.ceil(this.n / 13)), S;
    }, W.prototype.ireduce = function(S) {
      var m = S, f;
      do
        this.split(m, this.tmp), m = this.imulK(m), m = m.iadd(this.tmp), f = m.bitLength();
      while (f > this.n);
      var g = f < this.n ? -1 : m.ucmp(this.p);
      return g === 0 ? (m.words[0] = 0, m.length = 1) : g > 0 ? m.isub(this.p) : m.strip !== void 0 ? m.strip() : m._strip(), m;
    }, W.prototype.split = function(S, m) {
      S.iushrn(this.n, 0, m);
    }, W.prototype.imulK = function(S) {
      return S.imul(this.k);
    };
    function V() {
      W.call(
        this,
        "k256",
        "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f"
      );
    }
    i(V, W), V.prototype.split = function(S, m) {
      for (var f = 4194303, g = Math.min(S.length, 9), b = 0; b < g; b++)
        m.words[b] = S.words[b];
      if (m.length = g, S.length <= 9) {
        S.words[0] = 0, S.length = 1;
        return;
      }
      var x = S.words[9];
      for (m.words[m.length++] = x & f, b = 10; b < S.length; b++) {
        var _ = S.words[b] | 0;
        S.words[b - 10] = (_ & f) << 4 | x >>> 22, x = _;
      }
      x >>>= 22, S.words[b - 10] = x, x === 0 && S.length > 10 ? S.length -= 10 : S.length -= 9;
    }, V.prototype.imulK = function(S) {
      S.words[S.length] = 0, S.words[S.length + 1] = 0, S.length += 2;
      for (var m = 0, f = 0; f < S.length; f++) {
        var g = S.words[f] | 0;
        m += g * 977, S.words[f] = m & 67108863, m = g * 64 + (m / 67108864 | 0);
      }
      return S.words[S.length - 1] === 0 && (S.length--, S.words[S.length - 1] === 0 && S.length--), S;
    };
    function te() {
      W.call(
        this,
        "p224",
        "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001"
      );
    }
    i(te, W);
    function R() {
      W.call(
        this,
        "p192",
        "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff"
      );
    }
    i(R, W);
    function K() {
      W.call(
        this,
        "25519",
        "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed"
      );
    }
    i(K, W), K.prototype.imulK = function(S) {
      for (var m = 0, f = 0; f < S.length; f++) {
        var g = (S.words[f] | 0) * 19 + m, b = g & 67108863;
        g >>>= 26, S.words[f] = b, m = g;
      }
      return m !== 0 && (S.words[S.length++] = m), S;
    }, s._prime = function(S) {
      if (H[S]) return H[S];
      var m;
      if (S === "k256")
        m = new V();
      else if (S === "p224")
        m = new te();
      else if (S === "p192")
        m = new R();
      else if (S === "p25519")
        m = new K();
      else
        throw new Error("Unknown prime " + S);
      return H[S] = m, m;
    };
    function ge(Y) {
      if (typeof Y == "string") {
        var S = s._prime(Y);
        this.m = S.p, this.prime = S;
      } else
        n(Y.gtn(1), "modulus must be greater than 1"), this.m = Y, this.prime = null;
    }
    ge.prototype._verify1 = function(S) {
      n(S.negative === 0, "red works only with positives"), n(S.red, "red works only with red numbers");
    }, ge.prototype._verify2 = function(S, m) {
      n((S.negative | m.negative) === 0, "red works only with positives"), n(
        S.red && S.red === m.red,
        "red works only with red numbers"
      );
    }, ge.prototype.imod = function(S) {
      return this.prime ? this.prime.ireduce(S)._forceRed(this) : S.umod(this.m)._forceRed(this);
    }, ge.prototype.neg = function(S) {
      return S.isZero() ? S.clone() : this.m.sub(S)._forceRed(this);
    }, ge.prototype.add = function(S, m) {
      this._verify2(S, m);
      var f = S.add(m);
      return f.cmp(this.m) >= 0 && f.isub(this.m), f._forceRed(this);
    }, ge.prototype.iadd = function(S, m) {
      this._verify2(S, m);
      var f = S.iadd(m);
      return f.cmp(this.m) >= 0 && f.isub(this.m), f;
    }, ge.prototype.sub = function(S, m) {
      this._verify2(S, m);
      var f = S.sub(m);
      return f.cmpn(0) < 0 && f.iadd(this.m), f._forceRed(this);
    }, ge.prototype.isub = function(S, m) {
      this._verify2(S, m);
      var f = S.isub(m);
      return f.cmpn(0) < 0 && f.iadd(this.m), f;
    }, ge.prototype.shl = function(S, m) {
      return this._verify1(S), this.imod(S.ushln(m));
    }, ge.prototype.imul = function(S, m) {
      return this._verify2(S, m), this.imod(S.imul(m));
    }, ge.prototype.mul = function(S, m) {
      return this._verify2(S, m), this.imod(S.mul(m));
    }, ge.prototype.isqr = function(S) {
      return this.imul(S, S.clone());
    }, ge.prototype.sqr = function(S) {
      return this.mul(S, S);
    }, ge.prototype.sqrt = function(S) {
      if (S.isZero()) return S.clone();
      var m = this.m.andln(3);
      if (n(m % 2 === 1), m === 3) {
        var f = this.m.add(new s(1)).iushrn(2);
        return this.pow(S, f);
      }
      for (var g = this.m.subn(1), b = 0; !g.isZero() && g.andln(1) === 0; )
        b++, g.iushrn(1);
      n(!g.isZero());
      var x = new s(1).toRed(this), _ = x.redNeg(), E = this.m.subn(1).iushrn(1), v = this.m.bitLength();
      for (v = new s(2 * v * v).toRed(this); this.pow(v, E).cmp(_) !== 0; )
        v.redIAdd(_);
      for (var P = this.pow(v, g), I = this.pow(S, g.addn(1).iushrn(1)), F = this.pow(S, g), ce = b; F.cmp(x) !== 0; ) {
        for (var D = F, oe = 0; D.cmp(x) !== 0; oe++)
          D = D.redSqr();
        n(oe < ce);
        var Z = this.pow(P, new s(1).iushln(ce - oe - 1));
        I = I.redMul(Z), P = Z.redSqr(), F = F.redMul(P), ce = oe;
      }
      return I;
    }, ge.prototype.invm = function(S) {
      var m = S._invmp(this.m);
      return m.negative !== 0 ? (m.negative = 0, this.imod(m).redNeg()) : this.imod(m);
    }, ge.prototype.pow = function(S, m) {
      if (m.isZero()) return new s(1).toRed(this);
      if (m.cmpn(1) === 0) return S.clone();
      var f = 4, g = new Array(1 << f);
      g[0] = new s(1).toRed(this), g[1] = S;
      for (var b = 2; b < g.length; b++)
        g[b] = this.mul(g[b - 1], S);
      var x = g[0], _ = 0, E = 0, v = m.bitLength() % 26;
      for (v === 0 && (v = 26), b = m.length - 1; b >= 0; b--) {
        for (var P = m.words[b], I = v - 1; I >= 0; I--) {
          var F = P >> I & 1;
          if (x !== g[0] && (x = this.sqr(x)), F === 0 && _ === 0) {
            E = 0;
            continue;
          }
          _ <<= 1, _ |= F, E++, !(E !== f && (b !== 0 || I !== 0)) && (x = this.mul(x, g[_]), E = 0, _ = 0);
        }
        v = 26;
      }
      return x;
    }, ge.prototype.convertTo = function(S) {
      var m = S.umod(this.m);
      return m === S ? m.clone() : m;
    }, ge.prototype.convertFrom = function(S) {
      var m = S.clone();
      return m.red = null, m;
    }, s.mont = function(S) {
      return new Ee(S);
    };
    function Ee(Y) {
      ge.call(this, Y), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new s(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    i(Ee, ge), Ee.prototype.convertTo = function(S) {
      return this.imod(S.ushln(this.shift));
    }, Ee.prototype.convertFrom = function(S) {
      var m = this.imod(S.mul(this.rinv));
      return m.red = null, m;
    }, Ee.prototype.imul = function(S, m) {
      if (S.isZero() || m.isZero())
        return S.words[0] = 0, S.length = 1, S;
      var f = S.imul(m), g = f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), b = f.isub(g).iushrn(this.shift), x = b;
      return b.cmp(this.m) >= 0 ? x = b.isub(this.m) : b.cmpn(0) < 0 && (x = b.iadd(this.m)), x._forceRed(this);
    }, Ee.prototype.mul = function(S, m) {
      if (S.isZero() || m.isZero()) return new s(0)._forceRed(this);
      var f = S.mul(m), g = f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), b = f.isub(g).iushrn(this.shift), x = b;
      return b.cmp(this.m) >= 0 ? x = b.isub(this.m) : b.cmpn(0) < 0 && (x = b.iadd(this.m)), x._forceRed(this);
    }, Ee.prototype.invm = function(S) {
      var m = this.imod(S._invmp(this.m).mul(this.r2));
      return m._forceRed(this);
    };
  })(t, gn);
})(Xv);
var zo = Xv.exports, Zv = {};
(function(t) {
  var e = t;
  function r(s, o) {
    if (Array.isArray(s))
      return s.slice();
    if (!s)
      return [];
    var a = [];
    if (typeof s != "string") {
      for (var u = 0; u < s.length; u++)
        a[u] = s[u] | 0;
      return a;
    }
    if (o === "hex") {
      s = s.replace(/[^a-z0-9]+/ig, ""), s.length % 2 !== 0 && (s = "0" + s);
      for (var u = 0; u < s.length; u += 2)
        a.push(parseInt(s[u] + s[u + 1], 16));
    } else
      for (var u = 0; u < s.length; u++) {
        var l = s.charCodeAt(u), d = l >> 8, p = l & 255;
        d ? a.push(d, p) : a.push(p);
      }
    return a;
  }
  e.toArray = r;
  function n(s) {
    return s.length === 1 ? "0" + s : s;
  }
  e.zero2 = n;
  function i(s) {
    for (var o = "", a = 0; a < s.length; a++)
      o += n(s[a].toString(16));
    return o;
  }
  e.toHex = i, e.encode = function(o, a) {
    return a === "hex" ? i(o) : o;
  };
})(Zv);
(function(t) {
  var e = t, r = zo, n = wc, i = Zv;
  e.assert = n, e.toArray = i.toArray, e.zero2 = i.zero2, e.toHex = i.toHex, e.encode = i.encode;
  function s(d, p, w) {
    var A = new Array(Math.max(d.bitLength(), w) + 1), M;
    for (M = 0; M < A.length; M += 1)
      A[M] = 0;
    var N = 1 << p + 1, L = d.clone();
    for (M = 0; M < A.length; M++) {
      var B, $ = L.andln(N - 1);
      L.isOdd() ? ($ > (N >> 1) - 1 ? B = (N >> 1) - $ : B = $, L.isubn(B)) : B = 0, A[M] = B, L.iushrn(1);
    }
    return A;
  }
  e.getNAF = s;
  function o(d, p) {
    var w = [
      [],
      []
    ];
    d = d.clone(), p = p.clone();
    for (var A = 0, M = 0, N; d.cmpn(-A) > 0 || p.cmpn(-M) > 0; ) {
      var L = d.andln(3) + A & 3, B = p.andln(3) + M & 3;
      L === 3 && (L = -1), B === 3 && (B = -1);
      var $;
      L & 1 ? (N = d.andln(7) + A & 7, (N === 3 || N === 5) && B === 2 ? $ = -L : $ = L) : $ = 0, w[0].push($);
      var H;
      B & 1 ? (N = p.andln(7) + M & 7, (N === 3 || N === 5) && L === 2 ? H = -B : H = B) : H = 0, w[1].push(H), 2 * A === $ + 1 && (A = 1 - A), 2 * M === H + 1 && (M = 1 - M), d.iushrn(1), p.iushrn(1);
    }
    return w;
  }
  e.getJSF = o;
  function a(d, p, w) {
    var A = "_" + p;
    d.prototype[p] = function() {
      return this[A] !== void 0 ? this[A] : this[A] = w.call(this);
    };
  }
  e.cachedProperty = a;
  function u(d) {
    return typeof d == "string" ? e.toArray(d, "hex") : d;
  }
  e.parseBytes = u;
  function l(d) {
    return new r(d, "hex", "le");
  }
  e.intFromLE = l;
})(Bi);
var Qv = { exports: {} }, am;
Qv.exports = function(e) {
  return am || (am = new la(null)), am.generate(e);
};
function la(t) {
  this.rand = t;
}
Qv.exports.Rand = la;
la.prototype.generate = function(e) {
  return this._rand(e);
};
la.prototype._rand = function(e) {
  if (this.rand.getBytes)
    return this.rand.getBytes(e);
  for (var r = new Uint8Array(e), n = 0; n < r.length; n++)
    r[n] = this.rand.getByte();
  return r;
};
if (typeof self == "object")
  self.crypto && self.crypto.getRandomValues ? la.prototype._rand = function(e) {
    var r = new Uint8Array(e);
    return self.crypto.getRandomValues(r), r;
  } : self.msCrypto && self.msCrypto.getRandomValues ? la.prototype._rand = function(e) {
    var r = new Uint8Array(e);
    return self.msCrypto.getRandomValues(r), r;
  } : typeof window == "object" && (la.prototype._rand = function() {
    throw new Error("Not implemented yet");
  });
else
  try {
    var Cx = Wl;
    if (typeof Cx.randomBytes != "function")
      throw new Error("Not supported");
    la.prototype._rand = function(e) {
      return Cx.randomBytes(e);
    };
  } catch {
  }
var _8 = Qv.exports, eb = {}, Wa = zo, Jl = Bi, s0 = Jl.getNAF, iq = Jl.getJSF, o0 = Jl.assert;
function Ca(t, e) {
  this.type = t, this.p = new Wa(e.p, 16), this.red = e.prime ? Wa.red(e.prime) : Wa.mont(this.p), this.zero = new Wa(0).toRed(this.red), this.one = new Wa(1).toRed(this.red), this.two = new Wa(2).toRed(this.red), this.n = e.n && new Wa(e.n, 16), this.g = e.g && this.pointFromJSON(e.g, e.gRed), this._wnafT1 = new Array(4), this._wnafT2 = new Array(4), this._wnafT3 = new Array(4), this._wnafT4 = new Array(4), this._bitLength = this.n ? this.n.bitLength() : 0;
  var r = this.n && this.p.div(this.n);
  !r || r.cmpn(100) > 0 ? this.redN = null : (this._maxwellTrick = !0, this.redN = this.n.toRed(this.red));
}
var G0 = Ca;
Ca.prototype.point = function() {
  throw new Error("Not implemented");
};
Ca.prototype.validate = function() {
  throw new Error("Not implemented");
};
Ca.prototype._fixedNafMul = function(e, r) {
  o0(e.precomputed);
  var n = e._getDoubles(), i = s0(r, 1, this._bitLength), s = (1 << n.step + 1) - (n.step % 2 === 0 ? 2 : 1);
  s /= 3;
  var o = [], a, u;
  for (a = 0; a < i.length; a += n.step) {
    u = 0;
    for (var l = a + n.step - 1; l >= a; l--)
      u = (u << 1) + i[l];
    o.push(u);
  }
  for (var d = this.jpoint(null, null, null), p = this.jpoint(null, null, null), w = s; w > 0; w--) {
    for (a = 0; a < o.length; a++)
      u = o[a], u === w ? p = p.mixedAdd(n.points[a]) : u === -w && (p = p.mixedAdd(n.points[a].neg()));
    d = d.add(p);
  }
  return d.toP();
};
Ca.prototype._wnafMul = function(e, r) {
  var n = 4, i = e._getNAFPoints(n);
  n = i.wnd;
  for (var s = i.points, o = s0(r, n, this._bitLength), a = this.jpoint(null, null, null), u = o.length - 1; u >= 0; u--) {
    for (var l = 0; u >= 0 && o[u] === 0; u--)
      l++;
    if (u >= 0 && l++, a = a.dblp(l), u < 0)
      break;
    var d = o[u];
    o0(d !== 0), e.type === "affine" ? d > 0 ? a = a.mixedAdd(s[d - 1 >> 1]) : a = a.mixedAdd(s[-d - 1 >> 1].neg()) : d > 0 ? a = a.add(s[d - 1 >> 1]) : a = a.add(s[-d - 1 >> 1].neg());
  }
  return e.type === "affine" ? a.toP() : a;
};
Ca.prototype._wnafMulAdd = function(e, r, n, i, s) {
  var o = this._wnafT1, a = this._wnafT2, u = this._wnafT3, l = 0, d, p, w;
  for (d = 0; d < i; d++) {
    w = r[d];
    var A = w._getNAFPoints(e);
    o[d] = A.wnd, a[d] = A.points;
  }
  for (d = i - 1; d >= 1; d -= 2) {
    var M = d - 1, N = d;
    if (o[M] !== 1 || o[N] !== 1) {
      u[M] = s0(n[M], o[M], this._bitLength), u[N] = s0(n[N], o[N], this._bitLength), l = Math.max(u[M].length, l), l = Math.max(u[N].length, l);
      continue;
    }
    var L = [
      r[M],
      /* 1 */
      null,
      /* 3 */
      null,
      /* 5 */
      r[N]
      /* 7 */
    ];
    r[M].y.cmp(r[N].y) === 0 ? (L[1] = r[M].add(r[N]), L[2] = r[M].toJ().mixedAdd(r[N].neg())) : r[M].y.cmp(r[N].y.redNeg()) === 0 ? (L[1] = r[M].toJ().mixedAdd(r[N]), L[2] = r[M].add(r[N].neg())) : (L[1] = r[M].toJ().mixedAdd(r[N]), L[2] = r[M].toJ().mixedAdd(r[N].neg()));
    var B = [
      -3,
      /* -1 -1 */
      -1,
      /* -1 0 */
      -5,
      /* -1 1 */
      -7,
      /* 0 -1 */
      0,
      /* 0 0 */
      7,
      /* 0 1 */
      5,
      /* 1 -1 */
      1,
      /* 1 0 */
      3
      /* 1 1 */
    ], $ = iq(n[M], n[N]);
    for (l = Math.max($[0].length, l), u[M] = new Array(l), u[N] = new Array(l), p = 0; p < l; p++) {
      var H = $[0][p] | 0, W = $[1][p] | 0;
      u[M][p] = B[(H + 1) * 3 + (W + 1)], u[N][p] = 0, a[M] = L;
    }
  }
  var V = this.jpoint(null, null, null), te = this._wnafT4;
  for (d = l; d >= 0; d--) {
    for (var R = 0; d >= 0; ) {
      var K = !0;
      for (p = 0; p < i; p++)
        te[p] = u[p][d] | 0, te[p] !== 0 && (K = !1);
      if (!K)
        break;
      R++, d--;
    }
    if (d >= 0 && R++, V = V.dblp(R), d < 0)
      break;
    for (p = 0; p < i; p++) {
      var ge = te[p];
      ge !== 0 && (ge > 0 ? w = a[p][ge - 1 >> 1] : ge < 0 && (w = a[p][-ge - 1 >> 1].neg()), w.type === "affine" ? V = V.mixedAdd(w) : V = V.add(w));
    }
  }
  for (d = 0; d < i; d++)
    a[d] = null;
  return s ? V : V.toP();
};
function ss(t, e) {
  this.curve = t, this.type = e, this.precomputed = null;
}
Ca.BasePoint = ss;
ss.prototype.eq = function() {
  throw new Error("Not implemented");
};
ss.prototype.validate = function() {
  return this.curve.validate(this);
};
Ca.prototype.decodePoint = function(e, r) {
  e = Jl.toArray(e, r);
  var n = this.p.byteLength();
  if ((e[0] === 4 || e[0] === 6 || e[0] === 7) && e.length - 1 === 2 * n) {
    e[0] === 6 ? o0(e[e.length - 1] % 2 === 0) : e[0] === 7 && o0(e[e.length - 1] % 2 === 1);
    var i = this.point(
      e.slice(1, 1 + n),
      e.slice(1 + n, 1 + 2 * n)
    );
    return i;
  } else if ((e[0] === 2 || e[0] === 3) && e.length - 1 === n)
    return this.pointFromX(e.slice(1, 1 + n), e[0] === 3);
  throw new Error("Unknown point format");
};
ss.prototype.encodeCompressed = function(e) {
  return this.encode(e, !0);
};
ss.prototype._encode = function(e) {
  var r = this.curve.p.byteLength(), n = this.getX().toArray("be", r);
  return e ? [this.getY().isEven() ? 2 : 3].concat(n) : [4].concat(n, this.getY().toArray("be", r));
};
ss.prototype.encode = function(e, r) {
  return Jl.encode(this._encode(r), e);
};
ss.prototype.precompute = function(e) {
  if (this.precomputed)
    return this;
  var r = {
    doubles: null,
    naf: null,
    beta: null
  };
  return r.naf = this._getNAFPoints(8), r.doubles = this._getDoubles(4, e), r.beta = this._getBeta(), this.precomputed = r, this;
};
ss.prototype._hasDoubles = function(e) {
  if (!this.precomputed)
    return !1;
  var r = this.precomputed.doubles;
  return r ? r.points.length >= Math.ceil((e.bitLength() + 1) / r.step) : !1;
};
ss.prototype._getDoubles = function(e, r) {
  if (this.precomputed && this.precomputed.doubles)
    return this.precomputed.doubles;
  for (var n = [this], i = this, s = 0; s < r; s += e) {
    for (var o = 0; o < e; o++)
      i = i.dbl();
    n.push(i);
  }
  return {
    step: e,
    points: n
  };
};
ss.prototype._getNAFPoints = function(e) {
  if (this.precomputed && this.precomputed.naf)
    return this.precomputed.naf;
  for (var r = [this], n = (1 << e) - 1, i = n === 1 ? null : this.dbl(), s = 1; s < n; s++)
    r[s] = r[s - 1].add(i);
  return {
    wnd: e,
    points: r
  };
};
ss.prototype._getBeta = function() {
  return null;
};
ss.prototype.dblp = function(e) {
  for (var r = this, n = 0; n < e; n++)
    r = r.dbl();
  return r;
};
var sq = Bi, rn = zo, tb = z0, Fu = G0, oq = sq.assert;
function os(t) {
  Fu.call(this, "short", t), this.a = new rn(t.a, 16).toRed(this.red), this.b = new rn(t.b, 16).toRed(this.red), this.tinv = this.two.redInvm(), this.zeroA = this.a.fromRed().cmpn(0) === 0, this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0, this.endo = this._getEndomorphism(t), this._endoWnafT1 = new Array(4), this._endoWnafT2 = new Array(4);
}
tb(os, Fu);
var aq = os;
os.prototype._getEndomorphism = function(e) {
  if (!(!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)) {
    var r, n;
    if (e.beta)
      r = new rn(e.beta, 16).toRed(this.red);
    else {
      var i = this._getEndoRoots(this.p);
      r = i[0].cmp(i[1]) < 0 ? i[0] : i[1], r = r.toRed(this.red);
    }
    if (e.lambda)
      n = new rn(e.lambda, 16);
    else {
      var s = this._getEndoRoots(this.n);
      this.g.mul(s[0]).x.cmp(this.g.x.redMul(r)) === 0 ? n = s[0] : (n = s[1], oq(this.g.mul(n).x.cmp(this.g.x.redMul(r)) === 0));
    }
    var o;
    return e.basis ? o = e.basis.map(function(a) {
      return {
        a: new rn(a.a, 16),
        b: new rn(a.b, 16)
      };
    }) : o = this._getEndoBasis(n), {
      beta: r,
      lambda: n,
      basis: o
    };
  }
};
os.prototype._getEndoRoots = function(e) {
  var r = e === this.p ? this.red : rn.mont(e), n = new rn(2).toRed(r).redInvm(), i = n.redNeg(), s = new rn(3).toRed(r).redNeg().redSqrt().redMul(n), o = i.redAdd(s).fromRed(), a = i.redSub(s).fromRed();
  return [o, a];
};
os.prototype._getEndoBasis = function(e) {
  for (var r = this.n.ushrn(Math.floor(this.n.bitLength() / 2)), n = e, i = this.n.clone(), s = new rn(1), o = new rn(0), a = new rn(0), u = new rn(1), l, d, p, w, A, M, N, L = 0, B, $; n.cmpn(0) !== 0; ) {
    var H = i.div(n);
    B = i.sub(H.mul(n)), $ = a.sub(H.mul(s));
    var W = u.sub(H.mul(o));
    if (!p && B.cmp(r) < 0)
      l = N.neg(), d = s, p = B.neg(), w = $;
    else if (p && ++L === 2)
      break;
    N = B, i = n, n = B, a = s, s = $, u = o, o = W;
  }
  A = B.neg(), M = $;
  var V = p.sqr().add(w.sqr()), te = A.sqr().add(M.sqr());
  return te.cmp(V) >= 0 && (A = l, M = d), p.negative && (p = p.neg(), w = w.neg()), A.negative && (A = A.neg(), M = M.neg()), [
    { a: p, b: w },
    { a: A, b: M }
  ];
};
os.prototype._endoSplit = function(e) {
  var r = this.endo.basis, n = r[0], i = r[1], s = i.b.mul(e).divRound(this.n), o = n.b.neg().mul(e).divRound(this.n), a = s.mul(n.a), u = o.mul(i.a), l = s.mul(n.b), d = o.mul(i.b), p = e.sub(a).sub(u), w = l.add(d).neg();
  return { k1: p, k2: w };
};
os.prototype.pointFromX = function(e, r) {
  e = new rn(e, 16), e.red || (e = e.toRed(this.red));
  var n = e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b), i = n.redSqrt();
  if (i.redSqr().redSub(n).cmp(this.zero) !== 0)
    throw new Error("invalid point");
  var s = i.fromRed().isOdd();
  return (r && !s || !r && s) && (i = i.redNeg()), this.point(e, i);
};
os.prototype.validate = function(e) {
  if (e.inf)
    return !0;
  var r = e.x, n = e.y, i = this.a.redMul(r), s = r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);
  return n.redSqr().redISub(s).cmpn(0) === 0;
};
os.prototype._endoWnafMulAdd = function(e, r, n) {
  for (var i = this._endoWnafT1, s = this._endoWnafT2, o = 0; o < e.length; o++) {
    var a = this._endoSplit(r[o]), u = e[o], l = u._getBeta();
    a.k1.negative && (a.k1.ineg(), u = u.neg(!0)), a.k2.negative && (a.k2.ineg(), l = l.neg(!0)), i[o * 2] = u, i[o * 2 + 1] = l, s[o * 2] = a.k1, s[o * 2 + 1] = a.k2;
  }
  for (var d = this._wnafMulAdd(1, i, s, o * 2, n), p = 0; p < o * 2; p++)
    i[p] = null, s[p] = null;
  return d;
};
function $n(t, e, r, n) {
  Fu.BasePoint.call(this, t, "affine"), e === null && r === null ? (this.x = null, this.y = null, this.inf = !0) : (this.x = new rn(e, 16), this.y = new rn(r, 16), n && (this.x.forceRed(this.curve.red), this.y.forceRed(this.curve.red)), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.inf = !1);
}
tb($n, Fu.BasePoint);
os.prototype.point = function(e, r, n) {
  return new $n(this, e, r, n);
};
os.prototype.pointFromJSON = function(e, r) {
  return $n.fromJSON(this, e, r);
};
$n.prototype._getBeta = function() {
  if (this.curve.endo) {
    var e = this.precomputed;
    if (e && e.beta)
      return e.beta;
    var r = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);
    if (e) {
      var n = this.curve, i = function(s) {
        return n.point(s.x.redMul(n.endo.beta), s.y);
      };
      e.beta = r, r.precomputed = {
        beta: null,
        naf: e.naf && {
          wnd: e.naf.wnd,
          points: e.naf.points.map(i)
        },
        doubles: e.doubles && {
          step: e.doubles.step,
          points: e.doubles.points.map(i)
        }
      };
    }
    return r;
  }
};
$n.prototype.toJSON = function() {
  return this.precomputed ? [this.x, this.y, this.precomputed && {
    doubles: this.precomputed.doubles && {
      step: this.precomputed.doubles.step,
      points: this.precomputed.doubles.points.slice(1)
    },
    naf: this.precomputed.naf && {
      wnd: this.precomputed.naf.wnd,
      points: this.precomputed.naf.points.slice(1)
    }
  }] : [this.x, this.y];
};
$n.fromJSON = function(e, r, n) {
  typeof r == "string" && (r = JSON.parse(r));
  var i = e.point(r[0], r[1], n);
  if (!r[2])
    return i;
  function s(a) {
    return e.point(a[0], a[1], n);
  }
  var o = r[2];
  return i.precomputed = {
    beta: null,
    doubles: o.doubles && {
      step: o.doubles.step,
      points: [i].concat(o.doubles.points.map(s))
    },
    naf: o.naf && {
      wnd: o.naf.wnd,
      points: [i].concat(o.naf.points.map(s))
    }
  }, i;
};
$n.prototype.inspect = function() {
  return this.isInfinity() ? "<EC Point Infinity>" : "<EC Point x: " + this.x.fromRed().toString(16, 2) + " y: " + this.y.fromRed().toString(16, 2) + ">";
};
$n.prototype.isInfinity = function() {
  return this.inf;
};
$n.prototype.add = function(e) {
  if (this.inf)
    return e;
  if (e.inf)
    return this;
  if (this.eq(e))
    return this.dbl();
  if (this.neg().eq(e))
    return this.curve.point(null, null);
  if (this.x.cmp(e.x) === 0)
    return this.curve.point(null, null);
  var r = this.y.redSub(e.y);
  r.cmpn(0) !== 0 && (r = r.redMul(this.x.redSub(e.x).redInvm()));
  var n = r.redSqr().redISub(this.x).redISub(e.x), i = r.redMul(this.x.redSub(n)).redISub(this.y);
  return this.curve.point(n, i);
};
$n.prototype.dbl = function() {
  if (this.inf)
    return this;
  var e = this.y.redAdd(this.y);
  if (e.cmpn(0) === 0)
    return this.curve.point(null, null);
  var r = this.curve.a, n = this.x.redSqr(), i = e.redInvm(), s = n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i), o = s.redSqr().redISub(this.x.redAdd(this.x)), a = s.redMul(this.x.redSub(o)).redISub(this.y);
  return this.curve.point(o, a);
};
$n.prototype.getX = function() {
  return this.x.fromRed();
};
$n.prototype.getY = function() {
  return this.y.fromRed();
};
$n.prototype.mul = function(e) {
  return e = new rn(e, 16), this.isInfinity() ? this : this._hasDoubles(e) ? this.curve._fixedNafMul(this, e) : this.curve.endo ? this.curve._endoWnafMulAdd([this], [e]) : this.curve._wnafMul(this, e);
};
$n.prototype.mulAdd = function(e, r, n) {
  var i = [this, r], s = [e, n];
  return this.curve.endo ? this.curve._endoWnafMulAdd(i, s) : this.curve._wnafMulAdd(1, i, s, 2);
};
$n.prototype.jmulAdd = function(e, r, n) {
  var i = [this, r], s = [e, n];
  return this.curve.endo ? this.curve._endoWnafMulAdd(i, s, !0) : this.curve._wnafMulAdd(1, i, s, 2, !0);
};
$n.prototype.eq = function(e) {
  return this === e || this.inf === e.inf && (this.inf || this.x.cmp(e.x) === 0 && this.y.cmp(e.y) === 0);
};
$n.prototype.neg = function(e) {
  if (this.inf)
    return this;
  var r = this.curve.point(this.x, this.y.redNeg());
  if (e && this.precomputed) {
    var n = this.precomputed, i = function(s) {
      return s.neg();
    };
    r.precomputed = {
      naf: n.naf && {
        wnd: n.naf.wnd,
        points: n.naf.points.map(i)
      },
      doubles: n.doubles && {
        step: n.doubles.step,
        points: n.doubles.points.map(i)
      }
    };
  }
  return r;
};
$n.prototype.toJ = function() {
  if (this.inf)
    return this.curve.jpoint(null, null, null);
  var e = this.curve.jpoint(this.x, this.y, this.curve.one);
  return e;
};
function Wn(t, e, r, n) {
  Fu.BasePoint.call(this, t, "jacobian"), e === null && r === null && n === null ? (this.x = this.curve.one, this.y = this.curve.one, this.z = new rn(0)) : (this.x = new rn(e, 16), this.y = new rn(r, 16), this.z = new rn(n, 16)), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.z.red || (this.z = this.z.toRed(this.curve.red)), this.zOne = this.z === this.curve.one;
}
tb(Wn, Fu.BasePoint);
os.prototype.jpoint = function(e, r, n) {
  return new Wn(this, e, r, n);
};
Wn.prototype.toP = function() {
  if (this.isInfinity())
    return this.curve.point(null, null);
  var e = this.z.redInvm(), r = e.redSqr(), n = this.x.redMul(r), i = this.y.redMul(r).redMul(e);
  return this.curve.point(n, i);
};
Wn.prototype.neg = function() {
  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);
};
Wn.prototype.add = function(e) {
  if (this.isInfinity())
    return e;
  if (e.isInfinity())
    return this;
  var r = e.z.redSqr(), n = this.z.redSqr(), i = this.x.redMul(r), s = e.x.redMul(n), o = this.y.redMul(r.redMul(e.z)), a = e.y.redMul(n.redMul(this.z)), u = i.redSub(s), l = o.redSub(a);
  if (u.cmpn(0) === 0)
    return l.cmpn(0) !== 0 ? this.curve.jpoint(null, null, null) : this.dbl();
  var d = u.redSqr(), p = d.redMul(u), w = i.redMul(d), A = l.redSqr().redIAdd(p).redISub(w).redISub(w), M = l.redMul(w.redISub(A)).redISub(o.redMul(p)), N = this.z.redMul(e.z).redMul(u);
  return this.curve.jpoint(A, M, N);
};
Wn.prototype.mixedAdd = function(e) {
  if (this.isInfinity())
    return e.toJ();
  if (e.isInfinity())
    return this;
  var r = this.z.redSqr(), n = this.x, i = e.x.redMul(r), s = this.y, o = e.y.redMul(r).redMul(this.z), a = n.redSub(i), u = s.redSub(o);
  if (a.cmpn(0) === 0)
    return u.cmpn(0) !== 0 ? this.curve.jpoint(null, null, null) : this.dbl();
  var l = a.redSqr(), d = l.redMul(a), p = n.redMul(l), w = u.redSqr().redIAdd(d).redISub(p).redISub(p), A = u.redMul(p.redISub(w)).redISub(s.redMul(d)), M = this.z.redMul(a);
  return this.curve.jpoint(w, A, M);
};
Wn.prototype.dblp = function(e) {
  if (e === 0)
    return this;
  if (this.isInfinity())
    return this;
  if (!e)
    return this.dbl();
  var r;
  if (this.curve.zeroA || this.curve.threeA) {
    var n = this;
    for (r = 0; r < e; r++)
      n = n.dbl();
    return n;
  }
  var i = this.curve.a, s = this.curve.tinv, o = this.x, a = this.y, u = this.z, l = u.redSqr().redSqr(), d = a.redAdd(a);
  for (r = 0; r < e; r++) {
    var p = o.redSqr(), w = d.redSqr(), A = w.redSqr(), M = p.redAdd(p).redIAdd(p).redIAdd(i.redMul(l)), N = o.redMul(w), L = M.redSqr().redISub(N.redAdd(N)), B = N.redISub(L), $ = M.redMul(B);
    $ = $.redIAdd($).redISub(A);
    var H = d.redMul(u);
    r + 1 < e && (l = l.redMul(A)), o = L, u = H, d = $;
  }
  return this.curve.jpoint(o, d.redMul(s), u);
};
Wn.prototype.dbl = function() {
  return this.isInfinity() ? this : this.curve.zeroA ? this._zeroDbl() : this.curve.threeA ? this._threeDbl() : this._dbl();
};
Wn.prototype._zeroDbl = function() {
  var e, r, n;
  if (this.zOne) {
    var i = this.x.redSqr(), s = this.y.redSqr(), o = s.redSqr(), a = this.x.redAdd(s).redSqr().redISub(i).redISub(o);
    a = a.redIAdd(a);
    var u = i.redAdd(i).redIAdd(i), l = u.redSqr().redISub(a).redISub(a), d = o.redIAdd(o);
    d = d.redIAdd(d), d = d.redIAdd(d), e = l, r = u.redMul(a.redISub(l)).redISub(d), n = this.y.redAdd(this.y);
  } else {
    var p = this.x.redSqr(), w = this.y.redSqr(), A = w.redSqr(), M = this.x.redAdd(w).redSqr().redISub(p).redISub(A);
    M = M.redIAdd(M);
    var N = p.redAdd(p).redIAdd(p), L = N.redSqr(), B = A.redIAdd(A);
    B = B.redIAdd(B), B = B.redIAdd(B), e = L.redISub(M).redISub(M), r = N.redMul(M.redISub(e)).redISub(B), n = this.y.redMul(this.z), n = n.redIAdd(n);
  }
  return this.curve.jpoint(e, r, n);
};
Wn.prototype._threeDbl = function() {
  var e, r, n;
  if (this.zOne) {
    var i = this.x.redSqr(), s = this.y.redSqr(), o = s.redSqr(), a = this.x.redAdd(s).redSqr().redISub(i).redISub(o);
    a = a.redIAdd(a);
    var u = i.redAdd(i).redIAdd(i).redIAdd(this.curve.a), l = u.redSqr().redISub(a).redISub(a);
    e = l;
    var d = o.redIAdd(o);
    d = d.redIAdd(d), d = d.redIAdd(d), r = u.redMul(a.redISub(l)).redISub(d), n = this.y.redAdd(this.y);
  } else {
    var p = this.z.redSqr(), w = this.y.redSqr(), A = this.x.redMul(w), M = this.x.redSub(p).redMul(this.x.redAdd(p));
    M = M.redAdd(M).redIAdd(M);
    var N = A.redIAdd(A);
    N = N.redIAdd(N);
    var L = N.redAdd(N);
    e = M.redSqr().redISub(L), n = this.y.redAdd(this.z).redSqr().redISub(w).redISub(p);
    var B = w.redSqr();
    B = B.redIAdd(B), B = B.redIAdd(B), B = B.redIAdd(B), r = M.redMul(N.redISub(e)).redISub(B);
  }
  return this.curve.jpoint(e, r, n);
};
Wn.prototype._dbl = function() {
  var e = this.curve.a, r = this.x, n = this.y, i = this.z, s = i.redSqr().redSqr(), o = r.redSqr(), a = n.redSqr(), u = o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)), l = r.redAdd(r);
  l = l.redIAdd(l);
  var d = l.redMul(a), p = u.redSqr().redISub(d.redAdd(d)), w = d.redISub(p), A = a.redSqr();
  A = A.redIAdd(A), A = A.redIAdd(A), A = A.redIAdd(A);
  var M = u.redMul(w).redISub(A), N = n.redAdd(n).redMul(i);
  return this.curve.jpoint(p, M, N);
};
Wn.prototype.trpl = function() {
  if (!this.curve.zeroA)
    return this.dbl().add(this);
  var e = this.x.redSqr(), r = this.y.redSqr(), n = this.z.redSqr(), i = r.redSqr(), s = e.redAdd(e).redIAdd(e), o = s.redSqr(), a = this.x.redAdd(r).redSqr().redISub(e).redISub(i);
  a = a.redIAdd(a), a = a.redAdd(a).redIAdd(a), a = a.redISub(o);
  var u = a.redSqr(), l = i.redIAdd(i);
  l = l.redIAdd(l), l = l.redIAdd(l), l = l.redIAdd(l);
  var d = s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(l), p = r.redMul(d);
  p = p.redIAdd(p), p = p.redIAdd(p);
  var w = this.x.redMul(u).redISub(p);
  w = w.redIAdd(w), w = w.redIAdd(w);
  var A = this.y.redMul(d.redMul(l.redISub(d)).redISub(a.redMul(u)));
  A = A.redIAdd(A), A = A.redIAdd(A), A = A.redIAdd(A);
  var M = this.z.redAdd(a).redSqr().redISub(n).redISub(u);
  return this.curve.jpoint(w, A, M);
};
Wn.prototype.mul = function(e, r) {
  return e = new rn(e, r), this.curve._wnafMul(this, e);
};
Wn.prototype.eq = function(e) {
  if (e.type === "affine")
    return this.eq(e.toJ());
  if (this === e)
    return !0;
  var r = this.z.redSqr(), n = e.z.redSqr();
  if (this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0) !== 0)
    return !1;
  var i = r.redMul(this.z), s = n.redMul(e.z);
  return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0) === 0;
};
Wn.prototype.eqXToP = function(e) {
  var r = this.z.redSqr(), n = e.toRed(this.curve.red).redMul(r);
  if (this.x.cmp(n) === 0)
    return !0;
  for (var i = e.clone(), s = this.curve.redN.redMul(r); ; ) {
    if (i.iadd(this.curve.n), i.cmp(this.curve.p) >= 0)
      return !1;
    if (n.redIAdd(s), this.x.cmp(n) === 0)
      return !0;
  }
};
Wn.prototype.inspect = function() {
  return this.isInfinity() ? "<EC JPoint Infinity>" : "<EC JPoint x: " + this.x.toString(16, 2) + " y: " + this.y.toString(16, 2) + " z: " + this.z.toString(16, 2) + ">";
};
Wn.prototype.isInfinity = function() {
  return this.z.cmpn(0) === 0;
};
var Qc = zo, E8 = z0, Y0 = G0, cq = Bi;
function ju(t) {
  Y0.call(this, "mont", t), this.a = new Qc(t.a, 16).toRed(this.red), this.b = new Qc(t.b, 16).toRed(this.red), this.i4 = new Qc(4).toRed(this.red).redInvm(), this.two = new Qc(2).toRed(this.red), this.a24 = this.i4.redMul(this.a.redAdd(this.two));
}
E8(ju, Y0);
var uq = ju;
ju.prototype.validate = function(e) {
  var r = e.normalize().x, n = r.redSqr(), i = n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r), s = i.redSqrt();
  return s.redSqr().cmp(i) === 0;
};
function Ln(t, e, r) {
  Y0.BasePoint.call(this, t, "projective"), e === null && r === null ? (this.x = this.curve.one, this.z = this.curve.zero) : (this.x = new Qc(e, 16), this.z = new Qc(r, 16), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.z.red || (this.z = this.z.toRed(this.curve.red)));
}
E8(Ln, Y0.BasePoint);
ju.prototype.decodePoint = function(e, r) {
  return this.point(cq.toArray(e, r), 1);
};
ju.prototype.point = function(e, r) {
  return new Ln(this, e, r);
};
ju.prototype.pointFromJSON = function(e) {
  return Ln.fromJSON(this, e);
};
Ln.prototype.precompute = function() {
};
Ln.prototype._encode = function() {
  return this.getX().toArray("be", this.curve.p.byteLength());
};
Ln.fromJSON = function(e, r) {
  return new Ln(e, r[0], r[1] || e.one);
};
Ln.prototype.inspect = function() {
  return this.isInfinity() ? "<EC Point Infinity>" : "<EC Point x: " + this.x.fromRed().toString(16, 2) + " z: " + this.z.fromRed().toString(16, 2) + ">";
};
Ln.prototype.isInfinity = function() {
  return this.z.cmpn(0) === 0;
};
Ln.prototype.dbl = function() {
  var e = this.x.redAdd(this.z), r = e.redSqr(), n = this.x.redSub(this.z), i = n.redSqr(), s = r.redSub(i), o = r.redMul(i), a = s.redMul(i.redAdd(this.curve.a24.redMul(s)));
  return this.curve.point(o, a);
};
Ln.prototype.add = function() {
  throw new Error("Not supported on Montgomery curve");
};
Ln.prototype.diffAdd = function(e, r) {
  var n = this.x.redAdd(this.z), i = this.x.redSub(this.z), s = e.x.redAdd(e.z), o = e.x.redSub(e.z), a = o.redMul(n), u = s.redMul(i), l = r.z.redMul(a.redAdd(u).redSqr()), d = r.x.redMul(a.redISub(u).redSqr());
  return this.curve.point(l, d);
};
Ln.prototype.mul = function(e) {
  for (var r = e.clone(), n = this, i = this.curve.point(null, null), s = this, o = []; r.cmpn(0) !== 0; r.iushrn(1))
    o.push(r.andln(1));
  for (var a = o.length - 1; a >= 0; a--)
    o[a] === 0 ? (n = n.diffAdd(i, s), i = i.dbl()) : (i = n.diffAdd(i, s), n = n.dbl());
  return i;
};
Ln.prototype.mulAdd = function() {
  throw new Error("Not supported on Montgomery curve");
};
Ln.prototype.jumlAdd = function() {
  throw new Error("Not supported on Montgomery curve");
};
Ln.prototype.eq = function(e) {
  return this.getX().cmp(e.getX()) === 0;
};
Ln.prototype.normalize = function() {
  return this.x = this.x.redMul(this.z.redInvm()), this.z = this.curve.one, this;
};
Ln.prototype.getX = function() {
  return this.normalize(), this.x.fromRed();
};
var fq = Bi, So = zo, S8 = z0, J0 = G0, lq = fq.assert;
function no(t) {
  this.twisted = (t.a | 0) !== 1, this.mOneA = this.twisted && (t.a | 0) === -1, this.extended = this.mOneA, J0.call(this, "edwards", t), this.a = new So(t.a, 16).umod(this.red.m), this.a = this.a.toRed(this.red), this.c = new So(t.c, 16).toRed(this.red), this.c2 = this.c.redSqr(), this.d = new So(t.d, 16).toRed(this.red), this.dd = this.d.redAdd(this.d), lq(!this.twisted || this.c.fromRed().cmpn(1) === 0), this.oneC = (t.c | 0) === 1;
}
S8(no, J0);
var hq = no;
no.prototype._mulA = function(e) {
  return this.mOneA ? e.redNeg() : this.a.redMul(e);
};
no.prototype._mulC = function(e) {
  return this.oneC ? e : this.c.redMul(e);
};
no.prototype.jpoint = function(e, r, n, i) {
  return this.point(e, r, n, i);
};
no.prototype.pointFromX = function(e, r) {
  e = new So(e, 16), e.red || (e = e.toRed(this.red));
  var n = e.redSqr(), i = this.c2.redSub(this.a.redMul(n)), s = this.one.redSub(this.c2.redMul(this.d).redMul(n)), o = i.redMul(s.redInvm()), a = o.redSqrt();
  if (a.redSqr().redSub(o).cmp(this.zero) !== 0)
    throw new Error("invalid point");
  var u = a.fromRed().isOdd();
  return (r && !u || !r && u) && (a = a.redNeg()), this.point(e, a);
};
no.prototype.pointFromY = function(e, r) {
  e = new So(e, 16), e.red || (e = e.toRed(this.red));
  var n = e.redSqr(), i = n.redSub(this.c2), s = n.redMul(this.d).redMul(this.c2).redSub(this.a), o = i.redMul(s.redInvm());
  if (o.cmp(this.zero) === 0) {
    if (r)
      throw new Error("invalid point");
    return this.point(this.zero, e);
  }
  var a = o.redSqrt();
  if (a.redSqr().redSub(o).cmp(this.zero) !== 0)
    throw new Error("invalid point");
  return a.fromRed().isOdd() !== r && (a = a.redNeg()), this.point(a, e);
};
no.prototype.validate = function(e) {
  if (e.isInfinity())
    return !0;
  e.normalize();
  var r = e.x.redSqr(), n = e.y.redSqr(), i = r.redMul(this.a).redAdd(n), s = this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));
  return i.cmp(s) === 0;
};
function Hr(t, e, r, n, i) {
  J0.BasePoint.call(this, t, "projective"), e === null && r === null && n === null ? (this.x = this.curve.zero, this.y = this.curve.one, this.z = this.curve.one, this.t = this.curve.zero, this.zOne = !0) : (this.x = new So(e, 16), this.y = new So(r, 16), this.z = n ? new So(n, 16) : this.curve.one, this.t = i && new So(i, 16), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.z.red || (this.z = this.z.toRed(this.curve.red)), this.t && !this.t.red && (this.t = this.t.toRed(this.curve.red)), this.zOne = this.z === this.curve.one, this.curve.extended && !this.t && (this.t = this.x.redMul(this.y), this.zOne || (this.t = this.t.redMul(this.z.redInvm()))));
}
S8(Hr, J0.BasePoint);
no.prototype.pointFromJSON = function(e) {
  return Hr.fromJSON(this, e);
};
no.prototype.point = function(e, r, n, i) {
  return new Hr(this, e, r, n, i);
};
Hr.fromJSON = function(e, r) {
  return new Hr(e, r[0], r[1], r[2]);
};
Hr.prototype.inspect = function() {
  return this.isInfinity() ? "<EC Point Infinity>" : "<EC Point x: " + this.x.fromRed().toString(16, 2) + " y: " + this.y.fromRed().toString(16, 2) + " z: " + this.z.fromRed().toString(16, 2) + ">";
};
Hr.prototype.isInfinity = function() {
  return this.x.cmpn(0) === 0 && (this.y.cmp(this.z) === 0 || this.zOne && this.y.cmp(this.curve.c) === 0);
};
Hr.prototype._extDbl = function() {
  var e = this.x.redSqr(), r = this.y.redSqr(), n = this.z.redSqr();
  n = n.redIAdd(n);
  var i = this.curve._mulA(e), s = this.x.redAdd(this.y).redSqr().redISub(e).redISub(r), o = i.redAdd(r), a = o.redSub(n), u = i.redSub(r), l = s.redMul(a), d = o.redMul(u), p = s.redMul(u), w = a.redMul(o);
  return this.curve.point(l, d, w, p);
};
Hr.prototype._projDbl = function() {
  var e = this.x.redAdd(this.y).redSqr(), r = this.x.redSqr(), n = this.y.redSqr(), i, s, o, a, u, l;
  if (this.curve.twisted) {
    a = this.curve._mulA(r);
    var d = a.redAdd(n);
    this.zOne ? (i = e.redSub(r).redSub(n).redMul(d.redSub(this.curve.two)), s = d.redMul(a.redSub(n)), o = d.redSqr().redSub(d).redSub(d)) : (u = this.z.redSqr(), l = d.redSub(u).redISub(u), i = e.redSub(r).redISub(n).redMul(l), s = d.redMul(a.redSub(n)), o = d.redMul(l));
  } else
    a = r.redAdd(n), u = this.curve._mulC(this.z).redSqr(), l = a.redSub(u).redSub(u), i = this.curve._mulC(e.redISub(a)).redMul(l), s = this.curve._mulC(a).redMul(r.redISub(n)), o = a.redMul(l);
  return this.curve.point(i, s, o);
};
Hr.prototype.dbl = function() {
  return this.isInfinity() ? this : this.curve.extended ? this._extDbl() : this._projDbl();
};
Hr.prototype._extAdd = function(e) {
  var r = this.y.redSub(this.x).redMul(e.y.redSub(e.x)), n = this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)), i = this.t.redMul(this.curve.dd).redMul(e.t), s = this.z.redMul(e.z.redAdd(e.z)), o = n.redSub(r), a = s.redSub(i), u = s.redAdd(i), l = n.redAdd(r), d = o.redMul(a), p = u.redMul(l), w = o.redMul(l), A = a.redMul(u);
  return this.curve.point(d, p, A, w);
};
Hr.prototype._projAdd = function(e) {
  var r = this.z.redMul(e.z), n = r.redSqr(), i = this.x.redMul(e.x), s = this.y.redMul(e.y), o = this.curve.d.redMul(i).redMul(s), a = n.redSub(o), u = n.redAdd(o), l = this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s), d = r.redMul(a).redMul(l), p, w;
  return this.curve.twisted ? (p = r.redMul(u).redMul(s.redSub(this.curve._mulA(i))), w = a.redMul(u)) : (p = r.redMul(u).redMul(s.redSub(i)), w = this.curve._mulC(a).redMul(u)), this.curve.point(d, p, w);
};
Hr.prototype.add = function(e) {
  return this.isInfinity() ? e : e.isInfinity() ? this : this.curve.extended ? this._extAdd(e) : this._projAdd(e);
};
Hr.prototype.mul = function(e) {
  return this._hasDoubles(e) ? this.curve._fixedNafMul(this, e) : this.curve._wnafMul(this, e);
};
Hr.prototype.mulAdd = function(e, r, n) {
  return this.curve._wnafMulAdd(1, [this, r], [e, n], 2, !1);
};
Hr.prototype.jmulAdd = function(e, r, n) {
  return this.curve._wnafMulAdd(1, [this, r], [e, n], 2, !0);
};
Hr.prototype.normalize = function() {
  if (this.zOne)
    return this;
  var e = this.z.redInvm();
  return this.x = this.x.redMul(e), this.y = this.y.redMul(e), this.t && (this.t = this.t.redMul(e)), this.z = this.curve.one, this.zOne = !0, this;
};
Hr.prototype.neg = function() {
  return this.curve.point(
    this.x.redNeg(),
    this.y,
    this.z,
    this.t && this.t.redNeg()
  );
};
Hr.prototype.getX = function() {
  return this.normalize(), this.x.fromRed();
};
Hr.prototype.getY = function() {
  return this.normalize(), this.y.fromRed();
};
Hr.prototype.eq = function(e) {
  return this === e || this.getX().cmp(e.getX()) === 0 && this.getY().cmp(e.getY()) === 0;
};
Hr.prototype.eqXToP = function(e) {
  var r = e.toRed(this.curve.red).redMul(this.z);
  if (this.x.cmp(r) === 0)
    return !0;
  for (var n = e.clone(), i = this.curve.redN.redMul(this.z); ; ) {
    if (n.iadd(this.curve.n), n.cmp(this.curve.p) >= 0)
      return !1;
    if (r.redIAdd(i), this.x.cmp(r) === 0)
      return !0;
  }
};
Hr.prototype.toP = Hr.prototype.normalize;
Hr.prototype.mixedAdd = Hr.prototype.add;
(function(t) {
  var e = t;
  e.base = G0, e.short = aq, e.mont = uq, e.edwards = hq;
})(eb);
var X0 = {}, cm, Tx;
function dq() {
  return Tx || (Tx = 1, cm = {
    doubles: {
      step: 4,
      points: [
        [
          "e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a",
          "f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"
        ],
        [
          "8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508",
          "11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"
        ],
        [
          "175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739",
          "d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"
        ],
        [
          "363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640",
          "4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"
        ],
        [
          "8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c",
          "4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"
        ],
        [
          "723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda",
          "96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"
        ],
        [
          "eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa",
          "5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"
        ],
        [
          "100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0",
          "cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"
        ],
        [
          "e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d",
          "9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"
        ],
        [
          "feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d",
          "e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"
        ],
        [
          "da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1",
          "9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"
        ],
        [
          "53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0",
          "5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"
        ],
        [
          "8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047",
          "10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"
        ],
        [
          "385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862",
          "283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"
        ],
        [
          "6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7",
          "7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"
        ],
        [
          "3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd",
          "56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"
        ],
        [
          "85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83",
          "7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"
        ],
        [
          "948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a",
          "53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"
        ],
        [
          "6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8",
          "bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"
        ],
        [
          "e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d",
          "4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"
        ],
        [
          "e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725",
          "7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"
        ],
        [
          "213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754",
          "4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"
        ],
        [
          "4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c",
          "17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"
        ],
        [
          "fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6",
          "6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"
        ],
        [
          "76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39",
          "c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"
        ],
        [
          "c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891",
          "893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"
        ],
        [
          "d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b",
          "febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"
        ],
        [
          "b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03",
          "2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"
        ],
        [
          "e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d",
          "eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"
        ],
        [
          "a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070",
          "7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"
        ],
        [
          "90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4",
          "e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"
        ],
        [
          "8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da",
          "662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"
        ],
        [
          "e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11",
          "1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"
        ],
        [
          "8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e",
          "efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"
        ],
        [
          "e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41",
          "2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"
        ],
        [
          "b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef",
          "67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"
        ],
        [
          "d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8",
          "db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"
        ],
        [
          "324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d",
          "648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"
        ],
        [
          "4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96",
          "35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"
        ],
        [
          "9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd",
          "ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"
        ],
        [
          "6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5",
          "9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"
        ],
        [
          "a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266",
          "40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"
        ],
        [
          "7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71",
          "34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"
        ],
        [
          "928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac",
          "c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"
        ],
        [
          "85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751",
          "1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"
        ],
        [
          "ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e",
          "493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"
        ],
        [
          "827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241",
          "c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"
        ],
        [
          "eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3",
          "be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"
        ],
        [
          "e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f",
          "4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"
        ],
        [
          "1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19",
          "aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"
        ],
        [
          "146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be",
          "b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"
        ],
        [
          "fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9",
          "6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"
        ],
        [
          "da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2",
          "8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"
        ],
        [
          "a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13",
          "7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"
        ],
        [
          "174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c",
          "ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"
        ],
        [
          "959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba",
          "2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"
        ],
        [
          "d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151",
          "e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"
        ],
        [
          "64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073",
          "d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"
        ],
        [
          "8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458",
          "38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"
        ],
        [
          "13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b",
          "69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"
        ],
        [
          "bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366",
          "d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"
        ],
        [
          "8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa",
          "40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"
        ],
        [
          "8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0",
          "620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"
        ],
        [
          "dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787",
          "7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"
        ],
        [
          "f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e",
          "ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"
        ]
      ]
    },
    naf: {
      wnd: 7,
      points: [
        [
          "f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9",
          "388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"
        ],
        [
          "2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4",
          "d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"
        ],
        [
          "5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc",
          "6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"
        ],
        [
          "acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe",
          "cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"
        ],
        [
          "774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb",
          "d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"
        ],
        [
          "f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8",
          "ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"
        ],
        [
          "d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e",
          "581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"
        ],
        [
          "defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34",
          "4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"
        ],
        [
          "2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c",
          "85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"
        ],
        [
          "352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5",
          "321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"
        ],
        [
          "2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f",
          "2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"
        ],
        [
          "9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714",
          "73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"
        ],
        [
          "daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729",
          "a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"
        ],
        [
          "c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db",
          "2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"
        ],
        [
          "6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4",
          "e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"
        ],
        [
          "1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5",
          "b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"
        ],
        [
          "605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479",
          "2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"
        ],
        [
          "62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d",
          "80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"
        ],
        [
          "80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f",
          "1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"
        ],
        [
          "7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb",
          "d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"
        ],
        [
          "d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9",
          "eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"
        ],
        [
          "49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963",
          "758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"
        ],
        [
          "77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74",
          "958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"
        ],
        [
          "f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530",
          "e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"
        ],
        [
          "463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b",
          "5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"
        ],
        [
          "f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247",
          "cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"
        ],
        [
          "caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1",
          "cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"
        ],
        [
          "2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120",
          "4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"
        ],
        [
          "7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435",
          "91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"
        ],
        [
          "754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18",
          "673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"
        ],
        [
          "e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8",
          "59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"
        ],
        [
          "186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb",
          "3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"
        ],
        [
          "df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f",
          "55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"
        ],
        [
          "5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143",
          "efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"
        ],
        [
          "290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba",
          "e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"
        ],
        [
          "af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45",
          "f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"
        ],
        [
          "766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a",
          "744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"
        ],
        [
          "59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e",
          "c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"
        ],
        [
          "f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8",
          "e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"
        ],
        [
          "7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c",
          "30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"
        ],
        [
          "948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519",
          "e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"
        ],
        [
          "7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab",
          "100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"
        ],
        [
          "3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca",
          "ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"
        ],
        [
          "d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf",
          "8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"
        ],
        [
          "1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610",
          "68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"
        ],
        [
          "733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4",
          "f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"
        ],
        [
          "15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c",
          "d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"
        ],
        [
          "a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940",
          "edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"
        ],
        [
          "e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980",
          "a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"
        ],
        [
          "311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3",
          "66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"
        ],
        [
          "34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf",
          "9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"
        ],
        [
          "f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63",
          "4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"
        ],
        [
          "d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448",
          "fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"
        ],
        [
          "32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf",
          "5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"
        ],
        [
          "7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5",
          "8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"
        ],
        [
          "ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6",
          "8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"
        ],
        [
          "16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5",
          "5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"
        ],
        [
          "eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99",
          "f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"
        ],
        [
          "78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51",
          "f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"
        ],
        [
          "494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5",
          "42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"
        ],
        [
          "a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5",
          "204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"
        ],
        [
          "c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997",
          "4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"
        ],
        [
          "841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881",
          "73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"
        ],
        [
          "5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5",
          "39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"
        ],
        [
          "36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66",
          "d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"
        ],
        [
          "336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726",
          "ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"
        ],
        [
          "8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede",
          "6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"
        ],
        [
          "1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94",
          "60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"
        ],
        [
          "85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31",
          "3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"
        ],
        [
          "29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51",
          "b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"
        ],
        [
          "a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252",
          "ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"
        ],
        [
          "4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5",
          "cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"
        ],
        [
          "d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b",
          "6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"
        ],
        [
          "ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4",
          "322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"
        ],
        [
          "af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f",
          "6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"
        ],
        [
          "e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889",
          "2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"
        ],
        [
          "591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246",
          "b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"
        ],
        [
          "11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984",
          "998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"
        ],
        [
          "3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a",
          "b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"
        ],
        [
          "cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030",
          "bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"
        ],
        [
          "c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197",
          "6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"
        ],
        [
          "c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593",
          "c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"
        ],
        [
          "a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef",
          "21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"
        ],
        [
          "347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38",
          "60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"
        ],
        [
          "da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a",
          "49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"
        ],
        [
          "c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111",
          "5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"
        ],
        [
          "4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502",
          "7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"
        ],
        [
          "3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea",
          "be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"
        ],
        [
          "cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26",
          "8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"
        ],
        [
          "b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986",
          "39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"
        ],
        [
          "d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e",
          "62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"
        ],
        [
          "48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4",
          "25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"
        ],
        [
          "dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda",
          "ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"
        ],
        [
          "6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859",
          "cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"
        ],
        [
          "e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f",
          "f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"
        ],
        [
          "eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c",
          "6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"
        ],
        [
          "13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942",
          "fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"
        ],
        [
          "ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a",
          "1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"
        ],
        [
          "b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80",
          "5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"
        ],
        [
          "ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d",
          "438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"
        ],
        [
          "8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1",
          "cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"
        ],
        [
          "52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63",
          "c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"
        ],
        [
          "e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352",
          "6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"
        ],
        [
          "7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193",
          "ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"
        ],
        [
          "5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00",
          "9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"
        ],
        [
          "32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58",
          "ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"
        ],
        [
          "e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7",
          "d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"
        ],
        [
          "8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8",
          "c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"
        ],
        [
          "4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e",
          "67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"
        ],
        [
          "3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d",
          "cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"
        ],
        [
          "674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b",
          "299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"
        ],
        [
          "d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f",
          "f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"
        ],
        [
          "30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6",
          "462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"
        ],
        [
          "be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297",
          "62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"
        ],
        [
          "93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a",
          "7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"
        ],
        [
          "b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c",
          "ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"
        ],
        [
          "d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52",
          "4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"
        ],
        [
          "d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb",
          "bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"
        ],
        [
          "463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065",
          "bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"
        ],
        [
          "7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917",
          "603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"
        ],
        [
          "74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9",
          "cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"
        ],
        [
          "30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3",
          "553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"
        ],
        [
          "9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57",
          "712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"
        ],
        [
          "176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66",
          "ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"
        ],
        [
          "75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8",
          "9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"
        ],
        [
          "809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721",
          "9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"
        ],
        [
          "1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180",
          "4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"
        ]
      ]
    }
  }), cm;
}
(function(t) {
  var e = t, r = Vl, n = eb, i = Bi, s = i.assert;
  function o(l) {
    l.type === "short" ? this.curve = new n.short(l) : l.type === "edwards" ? this.curve = new n.edwards(l) : this.curve = new n.mont(l), this.g = this.curve.g, this.n = this.curve.n, this.hash = l.hash, s(this.g.validate(), "Invalid curve"), s(this.g.mul(this.n).isInfinity(), "Invalid curve, G*N != O");
  }
  e.PresetCurve = o;
  function a(l, d) {
    Object.defineProperty(e, l, {
      configurable: !0,
      enumerable: !0,
      get: function() {
        var p = new o(d);
        return Object.defineProperty(e, l, {
          configurable: !0,
          enumerable: !0,
          value: p
        }), p;
      }
    });
  }
  a("p192", {
    type: "short",
    prime: "p192",
    p: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
    a: "ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",
    b: "64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",
    n: "ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",
    hash: r.sha256,
    gRed: !1,
    g: [
      "188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012",
      "07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"
    ]
  }), a("p224", {
    type: "short",
    prime: "p224",
    p: "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",
    a: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",
    b: "b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
    n: "ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",
    hash: r.sha256,
    gRed: !1,
    g: [
      "b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21",
      "bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"
    ]
  }), a("p256", {
    type: "short",
    prime: null,
    p: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",
    a: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",
    b: "5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",
    n: "ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
    hash: r.sha256,
    gRed: !1,
    g: [
      "6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296",
      "4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"
    ]
  }), a("p384", {
    type: "short",
    prime: null,
    p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",
    a: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",
    b: "b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
    n: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",
    hash: r.sha384,
    gRed: !1,
    g: [
      "aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7",
      "3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"
    ]
  }), a("p521", {
    type: "short",
    prime: null,
    p: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
    a: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",
    b: "00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",
    n: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",
    hash: r.sha512,
    gRed: !1,
    g: [
      "000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
      "00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"
    ]
  }), a("curve25519", {
    type: "mont",
    prime: "p25519",
    p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
    a: "76d06",
    b: "1",
    n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
    hash: r.sha256,
    gRed: !1,
    g: [
      "9"
    ]
  }), a("ed25519", {
    type: "edwards",
    prime: "p25519",
    p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
    a: "-1",
    c: "1",
    // -121665 * (121666^(-1)) (mod P)
    d: "52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",
    n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
    hash: r.sha256,
    gRed: !1,
    g: [
      "216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a",
      // 4/5
      "6666666666666666666666666666666666666666666666666666666666666658"
    ]
  });
  var u;
  try {
    u = dq();
  } catch {
    u = void 0;
  }
  a("secp256k1", {
    type: "short",
    prime: "k256",
    p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",
    a: "0",
    b: "7",
    n: "ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
    h: "1",
    hash: r.sha256,
    // Precomputed endomorphism
    beta: "7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",
    lambda: "5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",
    basis: [
      {
        a: "3086d221a7d46bcde86c90e49284eb15",
        b: "-e4437ed6010e88286f547fa90abfe4c3"
      },
      {
        a: "114ca50f7a8e2f3f657c1108d9d44cfd8",
        b: "3086d221a7d46bcde86c90e49284eb15"
      }
    ],
    gRed: !1,
    g: [
      "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",
      "483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",
      u
    ]
  });
})(X0);
var pq = Vl, oc = Zv, A8 = wc;
function ya(t) {
  if (!(this instanceof ya))
    return new ya(t);
  this.hash = t.hash, this.predResist = !!t.predResist, this.outLen = this.hash.outSize, this.minEntropy = t.minEntropy || this.hash.hmacStrength, this._reseed = null, this.reseedInterval = null, this.K = null, this.V = null;
  var e = oc.toArray(t.entropy, t.entropyEnc || "hex"), r = oc.toArray(t.nonce, t.nonceEnc || "hex"), n = oc.toArray(t.pers, t.persEnc || "hex");
  A8(
    e.length >= this.minEntropy / 8,
    "Not enough entropy. Minimum is: " + this.minEntropy + " bits"
  ), this._init(e, r, n);
}
var gq = ya;
ya.prototype._init = function(e, r, n) {
  var i = e.concat(r).concat(n);
  this.K = new Array(this.outLen / 8), this.V = new Array(this.outLen / 8);
  for (var s = 0; s < this.V.length; s++)
    this.K[s] = 0, this.V[s] = 1;
  this._update(i), this._reseed = 1, this.reseedInterval = 281474976710656;
};
ya.prototype._hmac = function() {
  return new pq.hmac(this.hash, this.K);
};
ya.prototype._update = function(e) {
  var r = this._hmac().update(this.V).update([0]);
  e && (r = r.update(e)), this.K = r.digest(), this.V = this._hmac().update(this.V).digest(), e && (this.K = this._hmac().update(this.V).update([1]).update(e).digest(), this.V = this._hmac().update(this.V).digest());
};
ya.prototype.reseed = function(e, r, n, i) {
  typeof r != "string" && (i = n, n = r, r = null), e = oc.toArray(e, r), n = oc.toArray(n, i), A8(
    e.length >= this.minEntropy / 8,
    "Not enough entropy. Minimum is: " + this.minEntropy + " bits"
  ), this._update(e.concat(n || [])), this._reseed = 1;
};
ya.prototype.generate = function(e, r, n, i) {
  if (this._reseed > this.reseedInterval)
    throw new Error("Reseed is required");
  typeof r != "string" && (i = n, n = r, r = null), n && (n = oc.toArray(n, i || "hex"), this._update(n));
  for (var s = []; s.length < e; )
    this.V = this._hmac().update(this.V).digest(), s = s.concat(this.V);
  var o = s.slice(0, e);
  return this._update(n), this._reseed++, oc.encode(o, r);
};
var mq = zo, vq = Bi, P1 = vq.assert;
function ei(t, e) {
  this.ec = t, this.priv = null, this.pub = null, e.priv && this._importPrivate(e.priv, e.privEnc), e.pub && this._importPublic(e.pub, e.pubEnc);
}
var bq = ei;
ei.fromPublic = function(e, r, n) {
  return r instanceof ei ? r : new ei(e, {
    pub: r,
    pubEnc: n
  });
};
ei.fromPrivate = function(e, r, n) {
  return r instanceof ei ? r : new ei(e, {
    priv: r,
    privEnc: n
  });
};
ei.prototype.validate = function() {
  var e = this.getPublic();
  return e.isInfinity() ? { result: !1, reason: "Invalid public key" } : e.validate() ? e.mul(this.ec.curve.n).isInfinity() ? { result: !0, reason: null } : { result: !1, reason: "Public key * N != O" } : { result: !1, reason: "Public key is not a point" };
};
ei.prototype.getPublic = function(e, r) {
  return typeof e == "string" && (r = e, e = null), this.pub || (this.pub = this.ec.g.mul(this.priv)), r ? this.pub.encode(r, e) : this.pub;
};
ei.prototype.getPrivate = function(e) {
  return e === "hex" ? this.priv.toString(16, 2) : this.priv;
};
ei.prototype._importPrivate = function(e, r) {
  this.priv = new mq(e, r || 16), this.priv = this.priv.umod(this.ec.curve.n);
};
ei.prototype._importPublic = function(e, r) {
  if (e.x || e.y) {
    this.ec.curve.type === "mont" ? P1(e.x, "Need x coordinate") : (this.ec.curve.type === "short" || this.ec.curve.type === "edwards") && P1(e.x && e.y, "Need both x and y coordinate"), this.pub = this.ec.curve.point(e.x, e.y);
    return;
  }
  this.pub = this.ec.curve.decodePoint(e, r);
};
ei.prototype.derive = function(e) {
  return e.validate() || P1(e.validate(), "public point not validated"), e.mul(this.priv).getX();
};
ei.prototype.sign = function(e, r, n) {
  return this.ec.sign(e, this, r, n);
};
ei.prototype.verify = function(e, r, n) {
  return this.ec.verify(e, r, this, void 0, n);
};
ei.prototype.inspect = function() {
  return "<Key priv: " + (this.priv && this.priv.toString(16, 2)) + " pub: " + (this.pub && this.pub.inspect()) + " >";
};
var a0 = zo, rb = Bi, yq = rb.assert;
function Z0(t, e) {
  if (t instanceof Z0)
    return t;
  this._importDER(t, e) || (yq(t.r && t.s, "Signature without r or s"), this.r = new a0(t.r, 16), this.s = new a0(t.s, 16), t.recoveryParam === void 0 ? this.recoveryParam = null : this.recoveryParam = t.recoveryParam);
}
var wq = Z0;
function xq() {
  this.place = 0;
}
function um(t, e) {
  var r = t[e.place++];
  if (!(r & 128))
    return r;
  var n = r & 15;
  if (n === 0 || n > 4 || t[e.place] === 0)
    return !1;
  for (var i = 0, s = 0, o = e.place; s < n; s++, o++)
    i <<= 8, i |= t[o], i >>>= 0;
  return i <= 127 ? !1 : (e.place = o, i);
}
function Rx(t) {
  for (var e = 0, r = t.length - 1; !t[e] && !(t[e + 1] & 128) && e < r; )
    e++;
  return e === 0 ? t : t.slice(e);
}
Z0.prototype._importDER = function(e, r) {
  e = rb.toArray(e, r);
  var n = new xq();
  if (e[n.place++] !== 48)
    return !1;
  var i = um(e, n);
  if (i === !1 || i + n.place !== e.length || e[n.place++] !== 2)
    return !1;
  var s = um(e, n);
  if (s === !1 || e[n.place] & 128)
    return !1;
  var o = e.slice(n.place, s + n.place);
  if (n.place += s, e[n.place++] !== 2)
    return !1;
  var a = um(e, n);
  if (a === !1 || e.length !== a + n.place || e[n.place] & 128)
    return !1;
  var u = e.slice(n.place, a + n.place);
  if (o[0] === 0)
    if (o[1] & 128)
      o = o.slice(1);
    else
      return !1;
  if (u[0] === 0)
    if (u[1] & 128)
      u = u.slice(1);
    else
      return !1;
  return this.r = new a0(o), this.s = new a0(u), this.recoveryParam = null, !0;
};
function fm(t, e) {
  if (e < 128) {
    t.push(e);
    return;
  }
  var r = 1 + (Math.log(e) / Math.LN2 >>> 3);
  for (t.push(r | 128); --r; )
    t.push(e >>> (r << 3) & 255);
  t.push(e);
}
Z0.prototype.toDER = function(e) {
  var r = this.r.toArray(), n = this.s.toArray();
  for (r[0] & 128 && (r = [0].concat(r)), n[0] & 128 && (n = [0].concat(n)), r = Rx(r), n = Rx(n); !n[0] && !(n[1] & 128); )
    n = n.slice(1);
  var i = [2];
  fm(i, r.length), i = i.concat(r), i.push(2), fm(i, n.length);
  var s = i.concat(n), o = [48];
  return fm(o, s.length), o = o.concat(s), rb.encode(o, e);
};
var Ao = zo, P8 = gq, _q = Bi, lm = X0, Eq = _8, M8 = _q.assert, nb = bq, Q0 = wq;
function es(t) {
  if (!(this instanceof es))
    return new es(t);
  typeof t == "string" && (M8(
    Object.prototype.hasOwnProperty.call(lm, t),
    "Unknown curve " + t
  ), t = lm[t]), t instanceof lm.PresetCurve && (t = { curve: t }), this.curve = t.curve.curve, this.n = this.curve.n, this.nh = this.n.ushrn(1), this.g = this.curve.g, this.g = t.curve.g, this.g.precompute(t.curve.n.bitLength() + 1), this.hash = t.hash || t.curve.hash;
}
var Sq = es;
es.prototype.keyPair = function(e) {
  return new nb(this, e);
};
es.prototype.keyFromPrivate = function(e, r) {
  return nb.fromPrivate(this, e, r);
};
es.prototype.keyFromPublic = function(e, r) {
  return nb.fromPublic(this, e, r);
};
es.prototype.genKeyPair = function(e) {
  e || (e = {});
  for (var r = new P8({
    hash: this.hash,
    pers: e.pers,
    persEnc: e.persEnc || "utf8",
    entropy: e.entropy || Eq(this.hash.hmacStrength),
    entropyEnc: e.entropy && e.entropyEnc || "utf8",
    nonce: this.n.toArray()
  }), n = this.n.byteLength(), i = this.n.sub(new Ao(2)); ; ) {
    var s = new Ao(r.generate(n));
    if (!(s.cmp(i) > 0))
      return s.iaddn(1), this.keyFromPrivate(s);
  }
};
es.prototype._truncateToN = function(e, r, n) {
  var i;
  if (Ao.isBN(e) || typeof e == "number")
    e = new Ao(e, 16), i = e.byteLength();
  else if (typeof e == "object")
    i = e.length, e = new Ao(e, 16);
  else {
    var s = e.toString();
    i = s.length + 1 >>> 1, e = new Ao(s, 16);
  }
  typeof n != "number" && (n = i * 8);
  var o = n - this.n.bitLength();
  return o > 0 && (e = e.ushrn(o)), !r && e.cmp(this.n) >= 0 ? e.sub(this.n) : e;
};
es.prototype.sign = function(e, r, n, i) {
  typeof n == "object" && (i = n, n = null), i || (i = {}), r = this.keyFromPrivate(r, n), e = this._truncateToN(e, !1, i.msgBitLength);
  for (var s = this.n.byteLength(), o = r.getPrivate().toArray("be", s), a = e.toArray("be", s), u = new P8({
    hash: this.hash,
    entropy: o,
    nonce: a,
    pers: i.pers,
    persEnc: i.persEnc || "utf8"
  }), l = this.n.sub(new Ao(1)), d = 0; ; d++) {
    var p = i.k ? i.k(d) : new Ao(u.generate(this.n.byteLength()));
    if (p = this._truncateToN(p, !0), !(p.cmpn(1) <= 0 || p.cmp(l) >= 0)) {
      var w = this.g.mul(p);
      if (!w.isInfinity()) {
        var A = w.getX(), M = A.umod(this.n);
        if (M.cmpn(0) !== 0) {
          var N = p.invm(this.n).mul(M.mul(r.getPrivate()).iadd(e));
          if (N = N.umod(this.n), N.cmpn(0) !== 0) {
            var L = (w.getY().isOdd() ? 1 : 0) | (A.cmp(M) !== 0 ? 2 : 0);
            return i.canonical && N.cmp(this.nh) > 0 && (N = this.n.sub(N), L ^= 1), new Q0({ r: M, s: N, recoveryParam: L });
          }
        }
      }
    }
  }
};
es.prototype.verify = function(e, r, n, i, s) {
  s || (s = {}), e = this._truncateToN(e, !1, s.msgBitLength), n = this.keyFromPublic(n, i), r = new Q0(r, "hex");
  var o = r.r, a = r.s;
  if (o.cmpn(1) < 0 || o.cmp(this.n) >= 0 || a.cmpn(1) < 0 || a.cmp(this.n) >= 0)
    return !1;
  var u = a.invm(this.n), l = u.mul(e).umod(this.n), d = u.mul(o).umod(this.n), p;
  return this.curve._maxwellTrick ? (p = this.g.jmulAdd(l, n.getPublic(), d), p.isInfinity() ? !1 : p.eqXToP(o)) : (p = this.g.mulAdd(l, n.getPublic(), d), p.isInfinity() ? !1 : p.getX().umod(this.n).cmp(o) === 0);
};
es.prototype.recoverPubKey = function(t, e, r, n) {
  M8((3 & r) === r, "The recovery param is more than two bits"), e = new Q0(e, n);
  var i = this.n, s = new Ao(t), o = e.r, a = e.s, u = r & 1, l = r >> 1;
  if (o.cmp(this.curve.p.umod(this.curve.n)) >= 0 && l)
    throw new Error("Unable to find sencond key candinate");
  l ? o = this.curve.pointFromX(o.add(this.curve.n), u) : o = this.curve.pointFromX(o, u);
  var d = e.r.invm(i), p = i.sub(s).mul(d).umod(i), w = a.mul(d).umod(i);
  return this.g.mulAdd(p, o, w);
};
es.prototype.getKeyRecoveryParam = function(t, e, r, n) {
  if (e = new Q0(e, n), e.recoveryParam !== null)
    return e.recoveryParam;
  for (var i = 0; i < 4; i++) {
    var s;
    try {
      s = this.recoverPubKey(t, e, i);
    } catch {
      continue;
    }
    if (s.eq(r))
      return i;
  }
  throw new Error("Unable to find valid recovery factor");
};
var Xl = Bi, I8 = Xl.assert, Dx = Xl.parseBytes, Uu = Xl.cachedProperty;
function Nn(t, e) {
  this.eddsa = t, this._secret = Dx(e.secret), t.isPoint(e.pub) ? this._pub = e.pub : this._pubBytes = Dx(e.pub);
}
Nn.fromPublic = function(e, r) {
  return r instanceof Nn ? r : new Nn(e, { pub: r });
};
Nn.fromSecret = function(e, r) {
  return r instanceof Nn ? r : new Nn(e, { secret: r });
};
Nn.prototype.secret = function() {
  return this._secret;
};
Uu(Nn, "pubBytes", function() {
  return this.eddsa.encodePoint(this.pub());
});
Uu(Nn, "pub", function() {
  return this._pubBytes ? this.eddsa.decodePoint(this._pubBytes) : this.eddsa.g.mul(this.priv());
});
Uu(Nn, "privBytes", function() {
  var e = this.eddsa, r = this.hash(), n = e.encodingLength - 1, i = r.slice(0, e.encodingLength);
  return i[0] &= 248, i[n] &= 127, i[n] |= 64, i;
});
Uu(Nn, "priv", function() {
  return this.eddsa.decodeInt(this.privBytes());
});
Uu(Nn, "hash", function() {
  return this.eddsa.hash().update(this.secret()).digest();
});
Uu(Nn, "messagePrefix", function() {
  return this.hash().slice(this.eddsa.encodingLength);
});
Nn.prototype.sign = function(e) {
  return I8(this._secret, "KeyPair can only verify"), this.eddsa.sign(e, this);
};
Nn.prototype.verify = function(e, r) {
  return this.eddsa.verify(e, r, this);
};
Nn.prototype.getSecret = function(e) {
  return I8(this._secret, "KeyPair is public only"), Xl.encode(this.secret(), e);
};
Nn.prototype.getPublic = function(e) {
  return Xl.encode(this.pubBytes(), e);
};
var Aq = Nn, Pq = zo, ep = Bi, Ox = ep.assert, tp = ep.cachedProperty, Mq = ep.parseBytes;
function _c(t, e) {
  this.eddsa = t, typeof e != "object" && (e = Mq(e)), Array.isArray(e) && (Ox(e.length === t.encodingLength * 2, "Signature has invalid size"), e = {
    R: e.slice(0, t.encodingLength),
    S: e.slice(t.encodingLength)
  }), Ox(e.R && e.S, "Signature without R or S"), t.isPoint(e.R) && (this._R = e.R), e.S instanceof Pq && (this._S = e.S), this._Rencoded = Array.isArray(e.R) ? e.R : e.Rencoded, this._Sencoded = Array.isArray(e.S) ? e.S : e.Sencoded;
}
tp(_c, "S", function() {
  return this.eddsa.decodeInt(this.Sencoded());
});
tp(_c, "R", function() {
  return this.eddsa.decodePoint(this.Rencoded());
});
tp(_c, "Rencoded", function() {
  return this.eddsa.encodePoint(this.R());
});
tp(_c, "Sencoded", function() {
  return this.eddsa.encodeInt(this.S());
});
_c.prototype.toBytes = function() {
  return this.Rencoded().concat(this.Sencoded());
};
_c.prototype.toHex = function() {
  return ep.encode(this.toBytes(), "hex").toUpperCase();
};
var Iq = _c, Cq = Vl, Tq = X0, Au = Bi, Rq = Au.assert, C8 = Au.parseBytes, T8 = Aq, Nx = Iq;
function Ei(t) {
  if (Rq(t === "ed25519", "only tested with ed25519 so far"), !(this instanceof Ei))
    return new Ei(t);
  t = Tq[t].curve, this.curve = t, this.g = t.g, this.g.precompute(t.n.bitLength() + 1), this.pointClass = t.point().constructor, this.encodingLength = Math.ceil(t.n.bitLength() / 8), this.hash = Cq.sha512;
}
var Dq = Ei;
Ei.prototype.sign = function(e, r) {
  e = C8(e);
  var n = this.keyFromSecret(r), i = this.hashInt(n.messagePrefix(), e), s = this.g.mul(i), o = this.encodePoint(s), a = this.hashInt(o, n.pubBytes(), e).mul(n.priv()), u = i.add(a).umod(this.curve.n);
  return this.makeSignature({ R: s, S: u, Rencoded: o });
};
Ei.prototype.verify = function(e, r, n) {
  if (e = C8(e), r = this.makeSignature(r), r.S().gte(r.eddsa.curve.n) || r.S().isNeg())
    return !1;
  var i = this.keyFromPublic(n), s = this.hashInt(r.Rencoded(), i.pubBytes(), e), o = this.g.mul(r.S()), a = r.R().add(i.pub().mul(s));
  return a.eq(o);
};
Ei.prototype.hashInt = function() {
  for (var e = this.hash(), r = 0; r < arguments.length; r++)
    e.update(arguments[r]);
  return Au.intFromLE(e.digest()).umod(this.curve.n);
};
Ei.prototype.keyFromPublic = function(e) {
  return T8.fromPublic(this, e);
};
Ei.prototype.keyFromSecret = function(e) {
  return T8.fromSecret(this, e);
};
Ei.prototype.makeSignature = function(e) {
  return e instanceof Nx ? e : new Nx(this, e);
};
Ei.prototype.encodePoint = function(e) {
  var r = e.getY().toArray("le", this.encodingLength);
  return r[this.encodingLength - 1] |= e.getX().isOdd() ? 128 : 0, r;
};
Ei.prototype.decodePoint = function(e) {
  e = Au.parseBytes(e);
  var r = e.length - 1, n = e.slice(0, r).concat(e[r] & -129), i = (e[r] & 128) !== 0, s = Au.intFromLE(n);
  return this.curve.pointFromY(s, i);
};
Ei.prototype.encodeInt = function(e) {
  return e.toArray("le", this.encodingLength);
};
Ei.prototype.decodeInt = function(e) {
  return Au.intFromLE(e);
};
Ei.prototype.isPoint = function(e) {
  return e instanceof this.pointClass;
};
(function(t) {
  var e = t;
  e.version = nq.version, e.utils = Bi, e.rand = _8, e.curve = eb, e.curves = X0, e.ec = Sq, e.eddsa = Dq;
})(x8);
const Oq = { waku: { publish: "waku_publish", batchPublish: "waku_batchPublish", subscribe: "waku_subscribe", batchSubscribe: "waku_batchSubscribe", subscription: "waku_subscription", unsubscribe: "waku_unsubscribe", batchUnsubscribe: "waku_batchUnsubscribe", batchFetchMessages: "waku_batchFetchMessages" }, irn: { publish: "irn_publish", batchPublish: "irn_batchPublish", subscribe: "irn_subscribe", batchSubscribe: "irn_batchSubscribe", subscription: "irn_subscription", unsubscribe: "irn_unsubscribe", batchUnsubscribe: "irn_batchUnsubscribe", batchFetchMessages: "irn_batchFetchMessages" }, iridium: { publish: "iridium_publish", batchPublish: "iridium_batchPublish", subscribe: "iridium_subscribe", batchSubscribe: "iridium_batchSubscribe", subscription: "iridium_subscription", unsubscribe: "iridium_unsubscribe", batchUnsubscribe: "iridium_batchUnsubscribe", batchFetchMessages: "iridium_batchFetchMessages" } }, Nq = ":";
function hu(t) {
  const [e, r] = t.split(Nq);
  return { namespace: e, reference: r };
}
function R8(t, e) {
  return t.includes(":") ? [t] : e.chains || [];
}
var Lq = Object.defineProperty, Lx = Object.getOwnPropertySymbols, kq = Object.prototype.hasOwnProperty, $q = Object.prototype.propertyIsEnumerable, kx = (t, e, r) => e in t ? Lq(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, $x = (t, e) => {
  for (var r in e || (e = {})) kq.call(e, r) && kx(t, r, e[r]);
  if (Lx) for (var r of Lx(e)) $q.call(e, r) && kx(t, r, e[r]);
  return t;
};
const Bq = "ReactNative", Di = { reactNative: "react-native", node: "node", browser: "browser", unknown: "unknown" }, Fq = "js";
function c0() {
  return typeof process < "u" && typeof process.versions < "u" && typeof process.versions.node < "u";
}
function qu() {
  return !Kl() && !!Fv() && navigator.product === Bq;
}
function Zl() {
  return !c0() && !!Fv() && !!Kl();
}
function Ql() {
  return qu() ? Di.reactNative : c0() ? Di.node : Zl() ? Di.browser : Di.unknown;
}
function jq() {
  var t;
  try {
    return qu() && typeof global < "u" && typeof (global == null ? void 0 : global.Application) < "u" ? (t = global.Application) == null ? void 0 : t.applicationId : void 0;
  } catch {
    return;
  }
}
function Uq(t, e) {
  let r = xl.parse(t);
  return r = $x($x({}, r), e), t = xl.stringify(r), t;
}
function D8() {
  return q4() || { name: "", description: "", url: "", icons: [""] };
}
function qq() {
  if (Ql() === Di.reactNative && typeof global < "u" && typeof (global == null ? void 0 : global.Platform) < "u") {
    const { OS: r, Version: n } = global.Platform;
    return [r, n].join("-");
  }
  const t = eF();
  if (t === null) return "unknown";
  const e = t.os ? t.os.replace(" ", "").toLowerCase() : "unknown";
  return t.type === "browser" ? [e, t.name, t.version].join("-") : [e, t.version].join("-");
}
function zq() {
  var t;
  const e = Ql();
  return e === Di.browser ? [e, ((t = U4()) == null ? void 0 : t.host) || "unknown"].join(":") : e;
}
function O8(t, e, r) {
  const n = qq(), i = zq();
  return [[t, e].join("-"), [Fq, r].join("-"), n, i].join("/");
}
function Wq({ protocol: t, version: e, relayUrl: r, sdkVersion: n, auth: i, projectId: s, useOnCloseEvent: o, bundleId: a }) {
  const u = r.split("?"), l = O8(t, e, n), d = { auth: i, ua: l, projectId: s, useOnCloseEvent: o, origin: a || void 0 }, p = Uq(u[1] || "", d);
  return u[0] + "?" + p;
}
function rc(t, e) {
  return t.filter((r) => e.includes(r)).length === t.length;
}
function N8(t) {
  return Object.fromEntries(t.entries());
}
function L8(t) {
  return new Map(Object.entries(t));
}
function Ga(t = mt.FIVE_MINUTES, e) {
  const r = mt.toMiliseconds(t || mt.FIVE_MINUTES);
  let n, i, s;
  return { resolve: (o) => {
    s && n && (clearTimeout(s), n(o));
  }, reject: (o) => {
    s && i && (clearTimeout(s), i(o));
  }, done: () => new Promise((o, a) => {
    s = setTimeout(() => {
      a(new Error(e));
    }, r), n = o, i = a;
  }) };
}
function du(t, e, r) {
  return new Promise(async (n, i) => {
    const s = setTimeout(() => i(new Error(r)), e);
    try {
      const o = await t;
      n(o);
    } catch (o) {
      i(o);
    }
    clearTimeout(s);
  });
}
function k8(t, e) {
  if (typeof e == "string" && e.startsWith(`${t}:`)) return e;
  if (t.toLowerCase() === "topic") {
    if (typeof e != "string") throw new Error('Value must be "string" for expirer target type: topic');
    return `topic:${e}`;
  } else if (t.toLowerCase() === "id") {
    if (typeof e != "number") throw new Error('Value must be "number" for expirer target type: id');
    return `id:${e}`;
  }
  throw new Error(`Unknown expirer target type: ${t}`);
}
function Hq(t) {
  return k8("topic", t);
}
function Kq(t) {
  return k8("id", t);
}
function $8(t) {
  const [e, r] = t.split(":"), n = { id: void 0, topic: void 0 };
  if (e === "topic" && typeof r == "string") n.topic = r;
  else if (e === "id" && Number.isInteger(Number(r))) n.id = Number(r);
  else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);
  return n;
}
function En(t, e) {
  return mt.fromMiliseconds(Date.now() + mt.toMiliseconds(t));
}
function ca(t) {
  return Date.now() >= mt.toMiliseconds(t);
}
function br(t, e) {
  return `${t}${e ? `:${e}` : ""}`;
}
function Id(t = [], e = []) {
  return [.../* @__PURE__ */ new Set([...t, ...e])];
}
async function Vq({ id: t, topic: e, wcDeepLink: r }) {
  var n;
  try {
    if (!r) return;
    const i = typeof r == "string" ? JSON.parse(r) : r, s = i == null ? void 0 : i.href;
    if (typeof s != "string") return;
    const o = Gq(s, t, e), a = Ql();
    if (a === Di.browser) {
      if (!((n = Kl()) != null && n.hasFocus())) {
        console.warn("Document does not have focus, skipping deeplink.");
        return;
      }
      o.startsWith("https://") || o.startsWith("http://") ? window.open(o, "_blank", "noreferrer noopener") : window.open(o, Jq() ? "_blank" : "_self", "noreferrer noopener");
    } else a === Di.reactNative && typeof (global == null ? void 0 : global.Linking) < "u" && await global.Linking.openURL(o);
  } catch (i) {
    console.error(i);
  }
}
function Gq(t, e, r) {
  const n = `requestId=${e}&sessionTopic=${r}`;
  t.endsWith("/") && (t = t.slice(0, -1));
  let i = `${t}`;
  if (t.startsWith("https://t.me")) {
    const s = t.includes("?") ? "&startapp=" : "?startapp=";
    i = `${i}${s}${Xq(n, !0)}`;
  } else i = `${i}/wc?${n}`;
  return i;
}
async function Yq(t, e) {
  let r = "";
  try {
    if (Zl() && (r = localStorage.getItem(e), r)) return r;
    r = await t.getItem(e);
  } catch (n) {
    console.error(n);
  }
  return r;
}
function Bx(t, e) {
  if (!t.includes(e)) return null;
  const r = t.split(/([&,?,=])/), n = r.indexOf(e);
  return r[n + 2];
}
function Fx() {
  return typeof crypto < "u" && crypto != null && crypto.randomUUID ? crypto.randomUUID() : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu, (t) => {
    const e = Math.random() * 16 | 0;
    return (t === "x" ? e : e & 3 | 8).toString(16);
  });
}
function ib() {
  return typeof process < "u" && process.env.IS_VITEST === "true";
}
function Jq() {
  return typeof window < "u" && (!!window.TelegramWebviewProxy || !!window.Telegram || !!window.TelegramWebviewProxyProto);
}
function Xq(t, e = !1) {
  const r = Buffer.from(t).toString("base64");
  return e ? r.replace(/[=]/g, "") : r;
}
function B8(t) {
  return Buffer.from(t, "base64").toString("utf-8");
}
const Zq = "https://rpc.walletconnect.org/v1";
async function Qq(t, e, r, n, i, s) {
  switch (r.t) {
    case "eip191":
      return ez(t, e, r.s);
    case "eip1271":
      return await tz(t, e, r.s, n, i, s);
    default:
      throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`);
  }
}
function ez(t, e, r) {
  return CU(V4(e), r).toLowerCase() === t.toLowerCase();
}
async function tz(t, e, r, n, i, s) {
  const o = hu(n);
  if (!o.namespace || !o.reference) throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);
  try {
    const a = "0x1626ba7e", u = "0000000000000000000000000000000000000000000000000000000000000040", l = "0000000000000000000000000000000000000000000000000000000000000041", d = r.substring(2), p = V4(e).substring(2), w = a + p + u + l + d, A = await fetch(`${s || Zq}/?chainId=${n}&projectId=${i}`, { method: "POST", body: JSON.stringify({ id: rz(), jsonrpc: "2.0", method: "eth_call", params: [{ to: t, data: w }, "latest"] }) }), { result: M } = await A.json();
    return M ? M.slice(0, a.length).toLowerCase() === a.toLowerCase() : !1;
  } catch (a) {
    return console.error("isValidEip1271Signature: ", a), !1;
  }
}
function rz() {
  return Date.now() + Math.floor(Math.random() * 1e3);
}
var nz = Object.defineProperty, iz = Object.defineProperties, sz = Object.getOwnPropertyDescriptors, jx = Object.getOwnPropertySymbols, oz = Object.prototype.hasOwnProperty, az = Object.prototype.propertyIsEnumerable, Ux = (t, e, r) => e in t ? nz(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, cz = (t, e) => {
  for (var r in e || (e = {})) oz.call(e, r) && Ux(t, r, e[r]);
  if (jx) for (var r of jx(e)) az.call(e, r) && Ux(t, r, e[r]);
  return t;
}, uz = (t, e) => iz(t, sz(e));
const fz = "did:pkh:", sb = (t) => t == null ? void 0 : t.split(":"), lz = (t) => {
  const e = t && sb(t);
  if (e) return t.includes(fz) ? e[3] : e[1];
}, M1 = (t) => {
  const e = t && sb(t);
  if (e) return e[2] + ":" + e[3];
}, u0 = (t) => {
  const e = t && sb(t);
  if (e) return e.pop();
};
async function qx(t) {
  const { cacao: e, projectId: r } = t, { s: n, p: i } = e, s = F8(i, i.iss), o = u0(i.iss);
  return await Qq(o, s, n, M1(i.iss), r);
}
const F8 = (t, e) => {
  const r = `${t.domain} wants you to sign in with your Ethereum account:`, n = u0(e);
  if (!t.aud && !t.uri) throw new Error("Either `aud` or `uri` is required to construct the message");
  let i = t.statement || void 0;
  const s = `URI: ${t.aud || t.uri}`, o = `Version: ${t.version}`, a = `Chain ID: ${lz(e)}`, u = `Nonce: ${t.nonce}`, l = `Issued At: ${t.iat}`, d = t.exp ? `Expiration Time: ${t.exp}` : void 0, p = t.nbf ? `Not Before: ${t.nbf}` : void 0, w = t.requestId ? `Request ID: ${t.requestId}` : void 0, A = t.resources ? `Resources:${t.resources.map((N) => `
- ${N}`).join("")}` : void 0, M = Cd(t.resources);
  if (M) {
    const N = _l(M);
    i = wz(i, N);
  }
  return [r, n, "", i, "", s, o, a, u, l, d, p, w, A].filter((N) => N != null).join(`
`);
};
function hz(t) {
  return Buffer.from(JSON.stringify(t)).toString("base64");
}
function dz(t) {
  return JSON.parse(Buffer.from(t, "base64").toString("utf-8"));
}
function hc(t) {
  if (!t) throw new Error("No recap provided, value is undefined");
  if (!t.att) throw new Error("No `att` property found");
  const e = Object.keys(t.att);
  if (!(e != null && e.length)) throw new Error("No resources found in `att` property");
  e.forEach((r) => {
    const n = t.att[r];
    if (Array.isArray(n)) throw new Error(`Resource must be an object: ${r}`);
    if (typeof n != "object") throw new Error(`Resource must be an object: ${r}`);
    if (!Object.keys(n).length) throw new Error(`Resource object is empty: ${r}`);
    Object.keys(n).forEach((i) => {
      const s = n[i];
      if (!Array.isArray(s)) throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);
      if (!s.length) throw new Error(`Value of ${i} is empty array, must be an array with objects`);
      s.forEach((o) => {
        if (typeof o != "object") throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`);
      });
    });
  });
}
function pz(t, e, r, n = {}) {
  return r == null || r.sort((i, s) => i.localeCompare(s)), { att: { [t]: gz(e, r, n) } };
}
function gz(t, e, r = {}) {
  e = e == null ? void 0 : e.sort((i, s) => i.localeCompare(s));
  const n = e.map((i) => ({ [`${t}/${i}`]: [r] }));
  return Object.assign({}, ...n);
}
function j8(t) {
  return hc(t), `urn:recap:${hz(t).replace(/=/g, "")}`;
}
function _l(t) {
  const e = dz(t.replace("urn:recap:", ""));
  return hc(e), e;
}
function mz(t, e, r) {
  const n = pz(t, e, r);
  return j8(n);
}
function vz(t) {
  return t && t.includes("urn:recap:");
}
function bz(t, e) {
  const r = _l(t), n = _l(e), i = yz(r, n);
  return j8(i);
}
function yz(t, e) {
  hc(t), hc(e);
  const r = Object.keys(t.att).concat(Object.keys(e.att)).sort((i, s) => i.localeCompare(s)), n = { att: {} };
  return r.forEach((i) => {
    var s, o;
    Object.keys(((s = t.att) == null ? void 0 : s[i]) || {}).concat(Object.keys(((o = e.att) == null ? void 0 : o[i]) || {})).sort((a, u) => a.localeCompare(u)).forEach((a) => {
      var u, l;
      n.att[i] = uz(cz({}, n.att[i]), { [a]: ((u = t.att[i]) == null ? void 0 : u[a]) || ((l = e.att[i]) == null ? void 0 : l[a]) });
    });
  }), n;
}
function wz(t = "", e) {
  hc(e);
  const r = "I further authorize the stated URI to perform the following actions on my behalf: ";
  if (t.includes(r)) return t;
  const n = [];
  let i = 0;
  Object.keys(e.att).forEach((a) => {
    const u = Object.keys(e.att[a]).map((p) => ({ ability: p.split("/")[0], action: p.split("/")[1] }));
    u.sort((p, w) => p.action.localeCompare(w.action));
    const l = {};
    u.forEach((p) => {
      l[p.ability] || (l[p.ability] = []), l[p.ability].push(p.action);
    });
    const d = Object.keys(l).map((p) => (i++, `(${i}) '${p}': '${l[p].join("', '")}' for '${a}'.`));
    n.push(d.join(", ").replace(".,", "."));
  });
  const s = n.join(" "), o = `${r}${s}`;
  return `${t ? t + " " : ""}${o}`;
}
function zx(t) {
  var e;
  const r = _l(t);
  hc(r);
  const n = (e = r.att) == null ? void 0 : e.eip155;
  return n ? Object.keys(n).map((i) => i.split("/")[1]) : [];
}
function Wx(t) {
  const e = _l(t);
  hc(e);
  const r = [];
  return Object.values(e.att).forEach((n) => {
    Object.values(n).forEach((i) => {
      var s;
      (s = i == null ? void 0 : i[0]) != null && s.chains && r.push(i[0].chains);
    });
  }), [...new Set(r.flat())];
}
function Cd(t) {
  if (!t) return;
  const e = t == null ? void 0 : t[t.length - 1];
  return vz(e) ? e : void 0;
}
const U8 = "base10", ai = "base16", ha = "base64pad", Af = "base64url", eh = "utf8", q8 = 0, Co = 1, th = 2, xz = 0, Hx = 1, qf = 12, ob = 32;
function _z() {
  const t = Jv.generateKeyPair();
  return { privateKey: On(t.secretKey, ai), publicKey: On(t.publicKey, ai) };
}
function I1() {
  const t = Pa.randomBytes(ob);
  return On(t, ai);
}
function Ez(t, e) {
  const r = Jv.sharedKey(Rn(t, ai), Rn(e, ai), !0), n = new qU(Yl.SHA256, r).expand(ob);
  return On(n, ai);
}
function Td(t) {
  const e = Yl.hash(Rn(t, ai));
  return On(e, ai);
}
function xo(t) {
  const e = Yl.hash(Rn(t, eh));
  return On(e, ai);
}
function z8(t) {
  return Rn(`${t}`, U8);
}
function dc(t) {
  return Number(On(t, U8));
}
function Sz(t) {
  const e = z8(typeof t.type < "u" ? t.type : q8);
  if (dc(e) === Co && typeof t.senderPublicKey > "u") throw new Error("Missing sender public key for type 1 envelope");
  const r = typeof t.senderPublicKey < "u" ? Rn(t.senderPublicKey, ai) : void 0, n = typeof t.iv < "u" ? Rn(t.iv, ai) : Pa.randomBytes(qf), i = new Gv.ChaCha20Poly1305(Rn(t.symKey, ai)).seal(n, Rn(t.message, eh));
  return W8({ type: e, sealed: i, iv: n, senderPublicKey: r, encoding: t.encoding });
}
function Az(t, e) {
  const r = z8(th), n = Pa.randomBytes(qf), i = Rn(t, eh);
  return W8({ type: r, sealed: i, iv: n, encoding: e });
}
function Pz(t) {
  const e = new Gv.ChaCha20Poly1305(Rn(t.symKey, ai)), { sealed: r, iv: n } = El({ encoded: t.encoded, encoding: t == null ? void 0 : t.encoding }), i = e.open(n, r);
  if (i === null) throw new Error("Failed to decrypt");
  return On(i, eh);
}
function Mz(t, e) {
  const { sealed: r } = El({ encoded: t, encoding: e });
  return On(r, eh);
}
function W8(t) {
  const { encoding: e = ha } = t;
  if (dc(t.type) === th) return On(Sd([t.type, t.sealed]), e);
  if (dc(t.type) === Co) {
    if (typeof t.senderPublicKey > "u") throw new Error("Missing sender public key for type 1 envelope");
    return On(Sd([t.type, t.senderPublicKey, t.iv, t.sealed]), e);
  }
  return On(Sd([t.type, t.iv, t.sealed]), e);
}
function El(t) {
  const { encoded: e, encoding: r = ha } = t, n = Rn(e, r), i = n.slice(xz, Hx), s = Hx;
  if (dc(i) === Co) {
    const l = s + ob, d = l + qf, p = n.slice(s, l), w = n.slice(l, d), A = n.slice(d);
    return { type: i, sealed: A, iv: w, senderPublicKey: p };
  }
  if (dc(i) === th) {
    const l = n.slice(s), d = Pa.randomBytes(qf);
    return { type: i, sealed: l, iv: d };
  }
  const o = s + qf, a = n.slice(s, o), u = n.slice(o);
  return { type: i, sealed: u, iv: a };
}
function Iz(t, e) {
  const r = El({ encoded: t, encoding: e == null ? void 0 : e.encoding });
  return H8({ type: dc(r.type), senderPublicKey: typeof r.senderPublicKey < "u" ? On(r.senderPublicKey, ai) : void 0, receiverPublicKey: e == null ? void 0 : e.receiverPublicKey });
}
function H8(t) {
  const e = (t == null ? void 0 : t.type) || q8;
  if (e === Co) {
    if (typeof (t == null ? void 0 : t.senderPublicKey) > "u") throw new Error("missing sender public key");
    if (typeof (t == null ? void 0 : t.receiverPublicKey) > "u") throw new Error("missing receiver public key");
  }
  return { type: e, senderPublicKey: t == null ? void 0 : t.senderPublicKey, receiverPublicKey: t == null ? void 0 : t.receiverPublicKey };
}
function Kx(t) {
  return t.type === Co && typeof t.senderPublicKey == "string" && typeof t.receiverPublicKey == "string";
}
function Vx(t) {
  return t.type === th;
}
function Cz(t) {
  return new x8.ec("p256").keyFromPublic({ x: Buffer.from(t.x, "base64").toString("hex"), y: Buffer.from(t.y, "base64").toString("hex") }, "hex");
}
function Tz(t) {
  let e = t.replace(/-/g, "+").replace(/_/g, "/");
  const r = e.length % 4;
  return r > 0 && (e += "=".repeat(4 - r)), e;
}
function Rz(t) {
  return Buffer.from(Tz(t), "base64");
}
function Dz(t, e) {
  const [r, n, i] = t.split("."), s = Rz(i);
  if (s.length !== 64) throw new Error("Invalid signature length");
  const o = s.slice(0, 32).toString("hex"), a = s.slice(32, 64).toString("hex"), u = `${r}.${n}`, l = new Yl.SHA256().update(Buffer.from(u)).digest(), d = Cz(e), p = Buffer.from(l).toString("hex");
  if (!d.verify(p, { r: o, s: a })) throw new Error("Invalid signature");
  return v1(t).payload;
}
const Oz = "irn";
function C1(t) {
  return (t == null ? void 0 : t.relay) || { protocol: Oz };
}
function Bf(t) {
  const e = Oq[t];
  if (typeof e > "u") throw new Error(`Relay Protocol not supported: ${t}`);
  return e;
}
var Nz = Object.defineProperty, Lz = Object.defineProperties, kz = Object.getOwnPropertyDescriptors, Gx = Object.getOwnPropertySymbols, $z = Object.prototype.hasOwnProperty, Bz = Object.prototype.propertyIsEnumerable, Yx = (t, e, r) => e in t ? Nz(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, Jx = (t, e) => {
  for (var r in e || (e = {})) $z.call(e, r) && Yx(t, r, e[r]);
  if (Gx) for (var r of Gx(e)) Bz.call(e, r) && Yx(t, r, e[r]);
  return t;
}, Fz = (t, e) => Lz(t, kz(e));
function jz(t, e = "-") {
  const r = {}, n = "relay" + e;
  return Object.keys(t).forEach((i) => {
    if (i.startsWith(n)) {
      const s = i.replace(n, ""), o = t[i];
      r[s] = o;
    }
  }), r;
}
function Xx(t) {
  if (!t.includes("wc:")) {
    const u = B8(t);
    u != null && u.includes("wc:") && (t = u);
  }
  t = t.includes("wc://") ? t.replace("wc://", "") : t, t = t.includes("wc:") ? t.replace("wc:", "") : t;
  const e = t.indexOf(":"), r = t.indexOf("?") !== -1 ? t.indexOf("?") : void 0, n = t.substring(0, e), i = t.substring(e + 1, r).split("@"), s = typeof r < "u" ? t.substring(r) : "", o = xl.parse(s), a = typeof o.methods == "string" ? o.methods.split(",") : void 0;
  return { protocol: n, topic: Uz(i[0]), version: parseInt(i[1], 10), symKey: o.symKey, relay: jz(o), methods: a, expiryTimestamp: o.expiryTimestamp ? parseInt(o.expiryTimestamp, 10) : void 0 };
}
function Uz(t) {
  return t.startsWith("//") ? t.substring(2) : t;
}
function qz(t, e = "-") {
  const r = "relay", n = {};
  return Object.keys(t).forEach((i) => {
    const s = r + e + i;
    t[i] && (n[s] = t[i]);
  }), n;
}
function Zx(t) {
  return `${t.protocol}:${t.topic}@${t.version}?` + xl.stringify(Jx(Fz(Jx({ symKey: t.symKey }, qz(t.relay)), { expiryTimestamp: t.expiryTimestamp }), t.methods ? { methods: t.methods.join(",") } : {}));
}
function fd(t, e, r) {
  return `${t}?wc_ev=${r}&topic=${e}`;
}
function zu(t) {
  const e = [];
  return t.forEach((r) => {
    const [n, i] = r.split(":");
    e.push(`${n}:${i}`);
  }), e;
}
function zz(t) {
  const e = [];
  return Object.values(t).forEach((r) => {
    e.push(...zu(r.accounts));
  }), e;
}
function Wz(t, e) {
  const r = [];
  return Object.values(t).forEach((n) => {
    zu(n.accounts).includes(e) && r.push(...n.methods);
  }), r;
}
function Hz(t, e) {
  const r = [];
  return Object.values(t).forEach((n) => {
    zu(n.accounts).includes(e) && r.push(...n.events);
  }), r;
}
function ab(t) {
  return t.includes(":");
}
function Ff(t) {
  return ab(t) ? t.split(":")[0] : t;
}
function Kz(t) {
  const e = {};
  return t == null || t.forEach((r) => {
    const [n, i] = r.split(":");
    e[n] || (e[n] = { accounts: [], chains: [], events: [] }), e[n].accounts.push(r), e[n].chains.push(`${n}:${i}`);
  }), e;
}
function Qx(t, e) {
  e = e.map((n) => n.replace("did:pkh:", ""));
  const r = Kz(e);
  for (const [n, i] of Object.entries(r)) i.methods ? i.methods = Id(i.methods, t) : i.methods = t, i.events = ["chainChanged", "accountsChanged"];
  return r;
}
const Vz = { INVALID_METHOD: { message: "Invalid method.", code: 1001 }, INVALID_EVENT: { message: "Invalid event.", code: 1002 }, INVALID_UPDATE_REQUEST: { message: "Invalid update request.", code: 1003 }, INVALID_EXTEND_REQUEST: { message: "Invalid extend request.", code: 1004 }, INVALID_SESSION_SETTLE_REQUEST: { message: "Invalid session settle request.", code: 1005 }, UNAUTHORIZED_METHOD: { message: "Unauthorized method.", code: 3001 }, UNAUTHORIZED_EVENT: { message: "Unauthorized event.", code: 3002 }, UNAUTHORIZED_UPDATE_REQUEST: { message: "Unauthorized update request.", code: 3003 }, UNAUTHORIZED_EXTEND_REQUEST: { message: "Unauthorized extend request.", code: 3004 }, USER_REJECTED: { message: "User rejected.", code: 5e3 }, USER_REJECTED_CHAINS: { message: "User rejected chains.", code: 5001 }, USER_REJECTED_METHODS: { message: "User rejected methods.", code: 5002 }, USER_REJECTED_EVENTS: { message: "User rejected events.", code: 5003 }, UNSUPPORTED_CHAINS: { message: "Unsupported chains.", code: 5100 }, UNSUPPORTED_METHODS: { message: "Unsupported methods.", code: 5101 }, UNSUPPORTED_EVENTS: { message: "Unsupported events.", code: 5102 }, UNSUPPORTED_ACCOUNTS: { message: "Unsupported accounts.", code: 5103 }, UNSUPPORTED_NAMESPACE_KEY: { message: "Unsupported namespace key.", code: 5104 }, USER_DISCONNECTED: { message: "User disconnected.", code: 6e3 }, SESSION_SETTLEMENT_FAILED: { message: "Session settlement failed.", code: 7e3 }, WC_METHOD_UNSUPPORTED: { message: "Unsupported wc_ method.", code: 10001 } }, Gz = { NOT_INITIALIZED: { message: "Not initialized.", code: 1 }, NO_MATCHING_KEY: { message: "No matching key.", code: 2 }, RESTORE_WILL_OVERRIDE: { message: "Restore will override.", code: 3 }, RESUBSCRIBED: { message: "Resubscribed.", code: 4 }, MISSING_OR_INVALID: { message: "Missing or invalid.", code: 5 }, EXPIRED: { message: "Expired.", code: 6 }, UNKNOWN_TYPE: { message: "Unknown type.", code: 7 }, MISMATCHED_TOPIC: { message: "Mismatched topic.", code: 8 }, NON_CONFORMING_NAMESPACES: { message: "Non conforming namespaces.", code: 9 } };
function ft(t, e) {
  const { message: r, code: n } = Gz[t];
  return { message: e ? `${r} ${e}` : r, code: n };
}
function Or(t, e) {
  const { message: r, code: n } = Vz[t];
  return { message: e ? `${r} ${e}` : r, code: n };
}
function pc(t, e) {
  return !!Array.isArray(t);
}
function Sl(t) {
  return Object.getPrototypeOf(t) === Object.prototype && Object.keys(t).length;
}
function mi(t) {
  return typeof t > "u";
}
function dn(t, e) {
  return e && mi(t) ? !0 : typeof t == "string" && !!t.trim().length;
}
function cb(t, e) {
  return typeof t == "number" && !isNaN(t);
}
function Yz(t, e) {
  const { requiredNamespaces: r } = e, n = Object.keys(t.namespaces), i = Object.keys(r);
  let s = !0;
  return rc(i, n) ? (n.forEach((o) => {
    const { accounts: a, methods: u, events: l } = t.namespaces[o], d = zu(a), p = r[o];
    (!rc(R8(o, p), d) || !rc(p.methods, u) || !rc(p.events, l)) && (s = !1);
  }), s) : !1;
}
function f0(t) {
  return dn(t, !1) && t.includes(":") ? t.split(":").length === 2 : !1;
}
function Jz(t) {
  if (dn(t, !1) && t.includes(":")) {
    const e = t.split(":");
    if (e.length === 3) {
      const r = e[0] + ":" + e[1];
      return !!e[2] && f0(r);
    }
  }
  return !1;
}
function Xz(t) {
  function e(r) {
    try {
      return typeof new URL(r) < "u";
    } catch {
      return !1;
    }
  }
  try {
    if (dn(t, !1)) {
      if (e(t)) return !0;
      const r = B8(t);
      return e(r);
    }
  } catch {
  }
  return !1;
}
function Zz(t) {
  var e;
  return (e = t == null ? void 0 : t.proposer) == null ? void 0 : e.publicKey;
}
function Qz(t) {
  return t == null ? void 0 : t.topic;
}
function eW(t, e) {
  let r = null;
  return dn(t == null ? void 0 : t.publicKey, !1) || (r = ft("MISSING_OR_INVALID", `${e} controller public key should be a string`)), r;
}
function e3(t) {
  let e = !0;
  return pc(t) ? t.length && (e = t.every((r) => dn(r, !1))) : e = !1, e;
}
function tW(t, e, r) {
  let n = null;
  return pc(e) && e.length ? e.forEach((i) => {
    n || f0(i) || (n = Or("UNSUPPORTED_CHAINS", `${r}, chain ${i} should be a string and conform to "namespace:chainId" format`));
  }) : f0(t) || (n = Or("UNSUPPORTED_CHAINS", `${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)), n;
}
function rW(t, e, r) {
  let n = null;
  return Object.entries(t).forEach(([i, s]) => {
    if (n) return;
    const o = tW(i, R8(i, s), `${e} ${r}`);
    o && (n = o);
  }), n;
}
function nW(t, e) {
  let r = null;
  return pc(t) ? t.forEach((n) => {
    r || Jz(n) || (r = Or("UNSUPPORTED_ACCOUNTS", `${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`));
  }) : r = Or("UNSUPPORTED_ACCOUNTS", `${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`), r;
}
function iW(t, e) {
  let r = null;
  return Object.values(t).forEach((n) => {
    if (r) return;
    const i = nW(n == null ? void 0 : n.accounts, `${e} namespace`);
    i && (r = i);
  }), r;
}
function sW(t, e) {
  let r = null;
  return e3(t == null ? void 0 : t.methods) ? e3(t == null ? void 0 : t.events) || (r = Or("UNSUPPORTED_EVENTS", `${e}, events should be an array of strings or empty array for no events`)) : r = Or("UNSUPPORTED_METHODS", `${e}, methods should be an array of strings or empty array for no methods`), r;
}
function K8(t, e) {
  let r = null;
  return Object.values(t).forEach((n) => {
    if (r) return;
    const i = sW(n, `${e}, namespace`);
    i && (r = i);
  }), r;
}
function oW(t, e, r) {
  let n = null;
  if (t && Sl(t)) {
    const i = K8(t, e);
    i && (n = i);
    const s = rW(t, e, r);
    s && (n = s);
  } else n = ft("MISSING_OR_INVALID", `${e}, ${r} should be an object with data`);
  return n;
}
function hm(t, e) {
  let r = null;
  if (t && Sl(t)) {
    const n = K8(t, e);
    n && (r = n);
    const i = iW(t, e);
    i && (r = i);
  } else r = ft("MISSING_OR_INVALID", `${e}, namespaces should be an object with data`);
  return r;
}
function V8(t) {
  return dn(t.protocol, !0);
}
function aW(t, e) {
  let r = !1;
  return t ? t && pc(t) && t.length && t.forEach((n) => {
    r = V8(n);
  }) : r = !0, r;
}
function cW(t) {
  return typeof t == "number";
}
function gi(t) {
  return typeof t < "u" && typeof t !== null;
}
function uW(t) {
  return !(!t || typeof t != "object" || !t.code || !cb(t.code) || !t.message || !dn(t.message, !1));
}
function fW(t) {
  return !(mi(t) || !dn(t.method, !1));
}
function lW(t) {
  return !(mi(t) || mi(t.result) && mi(t.error) || !cb(t.id) || !dn(t.jsonrpc, !1));
}
function hW(t) {
  return !(mi(t) || !dn(t.name, !1));
}
function t3(t, e) {
  return !(!f0(e) || !zz(t).includes(e));
}
function dW(t, e, r) {
  return dn(r, !1) ? Wz(t, e).includes(r) : !1;
}
function pW(t, e, r) {
  return dn(r, !1) ? Hz(t, e).includes(r) : !1;
}
function r3(t, e, r) {
  let n = null;
  const i = gW(t), s = mW(e), o = Object.keys(i), a = Object.keys(s), u = n3(Object.keys(t)), l = n3(Object.keys(e)), d = u.filter((p) => !l.includes(p));
  return d.length && (n = ft("NON_CONFORMING_NAMESPACES", `${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)), rc(o, a) || (n = ft("NON_CONFORMING_NAMESPACES", `${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)), Object.keys(e).forEach((p) => {
    if (!p.includes(":") || n) return;
    const w = zu(e[p].accounts);
    w.includes(p) || (n = ft("NON_CONFORMING_NAMESPACES", `${r} namespaces accounts don't satisfy namespace accounts for ${p}
        Required: ${p}
        Approved: ${w.toString()}`));
  }), o.forEach((p) => {
    n || (rc(i[p].methods, s[p].methods) ? rc(i[p].events, s[p].events) || (n = ft("NON_CONFORMING_NAMESPACES", `${r} namespaces events don't satisfy namespace events for ${p}`)) : n = ft("NON_CONFORMING_NAMESPACES", `${r} namespaces methods don't satisfy namespace methods for ${p}`));
  }), n;
}
function gW(t) {
  const e = {};
  return Object.keys(t).forEach((r) => {
    var n;
    r.includes(":") ? e[r] = t[r] : (n = t[r].chains) == null || n.forEach((i) => {
      e[i] = { methods: t[r].methods, events: t[r].events };
    });
  }), e;
}
function n3(t) {
  return [...new Set(t.map((e) => e.includes(":") ? e.split(":")[0] : e))];
}
function mW(t) {
  const e = {};
  return Object.keys(t).forEach((r) => {
    if (r.includes(":")) e[r] = t[r];
    else {
      const n = zu(t[r].accounts);
      n == null || n.forEach((i) => {
        e[i] = { accounts: t[r].accounts.filter((s) => s.includes(`${i}:`)), methods: t[r].methods, events: t[r].events };
      });
    }
  }), e;
}
function vW(t, e) {
  return cb(t) && t <= e.max && t >= e.min;
}
function i3() {
  const t = Ql();
  return new Promise((e) => {
    switch (t) {
      case Di.browser:
        e(bW());
        break;
      case Di.reactNative:
        e(yW());
        break;
      case Di.node:
        e(wW());
        break;
      default:
        e(!0);
    }
  });
}
function bW() {
  return Zl() && (navigator == null ? void 0 : navigator.onLine);
}
async function yW() {
  if (qu() && typeof global < "u" && global != null && global.NetInfo) {
    const t = await (global == null ? void 0 : global.NetInfo.fetch());
    return t == null ? void 0 : t.isConnected;
  }
  return !0;
}
function wW() {
  return !0;
}
function xW(t) {
  switch (Ql()) {
    case Di.browser:
      _W(t);
      break;
    case Di.reactNative:
      EW(t);
      break;
  }
}
function _W(t) {
  !qu() && Zl() && (window.addEventListener("online", () => t(!0)), window.addEventListener("offline", () => t(!1)));
}
function EW(t) {
  qu() && typeof global < "u" && global != null && global.NetInfo && (global == null || global.NetInfo.addEventListener((e) => t(e == null ? void 0 : e.isConnected)));
}
const dm = {};
class Pf {
  static get(e) {
    return dm[e];
  }
  static set(e, r) {
    dm[e] = r;
  }
  static delete(e) {
    delete dm[e];
  }
}
const SW = "PARSE_ERROR", AW = "INVALID_REQUEST", PW = "METHOD_NOT_FOUND", MW = "INVALID_PARAMS", G8 = "INTERNAL_ERROR", ub = "SERVER_ERROR", IW = [-32700, -32600, -32601, -32602, -32603], zf = {
  [SW]: { code: -32700, message: "Parse error" },
  [AW]: { code: -32600, message: "Invalid Request" },
  [PW]: { code: -32601, message: "Method not found" },
  [MW]: { code: -32602, message: "Invalid params" },
  [G8]: { code: -32603, message: "Internal error" },
  [ub]: { code: -32e3, message: "Server error" }
}, Y8 = ub;
function CW(t) {
  return IW.includes(t);
}
function s3(t) {
  return Object.keys(zf).includes(t) ? zf[t] : zf[Y8];
}
function TW(t) {
  const e = Object.values(zf).find((r) => r.code === t);
  return e || zf[Y8];
}
function J8(t, e, r) {
  return t.message.includes("getaddrinfo ENOTFOUND") || t.message.includes("connect ECONNREFUSED") ? new Error(`Unavailable ${r} RPC url at ${e}`) : t;
}
var X8 = {}, mo = {}, o3;
function RW() {
  if (o3) return mo;
  o3 = 1, Object.defineProperty(mo, "__esModule", { value: !0 }), mo.isBrowserCryptoAvailable = mo.getSubtleCrypto = mo.getBrowerCrypto = void 0;
  function t() {
    return (gn == null ? void 0 : gn.crypto) || (gn == null ? void 0 : gn.msCrypto) || {};
  }
  mo.getBrowerCrypto = t;
  function e() {
    const n = t();
    return n.subtle || n.webkitSubtle;
  }
  mo.getSubtleCrypto = e;
  function r() {
    return !!t() && !!e();
  }
  return mo.isBrowserCryptoAvailable = r, mo;
}
var vo = {}, a3;
function DW() {
  if (a3) return vo;
  a3 = 1, Object.defineProperty(vo, "__esModule", { value: !0 }), vo.isBrowser = vo.isNode = vo.isReactNative = void 0;
  function t() {
    return typeof document > "u" && typeof navigator < "u" && navigator.product === "ReactNative";
  }
  vo.isReactNative = t;
  function e() {
    return typeof process < "u" && typeof process.versions < "u" && typeof process.versions.node < "u";
  }
  vo.isNode = e;
  function r() {
    return !t() && !e();
  }
  return vo.isBrowser = r, vo;
}
(function(t) {
  Object.defineProperty(t, "__esModule", { value: !0 });
  const e = jl;
  e.__exportStar(RW(), t), e.__exportStar(DW(), t);
})(X8);
function ua(t = 3) {
  const e = Date.now() * Math.pow(10, t), r = Math.floor(Math.random() * Math.pow(10, t));
  return e + r;
}
function nc(t = 6) {
  return BigInt(ua(t));
}
function da(t, e, r) {
  return {
    id: r || ua(),
    jsonrpc: "2.0",
    method: t,
    params: e
  };
}
function rp(t, e) {
  return {
    id: t,
    jsonrpc: "2.0",
    result: e
  };
}
function np(t, e, r) {
  return {
    id: t,
    jsonrpc: "2.0",
    error: OW(e)
  };
}
function OW(t, e) {
  return typeof t > "u" ? s3(G8) : (typeof t == "string" && (t = Object.assign(Object.assign({}, s3(ub)), { message: t })), CW(t.code) && (t = TW(t.code)), t);
}
let NW = class {
}, LW = class extends NW {
  constructor() {
    super();
  }
}, kW = class extends LW {
  constructor(e) {
    super();
  }
};
const $W = "^https?:", BW = "^wss?:";
function FW(t) {
  const e = t.match(new RegExp(/^\w+:/, "gi"));
  if (!(!e || !e.length))
    return e[0];
}
function Z8(t, e) {
  const r = FW(t);
  return typeof r > "u" ? !1 : new RegExp(e).test(r);
}
function c3(t) {
  return Z8(t, $W);
}
function u3(t) {
  return Z8(t, BW);
}
function jW(t) {
  return new RegExp("wss?://localhost(:d{2,5})?").test(t);
}
function Q8(t) {
  return typeof t == "object" && "id" in t && "jsonrpc" in t && t.jsonrpc === "2.0";
}
function fb(t) {
  return Q8(t) && "method" in t;
}
function ip(t) {
  return Q8(t) && (js(t) || Zi(t));
}
function js(t) {
  return "result" in t;
}
function Zi(t) {
  return "error" in t;
}
let as = class extends kW {
  constructor(e) {
    super(e), this.events = new rs.EventEmitter(), this.hasRegisteredEventListeners = !1, this.connection = this.setConnection(e), this.connection.connected && this.registerEventListeners();
  }
  async connect(e = this.connection) {
    await this.open(e);
  }
  async disconnect() {
    await this.close();
  }
  on(e, r) {
    this.events.on(e, r);
  }
  once(e, r) {
    this.events.once(e, r);
  }
  off(e, r) {
    this.events.off(e, r);
  }
  removeListener(e, r) {
    this.events.removeListener(e, r);
  }
  async request(e, r) {
    return this.requestStrict(da(e.method, e.params || [], e.id || nc().toString()), r);
  }
  async requestStrict(e, r) {
    return new Promise(async (n, i) => {
      if (!this.connection.connected) try {
        await this.open();
      } catch (s) {
        i(s);
      }
      this.events.on(`${e.id}`, (s) => {
        Zi(s) ? i(s.error) : n(s.result);
      });
      try {
        await this.connection.send(e, r);
      } catch (s) {
        i(s);
      }
    });
  }
  setConnection(e = this.connection) {
    return e;
  }
  onPayload(e) {
    this.events.emit("payload", e), ip(e) ? this.events.emit(`${e.id}`, e) : this.events.emit("message", { type: e.method, data: e.params });
  }
  onClose(e) {
    e && e.code === 3e3 && this.events.emit("error", new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason ? `(${e.reason})` : ""}`)), this.events.emit("disconnect");
  }
  async open(e = this.connection) {
    this.connection === e && this.connection.connected || (this.connection.connected && this.close(), typeof e == "string" && (await this.connection.open(e), e = this.connection), this.connection = this.setConnection(e), await this.connection.open(), this.registerEventListeners(), this.events.emit("connect"));
  }
  async close() {
    await this.connection.close();
  }
  registerEventListeners() {
    this.hasRegisteredEventListeners || (this.connection.on("payload", (e) => this.onPayload(e)), this.connection.on("close", (e) => this.onClose(e)), this.connection.on("error", (e) => this.events.emit("error", e)), this.connection.on("register_error", (e) => this.onClose()), this.hasRegisteredEventListeners = !0);
  }
};
const UW = () => typeof WebSocket < "u" ? WebSocket : typeof global < "u" && typeof global.WebSocket < "u" ? global.WebSocket : typeof window < "u" && typeof window.WebSocket < "u" ? window.WebSocket : typeof self < "u" && typeof self.WebSocket < "u" ? self.WebSocket : require("ws"), qW = () => typeof WebSocket < "u" || typeof global < "u" && typeof global.WebSocket < "u" || typeof window < "u" && typeof window.WebSocket < "u" || typeof self < "u" && typeof self.WebSocket < "u", f3 = (t) => t.split("?")[0], l3 = 10, zW = UW();
let WW = class {
  constructor(e) {
    if (this.url = e, this.events = new rs.EventEmitter(), this.registering = !1, !u3(e)) throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);
    this.url = e;
  }
  get connected() {
    return typeof this.socket < "u";
  }
  get connecting() {
    return this.registering;
  }
  on(e, r) {
    this.events.on(e, r);
  }
  once(e, r) {
    this.events.once(e, r);
  }
  off(e, r) {
    this.events.off(e, r);
  }
  removeListener(e, r) {
    this.events.removeListener(e, r);
  }
  async open(e = this.url) {
    await this.register(e);
  }
  async close() {
    return new Promise((e, r) => {
      if (typeof this.socket > "u") {
        r(new Error("Connection already closed"));
        return;
      }
      this.socket.onclose = (n) => {
        this.onClose(n), e();
      }, this.socket.close();
    });
  }
  async send(e) {
    typeof this.socket > "u" && (this.socket = await this.register());
    try {
      this.socket.send($o(e));
    } catch (r) {
      this.onError(e.id, r);
    }
  }
  register(e = this.url) {
    if (!u3(e)) throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);
    if (this.registering) {
      const r = this.events.getMaxListeners();
      return (this.events.listenerCount("register_error") >= r || this.events.listenerCount("open") >= r) && this.events.setMaxListeners(r + 1), new Promise((n, i) => {
        this.events.once("register_error", (s) => {
          this.resetMaxListeners(), i(s);
        }), this.events.once("open", () => {
          if (this.resetMaxListeners(), typeof this.socket > "u") return i(new Error("WebSocket connection is missing or invalid"));
          n(this.socket);
        });
      });
    }
    return this.url = e, this.registering = !0, new Promise((r, n) => {
      const i = new URLSearchParams(e).get("origin"), s = X8.isReactNative() ? { headers: { origin: i } } : { rejectUnauthorized: !jW(e) }, o = new zW(e, [], s);
      qW() ? o.onerror = (a) => {
        const u = a;
        n(this.emitError(u.error));
      } : o.on("error", (a) => {
        n(this.emitError(a));
      }), o.onopen = () => {
        this.onOpen(o), r(o);
      };
    });
  }
  onOpen(e) {
    e.onmessage = (r) => this.onPayload(r), e.onclose = (r) => this.onClose(r), this.socket = e, this.registering = !1, this.events.emit("open");
  }
  onClose(e) {
    this.socket = void 0, this.registering = !1, this.events.emit("close", e);
  }
  onPayload(e) {
    if (typeof e.data > "u") return;
    const r = typeof e.data == "string" ? fc(e.data) : e.data;
    this.events.emit("payload", r);
  }
  onError(e, r) {
    const n = this.parseError(r), i = n.message || n.toString(), s = np(e, i);
    this.events.emit("payload", s);
  }
  parseError(e, r = this.url) {
    return J8(e, f3(r), "WS");
  }
  resetMaxListeners() {
    this.events.getMaxListeners() > l3 && this.events.setMaxListeners(l3);
  }
  emitError(e) {
    const r = this.parseError(new Error((e == null ? void 0 : e.message) || `WebSocket connection failed for host: ${f3(this.url)}`));
    return this.events.emit("register_error", r), r;
  }
};
var l0 = { exports: {} };
l0.exports;
(function(t, e) {
  var r = 200, n = "__lodash_hash_undefined__", i = 1, s = 2, o = 9007199254740991, a = "[object Arguments]", u = "[object Array]", l = "[object AsyncFunction]", d = "[object Boolean]", p = "[object Date]", w = "[object Error]", A = "[object Function]", M = "[object GeneratorFunction]", N = "[object Map]", L = "[object Number]", B = "[object Null]", $ = "[object Object]", H = "[object Promise]", W = "[object Proxy]", V = "[object RegExp]", te = "[object Set]", R = "[object String]", K = "[object Symbol]", ge = "[object Undefined]", Ee = "[object WeakMap]", Y = "[object ArrayBuffer]", S = "[object DataView]", m = "[object Float32Array]", f = "[object Float64Array]", g = "[object Int8Array]", b = "[object Int16Array]", x = "[object Int32Array]", _ = "[object Uint8Array]", E = "[object Uint8ClampedArray]", v = "[object Uint16Array]", P = "[object Uint32Array]", I = /[\\^$.*+?()[\]{}|]/g, F = /^\[object .+?Constructor\]$/, ce = /^(?:0|[1-9]\d*)$/, D = {};
  D[m] = D[f] = D[g] = D[b] = D[x] = D[_] = D[E] = D[v] = D[P] = !0, D[a] = D[u] = D[Y] = D[d] = D[S] = D[p] = D[w] = D[A] = D[N] = D[L] = D[$] = D[V] = D[te] = D[R] = D[Ee] = !1;
  var oe = typeof gn == "object" && gn && gn.Object === Object && gn, Z = typeof self == "object" && self && self.Object === Object && self, J = oe || Z || Function("return this")(), Q = e && !e.nodeType && e, T = Q && !0 && t && !t.nodeType && t, X = T && T.exports === Q, re = X && oe.process, de = function() {
    try {
      return re && re.binding && re.binding("util");
    } catch {
    }
  }(), ie = de && de.isTypedArray;
  function ue(ae, ye) {
    for (var Ge = -1, Pt = ae == null ? 0 : ae.length, jr = 0, nr = []; ++Ge < Pt; ) {
      var Kr = ae[Ge];
      ye(Kr, Ge, ae) && (nr[jr++] = Kr);
    }
    return nr;
  }
  function ve(ae, ye) {
    for (var Ge = -1, Pt = ye.length, jr = ae.length; ++Ge < Pt; )
      ae[jr + Ge] = ye[Ge];
    return ae;
  }
  function Pe(ae, ye) {
    for (var Ge = -1, Pt = ae == null ? 0 : ae.length; ++Ge < Pt; )
      if (ye(ae[Ge], Ge, ae))
        return !0;
    return !1;
  }
  function De(ae, ye) {
    for (var Ge = -1, Pt = Array(ae); ++Ge < ae; )
      Pt[Ge] = ye(Ge);
    return Pt;
  }
  function Ce(ae) {
    return function(ye) {
      return ae(ye);
    };
  }
  function $e(ae, ye) {
    return ae.has(ye);
  }
  function Me(ae, ye) {
    return ae == null ? void 0 : ae[ye];
  }
  function Ne(ae) {
    var ye = -1, Ge = Array(ae.size);
    return ae.forEach(function(Pt, jr) {
      Ge[++ye] = [jr, Pt];
    }), Ge;
  }
  function Ke(ae, ye) {
    return function(Ge) {
      return ae(ye(Ge));
    };
  }
  function Le(ae) {
    var ye = -1, Ge = Array(ae.size);
    return ae.forEach(function(Pt) {
      Ge[++ye] = Pt;
    }), Ge;
  }
  var qe = Array.prototype, ze = Function.prototype, _e = Object.prototype, Ze = J["__core-js_shared__"], at = ze.toString, ke = _e.hasOwnProperty, Qe = function() {
    var ae = /[^.]+$/.exec(Ze && Ze.keys && Ze.keys.IE_PROTO || "");
    return ae ? "Symbol(src)_1." + ae : "";
  }(), tt = _e.toString, Ye = RegExp(
    "^" + at.call(ke).replace(I, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
  ), dt = X ? J.Buffer : void 0, lt = J.Symbol, ct = J.Uint8Array, qt = _e.propertyIsEnumerable, Yt = qe.splice, Et = lt ? lt.toStringTag : void 0, er = Object.getOwnPropertySymbols, Jt = dt ? dt.isBuffer : void 0, Dt = Ke(Object.keys, Object), kt = yr(J, "DataView"), Ct = yr(J, "Map"), gt = yr(J, "Promise"), Rt = yr(J, "Set"), Nt = yr(J, "WeakMap"), vt = yr(Object, "create"), $t = io(kt), Ft = io(Ct), rt = io(gt), Bt = io(Rt), k = io(Nt), U = lt ? lt.prototype : void 0, z = U ? U.valueOf : void 0;
  function C(ae) {
    var ye = -1, Ge = ae == null ? 0 : ae.length;
    for (this.clear(); ++ye < Ge; ) {
      var Pt = ae[ye];
      this.set(Pt[0], Pt[1]);
    }
  }
  function G() {
    this.__data__ = vt ? vt(null) : {}, this.size = 0;
  }
  function j(ae) {
    var ye = this.has(ae) && delete this.__data__[ae];
    return this.size -= ye ? 1 : 0, ye;
  }
  function se(ae) {
    var ye = this.__data__;
    if (vt) {
      var Ge = ye[ae];
      return Ge === n ? void 0 : Ge;
    }
    return ke.call(ye, ae) ? ye[ae] : void 0;
  }
  function he(ae) {
    var ye = this.__data__;
    return vt ? ye[ae] !== void 0 : ke.call(ye, ae);
  }
  function xe(ae, ye) {
    var Ge = this.__data__;
    return this.size += this.has(ae) ? 0 : 1, Ge[ae] = vt && ye === void 0 ? n : ye, this;
  }
  C.prototype.clear = G, C.prototype.delete = j, C.prototype.get = se, C.prototype.has = he, C.prototype.set = xe;
  function Te(ae) {
    var ye = -1, Ge = ae == null ? 0 : ae.length;
    for (this.clear(); ++ye < Ge; ) {
      var Pt = ae[ye];
      this.set(Pt[0], Pt[1]);
    }
  }
  function Re() {
    this.__data__ = [], this.size = 0;
  }
  function nt(ae) {
    var ye = this.__data__, Ge = Je(ye, ae);
    if (Ge < 0)
      return !1;
    var Pt = ye.length - 1;
    return Ge == Pt ? ye.pop() : Yt.call(ye, Ge, 1), --this.size, !0;
  }
  function je(ae) {
    var ye = this.__data__, Ge = Je(ye, ae);
    return Ge < 0 ? void 0 : ye[Ge][1];
  }
  function pt(ae) {
    return Je(this.__data__, ae) > -1;
  }
  function it(ae, ye) {
    var Ge = this.__data__, Pt = Je(Ge, ae);
    return Pt < 0 ? (++this.size, Ge.push([ae, ye])) : Ge[Pt][1] = ye, this;
  }
  Te.prototype.clear = Re, Te.prototype.delete = nt, Te.prototype.get = je, Te.prototype.has = pt, Te.prototype.set = it;
  function et(ae) {
    var ye = -1, Ge = ae == null ? 0 : ae.length;
    for (this.clear(); ++ye < Ge; ) {
      var Pt = ae[ye];
      this.set(Pt[0], Pt[1]);
    }
  }
  function St() {
    this.size = 0, this.__data__ = {
      hash: new C(),
      map: new (Ct || Te)(),
      string: new C()
    };
  }
  function Tt(ae) {
    var ye = mr(this, ae).delete(ae);
    return this.size -= ye ? 1 : 0, ye;
  }
  function At(ae) {
    return mr(this, ae).get(ae);
  }
  function _t(ae) {
    return mr(this, ae).has(ae);
  }
  function ht(ae, ye) {
    var Ge = mr(this, ae), Pt = Ge.size;
    return Ge.set(ae, ye), this.size += Ge.size == Pt ? 0 : 1, this;
  }
  et.prototype.clear = St, et.prototype.delete = Tt, et.prototype.get = At, et.prototype.has = _t, et.prototype.set = ht;
  function xt(ae) {
    var ye = -1, Ge = ae == null ? 0 : ae.length;
    for (this.__data__ = new et(); ++ye < Ge; )
      this.add(ae[ye]);
  }
  function st(ae) {
    return this.__data__.set(ae, n), this;
  }
  function bt(ae) {
    return this.__data__.has(ae);
  }
  xt.prototype.add = xt.prototype.push = st, xt.prototype.has = bt;
  function ut(ae) {
    var ye = this.__data__ = new Te(ae);
    this.size = ye.size;
  }
  function ot() {
    this.__data__ = new Te(), this.size = 0;
  }
  function Se(ae) {
    var ye = this.__data__, Ge = ye.delete(ae);
    return this.size = ye.size, Ge;
  }
  function Ae(ae) {
    return this.__data__.get(ae);
  }
  function Ve(ae) {
    return this.__data__.has(ae);
  }
  function Fe(ae, ye) {
    var Ge = this.__data__;
    if (Ge instanceof Te) {
      var Pt = Ge.__data__;
      if (!Ct || Pt.length < r - 1)
        return Pt.push([ae, ye]), this.size = ++Ge.size, this;
      Ge = this.__data__ = new et(Pt);
    }
    return Ge.set(ae, ye), this.size = Ge.size, this;
  }
  ut.prototype.clear = ot, ut.prototype.delete = Se, ut.prototype.get = Ae, ut.prototype.has = Ve, ut.prototype.set = Fe;
  function Ue(ae, ye) {
    var Ge = Mc(ae), Pt = !Ge && dh(ae), jr = !Ge && !Pt && Xu(ae), nr = !Ge && !Pt && !jr && mh(ae), Kr = Ge || Pt || jr || nr, vn = Kr ? De(ae.length, String) : [], _r = vn.length;
    for (var Ur in ae)
      ke.call(ae, Ur) && !(Kr && // Safari 9 has enumerable `arguments.length` in strict mode.
      (Ur == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
      jr && (Ur == "offset" || Ur == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
      nr && (Ur == "buffer" || Ur == "byteLength" || Ur == "byteOffset") || // Skip index properties.
      nn(Ur, _r))) && vn.push(Ur);
    return vn;
  }
  function Je(ae, ye) {
    for (var Ge = ae.length; Ge--; )
      if (hh(ae[Ge][0], ye))
        return Ge;
    return -1;
  }
  function Lt(ae, ye, Ge) {
    var Pt = ye(ae);
    return Mc(ae) ? Pt : ve(Pt, Ge(ae));
  }
  function zt(ae) {
    return ae == null ? ae === void 0 ? ge : B : Et && Et in Object(ae) ? $r(ae) : Rp(ae);
  }
  function Xt(ae) {
    return Da(ae) && zt(ae) == a;
  }
  function Wt(ae, ye, Ge, Pt, jr) {
    return ae === ye ? !0 : ae == null || ye == null || !Da(ae) && !Da(ye) ? ae !== ae && ye !== ye : le(ae, ye, Ge, Pt, Wt, jr);
  }
  function le(ae, ye, Ge, Pt, jr, nr) {
    var Kr = Mc(ae), vn = Mc(ye), _r = Kr ? u : Ir(ae), Ur = vn ? u : Ir(ye);
    _r = _r == a ? $ : _r, Ur = Ur == a ? $ : Ur;
    var an = _r == $, ui = Ur == $, bn = _r == Ur;
    if (bn && Xu(ae)) {
      if (!Xu(ye))
        return !1;
      Kr = !0, an = !1;
    }
    if (bn && !an)
      return nr || (nr = new ut()), Kr || mh(ae) ? Zt(ae, ye, Ge, Pt, jr, nr) : gr(ae, ye, _r, Ge, Pt, jr, nr);
    if (!(Ge & i)) {
      var Vr = an && ke.call(ae, "__wrapped__"), ti = ui && ke.call(ye, "__wrapped__");
      if (Vr || ti) {
        var fs = Vr ? ae.value() : ae, Fi = ti ? ye.value() : ye;
        return nr || (nr = new ut()), jr(fs, Fi, Ge, Pt, nr);
      }
    }
    return bn ? (nr || (nr = new ut()), lr(ae, ye, Ge, Pt, jr, nr)) : !1;
  }
  function rr(ae) {
    if (!gh(ae) || on(ae))
      return !1;
    var ye = Ic(ae) ? Ye : F;
    return ye.test(io(ae));
  }
  function dr(ae) {
    return Da(ae) && ph(ae.length) && !!D[zt(ae)];
  }
  function pr(ae) {
    if (!lh(ae))
      return Dt(ae);
    var ye = [];
    for (var Ge in Object(ae))
      ke.call(ae, Ge) && Ge != "constructor" && ye.push(Ge);
    return ye;
  }
  function Zt(ae, ye, Ge, Pt, jr, nr) {
    var Kr = Ge & i, vn = ae.length, _r = ye.length;
    if (vn != _r && !(Kr && _r > vn))
      return !1;
    var Ur = nr.get(ae);
    if (Ur && nr.get(ye))
      return Ur == ye;
    var an = -1, ui = !0, bn = Ge & s ? new xt() : void 0;
    for (nr.set(ae, ye), nr.set(ye, ae); ++an < vn; ) {
      var Vr = ae[an], ti = ye[an];
      if (Pt)
        var fs = Kr ? Pt(ti, Vr, an, ye, ae, nr) : Pt(Vr, ti, an, ae, ye, nr);
      if (fs !== void 0) {
        if (fs)
          continue;
        ui = !1;
        break;
      }
      if (bn) {
        if (!Pe(ye, function(Fi, Is) {
          if (!$e(bn, Is) && (Vr === Fi || jr(Vr, Fi, Ge, Pt, nr)))
            return bn.push(Is);
        })) {
          ui = !1;
          break;
        }
      } else if (!(Vr === ti || jr(Vr, ti, Ge, Pt, nr))) {
        ui = !1;
        break;
      }
    }
    return nr.delete(ae), nr.delete(ye), ui;
  }
  function gr(ae, ye, Ge, Pt, jr, nr, Kr) {
    switch (Ge) {
      case S:
        if (ae.byteLength != ye.byteLength || ae.byteOffset != ye.byteOffset)
          return !1;
        ae = ae.buffer, ye = ye.buffer;
      case Y:
        return !(ae.byteLength != ye.byteLength || !nr(new ct(ae), new ct(ye)));
      case d:
      case p:
      case L:
        return hh(+ae, +ye);
      case w:
        return ae.name == ye.name && ae.message == ye.message;
      case V:
      case R:
        return ae == ye + "";
      case N:
        var vn = Ne;
      case te:
        var _r = Pt & i;
        if (vn || (vn = Le), ae.size != ye.size && !_r)
          return !1;
        var Ur = Kr.get(ae);
        if (Ur)
          return Ur == ye;
        Pt |= s, Kr.set(ae, ye);
        var an = Zt(vn(ae), vn(ye), Pt, jr, nr, Kr);
        return Kr.delete(ae), an;
      case K:
        if (z)
          return z.call(ae) == z.call(ye);
    }
    return !1;
  }
  function lr(ae, ye, Ge, Pt, jr, nr) {
    var Kr = Ge & i, vn = Rr(ae), _r = vn.length, Ur = Rr(ye), an = Ur.length;
    if (_r != an && !Kr)
      return !1;
    for (var ui = _r; ui--; ) {
      var bn = vn[ui];
      if (!(Kr ? bn in ye : ke.call(ye, bn)))
        return !1;
    }
    var Vr = nr.get(ae);
    if (Vr && nr.get(ye))
      return Vr == ye;
    var ti = !0;
    nr.set(ae, ye), nr.set(ye, ae);
    for (var fs = Kr; ++ui < _r; ) {
      bn = vn[ui];
      var Fi = ae[bn], Is = ye[bn];
      if (Pt)
        var Zu = Kr ? Pt(Is, Fi, bn, ye, ae, nr) : Pt(Fi, Is, bn, ae, ye, nr);
      if (!(Zu === void 0 ? Fi === Is || jr(Fi, Is, Ge, Pt, nr) : Zu)) {
        ti = !1;
        break;
      }
      fs || (fs = bn == "constructor");
    }
    if (ti && !fs) {
      var Oa = ae.constructor, Pn = ye.constructor;
      Oa != Pn && "constructor" in ae && "constructor" in ye && !(typeof Oa == "function" && Oa instanceof Oa && typeof Pn == "function" && Pn instanceof Pn) && (ti = !1);
    }
    return nr.delete(ae), nr.delete(ye), ti;
  }
  function Rr(ae) {
    return Lt(ae, Np, Br);
  }
  function mr(ae, ye) {
    var Ge = ae.__data__;
    return sn(ye) ? Ge[typeof ye == "string" ? "string" : "hash"] : Ge.map;
  }
  function yr(ae, ye) {
    var Ge = Me(ae, ye);
    return rr(Ge) ? Ge : void 0;
  }
  function $r(ae) {
    var ye = ke.call(ae, Et), Ge = ae[Et];
    try {
      ae[Et] = void 0;
      var Pt = !0;
    } catch {
    }
    var jr = tt.call(ae);
    return Pt && (ye ? ae[Et] = Ge : delete ae[Et]), jr;
  }
  var Br = er ? function(ae) {
    return ae == null ? [] : (ae = Object(ae), ue(er(ae), function(ye) {
      return qt.call(ae, ye);
    }));
  } : Fr, Ir = zt;
  (kt && Ir(new kt(new ArrayBuffer(1))) != S || Ct && Ir(new Ct()) != N || gt && Ir(gt.resolve()) != H || Rt && Ir(new Rt()) != te || Nt && Ir(new Nt()) != Ee) && (Ir = function(ae) {
    var ye = zt(ae), Ge = ye == $ ? ae.constructor : void 0, Pt = Ge ? io(Ge) : "";
    if (Pt)
      switch (Pt) {
        case $t:
          return S;
        case Ft:
          return N;
        case rt:
          return H;
        case Bt:
          return te;
        case k:
          return Ee;
      }
    return ye;
  });
  function nn(ae, ye) {
    return ye = ye ?? o, !!ye && (typeof ae == "number" || ce.test(ae)) && ae > -1 && ae % 1 == 0 && ae < ye;
  }
  function sn(ae) {
    var ye = typeof ae;
    return ye == "string" || ye == "number" || ye == "symbol" || ye == "boolean" ? ae !== "__proto__" : ae === null;
  }
  function on(ae) {
    return !!Qe && Qe in ae;
  }
  function lh(ae) {
    var ye = ae && ae.constructor, Ge = typeof ye == "function" && ye.prototype || _e;
    return ae === Ge;
  }
  function Rp(ae) {
    return tt.call(ae);
  }
  function io(ae) {
    if (ae != null) {
      try {
        return at.call(ae);
      } catch {
      }
      try {
        return ae + "";
      } catch {
      }
    }
    return "";
  }
  function hh(ae, ye) {
    return ae === ye || ae !== ae && ye !== ye;
  }
  var dh = Xt(/* @__PURE__ */ function() {
    return arguments;
  }()) ? Xt : function(ae) {
    return Da(ae) && ke.call(ae, "callee") && !qt.call(ae, "callee");
  }, Mc = Array.isArray;
  function Dp(ae) {
    return ae != null && ph(ae.length) && !Ic(ae);
  }
  var Xu = Jt || Dr;
  function Op(ae, ye) {
    return Wt(ae, ye);
  }
  function Ic(ae) {
    if (!gh(ae))
      return !1;
    var ye = zt(ae);
    return ye == A || ye == M || ye == l || ye == W;
  }
  function ph(ae) {
    return typeof ae == "number" && ae > -1 && ae % 1 == 0 && ae <= o;
  }
  function gh(ae) {
    var ye = typeof ae;
    return ae != null && (ye == "object" || ye == "function");
  }
  function Da(ae) {
    return ae != null && typeof ae == "object";
  }
  var mh = ie ? Ce(ie) : dr;
  function Np(ae) {
    return Dp(ae) ? Ue(ae) : pr(ae);
  }
  function Fr() {
    return [];
  }
  function Dr() {
    return !1;
  }
  t.exports = Op;
})(l0, l0.exports);
var HW = l0.exports;
const KW = /* @__PURE__ */ ts(HW), eE = "wc", tE = 2, rE = "core", Qs = `${eE}@2:${rE}:`, VW = { logger: "error" }, GW = { database: ":memory:" }, YW = "crypto", h3 = "client_ed25519_seed", JW = mt.ONE_DAY, XW = "keychain", ZW = "0.3", QW = "messages", eH = "0.3", tH = mt.SIX_HOURS, rH = "publisher", nE = "irn", nH = "error", iE = "wss://relay.walletconnect.org", iH = "relayer", oi = { message: "relayer_message", message_ack: "relayer_message_ack", connect: "relayer_connect", disconnect: "relayer_disconnect", error: "relayer_error", connection_stalled: "relayer_connection_stalled", publish: "relayer_publish" }, sH = "_subscription", Vi = { payload: "payload", connect: "connect", disconnect: "disconnect", error: "error" }, oH = 0.1, T1 = "2.17.2", zr = { link_mode: "link_mode", relay: "relay" }, aH = "0.3", cH = "WALLETCONNECT_CLIENT_ID", d3 = "WALLETCONNECT_LINK_MODE_APPS", Us = { created: "subscription_created", deleted: "subscription_deleted", sync: "subscription_sync", resubscribed: "subscription_resubscribed" }, uH = "subscription", fH = "0.3", lH = mt.FIVE_SECONDS * 1e3, hH = "pairing", dH = "0.3", Mf = { wc_pairingDelete: { req: { ttl: mt.ONE_DAY, prompt: !1, tag: 1e3 }, res: { ttl: mt.ONE_DAY, prompt: !1, tag: 1001 } }, wc_pairingPing: { req: { ttl: mt.THIRTY_SECONDS, prompt: !1, tag: 1002 }, res: { ttl: mt.THIRTY_SECONDS, prompt: !1, tag: 1003 } }, unregistered_method: { req: { ttl: mt.ONE_DAY, prompt: !1, tag: 0 }, res: { ttl: mt.ONE_DAY, prompt: !1, tag: 0 } } }, Za = { create: "pairing_create", expire: "pairing_expire", delete: "pairing_delete", ping: "pairing_ping" }, ms = { created: "history_created", updated: "history_updated", deleted: "history_deleted", sync: "history_sync" }, pH = "history", gH = "0.3", mH = "expirer", Ji = { created: "expirer_created", deleted: "expirer_deleted", expired: "expirer_expired", sync: "expirer_sync" }, vH = "0.3", bH = "verify-api", yH = "https://verify.walletconnect.com", sE = "https://verify.walletconnect.org", Wf = sE, wH = `${Wf}/v3`, xH = [yH, sE], _H = "echo", EH = "https://echo.walletconnect.com", Fs = { pairing_started: "pairing_started", pairing_uri_validation_success: "pairing_uri_validation_success", pairing_uri_not_expired: "pairing_uri_not_expired", store_new_pairing: "store_new_pairing", subscribing_pairing_topic: "subscribing_pairing_topic", subscribe_pairing_topic_success: "subscribe_pairing_topic_success", existing_pairing: "existing_pairing", pairing_not_expired: "pairing_not_expired", emit_inactive_pairing: "emit_inactive_pairing", emit_session_proposal: "emit_session_proposal" }, wo = { no_internet_connection: "no_internet_connection", malformed_pairing_uri: "malformed_pairing_uri", active_pairing_already_exists: "active_pairing_already_exists", subscribe_pairing_topic_failure: "subscribe_pairing_topic_failure", pairing_expired: "pairing_expired", proposal_listener_not_found: "proposal_listener_not_found" }, vs = { session_approve_started: "session_approve_started", session_namespaces_validation_success: "session_namespaces_validation_success", subscribing_session_topic: "subscribing_session_topic", subscribe_session_topic_success: "subscribe_session_topic_success", publishing_session_approve: "publishing_session_approve", session_approve_publish_success: "session_approve_publish_success", store_session: "store_session", publishing_session_settle: "publishing_session_settle", session_settle_publish_success: "session_settle_publish_success" }, Ha = { no_internet_connection: "no_internet_connection", proposal_expired: "proposal_expired", subscribe_session_topic_failure: "subscribe_session_topic_failure", session_approve_publish_failure: "session_approve_publish_failure", session_settle_publish_failure: "session_settle_publish_failure", session_approve_namespace_validation_failure: "session_approve_namespace_validation_failure", proposal_not_found: "proposal_not_found" }, Ka = { authenticated_session_approve_started: "authenticated_session_approve_started", create_authenticated_session_topic: "create_authenticated_session_topic", cacaos_verified: "cacaos_verified", store_authenticated_session: "store_authenticated_session", subscribing_authenticated_session_topic: "subscribing_authenticated_session_topic", subscribe_authenticated_session_topic_success: "subscribe_authenticated_session_topic_success", publishing_authenticated_session_approve: "publishing_authenticated_session_approve" }, If = { no_internet_connection: "no_internet_connection", invalid_cacao: "invalid_cacao", subscribe_authenticated_session_topic_failure: "subscribe_authenticated_session_topic_failure", authenticated_session_approve_publish_failure: "authenticated_session_approve_publish_failure", authenticated_session_pending_request_not_found: "authenticated_session_pending_request_not_found" }, SH = 0.1, AH = "event-client", PH = 86400, MH = "https://pulse.walletconnect.org/batch";
function IH(t, e) {
  if (t.length >= 255) throw new TypeError("Alphabet too long");
  for (var r = new Uint8Array(256), n = 0; n < r.length; n++) r[n] = 255;
  for (var i = 0; i < t.length; i++) {
    var s = t.charAt(i), o = s.charCodeAt(0);
    if (r[o] !== 255) throw new TypeError(s + " is ambiguous");
    r[o] = i;
  }
  var a = t.length, u = t.charAt(0), l = Math.log(a) / Math.log(256), d = Math.log(256) / Math.log(a);
  function p(M) {
    if (M instanceof Uint8Array || (ArrayBuffer.isView(M) ? M = new Uint8Array(M.buffer, M.byteOffset, M.byteLength) : Array.isArray(M) && (M = Uint8Array.from(M))), !(M instanceof Uint8Array)) throw new TypeError("Expected Uint8Array");
    if (M.length === 0) return "";
    for (var N = 0, L = 0, B = 0, $ = M.length; B !== $ && M[B] === 0; ) B++, N++;
    for (var H = ($ - B) * d + 1 >>> 0, W = new Uint8Array(H); B !== $; ) {
      for (var V = M[B], te = 0, R = H - 1; (V !== 0 || te < L) && R !== -1; R--, te++) V += 256 * W[R] >>> 0, W[R] = V % a >>> 0, V = V / a >>> 0;
      if (V !== 0) throw new Error("Non-zero carry");
      L = te, B++;
    }
    for (var K = H - L; K !== H && W[K] === 0; ) K++;
    for (var ge = u.repeat(N); K < H; ++K) ge += t.charAt(W[K]);
    return ge;
  }
  function w(M) {
    if (typeof M != "string") throw new TypeError("Expected String");
    if (M.length === 0) return new Uint8Array();
    var N = 0;
    if (M[N] !== " ") {
      for (var L = 0, B = 0; M[N] === u; ) L++, N++;
      for (var $ = (M.length - N) * l + 1 >>> 0, H = new Uint8Array($); M[N]; ) {
        var W = r[M.charCodeAt(N)];
        if (W === 255) return;
        for (var V = 0, te = $ - 1; (W !== 0 || V < B) && te !== -1; te--, V++) W += a * H[te] >>> 0, H[te] = W % 256 >>> 0, W = W / 256 >>> 0;
        if (W !== 0) throw new Error("Non-zero carry");
        B = V, N++;
      }
      if (M[N] !== " ") {
        for (var R = $ - B; R !== $ && H[R] === 0; ) R++;
        for (var K = new Uint8Array(L + ($ - R)), ge = L; R !== $; ) K[ge++] = H[R++];
        return K;
      }
    }
  }
  function A(M) {
    var N = w(M);
    if (N) return N;
    throw new Error(`Non-${e} character`);
  }
  return { encode: p, decodeUnsafe: w, decode: A };
}
var CH = IH, TH = CH;
const oE = (t) => {
  if (t instanceof Uint8Array && t.constructor.name === "Uint8Array") return t;
  if (t instanceof ArrayBuffer) return new Uint8Array(t);
  if (ArrayBuffer.isView(t)) return new Uint8Array(t.buffer, t.byteOffset, t.byteLength);
  throw new Error("Unknown type, must be binary type");
}, RH = (t) => new TextEncoder().encode(t), DH = (t) => new TextDecoder().decode(t);
class OH {
  constructor(e, r, n) {
    this.name = e, this.prefix = r, this.baseEncode = n;
  }
  encode(e) {
    if (e instanceof Uint8Array) return `${this.prefix}${this.baseEncode(e)}`;
    throw Error("Unknown type, must be binary type");
  }
}
class NH {
  constructor(e, r, n) {
    if (this.name = e, this.prefix = r, r.codePointAt(0) === void 0) throw new Error("Invalid prefix character");
    this.prefixCodePoint = r.codePointAt(0), this.baseDecode = n;
  }
  decode(e) {
    if (typeof e == "string") {
      if (e.codePointAt(0) !== this.prefixCodePoint) throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);
      return this.baseDecode(e.slice(this.prefix.length));
    } else throw Error("Can only multibase decode strings");
  }
  or(e) {
    return aE(this, e);
  }
}
class LH {
  constructor(e) {
    this.decoders = e;
  }
  or(e) {
    return aE(this, e);
  }
  decode(e) {
    const r = e[0], n = this.decoders[r];
    if (n) return n.decode(e);
    throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`);
  }
}
const aE = (t, e) => new LH({ ...t.decoders || { [t.prefix]: t }, ...e.decoders || { [e.prefix]: e } });
class kH {
  constructor(e, r, n, i) {
    this.name = e, this.prefix = r, this.baseEncode = n, this.baseDecode = i, this.encoder = new OH(e, r, n), this.decoder = new NH(e, r, i);
  }
  encode(e) {
    return this.encoder.encode(e);
  }
  decode(e) {
    return this.decoder.decode(e);
  }
}
const sp = ({ name: t, prefix: e, encode: r, decode: n }) => new kH(t, e, r, n), rh = ({ prefix: t, name: e, alphabet: r }) => {
  const { encode: n, decode: i } = TH(r, e);
  return sp({ prefix: t, name: e, encode: n, decode: (s) => oE(i(s)) });
}, $H = (t, e, r, n) => {
  const i = {};
  for (let d = 0; d < e.length; ++d) i[e[d]] = d;
  let s = t.length;
  for (; t[s - 1] === "="; ) --s;
  const o = new Uint8Array(s * r / 8 | 0);
  let a = 0, u = 0, l = 0;
  for (let d = 0; d < s; ++d) {
    const p = i[t[d]];
    if (p === void 0) throw new SyntaxError(`Non-${n} character`);
    u = u << r | p, a += r, a >= 8 && (a -= 8, o[l++] = 255 & u >> a);
  }
  if (a >= r || 255 & u << 8 - a) throw new SyntaxError("Unexpected end of data");
  return o;
}, BH = (t, e, r) => {
  const n = e[e.length - 1] === "=", i = (1 << r) - 1;
  let s = "", o = 0, a = 0;
  for (let u = 0; u < t.length; ++u) for (a = a << 8 | t[u], o += 8; o > r; ) o -= r, s += e[i & a >> o];
  if (o && (s += e[i & a << r - o]), n) for (; s.length * r & 7; ) s += "=";
  return s;
}, Hn = ({ name: t, prefix: e, bitsPerChar: r, alphabet: n }) => sp({ prefix: e, name: t, encode(i) {
  return BH(i, n, r);
}, decode(i) {
  return $H(i, n, r, t);
} }), FH = sp({ prefix: "\0", name: "identity", encode: (t) => DH(t), decode: (t) => RH(t) });
var jH = Object.freeze({ __proto__: null, identity: FH });
const UH = Hn({ prefix: "0", name: "base2", alphabet: "01", bitsPerChar: 1 });
var qH = Object.freeze({ __proto__: null, base2: UH });
const zH = Hn({ prefix: "7", name: "base8", alphabet: "01234567", bitsPerChar: 3 });
var WH = Object.freeze({ __proto__: null, base8: zH });
const HH = rh({ prefix: "9", name: "base10", alphabet: "0123456789" });
var KH = Object.freeze({ __proto__: null, base10: HH });
const VH = Hn({ prefix: "f", name: "base16", alphabet: "0123456789abcdef", bitsPerChar: 4 }), GH = Hn({ prefix: "F", name: "base16upper", alphabet: "0123456789ABCDEF", bitsPerChar: 4 });
var YH = Object.freeze({ __proto__: null, base16: VH, base16upper: GH });
const JH = Hn({ prefix: "b", name: "base32", alphabet: "abcdefghijklmnopqrstuvwxyz234567", bitsPerChar: 5 }), XH = Hn({ prefix: "B", name: "base32upper", alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567", bitsPerChar: 5 }), ZH = Hn({ prefix: "c", name: "base32pad", alphabet: "abcdefghijklmnopqrstuvwxyz234567=", bitsPerChar: 5 }), QH = Hn({ prefix: "C", name: "base32padupper", alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=", bitsPerChar: 5 }), eK = Hn({ prefix: "v", name: "base32hex", alphabet: "0123456789abcdefghijklmnopqrstuv", bitsPerChar: 5 }), tK = Hn({ prefix: "V", name: "base32hexupper", alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV", bitsPerChar: 5 }), rK = Hn({ prefix: "t", name: "base32hexpad", alphabet: "0123456789abcdefghijklmnopqrstuv=", bitsPerChar: 5 }), nK = Hn({ prefix: "T", name: "base32hexpadupper", alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUV=", bitsPerChar: 5 }), iK = Hn({ prefix: "h", name: "base32z", alphabet: "ybndrfg8ejkmcpqxot1uwisza345h769", bitsPerChar: 5 });
var sK = Object.freeze({ __proto__: null, base32: JH, base32upper: XH, base32pad: ZH, base32padupper: QH, base32hex: eK, base32hexupper: tK, base32hexpad: rK, base32hexpadupper: nK, base32z: iK });
const oK = rh({ prefix: "k", name: "base36", alphabet: "0123456789abcdefghijklmnopqrstuvwxyz" }), aK = rh({ prefix: "K", name: "base36upper", alphabet: "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ" });
var cK = Object.freeze({ __proto__: null, base36: oK, base36upper: aK });
const uK = rh({ name: "base58btc", prefix: "z", alphabet: "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz" }), fK = rh({ name: "base58flickr", prefix: "Z", alphabet: "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ" });
var lK = Object.freeze({ __proto__: null, base58btc: uK, base58flickr: fK });
const hK = Hn({ prefix: "m", name: "base64", alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", bitsPerChar: 6 }), dK = Hn({ prefix: "M", name: "base64pad", alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", bitsPerChar: 6 }), pK = Hn({ prefix: "u", name: "base64url", alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_", bitsPerChar: 6 }), gK = Hn({ prefix: "U", name: "base64urlpad", alphabet: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=", bitsPerChar: 6 });
var mK = Object.freeze({ __proto__: null, base64: hK, base64pad: dK, base64url: pK, base64urlpad: gK });
const cE = Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"), vK = cE.reduce((t, e, r) => (t[r] = e, t), []), bK = cE.reduce((t, e, r) => (t[e.codePointAt(0)] = r, t), []);
function yK(t) {
  return t.reduce((e, r) => (e += vK[r], e), "");
}
function wK(t) {
  const e = [];
  for (const r of t) {
    const n = bK[r.codePointAt(0)];
    if (n === void 0) throw new Error(`Non-base256emoji character: ${r}`);
    e.push(n);
  }
  return new Uint8Array(e);
}
const xK = sp({ prefix: "🚀", name: "base256emoji", encode: yK, decode: wK });
var _K = Object.freeze({ __proto__: null, base256emoji: xK }), EK = uE, p3 = 128, SK = 127, AK = ~SK, PK = Math.pow(2, 31);
function uE(t, e, r) {
  e = e || [], r = r || 0;
  for (var n = r; t >= PK; ) e[r++] = t & 255 | p3, t /= 128;
  for (; t & AK; ) e[r++] = t & 255 | p3, t >>>= 7;
  return e[r] = t | 0, uE.bytes = r - n + 1, e;
}
var MK = R1, IK = 128, g3 = 127;
function R1(t, n) {
  var r = 0, n = n || 0, i = 0, s = n, o, a = t.length;
  do {
    if (s >= a) throw R1.bytes = 0, new RangeError("Could not decode varint");
    o = t[s++], r += i < 28 ? (o & g3) << i : (o & g3) * Math.pow(2, i), i += 7;
  } while (o >= IK);
  return R1.bytes = s - n, r;
}
var CK = Math.pow(2, 7), TK = Math.pow(2, 14), RK = Math.pow(2, 21), DK = Math.pow(2, 28), OK = Math.pow(2, 35), NK = Math.pow(2, 42), LK = Math.pow(2, 49), kK = Math.pow(2, 56), $K = Math.pow(2, 63), BK = function(t) {
  return t < CK ? 1 : t < TK ? 2 : t < RK ? 3 : t < DK ? 4 : t < OK ? 5 : t < NK ? 6 : t < LK ? 7 : t < kK ? 8 : t < $K ? 9 : 10;
}, FK = { encode: EK, decode: MK, encodingLength: BK }, fE = FK;
const m3 = (t, e, r = 0) => (fE.encode(t, e, r), e), v3 = (t) => fE.encodingLength(t), D1 = (t, e) => {
  const r = e.byteLength, n = v3(t), i = n + v3(r), s = new Uint8Array(i + r);
  return m3(t, s, 0), m3(r, s, n), s.set(e, i), new jK(t, r, e, s);
};
class jK {
  constructor(e, r, n, i) {
    this.code = e, this.size = r, this.digest = n, this.bytes = i;
  }
}
const lE = ({ name: t, code: e, encode: r }) => new UK(t, e, r);
class UK {
  constructor(e, r, n) {
    this.name = e, this.code = r, this.encode = n;
  }
  digest(e) {
    if (e instanceof Uint8Array) {
      const r = this.encode(e);
      return r instanceof Uint8Array ? D1(this.code, r) : r.then((n) => D1(this.code, n));
    } else throw Error("Unknown type, must be binary type");
  }
}
const hE = (t) => async (e) => new Uint8Array(await crypto.subtle.digest(t, e)), qK = lE({ name: "sha2-256", code: 18, encode: hE("SHA-256") }), zK = lE({ name: "sha2-512", code: 19, encode: hE("SHA-512") });
var WK = Object.freeze({ __proto__: null, sha256: qK, sha512: zK });
const dE = 0, HK = "identity", pE = oE, KK = (t) => D1(dE, pE(t)), VK = { code: dE, name: HK, encode: pE, digest: KK };
var GK = Object.freeze({ __proto__: null, identity: VK });
new TextEncoder(), new TextDecoder();
const b3 = { ...jH, ...qH, ...WH, ...KH, ...YH, ...sK, ...cK, ...lK, ...mK, ..._K };
({ ...WK, ...GK });
function YK(t = 0) {
  return globalThis.Buffer != null && globalThis.Buffer.allocUnsafe != null ? globalThis.Buffer.allocUnsafe(t) : new Uint8Array(t);
}
function gE(t, e, r, n) {
  return { name: t, prefix: e, encoder: { name: t, prefix: e, encode: r }, decoder: { decode: n } };
}
const y3 = gE("utf8", "u", (t) => "u" + new TextDecoder("utf8").decode(t), (t) => new TextEncoder().encode(t.substring(1))), pm = gE("ascii", "a", (t) => {
  let e = "a";
  for (let r = 0; r < t.length; r++) e += String.fromCharCode(t[r]);
  return e;
}, (t) => {
  t = t.substring(1);
  const e = YK(t.length);
  for (let r = 0; r < t.length; r++) e[r] = t.charCodeAt(r);
  return e;
}), JK = { utf8: y3, "utf-8": y3, hex: b3.base16, latin1: pm, ascii: pm, binary: pm, ...b3 };
function XK(t, e = "utf8") {
  const r = JK[e];
  if (!r) throw new Error(`Unsupported encoding "${e}"`);
  return (e === "utf8" || e === "utf-8") && globalThis.Buffer != null && globalThis.Buffer.from != null ? globalThis.Buffer.from(t, "utf8") : r.decoder.decode(`${r.prefix}${t}`);
}
let ZK = class {
  constructor(e, r) {
    this.core = e, this.logger = r, this.keychain = /* @__PURE__ */ new Map(), this.name = XW, this.version = ZW, this.initialized = !1, this.storagePrefix = Qs, this.init = async () => {
      if (!this.initialized) {
        const n = await this.getKeyChain();
        typeof n < "u" && (this.keychain = n), this.initialized = !0;
      }
    }, this.has = (n) => (this.isInitialized(), this.keychain.has(n)), this.set = async (n, i) => {
      this.isInitialized(), this.keychain.set(n, i), await this.persist();
    }, this.get = (n) => {
      this.isInitialized();
      const i = this.keychain.get(n);
      if (typeof i > "u") {
        const { message: s } = ft("NO_MATCHING_KEY", `${this.name}: ${n}`);
        throw new Error(s);
      }
      return i;
    }, this.del = async (n) => {
      this.isInitialized(), this.keychain.delete(n), await this.persist();
    }, this.core = e, this.logger = ci(r, this.name);
  }
  get context() {
    return Ai(this.logger);
  }
  get storageKey() {
    return this.storagePrefix + this.version + this.core.customStoragePrefix + "//" + this.name;
  }
  async setKeyChain(e) {
    await this.core.storage.setItem(this.storageKey, N8(e));
  }
  async getKeyChain() {
    const e = await this.core.storage.getItem(this.storageKey);
    return typeof e < "u" ? L8(e) : void 0;
  }
  async persist() {
    await this.setKeyChain(this.keychain);
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
}, QK = class {
  constructor(e, r, n) {
    this.core = e, this.logger = r, this.name = YW, this.randomSessionIdentifier = I1(), this.initialized = !1, this.init = async () => {
      this.initialized || (await this.keychain.init(), this.initialized = !0);
    }, this.hasKeys = (i) => (this.isInitialized(), this.keychain.has(i)), this.getClientId = async () => {
      this.isInitialized();
      const i = await this.getClientSeed(), s = ix(i);
      return j4(s.publicKey);
    }, this.generateKeyPair = () => {
      this.isInitialized();
      const i = _z();
      return this.setPrivateKey(i.publicKey, i.privateKey);
    }, this.signJWT = async (i) => {
      this.isInitialized();
      const s = await this.getClientSeed(), o = ix(s), a = this.randomSessionIdentifier;
      return await HB(a, i, JW, o);
    }, this.generateSharedKey = (i, s, o) => {
      this.isInitialized();
      const a = this.getPrivateKey(i), u = Ez(a, s);
      return this.setSymKey(u, o);
    }, this.setSymKey = async (i, s) => {
      this.isInitialized();
      const o = s || Td(i);
      return await this.keychain.set(o, i), o;
    }, this.deleteKeyPair = async (i) => {
      this.isInitialized(), await this.keychain.del(i);
    }, this.deleteSymKey = async (i) => {
      this.isInitialized(), await this.keychain.del(i);
    }, this.encode = async (i, s, o) => {
      this.isInitialized();
      const a = H8(o), u = $o(s);
      if (Vx(a)) return Az(u, o == null ? void 0 : o.encoding);
      if (Kx(a)) {
        const w = a.senderPublicKey, A = a.receiverPublicKey;
        i = await this.generateSharedKey(w, A);
      }
      const l = this.getSymKey(i), { type: d, senderPublicKey: p } = a;
      return Sz({ type: d, symKey: l, message: u, senderPublicKey: p, encoding: o == null ? void 0 : o.encoding });
    }, this.decode = async (i, s, o) => {
      this.isInitialized();
      const a = Iz(s, o);
      if (Vx(a)) {
        const u = Mz(s, o == null ? void 0 : o.encoding);
        return fc(u);
      }
      if (Kx(a)) {
        const u = a.receiverPublicKey, l = a.senderPublicKey;
        i = await this.generateSharedKey(u, l);
      }
      try {
        const u = this.getSymKey(i), l = Pz({ symKey: u, encoded: s, encoding: o == null ? void 0 : o.encoding });
        return fc(l);
      } catch (u) {
        this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`), this.logger.error(u);
      }
    }, this.getPayloadType = (i, s = ha) => {
      const o = El({ encoded: i, encoding: s });
      return dc(o.type);
    }, this.getPayloadSenderPublicKey = (i, s = ha) => {
      const o = El({ encoded: i, encoding: s });
      return o.senderPublicKey ? On(o.senderPublicKey, ai) : void 0;
    }, this.core = e, this.logger = ci(r, this.name), this.keychain = n || new ZK(this.core, this.logger);
  }
  get context() {
    return Ai(this.logger);
  }
  async setPrivateKey(e, r) {
    return await this.keychain.set(e, r), e;
  }
  getPrivateKey(e) {
    return this.keychain.get(e);
  }
  async getClientSeed() {
    let e = "";
    try {
      e = this.keychain.get(h3);
    } catch {
      e = I1(), await this.keychain.set(h3, e);
    }
    return XK(e, "base16");
  }
  getSymKey(e) {
    return this.keychain.get(e);
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
};
class eV extends Xk {
  constructor(e, r) {
    super(e, r), this.logger = e, this.core = r, this.messages = /* @__PURE__ */ new Map(), this.name = QW, this.version = eH, this.initialized = !1, this.storagePrefix = Qs, this.init = async () => {
      if (!this.initialized) {
        this.logger.trace("Initialized");
        try {
          const n = await this.getRelayerMessages();
          typeof n < "u" && (this.messages = n), this.logger.debug(`Successfully Restored records for ${this.name}`), this.logger.trace({ type: "method", method: "restore", size: this.messages.size });
        } catch (n) {
          this.logger.debug(`Failed to Restore records for ${this.name}`), this.logger.error(n);
        } finally {
          this.initialized = !0;
        }
      }
    }, this.set = async (n, i) => {
      this.isInitialized();
      const s = xo(i);
      let o = this.messages.get(n);
      return typeof o > "u" && (o = {}), typeof o[s] < "u" || (o[s] = i, this.messages.set(n, o), await this.persist()), s;
    }, this.get = (n) => {
      this.isInitialized();
      let i = this.messages.get(n);
      return typeof i > "u" && (i = {}), i;
    }, this.has = (n, i) => {
      this.isInitialized();
      const s = this.get(n), o = xo(i);
      return typeof s[o] < "u";
    }, this.del = async (n) => {
      this.isInitialized(), this.messages.delete(n), await this.persist();
    }, this.logger = ci(e, this.name), this.core = r;
  }
  get context() {
    return Ai(this.logger);
  }
  get storageKey() {
    return this.storagePrefix + this.version + this.core.customStoragePrefix + "//" + this.name;
  }
  async setRelayerMessages(e) {
    await this.core.storage.setItem(this.storageKey, N8(e));
  }
  async getRelayerMessages() {
    const e = await this.core.storage.getItem(this.storageKey);
    return typeof e < "u" ? L8(e) : void 0;
  }
  async persist() {
    await this.setRelayerMessages(this.messages);
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
}
class tV extends Zk {
  constructor(e, r) {
    super(e, r), this.relayer = e, this.logger = r, this.events = new rs.EventEmitter(), this.name = rH, this.queue = /* @__PURE__ */ new Map(), this.publishTimeout = mt.toMiliseconds(mt.ONE_MINUTE), this.failedPublishTimeout = mt.toMiliseconds(mt.ONE_SECOND), this.needsTransportRestart = !1, this.publish = async (n, i, s) => {
      var o;
      this.logger.debug("Publishing Payload"), this.logger.trace({ type: "method", method: "publish", params: { topic: n, message: i, opts: s } });
      const a = (s == null ? void 0 : s.ttl) || tH, u = C1(s), l = (s == null ? void 0 : s.prompt) || !1, d = (s == null ? void 0 : s.tag) || 0, p = (s == null ? void 0 : s.id) || nc().toString(), w = { topic: n, message: i, opts: { ttl: a, relay: u, prompt: l, tag: d, id: p, attestation: s == null ? void 0 : s.attestation } }, A = `Failed to publish payload, please try again. id:${p} tag:${d}`, M = Date.now();
      let N, L = 1;
      try {
        for (; N === void 0; ) {
          if (Date.now() - M > this.publishTimeout) throw new Error(A);
          this.logger.trace({ id: p, attempts: L }, `publisher.publish - attempt ${L}`), N = await await du(this.rpcPublish(n, i, a, u, l, d, p, s == null ? void 0 : s.attestation).catch((B) => this.logger.warn(B)), this.publishTimeout, A), L++, N || await new Promise((B) => setTimeout(B, this.failedPublishTimeout));
        }
        this.relayer.events.emit(oi.publish, w), this.logger.debug("Successfully Published Payload"), this.logger.trace({ type: "method", method: "publish", params: { id: p, topic: n, message: i, opts: s } });
      } catch (B) {
        if (this.logger.debug("Failed to Publish Payload"), this.logger.error(B), (o = s == null ? void 0 : s.internal) != null && o.throwOnFailedPublish) throw B;
        this.queue.set(p, w);
      }
    }, this.on = (n, i) => {
      this.events.on(n, i);
    }, this.once = (n, i) => {
      this.events.once(n, i);
    }, this.off = (n, i) => {
      this.events.off(n, i);
    }, this.removeListener = (n, i) => {
      this.events.removeListener(n, i);
    }, this.relayer = e, this.logger = ci(r, this.name), this.registerEventListeners();
  }
  get context() {
    return Ai(this.logger);
  }
  rpcPublish(e, r, n, i, s, o, a, u) {
    var l, d, p, w;
    const A = { method: Bf(i.protocol).publish, params: { topic: e, message: r, ttl: n, prompt: s, tag: o, attestation: u }, id: a };
    return mi((l = A.params) == null ? void 0 : l.prompt) && ((d = A.params) == null || delete d.prompt), mi((p = A.params) == null ? void 0 : p.tag) && ((w = A.params) == null || delete w.tag), this.logger.debug("Outgoing Relay Payload"), this.logger.trace({ type: "message", direction: "outgoing", request: A }), this.relayer.request(A);
  }
  removeRequestFromQueue(e) {
    this.queue.delete(e);
  }
  checkQueue() {
    this.queue.forEach(async (e) => {
      const { topic: r, message: n, opts: i } = e;
      await this.publish(r, n, i);
    });
  }
  registerEventListeners() {
    this.relayer.core.heartbeat.on(Ou.pulse, () => {
      if (this.needsTransportRestart) {
        this.needsTransportRestart = !1, this.relayer.events.emit(oi.connection_stalled);
        return;
      }
      this.checkQueue();
    }), this.relayer.on(oi.message_ack, (e) => {
      this.removeRequestFromQueue(e.id.toString());
    });
  }
}
class rV {
  constructor() {
    this.map = /* @__PURE__ */ new Map(), this.set = (e, r) => {
      const n = this.get(e);
      this.exists(e, r) || this.map.set(e, [...n, r]);
    }, this.get = (e) => this.map.get(e) || [], this.exists = (e, r) => this.get(e).includes(r), this.delete = (e, r) => {
      if (typeof r > "u") {
        this.map.delete(e);
        return;
      }
      if (!this.map.has(e)) return;
      const n = this.get(e);
      if (!this.exists(e, r)) return;
      const i = n.filter((s) => s !== r);
      if (!i.length) {
        this.map.delete(e);
        return;
      }
      this.map.set(e, i);
    }, this.clear = () => {
      this.map.clear();
    };
  }
  get topics() {
    return Array.from(this.map.keys());
  }
}
var nV = Object.defineProperty, iV = Object.defineProperties, sV = Object.getOwnPropertyDescriptors, w3 = Object.getOwnPropertySymbols, oV = Object.prototype.hasOwnProperty, aV = Object.prototype.propertyIsEnumerable, x3 = (t, e, r) => e in t ? nV(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, Cf = (t, e) => {
  for (var r in e || (e = {})) oV.call(e, r) && x3(t, r, e[r]);
  if (w3) for (var r of w3(e)) aV.call(e, r) && x3(t, r, e[r]);
  return t;
}, gm = (t, e) => iV(t, sV(e));
class cV extends t$ {
  constructor(e, r) {
    super(e, r), this.relayer = e, this.logger = r, this.subscriptions = /* @__PURE__ */ new Map(), this.topicMap = new rV(), this.events = new rs.EventEmitter(), this.name = uH, this.version = fH, this.pending = /* @__PURE__ */ new Map(), this.cached = [], this.initialized = !1, this.pendingSubscriptionWatchLabel = "pending_sub_watch_label", this.pollingInterval = 20, this.storagePrefix = Qs, this.subscribeTimeout = mt.toMiliseconds(mt.ONE_MINUTE), this.restartInProgress = !1, this.batchSubscribeTopicsLimit = 500, this.pendingBatchMessages = [], this.init = async () => {
      this.initialized || (this.logger.trace("Initialized"), this.registerEventListeners(), this.clientId = await this.relayer.core.crypto.getClientId(), await this.restore()), this.initialized = !0;
    }, this.subscribe = async (n, i) => {
      this.isInitialized(), this.logger.debug("Subscribing Topic"), this.logger.trace({ type: "method", method: "subscribe", params: { topic: n, opts: i } });
      try {
        const s = C1(i), o = { topic: n, relay: s, transportType: i == null ? void 0 : i.transportType };
        this.pending.set(n, o);
        const a = await this.rpcSubscribe(n, s, i);
        return typeof a == "string" && (this.onSubscribe(a, o), this.logger.debug("Successfully Subscribed Topic"), this.logger.trace({ type: "method", method: "subscribe", params: { topic: n, opts: i } })), a;
      } catch (s) {
        throw this.logger.debug("Failed to Subscribe Topic"), this.logger.error(s), s;
      }
    }, this.unsubscribe = async (n, i) => {
      await this.restartToComplete(), this.isInitialized(), typeof (i == null ? void 0 : i.id) < "u" ? await this.unsubscribeById(n, i.id, i) : await this.unsubscribeByTopic(n, i);
    }, this.isSubscribed = async (n) => {
      if (this.topics.includes(n)) return !0;
      const i = `${this.pendingSubscriptionWatchLabel}_${n}`;
      return await new Promise((s, o) => {
        const a = new mt.Watch();
        a.start(i);
        const u = setInterval(() => {
          !this.pending.has(n) && this.topics.includes(n) && (clearInterval(u), a.stop(i), s(!0)), a.elapsed(i) >= lH && (clearInterval(u), a.stop(i), o(new Error("Subscription resolution timeout")));
        }, this.pollingInterval);
      }).catch(() => !1);
    }, this.on = (n, i) => {
      this.events.on(n, i);
    }, this.once = (n, i) => {
      this.events.once(n, i);
    }, this.off = (n, i) => {
      this.events.off(n, i);
    }, this.removeListener = (n, i) => {
      this.events.removeListener(n, i);
    }, this.start = async () => {
      await this.onConnect();
    }, this.stop = async () => {
      await this.onDisconnect();
    }, this.restart = async () => {
      this.restartInProgress = !0, await this.restore(), await this.reset(), this.restartInProgress = !1;
    }, this.relayer = e, this.logger = ci(r, this.name), this.clientId = "";
  }
  get context() {
    return Ai(this.logger);
  }
  get storageKey() {
    return this.storagePrefix + this.version + this.relayer.core.customStoragePrefix + "//" + this.name;
  }
  get length() {
    return this.subscriptions.size;
  }
  get ids() {
    return Array.from(this.subscriptions.keys());
  }
  get values() {
    return Array.from(this.subscriptions.values());
  }
  get topics() {
    return this.topicMap.topics;
  }
  hasSubscription(e, r) {
    let n = !1;
    try {
      n = this.getSubscription(e).topic === r;
    } catch {
    }
    return n;
  }
  onEnable() {
    this.cached = [], this.initialized = !0;
  }
  onDisable() {
    this.cached = this.values, this.subscriptions.clear(), this.topicMap.clear();
  }
  async unsubscribeByTopic(e, r) {
    const n = this.topicMap.get(e);
    await Promise.all(n.map(async (i) => await this.unsubscribeById(e, i, r)));
  }
  async unsubscribeById(e, r, n) {
    this.logger.debug("Unsubscribing Topic"), this.logger.trace({ type: "method", method: "unsubscribe", params: { topic: e, id: r, opts: n } });
    try {
      const i = C1(n);
      await this.rpcUnsubscribe(e, r, i);
      const s = Or("USER_DISCONNECTED", `${this.name}, ${e}`);
      await this.onUnsubscribe(e, r, s), this.logger.debug("Successfully Unsubscribed Topic"), this.logger.trace({ type: "method", method: "unsubscribe", params: { topic: e, id: r, opts: n } });
    } catch (i) {
      throw this.logger.debug("Failed to Unsubscribe Topic"), this.logger.error(i), i;
    }
  }
  async rpcSubscribe(e, r, n) {
    var i;
    (n == null ? void 0 : n.transportType) === zr.relay && await this.restartToComplete();
    const s = { method: Bf(r.protocol).subscribe, params: { topic: e } };
    this.logger.debug("Outgoing Relay Payload"), this.logger.trace({ type: "payload", direction: "outgoing", request: s });
    const o = (i = n == null ? void 0 : n.internal) == null ? void 0 : i.throwOnFailedPublish;
    try {
      const a = xo(e + this.clientId);
      if ((n == null ? void 0 : n.transportType) === zr.link_mode) return setTimeout(() => {
        (this.relayer.connected || this.relayer.connecting) && this.relayer.request(s).catch((l) => this.logger.warn(l));
      }, mt.toMiliseconds(mt.ONE_SECOND)), a;
      const u = await du(this.relayer.request(s).catch((l) => this.logger.warn(l)), this.subscribeTimeout, `Subscribing to ${e} failed, please try again`);
      if (!u && o) throw new Error(`Subscribing to ${e} failed, please try again`);
      return u ? a : null;
    } catch (a) {
      if (this.logger.debug("Outgoing Relay Subscribe Payload stalled"), this.relayer.events.emit(oi.connection_stalled), o) throw a;
    }
    return null;
  }
  async rpcBatchSubscribe(e) {
    if (!e.length) return;
    const r = e[0].relay, n = { method: Bf(r.protocol).batchSubscribe, params: { topics: e.map((i) => i.topic) } };
    this.logger.debug("Outgoing Relay Payload"), this.logger.trace({ type: "payload", direction: "outgoing", request: n });
    try {
      return await await du(this.relayer.request(n).catch((i) => this.logger.warn(i)), this.subscribeTimeout);
    } catch {
      this.relayer.events.emit(oi.connection_stalled);
    }
  }
  async rpcBatchFetchMessages(e) {
    if (!e.length) return;
    const r = e[0].relay, n = { method: Bf(r.protocol).batchFetchMessages, params: { topics: e.map((s) => s.topic) } };
    this.logger.debug("Outgoing Relay Payload"), this.logger.trace({ type: "payload", direction: "outgoing", request: n });
    let i;
    try {
      i = await await du(this.relayer.request(n).catch((s) => this.logger.warn(s)), this.subscribeTimeout);
    } catch {
      this.relayer.events.emit(oi.connection_stalled);
    }
    return i;
  }
  rpcUnsubscribe(e, r, n) {
    const i = { method: Bf(n.protocol).unsubscribe, params: { topic: e, id: r } };
    return this.logger.debug("Outgoing Relay Payload"), this.logger.trace({ type: "payload", direction: "outgoing", request: i }), this.relayer.request(i);
  }
  onSubscribe(e, r) {
    this.setSubscription(e, gm(Cf({}, r), { id: e })), this.pending.delete(r.topic);
  }
  onBatchSubscribe(e) {
    e.length && e.forEach((r) => {
      this.setSubscription(r.id, Cf({}, r)), this.pending.delete(r.topic);
    });
  }
  async onUnsubscribe(e, r, n) {
    this.events.removeAllListeners(r), this.hasSubscription(r, e) && this.deleteSubscription(r, n), await this.relayer.messages.del(e);
  }
  async setRelayerSubscriptions(e) {
    await this.relayer.core.storage.setItem(this.storageKey, e);
  }
  async getRelayerSubscriptions() {
    return await this.relayer.core.storage.getItem(this.storageKey);
  }
  setSubscription(e, r) {
    this.logger.debug("Setting subscription"), this.logger.trace({ type: "method", method: "setSubscription", id: e, subscription: r }), this.addSubscription(e, r);
  }
  addSubscription(e, r) {
    this.subscriptions.set(e, Cf({}, r)), this.topicMap.set(r.topic, e), this.events.emit(Us.created, r);
  }
  getSubscription(e) {
    this.logger.debug("Getting subscription"), this.logger.trace({ type: "method", method: "getSubscription", id: e });
    const r = this.subscriptions.get(e);
    if (!r) {
      const { message: n } = ft("NO_MATCHING_KEY", `${this.name}: ${e}`);
      throw new Error(n);
    }
    return r;
  }
  deleteSubscription(e, r) {
    this.logger.debug("Deleting subscription"), this.logger.trace({ type: "method", method: "deleteSubscription", id: e, reason: r });
    const n = this.getSubscription(e);
    this.subscriptions.delete(e), this.topicMap.delete(n.topic, e), this.events.emit(Us.deleted, gm(Cf({}, n), { reason: r }));
  }
  async persist() {
    await this.setRelayerSubscriptions(this.values), this.events.emit(Us.sync);
  }
  async reset() {
    if (this.cached.length) {
      const e = Math.ceil(this.cached.length / this.batchSubscribeTopicsLimit);
      for (let r = 0; r < e; r++) {
        const n = this.cached.splice(0, this.batchSubscribeTopicsLimit);
        await this.batchFetchMessages(n), await this.batchSubscribe(n);
      }
    }
    this.events.emit(Us.resubscribed);
  }
  async restore() {
    try {
      const e = await this.getRelayerSubscriptions();
      if (typeof e > "u" || !e.length) return;
      if (this.subscriptions.size) {
        const { message: r } = ft("RESTORE_WILL_OVERRIDE", this.name);
        throw this.logger.error(r), this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`), new Error(r);
      }
      this.cached = e, this.logger.debug(`Successfully Restored subscriptions for ${this.name}`), this.logger.trace({ type: "method", method: "restore", subscriptions: this.values });
    } catch (e) {
      this.logger.debug(`Failed to Restore subscriptions for ${this.name}`), this.logger.error(e);
    }
  }
  async batchSubscribe(e) {
    if (!e.length) return;
    const r = await this.rpcBatchSubscribe(e);
    pc(r) && this.onBatchSubscribe(r.map((n, i) => gm(Cf({}, e[i]), { id: n })));
  }
  async batchFetchMessages(e) {
    if (!e.length) return;
    this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);
    const r = await this.rpcBatchFetchMessages(e);
    r && r.messages && (this.pendingBatchMessages = this.pendingBatchMessages.concat(r.messages));
  }
  async onConnect() {
    await this.restart(), this.onEnable();
  }
  onDisconnect() {
    this.onDisable();
  }
  async checkPending() {
    if (!this.initialized || !this.relayer.connected) return;
    const e = [];
    this.pending.forEach((r) => {
      e.push(r);
    }), await this.batchSubscribe(e), this.pendingBatchMessages.length && (await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages), this.pendingBatchMessages = []);
  }
  registerEventListeners() {
    this.relayer.core.heartbeat.on(Ou.pulse, async () => {
      await this.checkPending();
    }), this.events.on(Us.created, async (e) => {
      const r = Us.created;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, data: e }), await this.persist();
    }), this.events.on(Us.deleted, async (e) => {
      const r = Us.deleted;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, data: e }), await this.persist();
    });
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
  async restartToComplete() {
    !this.relayer.connected && !this.relayer.connecting && await this.relayer.transportOpen(), this.restartInProgress && await new Promise((e) => {
      const r = setInterval(() => {
        this.restartInProgress || (clearInterval(r), e());
      }, this.pollingInterval);
    });
  }
}
var uV = Object.defineProperty, _3 = Object.getOwnPropertySymbols, fV = Object.prototype.hasOwnProperty, lV = Object.prototype.propertyIsEnumerable, E3 = (t, e, r) => e in t ? uV(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, S3 = (t, e) => {
  for (var r in e || (e = {})) fV.call(e, r) && E3(t, r, e[r]);
  if (_3) for (var r of _3(e)) lV.call(e, r) && E3(t, r, e[r]);
  return t;
};
class hV extends Qk {
  constructor(e) {
    super(e), this.protocol = "wc", this.version = 2, this.events = new rs.EventEmitter(), this.name = iH, this.transportExplicitlyClosed = !1, this.initialized = !1, this.connectionAttemptInProgress = !1, this.connectionStatusPollingInterval = 20, this.staleConnectionErrors = ["socket hang up", "stalled", "interrupted"], this.hasExperiencedNetworkDisruption = !1, this.requestsInFlight = /* @__PURE__ */ new Map(), this.heartBeatTimeout = mt.toMiliseconds(mt.THIRTY_SECONDS + mt.ONE_SECOND), this.request = async (r) => {
      var n, i;
      this.logger.debug("Publishing Request Payload");
      const s = r.id || nc().toString();
      await this.toEstablishConnection();
      try {
        const o = this.provider.request(r);
        this.requestsInFlight.set(s, { promise: o, request: r }), this.logger.trace({ id: s, method: r.method, topic: (n = r.params) == null ? void 0 : n.topic }, "relayer.request - attempt to publish...");
        const a = await new Promise(async (u, l) => {
          const d = () => {
            l(new Error(`relayer.request - publish interrupted, id: ${s}`));
          };
          this.provider.on(Vi.disconnect, d);
          const p = await o;
          this.provider.off(Vi.disconnect, d), u(p);
        });
        return this.logger.trace({ id: s, method: r.method, topic: (i = r.params) == null ? void 0 : i.topic }, "relayer.request - published"), a;
      } catch (o) {
        throw this.logger.debug(`Failed to Publish Request: ${s}`), o;
      } finally {
        this.requestsInFlight.delete(s);
      }
    }, this.resetPingTimeout = () => {
      if (c0()) try {
        clearTimeout(this.pingTimeout), this.pingTimeout = setTimeout(() => {
          var r, n, i;
          (i = (n = (r = this.provider) == null ? void 0 : r.connection) == null ? void 0 : n.socket) == null || i.terminate();
        }, this.heartBeatTimeout);
      } catch (r) {
        this.logger.warn(r);
      }
    }, this.onPayloadHandler = (r) => {
      this.onProviderPayload(r), this.resetPingTimeout();
    }, this.onConnectHandler = () => {
      this.logger.trace("relayer connected"), this.startPingTimeout(), this.events.emit(oi.connect);
    }, this.onDisconnectHandler = () => {
      this.logger.trace("relayer disconnected"), this.onProviderDisconnect();
    }, this.onProviderErrorHandler = (r) => {
      this.logger.error(r), this.events.emit(oi.error, r), this.logger.info("Fatal socket error received, closing transport"), this.transportClose();
    }, this.registerProviderListeners = () => {
      this.provider.on(Vi.payload, this.onPayloadHandler), this.provider.on(Vi.connect, this.onConnectHandler), this.provider.on(Vi.disconnect, this.onDisconnectHandler), this.provider.on(Vi.error, this.onProviderErrorHandler);
    }, this.core = e.core, this.logger = typeof e.logger < "u" && typeof e.logger != "string" ? ci(e.logger, this.name) : ql($0({ level: e.logger || nH })), this.messages = new eV(this.logger, e.core), this.subscriber = new cV(this, this.logger), this.publisher = new tV(this, this.logger), this.relayUrl = (e == null ? void 0 : e.relayUrl) || iE, this.projectId = e.projectId, this.bundleId = jq(), this.provider = {};
  }
  async init() {
    if (this.logger.trace("Initialized"), this.registerEventListeners(), await Promise.all([this.messages.init(), this.subscriber.init()]), this.initialized = !0, this.subscriber.cached.length > 0) try {
      await this.transportOpen();
    } catch (e) {
      this.logger.warn(e);
    }
  }
  get context() {
    return Ai(this.logger);
  }
  get connected() {
    var e, r, n;
    return ((n = (r = (e = this.provider) == null ? void 0 : e.connection) == null ? void 0 : r.socket) == null ? void 0 : n.readyState) === 1;
  }
  get connecting() {
    var e, r, n;
    return ((n = (r = (e = this.provider) == null ? void 0 : e.connection) == null ? void 0 : r.socket) == null ? void 0 : n.readyState) === 0;
  }
  async publish(e, r, n) {
    this.isInitialized(), await this.publisher.publish(e, r, n), await this.recordMessageEvent({ topic: e, message: r, publishedAt: Date.now(), transportType: zr.relay });
  }
  async subscribe(e, r) {
    var n, i, s;
    this.isInitialized(), (r == null ? void 0 : r.transportType) === "relay" && await this.toEstablishConnection();
    const o = typeof ((n = r == null ? void 0 : r.internal) == null ? void 0 : n.throwOnFailedPublish) > "u" ? !0 : (i = r == null ? void 0 : r.internal) == null ? void 0 : i.throwOnFailedPublish;
    let a = ((s = this.subscriber.topicMap.get(e)) == null ? void 0 : s[0]) || "", u;
    const l = (d) => {
      d.topic === e && (this.subscriber.off(Us.created, l), u());
    };
    return await Promise.all([new Promise((d) => {
      u = d, this.subscriber.on(Us.created, l);
    }), new Promise(async (d, p) => {
      a = await this.subscriber.subscribe(e, S3({ internal: { throwOnFailedPublish: o } }, r)).catch((w) => {
        o && p(w);
      }) || a, d();
    })]), a;
  }
  async unsubscribe(e, r) {
    this.isInitialized(), await this.subscriber.unsubscribe(e, r);
  }
  on(e, r) {
    this.events.on(e, r);
  }
  once(e, r) {
    this.events.once(e, r);
  }
  off(e, r) {
    this.events.off(e, r);
  }
  removeListener(e, r) {
    this.events.removeListener(e, r);
  }
  async transportDisconnect() {
    if (!this.hasExperiencedNetworkDisruption && this.connected && this.requestsInFlight.size > 0) try {
      await Promise.all(Array.from(this.requestsInFlight.values()).map((e) => e.promise));
    } catch (e) {
      this.logger.warn(e);
    }
    this.provider.disconnect && (this.hasExperiencedNetworkDisruption || this.connected) ? await du(this.provider.disconnect(), 2e3, "provider.disconnect()").catch(() => this.onProviderDisconnect()) : this.onProviderDisconnect();
  }
  async transportClose() {
    this.transportExplicitlyClosed = !0, await this.transportDisconnect();
  }
  async transportOpen(e) {
    await this.confirmOnlineStateOrThrow(), e && e !== this.relayUrl && (this.relayUrl = e, await this.transportDisconnect()), await this.createProvider(), this.connectionAttemptInProgress = !0, this.transportExplicitlyClosed = !1;
    try {
      await new Promise(async (r, n) => {
        const i = () => {
          this.provider.off(Vi.disconnect, i), n(new Error("Connection interrupted while trying to subscribe"));
        };
        this.provider.on(Vi.disconnect, i), await du(this.provider.connect(), mt.toMiliseconds(mt.ONE_MINUTE), `Socket stalled when trying to connect to ${this.relayUrl}`).catch((s) => {
          n(s);
        }).finally(() => {
          clearTimeout(this.reconnectTimeout), this.reconnectTimeout = void 0;
        }), this.subscriber.start().catch((s) => {
          this.logger.error(s), this.onDisconnectHandler();
        }), this.hasExperiencedNetworkDisruption = !1, r();
      });
    } catch (r) {
      this.logger.error(r);
      const n = r;
      if (this.hasExperiencedNetworkDisruption = !0, !this.isConnectionStalled(n.message)) throw r;
    } finally {
      this.connectionAttemptInProgress = !1;
    }
  }
  async restartTransport(e) {
    this.connectionAttemptInProgress || (this.relayUrl = e || this.relayUrl, await this.confirmOnlineStateOrThrow(), await this.transportClose(), await this.transportOpen());
  }
  async confirmOnlineStateOrThrow() {
    if (!await i3()) throw new Error("No internet connection detected. Please restart your network and try again.");
  }
  async handleBatchMessageEvents(e) {
    if ((e == null ? void 0 : e.length) === 0) {
      this.logger.trace("Batch message events is empty. Ignoring...");
      return;
    }
    const r = e.sort((n, i) => n.publishedAt - i.publishedAt);
    this.logger.trace(`Batch of ${r.length} message events sorted`);
    for (const n of r) try {
      await this.onMessageEvent(n);
    } catch (i) {
      this.logger.warn(i);
    }
    this.logger.trace(`Batch of ${r.length} message events processed`);
  }
  async onLinkMessageEvent(e, r) {
    const { topic: n } = e;
    if (!r.sessionExists) {
      const i = En(mt.FIVE_MINUTES), s = { topic: n, expiry: i, relay: { protocol: "irn" }, active: !1 };
      await this.core.pairing.pairings.set(n, s);
    }
    this.events.emit(oi.message, e), await this.recordMessageEvent(e);
  }
  startPingTimeout() {
    var e, r, n, i, s;
    if (c0()) try {
      (r = (e = this.provider) == null ? void 0 : e.connection) != null && r.socket && ((s = (i = (n = this.provider) == null ? void 0 : n.connection) == null ? void 0 : i.socket) == null || s.once("ping", () => {
        this.resetPingTimeout();
      })), this.resetPingTimeout();
    } catch (o) {
      this.logger.warn(o);
    }
  }
  isConnectionStalled(e) {
    return this.staleConnectionErrors.some((r) => e.includes(r));
  }
  async createProvider() {
    this.provider.connection && this.unregisterProviderListeners();
    const e = await this.core.crypto.signJWT(this.relayUrl);
    this.provider = new as(new WW(Wq({ sdkVersion: T1, protocol: this.protocol, version: this.version, relayUrl: this.relayUrl, projectId: this.projectId, auth: e, useOnCloseEvent: !0, bundleId: this.bundleId }))), this.registerProviderListeners();
  }
  async recordMessageEvent(e) {
    const { topic: r, message: n } = e;
    await this.messages.set(r, n);
  }
  async shouldIgnoreMessageEvent(e) {
    const { topic: r, message: n } = e;
    if (!n || n.length === 0) return this.logger.debug(`Ignoring invalid/empty message: ${n}`), !0;
    if (!await this.subscriber.isSubscribed(r)) return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`), !0;
    const i = this.messages.has(r, n);
    return i && this.logger.debug(`Ignoring duplicate message: ${n}`), i;
  }
  async onProviderPayload(e) {
    if (this.logger.debug("Incoming Relay Payload"), this.logger.trace({ type: "payload", direction: "incoming", payload: e }), fb(e)) {
      if (!e.method.endsWith(sH)) return;
      const r = e.params, { topic: n, message: i, publishedAt: s, attestation: o } = r.data, a = { topic: n, message: i, publishedAt: s, transportType: zr.relay, attestation: o };
      this.logger.debug("Emitting Relayer Payload"), this.logger.trace(S3({ type: "event", event: r.id }, a)), this.events.emit(r.id, a), await this.acknowledgePayload(e), await this.onMessageEvent(a);
    } else ip(e) && this.events.emit(oi.message_ack, e);
  }
  async onMessageEvent(e) {
    await this.shouldIgnoreMessageEvent(e) || (this.events.emit(oi.message, e), await this.recordMessageEvent(e));
  }
  async acknowledgePayload(e) {
    const r = rp(e.id, !0);
    await this.provider.connection.send(r);
  }
  unregisterProviderListeners() {
    this.provider.off(Vi.payload, this.onPayloadHandler), this.provider.off(Vi.connect, this.onConnectHandler), this.provider.off(Vi.disconnect, this.onDisconnectHandler), this.provider.off(Vi.error, this.onProviderErrorHandler), clearTimeout(this.pingTimeout);
  }
  async registerEventListeners() {
    let e = await i3();
    xW(async (r) => {
      e !== r && (e = r, r ? await this.restartTransport().catch((n) => this.logger.error(n)) : (this.hasExperiencedNetworkDisruption = !0, await this.transportDisconnect(), this.transportExplicitlyClosed = !1));
    });
  }
  async onProviderDisconnect() {
    await this.subscriber.stop(), this.requestsInFlight.clear(), clearTimeout(this.pingTimeout), this.events.emit(oi.disconnect), this.connectionAttemptInProgress = !1, !this.transportExplicitlyClosed && (this.reconnectTimeout || (this.reconnectTimeout = setTimeout(async () => {
      await this.transportOpen().catch((e) => this.logger.error(e));
    }, mt.toMiliseconds(oH))));
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
  async toEstablishConnection() {
    await this.confirmOnlineStateOrThrow(), !this.connected && (this.connectionAttemptInProgress && await new Promise((e) => {
      const r = setInterval(() => {
        this.connected && (clearInterval(r), e());
      }, this.connectionStatusPollingInterval);
    }), await this.transportOpen());
  }
}
var dV = Object.defineProperty, A3 = Object.getOwnPropertySymbols, pV = Object.prototype.hasOwnProperty, gV = Object.prototype.propertyIsEnumerable, P3 = (t, e, r) => e in t ? dV(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, M3 = (t, e) => {
  for (var r in e || (e = {})) pV.call(e, r) && P3(t, r, e[r]);
  if (A3) for (var r of A3(e)) gV.call(e, r) && P3(t, r, e[r]);
  return t;
};
class Ec extends e$ {
  constructor(e, r, n, i = Qs, s = void 0) {
    super(e, r, n, i), this.core = e, this.logger = r, this.name = n, this.map = /* @__PURE__ */ new Map(), this.version = aH, this.cached = [], this.initialized = !1, this.storagePrefix = Qs, this.recentlyDeleted = [], this.recentlyDeletedLimit = 200, this.init = async () => {
      this.initialized || (this.logger.trace("Initialized"), await this.restore(), this.cached.forEach((o) => {
        this.getKey && o !== null && !mi(o) ? this.map.set(this.getKey(o), o) : Zz(o) ? this.map.set(o.id, o) : Qz(o) && this.map.set(o.topic, o);
      }), this.cached = [], this.initialized = !0);
    }, this.set = async (o, a) => {
      this.isInitialized(), this.map.has(o) ? await this.update(o, a) : (this.logger.debug("Setting value"), this.logger.trace({ type: "method", method: "set", key: o, value: a }), this.map.set(o, a), await this.persist());
    }, this.get = (o) => (this.isInitialized(), this.logger.debug("Getting value"), this.logger.trace({ type: "method", method: "get", key: o }), this.getData(o)), this.getAll = (o) => (this.isInitialized(), o ? this.values.filter((a) => Object.keys(o).every((u) => KW(a[u], o[u]))) : this.values), this.update = async (o, a) => {
      this.isInitialized(), this.logger.debug("Updating value"), this.logger.trace({ type: "method", method: "update", key: o, update: a });
      const u = M3(M3({}, this.getData(o)), a);
      this.map.set(o, u), await this.persist();
    }, this.delete = async (o, a) => {
      this.isInitialized(), this.map.has(o) && (this.logger.debug("Deleting value"), this.logger.trace({ type: "method", method: "delete", key: o, reason: a }), this.map.delete(o), this.addToRecentlyDeleted(o), await this.persist());
    }, this.logger = ci(r, this.name), this.storagePrefix = i, this.getKey = s;
  }
  get context() {
    return Ai(this.logger);
  }
  get storageKey() {
    return this.storagePrefix + this.version + this.core.customStoragePrefix + "//" + this.name;
  }
  get length() {
    return this.map.size;
  }
  get keys() {
    return Array.from(this.map.keys());
  }
  get values() {
    return Array.from(this.map.values());
  }
  addToRecentlyDeleted(e) {
    this.recentlyDeleted.push(e), this.recentlyDeleted.length >= this.recentlyDeletedLimit && this.recentlyDeleted.splice(0, this.recentlyDeletedLimit / 2);
  }
  async setDataStore(e) {
    await this.core.storage.setItem(this.storageKey, e);
  }
  async getDataStore() {
    return await this.core.storage.getItem(this.storageKey);
  }
  getData(e) {
    const r = this.map.get(e);
    if (!r) {
      if (this.recentlyDeleted.includes(e)) {
        const { message: i } = ft("MISSING_OR_INVALID", `Record was recently deleted - ${this.name}: ${e}`);
        throw this.logger.error(i), new Error(i);
      }
      const { message: n } = ft("NO_MATCHING_KEY", `${this.name}: ${e}`);
      throw this.logger.error(n), new Error(n);
    }
    return r;
  }
  async persist() {
    await this.setDataStore(this.values);
  }
  async restore() {
    try {
      const e = await this.getDataStore();
      if (typeof e > "u" || !e.length) return;
      if (this.map.size) {
        const { message: r } = ft("RESTORE_WILL_OVERRIDE", this.name);
        throw this.logger.error(r), new Error(r);
      }
      this.cached = e, this.logger.debug(`Successfully Restored value for ${this.name}`), this.logger.trace({ type: "method", method: "restore", value: this.values });
    } catch (e) {
      this.logger.debug(`Failed to Restore value for ${this.name}`), this.logger.error(e);
    }
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
}
class mV {
  constructor(e, r) {
    this.core = e, this.logger = r, this.name = hH, this.version = dH, this.events = new kv(), this.initialized = !1, this.storagePrefix = Qs, this.ignoredPayloadTypes = [Co], this.registeredMethods = [], this.init = async () => {
      this.initialized || (await this.pairings.init(), await this.cleanup(), this.registerRelayerEvents(), this.registerExpirerEvents(), this.initialized = !0, this.logger.trace("Initialized"));
    }, this.register = ({ methods: n }) => {
      this.isInitialized(), this.registeredMethods = [.../* @__PURE__ */ new Set([...this.registeredMethods, ...n])];
    }, this.create = async (n) => {
      this.isInitialized();
      const i = I1(), s = await this.core.crypto.setSymKey(i), o = En(mt.FIVE_MINUTES), a = { protocol: nE }, u = { topic: s, expiry: o, relay: a, active: !1, methods: n == null ? void 0 : n.methods }, l = Zx({ protocol: this.core.protocol, version: this.core.version, topic: s, symKey: i, relay: a, expiryTimestamp: o, methods: n == null ? void 0 : n.methods });
      return this.events.emit(Za.create, u), this.core.expirer.set(s, o), await this.pairings.set(s, u), await this.core.relayer.subscribe(s, { transportType: n == null ? void 0 : n.transportType }), { topic: s, uri: l };
    }, this.pair = async (n) => {
      this.isInitialized();
      const i = this.core.eventClient.createEvent({ properties: { topic: n == null ? void 0 : n.uri, trace: [Fs.pairing_started] } });
      this.isValidPair(n, i);
      const { topic: s, symKey: o, relay: a, expiryTimestamp: u, methods: l } = Xx(n.uri);
      i.props.properties.topic = s, i.addTrace(Fs.pairing_uri_validation_success), i.addTrace(Fs.pairing_uri_not_expired);
      let d;
      if (this.pairings.keys.includes(s)) {
        if (d = this.pairings.get(s), i.addTrace(Fs.existing_pairing), d.active) throw i.setError(wo.active_pairing_already_exists), new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);
        i.addTrace(Fs.pairing_not_expired);
      }
      const p = u || En(mt.FIVE_MINUTES), w = { topic: s, relay: a, expiry: p, active: !1, methods: l };
      this.core.expirer.set(s, p), await this.pairings.set(s, w), i.addTrace(Fs.store_new_pairing), n.activatePairing && await this.activate({ topic: s }), this.events.emit(Za.create, w), i.addTrace(Fs.emit_inactive_pairing), this.core.crypto.keychain.has(s) || await this.core.crypto.setSymKey(o, s), i.addTrace(Fs.subscribing_pairing_topic);
      try {
        await this.core.relayer.confirmOnlineStateOrThrow();
      } catch {
        i.setError(wo.no_internet_connection);
      }
      try {
        await this.core.relayer.subscribe(s, { relay: a });
      } catch (A) {
        throw i.setError(wo.subscribe_pairing_topic_failure), A;
      }
      return i.addTrace(Fs.subscribe_pairing_topic_success), w;
    }, this.activate = async ({ topic: n }) => {
      this.isInitialized();
      const i = En(mt.THIRTY_DAYS);
      this.core.expirer.set(n, i), await this.pairings.update(n, { active: !0, expiry: i });
    }, this.ping = async (n) => {
      this.isInitialized(), await this.isValidPing(n);
      const { topic: i } = n;
      if (this.pairings.keys.includes(i)) {
        const s = await this.sendRequest(i, "wc_pairingPing", {}), { done: o, resolve: a, reject: u } = Ga();
        this.events.once(br("pairing_ping", s), ({ error: l }) => {
          l ? u(l) : a();
        }), await o();
      }
    }, this.updateExpiry = async ({ topic: n, expiry: i }) => {
      this.isInitialized(), await this.pairings.update(n, { expiry: i });
    }, this.updateMetadata = async ({ topic: n, metadata: i }) => {
      this.isInitialized(), await this.pairings.update(n, { peerMetadata: i });
    }, this.getPairings = () => (this.isInitialized(), this.pairings.values), this.disconnect = async (n) => {
      this.isInitialized(), await this.isValidDisconnect(n);
      const { topic: i } = n;
      this.pairings.keys.includes(i) && (await this.sendRequest(i, "wc_pairingDelete", Or("USER_DISCONNECTED")), await this.deletePairing(i));
    }, this.formatUriFromPairing = (n) => {
      this.isInitialized();
      const { topic: i, relay: s, expiry: o, methods: a } = n, u = this.core.crypto.keychain.get(i);
      return Zx({ protocol: this.core.protocol, version: this.core.version, topic: i, symKey: u, relay: s, expiryTimestamp: o, methods: a });
    }, this.sendRequest = async (n, i, s) => {
      const o = da(i, s), a = await this.core.crypto.encode(n, o), u = Mf[i].req;
      return this.core.history.set(n, o), this.core.relayer.publish(n, a, u), o.id;
    }, this.sendResult = async (n, i, s) => {
      const o = rp(n, s), a = await this.core.crypto.encode(i, o), u = await this.core.history.get(i, n), l = Mf[u.request.method].res;
      await this.core.relayer.publish(i, a, l), await this.core.history.resolve(o);
    }, this.sendError = async (n, i, s) => {
      const o = np(n, s), a = await this.core.crypto.encode(i, o), u = await this.core.history.get(i, n), l = Mf[u.request.method] ? Mf[u.request.method].res : Mf.unregistered_method.res;
      await this.core.relayer.publish(i, a, l), await this.core.history.resolve(o);
    }, this.deletePairing = async (n, i) => {
      await this.core.relayer.unsubscribe(n), await Promise.all([this.pairings.delete(n, Or("USER_DISCONNECTED")), this.core.crypto.deleteSymKey(n), i ? Promise.resolve() : this.core.expirer.del(n)]);
    }, this.cleanup = async () => {
      const n = this.pairings.getAll().filter((i) => ca(i.expiry));
      await Promise.all(n.map((i) => this.deletePairing(i.topic)));
    }, this.onRelayEventRequest = (n) => {
      const { topic: i, payload: s } = n;
      switch (s.method) {
        case "wc_pairingPing":
          return this.onPairingPingRequest(i, s);
        case "wc_pairingDelete":
          return this.onPairingDeleteRequest(i, s);
        default:
          return this.onUnknownRpcMethodRequest(i, s);
      }
    }, this.onRelayEventResponse = async (n) => {
      const { topic: i, payload: s } = n, o = (await this.core.history.get(i, s.id)).request.method;
      switch (o) {
        case "wc_pairingPing":
          return this.onPairingPingResponse(i, s);
        default:
          return this.onUnknownRpcMethodResponse(o);
      }
    }, this.onPairingPingRequest = async (n, i) => {
      const { id: s } = i;
      try {
        this.isValidPing({ topic: n }), await this.sendResult(s, n, !0), this.events.emit(Za.ping, { id: s, topic: n });
      } catch (o) {
        await this.sendError(s, n, o), this.logger.error(o);
      }
    }, this.onPairingPingResponse = (n, i) => {
      const { id: s } = i;
      setTimeout(() => {
        js(i) ? this.events.emit(br("pairing_ping", s), {}) : Zi(i) && this.events.emit(br("pairing_ping", s), { error: i.error });
      }, 500);
    }, this.onPairingDeleteRequest = async (n, i) => {
      const { id: s } = i;
      try {
        this.isValidDisconnect({ topic: n }), await this.deletePairing(n), this.events.emit(Za.delete, { id: s, topic: n });
      } catch (o) {
        await this.sendError(s, n, o), this.logger.error(o);
      }
    }, this.onUnknownRpcMethodRequest = async (n, i) => {
      const { id: s, method: o } = i;
      try {
        if (this.registeredMethods.includes(o)) return;
        const a = Or("WC_METHOD_UNSUPPORTED", o);
        await this.sendError(s, n, a), this.logger.error(a);
      } catch (a) {
        await this.sendError(s, n, a), this.logger.error(a);
      }
    }, this.onUnknownRpcMethodResponse = (n) => {
      this.registeredMethods.includes(n) || this.logger.error(Or("WC_METHOD_UNSUPPORTED", n));
    }, this.isValidPair = (n, i) => {
      var s;
      if (!gi(n)) {
        const { message: a } = ft("MISSING_OR_INVALID", `pair() params: ${n}`);
        throw i.setError(wo.malformed_pairing_uri), new Error(a);
      }
      if (!Xz(n.uri)) {
        const { message: a } = ft("MISSING_OR_INVALID", `pair() uri: ${n.uri}`);
        throw i.setError(wo.malformed_pairing_uri), new Error(a);
      }
      const o = Xx(n == null ? void 0 : n.uri);
      if (!((s = o == null ? void 0 : o.relay) != null && s.protocol)) {
        const { message: a } = ft("MISSING_OR_INVALID", "pair() uri#relay-protocol");
        throw i.setError(wo.malformed_pairing_uri), new Error(a);
      }
      if (!(o != null && o.symKey)) {
        const { message: a } = ft("MISSING_OR_INVALID", "pair() uri#symKey");
        throw i.setError(wo.malformed_pairing_uri), new Error(a);
      }
      if (o != null && o.expiryTimestamp && mt.toMiliseconds(o == null ? void 0 : o.expiryTimestamp) < Date.now()) {
        i.setError(wo.pairing_expired);
        const { message: a } = ft("EXPIRED", "pair() URI has expired. Please try again with a new connection URI.");
        throw new Error(a);
      }
    }, this.isValidPing = async (n) => {
      if (!gi(n)) {
        const { message: s } = ft("MISSING_OR_INVALID", `ping() params: ${n}`);
        throw new Error(s);
      }
      const { topic: i } = n;
      await this.isValidPairingTopic(i);
    }, this.isValidDisconnect = async (n) => {
      if (!gi(n)) {
        const { message: s } = ft("MISSING_OR_INVALID", `disconnect() params: ${n}`);
        throw new Error(s);
      }
      const { topic: i } = n;
      await this.isValidPairingTopic(i);
    }, this.isValidPairingTopic = async (n) => {
      if (!dn(n, !1)) {
        const { message: i } = ft("MISSING_OR_INVALID", `pairing topic should be a string: ${n}`);
        throw new Error(i);
      }
      if (!this.pairings.keys.includes(n)) {
        const { message: i } = ft("NO_MATCHING_KEY", `pairing topic doesn't exist: ${n}`);
        throw new Error(i);
      }
      if (ca(this.pairings.get(n).expiry)) {
        await this.deletePairing(n);
        const { message: i } = ft("EXPIRED", `pairing topic: ${n}`);
        throw new Error(i);
      }
    }, this.core = e, this.logger = ci(r, this.name), this.pairings = new Ec(this.core, this.logger, this.name, this.storagePrefix);
  }
  get context() {
    return Ai(this.logger);
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
  registerRelayerEvents() {
    this.core.relayer.on(oi.message, async (e) => {
      const { topic: r, message: n, transportType: i } = e;
      if (!this.pairings.keys.includes(r) || i === zr.link_mode || this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n))) return;
      const s = await this.core.crypto.decode(r, n);
      try {
        fb(s) ? (this.core.history.set(r, s), this.onRelayEventRequest({ topic: r, payload: s })) : ip(s) && (await this.core.history.resolve(s), await this.onRelayEventResponse({ topic: r, payload: s }), this.core.history.delete(r, s.id));
      } catch (o) {
        this.logger.error(o);
      }
    });
  }
  registerExpirerEvents() {
    this.core.expirer.on(Ji.expired, async (e) => {
      const { topic: r } = $8(e.target);
      r && this.pairings.keys.includes(r) && (await this.deletePairing(r, !0), this.events.emit(Za.expire, { topic: r }));
    });
  }
}
class vV extends Jk {
  constructor(e, r) {
    super(e, r), this.core = e, this.logger = r, this.records = /* @__PURE__ */ new Map(), this.events = new rs.EventEmitter(), this.name = pH, this.version = gH, this.cached = [], this.initialized = !1, this.storagePrefix = Qs, this.init = async () => {
      this.initialized || (this.logger.trace("Initialized"), await this.restore(), this.cached.forEach((n) => this.records.set(n.id, n)), this.cached = [], this.registerEventListeners(), this.initialized = !0);
    }, this.set = (n, i, s) => {
      if (this.isInitialized(), this.logger.debug("Setting JSON-RPC request history record"), this.logger.trace({ type: "method", method: "set", topic: n, request: i, chainId: s }), this.records.has(i.id)) return;
      const o = { id: i.id, topic: n, request: { method: i.method, params: i.params || null }, chainId: s, expiry: En(mt.THIRTY_DAYS) };
      this.records.set(o.id, o), this.persist(), this.events.emit(ms.created, o);
    }, this.resolve = async (n) => {
      if (this.isInitialized(), this.logger.debug("Updating JSON-RPC response history record"), this.logger.trace({ type: "method", method: "update", response: n }), !this.records.has(n.id)) return;
      const i = await this.getRecord(n.id);
      typeof i.response > "u" && (i.response = Zi(n) ? { error: n.error } : { result: n.result }, this.records.set(i.id, i), this.persist(), this.events.emit(ms.updated, i));
    }, this.get = async (n, i) => (this.isInitialized(), this.logger.debug("Getting record"), this.logger.trace({ type: "method", method: "get", topic: n, id: i }), await this.getRecord(i)), this.delete = (n, i) => {
      this.isInitialized(), this.logger.debug("Deleting record"), this.logger.trace({ type: "method", method: "delete", id: i }), this.values.forEach((s) => {
        if (s.topic === n) {
          if (typeof i < "u" && s.id !== i) return;
          this.records.delete(s.id), this.events.emit(ms.deleted, s);
        }
      }), this.persist();
    }, this.exists = async (n, i) => (this.isInitialized(), this.records.has(i) ? (await this.getRecord(i)).topic === n : !1), this.on = (n, i) => {
      this.events.on(n, i);
    }, this.once = (n, i) => {
      this.events.once(n, i);
    }, this.off = (n, i) => {
      this.events.off(n, i);
    }, this.removeListener = (n, i) => {
      this.events.removeListener(n, i);
    }, this.logger = ci(r, this.name);
  }
  get context() {
    return Ai(this.logger);
  }
  get storageKey() {
    return this.storagePrefix + this.version + this.core.customStoragePrefix + "//" + this.name;
  }
  get size() {
    return this.records.size;
  }
  get keys() {
    return Array.from(this.records.keys());
  }
  get values() {
    return Array.from(this.records.values());
  }
  get pending() {
    const e = [];
    return this.values.forEach((r) => {
      if (typeof r.response < "u") return;
      const n = { topic: r.topic, request: da(r.request.method, r.request.params, r.id), chainId: r.chainId };
      return e.push(n);
    }), e;
  }
  async setJsonRpcRecords(e) {
    await this.core.storage.setItem(this.storageKey, e);
  }
  async getJsonRpcRecords() {
    return await this.core.storage.getItem(this.storageKey);
  }
  getRecord(e) {
    this.isInitialized();
    const r = this.records.get(e);
    if (!r) {
      const { message: n } = ft("NO_MATCHING_KEY", `${this.name}: ${e}`);
      throw new Error(n);
    }
    return r;
  }
  async persist() {
    await this.setJsonRpcRecords(this.values), this.events.emit(ms.sync);
  }
  async restore() {
    try {
      const e = await this.getJsonRpcRecords();
      if (typeof e > "u" || !e.length) return;
      if (this.records.size) {
        const { message: r } = ft("RESTORE_WILL_OVERRIDE", this.name);
        throw this.logger.error(r), new Error(r);
      }
      this.cached = e, this.logger.debug(`Successfully Restored records for ${this.name}`), this.logger.trace({ type: "method", method: "restore", records: this.values });
    } catch (e) {
      this.logger.debug(`Failed to Restore records for ${this.name}`), this.logger.error(e);
    }
  }
  registerEventListeners() {
    this.events.on(ms.created, (e) => {
      const r = ms.created;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, record: e });
    }), this.events.on(ms.updated, (e) => {
      const r = ms.updated;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, record: e });
    }), this.events.on(ms.deleted, (e) => {
      const r = ms.deleted;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, record: e });
    }), this.core.heartbeat.on(Ou.pulse, () => {
      this.cleanup();
    });
  }
  cleanup() {
    try {
      this.isInitialized();
      let e = !1;
      this.records.forEach((r) => {
        mt.toMiliseconds(r.expiry || 0) - Date.now() <= 0 && (this.logger.info(`Deleting expired history log: ${r.id}`), this.records.delete(r.id), this.events.emit(ms.deleted, r, !1), e = !0);
      }), e && this.persist();
    } catch (e) {
      this.logger.warn(e);
    }
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
}
class bV extends r$ {
  constructor(e, r) {
    super(e, r), this.core = e, this.logger = r, this.expirations = /* @__PURE__ */ new Map(), this.events = new rs.EventEmitter(), this.name = mH, this.version = vH, this.cached = [], this.initialized = !1, this.storagePrefix = Qs, this.init = async () => {
      this.initialized || (this.logger.trace("Initialized"), await this.restore(), this.cached.forEach((n) => this.expirations.set(n.target, n)), this.cached = [], this.registerEventListeners(), this.initialized = !0);
    }, this.has = (n) => {
      try {
        const i = this.formatTarget(n);
        return typeof this.getExpiration(i) < "u";
      } catch {
        return !1;
      }
    }, this.set = (n, i) => {
      this.isInitialized();
      const s = this.formatTarget(n), o = { target: s, expiry: i };
      this.expirations.set(s, o), this.checkExpiry(s, o), this.events.emit(Ji.created, { target: s, expiration: o });
    }, this.get = (n) => {
      this.isInitialized();
      const i = this.formatTarget(n);
      return this.getExpiration(i);
    }, this.del = (n) => {
      if (this.isInitialized(), this.has(n)) {
        const i = this.formatTarget(n), s = this.getExpiration(i);
        this.expirations.delete(i), this.events.emit(Ji.deleted, { target: i, expiration: s });
      }
    }, this.on = (n, i) => {
      this.events.on(n, i);
    }, this.once = (n, i) => {
      this.events.once(n, i);
    }, this.off = (n, i) => {
      this.events.off(n, i);
    }, this.removeListener = (n, i) => {
      this.events.removeListener(n, i);
    }, this.logger = ci(r, this.name);
  }
  get context() {
    return Ai(this.logger);
  }
  get storageKey() {
    return this.storagePrefix + this.version + this.core.customStoragePrefix + "//" + this.name;
  }
  get length() {
    return this.expirations.size;
  }
  get keys() {
    return Array.from(this.expirations.keys());
  }
  get values() {
    return Array.from(this.expirations.values());
  }
  formatTarget(e) {
    if (typeof e == "string") return Hq(e);
    if (typeof e == "number") return Kq(e);
    const { message: r } = ft("UNKNOWN_TYPE", `Target type: ${typeof e}`);
    throw new Error(r);
  }
  async setExpirations(e) {
    await this.core.storage.setItem(this.storageKey, e);
  }
  async getExpirations() {
    return await this.core.storage.getItem(this.storageKey);
  }
  async persist() {
    await this.setExpirations(this.values), this.events.emit(Ji.sync);
  }
  async restore() {
    try {
      const e = await this.getExpirations();
      if (typeof e > "u" || !e.length) return;
      if (this.expirations.size) {
        const { message: r } = ft("RESTORE_WILL_OVERRIDE", this.name);
        throw this.logger.error(r), new Error(r);
      }
      this.cached = e, this.logger.debug(`Successfully Restored expirations for ${this.name}`), this.logger.trace({ type: "method", method: "restore", expirations: this.values });
    } catch (e) {
      this.logger.debug(`Failed to Restore expirations for ${this.name}`), this.logger.error(e);
    }
  }
  getExpiration(e) {
    const r = this.expirations.get(e);
    if (!r) {
      const { message: n } = ft("NO_MATCHING_KEY", `${this.name}: ${e}`);
      throw this.logger.warn(n), new Error(n);
    }
    return r;
  }
  checkExpiry(e, r) {
    const { expiry: n } = r;
    mt.toMiliseconds(n) - Date.now() <= 0 && this.expire(e, r);
  }
  expire(e, r) {
    this.expirations.delete(e), this.events.emit(Ji.expired, { target: e, expiration: r });
  }
  checkExpirations() {
    this.core.relayer.connected && this.expirations.forEach((e, r) => this.checkExpiry(r, e));
  }
  registerEventListeners() {
    this.core.heartbeat.on(Ou.pulse, () => this.checkExpirations()), this.events.on(Ji.created, (e) => {
      const r = Ji.created;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, data: e }), this.persist();
    }), this.events.on(Ji.expired, (e) => {
      const r = Ji.expired;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, data: e }), this.persist();
    }), this.events.on(Ji.deleted, (e) => {
      const r = Ji.deleted;
      this.logger.info(`Emitting ${r}`), this.logger.debug({ type: "event", event: r, data: e }), this.persist();
    });
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
}
class yV extends n$ {
  constructor(e, r, n) {
    super(e, r, n), this.core = e, this.logger = r, this.store = n, this.name = bH, this.verifyUrlV3 = wH, this.storagePrefix = Qs, this.version = tE, this.init = async () => {
      var i;
      this.isDevEnv || (this.publicKey = await this.store.getItem(this.storeKey), this.publicKey && mt.toMiliseconds((i = this.publicKey) == null ? void 0 : i.expiresAt) < Date.now() && (this.logger.debug("verify v2 public key expired"), await this.removePublicKey()));
    }, this.register = async (i) => {
      if (!Zl() || this.isDevEnv) return;
      const s = window.location.origin, { id: o, decryptedId: a } = i, u = `${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;
      try {
        const l = Kl(), d = this.startAbortTimer(mt.ONE_SECOND * 5), p = await new Promise((w, A) => {
          const M = () => {
            window.removeEventListener("message", L), l.body.removeChild(N), A("attestation aborted");
          };
          this.abortController.signal.addEventListener("abort", M);
          const N = l.createElement("iframe");
          N.src = u, N.style.display = "none", N.addEventListener("error", M, { signal: this.abortController.signal });
          const L = (B) => {
            if (B.data && typeof B.data == "string") try {
              const $ = JSON.parse(B.data);
              if ($.type === "verify_attestation") {
                if (v1($.attestation).payload.id !== o) return;
                clearInterval(d), l.body.removeChild(N), this.abortController.signal.removeEventListener("abort", M), window.removeEventListener("message", L), w($.attestation === null ? "" : $.attestation);
              }
            } catch ($) {
              this.logger.warn($);
            }
          };
          l.body.appendChild(N), window.addEventListener("message", L, { signal: this.abortController.signal });
        });
        return this.logger.debug("jwt attestation", p), p;
      } catch (l) {
        this.logger.warn(l);
      }
      return "";
    }, this.resolve = async (i) => {
      if (this.isDevEnv) return "";
      const { attestationId: s, hash: o, encryptedId: a } = i;
      if (s === "") {
        this.logger.debug("resolve: attestationId is empty, skipping");
        return;
      }
      if (s) {
        if (v1(s).payload.id !== a) return;
        const l = await this.isValidJwtAttestation(s);
        if (l) {
          if (!l.isVerified) {
            this.logger.warn("resolve: jwt attestation: origin url not verified");
            return;
          }
          return l;
        }
      }
      if (!o) return;
      const u = this.getVerifyUrl(i == null ? void 0 : i.verifyUrl);
      return this.fetchAttestation(o, u);
    }, this.fetchAttestation = async (i, s) => {
      this.logger.debug(`resolving attestation: ${i} from url: ${s}`);
      const o = this.startAbortTimer(mt.ONE_SECOND * 5), a = await fetch(`${s}/attestation/${i}?v2Supported=true`, { signal: this.abortController.signal });
      return clearTimeout(o), a.status === 200 ? await a.json() : void 0;
    }, this.getVerifyUrl = (i) => {
      let s = i || Wf;
      return xH.includes(s) || (this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Wf}`), s = Wf), s;
    }, this.fetchPublicKey = async () => {
      try {
        this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);
        const i = this.startAbortTimer(mt.FIVE_SECONDS), s = await fetch(`${this.verifyUrlV3}/public-key`, { signal: this.abortController.signal });
        return clearTimeout(i), await s.json();
      } catch (i) {
        this.logger.warn(i);
      }
    }, this.persistPublicKey = async (i) => {
      this.logger.debug("persisting public key to local storage", i), await this.store.setItem(this.storeKey, i), this.publicKey = i;
    }, this.removePublicKey = async () => {
      this.logger.debug("removing verify v2 public key from storage"), await this.store.removeItem(this.storeKey), this.publicKey = void 0;
    }, this.isValidJwtAttestation = async (i) => {
      const s = await this.getPublicKey();
      try {
        if (s) return this.validateAttestation(i, s);
      } catch (a) {
        this.logger.error(a), this.logger.warn("error validating attestation");
      }
      const o = await this.fetchAndPersistPublicKey();
      try {
        if (o) return this.validateAttestation(i, o);
      } catch (a) {
        this.logger.error(a), this.logger.warn("error validating attestation");
      }
    }, this.getPublicKey = async () => this.publicKey ? this.publicKey : await this.fetchAndPersistPublicKey(), this.fetchAndPersistPublicKey = async () => {
      if (this.fetchPromise) return await this.fetchPromise, this.publicKey;
      this.fetchPromise = new Promise(async (s) => {
        const o = await this.fetchPublicKey();
        o && (await this.persistPublicKey(o), s(o));
      });
      const i = await this.fetchPromise;
      return this.fetchPromise = void 0, i;
    }, this.validateAttestation = (i, s) => {
      const o = Dz(i, s.publicKey), a = { hasExpired: mt.toMiliseconds(o.exp) < Date.now(), payload: o };
      if (a.hasExpired) throw this.logger.warn("resolve: jwt attestation expired"), new Error("JWT attestation expired");
      return { origin: a.payload.origin, isScam: a.payload.isScam, isVerified: a.payload.isVerified };
    }, this.logger = ci(r, this.name), this.abortController = new AbortController(), this.isDevEnv = ib(), this.init();
  }
  get storeKey() {
    return this.storagePrefix + this.version + this.core.customStoragePrefix + "//verify:public:key";
  }
  get context() {
    return Ai(this.logger);
  }
  startAbortTimer(e) {
    return this.abortController = new AbortController(), setTimeout(() => this.abortController.abort(), mt.toMiliseconds(e));
  }
}
class wV extends i$ {
  constructor(e, r) {
    super(e, r), this.projectId = e, this.logger = r, this.context = _H, this.registerDeviceToken = async (n) => {
      const { clientId: i, token: s, notificationType: o, enableEncrypted: a = !1 } = n, u = `${EH}/${this.projectId}/clients`;
      await fetch(u, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ client_id: i, type: o, token: s, always_raw: a }) });
    }, this.logger = ci(r, this.context);
  }
}
var xV = Object.defineProperty, I3 = Object.getOwnPropertySymbols, _V = Object.prototype.hasOwnProperty, EV = Object.prototype.propertyIsEnumerable, C3 = (t, e, r) => e in t ? xV(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, Tf = (t, e) => {
  for (var r in e || (e = {})) _V.call(e, r) && C3(t, r, e[r]);
  if (I3) for (var r of I3(e)) EV.call(e, r) && C3(t, r, e[r]);
  return t;
};
class SV extends s$ {
  constructor(e, r, n = !0) {
    super(e, r, n), this.core = e, this.logger = r, this.context = AH, this.storagePrefix = Qs, this.storageVersion = SH, this.events = /* @__PURE__ */ new Map(), this.shouldPersist = !1, this.init = async () => {
      if (!ib()) try {
        const i = { eventId: Fx(), timestamp: Date.now(), domain: this.getAppDomain(), props: { event: "INIT", type: "", properties: { client_id: await this.core.crypto.getClientId(), user_agent: O8(this.core.relayer.protocol, this.core.relayer.version, T1) } } };
        await this.sendEvent([i]);
      } catch (i) {
        this.logger.warn(i);
      }
    }, this.createEvent = (i) => {
      const { event: s = "ERROR", type: o = "", properties: { topic: a, trace: u } } = i, l = Fx(), d = this.core.projectId || "", p = Date.now(), w = Tf({ eventId: l, timestamp: p, props: { event: s, type: o, properties: { topic: a, trace: u } }, bundleId: d, domain: this.getAppDomain() }, this.setMethods(l));
      return this.telemetryEnabled && (this.events.set(l, w), this.shouldPersist = !0), w;
    }, this.getEvent = (i) => {
      const { eventId: s, topic: o } = i;
      if (s) return this.events.get(s);
      const a = Array.from(this.events.values()).find((u) => u.props.properties.topic === o);
      if (a) return Tf(Tf({}, a), this.setMethods(a.eventId));
    }, this.deleteEvent = (i) => {
      const { eventId: s } = i;
      this.events.delete(s), this.shouldPersist = !0;
    }, this.setEventListeners = () => {
      this.core.heartbeat.on(Ou.pulse, async () => {
        this.shouldPersist && await this.persist(), this.events.forEach((i) => {
          mt.fromMiliseconds(Date.now()) - mt.fromMiliseconds(i.timestamp) > PH && (this.events.delete(i.eventId), this.shouldPersist = !0);
        });
      });
    }, this.setMethods = (i) => ({ addTrace: (s) => this.addTrace(i, s), setError: (s) => this.setError(i, s) }), this.addTrace = (i, s) => {
      const o = this.events.get(i);
      o && (o.props.properties.trace.push(s), this.events.set(i, o), this.shouldPersist = !0);
    }, this.setError = (i, s) => {
      const o = this.events.get(i);
      o && (o.props.type = s, o.timestamp = Date.now(), this.events.set(i, o), this.shouldPersist = !0);
    }, this.persist = async () => {
      await this.core.storage.setItem(this.storageKey, Array.from(this.events.values())), this.shouldPersist = !1;
    }, this.restore = async () => {
      try {
        const i = await this.core.storage.getItem(this.storageKey) || [];
        if (!i.length) return;
        i.forEach((s) => {
          this.events.set(s.eventId, Tf(Tf({}, s), this.setMethods(s.eventId)));
        });
      } catch (i) {
        this.logger.warn(i);
      }
    }, this.submit = async () => {
      if (!this.telemetryEnabled || this.events.size === 0) return;
      const i = [];
      for (const [s, o] of this.events) o.props.type && i.push(o);
      if (i.length !== 0) try {
        if ((await this.sendEvent(i)).ok) for (const s of i) this.events.delete(s.eventId), this.shouldPersist = !0;
      } catch (s) {
        this.logger.warn(s);
      }
    }, this.sendEvent = async (i) => {
      const s = this.getAppDomain() ? "" : "&sp=desktop";
      return await fetch(`${MH}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${T1}${s}`, { method: "POST", body: JSON.stringify(i) });
    }, this.getAppDomain = () => D8().url, this.logger = ci(r, this.context), this.telemetryEnabled = n, n ? this.restore().then(async () => {
      await this.submit(), this.setEventListeners();
    }) : this.persist();
  }
  get storageKey() {
    return this.storagePrefix + this.storageVersion + this.core.customStoragePrefix + "//" + this.context;
  }
}
var AV = Object.defineProperty, T3 = Object.getOwnPropertySymbols, PV = Object.prototype.hasOwnProperty, MV = Object.prototype.propertyIsEnumerable, R3 = (t, e, r) => e in t ? AV(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, D3 = (t, e) => {
  for (var r in e || (e = {})) PV.call(e, r) && R3(t, r, e[r]);
  if (T3) for (var r of T3(e)) MV.call(e, r) && R3(t, r, e[r]);
  return t;
};
class lb extends Yk {
  constructor(e) {
    var r;
    super(e), this.protocol = eE, this.version = tE, this.name = rE, this.events = new rs.EventEmitter(), this.initialized = !1, this.on = (o, a) => this.events.on(o, a), this.once = (o, a) => this.events.once(o, a), this.off = (o, a) => this.events.off(o, a), this.removeListener = (o, a) => this.events.removeListener(o, a), this.dispatchEnvelope = ({ topic: o, message: a, sessionExists: u }) => {
      if (!o || !a) return;
      const l = { topic: o, message: a, publishedAt: Date.now(), transportType: zr.link_mode };
      this.relayer.onLinkMessageEvent(l, { sessionExists: u });
    }, this.projectId = e == null ? void 0 : e.projectId, this.relayUrl = (e == null ? void 0 : e.relayUrl) || iE, this.customStoragePrefix = e != null && e.customStoragePrefix ? `:${e.customStoragePrefix}` : "";
    const n = $0({ level: typeof (e == null ? void 0 : e.logger) == "string" && e.logger ? e.logger : VW.logger }), { logger: i, chunkLoggerController: s } = Gk({ opts: n, maxSizeInBytes: e == null ? void 0 : e.maxLogBlobSizeInBytes, loggerOverride: e == null ? void 0 : e.logger });
    this.logChunkController = s, (r = this.logChunkController) != null && r.downloadLogsBlobInBrowser && (window.downloadLogsBlobInBrowser = async () => {
      var o, a;
      (o = this.logChunkController) != null && o.downloadLogsBlobInBrowser && ((a = this.logChunkController) == null || a.downloadLogsBlobInBrowser({ clientId: await this.crypto.getClientId() }));
    }), this.logger = ci(i, this.name), this.heartbeat = new qL(), this.crypto = new QK(this, this.logger, e == null ? void 0 : e.keychain), this.history = new vV(this, this.logger), this.expirer = new bV(this, this.logger), this.storage = e != null && e.storage ? e.storage : new wk(D3(D3({}, GW), e == null ? void 0 : e.storageOptions)), this.relayer = new hV({ core: this, logger: this.logger, relayUrl: this.relayUrl, projectId: this.projectId }), this.pairing = new mV(this, this.logger), this.verify = new yV(this, this.logger, this.storage), this.echoClient = new wV(this.projectId || "", this.logger), this.linkModeSupportedApps = [], this.eventClient = new SV(this, this.logger, e == null ? void 0 : e.telemetryEnabled);
  }
  static async init(e) {
    const r = new lb(e);
    await r.initialize();
    const n = await r.crypto.getClientId();
    return await r.storage.setItem(cH, n), r;
  }
  get context() {
    return Ai(this.logger);
  }
  async start() {
    this.initialized || await this.initialize();
  }
  async getLogsBlob() {
    var e;
    return (e = this.logChunkController) == null ? void 0 : e.logsToBlob({ clientId: await this.crypto.getClientId() });
  }
  async addLinkModeSupportedApp(e) {
    this.linkModeSupportedApps.includes(e) || (this.linkModeSupportedApps.push(e), await this.storage.setItem(d3, this.linkModeSupportedApps));
  }
  async initialize() {
    this.logger.trace("Initialized");
    try {
      await this.crypto.init(), await this.history.init(), await this.expirer.init(), await this.relayer.init(), await this.heartbeat.init(), await this.pairing.init(), this.eventClient.init(), this.linkModeSupportedApps = await this.storage.getItem(d3) || [], this.initialized = !0, this.logger.info("Core Initialization Success");
    } catch (e) {
      throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`, e), this.logger.error(e.message), e;
    }
  }
}
const IV = lb, mE = "wc", vE = 2, bE = "client", hb = `${mE}@${vE}:${bE}:`, mm = { name: bE, logger: "error" }, O3 = "WALLETCONNECT_DEEPLINK_CHOICE", CV = "proposal", yE = "Proposal expired", TV = "session", Kc = mt.SEVEN_DAYS, RV = "engine", In = { wc_sessionPropose: { req: { ttl: mt.FIVE_MINUTES, prompt: !0, tag: 1100 }, res: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1101 }, reject: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1120 }, autoReject: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1121 } }, wc_sessionSettle: { req: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1102 }, res: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1103 } }, wc_sessionUpdate: { req: { ttl: mt.ONE_DAY, prompt: !1, tag: 1104 }, res: { ttl: mt.ONE_DAY, prompt: !1, tag: 1105 } }, wc_sessionExtend: { req: { ttl: mt.ONE_DAY, prompt: !1, tag: 1106 }, res: { ttl: mt.ONE_DAY, prompt: !1, tag: 1107 } }, wc_sessionRequest: { req: { ttl: mt.FIVE_MINUTES, prompt: !0, tag: 1108 }, res: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1109 } }, wc_sessionEvent: { req: { ttl: mt.FIVE_MINUTES, prompt: !0, tag: 1110 }, res: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1111 } }, wc_sessionDelete: { req: { ttl: mt.ONE_DAY, prompt: !1, tag: 1112 }, res: { ttl: mt.ONE_DAY, prompt: !1, tag: 1113 } }, wc_sessionPing: { req: { ttl: mt.ONE_DAY, prompt: !1, tag: 1114 }, res: { ttl: mt.ONE_DAY, prompt: !1, tag: 1115 } }, wc_sessionAuthenticate: { req: { ttl: mt.ONE_HOUR, prompt: !0, tag: 1116 }, res: { ttl: mt.ONE_HOUR, prompt: !1, tag: 1117 }, reject: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1118 }, autoReject: { ttl: mt.FIVE_MINUTES, prompt: !1, tag: 1119 } } }, vm = { min: mt.FIVE_MINUTES, max: mt.SEVEN_DAYS }, ks = { idle: "IDLE", active: "ACTIVE" }, DV = "request", OV = ["wc_sessionPropose", "wc_sessionRequest", "wc_authRequest", "wc_sessionAuthenticate"], NV = "wc", LV = "auth", kV = "authKeys", $V = "pairingTopics", BV = "requests", op = `${NV}@${1.5}:${LV}:`, Rd = `${op}:PUB_KEY`;
var FV = Object.defineProperty, jV = Object.defineProperties, UV = Object.getOwnPropertyDescriptors, N3 = Object.getOwnPropertySymbols, qV = Object.prototype.hasOwnProperty, zV = Object.prototype.propertyIsEnumerable, L3 = (t, e, r) => e in t ? FV(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, tn = (t, e) => {
  for (var r in e || (e = {})) qV.call(e, r) && L3(t, r, e[r]);
  if (N3) for (var r of N3(e)) zV.call(e, r) && L3(t, r, e[r]);
  return t;
}, bs = (t, e) => jV(t, UV(e));
class WV extends a$ {
  constructor(e) {
    super(e), this.name = RV, this.events = new kv(), this.initialized = !1, this.requestQueue = { state: ks.idle, queue: [] }, this.sessionRequestQueue = { state: ks.idle, queue: [] }, this.requestQueueDelay = mt.ONE_SECOND, this.expectedPairingMethodMap = /* @__PURE__ */ new Map(), this.recentlyDeletedMap = /* @__PURE__ */ new Map(), this.recentlyDeletedLimit = 200, this.relayMessageCache = [], this.init = async () => {
      this.initialized || (await this.cleanup(), this.registerRelayerEvents(), this.registerExpirerEvents(), this.registerPairingEvents(), await this.registerLinkModeListeners(), this.client.core.pairing.register({ methods: Object.keys(In) }), this.initialized = !0, setTimeout(() => {
        this.sessionRequestQueue.queue = this.getPendingSessionRequests(), this.processSessionRequestQueue();
      }, mt.toMiliseconds(this.requestQueueDelay)));
    }, this.connect = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow();
      const n = bs(tn({}, r), { requiredNamespaces: r.requiredNamespaces || {}, optionalNamespaces: r.optionalNamespaces || {} });
      await this.isValidConnect(n);
      const { pairingTopic: i, requiredNamespaces: s, optionalNamespaces: o, sessionProperties: a, relays: u } = n;
      let l = i, d, p = !1;
      try {
        l && (p = this.client.core.pairing.pairings.get(l).active);
      } catch (W) {
        throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`), W;
      }
      if (!l || !p) {
        const { topic: W, uri: V } = await this.client.core.pairing.create();
        l = W, d = V;
      }
      if (!l) {
        const { message: W } = ft("NO_MATCHING_KEY", `connect() pairing topic: ${l}`);
        throw new Error(W);
      }
      const w = await this.client.core.crypto.generateKeyPair(), A = In.wc_sessionPropose.req.ttl || mt.FIVE_MINUTES, M = En(A), N = tn({ requiredNamespaces: s, optionalNamespaces: o, relays: u ?? [{ protocol: nE }], proposer: { publicKey: w, metadata: this.client.metadata }, expiryTimestamp: M, pairingTopic: l }, a && { sessionProperties: a }), { reject: L, resolve: B, done: $ } = Ga(A, yE);
      this.events.once(br("session_connect"), async ({ error: W, session: V }) => {
        if (W) L(W);
        else if (V) {
          V.self.publicKey = w;
          const te = bs(tn({}, V), { pairingTopic: N.pairingTopic, requiredNamespaces: N.requiredNamespaces, optionalNamespaces: N.optionalNamespaces, transportType: zr.relay });
          await this.client.session.set(V.topic, te), await this.setExpiry(V.topic, V.expiry), l && await this.client.core.pairing.updateMetadata({ topic: l, metadata: V.peer.metadata }), this.cleanupDuplicatePairings(te), B(te);
        }
      });
      const H = await this.sendRequest({ topic: l, method: "wc_sessionPropose", params: N, throwOnFailedPublish: !0 });
      return await this.setProposal(H, tn({ id: H }, N)), { uri: d, approval: $ };
    }, this.pair = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow();
      try {
        return await this.client.core.pairing.pair(r);
      } catch (n) {
        throw this.client.logger.error("pair() failed"), n;
      }
    }, this.approve = async (r) => {
      var n, i, s;
      const o = this.client.core.eventClient.createEvent({ properties: { topic: (n = r == null ? void 0 : r.id) == null ? void 0 : n.toString(), trace: [vs.session_approve_started] } });
      try {
        this.isInitialized(), await this.confirmOnlineStateOrThrow();
      } catch (K) {
        throw o.setError(Ha.no_internet_connection), K;
      }
      try {
        await this.isValidProposalId(r == null ? void 0 : r.id);
      } catch (K) {
        throw this.client.logger.error(`approve() -> proposal.get(${r == null ? void 0 : r.id}) failed`), o.setError(Ha.proposal_not_found), K;
      }
      try {
        await this.isValidApprove(r);
      } catch (K) {
        throw this.client.logger.error("approve() -> isValidApprove() failed"), o.setError(Ha.session_approve_namespace_validation_failure), K;
      }
      const { id: a, relayProtocol: u, namespaces: l, sessionProperties: d, sessionConfig: p } = r, w = this.client.proposal.get(a);
      this.client.core.eventClient.deleteEvent({ eventId: o.eventId });
      const { pairingTopic: A, proposer: M, requiredNamespaces: N, optionalNamespaces: L } = w;
      let B = (i = this.client.core.eventClient) == null ? void 0 : i.getEvent({ topic: A });
      B || (B = (s = this.client.core.eventClient) == null ? void 0 : s.createEvent({ type: vs.session_approve_started, properties: { topic: A, trace: [vs.session_approve_started, vs.session_namespaces_validation_success] } }));
      const $ = await this.client.core.crypto.generateKeyPair(), H = M.publicKey, W = await this.client.core.crypto.generateSharedKey($, H), V = tn(tn({ relay: { protocol: u ?? "irn" }, namespaces: l, controller: { publicKey: $, metadata: this.client.metadata }, expiry: En(Kc) }, d && { sessionProperties: d }), p && { sessionConfig: p }), te = zr.relay;
      B.addTrace(vs.subscribing_session_topic);
      try {
        await this.client.core.relayer.subscribe(W, { transportType: te });
      } catch (K) {
        throw B.setError(Ha.subscribe_session_topic_failure), K;
      }
      B.addTrace(vs.subscribe_session_topic_success);
      const R = bs(tn({}, V), { topic: W, requiredNamespaces: N, optionalNamespaces: L, pairingTopic: A, acknowledged: !1, self: V.controller, peer: { publicKey: M.publicKey, metadata: M.metadata }, controller: $, transportType: zr.relay });
      await this.client.session.set(W, R), B.addTrace(vs.store_session);
      try {
        B.addTrace(vs.publishing_session_settle), await this.sendRequest({ topic: W, method: "wc_sessionSettle", params: V, throwOnFailedPublish: !0 }).catch((K) => {
          throw B == null || B.setError(Ha.session_settle_publish_failure), K;
        }), B.addTrace(vs.session_settle_publish_success), B.addTrace(vs.publishing_session_approve), await this.sendResult({ id: a, topic: A, result: { relay: { protocol: u ?? "irn" }, responderPublicKey: $ }, throwOnFailedPublish: !0 }).catch((K) => {
          throw B == null || B.setError(Ha.session_approve_publish_failure), K;
        }), B.addTrace(vs.session_approve_publish_success);
      } catch (K) {
        throw this.client.logger.error(K), this.client.session.delete(W, Or("USER_DISCONNECTED")), await this.client.core.relayer.unsubscribe(W), K;
      }
      return this.client.core.eventClient.deleteEvent({ eventId: B.eventId }), await this.client.core.pairing.updateMetadata({ topic: A, metadata: M.metadata }), await this.client.proposal.delete(a, Or("USER_DISCONNECTED")), await this.client.core.pairing.activate({ topic: A }), await this.setExpiry(W, En(Kc)), { topic: W, acknowledged: () => Promise.resolve(this.client.session.get(W)) };
    }, this.reject = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow();
      try {
        await this.isValidReject(r);
      } catch (o) {
        throw this.client.logger.error("reject() -> isValidReject() failed"), o;
      }
      const { id: n, reason: i } = r;
      let s;
      try {
        s = this.client.proposal.get(n).pairingTopic;
      } catch (o) {
        throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`), o;
      }
      s && (await this.sendError({ id: n, topic: s, error: i, rpcOpts: In.wc_sessionPropose.reject }), await this.client.proposal.delete(n, Or("USER_DISCONNECTED")));
    }, this.update = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow();
      try {
        await this.isValidUpdate(r);
      } catch (p) {
        throw this.client.logger.error("update() -> isValidUpdate() failed"), p;
      }
      const { topic: n, namespaces: i } = r, { done: s, resolve: o, reject: a } = Ga(), u = ua(), l = nc().toString(), d = this.client.session.get(n).namespaces;
      return this.events.once(br("session_update", u), ({ error: p }) => {
        p ? a(p) : o();
      }), await this.client.session.update(n, { namespaces: i }), await this.sendRequest({ topic: n, method: "wc_sessionUpdate", params: { namespaces: i }, throwOnFailedPublish: !0, clientRpcId: u, relayRpcId: l }).catch((p) => {
        this.client.logger.error(p), this.client.session.update(n, { namespaces: d }), a(p);
      }), { acknowledged: s };
    }, this.extend = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow();
      try {
        await this.isValidExtend(r);
      } catch (u) {
        throw this.client.logger.error("extend() -> isValidExtend() failed"), u;
      }
      const { topic: n } = r, i = ua(), { done: s, resolve: o, reject: a } = Ga();
      return this.events.once(br("session_extend", i), ({ error: u }) => {
        u ? a(u) : o();
      }), await this.setExpiry(n, En(Kc)), this.sendRequest({ topic: n, method: "wc_sessionExtend", params: {}, clientRpcId: i, throwOnFailedPublish: !0 }).catch((u) => {
        a(u);
      }), { acknowledged: s };
    }, this.request = async (r) => {
      this.isInitialized();
      try {
        await this.isValidRequest(r);
      } catch (M) {
        throw this.client.logger.error("request() -> isValidRequest() failed"), M;
      }
      const { chainId: n, request: i, topic: s, expiry: o = In.wc_sessionRequest.req.ttl } = r, a = this.client.session.get(s);
      (a == null ? void 0 : a.transportType) === zr.relay && await this.confirmOnlineStateOrThrow();
      const u = ua(), l = nc().toString(), { done: d, resolve: p, reject: w } = Ga(o, "Request expired. Please try again.");
      this.events.once(br("session_request", u), ({ error: M, result: N }) => {
        M ? w(M) : p(N);
      });
      const A = this.getAppLinkIfEnabled(a.peer.metadata, a.transportType);
      return A ? (await this.sendRequest({ clientRpcId: u, relayRpcId: l, topic: s, method: "wc_sessionRequest", params: { request: bs(tn({}, i), { expiryTimestamp: En(o) }), chainId: n }, expiry: o, throwOnFailedPublish: !0, appLink: A }).catch((M) => w(M)), this.client.events.emit("session_request_sent", { topic: s, request: i, chainId: n, id: u }), await d()) : await Promise.all([new Promise(async (M) => {
        await this.sendRequest({ clientRpcId: u, relayRpcId: l, topic: s, method: "wc_sessionRequest", params: { request: bs(tn({}, i), { expiryTimestamp: En(o) }), chainId: n }, expiry: o, throwOnFailedPublish: !0 }).catch((N) => w(N)), this.client.events.emit("session_request_sent", { topic: s, request: i, chainId: n, id: u }), M();
      }), new Promise(async (M) => {
        var N;
        if (!((N = a.sessionConfig) != null && N.disableDeepLink)) {
          const L = await Yq(this.client.core.storage, O3);
          await Vq({ id: u, topic: s, wcDeepLink: L });
        }
        M();
      }), d()]).then((M) => M[2]);
    }, this.respond = async (r) => {
      this.isInitialized(), await this.isValidRespond(r);
      const { topic: n, response: i } = r, { id: s } = i, o = this.client.session.get(n);
      o.transportType === zr.relay && await this.confirmOnlineStateOrThrow();
      const a = this.getAppLinkIfEnabled(o.peer.metadata, o.transportType);
      js(i) ? await this.sendResult({ id: s, topic: n, result: i.result, throwOnFailedPublish: !0, appLink: a }) : Zi(i) && await this.sendError({ id: s, topic: n, error: i.error, appLink: a }), this.cleanupAfterResponse(r);
    }, this.ping = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow();
      try {
        await this.isValidPing(r);
      } catch (i) {
        throw this.client.logger.error("ping() -> isValidPing() failed"), i;
      }
      const { topic: n } = r;
      if (this.client.session.keys.includes(n)) {
        const i = ua(), s = nc().toString(), { done: o, resolve: a, reject: u } = Ga();
        this.events.once(br("session_ping", i), ({ error: l }) => {
          l ? u(l) : a();
        }), await Promise.all([this.sendRequest({ topic: n, method: "wc_sessionPing", params: {}, throwOnFailedPublish: !0, clientRpcId: i, relayRpcId: s }), o()]);
      } else this.client.core.pairing.pairings.keys.includes(n) && await this.client.core.pairing.ping({ topic: n });
    }, this.emit = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow(), await this.isValidEmit(r);
      const { topic: n, event: i, chainId: s } = r, o = nc().toString();
      await this.sendRequest({ topic: n, method: "wc_sessionEvent", params: { event: i, chainId: s }, throwOnFailedPublish: !0, relayRpcId: o });
    }, this.disconnect = async (r) => {
      this.isInitialized(), await this.confirmOnlineStateOrThrow(), await this.isValidDisconnect(r);
      const { topic: n } = r;
      if (this.client.session.keys.includes(n)) await this.sendRequest({ topic: n, method: "wc_sessionDelete", params: Or("USER_DISCONNECTED"), throwOnFailedPublish: !0 }), await this.deleteSession({ topic: n, emitEvent: !1 });
      else if (this.client.core.pairing.pairings.keys.includes(n)) await this.client.core.pairing.disconnect({ topic: n });
      else {
        const { message: i } = ft("MISMATCHED_TOPIC", `Session or pairing topic not found: ${n}`);
        throw new Error(i);
      }
    }, this.find = (r) => (this.isInitialized(), this.client.session.getAll().filter((n) => Yz(n, r))), this.getPendingSessionRequests = () => this.client.pendingRequest.getAll(), this.authenticate = async (r, n) => {
      var i;
      this.isInitialized(), this.isValidAuthenticate(r);
      const s = n && this.client.core.linkModeSupportedApps.includes(n) && ((i = this.client.metadata.redirect) == null ? void 0 : i.linkMode), o = s ? zr.link_mode : zr.relay;
      o === zr.relay && await this.confirmOnlineStateOrThrow();
      const { chains: a, statement: u = "", uri: l, domain: d, nonce: p, type: w, exp: A, nbf: M, methods: N = [], expiry: L } = r, B = [...r.resources || []], { topic: $, uri: H } = await this.client.core.pairing.create({ methods: ["wc_sessionAuthenticate"], transportType: o });
      this.client.logger.info({ message: "Generated new pairing", pairing: { topic: $, uri: H } });
      const W = await this.client.core.crypto.generateKeyPair(), V = Td(W);
      if (await Promise.all([this.client.auth.authKeys.set(Rd, { responseTopic: V, publicKey: W }), this.client.auth.pairingTopics.set(V, { topic: V, pairingTopic: $ })]), await this.client.core.relayer.subscribe(V, { transportType: o }), this.client.logger.info(`sending request to new pairing topic: ${$}`), N.length > 0) {
        const { namespace: _ } = hu(a[0]);
        let E = mz(_, "request", N);
        Cd(B) && (E = bz(E, B.pop())), B.push(E);
      }
      const te = L && L > In.wc_sessionAuthenticate.req.ttl ? L : In.wc_sessionAuthenticate.req.ttl, R = { authPayload: { type: w ?? "caip122", chains: a, statement: u, aud: l, domain: d, version: "1", nonce: p, iat: (/* @__PURE__ */ new Date()).toISOString(), exp: A, nbf: M, resources: B }, requester: { publicKey: W, metadata: this.client.metadata }, expiryTimestamp: En(te) }, K = { eip155: { chains: a, methods: [.../* @__PURE__ */ new Set(["personal_sign", ...N])], events: ["chainChanged", "accountsChanged"] } }, ge = { requiredNamespaces: {}, optionalNamespaces: K, relays: [{ protocol: "irn" }], pairingTopic: $, proposer: { publicKey: W, metadata: this.client.metadata }, expiryTimestamp: En(In.wc_sessionPropose.req.ttl) }, { done: Ee, resolve: Y, reject: S } = Ga(te, "Request expired"), m = async ({ error: _, session: E }) => {
        if (this.events.off(br("session_request", g), f), _) S(_);
        else if (E) {
          E.self.publicKey = W, await this.client.session.set(E.topic, E), await this.setExpiry(E.topic, E.expiry), $ && await this.client.core.pairing.updateMetadata({ topic: $, metadata: E.peer.metadata });
          const v = this.client.session.get(E.topic);
          await this.deleteProposal(b), Y({ session: v });
        }
      }, f = async (_) => {
        var E, v, P;
        if (await this.deletePendingAuthRequest(g, { message: "fulfilled", code: 0 }), _.error) {
          const J = Or("WC_METHOD_UNSUPPORTED", "wc_sessionAuthenticate");
          return _.error.code === J.code ? void 0 : (this.events.off(br("session_connect"), m), S(_.error.message));
        }
        await this.deleteProposal(b), this.events.off(br("session_connect"), m);
        const { cacaos: I, responder: F } = _.result, ce = [], D = [];
        for (const J of I) {
          await qx({ cacao: J, projectId: this.client.core.projectId }) || (this.client.logger.error(J, "Signature verification failed"), S(Or("SESSION_SETTLEMENT_FAILED", "Signature verification failed")));
          const { p: Q } = J, T = Cd(Q.resources), X = [M1(Q.iss)], re = u0(Q.iss);
          if (T) {
            const de = zx(T), ie = Wx(T);
            ce.push(...de), X.push(...ie);
          }
          for (const de of X) D.push(`${de}:${re}`);
        }
        const oe = await this.client.core.crypto.generateSharedKey(W, F.publicKey);
        let Z;
        ce.length > 0 && (Z = { topic: oe, acknowledged: !0, self: { publicKey: W, metadata: this.client.metadata }, peer: F, controller: F.publicKey, expiry: En(Kc), requiredNamespaces: {}, optionalNamespaces: {}, relay: { protocol: "irn" }, pairingTopic: $, namespaces: Qx([...new Set(ce)], [...new Set(D)]), transportType: o }, await this.client.core.relayer.subscribe(oe, { transportType: o }), await this.client.session.set(oe, Z), $ && await this.client.core.pairing.updateMetadata({ topic: $, metadata: F.metadata }), Z = this.client.session.get(oe)), (E = this.client.metadata.redirect) != null && E.linkMode && (v = F.metadata.redirect) != null && v.linkMode && (P = F.metadata.redirect) != null && P.universal && n && (this.client.core.addLinkModeSupportedApp(F.metadata.redirect.universal), this.client.session.update(oe, { transportType: zr.link_mode })), Y({ auths: I, session: Z });
      }, g = ua(), b = ua();
      this.events.once(br("session_connect"), m), this.events.once(br("session_request", g), f);
      let x;
      try {
        if (s) {
          const _ = da("wc_sessionAuthenticate", R, g);
          this.client.core.history.set($, _);
          const E = await this.client.core.crypto.encode("", _, { type: th, encoding: Af });
          x = fd(n, $, E);
        } else await Promise.all([this.sendRequest({ topic: $, method: "wc_sessionAuthenticate", params: R, expiry: r.expiry, throwOnFailedPublish: !0, clientRpcId: g }), this.sendRequest({ topic: $, method: "wc_sessionPropose", params: ge, expiry: In.wc_sessionPropose.req.ttl, throwOnFailedPublish: !0, clientRpcId: b })]);
      } catch (_) {
        throw this.events.off(br("session_connect"), m), this.events.off(br("session_request", g), f), _;
      }
      return await this.setProposal(b, tn({ id: b }, ge)), await this.setAuthRequest(g, { request: bs(tn({}, R), { verifyContext: {} }), pairingTopic: $, transportType: o }), { uri: x ?? H, response: Ee };
    }, this.approveSessionAuthenticate = async (r) => {
      const { id: n, auths: i } = r, s = this.client.core.eventClient.createEvent({ properties: { topic: n.toString(), trace: [Ka.authenticated_session_approve_started] } });
      try {
        this.isInitialized();
      } catch (L) {
        throw s.setError(If.no_internet_connection), L;
      }
      const o = this.getPendingAuthRequest(n);
      if (!o) throw s.setError(If.authenticated_session_pending_request_not_found), new Error(`Could not find pending auth request with id ${n}`);
      const a = o.transportType || zr.relay;
      a === zr.relay && await this.confirmOnlineStateOrThrow();
      const u = o.requester.publicKey, l = await this.client.core.crypto.generateKeyPair(), d = Td(u), p = { type: Co, receiverPublicKey: u, senderPublicKey: l }, w = [], A = [];
      for (const L of i) {
        if (!await qx({ cacao: L, projectId: this.client.core.projectId })) {
          s.setError(If.invalid_cacao);
          const V = Or("SESSION_SETTLEMENT_FAILED", "Signature verification failed");
          throw await this.sendError({ id: n, topic: d, error: V, encodeOpts: p }), new Error(V.message);
        }
        s.addTrace(Ka.cacaos_verified);
        const { p: B } = L, $ = Cd(B.resources), H = [M1(B.iss)], W = u0(B.iss);
        if ($) {
          const V = zx($), te = Wx($);
          w.push(...V), H.push(...te);
        }
        for (const V of H) A.push(`${V}:${W}`);
      }
      const M = await this.client.core.crypto.generateSharedKey(l, u);
      s.addTrace(Ka.create_authenticated_session_topic);
      let N;
      if ((w == null ? void 0 : w.length) > 0) {
        N = { topic: M, acknowledged: !0, self: { publicKey: l, metadata: this.client.metadata }, peer: { publicKey: u, metadata: o.requester.metadata }, controller: u, expiry: En(Kc), authentication: i, requiredNamespaces: {}, optionalNamespaces: {}, relay: { protocol: "irn" }, pairingTopic: o.pairingTopic, namespaces: Qx([...new Set(w)], [...new Set(A)]), transportType: a }, s.addTrace(Ka.subscribing_authenticated_session_topic);
        try {
          await this.client.core.relayer.subscribe(M, { transportType: a });
        } catch (L) {
          throw s.setError(If.subscribe_authenticated_session_topic_failure), L;
        }
        s.addTrace(Ka.subscribe_authenticated_session_topic_success), await this.client.session.set(M, N), s.addTrace(Ka.store_authenticated_session), await this.client.core.pairing.updateMetadata({ topic: o.pairingTopic, metadata: o.requester.metadata });
      }
      s.addTrace(Ka.publishing_authenticated_session_approve);
      try {
        await this.sendResult({ topic: d, id: n, result: { cacaos: i, responder: { publicKey: l, metadata: this.client.metadata } }, encodeOpts: p, throwOnFailedPublish: !0, appLink: this.getAppLinkIfEnabled(o.requester.metadata, a) });
      } catch (L) {
        throw s.setError(If.authenticated_session_approve_publish_failure), L;
      }
      return await this.client.auth.requests.delete(n, { message: "fulfilled", code: 0 }), await this.client.core.pairing.activate({ topic: o.pairingTopic }), this.client.core.eventClient.deleteEvent({ eventId: s.eventId }), { session: N };
    }, this.rejectSessionAuthenticate = async (r) => {
      this.isInitialized();
      const { id: n, reason: i } = r, s = this.getPendingAuthRequest(n);
      if (!s) throw new Error(`Could not find pending auth request with id ${n}`);
      s.transportType === zr.relay && await this.confirmOnlineStateOrThrow();
      const o = s.requester.publicKey, a = await this.client.core.crypto.generateKeyPair(), u = Td(o), l = { type: Co, receiverPublicKey: o, senderPublicKey: a };
      await this.sendError({ id: n, topic: u, error: i, encodeOpts: l, rpcOpts: In.wc_sessionAuthenticate.reject, appLink: this.getAppLinkIfEnabled(s.requester.metadata, s.transportType) }), await this.client.auth.requests.delete(n, { message: "rejected", code: 0 }), await this.client.proposal.delete(n, Or("USER_DISCONNECTED"));
    }, this.formatAuthMessage = (r) => {
      this.isInitialized();
      const { request: n, iss: i } = r;
      return F8(n, i);
    }, this.processRelayMessageCache = () => {
      setTimeout(async () => {
        if (this.relayMessageCache.length !== 0) for (; this.relayMessageCache.length > 0; ) try {
          const r = this.relayMessageCache.shift();
          r && await this.onRelayMessage(r);
        } catch (r) {
          this.client.logger.error(r);
        }
      }, 50);
    }, this.cleanupDuplicatePairings = async (r) => {
      if (r.pairingTopic) try {
        const n = this.client.core.pairing.pairings.get(r.pairingTopic), i = this.client.core.pairing.pairings.getAll().filter((s) => {
          var o, a;
          return ((o = s.peerMetadata) == null ? void 0 : o.url) && ((a = s.peerMetadata) == null ? void 0 : a.url) === r.peer.metadata.url && s.topic && s.topic !== n.topic;
        });
        if (i.length === 0) return;
        this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`), await Promise.all(i.map((s) => this.client.core.pairing.disconnect({ topic: s.topic }))), this.client.logger.info("Duplicate pairings clean up finished");
      } catch (n) {
        this.client.logger.error(n);
      }
    }, this.deleteSession = async (r) => {
      var n;
      const { topic: i, expirerHasDeleted: s = !1, emitEvent: o = !0, id: a = 0 } = r, { self: u } = this.client.session.get(i);
      await this.client.core.relayer.unsubscribe(i), await this.client.session.delete(i, Or("USER_DISCONNECTED")), this.addToRecentlyDeleted(i, "session"), this.client.core.crypto.keychain.has(u.publicKey) && await this.client.core.crypto.deleteKeyPair(u.publicKey), this.client.core.crypto.keychain.has(i) && await this.client.core.crypto.deleteSymKey(i), s || this.client.core.expirer.del(i), this.client.core.storage.removeItem(O3).catch((l) => this.client.logger.warn(l)), this.getPendingSessionRequests().forEach((l) => {
        l.topic === i && this.deletePendingSessionRequest(l.id, Or("USER_DISCONNECTED"));
      }), i === ((n = this.sessionRequestQueue.queue[0]) == null ? void 0 : n.topic) && (this.sessionRequestQueue.state = ks.idle), o && this.client.events.emit("session_delete", { id: a, topic: i });
    }, this.deleteProposal = async (r, n) => {
      if (n) try {
        const i = this.client.proposal.get(r), s = this.client.core.eventClient.getEvent({ topic: i.pairingTopic });
        s == null || s.setError(Ha.proposal_expired);
      } catch {
      }
      await Promise.all([this.client.proposal.delete(r, Or("USER_DISCONNECTED")), n ? Promise.resolve() : this.client.core.expirer.del(r)]), this.addToRecentlyDeleted(r, "proposal");
    }, this.deletePendingSessionRequest = async (r, n, i = !1) => {
      await Promise.all([this.client.pendingRequest.delete(r, n), i ? Promise.resolve() : this.client.core.expirer.del(r)]), this.addToRecentlyDeleted(r, "request"), this.sessionRequestQueue.queue = this.sessionRequestQueue.queue.filter((s) => s.id !== r), i && (this.sessionRequestQueue.state = ks.idle, this.client.events.emit("session_request_expire", { id: r }));
    }, this.deletePendingAuthRequest = async (r, n, i = !1) => {
      await Promise.all([this.client.auth.requests.delete(r, n), i ? Promise.resolve() : this.client.core.expirer.del(r)]);
    }, this.setExpiry = async (r, n) => {
      this.client.session.keys.includes(r) && (this.client.core.expirer.set(r, n), await this.client.session.update(r, { expiry: n }));
    }, this.setProposal = async (r, n) => {
      this.client.core.expirer.set(r, En(In.wc_sessionPropose.req.ttl)), await this.client.proposal.set(r, n);
    }, this.setAuthRequest = async (r, n) => {
      const { request: i, pairingTopic: s, transportType: o = zr.relay } = n;
      this.client.core.expirer.set(r, i.expiryTimestamp), await this.client.auth.requests.set(r, { authPayload: i.authPayload, requester: i.requester, expiryTimestamp: i.expiryTimestamp, id: r, pairingTopic: s, verifyContext: i.verifyContext, transportType: o });
    }, this.setPendingSessionRequest = async (r) => {
      const { id: n, topic: i, params: s, verifyContext: o } = r, a = s.request.expiryTimestamp || En(In.wc_sessionRequest.req.ttl);
      this.client.core.expirer.set(n, a), await this.client.pendingRequest.set(n, { id: n, topic: i, params: s, verifyContext: o });
    }, this.sendRequest = async (r) => {
      const { topic: n, method: i, params: s, expiry: o, relayRpcId: a, clientRpcId: u, throwOnFailedPublish: l, appLink: d } = r, p = da(i, s, u);
      let w;
      const A = !!d;
      try {
        const L = A ? Af : ha;
        w = await this.client.core.crypto.encode(n, p, { encoding: L });
      } catch (L) {
        throw await this.cleanup(), this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`), L;
      }
      let M;
      if (OV.includes(i)) {
        const L = xo(JSON.stringify(p)), B = xo(w);
        M = await this.client.core.verify.register({ id: B, decryptedId: L });
      }
      const N = In[i].req;
      if (N.attestation = M, o && (N.ttl = o), a && (N.id = a), this.client.core.history.set(n, p), A) {
        const L = fd(d, n, w);
        await global.Linking.openURL(L, this.client.name);
      } else {
        const L = In[i].req;
        o && (L.ttl = o), a && (L.id = a), l ? (L.internal = bs(tn({}, L.internal), { throwOnFailedPublish: !0 }), await this.client.core.relayer.publish(n, w, L)) : this.client.core.relayer.publish(n, w, L).catch((B) => this.client.logger.error(B));
      }
      return p.id;
    }, this.sendResult = async (r) => {
      const { id: n, topic: i, result: s, throwOnFailedPublish: o, encodeOpts: a, appLink: u } = r, l = rp(n, s);
      let d;
      const p = u && typeof (global == null ? void 0 : global.Linking) < "u";
      try {
        const A = p ? Af : ha;
        d = await this.client.core.crypto.encode(i, l, bs(tn({}, a || {}), { encoding: A }));
      } catch (A) {
        throw await this.cleanup(), this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`), A;
      }
      let w;
      try {
        w = await this.client.core.history.get(i, n);
      } catch (A) {
        throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`), A;
      }
      if (p) {
        const A = fd(u, i, d);
        await global.Linking.openURL(A, this.client.name);
      } else {
        const A = In[w.request.method].res;
        o ? (A.internal = bs(tn({}, A.internal), { throwOnFailedPublish: !0 }), await this.client.core.relayer.publish(i, d, A)) : this.client.core.relayer.publish(i, d, A).catch((M) => this.client.logger.error(M));
      }
      await this.client.core.history.resolve(l);
    }, this.sendError = async (r) => {
      const { id: n, topic: i, error: s, encodeOpts: o, rpcOpts: a, appLink: u } = r, l = np(n, s);
      let d;
      const p = u && typeof (global == null ? void 0 : global.Linking) < "u";
      try {
        const A = p ? Af : ha;
        d = await this.client.core.crypto.encode(i, l, bs(tn({}, o || {}), { encoding: A }));
      } catch (A) {
        throw await this.cleanup(), this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`), A;
      }
      let w;
      try {
        w = await this.client.core.history.get(i, n);
      } catch (A) {
        throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`), A;
      }
      if (p) {
        const A = fd(u, i, d);
        await global.Linking.openURL(A, this.client.name);
      } else {
        const A = a || In[w.request.method].res;
        this.client.core.relayer.publish(i, d, A);
      }
      await this.client.core.history.resolve(l);
    }, this.cleanup = async () => {
      const r = [], n = [];
      this.client.session.getAll().forEach((i) => {
        let s = !1;
        ca(i.expiry) && (s = !0), this.client.core.crypto.keychain.has(i.topic) || (s = !0), s && r.push(i.topic);
      }), this.client.proposal.getAll().forEach((i) => {
        ca(i.expiryTimestamp) && n.push(i.id);
      }), await Promise.all([...r.map((i) => this.deleteSession({ topic: i })), ...n.map((i) => this.deleteProposal(i))]);
    }, this.onRelayEventRequest = async (r) => {
      this.requestQueue.queue.push(r), await this.processRequestsQueue();
    }, this.processRequestsQueue = async () => {
      if (this.requestQueue.state === ks.active) {
        this.client.logger.info("Request queue already active, skipping...");
        return;
      }
      for (this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`); this.requestQueue.queue.length > 0; ) {
        this.requestQueue.state = ks.active;
        const r = this.requestQueue.queue.shift();
        if (r) try {
          await this.processRequest(r);
        } catch (n) {
          this.client.logger.warn(n);
        }
      }
      this.requestQueue.state = ks.idle;
    }, this.processRequest = async (r) => {
      const { topic: n, payload: i, attestation: s, transportType: o, encryptedId: a } = r, u = i.method;
      if (!this.shouldIgnorePairingRequest({ topic: n, requestMethod: u })) switch (u) {
        case "wc_sessionPropose":
          return await this.onSessionProposeRequest({ topic: n, payload: i, attestation: s, encryptedId: a });
        case "wc_sessionSettle":
          return await this.onSessionSettleRequest(n, i);
        case "wc_sessionUpdate":
          return await this.onSessionUpdateRequest(n, i);
        case "wc_sessionExtend":
          return await this.onSessionExtendRequest(n, i);
        case "wc_sessionPing":
          return await this.onSessionPingRequest(n, i);
        case "wc_sessionDelete":
          return await this.onSessionDeleteRequest(n, i);
        case "wc_sessionRequest":
          return await this.onSessionRequest({ topic: n, payload: i, attestation: s, encryptedId: a, transportType: o });
        case "wc_sessionEvent":
          return await this.onSessionEventRequest(n, i);
        case "wc_sessionAuthenticate":
          return await this.onSessionAuthenticateRequest({ topic: n, payload: i, attestation: s, encryptedId: a, transportType: o });
        default:
          return this.client.logger.info(`Unsupported request method ${u}`);
      }
    }, this.onRelayEventResponse = async (r) => {
      const { topic: n, payload: i, transportType: s } = r, o = (await this.client.core.history.get(n, i.id)).request.method;
      switch (o) {
        case "wc_sessionPropose":
          return this.onSessionProposeResponse(n, i, s);
        case "wc_sessionSettle":
          return this.onSessionSettleResponse(n, i);
        case "wc_sessionUpdate":
          return this.onSessionUpdateResponse(n, i);
        case "wc_sessionExtend":
          return this.onSessionExtendResponse(n, i);
        case "wc_sessionPing":
          return this.onSessionPingResponse(n, i);
        case "wc_sessionRequest":
          return this.onSessionRequestResponse(n, i);
        case "wc_sessionAuthenticate":
          return this.onSessionAuthenticateResponse(n, i);
        default:
          return this.client.logger.info(`Unsupported response method ${o}`);
      }
    }, this.onRelayEventUnknownPayload = (r) => {
      const { topic: n } = r, { message: i } = ft("MISSING_OR_INVALID", `Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);
      throw new Error(i);
    }, this.shouldIgnorePairingRequest = (r) => {
      const { topic: n, requestMethod: i } = r, s = this.expectedPairingMethodMap.get(n);
      return !s || s.includes(i) ? !1 : !!(s.includes("wc_sessionAuthenticate") && this.client.events.listenerCount("session_authenticate") > 0);
    }, this.onSessionProposeRequest = async (r) => {
      const { topic: n, payload: i, attestation: s, encryptedId: o } = r, { params: a, id: u } = i;
      try {
        const l = this.client.core.eventClient.getEvent({ topic: n });
        this.isValidConnect(tn({}, i.params));
        const d = a.expiryTimestamp || En(In.wc_sessionPropose.req.ttl), p = tn({ id: u, pairingTopic: n, expiryTimestamp: d }, a);
        await this.setProposal(u, p);
        const w = await this.getVerifyContext({ attestationId: s, hash: xo(JSON.stringify(i)), encryptedId: o, metadata: p.proposer.metadata });
        this.client.events.listenerCount("session_proposal") === 0 && (console.warn("No listener for session_proposal event"), l == null || l.setError(wo.proposal_listener_not_found)), l == null || l.addTrace(Fs.emit_session_proposal), this.client.events.emit("session_proposal", { id: u, params: p, verifyContext: w });
      } catch (l) {
        await this.sendError({ id: u, topic: n, error: l, rpcOpts: In.wc_sessionPropose.autoReject }), this.client.logger.error(l);
      }
    }, this.onSessionProposeResponse = async (r, n, i) => {
      const { id: s } = n;
      if (js(n)) {
        const { result: o } = n;
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", result: o });
        const a = this.client.proposal.get(s);
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", proposal: a });
        const u = a.proposer.publicKey;
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", selfPublicKey: u });
        const l = o.responderPublicKey;
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", peerPublicKey: l });
        const d = await this.client.core.crypto.generateSharedKey(u, l);
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", sessionTopic: d });
        const p = await this.client.core.relayer.subscribe(d, { transportType: i });
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", subscriptionId: p }), await this.client.core.pairing.activate({ topic: r });
      } else if (Zi(n)) {
        await this.client.proposal.delete(s, Or("USER_DISCONNECTED"));
        const o = br("session_connect");
        if (this.events.listenerCount(o) === 0) throw new Error(`emitting ${o} without any listeners, 954`);
        this.events.emit(br("session_connect"), { error: n.error });
      }
    }, this.onSessionSettleRequest = async (r, n) => {
      const { id: i, params: s } = n;
      try {
        this.isValidSessionSettleRequest(s);
        const { relay: o, controller: a, expiry: u, namespaces: l, sessionProperties: d, sessionConfig: p } = n.params, w = bs(tn(tn({ topic: r, relay: o, expiry: u, namespaces: l, acknowledged: !0, pairingTopic: "", requiredNamespaces: {}, optionalNamespaces: {}, controller: a.publicKey, self: { publicKey: "", metadata: this.client.metadata }, peer: { publicKey: a.publicKey, metadata: a.metadata } }, d && { sessionProperties: d }), p && { sessionConfig: p }), { transportType: zr.relay }), A = br("session_connect");
        if (this.events.listenerCount(A) === 0) throw new Error(`emitting ${A} without any listeners 997`);
        this.events.emit(br("session_connect"), { session: w }), await this.sendResult({ id: n.id, topic: r, result: !0, throwOnFailedPublish: !0 });
      } catch (o) {
        await this.sendError({ id: i, topic: r, error: o }), this.client.logger.error(o);
      }
    }, this.onSessionSettleResponse = async (r, n) => {
      const { id: i } = n;
      js(n) ? (await this.client.session.update(r, { acknowledged: !0 }), this.events.emit(br("session_approve", i), {})) : Zi(n) && (await this.client.session.delete(r, Or("USER_DISCONNECTED")), this.events.emit(br("session_approve", i), { error: n.error }));
    }, this.onSessionUpdateRequest = async (r, n) => {
      const { params: i, id: s } = n;
      try {
        const o = `${r}_session_update`, a = Pf.get(o);
        if (a && this.isRequestOutOfSync(a, s)) {
          this.client.logger.info(`Discarding out of sync request - ${s}`), this.sendError({ id: s, topic: r, error: Or("INVALID_UPDATE_REQUEST") });
          return;
        }
        this.isValidUpdate(tn({ topic: r }, i));
        try {
          Pf.set(o, s), await this.client.session.update(r, { namespaces: i.namespaces }), await this.sendResult({ id: s, topic: r, result: !0, throwOnFailedPublish: !0 });
        } catch (u) {
          throw Pf.delete(o), u;
        }
        this.client.events.emit("session_update", { id: s, topic: r, params: i });
      } catch (o) {
        await this.sendError({ id: s, topic: r, error: o }), this.client.logger.error(o);
      }
    }, this.isRequestOutOfSync = (r, n) => parseInt(n.toString().slice(0, -3)) <= parseInt(r.toString().slice(0, -3)), this.onSessionUpdateResponse = (r, n) => {
      const { id: i } = n, s = br("session_update", i);
      if (this.events.listenerCount(s) === 0) throw new Error(`emitting ${s} without any listeners`);
      js(n) ? this.events.emit(br("session_update", i), {}) : Zi(n) && this.events.emit(br("session_update", i), { error: n.error });
    }, this.onSessionExtendRequest = async (r, n) => {
      const { id: i } = n;
      try {
        this.isValidExtend({ topic: r }), await this.setExpiry(r, En(Kc)), await this.sendResult({ id: i, topic: r, result: !0, throwOnFailedPublish: !0 }), this.client.events.emit("session_extend", { id: i, topic: r });
      } catch (s) {
        await this.sendError({ id: i, topic: r, error: s }), this.client.logger.error(s);
      }
    }, this.onSessionExtendResponse = (r, n) => {
      const { id: i } = n, s = br("session_extend", i);
      if (this.events.listenerCount(s) === 0) throw new Error(`emitting ${s} without any listeners`);
      js(n) ? this.events.emit(br("session_extend", i), {}) : Zi(n) && this.events.emit(br("session_extend", i), { error: n.error });
    }, this.onSessionPingRequest = async (r, n) => {
      const { id: i } = n;
      try {
        this.isValidPing({ topic: r }), await this.sendResult({ id: i, topic: r, result: !0, throwOnFailedPublish: !0 }), this.client.events.emit("session_ping", { id: i, topic: r });
      } catch (s) {
        await this.sendError({ id: i, topic: r, error: s }), this.client.logger.error(s);
      }
    }, this.onSessionPingResponse = (r, n) => {
      const { id: i } = n, s = br("session_ping", i);
      if (this.events.listenerCount(s) === 0) throw new Error(`emitting ${s} without any listeners`);
      setTimeout(() => {
        js(n) ? this.events.emit(br("session_ping", i), {}) : Zi(n) && this.events.emit(br("session_ping", i), { error: n.error });
      }, 500);
    }, this.onSessionDeleteRequest = async (r, n) => {
      const { id: i } = n;
      try {
        this.isValidDisconnect({ topic: r, reason: n.params }), Promise.all([new Promise((s) => {
          this.client.core.relayer.once(oi.publish, async () => {
            s(await this.deleteSession({ topic: r, id: i }));
          });
        }), this.sendResult({ id: i, topic: r, result: !0, throwOnFailedPublish: !0 }), this.cleanupPendingSentRequestsForTopic({ topic: r, error: Or("USER_DISCONNECTED") })]).catch((s) => this.client.logger.error(s));
      } catch (s) {
        this.client.logger.error(s);
      }
    }, this.onSessionRequest = async (r) => {
      var n, i, s;
      const { topic: o, payload: a, attestation: u, encryptedId: l, transportType: d } = r, { id: p, params: w } = a;
      try {
        await this.isValidRequest(tn({ topic: o }, w));
        const A = this.client.session.get(o), M = await this.getVerifyContext({ attestationId: u, hash: xo(JSON.stringify(da("wc_sessionRequest", w, p))), encryptedId: l, metadata: A.peer.metadata, transportType: d }), N = { id: p, topic: o, params: w, verifyContext: M };
        await this.setPendingSessionRequest(N), d === zr.link_mode && (n = A.peer.metadata.redirect) != null && n.universal && this.client.core.addLinkModeSupportedApp((i = A.peer.metadata.redirect) == null ? void 0 : i.universal), (s = this.client.signConfig) != null && s.disableRequestQueue ? this.emitSessionRequest(N) : (this.addSessionRequestToSessionRequestQueue(N), this.processSessionRequestQueue());
      } catch (A) {
        await this.sendError({ id: p, topic: o, error: A }), this.client.logger.error(A);
      }
    }, this.onSessionRequestResponse = (r, n) => {
      const { id: i } = n, s = br("session_request", i);
      if (this.events.listenerCount(s) === 0) throw new Error(`emitting ${s} without any listeners`);
      js(n) ? this.events.emit(br("session_request", i), { result: n.result }) : Zi(n) && this.events.emit(br("session_request", i), { error: n.error });
    }, this.onSessionEventRequest = async (r, n) => {
      const { id: i, params: s } = n;
      try {
        const o = `${r}_session_event_${s.event.name}`, a = Pf.get(o);
        if (a && this.isRequestOutOfSync(a, i)) {
          this.client.logger.info(`Discarding out of sync request - ${i}`);
          return;
        }
        this.isValidEmit(tn({ topic: r }, s)), this.client.events.emit("session_event", { id: i, topic: r, params: s }), Pf.set(o, i);
      } catch (o) {
        await this.sendError({ id: i, topic: r, error: o }), this.client.logger.error(o);
      }
    }, this.onSessionAuthenticateResponse = (r, n) => {
      const { id: i } = n;
      this.client.logger.trace({ type: "method", method: "onSessionAuthenticateResponse", topic: r, payload: n }), js(n) ? this.events.emit(br("session_request", i), { result: n.result }) : Zi(n) && this.events.emit(br("session_request", i), { error: n.error });
    }, this.onSessionAuthenticateRequest = async (r) => {
      var n;
      const { topic: i, payload: s, attestation: o, encryptedId: a, transportType: u } = r;
      try {
        const { requester: l, authPayload: d, expiryTimestamp: p } = s.params, w = await this.getVerifyContext({ attestationId: o, hash: xo(JSON.stringify(s)), encryptedId: a, metadata: l.metadata, transportType: u }), A = { requester: l, pairingTopic: i, id: s.id, authPayload: d, verifyContext: w, expiryTimestamp: p };
        await this.setAuthRequest(s.id, { request: A, pairingTopic: i, transportType: u }), u === zr.link_mode && (n = l.metadata.redirect) != null && n.universal && this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal), this.client.events.emit("session_authenticate", { topic: i, params: s.params, id: s.id, verifyContext: w });
      } catch (l) {
        this.client.logger.error(l);
        const d = s.params.requester.publicKey, p = await this.client.core.crypto.generateKeyPair(), w = this.getAppLinkIfEnabled(s.params.requester.metadata, u), A = { type: Co, receiverPublicKey: d, senderPublicKey: p };
        await this.sendError({ id: s.id, topic: i, error: l, encodeOpts: A, rpcOpts: In.wc_sessionAuthenticate.autoReject, appLink: w });
      }
    }, this.addSessionRequestToSessionRequestQueue = (r) => {
      this.sessionRequestQueue.queue.push(r);
    }, this.cleanupAfterResponse = (r) => {
      this.deletePendingSessionRequest(r.response.id, { message: "fulfilled", code: 0 }), setTimeout(() => {
        this.sessionRequestQueue.state = ks.idle, this.processSessionRequestQueue();
      }, mt.toMiliseconds(this.requestQueueDelay));
    }, this.cleanupPendingSentRequestsForTopic = ({ topic: r, error: n }) => {
      const i = this.client.core.history.pending;
      i.length > 0 && i.filter((s) => s.topic === r && s.request.method === "wc_sessionRequest").forEach((s) => {
        const o = s.request.id, a = br("session_request", o);
        if (this.events.listenerCount(a) === 0) throw new Error(`emitting ${a} without any listeners`);
        this.events.emit(br("session_request", s.request.id), { error: n });
      });
    }, this.processSessionRequestQueue = () => {
      if (this.sessionRequestQueue.state === ks.active) {
        this.client.logger.info("session request queue is already active.");
        return;
      }
      const r = this.sessionRequestQueue.queue[0];
      if (!r) {
        this.client.logger.info("session request queue is empty.");
        return;
      }
      try {
        this.sessionRequestQueue.state = ks.active, this.emitSessionRequest(r);
      } catch (n) {
        this.client.logger.error(n);
      }
    }, this.emitSessionRequest = (r) => {
      this.client.events.emit("session_request", r);
    }, this.onPairingCreated = (r) => {
      if (r.methods && this.expectedPairingMethodMap.set(r.topic, r.methods), r.active) return;
      const n = this.client.proposal.getAll().find((i) => i.pairingTopic === r.topic);
      n && this.onSessionProposeRequest({ topic: r.topic, payload: da("wc_sessionPropose", { requiredNamespaces: n.requiredNamespaces, optionalNamespaces: n.optionalNamespaces, relays: n.relays, proposer: n.proposer, sessionProperties: n.sessionProperties }, n.id) });
    }, this.isValidConnect = async (r) => {
      if (!gi(r)) {
        const { message: u } = ft("MISSING_OR_INVALID", `connect() params: ${JSON.stringify(r)}`);
        throw new Error(u);
      }
      const { pairingTopic: n, requiredNamespaces: i, optionalNamespaces: s, sessionProperties: o, relays: a } = r;
      if (mi(n) || await this.isValidPairingTopic(n), !aW(a)) {
        const { message: u } = ft("MISSING_OR_INVALID", `connect() relays: ${a}`);
        throw new Error(u);
      }
      !mi(i) && Sl(i) !== 0 && this.validateNamespaces(i, "requiredNamespaces"), !mi(s) && Sl(s) !== 0 && this.validateNamespaces(s, "optionalNamespaces"), mi(o) || this.validateSessionProps(o, "sessionProperties");
    }, this.validateNamespaces = (r, n) => {
      const i = oW(r, "connect()", n);
      if (i) throw new Error(i.message);
    }, this.isValidApprove = async (r) => {
      if (!gi(r)) throw new Error(ft("MISSING_OR_INVALID", `approve() params: ${r}`).message);
      const { id: n, namespaces: i, relayProtocol: s, sessionProperties: o } = r;
      this.checkRecentlyDeleted(n), await this.isValidProposalId(n);
      const a = this.client.proposal.get(n), u = hm(i, "approve()");
      if (u) throw new Error(u.message);
      const l = r3(a.requiredNamespaces, i, "approve()");
      if (l) throw new Error(l.message);
      if (!dn(s, !0)) {
        const { message: d } = ft("MISSING_OR_INVALID", `approve() relayProtocol: ${s}`);
        throw new Error(d);
      }
      mi(o) || this.validateSessionProps(o, "sessionProperties");
    }, this.isValidReject = async (r) => {
      if (!gi(r)) {
        const { message: s } = ft("MISSING_OR_INVALID", `reject() params: ${r}`);
        throw new Error(s);
      }
      const { id: n, reason: i } = r;
      if (this.checkRecentlyDeleted(n), await this.isValidProposalId(n), !uW(i)) {
        const { message: s } = ft("MISSING_OR_INVALID", `reject() reason: ${JSON.stringify(i)}`);
        throw new Error(s);
      }
    }, this.isValidSessionSettleRequest = (r) => {
      if (!gi(r)) {
        const { message: l } = ft("MISSING_OR_INVALID", `onSessionSettleRequest() params: ${r}`);
        throw new Error(l);
      }
      const { relay: n, controller: i, namespaces: s, expiry: o } = r;
      if (!V8(n)) {
        const { message: l } = ft("MISSING_OR_INVALID", "onSessionSettleRequest() relay protocol should be a string");
        throw new Error(l);
      }
      const a = eW(i, "onSessionSettleRequest()");
      if (a) throw new Error(a.message);
      const u = hm(s, "onSessionSettleRequest()");
      if (u) throw new Error(u.message);
      if (ca(o)) {
        const { message: l } = ft("EXPIRED", "onSessionSettleRequest()");
        throw new Error(l);
      }
    }, this.isValidUpdate = async (r) => {
      if (!gi(r)) {
        const { message: u } = ft("MISSING_OR_INVALID", `update() params: ${r}`);
        throw new Error(u);
      }
      const { topic: n, namespaces: i } = r;
      this.checkRecentlyDeleted(n), await this.isValidSessionTopic(n);
      const s = this.client.session.get(n), o = hm(i, "update()");
      if (o) throw new Error(o.message);
      const a = r3(s.requiredNamespaces, i, "update()");
      if (a) throw new Error(a.message);
    }, this.isValidExtend = async (r) => {
      if (!gi(r)) {
        const { message: i } = ft("MISSING_OR_INVALID", `extend() params: ${r}`);
        throw new Error(i);
      }
      const { topic: n } = r;
      this.checkRecentlyDeleted(n), await this.isValidSessionTopic(n);
    }, this.isValidRequest = async (r) => {
      if (!gi(r)) {
        const { message: u } = ft("MISSING_OR_INVALID", `request() params: ${r}`);
        throw new Error(u);
      }
      const { topic: n, request: i, chainId: s, expiry: o } = r;
      this.checkRecentlyDeleted(n), await this.isValidSessionTopic(n);
      const { namespaces: a } = this.client.session.get(n);
      if (!t3(a, s)) {
        const { message: u } = ft("MISSING_OR_INVALID", `request() chainId: ${s}`);
        throw new Error(u);
      }
      if (!fW(i)) {
        const { message: u } = ft("MISSING_OR_INVALID", `request() ${JSON.stringify(i)}`);
        throw new Error(u);
      }
      if (!dW(a, s, i.method)) {
        const { message: u } = ft("MISSING_OR_INVALID", `request() method: ${i.method}`);
        throw new Error(u);
      }
      if (o && !vW(o, vm)) {
        const { message: u } = ft("MISSING_OR_INVALID", `request() expiry: ${o}. Expiry must be a number (in seconds) between ${vm.min} and ${vm.max}`);
        throw new Error(u);
      }
    }, this.isValidRespond = async (r) => {
      var n;
      if (!gi(r)) {
        const { message: o } = ft("MISSING_OR_INVALID", `respond() params: ${r}`);
        throw new Error(o);
      }
      const { topic: i, response: s } = r;
      try {
        await this.isValidSessionTopic(i);
      } catch (o) {
        throw (n = r == null ? void 0 : r.response) != null && n.id && this.cleanupAfterResponse(r), o;
      }
      if (!lW(s)) {
        const { message: o } = ft("MISSING_OR_INVALID", `respond() response: ${JSON.stringify(s)}`);
        throw new Error(o);
      }
    }, this.isValidPing = async (r) => {
      if (!gi(r)) {
        const { message: i } = ft("MISSING_OR_INVALID", `ping() params: ${r}`);
        throw new Error(i);
      }
      const { topic: n } = r;
      await this.isValidSessionOrPairingTopic(n);
    }, this.isValidEmit = async (r) => {
      if (!gi(r)) {
        const { message: a } = ft("MISSING_OR_INVALID", `emit() params: ${r}`);
        throw new Error(a);
      }
      const { topic: n, event: i, chainId: s } = r;
      await this.isValidSessionTopic(n);
      const { namespaces: o } = this.client.session.get(n);
      if (!t3(o, s)) {
        const { message: a } = ft("MISSING_OR_INVALID", `emit() chainId: ${s}`);
        throw new Error(a);
      }
      if (!hW(i)) {
        const { message: a } = ft("MISSING_OR_INVALID", `emit() event: ${JSON.stringify(i)}`);
        throw new Error(a);
      }
      if (!pW(o, s, i.name)) {
        const { message: a } = ft("MISSING_OR_INVALID", `emit() event: ${JSON.stringify(i)}`);
        throw new Error(a);
      }
    }, this.isValidDisconnect = async (r) => {
      if (!gi(r)) {
        const { message: i } = ft("MISSING_OR_INVALID", `disconnect() params: ${r}`);
        throw new Error(i);
      }
      const { topic: n } = r;
      await this.isValidSessionOrPairingTopic(n);
    }, this.isValidAuthenticate = (r) => {
      const { chains: n, uri: i, domain: s, nonce: o } = r;
      if (!Array.isArray(n) || n.length === 0) throw new Error("chains is required and must be a non-empty array");
      if (!dn(i, !1)) throw new Error("uri is required parameter");
      if (!dn(s, !1)) throw new Error("domain is required parameter");
      if (!dn(o, !1)) throw new Error("nonce is required parameter");
      if ([...new Set(n.map((u) => hu(u).namespace))].length > 1) throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");
      const { namespace: a } = hu(n[0]);
      if (a !== "eip155") throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.");
    }, this.getVerifyContext = async (r) => {
      const { attestationId: n, hash: i, encryptedId: s, metadata: o, transportType: a } = r, u = { verified: { verifyUrl: o.verifyUrl || Wf, validation: "UNKNOWN", origin: o.url || "" } };
      try {
        if (a === zr.link_mode) {
          const d = this.getAppLinkIfEnabled(o, a);
          return u.verified.validation = d && new URL(d).origin === new URL(o.url).origin ? "VALID" : "INVALID", u;
        }
        const l = await this.client.core.verify.resolve({ attestationId: n, hash: i, encryptedId: s, verifyUrl: o.verifyUrl });
        l && (u.verified.origin = l.origin, u.verified.isScam = l.isScam, u.verified.validation = l.origin === new URL(o.url).origin ? "VALID" : "INVALID");
      } catch (l) {
        this.client.logger.warn(l);
      }
      return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`), u;
    }, this.validateSessionProps = (r, n) => {
      Object.values(r).forEach((i) => {
        if (!dn(i, !1)) {
          const { message: s } = ft("MISSING_OR_INVALID", `${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);
          throw new Error(s);
        }
      });
    }, this.getPendingAuthRequest = (r) => {
      const n = this.client.auth.requests.get(r);
      return typeof n == "object" ? n : void 0;
    }, this.addToRecentlyDeleted = (r, n) => {
      if (this.recentlyDeletedMap.set(r, n), this.recentlyDeletedMap.size >= this.recentlyDeletedLimit) {
        let i = 0;
        const s = this.recentlyDeletedLimit / 2;
        for (const o of this.recentlyDeletedMap.keys()) {
          if (i++ >= s) break;
          this.recentlyDeletedMap.delete(o);
        }
      }
    }, this.checkRecentlyDeleted = (r) => {
      const n = this.recentlyDeletedMap.get(r);
      if (n) {
        const { message: i } = ft("MISSING_OR_INVALID", `Record was recently deleted - ${n}: ${r}`);
        throw new Error(i);
      }
    }, this.isLinkModeEnabled = (r, n) => {
      var i, s, o, a, u, l, d, p, w;
      return !r || n !== zr.link_mode ? !1 : ((s = (i = this.client.metadata) == null ? void 0 : i.redirect) == null ? void 0 : s.linkMode) === !0 && ((a = (o = this.client.metadata) == null ? void 0 : o.redirect) == null ? void 0 : a.universal) !== void 0 && ((l = (u = this.client.metadata) == null ? void 0 : u.redirect) == null ? void 0 : l.universal) !== "" && ((d = r == null ? void 0 : r.redirect) == null ? void 0 : d.universal) !== void 0 && ((p = r == null ? void 0 : r.redirect) == null ? void 0 : p.universal) !== "" && ((w = r == null ? void 0 : r.redirect) == null ? void 0 : w.linkMode) === !0 && this.client.core.linkModeSupportedApps.includes(r.redirect.universal) && typeof (global == null ? void 0 : global.Linking) < "u";
    }, this.getAppLinkIfEnabled = (r, n) => {
      var i;
      return this.isLinkModeEnabled(r, n) ? (i = r == null ? void 0 : r.redirect) == null ? void 0 : i.universal : void 0;
    }, this.handleLinkModeMessage = ({ url: r }) => {
      if (!r || !r.includes("wc_ev") || !r.includes("topic")) return;
      const n = Bx(r, "topic") || "", i = decodeURIComponent(Bx(r, "wc_ev") || ""), s = this.client.session.keys.includes(n);
      s && this.client.session.update(n, { transportType: zr.link_mode }), this.client.core.dispatchEnvelope({ topic: n, message: i, sessionExists: s });
    }, this.registerLinkModeListeners = async () => {
      var r;
      if (ib() || qu() && (r = this.client.metadata.redirect) != null && r.linkMode) {
        const n = global == null ? void 0 : global.Linking;
        if (typeof n < "u") {
          n.addEventListener("url", this.handleLinkModeMessage, this.client.name);
          const i = await n.getInitialURL();
          i && setTimeout(() => {
            this.handleLinkModeMessage({ url: i });
          }, 50);
        }
      }
    };
  }
  isInitialized() {
    if (!this.initialized) {
      const { message: e } = ft("NOT_INITIALIZED", this.name);
      throw new Error(e);
    }
  }
  async confirmOnlineStateOrThrow() {
    await this.client.core.relayer.confirmOnlineStateOrThrow();
  }
  registerRelayerEvents() {
    this.client.core.relayer.on(oi.message, (e) => {
      !this.initialized || this.relayMessageCache.length > 0 ? this.relayMessageCache.push(e) : this.onRelayMessage(e);
    });
  }
  async onRelayMessage(e) {
    const { topic: r, message: n, attestation: i, transportType: s } = e, { publicKey: o } = this.client.auth.authKeys.keys.includes(Rd) ? this.client.auth.authKeys.get(Rd) : { publicKey: void 0 }, a = await this.client.core.crypto.decode(r, n, { receiverPublicKey: o, encoding: s === zr.link_mode ? Af : ha });
    try {
      fb(a) ? (this.client.core.history.set(r, a), this.onRelayEventRequest({ topic: r, payload: a, attestation: i, transportType: s, encryptedId: xo(n) })) : ip(a) ? (await this.client.core.history.resolve(a), await this.onRelayEventResponse({ topic: r, payload: a, transportType: s }), this.client.core.history.delete(r, a.id)) : this.onRelayEventUnknownPayload({ topic: r, payload: a, transportType: s });
    } catch (u) {
      this.client.logger.error(u);
    }
  }
  registerExpirerEvents() {
    this.client.core.expirer.on(Ji.expired, async (e) => {
      const { topic: r, id: n } = $8(e.target);
      if (n && this.client.pendingRequest.keys.includes(n)) return await this.deletePendingSessionRequest(n, ft("EXPIRED"), !0);
      if (n && this.client.auth.requests.keys.includes(n)) return await this.deletePendingAuthRequest(n, ft("EXPIRED"), !0);
      r ? this.client.session.keys.includes(r) && (await this.deleteSession({ topic: r, expirerHasDeleted: !0 }), this.client.events.emit("session_expire", { topic: r })) : n && (await this.deleteProposal(n, !0), this.client.events.emit("proposal_expire", { id: n }));
    });
  }
  registerPairingEvents() {
    this.client.core.pairing.events.on(Za.create, (e) => this.onPairingCreated(e)), this.client.core.pairing.events.on(Za.delete, (e) => {
      this.addToRecentlyDeleted(e.topic, "pairing");
    });
  }
  isValidPairingTopic(e) {
    if (!dn(e, !1)) {
      const { message: r } = ft("MISSING_OR_INVALID", `pairing topic should be a string: ${e}`);
      throw new Error(r);
    }
    if (!this.client.core.pairing.pairings.keys.includes(e)) {
      const { message: r } = ft("NO_MATCHING_KEY", `pairing topic doesn't exist: ${e}`);
      throw new Error(r);
    }
    if (ca(this.client.core.pairing.pairings.get(e).expiry)) {
      const { message: r } = ft("EXPIRED", `pairing topic: ${e}`);
      throw new Error(r);
    }
  }
  async isValidSessionTopic(e) {
    if (!dn(e, !1)) {
      const { message: r } = ft("MISSING_OR_INVALID", `session topic should be a string: ${e}`);
      throw new Error(r);
    }
    if (this.checkRecentlyDeleted(e), !this.client.session.keys.includes(e)) {
      const { message: r } = ft("NO_MATCHING_KEY", `session topic doesn't exist: ${e}`);
      throw new Error(r);
    }
    if (ca(this.client.session.get(e).expiry)) {
      await this.deleteSession({ topic: e });
      const { message: r } = ft("EXPIRED", `session topic: ${e}`);
      throw new Error(r);
    }
    if (!this.client.core.crypto.keychain.has(e)) {
      const { message: r } = ft("MISSING_OR_INVALID", `session topic does not exist in keychain: ${e}`);
      throw await this.deleteSession({ topic: e }), new Error(r);
    }
  }
  async isValidSessionOrPairingTopic(e) {
    if (this.checkRecentlyDeleted(e), this.client.session.keys.includes(e)) await this.isValidSessionTopic(e);
    else if (this.client.core.pairing.pairings.keys.includes(e)) this.isValidPairingTopic(e);
    else if (dn(e, !1)) {
      const { message: r } = ft("NO_MATCHING_KEY", `session or pairing topic doesn't exist: ${e}`);
      throw new Error(r);
    } else {
      const { message: r } = ft("MISSING_OR_INVALID", `session or pairing topic should be a string: ${e}`);
      throw new Error(r);
    }
  }
  async isValidProposalId(e) {
    if (!cW(e)) {
      const { message: r } = ft("MISSING_OR_INVALID", `proposal id should be a number: ${e}`);
      throw new Error(r);
    }
    if (!this.client.proposal.keys.includes(e)) {
      const { message: r } = ft("NO_MATCHING_KEY", `proposal id doesn't exist: ${e}`);
      throw new Error(r);
    }
    if (ca(this.client.proposal.get(e).expiryTimestamp)) {
      await this.deleteProposal(e);
      const { message: r } = ft("EXPIRED", `proposal id: ${e}`);
      throw new Error(r);
    }
  }
}
class HV extends Ec {
  constructor(e, r) {
    super(e, r, CV, hb), this.core = e, this.logger = r;
  }
}
let KV = class extends Ec {
  constructor(e, r) {
    super(e, r, TV, hb), this.core = e, this.logger = r;
  }
};
class VV extends Ec {
  constructor(e, r) {
    super(e, r, DV, hb, (n) => n.id), this.core = e, this.logger = r;
  }
}
class GV extends Ec {
  constructor(e, r) {
    super(e, r, kV, op, () => Rd), this.core = e, this.logger = r;
  }
}
class YV extends Ec {
  constructor(e, r) {
    super(e, r, $V, op), this.core = e, this.logger = r;
  }
}
class JV extends Ec {
  constructor(e, r) {
    super(e, r, BV, op, (n) => n.id), this.core = e, this.logger = r;
  }
}
class XV {
  constructor(e, r) {
    this.core = e, this.logger = r, this.authKeys = new GV(this.core, this.logger), this.pairingTopics = new YV(this.core, this.logger), this.requests = new JV(this.core, this.logger);
  }
  async init() {
    await this.authKeys.init(), await this.pairingTopics.init(), await this.requests.init();
  }
}
class db extends o$ {
  constructor(e) {
    super(e), this.protocol = mE, this.version = vE, this.name = mm.name, this.events = new rs.EventEmitter(), this.on = (n, i) => this.events.on(n, i), this.once = (n, i) => this.events.once(n, i), this.off = (n, i) => this.events.off(n, i), this.removeListener = (n, i) => this.events.removeListener(n, i), this.removeAllListeners = (n) => this.events.removeAllListeners(n), this.connect = async (n) => {
      try {
        return await this.engine.connect(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.pair = async (n) => {
      try {
        return await this.engine.pair(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.approve = async (n) => {
      try {
        return await this.engine.approve(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.reject = async (n) => {
      try {
        return await this.engine.reject(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.update = async (n) => {
      try {
        return await this.engine.update(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.extend = async (n) => {
      try {
        return await this.engine.extend(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.request = async (n) => {
      try {
        return await this.engine.request(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.respond = async (n) => {
      try {
        return await this.engine.respond(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.ping = async (n) => {
      try {
        return await this.engine.ping(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.emit = async (n) => {
      try {
        return await this.engine.emit(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.disconnect = async (n) => {
      try {
        return await this.engine.disconnect(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.find = (n) => {
      try {
        return this.engine.find(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.getPendingSessionRequests = () => {
      try {
        return this.engine.getPendingSessionRequests();
      } catch (n) {
        throw this.logger.error(n.message), n;
      }
    }, this.authenticate = async (n, i) => {
      try {
        return await this.engine.authenticate(n, i);
      } catch (s) {
        throw this.logger.error(s.message), s;
      }
    }, this.formatAuthMessage = (n) => {
      try {
        return this.engine.formatAuthMessage(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.approveSessionAuthenticate = async (n) => {
      try {
        return await this.engine.approveSessionAuthenticate(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.rejectSessionAuthenticate = async (n) => {
      try {
        return await this.engine.rejectSessionAuthenticate(n);
      } catch (i) {
        throw this.logger.error(i.message), i;
      }
    }, this.name = (e == null ? void 0 : e.name) || mm.name, this.metadata = (e == null ? void 0 : e.metadata) || D8(), this.signConfig = e == null ? void 0 : e.signConfig;
    const r = typeof (e == null ? void 0 : e.logger) < "u" && typeof (e == null ? void 0 : e.logger) != "string" ? e.logger : ql($0({ level: (e == null ? void 0 : e.logger) || mm.logger }));
    this.core = (e == null ? void 0 : e.core) || new IV(e), this.logger = ci(r, this.name), this.session = new KV(this.core, this.logger), this.proposal = new HV(this.core, this.logger), this.pendingRequest = new VV(this.core, this.logger), this.engine = new WV(this), this.auth = new XV(this.core, this.logger);
  }
  static async init(e) {
    const r = new db(e);
    return await r.initialize(), r;
  }
  get context() {
    return Ai(this.logger);
  }
  get pairing() {
    return this.core.pairing.pairings;
  }
  async initialize() {
    this.logger.trace("Initialized");
    try {
      await this.core.start(), await this.session.init(), await this.proposal.init(), await this.pendingRequest.init(), await this.auth.init(), await this.engine.init(), this.logger.info("SignClient Initialization Success"), this.engine.processRelayMessageCache();
    } catch (e) {
      throw this.logger.info("SignClient Initialization Failure"), this.logger.error(e.message), e;
    }
  }
}
var h0 = { exports: {} };
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
h0.exports;
(function(t, e) {
  (function() {
    var r, n = "4.17.21", i = 200, s = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", o = "Expected a function", a = "Invalid `variable` option passed into `_.template`", u = "__lodash_hash_undefined__", l = 500, d = "__lodash_placeholder__", p = 1, w = 2, A = 4, M = 1, N = 2, L = 1, B = 2, $ = 4, H = 8, W = 16, V = 32, te = 64, R = 128, K = 256, ge = 512, Ee = 30, Y = "...", S = 800, m = 16, f = 1, g = 2, b = 3, x = 1 / 0, _ = 9007199254740991, E = 17976931348623157e292, v = NaN, P = 4294967295, I = P - 1, F = P >>> 1, ce = [
      ["ary", R],
      ["bind", L],
      ["bindKey", B],
      ["curry", H],
      ["curryRight", W],
      ["flip", ge],
      ["partial", V],
      ["partialRight", te],
      ["rearg", K]
    ], D = "[object Arguments]", oe = "[object Array]", Z = "[object AsyncFunction]", J = "[object Boolean]", Q = "[object Date]", T = "[object DOMException]", X = "[object Error]", re = "[object Function]", de = "[object GeneratorFunction]", ie = "[object Map]", ue = "[object Number]", ve = "[object Null]", Pe = "[object Object]", De = "[object Promise]", Ce = "[object Proxy]", $e = "[object RegExp]", Me = "[object Set]", Ne = "[object String]", Ke = "[object Symbol]", Le = "[object Undefined]", qe = "[object WeakMap]", ze = "[object WeakSet]", _e = "[object ArrayBuffer]", Ze = "[object DataView]", at = "[object Float32Array]", ke = "[object Float64Array]", Qe = "[object Int8Array]", tt = "[object Int16Array]", Ye = "[object Int32Array]", dt = "[object Uint8Array]", lt = "[object Uint8ClampedArray]", ct = "[object Uint16Array]", qt = "[object Uint32Array]", Yt = /\b__p \+= '';/g, Et = /\b(__p \+=) '' \+/g, er = /(__e\(.*?\)|\b__t\)) \+\n'';/g, Jt = /&(?:amp|lt|gt|quot|#39);/g, Dt = /[&<>"']/g, kt = RegExp(Jt.source), Ct = RegExp(Dt.source), gt = /<%-([\s\S]+?)%>/g, Rt = /<%([\s\S]+?)%>/g, Nt = /<%=([\s\S]+?)%>/g, vt = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, $t = /^\w*$/, Ft = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, rt = /[\\^$.*+?()[\]{}|]/g, Bt = RegExp(rt.source), k = /^\s+/, U = /\s/, z = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, C = /\{\n\/\* \[wrapped with (.+)\] \*/, G = /,? & /, j = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, se = /[()=,{}\[\]\/\s]/, he = /\\(\\)?/g, xe = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, Te = /\w*$/, Re = /^[-+]0x[0-9a-f]+$/i, nt = /^0b[01]+$/i, je = /^\[object .+?Constructor\]$/, pt = /^0o[0-7]+$/i, it = /^(?:0|[1-9]\d*)$/, et = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, St = /($^)/, Tt = /['\n\r\u2028\u2029\\]/g, At = "\\ud800-\\udfff", _t = "\\u0300-\\u036f", ht = "\\ufe20-\\ufe2f", xt = "\\u20d0-\\u20ff", st = _t + ht + xt, bt = "\\u2700-\\u27bf", ut = "a-z\\xdf-\\xf6\\xf8-\\xff", ot = "\\xac\\xb1\\xd7\\xf7", Se = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", Ae = "\\u2000-\\u206f", Ve = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", Fe = "A-Z\\xc0-\\xd6\\xd8-\\xde", Ue = "\\ufe0e\\ufe0f", Je = ot + Se + Ae + Ve, Lt = "['’]", zt = "[" + At + "]", Xt = "[" + Je + "]", Wt = "[" + st + "]", le = "\\d+", rr = "[" + bt + "]", dr = "[" + ut + "]", pr = "[^" + At + Je + le + bt + ut + Fe + "]", Zt = "\\ud83c[\\udffb-\\udfff]", gr = "(?:" + Wt + "|" + Zt + ")", lr = "[^" + At + "]", Rr = "(?:\\ud83c[\\udde6-\\uddff]){2}", mr = "[\\ud800-\\udbff][\\udc00-\\udfff]", yr = "[" + Fe + "]", $r = "\\u200d", Br = "(?:" + dr + "|" + pr + ")", Ir = "(?:" + yr + "|" + pr + ")", nn = "(?:" + Lt + "(?:d|ll|m|re|s|t|ve))?", sn = "(?:" + Lt + "(?:D|LL|M|RE|S|T|VE))?", on = gr + "?", lh = "[" + Ue + "]?", Rp = "(?:" + $r + "(?:" + [lr, Rr, mr].join("|") + ")" + lh + on + ")*", io = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", hh = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", dh = lh + on + Rp, Mc = "(?:" + [rr, Rr, mr].join("|") + ")" + dh, Dp = "(?:" + [lr + Wt + "?", Wt, Rr, mr, zt].join("|") + ")", Xu = RegExp(Lt, "g"), Op = RegExp(Wt, "g"), Ic = RegExp(Zt + "(?=" + Zt + ")|" + Dp + dh, "g"), ph = RegExp([
      yr + "?" + dr + "+" + nn + "(?=" + [Xt, yr, "$"].join("|") + ")",
      Ir + "+" + sn + "(?=" + [Xt, yr + Br, "$"].join("|") + ")",
      yr + "?" + Br + "+" + nn,
      yr + "+" + sn,
      hh,
      io,
      le,
      Mc
    ].join("|"), "g"), gh = RegExp("[" + $r + At + st + Ue + "]"), Da = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, mh = [
      "Array",
      "Buffer",
      "DataView",
      "Date",
      "Error",
      "Float32Array",
      "Float64Array",
      "Function",
      "Int8Array",
      "Int16Array",
      "Int32Array",
      "Map",
      "Math",
      "Object",
      "Promise",
      "RegExp",
      "Set",
      "String",
      "Symbol",
      "TypeError",
      "Uint8Array",
      "Uint8ClampedArray",
      "Uint16Array",
      "Uint32Array",
      "WeakMap",
      "_",
      "clearTimeout",
      "isFinite",
      "parseInt",
      "setTimeout"
    ], Np = -1, Fr = {};
    Fr[at] = Fr[ke] = Fr[Qe] = Fr[tt] = Fr[Ye] = Fr[dt] = Fr[lt] = Fr[ct] = Fr[qt] = !0, Fr[D] = Fr[oe] = Fr[_e] = Fr[J] = Fr[Ze] = Fr[Q] = Fr[X] = Fr[re] = Fr[ie] = Fr[ue] = Fr[Pe] = Fr[$e] = Fr[Me] = Fr[Ne] = Fr[qe] = !1;
    var Dr = {};
    Dr[D] = Dr[oe] = Dr[_e] = Dr[Ze] = Dr[J] = Dr[Q] = Dr[at] = Dr[ke] = Dr[Qe] = Dr[tt] = Dr[Ye] = Dr[ie] = Dr[ue] = Dr[Pe] = Dr[$e] = Dr[Me] = Dr[Ne] = Dr[Ke] = Dr[dt] = Dr[lt] = Dr[ct] = Dr[qt] = !0, Dr[X] = Dr[re] = Dr[qe] = !1;
    var ae = {
      // Latin-1 Supplement block.
      À: "A",
      Á: "A",
      Â: "A",
      Ã: "A",
      Ä: "A",
      Å: "A",
      à: "a",
      á: "a",
      â: "a",
      ã: "a",
      ä: "a",
      å: "a",
      Ç: "C",
      ç: "c",
      Ð: "D",
      ð: "d",
      È: "E",
      É: "E",
      Ê: "E",
      Ë: "E",
      è: "e",
      é: "e",
      ê: "e",
      ë: "e",
      Ì: "I",
      Í: "I",
      Î: "I",
      Ï: "I",
      ì: "i",
      í: "i",
      î: "i",
      ï: "i",
      Ñ: "N",
      ñ: "n",
      Ò: "O",
      Ó: "O",
      Ô: "O",
      Õ: "O",
      Ö: "O",
      Ø: "O",
      ò: "o",
      ó: "o",
      ô: "o",
      õ: "o",
      ö: "o",
      ø: "o",
      Ù: "U",
      Ú: "U",
      Û: "U",
      Ü: "U",
      ù: "u",
      ú: "u",
      û: "u",
      ü: "u",
      Ý: "Y",
      ý: "y",
      ÿ: "y",
      Æ: "Ae",
      æ: "ae",
      Þ: "Th",
      þ: "th",
      ß: "ss",
      // Latin Extended-A block.
      Ā: "A",
      Ă: "A",
      Ą: "A",
      ā: "a",
      ă: "a",
      ą: "a",
      Ć: "C",
      Ĉ: "C",
      Ċ: "C",
      Č: "C",
      ć: "c",
      ĉ: "c",
      ċ: "c",
      č: "c",
      Ď: "D",
      Đ: "D",
      ď: "d",
      đ: "d",
      Ē: "E",
      Ĕ: "E",
      Ė: "E",
      Ę: "E",
      Ě: "E",
      ē: "e",
      ĕ: "e",
      ė: "e",
      ę: "e",
      ě: "e",
      Ĝ: "G",
      Ğ: "G",
      Ġ: "G",
      Ģ: "G",
      ĝ: "g",
      ğ: "g",
      ġ: "g",
      ģ: "g",
      Ĥ: "H",
      Ħ: "H",
      ĥ: "h",
      ħ: "h",
      Ĩ: "I",
      Ī: "I",
      Ĭ: "I",
      Į: "I",
      İ: "I",
      ĩ: "i",
      ī: "i",
      ĭ: "i",
      į: "i",
      ı: "i",
      Ĵ: "J",
      ĵ: "j",
      Ķ: "K",
      ķ: "k",
      ĸ: "k",
      Ĺ: "L",
      Ļ: "L",
      Ľ: "L",
      Ŀ: "L",
      Ł: "L",
      ĺ: "l",
      ļ: "l",
      ľ: "l",
      ŀ: "l",
      ł: "l",
      Ń: "N",
      Ņ: "N",
      Ň: "N",
      Ŋ: "N",
      ń: "n",
      ņ: "n",
      ň: "n",
      ŋ: "n",
      Ō: "O",
      Ŏ: "O",
      Ő: "O",
      ō: "o",
      ŏ: "o",
      ő: "o",
      Ŕ: "R",
      Ŗ: "R",
      Ř: "R",
      ŕ: "r",
      ŗ: "r",
      ř: "r",
      Ś: "S",
      Ŝ: "S",
      Ş: "S",
      Š: "S",
      ś: "s",
      ŝ: "s",
      ş: "s",
      š: "s",
      Ţ: "T",
      Ť: "T",
      Ŧ: "T",
      ţ: "t",
      ť: "t",
      ŧ: "t",
      Ũ: "U",
      Ū: "U",
      Ŭ: "U",
      Ů: "U",
      Ű: "U",
      Ų: "U",
      ũ: "u",
      ū: "u",
      ŭ: "u",
      ů: "u",
      ű: "u",
      ų: "u",
      Ŵ: "W",
      ŵ: "w",
      Ŷ: "Y",
      ŷ: "y",
      Ÿ: "Y",
      Ź: "Z",
      Ż: "Z",
      Ž: "Z",
      ź: "z",
      ż: "z",
      ž: "z",
      Ĳ: "IJ",
      ĳ: "ij",
      Œ: "Oe",
      œ: "oe",
      ŉ: "'n",
      ſ: "s"
    }, ye = {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#39;"
    }, Ge = {
      "&amp;": "&",
      "&lt;": "<",
      "&gt;": ">",
      "&quot;": '"',
      "&#39;": "'"
    }, Pt = {
      "\\": "\\",
      "'": "'",
      "\n": "n",
      "\r": "r",
      "\u2028": "u2028",
      "\u2029": "u2029"
    }, jr = parseFloat, nr = parseInt, Kr = typeof gn == "object" && gn && gn.Object === Object && gn, vn = typeof self == "object" && self && self.Object === Object && self, _r = Kr || vn || Function("return this")(), Ur = e && !e.nodeType && e, an = Ur && !0 && t && !t.nodeType && t, ui = an && an.exports === Ur, bn = ui && Kr.process, Vr = function() {
      try {
        var be = an && an.require && an.require("util").types;
        return be || bn && bn.binding && bn.binding("util");
      } catch {
      }
    }(), ti = Vr && Vr.isArrayBuffer, fs = Vr && Vr.isDate, Fi = Vr && Vr.isMap, Is = Vr && Vr.isRegExp, Zu = Vr && Vr.isSet, Oa = Vr && Vr.isTypedArray;
    function Pn(be, Be, Ie) {
      switch (Ie.length) {
        case 0:
          return be.call(Be);
        case 1:
          return be.call(Be, Ie[0]);
        case 2:
          return be.call(Be, Ie[0], Ie[1]);
        case 3:
          return be.call(Be, Ie[0], Ie[1], Ie[2]);
      }
      return be.apply(Be, Ie);
    }
    function nA(be, Be, Ie, It) {
      for (var tr = -1, Pr = be == null ? 0 : be.length; ++tr < Pr; ) {
        var xn = be[tr];
        Be(It, xn, Ie(xn), be);
      }
      return It;
    }
    function ji(be, Be) {
      for (var Ie = -1, It = be == null ? 0 : be.length; ++Ie < It && Be(be[Ie], Ie, be) !== !1; )
        ;
      return be;
    }
    function iA(be, Be) {
      for (var Ie = be == null ? 0 : be.length; Ie-- && Be(be[Ie], Ie, be) !== !1; )
        ;
      return be;
    }
    function py(be, Be) {
      for (var Ie = -1, It = be == null ? 0 : be.length; ++Ie < It; )
        if (!Be(be[Ie], Ie, be))
          return !1;
      return !0;
    }
    function Wo(be, Be) {
      for (var Ie = -1, It = be == null ? 0 : be.length, tr = 0, Pr = []; ++Ie < It; ) {
        var xn = be[Ie];
        Be(xn, Ie, be) && (Pr[tr++] = xn);
      }
      return Pr;
    }
    function vh(be, Be) {
      var Ie = be == null ? 0 : be.length;
      return !!Ie && Cc(be, Be, 0) > -1;
    }
    function Lp(be, Be, Ie) {
      for (var It = -1, tr = be == null ? 0 : be.length; ++It < tr; )
        if (Ie(Be, be[It]))
          return !0;
      return !1;
    }
    function Xr(be, Be) {
      for (var Ie = -1, It = be == null ? 0 : be.length, tr = Array(It); ++Ie < It; )
        tr[Ie] = Be(be[Ie], Ie, be);
      return tr;
    }
    function Ho(be, Be) {
      for (var Ie = -1, It = Be.length, tr = be.length; ++Ie < It; )
        be[tr + Ie] = Be[Ie];
      return be;
    }
    function kp(be, Be, Ie, It) {
      var tr = -1, Pr = be == null ? 0 : be.length;
      for (It && Pr && (Ie = be[++tr]); ++tr < Pr; )
        Ie = Be(Ie, be[tr], tr, be);
      return Ie;
    }
    function sA(be, Be, Ie, It) {
      var tr = be == null ? 0 : be.length;
      for (It && tr && (Ie = be[--tr]); tr--; )
        Ie = Be(Ie, be[tr], tr, be);
      return Ie;
    }
    function $p(be, Be) {
      for (var Ie = -1, It = be == null ? 0 : be.length; ++Ie < It; )
        if (Be(be[Ie], Ie, be))
          return !0;
      return !1;
    }
    var oA = Bp("length");
    function aA(be) {
      return be.split("");
    }
    function cA(be) {
      return be.match(j) || [];
    }
    function gy(be, Be, Ie) {
      var It;
      return Ie(be, function(tr, Pr, xn) {
        if (Be(tr, Pr, xn))
          return It = Pr, !1;
      }), It;
    }
    function bh(be, Be, Ie, It) {
      for (var tr = be.length, Pr = Ie + (It ? 1 : -1); It ? Pr-- : ++Pr < tr; )
        if (Be(be[Pr], Pr, be))
          return Pr;
      return -1;
    }
    function Cc(be, Be, Ie) {
      return Be === Be ? wA(be, Be, Ie) : bh(be, my, Ie);
    }
    function uA(be, Be, Ie, It) {
      for (var tr = Ie - 1, Pr = be.length; ++tr < Pr; )
        if (It(be[tr], Be))
          return tr;
      return -1;
    }
    function my(be) {
      return be !== be;
    }
    function vy(be, Be) {
      var Ie = be == null ? 0 : be.length;
      return Ie ? jp(be, Be) / Ie : v;
    }
    function Bp(be) {
      return function(Be) {
        return Be == null ? r : Be[be];
      };
    }
    function Fp(be) {
      return function(Be) {
        return be == null ? r : be[Be];
      };
    }
    function by(be, Be, Ie, It, tr) {
      return tr(be, function(Pr, xn, qr) {
        Ie = It ? (It = !1, Pr) : Be(Ie, Pr, xn, qr);
      }), Ie;
    }
    function fA(be, Be) {
      var Ie = be.length;
      for (be.sort(Be); Ie--; )
        be[Ie] = be[Ie].value;
      return be;
    }
    function jp(be, Be) {
      for (var Ie, It = -1, tr = be.length; ++It < tr; ) {
        var Pr = Be(be[It]);
        Pr !== r && (Ie = Ie === r ? Pr : Ie + Pr);
      }
      return Ie;
    }
    function Up(be, Be) {
      for (var Ie = -1, It = Array(be); ++Ie < be; )
        It[Ie] = Be(Ie);
      return It;
    }
    function lA(be, Be) {
      return Xr(Be, function(Ie) {
        return [Ie, be[Ie]];
      });
    }
    function yy(be) {
      return be && be.slice(0, Ey(be) + 1).replace(k, "");
    }
    function Pi(be) {
      return function(Be) {
        return be(Be);
      };
    }
    function qp(be, Be) {
      return Xr(Be, function(Ie) {
        return be[Ie];
      });
    }
    function Qu(be, Be) {
      return be.has(Be);
    }
    function wy(be, Be) {
      for (var Ie = -1, It = be.length; ++Ie < It && Cc(Be, be[Ie], 0) > -1; )
        ;
      return Ie;
    }
    function xy(be, Be) {
      for (var Ie = be.length; Ie-- && Cc(Be, be[Ie], 0) > -1; )
        ;
      return Ie;
    }
    function hA(be, Be) {
      for (var Ie = be.length, It = 0; Ie--; )
        be[Ie] === Be && ++It;
      return It;
    }
    var dA = Fp(ae), pA = Fp(ye);
    function gA(be) {
      return "\\" + Pt[be];
    }
    function mA(be, Be) {
      return be == null ? r : be[Be];
    }
    function Tc(be) {
      return gh.test(be);
    }
    function vA(be) {
      return Da.test(be);
    }
    function bA(be) {
      for (var Be, Ie = []; !(Be = be.next()).done; )
        Ie.push(Be.value);
      return Ie;
    }
    function zp(be) {
      var Be = -1, Ie = Array(be.size);
      return be.forEach(function(It, tr) {
        Ie[++Be] = [tr, It];
      }), Ie;
    }
    function _y(be, Be) {
      return function(Ie) {
        return be(Be(Ie));
      };
    }
    function Ko(be, Be) {
      for (var Ie = -1, It = be.length, tr = 0, Pr = []; ++Ie < It; ) {
        var xn = be[Ie];
        (xn === Be || xn === d) && (be[Ie] = d, Pr[tr++] = Ie);
      }
      return Pr;
    }
    function yh(be) {
      var Be = -1, Ie = Array(be.size);
      return be.forEach(function(It) {
        Ie[++Be] = It;
      }), Ie;
    }
    function yA(be) {
      var Be = -1, Ie = Array(be.size);
      return be.forEach(function(It) {
        Ie[++Be] = [It, It];
      }), Ie;
    }
    function wA(be, Be, Ie) {
      for (var It = Ie - 1, tr = be.length; ++It < tr; )
        if (be[It] === Be)
          return It;
      return -1;
    }
    function xA(be, Be, Ie) {
      for (var It = Ie + 1; It--; )
        if (be[It] === Be)
          return It;
      return It;
    }
    function Rc(be) {
      return Tc(be) ? EA(be) : oA(be);
    }
    function ls(be) {
      return Tc(be) ? SA(be) : aA(be);
    }
    function Ey(be) {
      for (var Be = be.length; Be-- && U.test(be.charAt(Be)); )
        ;
      return Be;
    }
    var _A = Fp(Ge);
    function EA(be) {
      for (var Be = Ic.lastIndex = 0; Ic.test(be); )
        ++Be;
      return Be;
    }
    function SA(be) {
      return be.match(Ic) || [];
    }
    function AA(be) {
      return be.match(ph) || [];
    }
    var PA = function be(Be) {
      Be = Be == null ? _r : Dc.defaults(_r.Object(), Be, Dc.pick(_r, mh));
      var Ie = Be.Array, It = Be.Date, tr = Be.Error, Pr = Be.Function, xn = Be.Math, qr = Be.Object, Wp = Be.RegExp, MA = Be.String, Ui = Be.TypeError, wh = Ie.prototype, IA = Pr.prototype, Oc = qr.prototype, xh = Be["__core-js_shared__"], _h = IA.toString, Tr = Oc.hasOwnProperty, CA = 0, Sy = function() {
        var c = /[^.]+$/.exec(xh && xh.keys && xh.keys.IE_PROTO || "");
        return c ? "Symbol(src)_1." + c : "";
      }(), Eh = Oc.toString, TA = _h.call(qr), RA = _r._, DA = Wp(
        "^" + _h.call(Tr).replace(rt, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
      ), Sh = ui ? Be.Buffer : r, Vo = Be.Symbol, Ah = Be.Uint8Array, Ay = Sh ? Sh.allocUnsafe : r, Ph = _y(qr.getPrototypeOf, qr), Py = qr.create, My = Oc.propertyIsEnumerable, Mh = wh.splice, Iy = Vo ? Vo.isConcatSpreadable : r, ef = Vo ? Vo.iterator : r, Na = Vo ? Vo.toStringTag : r, Ih = function() {
        try {
          var c = Fa(qr, "defineProperty");
          return c({}, "", {}), c;
        } catch {
        }
      }(), OA = Be.clearTimeout !== _r.clearTimeout && Be.clearTimeout, NA = It && It.now !== _r.Date.now && It.now, LA = Be.setTimeout !== _r.setTimeout && Be.setTimeout, Ch = xn.ceil, Th = xn.floor, Hp = qr.getOwnPropertySymbols, kA = Sh ? Sh.isBuffer : r, Cy = Be.isFinite, $A = wh.join, BA = _y(qr.keys, qr), _n = xn.max, Kn = xn.min, FA = It.now, jA = Be.parseInt, Ty = xn.random, UA = wh.reverse, Kp = Fa(Be, "DataView"), tf = Fa(Be, "Map"), Vp = Fa(Be, "Promise"), Nc = Fa(Be, "Set"), rf = Fa(Be, "WeakMap"), nf = Fa(qr, "create"), Rh = rf && new rf(), Lc = {}, qA = ja(Kp), zA = ja(tf), WA = ja(Vp), HA = ja(Nc), KA = ja(rf), Dh = Vo ? Vo.prototype : r, sf = Dh ? Dh.valueOf : r, Ry = Dh ? Dh.toString : r;
      function ee(c) {
        if (en(c) && !ir(c) && !(c instanceof wr)) {
          if (c instanceof qi)
            return c;
          if (Tr.call(c, "__wrapped__"))
            return Dw(c);
        }
        return new qi(c);
      }
      var kc = /* @__PURE__ */ function() {
        function c() {
        }
        return function(h) {
          if (!Zr(h))
            return {};
          if (Py)
            return Py(h);
          c.prototype = h;
          var y = new c();
          return c.prototype = r, y;
        };
      }();
      function Oh() {
      }
      function qi(c, h) {
        this.__wrapped__ = c, this.__actions__ = [], this.__chain__ = !!h, this.__index__ = 0, this.__values__ = r;
      }
      ee.templateSettings = {
        /**
         * Used to detect `data` property values to be HTML-escaped.
         *
         * @memberOf _.templateSettings
         * @type {RegExp}
         */
        escape: gt,
        /**
         * Used to detect code to be evaluated.
         *
         * @memberOf _.templateSettings
         * @type {RegExp}
         */
        evaluate: Rt,
        /**
         * Used to detect `data` property values to inject.
         *
         * @memberOf _.templateSettings
         * @type {RegExp}
         */
        interpolate: Nt,
        /**
         * Used to reference the data object in the template text.
         *
         * @memberOf _.templateSettings
         * @type {string}
         */
        variable: "",
        /**
         * Used to import variables into the compiled template.
         *
         * @memberOf _.templateSettings
         * @type {Object}
         */
        imports: {
          /**
           * A reference to the `lodash` function.
           *
           * @memberOf _.templateSettings.imports
           * @type {Function}
           */
          _: ee
        }
      }, ee.prototype = Oh.prototype, ee.prototype.constructor = ee, qi.prototype = kc(Oh.prototype), qi.prototype.constructor = qi;
      function wr(c) {
        this.__wrapped__ = c, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = P, this.__views__ = [];
      }
      function VA() {
        var c = new wr(this.__wrapped__);
        return c.__actions__ = fi(this.__actions__), c.__dir__ = this.__dir__, c.__filtered__ = this.__filtered__, c.__iteratees__ = fi(this.__iteratees__), c.__takeCount__ = this.__takeCount__, c.__views__ = fi(this.__views__), c;
      }
      function GA() {
        if (this.__filtered__) {
          var c = new wr(this);
          c.__dir__ = -1, c.__filtered__ = !0;
        } else
          c = this.clone(), c.__dir__ *= -1;
        return c;
      }
      function YA() {
        var c = this.__wrapped__.value(), h = this.__dir__, y = ir(c), O = h < 0, q = y ? c.length : 0, ne = aM(0, q, this.__views__), fe = ne.start, me = ne.end, we = me - fe, We = O ? me : fe - 1, He = this.__iteratees__, Xe = He.length, wt = 0, Ot = Kn(we, this.__takeCount__);
        if (!y || !O && q == we && Ot == we)
          return tw(c, this.__actions__);
        var Ht = [];
        e:
          for (; we-- && wt < Ot; ) {
            We += h;
            for (var fr = -1, Kt = c[We]; ++fr < Xe; ) {
              var vr = He[fr], Er = vr.iteratee, Ci = vr.type, ii = Er(Kt);
              if (Ci == g)
                Kt = ii;
              else if (!ii) {
                if (Ci == f)
                  continue e;
                break e;
              }
            }
            Ht[wt++] = Kt;
          }
        return Ht;
      }
      wr.prototype = kc(Oh.prototype), wr.prototype.constructor = wr;
      function La(c) {
        var h = -1, y = c == null ? 0 : c.length;
        for (this.clear(); ++h < y; ) {
          var O = c[h];
          this.set(O[0], O[1]);
        }
      }
      function JA() {
        this.__data__ = nf ? nf(null) : {}, this.size = 0;
      }
      function XA(c) {
        var h = this.has(c) && delete this.__data__[c];
        return this.size -= h ? 1 : 0, h;
      }
      function ZA(c) {
        var h = this.__data__;
        if (nf) {
          var y = h[c];
          return y === u ? r : y;
        }
        return Tr.call(h, c) ? h[c] : r;
      }
      function QA(c) {
        var h = this.__data__;
        return nf ? h[c] !== r : Tr.call(h, c);
      }
      function eP(c, h) {
        var y = this.__data__;
        return this.size += this.has(c) ? 0 : 1, y[c] = nf && h === r ? u : h, this;
      }
      La.prototype.clear = JA, La.prototype.delete = XA, La.prototype.get = ZA, La.prototype.has = QA, La.prototype.set = eP;
      function so(c) {
        var h = -1, y = c == null ? 0 : c.length;
        for (this.clear(); ++h < y; ) {
          var O = c[h];
          this.set(O[0], O[1]);
        }
      }
      function tP() {
        this.__data__ = [], this.size = 0;
      }
      function rP(c) {
        var h = this.__data__, y = Nh(h, c);
        if (y < 0)
          return !1;
        var O = h.length - 1;
        return y == O ? h.pop() : Mh.call(h, y, 1), --this.size, !0;
      }
      function nP(c) {
        var h = this.__data__, y = Nh(h, c);
        return y < 0 ? r : h[y][1];
      }
      function iP(c) {
        return Nh(this.__data__, c) > -1;
      }
      function sP(c, h) {
        var y = this.__data__, O = Nh(y, c);
        return O < 0 ? (++this.size, y.push([c, h])) : y[O][1] = h, this;
      }
      so.prototype.clear = tP, so.prototype.delete = rP, so.prototype.get = nP, so.prototype.has = iP, so.prototype.set = sP;
      function oo(c) {
        var h = -1, y = c == null ? 0 : c.length;
        for (this.clear(); ++h < y; ) {
          var O = c[h];
          this.set(O[0], O[1]);
        }
      }
      function oP() {
        this.size = 0, this.__data__ = {
          hash: new La(),
          map: new (tf || so)(),
          string: new La()
        };
      }
      function aP(c) {
        var h = Kh(this, c).delete(c);
        return this.size -= h ? 1 : 0, h;
      }
      function cP(c) {
        return Kh(this, c).get(c);
      }
      function uP(c) {
        return Kh(this, c).has(c);
      }
      function fP(c, h) {
        var y = Kh(this, c), O = y.size;
        return y.set(c, h), this.size += y.size == O ? 0 : 1, this;
      }
      oo.prototype.clear = oP, oo.prototype.delete = aP, oo.prototype.get = cP, oo.prototype.has = uP, oo.prototype.set = fP;
      function ka(c) {
        var h = -1, y = c == null ? 0 : c.length;
        for (this.__data__ = new oo(); ++h < y; )
          this.add(c[h]);
      }
      function lP(c) {
        return this.__data__.set(c, u), this;
      }
      function hP(c) {
        return this.__data__.has(c);
      }
      ka.prototype.add = ka.prototype.push = lP, ka.prototype.has = hP;
      function hs(c) {
        var h = this.__data__ = new so(c);
        this.size = h.size;
      }
      function dP() {
        this.__data__ = new so(), this.size = 0;
      }
      function pP(c) {
        var h = this.__data__, y = h.delete(c);
        return this.size = h.size, y;
      }
      function gP(c) {
        return this.__data__.get(c);
      }
      function mP(c) {
        return this.__data__.has(c);
      }
      function vP(c, h) {
        var y = this.__data__;
        if (y instanceof so) {
          var O = y.__data__;
          if (!tf || O.length < i - 1)
            return O.push([c, h]), this.size = ++y.size, this;
          y = this.__data__ = new oo(O);
        }
        return y.set(c, h), this.size = y.size, this;
      }
      hs.prototype.clear = dP, hs.prototype.delete = pP, hs.prototype.get = gP, hs.prototype.has = mP, hs.prototype.set = vP;
      function Dy(c, h) {
        var y = ir(c), O = !y && Ua(c), q = !y && !O && Zo(c), ne = !y && !O && !q && jc(c), fe = y || O || q || ne, me = fe ? Up(c.length, MA) : [], we = me.length;
        for (var We in c)
          (h || Tr.call(c, We)) && !(fe && // Safari 9 has enumerable `arguments.length` in strict mode.
          (We == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
          q && (We == "offset" || We == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
          ne && (We == "buffer" || We == "byteLength" || We == "byteOffset") || // Skip index properties.
          fo(We, we))) && me.push(We);
        return me;
      }
      function Oy(c) {
        var h = c.length;
        return h ? c[ig(0, h - 1)] : r;
      }
      function bP(c, h) {
        return Vh(fi(c), $a(h, 0, c.length));
      }
      function yP(c) {
        return Vh(fi(c));
      }
      function Gp(c, h, y) {
        (y !== r && !ds(c[h], y) || y === r && !(h in c)) && ao(c, h, y);
      }
      function of(c, h, y) {
        var O = c[h];
        (!(Tr.call(c, h) && ds(O, y)) || y === r && !(h in c)) && ao(c, h, y);
      }
      function Nh(c, h) {
        for (var y = c.length; y--; )
          if (ds(c[y][0], h))
            return y;
        return -1;
      }
      function wP(c, h, y, O) {
        return Go(c, function(q, ne, fe) {
          h(O, q, y(q), fe);
        }), O;
      }
      function Ny(c, h) {
        return c && Ts(h, Mn(h), c);
      }
      function xP(c, h) {
        return c && Ts(h, hi(h), c);
      }
      function ao(c, h, y) {
        h == "__proto__" && Ih ? Ih(c, h, {
          configurable: !0,
          enumerable: !0,
          value: y,
          writable: !0
        }) : c[h] = y;
      }
      function Yp(c, h) {
        for (var y = -1, O = h.length, q = Ie(O), ne = c == null; ++y < O; )
          q[y] = ne ? r : Cg(c, h[y]);
        return q;
      }
      function $a(c, h, y) {
        return c === c && (y !== r && (c = c <= y ? c : y), h !== r && (c = c >= h ? c : h)), c;
      }
      function zi(c, h, y, O, q, ne) {
        var fe, me = h & p, we = h & w, We = h & A;
        if (y && (fe = q ? y(c, O, q, ne) : y(c)), fe !== r)
          return fe;
        if (!Zr(c))
          return c;
        var He = ir(c);
        if (He) {
          if (fe = uM(c), !me)
            return fi(c, fe);
        } else {
          var Xe = Vn(c), wt = Xe == re || Xe == de;
          if (Zo(c))
            return iw(c, me);
          if (Xe == Pe || Xe == D || wt && !q) {
            if (fe = we || wt ? {} : Ew(c), !me)
              return we ? ZP(c, xP(fe, c)) : XP(c, Ny(fe, c));
          } else {
            if (!Dr[Xe])
              return q ? c : {};
            fe = fM(c, Xe, me);
          }
        }
        ne || (ne = new hs());
        var Ot = ne.get(c);
        if (Ot)
          return Ot;
        ne.set(c, fe), Zw(c) ? c.forEach(function(Kt) {
          fe.add(zi(Kt, h, y, Kt, c, ne));
        }) : Jw(c) && c.forEach(function(Kt, vr) {
          fe.set(vr, zi(Kt, h, y, vr, c, ne));
        });
        var Ht = We ? we ? gg : pg : we ? hi : Mn, fr = He ? r : Ht(c);
        return ji(fr || c, function(Kt, vr) {
          fr && (vr = Kt, Kt = c[vr]), of(fe, vr, zi(Kt, h, y, vr, c, ne));
        }), fe;
      }
      function _P(c) {
        var h = Mn(c);
        return function(y) {
          return Ly(y, c, h);
        };
      }
      function Ly(c, h, y) {
        var O = y.length;
        if (c == null)
          return !O;
        for (c = qr(c); O--; ) {
          var q = y[O], ne = h[q], fe = c[q];
          if (fe === r && !(q in c) || !ne(fe))
            return !1;
        }
        return !0;
      }
      function ky(c, h, y) {
        if (typeof c != "function")
          throw new Ui(o);
        return df(function() {
          c.apply(r, y);
        }, h);
      }
      function af(c, h, y, O) {
        var q = -1, ne = vh, fe = !0, me = c.length, we = [], We = h.length;
        if (!me)
          return we;
        y && (h = Xr(h, Pi(y))), O ? (ne = Lp, fe = !1) : h.length >= i && (ne = Qu, fe = !1, h = new ka(h));
        e:
          for (; ++q < me; ) {
            var He = c[q], Xe = y == null ? He : y(He);
            if (He = O || He !== 0 ? He : 0, fe && Xe === Xe) {
              for (var wt = We; wt--; )
                if (h[wt] === Xe)
                  continue e;
              we.push(He);
            } else ne(h, Xe, O) || we.push(He);
          }
        return we;
      }
      var Go = uw(Cs), $y = uw(Xp, !0);
      function EP(c, h) {
        var y = !0;
        return Go(c, function(O, q, ne) {
          return y = !!h(O, q, ne), y;
        }), y;
      }
      function Lh(c, h, y) {
        for (var O = -1, q = c.length; ++O < q; ) {
          var ne = c[O], fe = h(ne);
          if (fe != null && (me === r ? fe === fe && !Ii(fe) : y(fe, me)))
            var me = fe, we = ne;
        }
        return we;
      }
      function SP(c, h, y, O) {
        var q = c.length;
        for (y = cr(y), y < 0 && (y = -y > q ? 0 : q + y), O = O === r || O > q ? q : cr(O), O < 0 && (O += q), O = y > O ? 0 : e2(O); y < O; )
          c[y++] = h;
        return c;
      }
      function By(c, h) {
        var y = [];
        return Go(c, function(O, q, ne) {
          h(O, q, ne) && y.push(O);
        }), y;
      }
      function Bn(c, h, y, O, q) {
        var ne = -1, fe = c.length;
        for (y || (y = hM), q || (q = []); ++ne < fe; ) {
          var me = c[ne];
          h > 0 && y(me) ? h > 1 ? Bn(me, h - 1, y, O, q) : Ho(q, me) : O || (q[q.length] = me);
        }
        return q;
      }
      var Jp = fw(), Fy = fw(!0);
      function Cs(c, h) {
        return c && Jp(c, h, Mn);
      }
      function Xp(c, h) {
        return c && Fy(c, h, Mn);
      }
      function kh(c, h) {
        return Wo(h, function(y) {
          return lo(c[y]);
        });
      }
      function Ba(c, h) {
        h = Jo(h, c);
        for (var y = 0, O = h.length; c != null && y < O; )
          c = c[Rs(h[y++])];
        return y && y == O ? c : r;
      }
      function jy(c, h, y) {
        var O = h(c);
        return ir(c) ? O : Ho(O, y(c));
      }
      function ri(c) {
        return c == null ? c === r ? Le : ve : Na && Na in qr(c) ? oM(c) : yM(c);
      }
      function Zp(c, h) {
        return c > h;
      }
      function AP(c, h) {
        return c != null && Tr.call(c, h);
      }
      function PP(c, h) {
        return c != null && h in qr(c);
      }
      function MP(c, h, y) {
        return c >= Kn(h, y) && c < _n(h, y);
      }
      function Qp(c, h, y) {
        for (var O = y ? Lp : vh, q = c[0].length, ne = c.length, fe = ne, me = Ie(ne), we = 1 / 0, We = []; fe--; ) {
          var He = c[fe];
          fe && h && (He = Xr(He, Pi(h))), we = Kn(He.length, we), me[fe] = !y && (h || q >= 120 && He.length >= 120) ? new ka(fe && He) : r;
        }
        He = c[0];
        var Xe = -1, wt = me[0];
        e:
          for (; ++Xe < q && We.length < we; ) {
            var Ot = He[Xe], Ht = h ? h(Ot) : Ot;
            if (Ot = y || Ot !== 0 ? Ot : 0, !(wt ? Qu(wt, Ht) : O(We, Ht, y))) {
              for (fe = ne; --fe; ) {
                var fr = me[fe];
                if (!(fr ? Qu(fr, Ht) : O(c[fe], Ht, y)))
                  continue e;
              }
              wt && wt.push(Ht), We.push(Ot);
            }
          }
        return We;
      }
      function IP(c, h, y, O) {
        return Cs(c, function(q, ne, fe) {
          h(O, y(q), ne, fe);
        }), O;
      }
      function cf(c, h, y) {
        h = Jo(h, c), c = Mw(c, h);
        var O = c == null ? c : c[Rs(Hi(h))];
        return O == null ? r : Pn(O, c, y);
      }
      function Uy(c) {
        return en(c) && ri(c) == D;
      }
      function CP(c) {
        return en(c) && ri(c) == _e;
      }
      function TP(c) {
        return en(c) && ri(c) == Q;
      }
      function uf(c, h, y, O, q) {
        return c === h ? !0 : c == null || h == null || !en(c) && !en(h) ? c !== c && h !== h : RP(c, h, y, O, uf, q);
      }
      function RP(c, h, y, O, q, ne) {
        var fe = ir(c), me = ir(h), we = fe ? oe : Vn(c), We = me ? oe : Vn(h);
        we = we == D ? Pe : we, We = We == D ? Pe : We;
        var He = we == Pe, Xe = We == Pe, wt = we == We;
        if (wt && Zo(c)) {
          if (!Zo(h))
            return !1;
          fe = !0, He = !1;
        }
        if (wt && !He)
          return ne || (ne = new hs()), fe || jc(c) ? ww(c, h, y, O, q, ne) : iM(c, h, we, y, O, q, ne);
        if (!(y & M)) {
          var Ot = He && Tr.call(c, "__wrapped__"), Ht = Xe && Tr.call(h, "__wrapped__");
          if (Ot || Ht) {
            var fr = Ot ? c.value() : c, Kt = Ht ? h.value() : h;
            return ne || (ne = new hs()), q(fr, Kt, y, O, ne);
          }
        }
        return wt ? (ne || (ne = new hs()), sM(c, h, y, O, q, ne)) : !1;
      }
      function DP(c) {
        return en(c) && Vn(c) == ie;
      }
      function eg(c, h, y, O) {
        var q = y.length, ne = q, fe = !O;
        if (c == null)
          return !ne;
        for (c = qr(c); q--; ) {
          var me = y[q];
          if (fe && me[2] ? me[1] !== c[me[0]] : !(me[0] in c))
            return !1;
        }
        for (; ++q < ne; ) {
          me = y[q];
          var we = me[0], We = c[we], He = me[1];
          if (fe && me[2]) {
            if (We === r && !(we in c))
              return !1;
          } else {
            var Xe = new hs();
            if (O)
              var wt = O(We, He, we, c, h, Xe);
            if (!(wt === r ? uf(He, We, M | N, O, Xe) : wt))
              return !1;
          }
        }
        return !0;
      }
      function qy(c) {
        if (!Zr(c) || pM(c))
          return !1;
        var h = lo(c) ? DA : je;
        return h.test(ja(c));
      }
      function OP(c) {
        return en(c) && ri(c) == $e;
      }
      function NP(c) {
        return en(c) && Vn(c) == Me;
      }
      function LP(c) {
        return en(c) && Qh(c.length) && !!Fr[ri(c)];
      }
      function zy(c) {
        return typeof c == "function" ? c : c == null ? di : typeof c == "object" ? ir(c) ? Ky(c[0], c[1]) : Hy(c) : l2(c);
      }
      function tg(c) {
        if (!hf(c))
          return BA(c);
        var h = [];
        for (var y in qr(c))
          Tr.call(c, y) && y != "constructor" && h.push(y);
        return h;
      }
      function kP(c) {
        if (!Zr(c))
          return bM(c);
        var h = hf(c), y = [];
        for (var O in c)
          O == "constructor" && (h || !Tr.call(c, O)) || y.push(O);
        return y;
      }
      function rg(c, h) {
        return c < h;
      }
      function Wy(c, h) {
        var y = -1, O = li(c) ? Ie(c.length) : [];
        return Go(c, function(q, ne, fe) {
          O[++y] = h(q, ne, fe);
        }), O;
      }
      function Hy(c) {
        var h = vg(c);
        return h.length == 1 && h[0][2] ? Aw(h[0][0], h[0][1]) : function(y) {
          return y === c || eg(y, c, h);
        };
      }
      function Ky(c, h) {
        return yg(c) && Sw(h) ? Aw(Rs(c), h) : function(y) {
          var O = Cg(y, c);
          return O === r && O === h ? Tg(y, c) : uf(h, O, M | N);
        };
      }
      function $h(c, h, y, O, q) {
        c !== h && Jp(h, function(ne, fe) {
          if (q || (q = new hs()), Zr(ne))
            $P(c, h, fe, y, $h, O, q);
          else {
            var me = O ? O(xg(c, fe), ne, fe + "", c, h, q) : r;
            me === r && (me = ne), Gp(c, fe, me);
          }
        }, hi);
      }
      function $P(c, h, y, O, q, ne, fe) {
        var me = xg(c, y), we = xg(h, y), We = fe.get(we);
        if (We) {
          Gp(c, y, We);
          return;
        }
        var He = ne ? ne(me, we, y + "", c, h, fe) : r, Xe = He === r;
        if (Xe) {
          var wt = ir(we), Ot = !wt && Zo(we), Ht = !wt && !Ot && jc(we);
          He = we, wt || Ot || Ht ? ir(me) ? He = me : cn(me) ? He = fi(me) : Ot ? (Xe = !1, He = iw(we, !0)) : Ht ? (Xe = !1, He = sw(we, !0)) : He = [] : pf(we) || Ua(we) ? (He = me, Ua(me) ? He = t2(me) : (!Zr(me) || lo(me)) && (He = Ew(we))) : Xe = !1;
        }
        Xe && (fe.set(we, He), q(He, we, O, ne, fe), fe.delete(we)), Gp(c, y, He);
      }
      function Vy(c, h) {
        var y = c.length;
        if (y)
          return h += h < 0 ? y : 0, fo(h, y) ? c[h] : r;
      }
      function Gy(c, h, y) {
        h.length ? h = Xr(h, function(ne) {
          return ir(ne) ? function(fe) {
            return Ba(fe, ne.length === 1 ? ne[0] : ne);
          } : ne;
        }) : h = [di];
        var O = -1;
        h = Xr(h, Pi(Ut()));
        var q = Wy(c, function(ne, fe, me) {
          var we = Xr(h, function(We) {
            return We(ne);
          });
          return { criteria: we, index: ++O, value: ne };
        });
        return fA(q, function(ne, fe) {
          return JP(ne, fe, y);
        });
      }
      function BP(c, h) {
        return Yy(c, h, function(y, O) {
          return Tg(c, O);
        });
      }
      function Yy(c, h, y) {
        for (var O = -1, q = h.length, ne = {}; ++O < q; ) {
          var fe = h[O], me = Ba(c, fe);
          y(me, fe) && ff(ne, Jo(fe, c), me);
        }
        return ne;
      }
      function FP(c) {
        return function(h) {
          return Ba(h, c);
        };
      }
      function ng(c, h, y, O) {
        var q = O ? uA : Cc, ne = -1, fe = h.length, me = c;
        for (c === h && (h = fi(h)), y && (me = Xr(c, Pi(y))); ++ne < fe; )
          for (var we = 0, We = h[ne], He = y ? y(We) : We; (we = q(me, He, we, O)) > -1; )
            me !== c && Mh.call(me, we, 1), Mh.call(c, we, 1);
        return c;
      }
      function Jy(c, h) {
        for (var y = c ? h.length : 0, O = y - 1; y--; ) {
          var q = h[y];
          if (y == O || q !== ne) {
            var ne = q;
            fo(q) ? Mh.call(c, q, 1) : ag(c, q);
          }
        }
        return c;
      }
      function ig(c, h) {
        return c + Th(Ty() * (h - c + 1));
      }
      function jP(c, h, y, O) {
        for (var q = -1, ne = _n(Ch((h - c) / (y || 1)), 0), fe = Ie(ne); ne--; )
          fe[O ? ne : ++q] = c, c += y;
        return fe;
      }
      function sg(c, h) {
        var y = "";
        if (!c || h < 1 || h > _)
          return y;
        do
          h % 2 && (y += c), h = Th(h / 2), h && (c += c);
        while (h);
        return y;
      }
      function hr(c, h) {
        return _g(Pw(c, h, di), c + "");
      }
      function UP(c) {
        return Oy(Uc(c));
      }
      function qP(c, h) {
        var y = Uc(c);
        return Vh(y, $a(h, 0, y.length));
      }
      function ff(c, h, y, O) {
        if (!Zr(c))
          return c;
        h = Jo(h, c);
        for (var q = -1, ne = h.length, fe = ne - 1, me = c; me != null && ++q < ne; ) {
          var we = Rs(h[q]), We = y;
          if (we === "__proto__" || we === "constructor" || we === "prototype")
            return c;
          if (q != fe) {
            var He = me[we];
            We = O ? O(He, we, me) : r, We === r && (We = Zr(He) ? He : fo(h[q + 1]) ? [] : {});
          }
          of(me, we, We), me = me[we];
        }
        return c;
      }
      var Xy = Rh ? function(c, h) {
        return Rh.set(c, h), c;
      } : di, zP = Ih ? function(c, h) {
        return Ih(c, "toString", {
          configurable: !0,
          enumerable: !1,
          value: Dg(h),
          writable: !0
        });
      } : di;
      function WP(c) {
        return Vh(Uc(c));
      }
      function Wi(c, h, y) {
        var O = -1, q = c.length;
        h < 0 && (h = -h > q ? 0 : q + h), y = y > q ? q : y, y < 0 && (y += q), q = h > y ? 0 : y - h >>> 0, h >>>= 0;
        for (var ne = Ie(q); ++O < q; )
          ne[O] = c[O + h];
        return ne;
      }
      function HP(c, h) {
        var y;
        return Go(c, function(O, q, ne) {
          return y = h(O, q, ne), !y;
        }), !!y;
      }
      function Bh(c, h, y) {
        var O = 0, q = c == null ? O : c.length;
        if (typeof h == "number" && h === h && q <= F) {
          for (; O < q; ) {
            var ne = O + q >>> 1, fe = c[ne];
            fe !== null && !Ii(fe) && (y ? fe <= h : fe < h) ? O = ne + 1 : q = ne;
          }
          return q;
        }
        return og(c, h, di, y);
      }
      function og(c, h, y, O) {
        var q = 0, ne = c == null ? 0 : c.length;
        if (ne === 0)
          return 0;
        h = y(h);
        for (var fe = h !== h, me = h === null, we = Ii(h), We = h === r; q < ne; ) {
          var He = Th((q + ne) / 2), Xe = y(c[He]), wt = Xe !== r, Ot = Xe === null, Ht = Xe === Xe, fr = Ii(Xe);
          if (fe)
            var Kt = O || Ht;
          else We ? Kt = Ht && (O || wt) : me ? Kt = Ht && wt && (O || !Ot) : we ? Kt = Ht && wt && !Ot && (O || !fr) : Ot || fr ? Kt = !1 : Kt = O ? Xe <= h : Xe < h;
          Kt ? q = He + 1 : ne = He;
        }
        return Kn(ne, I);
      }
      function Zy(c, h) {
        for (var y = -1, O = c.length, q = 0, ne = []; ++y < O; ) {
          var fe = c[y], me = h ? h(fe) : fe;
          if (!y || !ds(me, we)) {
            var we = me;
            ne[q++] = fe === 0 ? 0 : fe;
          }
        }
        return ne;
      }
      function Qy(c) {
        return typeof c == "number" ? c : Ii(c) ? v : +c;
      }
      function Mi(c) {
        if (typeof c == "string")
          return c;
        if (ir(c))
          return Xr(c, Mi) + "";
        if (Ii(c))
          return Ry ? Ry.call(c) : "";
        var h = c + "";
        return h == "0" && 1 / c == -x ? "-0" : h;
      }
      function Yo(c, h, y) {
        var O = -1, q = vh, ne = c.length, fe = !0, me = [], we = me;
        if (y)
          fe = !1, q = Lp;
        else if (ne >= i) {
          var We = h ? null : rM(c);
          if (We)
            return yh(We);
          fe = !1, q = Qu, we = new ka();
        } else
          we = h ? [] : me;
        e:
          for (; ++O < ne; ) {
            var He = c[O], Xe = h ? h(He) : He;
            if (He = y || He !== 0 ? He : 0, fe && Xe === Xe) {
              for (var wt = we.length; wt--; )
                if (we[wt] === Xe)
                  continue e;
              h && we.push(Xe), me.push(He);
            } else q(we, Xe, y) || (we !== me && we.push(Xe), me.push(He));
          }
        return me;
      }
      function ag(c, h) {
        return h = Jo(h, c), c = Mw(c, h), c == null || delete c[Rs(Hi(h))];
      }
      function ew(c, h, y, O) {
        return ff(c, h, y(Ba(c, h)), O);
      }
      function Fh(c, h, y, O) {
        for (var q = c.length, ne = O ? q : -1; (O ? ne-- : ++ne < q) && h(c[ne], ne, c); )
          ;
        return y ? Wi(c, O ? 0 : ne, O ? ne + 1 : q) : Wi(c, O ? ne + 1 : 0, O ? q : ne);
      }
      function tw(c, h) {
        var y = c;
        return y instanceof wr && (y = y.value()), kp(h, function(O, q) {
          return q.func.apply(q.thisArg, Ho([O], q.args));
        }, y);
      }
      function cg(c, h, y) {
        var O = c.length;
        if (O < 2)
          return O ? Yo(c[0]) : [];
        for (var q = -1, ne = Ie(O); ++q < O; )
          for (var fe = c[q], me = -1; ++me < O; )
            me != q && (ne[q] = af(ne[q] || fe, c[me], h, y));
        return Yo(Bn(ne, 1), h, y);
      }
      function rw(c, h, y) {
        for (var O = -1, q = c.length, ne = h.length, fe = {}; ++O < q; ) {
          var me = O < ne ? h[O] : r;
          y(fe, c[O], me);
        }
        return fe;
      }
      function ug(c) {
        return cn(c) ? c : [];
      }
      function fg(c) {
        return typeof c == "function" ? c : di;
      }
      function Jo(c, h) {
        return ir(c) ? c : yg(c, h) ? [c] : Rw(Cr(c));
      }
      var KP = hr;
      function Xo(c, h, y) {
        var O = c.length;
        return y = y === r ? O : y, !h && y >= O ? c : Wi(c, h, y);
      }
      var nw = OA || function(c) {
        return _r.clearTimeout(c);
      };
      function iw(c, h) {
        if (h)
          return c.slice();
        var y = c.length, O = Ay ? Ay(y) : new c.constructor(y);
        return c.copy(O), O;
      }
      function lg(c) {
        var h = new c.constructor(c.byteLength);
        return new Ah(h).set(new Ah(c)), h;
      }
      function VP(c, h) {
        var y = h ? lg(c.buffer) : c.buffer;
        return new c.constructor(y, c.byteOffset, c.byteLength);
      }
      function GP(c) {
        var h = new c.constructor(c.source, Te.exec(c));
        return h.lastIndex = c.lastIndex, h;
      }
      function YP(c) {
        return sf ? qr(sf.call(c)) : {};
      }
      function sw(c, h) {
        var y = h ? lg(c.buffer) : c.buffer;
        return new c.constructor(y, c.byteOffset, c.length);
      }
      function ow(c, h) {
        if (c !== h) {
          var y = c !== r, O = c === null, q = c === c, ne = Ii(c), fe = h !== r, me = h === null, we = h === h, We = Ii(h);
          if (!me && !We && !ne && c > h || ne && fe && we && !me && !We || O && fe && we || !y && we || !q)
            return 1;
          if (!O && !ne && !We && c < h || We && y && q && !O && !ne || me && y && q || !fe && q || !we)
            return -1;
        }
        return 0;
      }
      function JP(c, h, y) {
        for (var O = -1, q = c.criteria, ne = h.criteria, fe = q.length, me = y.length; ++O < fe; ) {
          var we = ow(q[O], ne[O]);
          if (we) {
            if (O >= me)
              return we;
            var We = y[O];
            return we * (We == "desc" ? -1 : 1);
          }
        }
        return c.index - h.index;
      }
      function aw(c, h, y, O) {
        for (var q = -1, ne = c.length, fe = y.length, me = -1, we = h.length, We = _n(ne - fe, 0), He = Ie(we + We), Xe = !O; ++me < we; )
          He[me] = h[me];
        for (; ++q < fe; )
          (Xe || q < ne) && (He[y[q]] = c[q]);
        for (; We--; )
          He[me++] = c[q++];
        return He;
      }
      function cw(c, h, y, O) {
        for (var q = -1, ne = c.length, fe = -1, me = y.length, we = -1, We = h.length, He = _n(ne - me, 0), Xe = Ie(He + We), wt = !O; ++q < He; )
          Xe[q] = c[q];
        for (var Ot = q; ++we < We; )
          Xe[Ot + we] = h[we];
        for (; ++fe < me; )
          (wt || q < ne) && (Xe[Ot + y[fe]] = c[q++]);
        return Xe;
      }
      function fi(c, h) {
        var y = -1, O = c.length;
        for (h || (h = Ie(O)); ++y < O; )
          h[y] = c[y];
        return h;
      }
      function Ts(c, h, y, O) {
        var q = !y;
        y || (y = {});
        for (var ne = -1, fe = h.length; ++ne < fe; ) {
          var me = h[ne], we = O ? O(y[me], c[me], me, y, c) : r;
          we === r && (we = c[me]), q ? ao(y, me, we) : of(y, me, we);
        }
        return y;
      }
      function XP(c, h) {
        return Ts(c, bg(c), h);
      }
      function ZP(c, h) {
        return Ts(c, xw(c), h);
      }
      function jh(c, h) {
        return function(y, O) {
          var q = ir(y) ? nA : wP, ne = h ? h() : {};
          return q(y, c, Ut(O, 2), ne);
        };
      }
      function $c(c) {
        return hr(function(h, y) {
          var O = -1, q = y.length, ne = q > 1 ? y[q - 1] : r, fe = q > 2 ? y[2] : r;
          for (ne = c.length > 3 && typeof ne == "function" ? (q--, ne) : r, fe && ni(y[0], y[1], fe) && (ne = q < 3 ? r : ne, q = 1), h = qr(h); ++O < q; ) {
            var me = y[O];
            me && c(h, me, O, ne);
          }
          return h;
        });
      }
      function uw(c, h) {
        return function(y, O) {
          if (y == null)
            return y;
          if (!li(y))
            return c(y, O);
          for (var q = y.length, ne = h ? q : -1, fe = qr(y); (h ? ne-- : ++ne < q) && O(fe[ne], ne, fe) !== !1; )
            ;
          return y;
        };
      }
      function fw(c) {
        return function(h, y, O) {
          for (var q = -1, ne = qr(h), fe = O(h), me = fe.length; me--; ) {
            var we = fe[c ? me : ++q];
            if (y(ne[we], we, ne) === !1)
              break;
          }
          return h;
        };
      }
      function QP(c, h, y) {
        var O = h & L, q = lf(c);
        function ne() {
          var fe = this && this !== _r && this instanceof ne ? q : c;
          return fe.apply(O ? y : this, arguments);
        }
        return ne;
      }
      function lw(c) {
        return function(h) {
          h = Cr(h);
          var y = Tc(h) ? ls(h) : r, O = y ? y[0] : h.charAt(0), q = y ? Xo(y, 1).join("") : h.slice(1);
          return O[c]() + q;
        };
      }
      function Bc(c) {
        return function(h) {
          return kp(u2(c2(h).replace(Xu, "")), c, "");
        };
      }
      function lf(c) {
        return function() {
          var h = arguments;
          switch (h.length) {
            case 0:
              return new c();
            case 1:
              return new c(h[0]);
            case 2:
              return new c(h[0], h[1]);
            case 3:
              return new c(h[0], h[1], h[2]);
            case 4:
              return new c(h[0], h[1], h[2], h[3]);
            case 5:
              return new c(h[0], h[1], h[2], h[3], h[4]);
            case 6:
              return new c(h[0], h[1], h[2], h[3], h[4], h[5]);
            case 7:
              return new c(h[0], h[1], h[2], h[3], h[4], h[5], h[6]);
          }
          var y = kc(c.prototype), O = c.apply(y, h);
          return Zr(O) ? O : y;
        };
      }
      function eM(c, h, y) {
        var O = lf(c);
        function q() {
          for (var ne = arguments.length, fe = Ie(ne), me = ne, we = Fc(q); me--; )
            fe[me] = arguments[me];
          var We = ne < 3 && fe[0] !== we && fe[ne - 1] !== we ? [] : Ko(fe, we);
          if (ne -= We.length, ne < y)
            return mw(
              c,
              h,
              Uh,
              q.placeholder,
              r,
              fe,
              We,
              r,
              r,
              y - ne
            );
          var He = this && this !== _r && this instanceof q ? O : c;
          return Pn(He, this, fe);
        }
        return q;
      }
      function hw(c) {
        return function(h, y, O) {
          var q = qr(h);
          if (!li(h)) {
            var ne = Ut(y, 3);
            h = Mn(h), y = function(me) {
              return ne(q[me], me, q);
            };
          }
          var fe = c(h, y, O);
          return fe > -1 ? q[ne ? h[fe] : fe] : r;
        };
      }
      function dw(c) {
        return uo(function(h) {
          var y = h.length, O = y, q = qi.prototype.thru;
          for (c && h.reverse(); O--; ) {
            var ne = h[O];
            if (typeof ne != "function")
              throw new Ui(o);
            if (q && !fe && Hh(ne) == "wrapper")
              var fe = new qi([], !0);
          }
          for (O = fe ? O : y; ++O < y; ) {
            ne = h[O];
            var me = Hh(ne), we = me == "wrapper" ? mg(ne) : r;
            we && wg(we[0]) && we[1] == (R | H | V | K) && !we[4].length && we[9] == 1 ? fe = fe[Hh(we[0])].apply(fe, we[3]) : fe = ne.length == 1 && wg(ne) ? fe[me]() : fe.thru(ne);
          }
          return function() {
            var We = arguments, He = We[0];
            if (fe && We.length == 1 && ir(He))
              return fe.plant(He).value();
            for (var Xe = 0, wt = y ? h[Xe].apply(this, We) : He; ++Xe < y; )
              wt = h[Xe].call(this, wt);
            return wt;
          };
        });
      }
      function Uh(c, h, y, O, q, ne, fe, me, we, We) {
        var He = h & R, Xe = h & L, wt = h & B, Ot = h & (H | W), Ht = h & ge, fr = wt ? r : lf(c);
        function Kt() {
          for (var vr = arguments.length, Er = Ie(vr), Ci = vr; Ci--; )
            Er[Ci] = arguments[Ci];
          if (Ot)
            var ii = Fc(Kt), Ti = hA(Er, ii);
          if (O && (Er = aw(Er, O, q, Ot)), ne && (Er = cw(Er, ne, fe, Ot)), vr -= Ti, Ot && vr < We) {
            var un = Ko(Er, ii);
            return mw(
              c,
              h,
              Uh,
              Kt.placeholder,
              y,
              Er,
              un,
              me,
              we,
              We - vr
            );
          }
          var ps = Xe ? y : this, po = wt ? ps[c] : c;
          return vr = Er.length, me ? Er = wM(Er, me) : Ht && vr > 1 && Er.reverse(), He && we < vr && (Er.length = we), this && this !== _r && this instanceof Kt && (po = fr || lf(po)), po.apply(ps, Er);
        }
        return Kt;
      }
      function pw(c, h) {
        return function(y, O) {
          return IP(y, c, h(O), {});
        };
      }
      function qh(c, h) {
        return function(y, O) {
          var q;
          if (y === r && O === r)
            return h;
          if (y !== r && (q = y), O !== r) {
            if (q === r)
              return O;
            typeof y == "string" || typeof O == "string" ? (y = Mi(y), O = Mi(O)) : (y = Qy(y), O = Qy(O)), q = c(y, O);
          }
          return q;
        };
      }
      function hg(c) {
        return uo(function(h) {
          return h = Xr(h, Pi(Ut())), hr(function(y) {
            var O = this;
            return c(h, function(q) {
              return Pn(q, O, y);
            });
          });
        });
      }
      function zh(c, h) {
        h = h === r ? " " : Mi(h);
        var y = h.length;
        if (y < 2)
          return y ? sg(h, c) : h;
        var O = sg(h, Ch(c / Rc(h)));
        return Tc(h) ? Xo(ls(O), 0, c).join("") : O.slice(0, c);
      }
      function tM(c, h, y, O) {
        var q = h & L, ne = lf(c);
        function fe() {
          for (var me = -1, we = arguments.length, We = -1, He = O.length, Xe = Ie(He + we), wt = this && this !== _r && this instanceof fe ? ne : c; ++We < He; )
            Xe[We] = O[We];
          for (; we--; )
            Xe[We++] = arguments[++me];
          return Pn(wt, q ? y : this, Xe);
        }
        return fe;
      }
      function gw(c) {
        return function(h, y, O) {
          return O && typeof O != "number" && ni(h, y, O) && (y = O = r), h = ho(h), y === r ? (y = h, h = 0) : y = ho(y), O = O === r ? h < y ? 1 : -1 : ho(O), jP(h, y, O, c);
        };
      }
      function Wh(c) {
        return function(h, y) {
          return typeof h == "string" && typeof y == "string" || (h = Ki(h), y = Ki(y)), c(h, y);
        };
      }
      function mw(c, h, y, O, q, ne, fe, me, we, We) {
        var He = h & H, Xe = He ? fe : r, wt = He ? r : fe, Ot = He ? ne : r, Ht = He ? r : ne;
        h |= He ? V : te, h &= ~(He ? te : V), h & $ || (h &= ~(L | B));
        var fr = [
          c,
          h,
          q,
          Ot,
          Xe,
          Ht,
          wt,
          me,
          we,
          We
        ], Kt = y.apply(r, fr);
        return wg(c) && Iw(Kt, fr), Kt.placeholder = O, Cw(Kt, c, h);
      }
      function dg(c) {
        var h = xn[c];
        return function(y, O) {
          if (y = Ki(y), O = O == null ? 0 : Kn(cr(O), 292), O && Cy(y)) {
            var q = (Cr(y) + "e").split("e"), ne = h(q[0] + "e" + (+q[1] + O));
            return q = (Cr(ne) + "e").split("e"), +(q[0] + "e" + (+q[1] - O));
          }
          return h(y);
        };
      }
      var rM = Nc && 1 / yh(new Nc([, -0]))[1] == x ? function(c) {
        return new Nc(c);
      } : Lg;
      function vw(c) {
        return function(h) {
          var y = Vn(h);
          return y == ie ? zp(h) : y == Me ? yA(h) : lA(h, c(h));
        };
      }
      function co(c, h, y, O, q, ne, fe, me) {
        var we = h & B;
        if (!we && typeof c != "function")
          throw new Ui(o);
        var We = O ? O.length : 0;
        if (We || (h &= ~(V | te), O = q = r), fe = fe === r ? fe : _n(cr(fe), 0), me = me === r ? me : cr(me), We -= q ? q.length : 0, h & te) {
          var He = O, Xe = q;
          O = q = r;
        }
        var wt = we ? r : mg(c), Ot = [
          c,
          h,
          y,
          O,
          q,
          He,
          Xe,
          ne,
          fe,
          me
        ];
        if (wt && vM(Ot, wt), c = Ot[0], h = Ot[1], y = Ot[2], O = Ot[3], q = Ot[4], me = Ot[9] = Ot[9] === r ? we ? 0 : c.length : _n(Ot[9] - We, 0), !me && h & (H | W) && (h &= ~(H | W)), !h || h == L)
          var Ht = QP(c, h, y);
        else h == H || h == W ? Ht = eM(c, h, me) : (h == V || h == (L | V)) && !q.length ? Ht = tM(c, h, y, O) : Ht = Uh.apply(r, Ot);
        var fr = wt ? Xy : Iw;
        return Cw(fr(Ht, Ot), c, h);
      }
      function bw(c, h, y, O) {
        return c === r || ds(c, Oc[y]) && !Tr.call(O, y) ? h : c;
      }
      function yw(c, h, y, O, q, ne) {
        return Zr(c) && Zr(h) && (ne.set(h, c), $h(c, h, r, yw, ne), ne.delete(h)), c;
      }
      function nM(c) {
        return pf(c) ? r : c;
      }
      function ww(c, h, y, O, q, ne) {
        var fe = y & M, me = c.length, we = h.length;
        if (me != we && !(fe && we > me))
          return !1;
        var We = ne.get(c), He = ne.get(h);
        if (We && He)
          return We == h && He == c;
        var Xe = -1, wt = !0, Ot = y & N ? new ka() : r;
        for (ne.set(c, h), ne.set(h, c); ++Xe < me; ) {
          var Ht = c[Xe], fr = h[Xe];
          if (O)
            var Kt = fe ? O(fr, Ht, Xe, h, c, ne) : O(Ht, fr, Xe, c, h, ne);
          if (Kt !== r) {
            if (Kt)
              continue;
            wt = !1;
            break;
          }
          if (Ot) {
            if (!$p(h, function(vr, Er) {
              if (!Qu(Ot, Er) && (Ht === vr || q(Ht, vr, y, O, ne)))
                return Ot.push(Er);
            })) {
              wt = !1;
              break;
            }
          } else if (!(Ht === fr || q(Ht, fr, y, O, ne))) {
            wt = !1;
            break;
          }
        }
        return ne.delete(c), ne.delete(h), wt;
      }
      function iM(c, h, y, O, q, ne, fe) {
        switch (y) {
          case Ze:
            if (c.byteLength != h.byteLength || c.byteOffset != h.byteOffset)
              return !1;
            c = c.buffer, h = h.buffer;
          case _e:
            return !(c.byteLength != h.byteLength || !ne(new Ah(c), new Ah(h)));
          case J:
          case Q:
          case ue:
            return ds(+c, +h);
          case X:
            return c.name == h.name && c.message == h.message;
          case $e:
          case Ne:
            return c == h + "";
          case ie:
            var me = zp;
          case Me:
            var we = O & M;
            if (me || (me = yh), c.size != h.size && !we)
              return !1;
            var We = fe.get(c);
            if (We)
              return We == h;
            O |= N, fe.set(c, h);
            var He = ww(me(c), me(h), O, q, ne, fe);
            return fe.delete(c), He;
          case Ke:
            if (sf)
              return sf.call(c) == sf.call(h);
        }
        return !1;
      }
      function sM(c, h, y, O, q, ne) {
        var fe = y & M, me = pg(c), we = me.length, We = pg(h), He = We.length;
        if (we != He && !fe)
          return !1;
        for (var Xe = we; Xe--; ) {
          var wt = me[Xe];
          if (!(fe ? wt in h : Tr.call(h, wt)))
            return !1;
        }
        var Ot = ne.get(c), Ht = ne.get(h);
        if (Ot && Ht)
          return Ot == h && Ht == c;
        var fr = !0;
        ne.set(c, h), ne.set(h, c);
        for (var Kt = fe; ++Xe < we; ) {
          wt = me[Xe];
          var vr = c[wt], Er = h[wt];
          if (O)
            var Ci = fe ? O(Er, vr, wt, h, c, ne) : O(vr, Er, wt, c, h, ne);
          if (!(Ci === r ? vr === Er || q(vr, Er, y, O, ne) : Ci)) {
            fr = !1;
            break;
          }
          Kt || (Kt = wt == "constructor");
        }
        if (fr && !Kt) {
          var ii = c.constructor, Ti = h.constructor;
          ii != Ti && "constructor" in c && "constructor" in h && !(typeof ii == "function" && ii instanceof ii && typeof Ti == "function" && Ti instanceof Ti) && (fr = !1);
        }
        return ne.delete(c), ne.delete(h), fr;
      }
      function uo(c) {
        return _g(Pw(c, r, Lw), c + "");
      }
      function pg(c) {
        return jy(c, Mn, bg);
      }
      function gg(c) {
        return jy(c, hi, xw);
      }
      var mg = Rh ? function(c) {
        return Rh.get(c);
      } : Lg;
      function Hh(c) {
        for (var h = c.name + "", y = Lc[h], O = Tr.call(Lc, h) ? y.length : 0; O--; ) {
          var q = y[O], ne = q.func;
          if (ne == null || ne == c)
            return q.name;
        }
        return h;
      }
      function Fc(c) {
        var h = Tr.call(ee, "placeholder") ? ee : c;
        return h.placeholder;
      }
      function Ut() {
        var c = ee.iteratee || Og;
        return c = c === Og ? zy : c, arguments.length ? c(arguments[0], arguments[1]) : c;
      }
      function Kh(c, h) {
        var y = c.__data__;
        return dM(h) ? y[typeof h == "string" ? "string" : "hash"] : y.map;
      }
      function vg(c) {
        for (var h = Mn(c), y = h.length; y--; ) {
          var O = h[y], q = c[O];
          h[y] = [O, q, Sw(q)];
        }
        return h;
      }
      function Fa(c, h) {
        var y = mA(c, h);
        return qy(y) ? y : r;
      }
      function oM(c) {
        var h = Tr.call(c, Na), y = c[Na];
        try {
          c[Na] = r;
          var O = !0;
        } catch {
        }
        var q = Eh.call(c);
        return O && (h ? c[Na] = y : delete c[Na]), q;
      }
      var bg = Hp ? function(c) {
        return c == null ? [] : (c = qr(c), Wo(Hp(c), function(h) {
          return My.call(c, h);
        }));
      } : kg, xw = Hp ? function(c) {
        for (var h = []; c; )
          Ho(h, bg(c)), c = Ph(c);
        return h;
      } : kg, Vn = ri;
      (Kp && Vn(new Kp(new ArrayBuffer(1))) != Ze || tf && Vn(new tf()) != ie || Vp && Vn(Vp.resolve()) != De || Nc && Vn(new Nc()) != Me || rf && Vn(new rf()) != qe) && (Vn = function(c) {
        var h = ri(c), y = h == Pe ? c.constructor : r, O = y ? ja(y) : "";
        if (O)
          switch (O) {
            case qA:
              return Ze;
            case zA:
              return ie;
            case WA:
              return De;
            case HA:
              return Me;
            case KA:
              return qe;
          }
        return h;
      });
      function aM(c, h, y) {
        for (var O = -1, q = y.length; ++O < q; ) {
          var ne = y[O], fe = ne.size;
          switch (ne.type) {
            case "drop":
              c += fe;
              break;
            case "dropRight":
              h -= fe;
              break;
            case "take":
              h = Kn(h, c + fe);
              break;
            case "takeRight":
              c = _n(c, h - fe);
              break;
          }
        }
        return { start: c, end: h };
      }
      function cM(c) {
        var h = c.match(C);
        return h ? h[1].split(G) : [];
      }
      function _w(c, h, y) {
        h = Jo(h, c);
        for (var O = -1, q = h.length, ne = !1; ++O < q; ) {
          var fe = Rs(h[O]);
          if (!(ne = c != null && y(c, fe)))
            break;
          c = c[fe];
        }
        return ne || ++O != q ? ne : (q = c == null ? 0 : c.length, !!q && Qh(q) && fo(fe, q) && (ir(c) || Ua(c)));
      }
      function uM(c) {
        var h = c.length, y = new c.constructor(h);
        return h && typeof c[0] == "string" && Tr.call(c, "index") && (y.index = c.index, y.input = c.input), y;
      }
      function Ew(c) {
        return typeof c.constructor == "function" && !hf(c) ? kc(Ph(c)) : {};
      }
      function fM(c, h, y) {
        var O = c.constructor;
        switch (h) {
          case _e:
            return lg(c);
          case J:
          case Q:
            return new O(+c);
          case Ze:
            return VP(c, y);
          case at:
          case ke:
          case Qe:
          case tt:
          case Ye:
          case dt:
          case lt:
          case ct:
          case qt:
            return sw(c, y);
          case ie:
            return new O();
          case ue:
          case Ne:
            return new O(c);
          case $e:
            return GP(c);
          case Me:
            return new O();
          case Ke:
            return YP(c);
        }
      }
      function lM(c, h) {
        var y = h.length;
        if (!y)
          return c;
        var O = y - 1;
        return h[O] = (y > 1 ? "& " : "") + h[O], h = h.join(y > 2 ? ", " : " "), c.replace(z, `{
/* [wrapped with ` + h + `] */
`);
      }
      function hM(c) {
        return ir(c) || Ua(c) || !!(Iy && c && c[Iy]);
      }
      function fo(c, h) {
        var y = typeof c;
        return h = h ?? _, !!h && (y == "number" || y != "symbol" && it.test(c)) && c > -1 && c % 1 == 0 && c < h;
      }
      function ni(c, h, y) {
        if (!Zr(y))
          return !1;
        var O = typeof h;
        return (O == "number" ? li(y) && fo(h, y.length) : O == "string" && h in y) ? ds(y[h], c) : !1;
      }
      function yg(c, h) {
        if (ir(c))
          return !1;
        var y = typeof c;
        return y == "number" || y == "symbol" || y == "boolean" || c == null || Ii(c) ? !0 : $t.test(c) || !vt.test(c) || h != null && c in qr(h);
      }
      function dM(c) {
        var h = typeof c;
        return h == "string" || h == "number" || h == "symbol" || h == "boolean" ? c !== "__proto__" : c === null;
      }
      function wg(c) {
        var h = Hh(c), y = ee[h];
        if (typeof y != "function" || !(h in wr.prototype))
          return !1;
        if (c === y)
          return !0;
        var O = mg(y);
        return !!O && c === O[0];
      }
      function pM(c) {
        return !!Sy && Sy in c;
      }
      var gM = xh ? lo : $g;
      function hf(c) {
        var h = c && c.constructor, y = typeof h == "function" && h.prototype || Oc;
        return c === y;
      }
      function Sw(c) {
        return c === c && !Zr(c);
      }
      function Aw(c, h) {
        return function(y) {
          return y == null ? !1 : y[c] === h && (h !== r || c in qr(y));
        };
      }
      function mM(c) {
        var h = Xh(c, function(O) {
          return y.size === l && y.clear(), O;
        }), y = h.cache;
        return h;
      }
      function vM(c, h) {
        var y = c[1], O = h[1], q = y | O, ne = q < (L | B | R), fe = O == R && y == H || O == R && y == K && c[7].length <= h[8] || O == (R | K) && h[7].length <= h[8] && y == H;
        if (!(ne || fe))
          return c;
        O & L && (c[2] = h[2], q |= y & L ? 0 : $);
        var me = h[3];
        if (me) {
          var we = c[3];
          c[3] = we ? aw(we, me, h[4]) : me, c[4] = we ? Ko(c[3], d) : h[4];
        }
        return me = h[5], me && (we = c[5], c[5] = we ? cw(we, me, h[6]) : me, c[6] = we ? Ko(c[5], d) : h[6]), me = h[7], me && (c[7] = me), O & R && (c[8] = c[8] == null ? h[8] : Kn(c[8], h[8])), c[9] == null && (c[9] = h[9]), c[0] = h[0], c[1] = q, c;
      }
      function bM(c) {
        var h = [];
        if (c != null)
          for (var y in qr(c))
            h.push(y);
        return h;
      }
      function yM(c) {
        return Eh.call(c);
      }
      function Pw(c, h, y) {
        return h = _n(h === r ? c.length - 1 : h, 0), function() {
          for (var O = arguments, q = -1, ne = _n(O.length - h, 0), fe = Ie(ne); ++q < ne; )
            fe[q] = O[h + q];
          q = -1;
          for (var me = Ie(h + 1); ++q < h; )
            me[q] = O[q];
          return me[h] = y(fe), Pn(c, this, me);
        };
      }
      function Mw(c, h) {
        return h.length < 2 ? c : Ba(c, Wi(h, 0, -1));
      }
      function wM(c, h) {
        for (var y = c.length, O = Kn(h.length, y), q = fi(c); O--; ) {
          var ne = h[O];
          c[O] = fo(ne, y) ? q[ne] : r;
        }
        return c;
      }
      function xg(c, h) {
        if (!(h === "constructor" && typeof c[h] == "function") && h != "__proto__")
          return c[h];
      }
      var Iw = Tw(Xy), df = LA || function(c, h) {
        return _r.setTimeout(c, h);
      }, _g = Tw(zP);
      function Cw(c, h, y) {
        var O = h + "";
        return _g(c, lM(O, xM(cM(O), y)));
      }
      function Tw(c) {
        var h = 0, y = 0;
        return function() {
          var O = FA(), q = m - (O - y);
          if (y = O, q > 0) {
            if (++h >= S)
              return arguments[0];
          } else
            h = 0;
          return c.apply(r, arguments);
        };
      }
      function Vh(c, h) {
        var y = -1, O = c.length, q = O - 1;
        for (h = h === r ? O : h; ++y < h; ) {
          var ne = ig(y, q), fe = c[ne];
          c[ne] = c[y], c[y] = fe;
        }
        return c.length = h, c;
      }
      var Rw = mM(function(c) {
        var h = [];
        return c.charCodeAt(0) === 46 && h.push(""), c.replace(Ft, function(y, O, q, ne) {
          h.push(q ? ne.replace(he, "$1") : O || y);
        }), h;
      });
      function Rs(c) {
        if (typeof c == "string" || Ii(c))
          return c;
        var h = c + "";
        return h == "0" && 1 / c == -x ? "-0" : h;
      }
      function ja(c) {
        if (c != null) {
          try {
            return _h.call(c);
          } catch {
          }
          try {
            return c + "";
          } catch {
          }
        }
        return "";
      }
      function xM(c, h) {
        return ji(ce, function(y) {
          var O = "_." + y[0];
          h & y[1] && !vh(c, O) && c.push(O);
        }), c.sort();
      }
      function Dw(c) {
        if (c instanceof wr)
          return c.clone();
        var h = new qi(c.__wrapped__, c.__chain__);
        return h.__actions__ = fi(c.__actions__), h.__index__ = c.__index__, h.__values__ = c.__values__, h;
      }
      function _M(c, h, y) {
        (y ? ni(c, h, y) : h === r) ? h = 1 : h = _n(cr(h), 0);
        var O = c == null ? 0 : c.length;
        if (!O || h < 1)
          return [];
        for (var q = 0, ne = 0, fe = Ie(Ch(O / h)); q < O; )
          fe[ne++] = Wi(c, q, q += h);
        return fe;
      }
      function EM(c) {
        for (var h = -1, y = c == null ? 0 : c.length, O = 0, q = []; ++h < y; ) {
          var ne = c[h];
          ne && (q[O++] = ne);
        }
        return q;
      }
      function SM() {
        var c = arguments.length;
        if (!c)
          return [];
        for (var h = Ie(c - 1), y = arguments[0], O = c; O--; )
          h[O - 1] = arguments[O];
        return Ho(ir(y) ? fi(y) : [y], Bn(h, 1));
      }
      var AM = hr(function(c, h) {
        return cn(c) ? af(c, Bn(h, 1, cn, !0)) : [];
      }), PM = hr(function(c, h) {
        var y = Hi(h);
        return cn(y) && (y = r), cn(c) ? af(c, Bn(h, 1, cn, !0), Ut(y, 2)) : [];
      }), MM = hr(function(c, h) {
        var y = Hi(h);
        return cn(y) && (y = r), cn(c) ? af(c, Bn(h, 1, cn, !0), r, y) : [];
      });
      function IM(c, h, y) {
        var O = c == null ? 0 : c.length;
        return O ? (h = y || h === r ? 1 : cr(h), Wi(c, h < 0 ? 0 : h, O)) : [];
      }
      function CM(c, h, y) {
        var O = c == null ? 0 : c.length;
        return O ? (h = y || h === r ? 1 : cr(h), h = O - h, Wi(c, 0, h < 0 ? 0 : h)) : [];
      }
      function TM(c, h) {
        return c && c.length ? Fh(c, Ut(h, 3), !0, !0) : [];
      }
      function RM(c, h) {
        return c && c.length ? Fh(c, Ut(h, 3), !0) : [];
      }
      function DM(c, h, y, O) {
        var q = c == null ? 0 : c.length;
        return q ? (y && typeof y != "number" && ni(c, h, y) && (y = 0, O = q), SP(c, h, y, O)) : [];
      }
      function Ow(c, h, y) {
        var O = c == null ? 0 : c.length;
        if (!O)
          return -1;
        var q = y == null ? 0 : cr(y);
        return q < 0 && (q = _n(O + q, 0)), bh(c, Ut(h, 3), q);
      }
      function Nw(c, h, y) {
        var O = c == null ? 0 : c.length;
        if (!O)
          return -1;
        var q = O - 1;
        return y !== r && (q = cr(y), q = y < 0 ? _n(O + q, 0) : Kn(q, O - 1)), bh(c, Ut(h, 3), q, !0);
      }
      function Lw(c) {
        var h = c == null ? 0 : c.length;
        return h ? Bn(c, 1) : [];
      }
      function OM(c) {
        var h = c == null ? 0 : c.length;
        return h ? Bn(c, x) : [];
      }
      function NM(c, h) {
        var y = c == null ? 0 : c.length;
        return y ? (h = h === r ? 1 : cr(h), Bn(c, h)) : [];
      }
      function LM(c) {
        for (var h = -1, y = c == null ? 0 : c.length, O = {}; ++h < y; ) {
          var q = c[h];
          O[q[0]] = q[1];
        }
        return O;
      }
      function kw(c) {
        return c && c.length ? c[0] : r;
      }
      function kM(c, h, y) {
        var O = c == null ? 0 : c.length;
        if (!O)
          return -1;
        var q = y == null ? 0 : cr(y);
        return q < 0 && (q = _n(O + q, 0)), Cc(c, h, q);
      }
      function $M(c) {
        var h = c == null ? 0 : c.length;
        return h ? Wi(c, 0, -1) : [];
      }
      var BM = hr(function(c) {
        var h = Xr(c, ug);
        return h.length && h[0] === c[0] ? Qp(h) : [];
      }), FM = hr(function(c) {
        var h = Hi(c), y = Xr(c, ug);
        return h === Hi(y) ? h = r : y.pop(), y.length && y[0] === c[0] ? Qp(y, Ut(h, 2)) : [];
      }), jM = hr(function(c) {
        var h = Hi(c), y = Xr(c, ug);
        return h = typeof h == "function" ? h : r, h && y.pop(), y.length && y[0] === c[0] ? Qp(y, r, h) : [];
      });
      function UM(c, h) {
        return c == null ? "" : $A.call(c, h);
      }
      function Hi(c) {
        var h = c == null ? 0 : c.length;
        return h ? c[h - 1] : r;
      }
      function qM(c, h, y) {
        var O = c == null ? 0 : c.length;
        if (!O)
          return -1;
        var q = O;
        return y !== r && (q = cr(y), q = q < 0 ? _n(O + q, 0) : Kn(q, O - 1)), h === h ? xA(c, h, q) : bh(c, my, q, !0);
      }
      function zM(c, h) {
        return c && c.length ? Vy(c, cr(h)) : r;
      }
      var WM = hr($w);
      function $w(c, h) {
        return c && c.length && h && h.length ? ng(c, h) : c;
      }
      function HM(c, h, y) {
        return c && c.length && h && h.length ? ng(c, h, Ut(y, 2)) : c;
      }
      function KM(c, h, y) {
        return c && c.length && h && h.length ? ng(c, h, r, y) : c;
      }
      var VM = uo(function(c, h) {
        var y = c == null ? 0 : c.length, O = Yp(c, h);
        return Jy(c, Xr(h, function(q) {
          return fo(q, y) ? +q : q;
        }).sort(ow)), O;
      });
      function GM(c, h) {
        var y = [];
        if (!(c && c.length))
          return y;
        var O = -1, q = [], ne = c.length;
        for (h = Ut(h, 3); ++O < ne; ) {
          var fe = c[O];
          h(fe, O, c) && (y.push(fe), q.push(O));
        }
        return Jy(c, q), y;
      }
      function Eg(c) {
        return c == null ? c : UA.call(c);
      }
      function YM(c, h, y) {
        var O = c == null ? 0 : c.length;
        return O ? (y && typeof y != "number" && ni(c, h, y) ? (h = 0, y = O) : (h = h == null ? 0 : cr(h), y = y === r ? O : cr(y)), Wi(c, h, y)) : [];
      }
      function JM(c, h) {
        return Bh(c, h);
      }
      function XM(c, h, y) {
        return og(c, h, Ut(y, 2));
      }
      function ZM(c, h) {
        var y = c == null ? 0 : c.length;
        if (y) {
          var O = Bh(c, h);
          if (O < y && ds(c[O], h))
            return O;
        }
        return -1;
      }
      function QM(c, h) {
        return Bh(c, h, !0);
      }
      function eI(c, h, y) {
        return og(c, h, Ut(y, 2), !0);
      }
      function tI(c, h) {
        var y = c == null ? 0 : c.length;
        if (y) {
          var O = Bh(c, h, !0) - 1;
          if (ds(c[O], h))
            return O;
        }
        return -1;
      }
      function rI(c) {
        return c && c.length ? Zy(c) : [];
      }
      function nI(c, h) {
        return c && c.length ? Zy(c, Ut(h, 2)) : [];
      }
      function iI(c) {
        var h = c == null ? 0 : c.length;
        return h ? Wi(c, 1, h) : [];
      }
      function sI(c, h, y) {
        return c && c.length ? (h = y || h === r ? 1 : cr(h), Wi(c, 0, h < 0 ? 0 : h)) : [];
      }
      function oI(c, h, y) {
        var O = c == null ? 0 : c.length;
        return O ? (h = y || h === r ? 1 : cr(h), h = O - h, Wi(c, h < 0 ? 0 : h, O)) : [];
      }
      function aI(c, h) {
        return c && c.length ? Fh(c, Ut(h, 3), !1, !0) : [];
      }
      function cI(c, h) {
        return c && c.length ? Fh(c, Ut(h, 3)) : [];
      }
      var uI = hr(function(c) {
        return Yo(Bn(c, 1, cn, !0));
      }), fI = hr(function(c) {
        var h = Hi(c);
        return cn(h) && (h = r), Yo(Bn(c, 1, cn, !0), Ut(h, 2));
      }), lI = hr(function(c) {
        var h = Hi(c);
        return h = typeof h == "function" ? h : r, Yo(Bn(c, 1, cn, !0), r, h);
      });
      function hI(c) {
        return c && c.length ? Yo(c) : [];
      }
      function dI(c, h) {
        return c && c.length ? Yo(c, Ut(h, 2)) : [];
      }
      function pI(c, h) {
        return h = typeof h == "function" ? h : r, c && c.length ? Yo(c, r, h) : [];
      }
      function Sg(c) {
        if (!(c && c.length))
          return [];
        var h = 0;
        return c = Wo(c, function(y) {
          if (cn(y))
            return h = _n(y.length, h), !0;
        }), Up(h, function(y) {
          return Xr(c, Bp(y));
        });
      }
      function Bw(c, h) {
        if (!(c && c.length))
          return [];
        var y = Sg(c);
        return h == null ? y : Xr(y, function(O) {
          return Pn(h, r, O);
        });
      }
      var gI = hr(function(c, h) {
        return cn(c) ? af(c, h) : [];
      }), mI = hr(function(c) {
        return cg(Wo(c, cn));
      }), vI = hr(function(c) {
        var h = Hi(c);
        return cn(h) && (h = r), cg(Wo(c, cn), Ut(h, 2));
      }), bI = hr(function(c) {
        var h = Hi(c);
        return h = typeof h == "function" ? h : r, cg(Wo(c, cn), r, h);
      }), yI = hr(Sg);
      function wI(c, h) {
        return rw(c || [], h || [], of);
      }
      function xI(c, h) {
        return rw(c || [], h || [], ff);
      }
      var _I = hr(function(c) {
        var h = c.length, y = h > 1 ? c[h - 1] : r;
        return y = typeof y == "function" ? (c.pop(), y) : r, Bw(c, y);
      });
      function Fw(c) {
        var h = ee(c);
        return h.__chain__ = !0, h;
      }
      function EI(c, h) {
        return h(c), c;
      }
      function Gh(c, h) {
        return h(c);
      }
      var SI = uo(function(c) {
        var h = c.length, y = h ? c[0] : 0, O = this.__wrapped__, q = function(ne) {
          return Yp(ne, c);
        };
        return h > 1 || this.__actions__.length || !(O instanceof wr) || !fo(y) ? this.thru(q) : (O = O.slice(y, +y + (h ? 1 : 0)), O.__actions__.push({
          func: Gh,
          args: [q],
          thisArg: r
        }), new qi(O, this.__chain__).thru(function(ne) {
          return h && !ne.length && ne.push(r), ne;
        }));
      });
      function AI() {
        return Fw(this);
      }
      function PI() {
        return new qi(this.value(), this.__chain__);
      }
      function MI() {
        this.__values__ === r && (this.__values__ = Qw(this.value()));
        var c = this.__index__ >= this.__values__.length, h = c ? r : this.__values__[this.__index__++];
        return { done: c, value: h };
      }
      function II() {
        return this;
      }
      function CI(c) {
        for (var h, y = this; y instanceof Oh; ) {
          var O = Dw(y);
          O.__index__ = 0, O.__values__ = r, h ? q.__wrapped__ = O : h = O;
          var q = O;
          y = y.__wrapped__;
        }
        return q.__wrapped__ = c, h;
      }
      function TI() {
        var c = this.__wrapped__;
        if (c instanceof wr) {
          var h = c;
          return this.__actions__.length && (h = new wr(this)), h = h.reverse(), h.__actions__.push({
            func: Gh,
            args: [Eg],
            thisArg: r
          }), new qi(h, this.__chain__);
        }
        return this.thru(Eg);
      }
      function RI() {
        return tw(this.__wrapped__, this.__actions__);
      }
      var DI = jh(function(c, h, y) {
        Tr.call(c, y) ? ++c[y] : ao(c, y, 1);
      });
      function OI(c, h, y) {
        var O = ir(c) ? py : EP;
        return y && ni(c, h, y) && (h = r), O(c, Ut(h, 3));
      }
      function NI(c, h) {
        var y = ir(c) ? Wo : By;
        return y(c, Ut(h, 3));
      }
      var LI = hw(Ow), kI = hw(Nw);
      function $I(c, h) {
        return Bn(Yh(c, h), 1);
      }
      function BI(c, h) {
        return Bn(Yh(c, h), x);
      }
      function FI(c, h, y) {
        return y = y === r ? 1 : cr(y), Bn(Yh(c, h), y);
      }
      function jw(c, h) {
        var y = ir(c) ? ji : Go;
        return y(c, Ut(h, 3));
      }
      function Uw(c, h) {
        var y = ir(c) ? iA : $y;
        return y(c, Ut(h, 3));
      }
      var jI = jh(function(c, h, y) {
        Tr.call(c, y) ? c[y].push(h) : ao(c, y, [h]);
      });
      function UI(c, h, y, O) {
        c = li(c) ? c : Uc(c), y = y && !O ? cr(y) : 0;
        var q = c.length;
        return y < 0 && (y = _n(q + y, 0)), ed(c) ? y <= q && c.indexOf(h, y) > -1 : !!q && Cc(c, h, y) > -1;
      }
      var qI = hr(function(c, h, y) {
        var O = -1, q = typeof h == "function", ne = li(c) ? Ie(c.length) : [];
        return Go(c, function(fe) {
          ne[++O] = q ? Pn(h, fe, y) : cf(fe, h, y);
        }), ne;
      }), zI = jh(function(c, h, y) {
        ao(c, y, h);
      });
      function Yh(c, h) {
        var y = ir(c) ? Xr : Wy;
        return y(c, Ut(h, 3));
      }
      function WI(c, h, y, O) {
        return c == null ? [] : (ir(h) || (h = h == null ? [] : [h]), y = O ? r : y, ir(y) || (y = y == null ? [] : [y]), Gy(c, h, y));
      }
      var HI = jh(function(c, h, y) {
        c[y ? 0 : 1].push(h);
      }, function() {
        return [[], []];
      });
      function KI(c, h, y) {
        var O = ir(c) ? kp : by, q = arguments.length < 3;
        return O(c, Ut(h, 4), y, q, Go);
      }
      function VI(c, h, y) {
        var O = ir(c) ? sA : by, q = arguments.length < 3;
        return O(c, Ut(h, 4), y, q, $y);
      }
      function GI(c, h) {
        var y = ir(c) ? Wo : By;
        return y(c, Zh(Ut(h, 3)));
      }
      function YI(c) {
        var h = ir(c) ? Oy : UP;
        return h(c);
      }
      function JI(c, h, y) {
        (y ? ni(c, h, y) : h === r) ? h = 1 : h = cr(h);
        var O = ir(c) ? bP : qP;
        return O(c, h);
      }
      function XI(c) {
        var h = ir(c) ? yP : WP;
        return h(c);
      }
      function ZI(c) {
        if (c == null)
          return 0;
        if (li(c))
          return ed(c) ? Rc(c) : c.length;
        var h = Vn(c);
        return h == ie || h == Me ? c.size : tg(c).length;
      }
      function QI(c, h, y) {
        var O = ir(c) ? $p : HP;
        return y && ni(c, h, y) && (h = r), O(c, Ut(h, 3));
      }
      var eC = hr(function(c, h) {
        if (c == null)
          return [];
        var y = h.length;
        return y > 1 && ni(c, h[0], h[1]) ? h = [] : y > 2 && ni(h[0], h[1], h[2]) && (h = [h[0]]), Gy(c, Bn(h, 1), []);
      }), Jh = NA || function() {
        return _r.Date.now();
      };
      function tC(c, h) {
        if (typeof h != "function")
          throw new Ui(o);
        return c = cr(c), function() {
          if (--c < 1)
            return h.apply(this, arguments);
        };
      }
      function qw(c, h, y) {
        return h = y ? r : h, h = c && h == null ? c.length : h, co(c, R, r, r, r, r, h);
      }
      function zw(c, h) {
        var y;
        if (typeof h != "function")
          throw new Ui(o);
        return c = cr(c), function() {
          return --c > 0 && (y = h.apply(this, arguments)), c <= 1 && (h = r), y;
        };
      }
      var Ag = hr(function(c, h, y) {
        var O = L;
        if (y.length) {
          var q = Ko(y, Fc(Ag));
          O |= V;
        }
        return co(c, O, h, y, q);
      }), Ww = hr(function(c, h, y) {
        var O = L | B;
        if (y.length) {
          var q = Ko(y, Fc(Ww));
          O |= V;
        }
        return co(h, O, c, y, q);
      });
      function Hw(c, h, y) {
        h = y ? r : h;
        var O = co(c, H, r, r, r, r, r, h);
        return O.placeholder = Hw.placeholder, O;
      }
      function Kw(c, h, y) {
        h = y ? r : h;
        var O = co(c, W, r, r, r, r, r, h);
        return O.placeholder = Kw.placeholder, O;
      }
      function Vw(c, h, y) {
        var O, q, ne, fe, me, we, We = 0, He = !1, Xe = !1, wt = !0;
        if (typeof c != "function")
          throw new Ui(o);
        h = Ki(h) || 0, Zr(y) && (He = !!y.leading, Xe = "maxWait" in y, ne = Xe ? _n(Ki(y.maxWait) || 0, h) : ne, wt = "trailing" in y ? !!y.trailing : wt);
        function Ot(un) {
          var ps = O, po = q;
          return O = q = r, We = un, fe = c.apply(po, ps), fe;
        }
        function Ht(un) {
          return We = un, me = df(vr, h), He ? Ot(un) : fe;
        }
        function fr(un) {
          var ps = un - we, po = un - We, h2 = h - ps;
          return Xe ? Kn(h2, ne - po) : h2;
        }
        function Kt(un) {
          var ps = un - we, po = un - We;
          return we === r || ps >= h || ps < 0 || Xe && po >= ne;
        }
        function vr() {
          var un = Jh();
          if (Kt(un))
            return Er(un);
          me = df(vr, fr(un));
        }
        function Er(un) {
          return me = r, wt && O ? Ot(un) : (O = q = r, fe);
        }
        function Ci() {
          me !== r && nw(me), We = 0, O = we = q = me = r;
        }
        function ii() {
          return me === r ? fe : Er(Jh());
        }
        function Ti() {
          var un = Jh(), ps = Kt(un);
          if (O = arguments, q = this, we = un, ps) {
            if (me === r)
              return Ht(we);
            if (Xe)
              return nw(me), me = df(vr, h), Ot(we);
          }
          return me === r && (me = df(vr, h)), fe;
        }
        return Ti.cancel = Ci, Ti.flush = ii, Ti;
      }
      var rC = hr(function(c, h) {
        return ky(c, 1, h);
      }), nC = hr(function(c, h, y) {
        return ky(c, Ki(h) || 0, y);
      });
      function iC(c) {
        return co(c, ge);
      }
      function Xh(c, h) {
        if (typeof c != "function" || h != null && typeof h != "function")
          throw new Ui(o);
        var y = function() {
          var O = arguments, q = h ? h.apply(this, O) : O[0], ne = y.cache;
          if (ne.has(q))
            return ne.get(q);
          var fe = c.apply(this, O);
          return y.cache = ne.set(q, fe) || ne, fe;
        };
        return y.cache = new (Xh.Cache || oo)(), y;
      }
      Xh.Cache = oo;
      function Zh(c) {
        if (typeof c != "function")
          throw new Ui(o);
        return function() {
          var h = arguments;
          switch (h.length) {
            case 0:
              return !c.call(this);
            case 1:
              return !c.call(this, h[0]);
            case 2:
              return !c.call(this, h[0], h[1]);
            case 3:
              return !c.call(this, h[0], h[1], h[2]);
          }
          return !c.apply(this, h);
        };
      }
      function sC(c) {
        return zw(2, c);
      }
      var oC = KP(function(c, h) {
        h = h.length == 1 && ir(h[0]) ? Xr(h[0], Pi(Ut())) : Xr(Bn(h, 1), Pi(Ut()));
        var y = h.length;
        return hr(function(O) {
          for (var q = -1, ne = Kn(O.length, y); ++q < ne; )
            O[q] = h[q].call(this, O[q]);
          return Pn(c, this, O);
        });
      }), Pg = hr(function(c, h) {
        var y = Ko(h, Fc(Pg));
        return co(c, V, r, h, y);
      }), Gw = hr(function(c, h) {
        var y = Ko(h, Fc(Gw));
        return co(c, te, r, h, y);
      }), aC = uo(function(c, h) {
        return co(c, K, r, r, r, h);
      });
      function cC(c, h) {
        if (typeof c != "function")
          throw new Ui(o);
        return h = h === r ? h : cr(h), hr(c, h);
      }
      function uC(c, h) {
        if (typeof c != "function")
          throw new Ui(o);
        return h = h == null ? 0 : _n(cr(h), 0), hr(function(y) {
          var O = y[h], q = Xo(y, 0, h);
          return O && Ho(q, O), Pn(c, this, q);
        });
      }
      function fC(c, h, y) {
        var O = !0, q = !0;
        if (typeof c != "function")
          throw new Ui(o);
        return Zr(y) && (O = "leading" in y ? !!y.leading : O, q = "trailing" in y ? !!y.trailing : q), Vw(c, h, {
          leading: O,
          maxWait: h,
          trailing: q
        });
      }
      function lC(c) {
        return qw(c, 1);
      }
      function hC(c, h) {
        return Pg(fg(h), c);
      }
      function dC() {
        if (!arguments.length)
          return [];
        var c = arguments[0];
        return ir(c) ? c : [c];
      }
      function pC(c) {
        return zi(c, A);
      }
      function gC(c, h) {
        return h = typeof h == "function" ? h : r, zi(c, A, h);
      }
      function mC(c) {
        return zi(c, p | A);
      }
      function vC(c, h) {
        return h = typeof h == "function" ? h : r, zi(c, p | A, h);
      }
      function bC(c, h) {
        return h == null || Ly(c, h, Mn(h));
      }
      function ds(c, h) {
        return c === h || c !== c && h !== h;
      }
      var yC = Wh(Zp), wC = Wh(function(c, h) {
        return c >= h;
      }), Ua = Uy(/* @__PURE__ */ function() {
        return arguments;
      }()) ? Uy : function(c) {
        return en(c) && Tr.call(c, "callee") && !My.call(c, "callee");
      }, ir = Ie.isArray, xC = ti ? Pi(ti) : CP;
      function li(c) {
        return c != null && Qh(c.length) && !lo(c);
      }
      function cn(c) {
        return en(c) && li(c);
      }
      function _C(c) {
        return c === !0 || c === !1 || en(c) && ri(c) == J;
      }
      var Zo = kA || $g, EC = fs ? Pi(fs) : TP;
      function SC(c) {
        return en(c) && c.nodeType === 1 && !pf(c);
      }
      function AC(c) {
        if (c == null)
          return !0;
        if (li(c) && (ir(c) || typeof c == "string" || typeof c.splice == "function" || Zo(c) || jc(c) || Ua(c)))
          return !c.length;
        var h = Vn(c);
        if (h == ie || h == Me)
          return !c.size;
        if (hf(c))
          return !tg(c).length;
        for (var y in c)
          if (Tr.call(c, y))
            return !1;
        return !0;
      }
      function PC(c, h) {
        return uf(c, h);
      }
      function MC(c, h, y) {
        y = typeof y == "function" ? y : r;
        var O = y ? y(c, h) : r;
        return O === r ? uf(c, h, r, y) : !!O;
      }
      function Mg(c) {
        if (!en(c))
          return !1;
        var h = ri(c);
        return h == X || h == T || typeof c.message == "string" && typeof c.name == "string" && !pf(c);
      }
      function IC(c) {
        return typeof c == "number" && Cy(c);
      }
      function lo(c) {
        if (!Zr(c))
          return !1;
        var h = ri(c);
        return h == re || h == de || h == Z || h == Ce;
      }
      function Yw(c) {
        return typeof c == "number" && c == cr(c);
      }
      function Qh(c) {
        return typeof c == "number" && c > -1 && c % 1 == 0 && c <= _;
      }
      function Zr(c) {
        var h = typeof c;
        return c != null && (h == "object" || h == "function");
      }
      function en(c) {
        return c != null && typeof c == "object";
      }
      var Jw = Fi ? Pi(Fi) : DP;
      function CC(c, h) {
        return c === h || eg(c, h, vg(h));
      }
      function TC(c, h, y) {
        return y = typeof y == "function" ? y : r, eg(c, h, vg(h), y);
      }
      function RC(c) {
        return Xw(c) && c != +c;
      }
      function DC(c) {
        if (gM(c))
          throw new tr(s);
        return qy(c);
      }
      function OC(c) {
        return c === null;
      }
      function NC(c) {
        return c == null;
      }
      function Xw(c) {
        return typeof c == "number" || en(c) && ri(c) == ue;
      }
      function pf(c) {
        if (!en(c) || ri(c) != Pe)
          return !1;
        var h = Ph(c);
        if (h === null)
          return !0;
        var y = Tr.call(h, "constructor") && h.constructor;
        return typeof y == "function" && y instanceof y && _h.call(y) == TA;
      }
      var Ig = Is ? Pi(Is) : OP;
      function LC(c) {
        return Yw(c) && c >= -_ && c <= _;
      }
      var Zw = Zu ? Pi(Zu) : NP;
      function ed(c) {
        return typeof c == "string" || !ir(c) && en(c) && ri(c) == Ne;
      }
      function Ii(c) {
        return typeof c == "symbol" || en(c) && ri(c) == Ke;
      }
      var jc = Oa ? Pi(Oa) : LP;
      function kC(c) {
        return c === r;
      }
      function $C(c) {
        return en(c) && Vn(c) == qe;
      }
      function BC(c) {
        return en(c) && ri(c) == ze;
      }
      var FC = Wh(rg), jC = Wh(function(c, h) {
        return c <= h;
      });
      function Qw(c) {
        if (!c)
          return [];
        if (li(c))
          return ed(c) ? ls(c) : fi(c);
        if (ef && c[ef])
          return bA(c[ef]());
        var h = Vn(c), y = h == ie ? zp : h == Me ? yh : Uc;
        return y(c);
      }
      function ho(c) {
        if (!c)
          return c === 0 ? c : 0;
        if (c = Ki(c), c === x || c === -x) {
          var h = c < 0 ? -1 : 1;
          return h * E;
        }
        return c === c ? c : 0;
      }
      function cr(c) {
        var h = ho(c), y = h % 1;
        return h === h ? y ? h - y : h : 0;
      }
      function e2(c) {
        return c ? $a(cr(c), 0, P) : 0;
      }
      function Ki(c) {
        if (typeof c == "number")
          return c;
        if (Ii(c))
          return v;
        if (Zr(c)) {
          var h = typeof c.valueOf == "function" ? c.valueOf() : c;
          c = Zr(h) ? h + "" : h;
        }
        if (typeof c != "string")
          return c === 0 ? c : +c;
        c = yy(c);
        var y = nt.test(c);
        return y || pt.test(c) ? nr(c.slice(2), y ? 2 : 8) : Re.test(c) ? v : +c;
      }
      function t2(c) {
        return Ts(c, hi(c));
      }
      function UC(c) {
        return c ? $a(cr(c), -_, _) : c === 0 ? c : 0;
      }
      function Cr(c) {
        return c == null ? "" : Mi(c);
      }
      var qC = $c(function(c, h) {
        if (hf(h) || li(h)) {
          Ts(h, Mn(h), c);
          return;
        }
        for (var y in h)
          Tr.call(h, y) && of(c, y, h[y]);
      }), r2 = $c(function(c, h) {
        Ts(h, hi(h), c);
      }), td = $c(function(c, h, y, O) {
        Ts(h, hi(h), c, O);
      }), zC = $c(function(c, h, y, O) {
        Ts(h, Mn(h), c, O);
      }), WC = uo(Yp);
      function HC(c, h) {
        var y = kc(c);
        return h == null ? y : Ny(y, h);
      }
      var KC = hr(function(c, h) {
        c = qr(c);
        var y = -1, O = h.length, q = O > 2 ? h[2] : r;
        for (q && ni(h[0], h[1], q) && (O = 1); ++y < O; )
          for (var ne = h[y], fe = hi(ne), me = -1, we = fe.length; ++me < we; ) {
            var We = fe[me], He = c[We];
            (He === r || ds(He, Oc[We]) && !Tr.call(c, We)) && (c[We] = ne[We]);
          }
        return c;
      }), VC = hr(function(c) {
        return c.push(r, yw), Pn(n2, r, c);
      });
      function GC(c, h) {
        return gy(c, Ut(h, 3), Cs);
      }
      function YC(c, h) {
        return gy(c, Ut(h, 3), Xp);
      }
      function JC(c, h) {
        return c == null ? c : Jp(c, Ut(h, 3), hi);
      }
      function XC(c, h) {
        return c == null ? c : Fy(c, Ut(h, 3), hi);
      }
      function ZC(c, h) {
        return c && Cs(c, Ut(h, 3));
      }
      function QC(c, h) {
        return c && Xp(c, Ut(h, 3));
      }
      function eT(c) {
        return c == null ? [] : kh(c, Mn(c));
      }
      function tT(c) {
        return c == null ? [] : kh(c, hi(c));
      }
      function Cg(c, h, y) {
        var O = c == null ? r : Ba(c, h);
        return O === r ? y : O;
      }
      function rT(c, h) {
        return c != null && _w(c, h, AP);
      }
      function Tg(c, h) {
        return c != null && _w(c, h, PP);
      }
      var nT = pw(function(c, h, y) {
        h != null && typeof h.toString != "function" && (h = Eh.call(h)), c[h] = y;
      }, Dg(di)), iT = pw(function(c, h, y) {
        h != null && typeof h.toString != "function" && (h = Eh.call(h)), Tr.call(c, h) ? c[h].push(y) : c[h] = [y];
      }, Ut), sT = hr(cf);
      function Mn(c) {
        return li(c) ? Dy(c) : tg(c);
      }
      function hi(c) {
        return li(c) ? Dy(c, !0) : kP(c);
      }
      function oT(c, h) {
        var y = {};
        return h = Ut(h, 3), Cs(c, function(O, q, ne) {
          ao(y, h(O, q, ne), O);
        }), y;
      }
      function aT(c, h) {
        var y = {};
        return h = Ut(h, 3), Cs(c, function(O, q, ne) {
          ao(y, q, h(O, q, ne));
        }), y;
      }
      var cT = $c(function(c, h, y) {
        $h(c, h, y);
      }), n2 = $c(function(c, h, y, O) {
        $h(c, h, y, O);
      }), uT = uo(function(c, h) {
        var y = {};
        if (c == null)
          return y;
        var O = !1;
        h = Xr(h, function(ne) {
          return ne = Jo(ne, c), O || (O = ne.length > 1), ne;
        }), Ts(c, gg(c), y), O && (y = zi(y, p | w | A, nM));
        for (var q = h.length; q--; )
          ag(y, h[q]);
        return y;
      });
      function fT(c, h) {
        return i2(c, Zh(Ut(h)));
      }
      var lT = uo(function(c, h) {
        return c == null ? {} : BP(c, h);
      });
      function i2(c, h) {
        if (c == null)
          return {};
        var y = Xr(gg(c), function(O) {
          return [O];
        });
        return h = Ut(h), Yy(c, y, function(O, q) {
          return h(O, q[0]);
        });
      }
      function hT(c, h, y) {
        h = Jo(h, c);
        var O = -1, q = h.length;
        for (q || (q = 1, c = r); ++O < q; ) {
          var ne = c == null ? r : c[Rs(h[O])];
          ne === r && (O = q, ne = y), c = lo(ne) ? ne.call(c) : ne;
        }
        return c;
      }
      function dT(c, h, y) {
        return c == null ? c : ff(c, h, y);
      }
      function pT(c, h, y, O) {
        return O = typeof O == "function" ? O : r, c == null ? c : ff(c, h, y, O);
      }
      var s2 = vw(Mn), o2 = vw(hi);
      function gT(c, h, y) {
        var O = ir(c), q = O || Zo(c) || jc(c);
        if (h = Ut(h, 4), y == null) {
          var ne = c && c.constructor;
          q ? y = O ? new ne() : [] : Zr(c) ? y = lo(ne) ? kc(Ph(c)) : {} : y = {};
        }
        return (q ? ji : Cs)(c, function(fe, me, we) {
          return h(y, fe, me, we);
        }), y;
      }
      function mT(c, h) {
        return c == null ? !0 : ag(c, h);
      }
      function vT(c, h, y) {
        return c == null ? c : ew(c, h, fg(y));
      }
      function bT(c, h, y, O) {
        return O = typeof O == "function" ? O : r, c == null ? c : ew(c, h, fg(y), O);
      }
      function Uc(c) {
        return c == null ? [] : qp(c, Mn(c));
      }
      function yT(c) {
        return c == null ? [] : qp(c, hi(c));
      }
      function wT(c, h, y) {
        return y === r && (y = h, h = r), y !== r && (y = Ki(y), y = y === y ? y : 0), h !== r && (h = Ki(h), h = h === h ? h : 0), $a(Ki(c), h, y);
      }
      function xT(c, h, y) {
        return h = ho(h), y === r ? (y = h, h = 0) : y = ho(y), c = Ki(c), MP(c, h, y);
      }
      function _T(c, h, y) {
        if (y && typeof y != "boolean" && ni(c, h, y) && (h = y = r), y === r && (typeof h == "boolean" ? (y = h, h = r) : typeof c == "boolean" && (y = c, c = r)), c === r && h === r ? (c = 0, h = 1) : (c = ho(c), h === r ? (h = c, c = 0) : h = ho(h)), c > h) {
          var O = c;
          c = h, h = O;
        }
        if (y || c % 1 || h % 1) {
          var q = Ty();
          return Kn(c + q * (h - c + jr("1e-" + ((q + "").length - 1))), h);
        }
        return ig(c, h);
      }
      var ET = Bc(function(c, h, y) {
        return h = h.toLowerCase(), c + (y ? a2(h) : h);
      });
      function a2(c) {
        return Rg(Cr(c).toLowerCase());
      }
      function c2(c) {
        return c = Cr(c), c && c.replace(et, dA).replace(Op, "");
      }
      function ST(c, h, y) {
        c = Cr(c), h = Mi(h);
        var O = c.length;
        y = y === r ? O : $a(cr(y), 0, O);
        var q = y;
        return y -= h.length, y >= 0 && c.slice(y, q) == h;
      }
      function AT(c) {
        return c = Cr(c), c && Ct.test(c) ? c.replace(Dt, pA) : c;
      }
      function PT(c) {
        return c = Cr(c), c && Bt.test(c) ? c.replace(rt, "\\$&") : c;
      }
      var MT = Bc(function(c, h, y) {
        return c + (y ? "-" : "") + h.toLowerCase();
      }), IT = Bc(function(c, h, y) {
        return c + (y ? " " : "") + h.toLowerCase();
      }), CT = lw("toLowerCase");
      function TT(c, h, y) {
        c = Cr(c), h = cr(h);
        var O = h ? Rc(c) : 0;
        if (!h || O >= h)
          return c;
        var q = (h - O) / 2;
        return zh(Th(q), y) + c + zh(Ch(q), y);
      }
      function RT(c, h, y) {
        c = Cr(c), h = cr(h);
        var O = h ? Rc(c) : 0;
        return h && O < h ? c + zh(h - O, y) : c;
      }
      function DT(c, h, y) {
        c = Cr(c), h = cr(h);
        var O = h ? Rc(c) : 0;
        return h && O < h ? zh(h - O, y) + c : c;
      }
      function OT(c, h, y) {
        return y || h == null ? h = 0 : h && (h = +h), jA(Cr(c).replace(k, ""), h || 0);
      }
      function NT(c, h, y) {
        return (y ? ni(c, h, y) : h === r) ? h = 1 : h = cr(h), sg(Cr(c), h);
      }
      function LT() {
        var c = arguments, h = Cr(c[0]);
        return c.length < 3 ? h : h.replace(c[1], c[2]);
      }
      var kT = Bc(function(c, h, y) {
        return c + (y ? "_" : "") + h.toLowerCase();
      });
      function $T(c, h, y) {
        return y && typeof y != "number" && ni(c, h, y) && (h = y = r), y = y === r ? P : y >>> 0, y ? (c = Cr(c), c && (typeof h == "string" || h != null && !Ig(h)) && (h = Mi(h), !h && Tc(c)) ? Xo(ls(c), 0, y) : c.split(h, y)) : [];
      }
      var BT = Bc(function(c, h, y) {
        return c + (y ? " " : "") + Rg(h);
      });
      function FT(c, h, y) {
        return c = Cr(c), y = y == null ? 0 : $a(cr(y), 0, c.length), h = Mi(h), c.slice(y, y + h.length) == h;
      }
      function jT(c, h, y) {
        var O = ee.templateSettings;
        y && ni(c, h, y) && (h = r), c = Cr(c), h = td({}, h, O, bw);
        var q = td({}, h.imports, O.imports, bw), ne = Mn(q), fe = qp(q, ne), me, we, We = 0, He = h.interpolate || St, Xe = "__p += '", wt = Wp(
          (h.escape || St).source + "|" + He.source + "|" + (He === Nt ? xe : St).source + "|" + (h.evaluate || St).source + "|$",
          "g"
        ), Ot = "//# sourceURL=" + (Tr.call(h, "sourceURL") ? (h.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++Np + "]") + `
`;
        c.replace(wt, function(Kt, vr, Er, Ci, ii, Ti) {
          return Er || (Er = Ci), Xe += c.slice(We, Ti).replace(Tt, gA), vr && (me = !0, Xe += `' +
__e(` + vr + `) +
'`), ii && (we = !0, Xe += `';
` + ii + `;
__p += '`), Er && (Xe += `' +
((__t = (` + Er + `)) == null ? '' : __t) +
'`), We = Ti + Kt.length, Kt;
        }), Xe += `';
`;
        var Ht = Tr.call(h, "variable") && h.variable;
        if (!Ht)
          Xe = `with (obj) {
` + Xe + `
}
`;
        else if (se.test(Ht))
          throw new tr(a);
        Xe = (we ? Xe.replace(Yt, "") : Xe).replace(Et, "$1").replace(er, "$1;"), Xe = "function(" + (Ht || "obj") + `) {
` + (Ht ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (me ? ", __e = _.escape" : "") + (we ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + Xe + `return __p
}`;
        var fr = f2(function() {
          return Pr(ne, Ot + "return " + Xe).apply(r, fe);
        });
        if (fr.source = Xe, Mg(fr))
          throw fr;
        return fr;
      }
      function UT(c) {
        return Cr(c).toLowerCase();
      }
      function qT(c) {
        return Cr(c).toUpperCase();
      }
      function zT(c, h, y) {
        if (c = Cr(c), c && (y || h === r))
          return yy(c);
        if (!c || !(h = Mi(h)))
          return c;
        var O = ls(c), q = ls(h), ne = wy(O, q), fe = xy(O, q) + 1;
        return Xo(O, ne, fe).join("");
      }
      function WT(c, h, y) {
        if (c = Cr(c), c && (y || h === r))
          return c.slice(0, Ey(c) + 1);
        if (!c || !(h = Mi(h)))
          return c;
        var O = ls(c), q = xy(O, ls(h)) + 1;
        return Xo(O, 0, q).join("");
      }
      function HT(c, h, y) {
        if (c = Cr(c), c && (y || h === r))
          return c.replace(k, "");
        if (!c || !(h = Mi(h)))
          return c;
        var O = ls(c), q = wy(O, ls(h));
        return Xo(O, q).join("");
      }
      function KT(c, h) {
        var y = Ee, O = Y;
        if (Zr(h)) {
          var q = "separator" in h ? h.separator : q;
          y = "length" in h ? cr(h.length) : y, O = "omission" in h ? Mi(h.omission) : O;
        }
        c = Cr(c);
        var ne = c.length;
        if (Tc(c)) {
          var fe = ls(c);
          ne = fe.length;
        }
        if (y >= ne)
          return c;
        var me = y - Rc(O);
        if (me < 1)
          return O;
        var we = fe ? Xo(fe, 0, me).join("") : c.slice(0, me);
        if (q === r)
          return we + O;
        if (fe && (me += we.length - me), Ig(q)) {
          if (c.slice(me).search(q)) {
            var We, He = we;
            for (q.global || (q = Wp(q.source, Cr(Te.exec(q)) + "g")), q.lastIndex = 0; We = q.exec(He); )
              var Xe = We.index;
            we = we.slice(0, Xe === r ? me : Xe);
          }
        } else if (c.indexOf(Mi(q), me) != me) {
          var wt = we.lastIndexOf(q);
          wt > -1 && (we = we.slice(0, wt));
        }
        return we + O;
      }
      function VT(c) {
        return c = Cr(c), c && kt.test(c) ? c.replace(Jt, _A) : c;
      }
      var GT = Bc(function(c, h, y) {
        return c + (y ? " " : "") + h.toUpperCase();
      }), Rg = lw("toUpperCase");
      function u2(c, h, y) {
        return c = Cr(c), h = y ? r : h, h === r ? vA(c) ? AA(c) : cA(c) : c.match(h) || [];
      }
      var f2 = hr(function(c, h) {
        try {
          return Pn(c, r, h);
        } catch (y) {
          return Mg(y) ? y : new tr(y);
        }
      }), YT = uo(function(c, h) {
        return ji(h, function(y) {
          y = Rs(y), ao(c, y, Ag(c[y], c));
        }), c;
      });
      function JT(c) {
        var h = c == null ? 0 : c.length, y = Ut();
        return c = h ? Xr(c, function(O) {
          if (typeof O[1] != "function")
            throw new Ui(o);
          return [y(O[0]), O[1]];
        }) : [], hr(function(O) {
          for (var q = -1; ++q < h; ) {
            var ne = c[q];
            if (Pn(ne[0], this, O))
              return Pn(ne[1], this, O);
          }
        });
      }
      function XT(c) {
        return _P(zi(c, p));
      }
      function Dg(c) {
        return function() {
          return c;
        };
      }
      function ZT(c, h) {
        return c == null || c !== c ? h : c;
      }
      var QT = dw(), eR = dw(!0);
      function di(c) {
        return c;
      }
      function Og(c) {
        return zy(typeof c == "function" ? c : zi(c, p));
      }
      function tR(c) {
        return Hy(zi(c, p));
      }
      function rR(c, h) {
        return Ky(c, zi(h, p));
      }
      var nR = hr(function(c, h) {
        return function(y) {
          return cf(y, c, h);
        };
      }), iR = hr(function(c, h) {
        return function(y) {
          return cf(c, y, h);
        };
      });
      function Ng(c, h, y) {
        var O = Mn(h), q = kh(h, O);
        y == null && !(Zr(h) && (q.length || !O.length)) && (y = h, h = c, c = this, q = kh(h, Mn(h)));
        var ne = !(Zr(y) && "chain" in y) || !!y.chain, fe = lo(c);
        return ji(q, function(me) {
          var we = h[me];
          c[me] = we, fe && (c.prototype[me] = function() {
            var We = this.__chain__;
            if (ne || We) {
              var He = c(this.__wrapped__), Xe = He.__actions__ = fi(this.__actions__);
              return Xe.push({ func: we, args: arguments, thisArg: c }), He.__chain__ = We, He;
            }
            return we.apply(c, Ho([this.value()], arguments));
          });
        }), c;
      }
      function sR() {
        return _r._ === this && (_r._ = RA), this;
      }
      function Lg() {
      }
      function oR(c) {
        return c = cr(c), hr(function(h) {
          return Vy(h, c);
        });
      }
      var aR = hg(Xr), cR = hg(py), uR = hg($p);
      function l2(c) {
        return yg(c) ? Bp(Rs(c)) : FP(c);
      }
      function fR(c) {
        return function(h) {
          return c == null ? r : Ba(c, h);
        };
      }
      var lR = gw(), hR = gw(!0);
      function kg() {
        return [];
      }
      function $g() {
        return !1;
      }
      function dR() {
        return {};
      }
      function pR() {
        return "";
      }
      function gR() {
        return !0;
      }
      function mR(c, h) {
        if (c = cr(c), c < 1 || c > _)
          return [];
        var y = P, O = Kn(c, P);
        h = Ut(h), c -= P;
        for (var q = Up(O, h); ++y < c; )
          h(y);
        return q;
      }
      function vR(c) {
        return ir(c) ? Xr(c, Rs) : Ii(c) ? [c] : fi(Rw(Cr(c)));
      }
      function bR(c) {
        var h = ++CA;
        return Cr(c) + h;
      }
      var yR = qh(function(c, h) {
        return c + h;
      }, 0), wR = dg("ceil"), xR = qh(function(c, h) {
        return c / h;
      }, 1), _R = dg("floor");
      function ER(c) {
        return c && c.length ? Lh(c, di, Zp) : r;
      }
      function SR(c, h) {
        return c && c.length ? Lh(c, Ut(h, 2), Zp) : r;
      }
      function AR(c) {
        return vy(c, di);
      }
      function PR(c, h) {
        return vy(c, Ut(h, 2));
      }
      function MR(c) {
        return c && c.length ? Lh(c, di, rg) : r;
      }
      function IR(c, h) {
        return c && c.length ? Lh(c, Ut(h, 2), rg) : r;
      }
      var CR = qh(function(c, h) {
        return c * h;
      }, 1), TR = dg("round"), RR = qh(function(c, h) {
        return c - h;
      }, 0);
      function DR(c) {
        return c && c.length ? jp(c, di) : 0;
      }
      function OR(c, h) {
        return c && c.length ? jp(c, Ut(h, 2)) : 0;
      }
      return ee.after = tC, ee.ary = qw, ee.assign = qC, ee.assignIn = r2, ee.assignInWith = td, ee.assignWith = zC, ee.at = WC, ee.before = zw, ee.bind = Ag, ee.bindAll = YT, ee.bindKey = Ww, ee.castArray = dC, ee.chain = Fw, ee.chunk = _M, ee.compact = EM, ee.concat = SM, ee.cond = JT, ee.conforms = XT, ee.constant = Dg, ee.countBy = DI, ee.create = HC, ee.curry = Hw, ee.curryRight = Kw, ee.debounce = Vw, ee.defaults = KC, ee.defaultsDeep = VC, ee.defer = rC, ee.delay = nC, ee.difference = AM, ee.differenceBy = PM, ee.differenceWith = MM, ee.drop = IM, ee.dropRight = CM, ee.dropRightWhile = TM, ee.dropWhile = RM, ee.fill = DM, ee.filter = NI, ee.flatMap = $I, ee.flatMapDeep = BI, ee.flatMapDepth = FI, ee.flatten = Lw, ee.flattenDeep = OM, ee.flattenDepth = NM, ee.flip = iC, ee.flow = QT, ee.flowRight = eR, ee.fromPairs = LM, ee.functions = eT, ee.functionsIn = tT, ee.groupBy = jI, ee.initial = $M, ee.intersection = BM, ee.intersectionBy = FM, ee.intersectionWith = jM, ee.invert = nT, ee.invertBy = iT, ee.invokeMap = qI, ee.iteratee = Og, ee.keyBy = zI, ee.keys = Mn, ee.keysIn = hi, ee.map = Yh, ee.mapKeys = oT, ee.mapValues = aT, ee.matches = tR, ee.matchesProperty = rR, ee.memoize = Xh, ee.merge = cT, ee.mergeWith = n2, ee.method = nR, ee.methodOf = iR, ee.mixin = Ng, ee.negate = Zh, ee.nthArg = oR, ee.omit = uT, ee.omitBy = fT, ee.once = sC, ee.orderBy = WI, ee.over = aR, ee.overArgs = oC, ee.overEvery = cR, ee.overSome = uR, ee.partial = Pg, ee.partialRight = Gw, ee.partition = HI, ee.pick = lT, ee.pickBy = i2, ee.property = l2, ee.propertyOf = fR, ee.pull = WM, ee.pullAll = $w, ee.pullAllBy = HM, ee.pullAllWith = KM, ee.pullAt = VM, ee.range = lR, ee.rangeRight = hR, ee.rearg = aC, ee.reject = GI, ee.remove = GM, ee.rest = cC, ee.reverse = Eg, ee.sampleSize = JI, ee.set = dT, ee.setWith = pT, ee.shuffle = XI, ee.slice = YM, ee.sortBy = eC, ee.sortedUniq = rI, ee.sortedUniqBy = nI, ee.split = $T, ee.spread = uC, ee.tail = iI, ee.take = sI, ee.takeRight = oI, ee.takeRightWhile = aI, ee.takeWhile = cI, ee.tap = EI, ee.throttle = fC, ee.thru = Gh, ee.toArray = Qw, ee.toPairs = s2, ee.toPairsIn = o2, ee.toPath = vR, ee.toPlainObject = t2, ee.transform = gT, ee.unary = lC, ee.union = uI, ee.unionBy = fI, ee.unionWith = lI, ee.uniq = hI, ee.uniqBy = dI, ee.uniqWith = pI, ee.unset = mT, ee.unzip = Sg, ee.unzipWith = Bw, ee.update = vT, ee.updateWith = bT, ee.values = Uc, ee.valuesIn = yT, ee.without = gI, ee.words = u2, ee.wrap = hC, ee.xor = mI, ee.xorBy = vI, ee.xorWith = bI, ee.zip = yI, ee.zipObject = wI, ee.zipObjectDeep = xI, ee.zipWith = _I, ee.entries = s2, ee.entriesIn = o2, ee.extend = r2, ee.extendWith = td, Ng(ee, ee), ee.add = yR, ee.attempt = f2, ee.camelCase = ET, ee.capitalize = a2, ee.ceil = wR, ee.clamp = wT, ee.clone = pC, ee.cloneDeep = mC, ee.cloneDeepWith = vC, ee.cloneWith = gC, ee.conformsTo = bC, ee.deburr = c2, ee.defaultTo = ZT, ee.divide = xR, ee.endsWith = ST, ee.eq = ds, ee.escape = AT, ee.escapeRegExp = PT, ee.every = OI, ee.find = LI, ee.findIndex = Ow, ee.findKey = GC, ee.findLast = kI, ee.findLastIndex = Nw, ee.findLastKey = YC, ee.floor = _R, ee.forEach = jw, ee.forEachRight = Uw, ee.forIn = JC, ee.forInRight = XC, ee.forOwn = ZC, ee.forOwnRight = QC, ee.get = Cg, ee.gt = yC, ee.gte = wC, ee.has = rT, ee.hasIn = Tg, ee.head = kw, ee.identity = di, ee.includes = UI, ee.indexOf = kM, ee.inRange = xT, ee.invoke = sT, ee.isArguments = Ua, ee.isArray = ir, ee.isArrayBuffer = xC, ee.isArrayLike = li, ee.isArrayLikeObject = cn, ee.isBoolean = _C, ee.isBuffer = Zo, ee.isDate = EC, ee.isElement = SC, ee.isEmpty = AC, ee.isEqual = PC, ee.isEqualWith = MC, ee.isError = Mg, ee.isFinite = IC, ee.isFunction = lo, ee.isInteger = Yw, ee.isLength = Qh, ee.isMap = Jw, ee.isMatch = CC, ee.isMatchWith = TC, ee.isNaN = RC, ee.isNative = DC, ee.isNil = NC, ee.isNull = OC, ee.isNumber = Xw, ee.isObject = Zr, ee.isObjectLike = en, ee.isPlainObject = pf, ee.isRegExp = Ig, ee.isSafeInteger = LC, ee.isSet = Zw, ee.isString = ed, ee.isSymbol = Ii, ee.isTypedArray = jc, ee.isUndefined = kC, ee.isWeakMap = $C, ee.isWeakSet = BC, ee.join = UM, ee.kebabCase = MT, ee.last = Hi, ee.lastIndexOf = qM, ee.lowerCase = IT, ee.lowerFirst = CT, ee.lt = FC, ee.lte = jC, ee.max = ER, ee.maxBy = SR, ee.mean = AR, ee.meanBy = PR, ee.min = MR, ee.minBy = IR, ee.stubArray = kg, ee.stubFalse = $g, ee.stubObject = dR, ee.stubString = pR, ee.stubTrue = gR, ee.multiply = CR, ee.nth = zM, ee.noConflict = sR, ee.noop = Lg, ee.now = Jh, ee.pad = TT, ee.padEnd = RT, ee.padStart = DT, ee.parseInt = OT, ee.random = _T, ee.reduce = KI, ee.reduceRight = VI, ee.repeat = NT, ee.replace = LT, ee.result = hT, ee.round = TR, ee.runInContext = be, ee.sample = YI, ee.size = ZI, ee.snakeCase = kT, ee.some = QI, ee.sortedIndex = JM, ee.sortedIndexBy = XM, ee.sortedIndexOf = ZM, ee.sortedLastIndex = QM, ee.sortedLastIndexBy = eI, ee.sortedLastIndexOf = tI, ee.startCase = BT, ee.startsWith = FT, ee.subtract = RR, ee.sum = DR, ee.sumBy = OR, ee.template = jT, ee.times = mR, ee.toFinite = ho, ee.toInteger = cr, ee.toLength = e2, ee.toLower = UT, ee.toNumber = Ki, ee.toSafeInteger = UC, ee.toString = Cr, ee.toUpper = qT, ee.trim = zT, ee.trimEnd = WT, ee.trimStart = HT, ee.truncate = KT, ee.unescape = VT, ee.uniqueId = bR, ee.upperCase = GT, ee.upperFirst = Rg, ee.each = jw, ee.eachRight = Uw, ee.first = kw, Ng(ee, function() {
        var c = {};
        return Cs(ee, function(h, y) {
          Tr.call(ee.prototype, y) || (c[y] = h);
        }), c;
      }(), { chain: !1 }), ee.VERSION = n, ji(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(c) {
        ee[c].placeholder = ee;
      }), ji(["drop", "take"], function(c, h) {
        wr.prototype[c] = function(y) {
          y = y === r ? 1 : _n(cr(y), 0);
          var O = this.__filtered__ && !h ? new wr(this) : this.clone();
          return O.__filtered__ ? O.__takeCount__ = Kn(y, O.__takeCount__) : O.__views__.push({
            size: Kn(y, P),
            type: c + (O.__dir__ < 0 ? "Right" : "")
          }), O;
        }, wr.prototype[c + "Right"] = function(y) {
          return this.reverse()[c](y).reverse();
        };
      }), ji(["filter", "map", "takeWhile"], function(c, h) {
        var y = h + 1, O = y == f || y == b;
        wr.prototype[c] = function(q) {
          var ne = this.clone();
          return ne.__iteratees__.push({
            iteratee: Ut(q, 3),
            type: y
          }), ne.__filtered__ = ne.__filtered__ || O, ne;
        };
      }), ji(["head", "last"], function(c, h) {
        var y = "take" + (h ? "Right" : "");
        wr.prototype[c] = function() {
          return this[y](1).value()[0];
        };
      }), ji(["initial", "tail"], function(c, h) {
        var y = "drop" + (h ? "" : "Right");
        wr.prototype[c] = function() {
          return this.__filtered__ ? new wr(this) : this[y](1);
        };
      }), wr.prototype.compact = function() {
        return this.filter(di);
      }, wr.prototype.find = function(c) {
        return this.filter(c).head();
      }, wr.prototype.findLast = function(c) {
        return this.reverse().find(c);
      }, wr.prototype.invokeMap = hr(function(c, h) {
        return typeof c == "function" ? new wr(this) : this.map(function(y) {
          return cf(y, c, h);
        });
      }), wr.prototype.reject = function(c) {
        return this.filter(Zh(Ut(c)));
      }, wr.prototype.slice = function(c, h) {
        c = cr(c);
        var y = this;
        return y.__filtered__ && (c > 0 || h < 0) ? new wr(y) : (c < 0 ? y = y.takeRight(-c) : c && (y = y.drop(c)), h !== r && (h = cr(h), y = h < 0 ? y.dropRight(-h) : y.take(h - c)), y);
      }, wr.prototype.takeRightWhile = function(c) {
        return this.reverse().takeWhile(c).reverse();
      }, wr.prototype.toArray = function() {
        return this.take(P);
      }, Cs(wr.prototype, function(c, h) {
        var y = /^(?:filter|find|map|reject)|While$/.test(h), O = /^(?:head|last)$/.test(h), q = ee[O ? "take" + (h == "last" ? "Right" : "") : h], ne = O || /^find/.test(h);
        q && (ee.prototype[h] = function() {
          var fe = this.__wrapped__, me = O ? [1] : arguments, we = fe instanceof wr, We = me[0], He = we || ir(fe), Xe = function(vr) {
            var Er = q.apply(ee, Ho([vr], me));
            return O && wt ? Er[0] : Er;
          };
          He && y && typeof We == "function" && We.length != 1 && (we = He = !1);
          var wt = this.__chain__, Ot = !!this.__actions__.length, Ht = ne && !wt, fr = we && !Ot;
          if (!ne && He) {
            fe = fr ? fe : new wr(this);
            var Kt = c.apply(fe, me);
            return Kt.__actions__.push({ func: Gh, args: [Xe], thisArg: r }), new qi(Kt, wt);
          }
          return Ht && fr ? c.apply(this, me) : (Kt = this.thru(Xe), Ht ? O ? Kt.value()[0] : Kt.value() : Kt);
        });
      }), ji(["pop", "push", "shift", "sort", "splice", "unshift"], function(c) {
        var h = wh[c], y = /^(?:push|sort|unshift)$/.test(c) ? "tap" : "thru", O = /^(?:pop|shift)$/.test(c);
        ee.prototype[c] = function() {
          var q = arguments;
          if (O && !this.__chain__) {
            var ne = this.value();
            return h.apply(ir(ne) ? ne : [], q);
          }
          return this[y](function(fe) {
            return h.apply(ir(fe) ? fe : [], q);
          });
        };
      }), Cs(wr.prototype, function(c, h) {
        var y = ee[h];
        if (y) {
          var O = y.name + "";
          Tr.call(Lc, O) || (Lc[O] = []), Lc[O].push({ name: h, func: y });
        }
      }), Lc[Uh(r, B).name] = [{
        name: "wrapper",
        func: r
      }], wr.prototype.clone = VA, wr.prototype.reverse = GA, wr.prototype.value = YA, ee.prototype.at = SI, ee.prototype.chain = AI, ee.prototype.commit = PI, ee.prototype.next = MI, ee.prototype.plant = CI, ee.prototype.reverse = TI, ee.prototype.toJSON = ee.prototype.valueOf = ee.prototype.value = RI, ee.prototype.first = ee.prototype.head, ef && (ee.prototype[ef] = II), ee;
    }, Dc = PA();
    an ? ((an.exports = Dc)._ = Dc, Ur._ = Dc) : _r._ = Dc;
  }).call(gn);
})(h0, h0.exports);
var ZV = h0.exports, O1 = { exports: {} };
(function(t, e) {
  var r = typeof self < "u" ? self : gn, n = function() {
    function s() {
      this.fetch = !1, this.DOMException = r.DOMException;
    }
    return s.prototype = r, new s();
  }();
  (function(s) {
    (function(o) {
      var a = {
        searchParams: "URLSearchParams" in s,
        iterable: "Symbol" in s && "iterator" in Symbol,
        blob: "FileReader" in s && "Blob" in s && function() {
          try {
            return new Blob(), !0;
          } catch {
            return !1;
          }
        }(),
        formData: "FormData" in s,
        arrayBuffer: "ArrayBuffer" in s
      };
      function u(f) {
        return f && DataView.prototype.isPrototypeOf(f);
      }
      if (a.arrayBuffer)
        var l = [
          "[object Int8Array]",
          "[object Uint8Array]",
          "[object Uint8ClampedArray]",
          "[object Int16Array]",
          "[object Uint16Array]",
          "[object Int32Array]",
          "[object Uint32Array]",
          "[object Float32Array]",
          "[object Float64Array]"
        ], d = ArrayBuffer.isView || function(f) {
          return f && l.indexOf(Object.prototype.toString.call(f)) > -1;
        };
      function p(f) {
        if (typeof f != "string" && (f = String(f)), /[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))
          throw new TypeError("Invalid character in header field name");
        return f.toLowerCase();
      }
      function w(f) {
        return typeof f != "string" && (f = String(f)), f;
      }
      function A(f) {
        var g = {
          next: function() {
            var b = f.shift();
            return { done: b === void 0, value: b };
          }
        };
        return a.iterable && (g[Symbol.iterator] = function() {
          return g;
        }), g;
      }
      function M(f) {
        this.map = {}, f instanceof M ? f.forEach(function(g, b) {
          this.append(b, g);
        }, this) : Array.isArray(f) ? f.forEach(function(g) {
          this.append(g[0], g[1]);
        }, this) : f && Object.getOwnPropertyNames(f).forEach(function(g) {
          this.append(g, f[g]);
        }, this);
      }
      M.prototype.append = function(f, g) {
        f = p(f), g = w(g);
        var b = this.map[f];
        this.map[f] = b ? b + ", " + g : g;
      }, M.prototype.delete = function(f) {
        delete this.map[p(f)];
      }, M.prototype.get = function(f) {
        return f = p(f), this.has(f) ? this.map[f] : null;
      }, M.prototype.has = function(f) {
        return this.map.hasOwnProperty(p(f));
      }, M.prototype.set = function(f, g) {
        this.map[p(f)] = w(g);
      }, M.prototype.forEach = function(f, g) {
        for (var b in this.map)
          this.map.hasOwnProperty(b) && f.call(g, this.map[b], b, this);
      }, M.prototype.keys = function() {
        var f = [];
        return this.forEach(function(g, b) {
          f.push(b);
        }), A(f);
      }, M.prototype.values = function() {
        var f = [];
        return this.forEach(function(g) {
          f.push(g);
        }), A(f);
      }, M.prototype.entries = function() {
        var f = [];
        return this.forEach(function(g, b) {
          f.push([b, g]);
        }), A(f);
      }, a.iterable && (M.prototype[Symbol.iterator] = M.prototype.entries);
      function N(f) {
        if (f.bodyUsed)
          return Promise.reject(new TypeError("Already read"));
        f.bodyUsed = !0;
      }
      function L(f) {
        return new Promise(function(g, b) {
          f.onload = function() {
            g(f.result);
          }, f.onerror = function() {
            b(f.error);
          };
        });
      }
      function B(f) {
        var g = new FileReader(), b = L(g);
        return g.readAsArrayBuffer(f), b;
      }
      function $(f) {
        var g = new FileReader(), b = L(g);
        return g.readAsText(f), b;
      }
      function H(f) {
        for (var g = new Uint8Array(f), b = new Array(g.length), x = 0; x < g.length; x++)
          b[x] = String.fromCharCode(g[x]);
        return b.join("");
      }
      function W(f) {
        if (f.slice)
          return f.slice(0);
        var g = new Uint8Array(f.byteLength);
        return g.set(new Uint8Array(f)), g.buffer;
      }
      function V() {
        return this.bodyUsed = !1, this._initBody = function(f) {
          this._bodyInit = f, f ? typeof f == "string" ? this._bodyText = f : a.blob && Blob.prototype.isPrototypeOf(f) ? this._bodyBlob = f : a.formData && FormData.prototype.isPrototypeOf(f) ? this._bodyFormData = f : a.searchParams && URLSearchParams.prototype.isPrototypeOf(f) ? this._bodyText = f.toString() : a.arrayBuffer && a.blob && u(f) ? (this._bodyArrayBuffer = W(f.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : a.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(f) || d(f)) ? this._bodyArrayBuffer = W(f) : this._bodyText = f = Object.prototype.toString.call(f) : this._bodyText = "", this.headers.get("content-type") || (typeof f == "string" ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : a.searchParams && URLSearchParams.prototype.isPrototypeOf(f) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"));
        }, a.blob && (this.blob = function() {
          var f = N(this);
          if (f)
            return f;
          if (this._bodyBlob)
            return Promise.resolve(this._bodyBlob);
          if (this._bodyArrayBuffer)
            return Promise.resolve(new Blob([this._bodyArrayBuffer]));
          if (this._bodyFormData)
            throw new Error("could not read FormData body as blob");
          return Promise.resolve(new Blob([this._bodyText]));
        }, this.arrayBuffer = function() {
          return this._bodyArrayBuffer ? N(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(B);
        }), this.text = function() {
          var f = N(this);
          if (f)
            return f;
          if (this._bodyBlob)
            return $(this._bodyBlob);
          if (this._bodyArrayBuffer)
            return Promise.resolve(H(this._bodyArrayBuffer));
          if (this._bodyFormData)
            throw new Error("could not read FormData body as text");
          return Promise.resolve(this._bodyText);
        }, a.formData && (this.formData = function() {
          return this.text().then(ge);
        }), this.json = function() {
          return this.text().then(JSON.parse);
        }, this;
      }
      var te = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
      function R(f) {
        var g = f.toUpperCase();
        return te.indexOf(g) > -1 ? g : f;
      }
      function K(f, g) {
        g = g || {};
        var b = g.body;
        if (f instanceof K) {
          if (f.bodyUsed)
            throw new TypeError("Already read");
          this.url = f.url, this.credentials = f.credentials, g.headers || (this.headers = new M(f.headers)), this.method = f.method, this.mode = f.mode, this.signal = f.signal, !b && f._bodyInit != null && (b = f._bodyInit, f.bodyUsed = !0);
        } else
          this.url = String(f);
        if (this.credentials = g.credentials || this.credentials || "same-origin", (g.headers || !this.headers) && (this.headers = new M(g.headers)), this.method = R(g.method || this.method || "GET"), this.mode = g.mode || this.mode || null, this.signal = g.signal || this.signal, this.referrer = null, (this.method === "GET" || this.method === "HEAD") && b)
          throw new TypeError("Body not allowed for GET or HEAD requests");
        this._initBody(b);
      }
      K.prototype.clone = function() {
        return new K(this, { body: this._bodyInit });
      };
      function ge(f) {
        var g = new FormData();
        return f.trim().split("&").forEach(function(b) {
          if (b) {
            var x = b.split("="), _ = x.shift().replace(/\+/g, " "), E = x.join("=").replace(/\+/g, " ");
            g.append(decodeURIComponent(_), decodeURIComponent(E));
          }
        }), g;
      }
      function Ee(f) {
        var g = new M(), b = f.replace(/\r?\n[\t ]+/g, " ");
        return b.split(/\r?\n/).forEach(function(x) {
          var _ = x.split(":"), E = _.shift().trim();
          if (E) {
            var v = _.join(":").trim();
            g.append(E, v);
          }
        }), g;
      }
      V.call(K.prototype);
      function Y(f, g) {
        g || (g = {}), this.type = "default", this.status = g.status === void 0 ? 200 : g.status, this.ok = this.status >= 200 && this.status < 300, this.statusText = "statusText" in g ? g.statusText : "OK", this.headers = new M(g.headers), this.url = g.url || "", this._initBody(f);
      }
      V.call(Y.prototype), Y.prototype.clone = function() {
        return new Y(this._bodyInit, {
          status: this.status,
          statusText: this.statusText,
          headers: new M(this.headers),
          url: this.url
        });
      }, Y.error = function() {
        var f = new Y(null, { status: 0, statusText: "" });
        return f.type = "error", f;
      };
      var S = [301, 302, 303, 307, 308];
      Y.redirect = function(f, g) {
        if (S.indexOf(g) === -1)
          throw new RangeError("Invalid status code");
        return new Y(null, { status: g, headers: { location: f } });
      }, o.DOMException = s.DOMException;
      try {
        new o.DOMException();
      } catch {
        o.DOMException = function(g, b) {
          this.message = g, this.name = b;
          var x = Error(g);
          this.stack = x.stack;
        }, o.DOMException.prototype = Object.create(Error.prototype), o.DOMException.prototype.constructor = o.DOMException;
      }
      function m(f, g) {
        return new Promise(function(b, x) {
          var _ = new K(f, g);
          if (_.signal && _.signal.aborted)
            return x(new o.DOMException("Aborted", "AbortError"));
          var E = new XMLHttpRequest();
          function v() {
            E.abort();
          }
          E.onload = function() {
            var P = {
              status: E.status,
              statusText: E.statusText,
              headers: Ee(E.getAllResponseHeaders() || "")
            };
            P.url = "responseURL" in E ? E.responseURL : P.headers.get("X-Request-URL");
            var I = "response" in E ? E.response : E.responseText;
            b(new Y(I, P));
          }, E.onerror = function() {
            x(new TypeError("Network request failed"));
          }, E.ontimeout = function() {
            x(new TypeError("Network request failed"));
          }, E.onabort = function() {
            x(new o.DOMException("Aborted", "AbortError"));
          }, E.open(_.method, _.url, !0), _.credentials === "include" ? E.withCredentials = !0 : _.credentials === "omit" && (E.withCredentials = !1), "responseType" in E && a.blob && (E.responseType = "blob"), _.headers.forEach(function(P, I) {
            E.setRequestHeader(I, P);
          }), _.signal && (_.signal.addEventListener("abort", v), E.onreadystatechange = function() {
            E.readyState === 4 && _.signal.removeEventListener("abort", v);
          }), E.send(typeof _._bodyInit > "u" ? null : _._bodyInit);
        });
      }
      return m.polyfill = !0, s.fetch || (s.fetch = m, s.Headers = M, s.Request = K, s.Response = Y), o.Headers = M, o.Request = K, o.Response = Y, o.fetch = m, Object.defineProperty(o, "__esModule", { value: !0 }), o;
    })({});
  })(n), n.fetch.ponyfill = !0, delete n.fetch.polyfill;
  var i = n;
  e = i.fetch, e.default = i.fetch, e.fetch = i.fetch, e.Headers = i.Headers, e.Request = i.Request, e.Response = i.Response, t.exports = e;
})(O1, O1.exports);
var QV = O1.exports;
const k3 = /* @__PURE__ */ ts(QV);
var eG = Object.defineProperty, tG = Object.defineProperties, rG = Object.getOwnPropertyDescriptors, $3 = Object.getOwnPropertySymbols, nG = Object.prototype.hasOwnProperty, iG = Object.prototype.propertyIsEnumerable, B3 = (t, e, r) => e in t ? eG(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, F3 = (t, e) => {
  for (var r in e || (e = {})) nG.call(e, r) && B3(t, r, e[r]);
  if ($3) for (var r of $3(e)) iG.call(e, r) && B3(t, r, e[r]);
  return t;
}, j3 = (t, e) => tG(t, rG(e));
const sG = { Accept: "application/json", "Content-Type": "application/json" }, oG = "POST", U3 = { headers: sG, method: oG }, q3 = 10;
let As = class {
  constructor(e, r = !1) {
    if (this.url = e, this.disableProviderPing = r, this.events = new rs.EventEmitter(), this.isAvailable = !1, this.registering = !1, !c3(e)) throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);
    this.url = e, this.disableProviderPing = r;
  }
  get connected() {
    return this.isAvailable;
  }
  get connecting() {
    return this.registering;
  }
  on(e, r) {
    this.events.on(e, r);
  }
  once(e, r) {
    this.events.once(e, r);
  }
  off(e, r) {
    this.events.off(e, r);
  }
  removeListener(e, r) {
    this.events.removeListener(e, r);
  }
  async open(e = this.url) {
    await this.register(e);
  }
  async close() {
    if (!this.isAvailable) throw new Error("Connection already closed");
    this.onClose();
  }
  async send(e) {
    this.isAvailable || await this.register();
    try {
      const r = $o(e), n = await (await k3(this.url, j3(F3({}, U3), { body: r }))).json();
      this.onPayload({ data: n });
    } catch (r) {
      this.onError(e.id, r);
    }
  }
  async register(e = this.url) {
    if (!c3(e)) throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);
    if (this.registering) {
      const r = this.events.getMaxListeners();
      return (this.events.listenerCount("register_error") >= r || this.events.listenerCount("open") >= r) && this.events.setMaxListeners(r + 1), new Promise((n, i) => {
        this.events.once("register_error", (s) => {
          this.resetMaxListeners(), i(s);
        }), this.events.once("open", () => {
          if (this.resetMaxListeners(), typeof this.isAvailable > "u") return i(new Error("HTTP connection is missing or invalid"));
          n();
        });
      });
    }
    this.url = e, this.registering = !0;
    try {
      if (!this.disableProviderPing) {
        const r = $o({ id: 1, jsonrpc: "2.0", method: "test", params: [] });
        await k3(e, j3(F3({}, U3), { body: r }));
      }
      this.onOpen();
    } catch (r) {
      const n = this.parseError(r);
      throw this.events.emit("register_error", n), this.onClose(), n;
    }
  }
  onOpen() {
    this.isAvailable = !0, this.registering = !1, this.events.emit("open");
  }
  onClose() {
    this.isAvailable = !1, this.registering = !1, this.events.emit("close");
  }
  onPayload(e) {
    if (typeof e.data > "u") return;
    const r = typeof e.data == "string" ? fc(e.data) : e.data;
    this.events.emit("payload", r);
  }
  onError(e, r) {
    const n = this.parseError(r), i = n.message || n.toString(), s = np(e, i);
    this.events.emit("payload", s);
  }
  parseError(e, r = this.url) {
    return J8(e, r, "HTTP");
  }
  resetMaxListeners() {
    this.events.getMaxListeners() > q3 && this.events.setMaxListeners(q3);
  }
};
const z3 = "error", aG = "wss://relay.walletconnect.org", cG = "wc", uG = "universal_provider", W3 = `${cG}@2:${uG}:`, wE = "https://rpc.walletconnect.org/v1/", Xc = "generic", fG = `${wE}bundler`, cs = { DEFAULT_CHAIN_CHANGED: "default_chain_changed" };
var lG = Object.defineProperty, hG = Object.defineProperties, dG = Object.getOwnPropertyDescriptors, H3 = Object.getOwnPropertySymbols, pG = Object.prototype.hasOwnProperty, gG = Object.prototype.propertyIsEnumerable, K3 = (t, e, r) => e in t ? lG(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, ld = (t, e) => {
  for (var r in e || (e = {})) pG.call(e, r) && K3(t, r, e[r]);
  if (H3) for (var r of H3(e)) gG.call(e, r) && K3(t, r, e[r]);
  return t;
}, mG = (t, e) => hG(t, dG(e));
function Ni(t, e, r) {
  var n;
  const i = hu(t);
  return ((n = e.rpcMap) == null ? void 0 : n[i.reference]) || `${wE}?chainId=${i.namespace}:${i.reference}&projectId=${r}`;
}
function Sc(t) {
  return t.includes(":") ? t.split(":")[1] : t;
}
function xE(t) {
  return t.map((e) => `${e.split(":")[0]}:${e.split(":")[1]}`);
}
function vG(t, e) {
  const r = Object.keys(e.namespaces).filter((i) => i.includes(t));
  if (!r.length) return [];
  const n = [];
  return r.forEach((i) => {
    const s = e.namespaces[i].accounts;
    n.push(...s);
  }), n;
}
function bm(t = {}, e = {}) {
  const r = V3(t), n = V3(e);
  return ZV.merge(r, n);
}
function V3(t) {
  var e, r, n, i;
  const s = {};
  if (!Sl(t)) return s;
  for (const [o, a] of Object.entries(t)) {
    const u = ab(o) ? [o] : a.chains, l = a.methods || [], d = a.events || [], p = a.rpcMap || {}, w = Ff(o);
    s[w] = mG(ld(ld({}, s[w]), a), { chains: Id(u, (e = s[w]) == null ? void 0 : e.chains), methods: Id(l, (r = s[w]) == null ? void 0 : r.methods), events: Id(d, (n = s[w]) == null ? void 0 : n.events), rpcMap: ld(ld({}, p), (i = s[w]) == null ? void 0 : i.rpcMap) });
  }
  return s;
}
function bG(t) {
  return t.includes(":") ? t.split(":")[2] : t;
}
function G3(t) {
  const e = {};
  for (const [r, n] of Object.entries(t)) {
    const i = n.methods || [], s = n.events || [], o = n.accounts || [], a = ab(r) ? [r] : n.chains ? n.chains : xE(n.accounts);
    e[r] = { chains: a, methods: i, events: s, accounts: o };
  }
  return e;
}
function ym(t) {
  return typeof t == "number" ? t : t.includes("0x") ? parseInt(t, 16) : (t = t.includes(":") ? t.split(":")[1] : t, isNaN(Number(t)) ? t : Number(t));
}
const _E = {}, Ar = (t) => _E[t], wm = (t, e) => {
  _E[t] = e;
};
class yG {
  constructor(e) {
    this.name = "polkadot", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(e, r), this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${e}`);
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]) || [] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      const i = Sc(r);
      e[i] = this.createHttpProvider(i, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace, this.client.core.projectId);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
}
var wG = Object.defineProperty, xG = Object.defineProperties, _G = Object.getOwnPropertyDescriptors, Y3 = Object.getOwnPropertySymbols, EG = Object.prototype.hasOwnProperty, SG = Object.prototype.propertyIsEnumerable, J3 = (t, e, r) => e in t ? wG(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, X3 = (t, e) => {
  for (var r in e || (e = {})) EG.call(e, r) && J3(t, r, e[r]);
  if (Y3) for (var r of Y3(e)) SG.call(e, r) && J3(t, r, e[r]);
  return t;
}, Z3 = (t, e) => xG(t, _G(e));
class AG {
  constructor(e) {
    this.name = "eip155", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.httpProviders = this.createHttpProviders(), this.chainId = parseInt(this.getDefaultChain());
  }
  async request(e) {
    switch (e.request.method) {
      case "eth_requestAccounts":
        return this.getAccounts();
      case "eth_accounts":
        return this.getAccounts();
      case "wallet_switchEthereumChain":
        return await this.handleSwitchChain(e);
      case "eth_chainId":
        return parseInt(this.getDefaultChain());
      case "wallet_getCapabilities":
        return await this.getCapabilities(e);
      case "wallet_getCallsStatus":
        return await this.getCallStatus(e);
    }
    return this.namespace.methods.includes(e.request.method) ? await this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(parseInt(e), r), this.chainId = parseInt(e), this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${e}`);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId.toString();
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  createHttpProvider(e, r) {
    const n = r || Ni(`${this.name}:${e}`, this.namespace, this.client.core.projectId);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      const i = parseInt(Sc(r));
      e[i] = this.createHttpProvider(i, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  getHttpProvider() {
    const e = this.chainId, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  async handleSwitchChain(e) {
    var r, n;
    let i = e.request.params ? (r = e.request.params[0]) == null ? void 0 : r.chainId : "0x0";
    i = i.startsWith("0x") ? i : `0x${i}`;
    const s = parseInt(i, 16);
    if (this.isChainApproved(s)) this.setDefaultChain(`${s}`);
    else if (this.namespace.methods.includes("wallet_switchEthereumChain")) await this.client.request({ topic: e.topic, request: { method: e.request.method, params: [{ chainId: i }] }, chainId: (n = this.namespace.chains) == null ? void 0 : n[0] }), this.setDefaultChain(`${s}`);
    else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);
    return null;
  }
  isChainApproved(e) {
    return this.namespace.chains.includes(`${this.name}:${e}`);
  }
  async getCapabilities(e) {
    var r, n, i;
    const s = (n = (r = e.request) == null ? void 0 : r.params) == null ? void 0 : n[0];
    if (!s) throw new Error("Missing address parameter in `wallet_getCapabilities` request");
    const o = this.client.session.get(e.topic), a = ((i = o == null ? void 0 : o.sessionProperties) == null ? void 0 : i.capabilities) || {};
    if (a != null && a[s]) return a == null ? void 0 : a[s];
    const u = await this.client.request(e);
    try {
      await this.client.session.update(e.topic, { sessionProperties: Z3(X3({}, o.sessionProperties || {}), { capabilities: Z3(X3({}, a || {}), { [s]: u }) }) });
    } catch (l) {
      console.warn("Failed to update session with capabilities", l);
    }
    return u;
  }
  async getCallStatus(e) {
    var r, n;
    const i = this.client.session.get(e.topic), s = (r = i.sessionProperties) == null ? void 0 : r.bundler_name;
    if (s) {
      const a = this.getBundlerUrl(e.chainId, s);
      try {
        return await this.getUserOperationReceipt(a, e);
      } catch (u) {
        console.warn("Failed to fetch call status from bundler", u, a);
      }
    }
    const o = (n = i.sessionProperties) == null ? void 0 : n.bundler_url;
    if (o) try {
      return await this.getUserOperationReceipt(o, e);
    } catch (a) {
      console.warn("Failed to fetch call status from custom bundler", a, o);
    }
    if (this.namespace.methods.includes(e.request.method)) return await this.client.request(e);
    throw new Error("Fetching call status not approved by the wallet.");
  }
  async getUserOperationReceipt(e, r) {
    var n;
    const i = new URL(e), s = await fetch(i, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(da("eth_getUserOperationReceipt", [(n = r.request.params) == null ? void 0 : n[0]])) });
    if (!s.ok) throw new Error(`Failed to fetch user operation receipt - ${s.status}`);
    return await s.json();
  }
  getBundlerUrl(e, r) {
    return `${fG}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`;
  }
}
class PG {
  constructor(e) {
    this.name = "solana", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(e, r), this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${e}`);
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      const i = Sc(r);
      e[i] = this.createHttpProvider(i, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace, this.client.core.projectId);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
}
let MG = class {
  constructor(e) {
    this.name = "cosmos", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(e, r), this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      const i = Sc(r);
      e[i] = this.createHttpProvider(i, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace, this.client.core.projectId);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
}, IG = class {
  constructor(e) {
    this.name = "algorand", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    if (!this.httpProviders[e]) {
      const n = r || Ni(`${this.name}:${e}`, this.namespace, this.client.core.projectId);
      if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
      this.setHttpProvider(e, n);
    }
    this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      e[r] = this.createHttpProvider(r, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace, this.client.core.projectId);
    return typeof n > "u" ? void 0 : new as(new As(n, Ar("disableProviderPing")));
  }
}, CG = class {
  constructor(e) {
    this.name = "cip34", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(e, r), this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      const n = this.getCardanoRPCUrl(r), i = Sc(r);
      e[i] = this.createHttpProvider(i, n);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  getCardanoRPCUrl(e) {
    const r = this.namespace.rpcMap;
    if (r) return r[e];
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || this.getCardanoRPCUrl(e);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
}, TG = class {
  constructor(e) {
    this.name = "elrond", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(e, r), this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${e}`);
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      const i = Sc(r);
      e[i] = this.createHttpProvider(i, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace, this.client.core.projectId);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
};
class RG {
  constructor(e) {
    this.name = "multiversx", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(e, r), this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${e}`);
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      const i = Sc(r);
      e[i] = this.createHttpProvider(i, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace, this.client.core.projectId);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
}
let DG = class {
  constructor(e) {
    this.name = "near", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    if (this.chainId = e, !this.httpProviders[e]) {
      const n = r || Ni(`${this.name}:${e}`, this.namespace);
      if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
      this.setHttpProvider(e, n);
    }
    this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]) || [] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      var n;
      e[r] = this.createHttpProvider(r, (n = this.namespace.rpcMap) == null ? void 0 : n[r]);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace);
    return typeof n > "u" ? void 0 : new as(new As(n, Ar("disableProviderPing")));
  }
};
class OG {
  constructor(e) {
    this.name = "tezos", this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace = Object.assign(this.namespace, e);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider().request(e.request);
  }
  setDefaultChain(e, r) {
    if (this.chainId = e, !this.httpProviders[e]) {
      const n = r || Ni(`${this.name}:${e}`, this.namespace);
      if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
      this.setHttpProvider(e, n);
    }
    this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]) || [] : [];
  }
  createHttpProviders() {
    const e = {};
    return this.namespace.chains.forEach((r) => {
      e[r] = this.createHttpProvider(r);
    }), e;
  }
  getHttpProvider() {
    const e = `${this.name}:${this.chainId}`, r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace);
    return typeof n > "u" ? void 0 : new as(new As(n));
  }
}
class NG {
  constructor(e) {
    this.name = Xc, this.namespace = e.namespace, this.events = Ar("events"), this.client = Ar("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(e) {
    this.namespace.chains = [...new Set((this.namespace.chains || []).concat(e.chains || []))], this.namespace.accounts = [...new Set((this.namespace.accounts || []).concat(e.accounts || []))], this.namespace.methods = [...new Set((this.namespace.methods || []).concat(e.methods || []))], this.namespace.events = [...new Set((this.namespace.events || []).concat(e.events || []))], this.httpProviders = this.createHttpProviders();
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(e) {
    return this.namespace.methods.includes(e.request.method) ? this.client.request(e) : this.getHttpProvider(e.chainId).request(e.request);
  }
  setDefaultChain(e, r) {
    this.httpProviders[e] || this.setHttpProvider(e, r), this.chainId = e, this.events.emit(cs.DEFAULT_CHAIN_CHANGED, `${this.name}:${e}`);
  }
  getDefaultChain() {
    if (this.chainId) return this.chainId;
    if (this.namespace.defaultChain) return this.namespace.defaultChain;
    const e = this.namespace.chains[0];
    if (!e) throw new Error("ChainId not found");
    return e.split(":")[1];
  }
  getAccounts() {
    const e = this.namespace.accounts;
    return e ? [...new Set(e.filter((r) => r.split(":")[1] === this.chainId.toString()).map((r) => r.split(":")[2]))] : [];
  }
  createHttpProviders() {
    var e, r;
    const n = {};
    return (r = (e = this.namespace) == null ? void 0 : e.accounts) == null || r.forEach((i) => {
      const s = hu(i);
      n[`${s.namespace}:${s.reference}`] = this.createHttpProvider(i);
    }), n;
  }
  getHttpProvider(e) {
    const r = this.httpProviders[e];
    if (typeof r > "u") throw new Error(`JSON-RPC provider for ${e} not found`);
    return r;
  }
  setHttpProvider(e, r) {
    const n = this.createHttpProvider(e, r);
    n && (this.httpProviders[e] = n);
  }
  createHttpProvider(e, r) {
    const n = r || Ni(e, this.namespace, this.client.core.projectId);
    if (!n) throw new Error(`No RPC url provided for chainId: ${e}`);
    return new as(new As(n, Ar("disableProviderPing")));
  }
}
var LG = Object.defineProperty, kG = Object.defineProperties, $G = Object.getOwnPropertyDescriptors, Q3 = Object.getOwnPropertySymbols, BG = Object.prototype.hasOwnProperty, FG = Object.prototype.propertyIsEnumerable, e6 = (t, e, r) => e in t ? LG(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, hd = (t, e) => {
  for (var r in e || (e = {})) BG.call(e, r) && e6(t, r, e[r]);
  if (Q3) for (var r of Q3(e)) FG.call(e, r) && e6(t, r, e[r]);
  return t;
}, xm = (t, e) => kG(t, $G(e));
let EE = class SE {
  constructor(e) {
    this.events = new kv(), this.rpcProviders = {}, this.shouldAbortPairingAttempt = !1, this.maxPairingAttempts = 10, this.disableProviderPing = !1, this.providerOpts = e, this.logger = typeof (e == null ? void 0 : e.logger) < "u" && typeof (e == null ? void 0 : e.logger) != "string" ? e.logger : ql($0({ level: (e == null ? void 0 : e.logger) || z3 })), this.disableProviderPing = (e == null ? void 0 : e.disableProviderPing) || !1;
  }
  static async init(e) {
    const r = new SE(e);
    return await r.initialize(), r;
  }
  async request(e, r, n) {
    const [i, s] = this.validateChain(r);
    if (!this.session) throw new Error("Please call connect() before request()");
    return await this.getProvider(i).request({ request: hd({}, e), chainId: `${i}:${s}`, topic: this.session.topic, expiry: n });
  }
  sendAsync(e, r, n, i) {
    const s = (/* @__PURE__ */ new Date()).getTime();
    this.request(e, n, i).then((o) => r(null, rp(s, o))).catch((o) => r(o, void 0));
  }
  async enable() {
    if (!this.client) throw new Error("Sign Client not initialized");
    return this.session || await this.connect({ namespaces: this.namespaces, optionalNamespaces: this.optionalNamespaces, sessionProperties: this.sessionProperties }), await this.requestAccounts();
  }
  async disconnect() {
    var e;
    if (!this.session) throw new Error("Please call connect() before enable()");
    await this.client.disconnect({ topic: (e = this.session) == null ? void 0 : e.topic, reason: Or("USER_DISCONNECTED") }), await this.cleanup();
  }
  async connect(e) {
    if (!this.client) throw new Error("Sign Client not initialized");
    if (this.setNamespaces(e), await this.cleanupPendingPairings(), !e.skipPairing) return await this.pair(e.pairingTopic);
  }
  async authenticate(e, r) {
    if (!this.client) throw new Error("Sign Client not initialized");
    this.setNamespaces(e), await this.cleanupPendingPairings();
    const { uri: n, response: i } = await this.client.authenticate(e, r);
    n && (this.uri = n, this.events.emit("display_uri", n));
    const s = await i();
    if (this.session = s.session, this.session) {
      const o = G3(this.session.namespaces);
      this.namespaces = bm(this.namespaces, o), this.persist("namespaces", this.namespaces), this.onConnect();
    }
    return s;
  }
  on(e, r) {
    this.events.on(e, r);
  }
  once(e, r) {
    this.events.once(e, r);
  }
  removeListener(e, r) {
    this.events.removeListener(e, r);
  }
  off(e, r) {
    this.events.off(e, r);
  }
  get isWalletConnect() {
    return !0;
  }
  async pair(e) {
    this.shouldAbortPairingAttempt = !1;
    let r = 0;
    do {
      if (this.shouldAbortPairingAttempt) throw new Error("Pairing aborted");
      if (r >= this.maxPairingAttempts) throw new Error("Max auto pairing attempts reached");
      const { uri: n, approval: i } = await this.client.connect({ pairingTopic: e, requiredNamespaces: this.namespaces, optionalNamespaces: this.optionalNamespaces, sessionProperties: this.sessionProperties });
      n && (this.uri = n, this.events.emit("display_uri", n)), await i().then((s) => {
        this.session = s;
        const o = G3(s.namespaces);
        this.namespaces = bm(this.namespaces, o), this.persist("namespaces", this.namespaces);
      }).catch((s) => {
        if (s.message !== yE) throw s;
        r++;
      });
    } while (!this.session);
    return this.onConnect(), this.session;
  }
  setDefaultChain(e, r) {
    try {
      if (!this.session) return;
      const [n, i] = this.validateChain(e), s = this.getProvider(n);
      s.name === Xc ? s.setDefaultChain(`${n}:${i}`, r) : s.setDefaultChain(i, r);
    } catch (n) {
      if (!/Please call connect/.test(n.message)) throw n;
    }
  }
  async cleanupPendingPairings(e = {}) {
    this.logger.info("Cleaning up inactive pairings...");
    const r = this.client.pairing.getAll();
    if (pc(r)) {
      for (const n of r) e.deletePairings ? this.client.core.expirer.set(n.topic, 0) : await this.client.core.relayer.subscriber.unsubscribe(n.topic);
      this.logger.info(`Inactive pairings cleared: ${r.length}`);
    }
  }
  abortPairingAttempt() {
    this.shouldAbortPairingAttempt = !0;
  }
  async checkStorage() {
    if (this.namespaces = await this.getFromStore("namespaces"), this.optionalNamespaces = await this.getFromStore("optionalNamespaces") || {}, this.client.session.length) {
      const e = this.client.session.keys.length - 1;
      this.session = this.client.session.get(this.client.session.keys[e]), this.createProviders();
    }
  }
  async initialize() {
    this.logger.trace("Initialized"), await this.createClient(), await this.checkStorage(), this.registerEventListeners();
  }
  async createClient() {
    this.client = this.providerOpts.client || await db.init({ core: this.providerOpts.core, logger: this.providerOpts.logger || z3, relayUrl: this.providerOpts.relayUrl || aG, projectId: this.providerOpts.projectId, metadata: this.providerOpts.metadata, storageOptions: this.providerOpts.storageOptions, storage: this.providerOpts.storage, name: this.providerOpts.name, customStoragePrefix: this.providerOpts.customStoragePrefix, telemetryEnabled: this.providerOpts.telemetryEnabled }), this.logger.trace("SignClient Initialized");
  }
  createProviders() {
    if (!this.client) throw new Error("Sign Client not initialized");
    if (!this.session) throw new Error("Session not initialized. Please call connect() before enable()");
    const e = [...new Set(Object.keys(this.session.namespaces).map((r) => Ff(r)))];
    wm("client", this.client), wm("events", this.events), wm("disableProviderPing", this.disableProviderPing), e.forEach((r) => {
      if (!this.session) return;
      const n = vG(r, this.session), i = xE(n), s = bm(this.namespaces, this.optionalNamespaces), o = xm(hd({}, s[r]), { accounts: n, chains: i });
      switch (r) {
        case "eip155":
          this.rpcProviders[r] = new AG({ namespace: o });
          break;
        case "algorand":
          this.rpcProviders[r] = new IG({ namespace: o });
          break;
        case "solana":
          this.rpcProviders[r] = new PG({ namespace: o });
          break;
        case "cosmos":
          this.rpcProviders[r] = new MG({ namespace: o });
          break;
        case "polkadot":
          this.rpcProviders[r] = new yG({ namespace: o });
          break;
        case "cip34":
          this.rpcProviders[r] = new CG({ namespace: o });
          break;
        case "elrond":
          this.rpcProviders[r] = new TG({ namespace: o });
          break;
        case "multiversx":
          this.rpcProviders[r] = new RG({ namespace: o });
          break;
        case "near":
          this.rpcProviders[r] = new DG({ namespace: o });
          break;
        case "tezos":
          this.rpcProviders[r] = new OG({ namespace: o });
          break;
        default:
          this.rpcProviders[Xc] ? this.rpcProviders[Xc].updateNamespace(o) : this.rpcProviders[Xc] = new NG({ namespace: o });
      }
    });
  }
  registerEventListeners() {
    if (typeof this.client > "u") throw new Error("Sign Client is not initialized");
    this.client.on("session_ping", (e) => {
      this.events.emit("session_ping", e);
    }), this.client.on("session_event", (e) => {
      const { params: r } = e, { event: n } = r;
      if (n.name === "accountsChanged") {
        const i = n.data;
        i && pc(i) && this.events.emit("accountsChanged", i.map(bG));
      } else if (n.name === "chainChanged") {
        const i = r.chainId, s = r.event.data, o = Ff(i), a = ym(i) !== ym(s) ? `${o}:${ym(s)}` : i;
        this.onChainChanged(a);
      } else this.events.emit(n.name, n.data);
      this.events.emit("session_event", e);
    }), this.client.on("session_update", ({ topic: e, params: r }) => {
      var n;
      const { namespaces: i } = r, s = (n = this.client) == null ? void 0 : n.session.get(e);
      this.session = xm(hd({}, s), { namespaces: i }), this.onSessionUpdate(), this.events.emit("session_update", { topic: e, params: r });
    }), this.client.on("session_delete", async (e) => {
      await this.cleanup(), this.events.emit("session_delete", e), this.events.emit("disconnect", xm(hd({}, Or("USER_DISCONNECTED")), { data: e.topic }));
    }), this.on(cs.DEFAULT_CHAIN_CHANGED, (e) => {
      this.onChainChanged(e, !0);
    });
  }
  getProvider(e) {
    return this.rpcProviders[e] || this.rpcProviders[Xc];
  }
  onSessionUpdate() {
    Object.keys(this.rpcProviders).forEach((e) => {
      var r;
      this.getProvider(e).updateNamespace((r = this.session) == null ? void 0 : r.namespaces[e]);
    });
  }
  setNamespaces(e) {
    const { namespaces: r, optionalNamespaces: n, sessionProperties: i } = e;
    r && Object.keys(r).length && (this.namespaces = r), n && Object.keys(n).length && (this.optionalNamespaces = n), this.sessionProperties = i, this.persist("namespaces", r), this.persist("optionalNamespaces", n);
  }
  validateChain(e) {
    const [r, n] = (e == null ? void 0 : e.split(":")) || ["", ""];
    if (!this.namespaces || !Object.keys(this.namespaces).length) return [r, n];
    if (r && !Object.keys(this.namespaces || {}).map((o) => Ff(o)).includes(r)) throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);
    if (r && n) return [r, n];
    const i = Ff(Object.keys(this.namespaces)[0]), s = this.rpcProviders[i].getDefaultChain();
    return [i, s];
  }
  async requestAccounts() {
    const [e] = this.validateChain();
    return await this.getProvider(e).requestAccounts();
  }
  onChainChanged(e, r = !1) {
    if (!this.namespaces) return;
    const [n, i] = this.validateChain(e);
    i && (r || this.getProvider(n).setDefaultChain(i), this.namespaces[n] ? this.namespaces[n].defaultChain = i : this.namespaces[`${n}:${i}`] ? this.namespaces[`${n}:${i}`].defaultChain = i : this.namespaces[`${n}:${i}`] = { defaultChain: i }, this.persist("namespaces", this.namespaces), this.events.emit("chainChanged", i));
  }
  onConnect() {
    this.createProviders(), this.events.emit("connect", { session: this.session });
  }
  async cleanup() {
    this.session = void 0, this.namespaces = void 0, this.optionalNamespaces = void 0, this.sessionProperties = void 0, this.persist("namespaces", void 0), this.persist("optionalNamespaces", void 0), this.persist("sessionProperties", void 0), await this.cleanupPendingPairings({ deletePairings: !0 });
  }
  persist(e, r) {
    this.client.core.storage.setItem(`${W3}/${e}`, r);
  }
  async getFromStore(e) {
    return await this.client.core.storage.getItem(`${W3}/${e}`);
  }
};
const jG = EE;
function UG() {
  return new Promise((t) => {
    const e = [];
    let r;
    window.addEventListener("eip6963:announceProvider", (n) => {
      const { detail: i } = n;
      r && clearTimeout(r), e.push(i), r = setTimeout(() => t(e), 200);
    }), r = setTimeout(() => t(e), 200), window.dispatchEvent(new Event("eip6963:requestProvider"));
  });
}
class eo {
  constructor(e, r) {
    this.scope = e, this.module = r;
  }
  storeObject(e, r) {
    this.setItem(e, JSON.stringify(r));
  }
  loadObject(e) {
    const r = this.getItem(e);
    return r ? JSON.parse(r) : void 0;
  }
  setItem(e, r) {
    localStorage.setItem(this.scopedKey(e), r);
  }
  getItem(e) {
    return localStorage.getItem(this.scopedKey(e));
  }
  removeItem(e) {
    localStorage.removeItem(this.scopedKey(e));
  }
  clear() {
    const e = this.scopedKey(""), r = [];
    for (let n = 0; n < localStorage.length; n++) {
      const i = localStorage.key(n);
      typeof i == "string" && i.startsWith(e) && r.push(i);
    }
    r.forEach((n) => localStorage.removeItem(n));
  }
  scopedKey(e) {
    return `-${this.scope}${this.module ? `:${this.module}` : ""}:${e}`;
  }
  static clearAll() {
    new eo("CBWSDK").clear(), new eo("walletlink").clear();
  }
}
const fn = {
  rpc: {
    invalidInput: -32e3,
    resourceNotFound: -32001,
    resourceUnavailable: -32002,
    transactionRejected: -32003,
    methodNotSupported: -32004,
    limitExceeded: -32005,
    parse: -32700,
    invalidRequest: -32600,
    methodNotFound: -32601,
    invalidParams: -32602,
    internal: -32603
  },
  provider: {
    userRejectedRequest: 4001,
    unauthorized: 4100,
    unsupportedMethod: 4200,
    disconnected: 4900,
    chainDisconnected: 4901,
    unsupportedChain: 4902
  }
}, N1 = {
  "-32700": {
    standard: "JSON RPC 2.0",
    message: "Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."
  },
  "-32600": {
    standard: "JSON RPC 2.0",
    message: "The JSON sent is not a valid Request object."
  },
  "-32601": {
    standard: "JSON RPC 2.0",
    message: "The method does not exist / is not available."
  },
  "-32602": {
    standard: "JSON RPC 2.0",
    message: "Invalid method parameter(s)."
  },
  "-32603": {
    standard: "JSON RPC 2.0",
    message: "Internal JSON-RPC error."
  },
  "-32000": {
    standard: "EIP-1474",
    message: "Invalid input."
  },
  "-32001": {
    standard: "EIP-1474",
    message: "Resource not found."
  },
  "-32002": {
    standard: "EIP-1474",
    message: "Resource unavailable."
  },
  "-32003": {
    standard: "EIP-1474",
    message: "Transaction rejected."
  },
  "-32004": {
    standard: "EIP-1474",
    message: "Method not supported."
  },
  "-32005": {
    standard: "EIP-1474",
    message: "Request limit exceeded."
  },
  4001: {
    standard: "EIP-1193",
    message: "User rejected the request."
  },
  4100: {
    standard: "EIP-1193",
    message: "The requested account and/or method has not been authorized by the user."
  },
  4200: {
    standard: "EIP-1193",
    message: "The requested method is not supported by this Ethereum provider."
  },
  4900: {
    standard: "EIP-1193",
    message: "The provider is disconnected from all chains."
  },
  4901: {
    standard: "EIP-1193",
    message: "The provider is disconnected from the specified chain."
  },
  4902: {
    standard: "EIP-3085",
    message: "Unrecognized chain ID."
  }
}, AE = "Unspecified error message.", qG = "Unspecified server error.";
function pb(t, e = AE) {
  if (t && Number.isInteger(t)) {
    const r = t.toString();
    if (L1(N1, r))
      return N1[r].message;
    if (PE(t))
      return qG;
  }
  return e;
}
function zG(t) {
  if (!Number.isInteger(t))
    return !1;
  const e = t.toString();
  return !!(N1[e] || PE(t));
}
function WG(t, { shouldIncludeStack: e = !1 } = {}) {
  const r = {};
  if (t && typeof t == "object" && !Array.isArray(t) && L1(t, "code") && zG(t.code)) {
    const n = t;
    r.code = n.code, n.message && typeof n.message == "string" ? (r.message = n.message, L1(n, "data") && (r.data = n.data)) : (r.message = pb(r.code), r.data = { originalError: t6(t) });
  } else
    r.code = fn.rpc.internal, r.message = r6(t, "message") ? t.message : AE, r.data = { originalError: t6(t) };
  return e && (r.stack = r6(t, "stack") ? t.stack : void 0), r;
}
function PE(t) {
  return t >= -32099 && t <= -32e3;
}
function t6(t) {
  return t && typeof t == "object" && !Array.isArray(t) ? Object.assign({}, t) : t;
}
function L1(t, e) {
  return Object.prototype.hasOwnProperty.call(t, e);
}
function r6(t, e) {
  return typeof t == "object" && t !== null && e in t && typeof t[e] == "string";
}
const Sr = {
  rpc: {
    parse: (t) => Gi(fn.rpc.parse, t),
    invalidRequest: (t) => Gi(fn.rpc.invalidRequest, t),
    invalidParams: (t) => Gi(fn.rpc.invalidParams, t),
    methodNotFound: (t) => Gi(fn.rpc.methodNotFound, t),
    internal: (t) => Gi(fn.rpc.internal, t),
    server: (t) => {
      if (!t || typeof t != "object" || Array.isArray(t))
        throw new Error("Ethereum RPC Server errors must provide single object argument.");
      const { code: e } = t;
      if (!Number.isInteger(e) || e > -32005 || e < -32099)
        throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');
      return Gi(e, t);
    },
    invalidInput: (t) => Gi(fn.rpc.invalidInput, t),
    resourceNotFound: (t) => Gi(fn.rpc.resourceNotFound, t),
    resourceUnavailable: (t) => Gi(fn.rpc.resourceUnavailable, t),
    transactionRejected: (t) => Gi(fn.rpc.transactionRejected, t),
    methodNotSupported: (t) => Gi(fn.rpc.methodNotSupported, t),
    limitExceeded: (t) => Gi(fn.rpc.limitExceeded, t)
  },
  provider: {
    userRejectedRequest: (t) => Vc(fn.provider.userRejectedRequest, t),
    unauthorized: (t) => Vc(fn.provider.unauthorized, t),
    unsupportedMethod: (t) => Vc(fn.provider.unsupportedMethod, t),
    disconnected: (t) => Vc(fn.provider.disconnected, t),
    chainDisconnected: (t) => Vc(fn.provider.chainDisconnected, t),
    unsupportedChain: (t) => Vc(fn.provider.unsupportedChain, t),
    custom: (t) => {
      if (!t || typeof t != "object" || Array.isArray(t))
        throw new Error("Ethereum Provider custom errors must provide single object argument.");
      const { code: e, message: r, data: n } = t;
      if (!r || typeof r != "string")
        throw new Error('"message" must be a nonempty string');
      return new CE(e, r, n);
    }
  }
};
function Gi(t, e) {
  const [r, n] = ME(e);
  return new IE(t, r || pb(t), n);
}
function Vc(t, e) {
  const [r, n] = ME(e);
  return new CE(t, r || pb(t), n);
}
function ME(t) {
  if (t) {
    if (typeof t == "string")
      return [t];
    if (typeof t == "object" && !Array.isArray(t)) {
      const { message: e, data: r } = t;
      if (e && typeof e != "string")
        throw new Error("Must specify string message.");
      return [e || void 0, r];
    }
  }
  return [];
}
class IE extends Error {
  constructor(e, r, n) {
    if (!Number.isInteger(e))
      throw new Error('"code" must be an integer.');
    if (!r || typeof r != "string")
      throw new Error('"message" must be a nonempty string.');
    super(r), this.code = e, n !== void 0 && (this.data = n);
  }
}
class CE extends IE {
  /**
   * Create an Ethereum Provider JSON-RPC error.
   * `code` must be an integer in the 1000 <= 4999 range.
   */
  constructor(e, r, n) {
    if (!HG(e))
      throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');
    super(e, r, n);
  }
}
function HG(t) {
  return Number.isInteger(t) && t >= 1e3 && t <= 4999;
}
function gb() {
  return (t) => t;
}
const Al = gb(), KG = gb(), VG = gb();
function _o(t) {
  return Math.floor(t);
}
const TE = /^[0-9]*$/, RE = /^[a-f0-9]*$/;
function Qa(t) {
  return mb(crypto.getRandomValues(new Uint8Array(t)));
}
function mb(t) {
  return [...t].map((e) => e.toString(16).padStart(2, "0")).join("");
}
function Dd(t) {
  return new Uint8Array(t.match(/.{1,2}/g).map((e) => Number.parseInt(e, 16)));
}
function Hf(t, e = !1) {
  const r = t.toString("hex");
  return Al(e ? `0x${r}` : r);
}
function _m(t) {
  return Hf(k1(t), !0);
}
function $s(t) {
  return VG(t.toString(10));
}
function pa(t) {
  return Al(`0x${BigInt(t).toString(16)}`);
}
function DE(t) {
  return t.startsWith("0x") || t.startsWith("0X");
}
function vb(t) {
  return DE(t) ? t.slice(2) : t;
}
function OE(t) {
  return DE(t) ? `0x${t.slice(2)}` : `0x${t}`;
}
function ap(t) {
  if (typeof t != "string")
    return !1;
  const e = vb(t).toLowerCase();
  return RE.test(e);
}
function GG(t, e = !1) {
  if (typeof t == "string") {
    const r = vb(t).toLowerCase();
    if (RE.test(r))
      return Al(e ? `0x${r}` : r);
  }
  throw Sr.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`);
}
function bb(t, e = !1) {
  let r = GG(t, !1);
  return r.length % 2 === 1 && (r = Al(`0${r}`)), e ? Al(`0x${r}`) : r;
}
function ra(t) {
  if (typeof t == "string") {
    const e = vb(t).toLowerCase();
    if (ap(e) && e.length === 40)
      return KG(OE(e));
  }
  throw Sr.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`);
}
function k1(t) {
  if (Buffer.isBuffer(t))
    return t;
  if (typeof t == "string") {
    if (ap(t)) {
      const e = bb(t, !1);
      return Buffer.from(e, "hex");
    }
    return Buffer.from(t, "utf8");
  }
  throw Sr.rpc.invalidParams(`Not binary data: ${String(t)}`);
}
function Kf(t) {
  if (typeof t == "number" && Number.isInteger(t))
    return _o(t);
  if (typeof t == "string") {
    if (TE.test(t))
      return _o(Number(t));
    if (ap(t))
      return _o(Number(BigInt(bb(t, !0))));
  }
  throw Sr.rpc.invalidParams(`Not an integer: ${String(t)}`);
}
function Rf(t) {
  if (t !== null && (typeof t == "bigint" || JG(t)))
    return BigInt(t.toString(10));
  if (typeof t == "number")
    return BigInt(Kf(t));
  if (typeof t == "string") {
    if (TE.test(t))
      return BigInt(t);
    if (ap(t))
      return BigInt(bb(t, !0));
  }
  throw Sr.rpc.invalidParams(`Not an integer: ${String(t)}`);
}
function YG(t) {
  if (typeof t == "string")
    return JSON.parse(t);
  if (typeof t == "object")
    return t;
  throw Sr.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`);
}
function JG(t) {
  if (t == null || typeof t.constructor != "function")
    return !1;
  const { constructor: e } = t;
  return typeof e.config == "function" && typeof e.EUCLID == "number";
}
async function XG() {
  return crypto.subtle.generateKey({
    name: "ECDH",
    namedCurve: "P-256"
  }, !0, ["deriveKey"]);
}
async function ZG(t, e) {
  return crypto.subtle.deriveKey({
    name: "ECDH",
    public: e
  }, t, {
    name: "AES-GCM",
    length: 256
  }, !1, ["encrypt", "decrypt"]);
}
async function QG(t, e) {
  const r = crypto.getRandomValues(new Uint8Array(12)), n = await crypto.subtle.encrypt({
    name: "AES-GCM",
    iv: r
  }, t, new TextEncoder().encode(e));
  return { iv: r, cipherText: n };
}
async function eY(t, { iv: e, cipherText: r }) {
  const n = await crypto.subtle.decrypt({
    name: "AES-GCM",
    iv: e
  }, t, r);
  return new TextDecoder().decode(n);
}
function NE(t) {
  switch (t) {
    case "public":
      return "spki";
    case "private":
      return "pkcs8";
  }
}
async function LE(t, e) {
  const r = NE(t), n = await crypto.subtle.exportKey(r, e);
  return mb(new Uint8Array(n));
}
async function kE(t, e) {
  const r = NE(t), n = Dd(e).buffer;
  return await crypto.subtle.importKey(r, new Uint8Array(n), {
    name: "ECDH",
    namedCurve: "P-256"
  }, !0, t === "private" ? ["deriveKey"] : []);
}
async function tY(t, e) {
  const r = JSON.stringify(t, (n, i) => {
    if (!(i instanceof Error))
      return i;
    const s = i;
    return Object.assign(Object.assign({}, s.code ? { code: s.code } : {}), { message: s.message });
  });
  return QG(e, r);
}
async function rY(t, e) {
  return JSON.parse(await eY(e, t));
}
const Em = {
  storageKey: "ownPrivateKey",
  keyType: "private"
}, Sm = {
  storageKey: "ownPublicKey",
  keyType: "public"
}, Am = {
  storageKey: "peerPublicKey",
  keyType: "public"
};
class nY {
  constructor() {
    this.storage = new eo("CBWSDK", "SCWKeyManager"), this.ownPrivateKey = null, this.ownPublicKey = null, this.peerPublicKey = null, this.sharedSecret = null;
  }
  async getOwnPublicKey() {
    return await this.loadKeysIfNeeded(), this.ownPublicKey;
  }
  // returns null if the shared secret is not yet derived
  async getSharedSecret() {
    return await this.loadKeysIfNeeded(), this.sharedSecret;
  }
  async setPeerPublicKey(e) {
    this.sharedSecret = null, this.peerPublicKey = e, await this.storeKey(Am, e), await this.loadKeysIfNeeded();
  }
  async clear() {
    this.ownPrivateKey = null, this.ownPublicKey = null, this.peerPublicKey = null, this.sharedSecret = null, this.storage.removeItem(Sm.storageKey), this.storage.removeItem(Em.storageKey), this.storage.removeItem(Am.storageKey);
  }
  async generateKeyPair() {
    const e = await XG();
    this.ownPrivateKey = e.privateKey, this.ownPublicKey = e.publicKey, await this.storeKey(Em, e.privateKey), await this.storeKey(Sm, e.publicKey);
  }
  async loadKeysIfNeeded() {
    if (this.ownPrivateKey === null && (this.ownPrivateKey = await this.loadKey(Em)), this.ownPublicKey === null && (this.ownPublicKey = await this.loadKey(Sm)), (this.ownPrivateKey === null || this.ownPublicKey === null) && await this.generateKeyPair(), this.peerPublicKey === null && (this.peerPublicKey = await this.loadKey(Am)), this.sharedSecret === null) {
      if (this.ownPrivateKey === null || this.peerPublicKey === null)
        return;
      this.sharedSecret = await ZG(this.ownPrivateKey, this.peerPublicKey);
    }
  }
  // storage methods
  async loadKey(e) {
    const r = this.storage.getItem(e.storageKey);
    return r ? kE(e.keyType, r) : null;
  }
  async storeKey(e, r) {
    const n = await LE(e.keyType, r);
    this.storage.setItem(e.storageKey, n);
  }
}
const nh = "4.2.4", $E = "@coinbase/wallet-sdk";
async function BE(t, e) {
  const r = Object.assign(Object.assign({}, t), { jsonrpc: "2.0", id: crypto.randomUUID() }), n = await window.fetch(e, {
    method: "POST",
    body: JSON.stringify(r),
    mode: "cors",
    headers: {
      "Content-Type": "application/json",
      "X-Cbw-Sdk-Version": nh,
      "X-Cbw-Sdk-Platform": $E
    }
  }), { result: i, error: s } = await n.json();
  if (s)
    throw s;
  return i;
}
function iY() {
  return globalThis.coinbaseWalletExtension;
}
function sY() {
  var t, e;
  try {
    const r = globalThis;
    return (t = r.ethereum) !== null && t !== void 0 ? t : (e = r.top) === null || e === void 0 ? void 0 : e.ethereum;
  } catch {
    return;
  }
}
function oY({ metadata: t, preference: e }) {
  var r, n;
  const { appName: i, appLogoUrl: s, appChainIds: o } = t;
  if (e.options !== "smartWalletOnly") {
    const u = iY();
    if (u)
      return (r = u.setAppInfo) === null || r === void 0 || r.call(u, i, s, o, e), u;
  }
  const a = sY();
  if (a != null && a.isCoinbaseBrowser)
    return (n = a.setAppInfo) === null || n === void 0 || n.call(a, i, s, o, e), a;
}
function aY(t) {
  if (!t || typeof t != "object" || Array.isArray(t))
    throw Sr.rpc.invalidParams({
      message: "Expected a single, non-array, object argument.",
      data: t
    });
  const { method: e, params: r } = t;
  if (typeof e != "string" || e.length === 0)
    throw Sr.rpc.invalidParams({
      message: "'args.method' must be a non-empty string.",
      data: t
    });
  if (r !== void 0 && !Array.isArray(r) && (typeof r != "object" || r === null))
    throw Sr.rpc.invalidParams({
      message: "'args.params' must be an object or array if provided.",
      data: t
    });
  switch (e) {
    case "eth_sign":
    case "eth_signTypedData_v2":
    case "eth_subscribe":
    case "eth_unsubscribe":
      throw Sr.provider.unsupportedMethod();
  }
}
const n6 = "accounts", i6 = "activeChain", s6 = "availableChains", o6 = "walletCapabilities";
class cY {
  constructor(e) {
    var r, n, i;
    this.metadata = e.metadata, this.communicator = e.communicator, this.callback = e.callback, this.keyManager = new nY(), this.storage = new eo("CBWSDK", "SCWStateManager"), this.accounts = (r = this.storage.loadObject(n6)) !== null && r !== void 0 ? r : [], this.chain = this.storage.loadObject(i6) || {
      id: (i = (n = e.metadata.appChainIds) === null || n === void 0 ? void 0 : n[0]) !== null && i !== void 0 ? i : 1
    }, this.handshake = this.handshake.bind(this), this.request = this.request.bind(this), this.createRequestMessage = this.createRequestMessage.bind(this), this.decryptResponseMessage = this.decryptResponseMessage.bind(this);
  }
  async handshake(e) {
    var r, n;
    const i = await this.createRequestMessage({
      handshake: {
        method: e.method,
        params: Object.assign({}, this.metadata, (r = e.params) !== null && r !== void 0 ? r : {})
      }
    }), s = await this.communicator.postRequestAndWaitForResponse(i);
    if ("failure" in s.content)
      throw s.content.failure;
    const o = await kE("public", s.sender);
    await this.keyManager.setPeerPublicKey(o);
    const u = (await this.decryptResponseMessage(s)).result;
    if ("error" in u)
      throw u.error;
    const l = u.value;
    this.accounts = l, this.storage.storeObject(n6, l), (n = this.callback) === null || n === void 0 || n.call(this, "accountsChanged", l);
  }
  async request(e) {
    var r;
    if (this.accounts.length === 0)
      throw Sr.provider.unauthorized();
    switch (e.method) {
      case "eth_requestAccounts":
        return (r = this.callback) === null || r === void 0 || r.call(this, "connect", { chainId: pa(this.chain.id) }), this.accounts;
      case "eth_accounts":
        return this.accounts;
      case "eth_coinbase":
        return this.accounts[0];
      case "net_version":
        return this.chain.id;
      case "eth_chainId":
        return pa(this.chain.id);
      case "wallet_getCapabilities":
        return this.storage.loadObject(o6);
      case "wallet_switchEthereumChain":
        return this.handleSwitchChainRequest(e);
      case "eth_ecRecover":
      case "personal_sign":
      case "personal_ecRecover":
      case "eth_signTransaction":
      case "eth_sendTransaction":
      case "eth_signTypedData_v1":
      case "eth_signTypedData_v3":
      case "eth_signTypedData_v4":
      case "eth_signTypedData":
      case "wallet_addEthereumChain":
      case "wallet_watchAsset":
      case "wallet_sendCalls":
      case "wallet_showCallsStatus":
      case "wallet_grantPermissions":
        return this.sendRequestToPopup(e);
      default:
        if (!this.chain.rpcUrl)
          throw Sr.rpc.internal("No RPC URL set for chain");
        return BE(e, this.chain.rpcUrl);
    }
  }
  async sendRequestToPopup(e) {
    var r, n;
    await ((n = (r = this.communicator).waitForPopupLoaded) === null || n === void 0 ? void 0 : n.call(r));
    const i = await this.sendEncryptedRequest(e), o = (await this.decryptResponseMessage(i)).result;
    if ("error" in o)
      throw o.error;
    return o.value;
  }
  async cleanup() {
    var e, r;
    this.storage.clear(), await this.keyManager.clear(), this.accounts = [], this.chain = {
      id: (r = (e = this.metadata.appChainIds) === null || e === void 0 ? void 0 : e[0]) !== null && r !== void 0 ? r : 1
    };
  }
  /**
   * @returns `null` if the request was successful.
   * https://eips.ethereum.org/EIPS/eip-3326#wallet_switchethereumchain
   */
  async handleSwitchChainRequest(e) {
    var r;
    const n = e.params;
    if (!n || !(!((r = n[0]) === null || r === void 0) && r.chainId))
      throw Sr.rpc.invalidParams();
    const i = Kf(n[0].chainId);
    if (this.updateChain(i))
      return null;
    const o = await this.sendRequestToPopup(e);
    return o === null && this.updateChain(i), o;
  }
  async sendEncryptedRequest(e) {
    const r = await this.keyManager.getSharedSecret();
    if (!r)
      throw Sr.provider.unauthorized("No valid session found, try requestAccounts before other methods");
    const n = await tY({
      action: e,
      chainId: this.chain.id
    }, r), i = await this.createRequestMessage({ encrypted: n });
    return this.communicator.postRequestAndWaitForResponse(i);
  }
  async createRequestMessage(e) {
    const r = await LE("public", await this.keyManager.getOwnPublicKey());
    return {
      id: crypto.randomUUID(),
      sender: r,
      content: e,
      timestamp: /* @__PURE__ */ new Date()
    };
  }
  async decryptResponseMessage(e) {
    var r, n;
    const i = e.content;
    if ("failure" in i)
      throw i.failure;
    const s = await this.keyManager.getSharedSecret();
    if (!s)
      throw Sr.provider.unauthorized("Invalid session");
    const o = await rY(i.encrypted, s), a = (r = o.data) === null || r === void 0 ? void 0 : r.chains;
    if (a) {
      const l = Object.entries(a).map(([d, p]) => ({
        id: Number(d),
        rpcUrl: p
      }));
      this.storage.storeObject(s6, l), this.updateChain(this.chain.id, l);
    }
    const u = (n = o.data) === null || n === void 0 ? void 0 : n.capabilities;
    return u && this.storage.storeObject(o6, u), o;
  }
  updateChain(e, r) {
    var n;
    const i = r ?? this.storage.loadObject(s6), s = i == null ? void 0 : i.find((o) => o.id === e);
    return s ? (s !== this.chain && (this.chain = s, this.storage.storeObject(i6, s), (n = this.callback) === null || n === void 0 || n.call(this, "chainChanged", pa(s.id))), !0) : !1;
  }
}
const uY = /* @__PURE__ */ bv(UD), { keccak_256: fY } = uY;
function FE(t) {
  return Buffer.allocUnsafe(t).fill(0);
}
function lY(t) {
  return t.toString(2).length;
}
function jE(t, e) {
  let r = t.toString(16);
  r.length % 2 !== 0 && (r = "0" + r);
  const n = r.match(/.{1,2}/g).map((i) => parseInt(i, 16));
  for (; n.length < e; )
    n.unshift(0);
  return Buffer.from(n);
}
function hY(t, e) {
  const r = t < 0n;
  let n;
  if (r) {
    const i = (1n << BigInt(e)) - 1n;
    n = (~t & i) + 1n;
  } else
    n = t;
  return n &= (1n << BigInt(e)) - 1n, n;
}
function UE(t, e, r) {
  const n = FE(e);
  return t = cp(t), r ? t.length < e ? (t.copy(n), n) : t.slice(0, e) : t.length < e ? (t.copy(n, e - t.length), n) : t.slice(-e);
}
function dY(t, e) {
  return UE(t, e, !0);
}
function cp(t) {
  if (!Buffer.isBuffer(t))
    if (Array.isArray(t))
      t = Buffer.from(t);
    else if (typeof t == "string")
      qE(t) ? t = Buffer.from(mY(zE(t)), "hex") : t = Buffer.from(t);
    else if (typeof t == "number")
      t = intToBuffer(t);
    else if (t == null)
      t = Buffer.allocUnsafe(0);
    else if (typeof t == "bigint")
      t = jE(t);
    else if (t.toArray)
      t = Buffer.from(t.toArray());
    else
      throw new Error("invalid type");
  return t;
}
function pY(t) {
  return t = cp(t), "0x" + t.toString("hex");
}
function gY(t, e) {
  if (t = cp(t), e || (e = 256), e !== 256)
    throw new Error("unsupported");
  return Buffer.from(fY(new Uint8Array(t)));
}
function mY(t) {
  return t.length % 2 ? "0" + t : t;
}
function qE(t) {
  return typeof t == "string" && t.match(/^0x[0-9A-Fa-f]*$/);
}
function zE(t) {
  return typeof t == "string" && t.startsWith("0x") ? t.slice(2) : t;
}
var WE = {
  zeros: FE,
  setLength: UE,
  setLengthRight: dY,
  isHexString: qE,
  stripHexPrefix: zE,
  toBuffer: cp,
  bufferToHex: pY,
  keccak: gY,
  bitLengthFromBigInt: lY,
  bufferBEFromBigInt: jE,
  twosFromBigInt: hY
};
const si = WE;
function HE(t) {
  return t.startsWith("int[") ? "int256" + t.slice(3) : t === "int" ? "int256" : t.startsWith("uint[") ? "uint256" + t.slice(4) : t === "uint" ? "uint256" : t.startsWith("fixed[") ? "fixed128x128" + t.slice(5) : t === "fixed" ? "fixed128x128" : t.startsWith("ufixed[") ? "ufixed128x128" + t.slice(6) : t === "ufixed" ? "ufixed128x128" : t;
}
function pu(t) {
  return Number.parseInt(/^\D+(\d+)$/.exec(t)[1], 10);
}
function a6(t) {
  var e = /^\D+(\d+)x(\d+)$/.exec(t);
  return [Number.parseInt(e[1], 10), Number.parseInt(e[2], 10)];
}
function KE(t) {
  var e = t.match(/(.*)\[(.*?)\]$/);
  return e ? e[2] === "" ? "dynamic" : Number.parseInt(e[2], 10) : null;
}
function ec(t) {
  var e = typeof t;
  if (e === "string" || e === "number")
    return BigInt(t);
  if (e === "bigint")
    return t;
  throw new Error("Argument is not a number");
}
function qs(t, e) {
  var r, n, i, s;
  if (t === "address")
    return qs("uint160", ec(e));
  if (t === "bool")
    return qs("uint8", e ? 1 : 0);
  if (t === "string")
    return qs("bytes", new Buffer(e, "utf8"));
  if (bY(t)) {
    if (typeof e.length > "u")
      throw new Error("Not an array?");
    if (r = KE(t), r !== "dynamic" && r !== 0 && e.length > r)
      throw new Error("Elements exceed array size: " + r);
    i = [], t = t.slice(0, t.lastIndexOf("[")), typeof e == "string" && (e = JSON.parse(e));
    for (s in e)
      i.push(qs(t, e[s]));
    if (r === "dynamic") {
      var o = qs("uint256", e.length);
      i.unshift(o);
    }
    return Buffer.concat(i);
  } else {
    if (t === "bytes")
      return e = new Buffer(e), i = Buffer.concat([qs("uint256", e.length), e]), e.length % 32 !== 0 && (i = Buffer.concat([i, si.zeros(32 - e.length % 32)])), i;
    if (t.startsWith("bytes")) {
      if (r = pu(t), r < 1 || r > 32)
        throw new Error("Invalid bytes<N> width: " + r);
      return si.setLengthRight(e, 32);
    } else if (t.startsWith("uint")) {
      if (r = pu(t), r % 8 || r < 8 || r > 256)
        throw new Error("Invalid uint<N> width: " + r);
      n = ec(e);
      const a = si.bitLengthFromBigInt(n);
      if (a > r)
        throw new Error("Supplied uint exceeds width: " + r + " vs " + a);
      if (n < 0)
        throw new Error("Supplied uint is negative");
      return si.bufferBEFromBigInt(n, 32);
    } else if (t.startsWith("int")) {
      if (r = pu(t), r % 8 || r < 8 || r > 256)
        throw new Error("Invalid int<N> width: " + r);
      n = ec(e);
      const a = si.bitLengthFromBigInt(n);
      if (a > r)
        throw new Error("Supplied int exceeds width: " + r + " vs " + a);
      const u = si.twosFromBigInt(n, 256);
      return si.bufferBEFromBigInt(u, 32);
    } else if (t.startsWith("ufixed")) {
      if (r = a6(t), n = ec(e), n < 0)
        throw new Error("Supplied ufixed is negative");
      return qs("uint256", n * BigInt(2) ** BigInt(r[1]));
    } else if (t.startsWith("fixed"))
      return r = a6(t), qs("int256", ec(e) * BigInt(2) ** BigInt(r[1]));
  }
  throw new Error("Unsupported or invalid type: " + t);
}
function vY(t) {
  return t === "string" || t === "bytes" || KE(t) === "dynamic";
}
function bY(t) {
  return t.lastIndexOf("]") === t.length - 1;
}
function yY(t, e) {
  var r = [], n = [], i = 32 * t.length;
  for (var s in t) {
    var o = HE(t[s]), a = e[s], u = qs(o, a);
    vY(o) ? (r.push(qs("uint256", i)), n.push(u), i += u.length) : r.push(u);
  }
  return Buffer.concat(r.concat(n));
}
function VE(t, e) {
  if (t.length !== e.length)
    throw new Error("Number of types are not matching the values");
  for (var r, n, i = [], s = 0; s < t.length; s++) {
    var o = HE(t[s]), a = e[s];
    if (o === "bytes")
      i.push(a);
    else if (o === "string")
      i.push(new Buffer(a, "utf8"));
    else if (o === "bool")
      i.push(new Buffer(a ? "01" : "00", "hex"));
    else if (o === "address")
      i.push(si.setLength(a, 20));
    else if (o.startsWith("bytes")) {
      if (r = pu(o), r < 1 || r > 32)
        throw new Error("Invalid bytes<N> width: " + r);
      i.push(si.setLengthRight(a, r));
    } else if (o.startsWith("uint")) {
      if (r = pu(o), r % 8 || r < 8 || r > 256)
        throw new Error("Invalid uint<N> width: " + r);
      n = ec(a);
      const u = si.bitLengthFromBigInt(n);
      if (u > r)
        throw new Error("Supplied uint exceeds width: " + r + " vs " + u);
      i.push(si.bufferBEFromBigInt(n, r / 8));
    } else if (o.startsWith("int")) {
      if (r = pu(o), r % 8 || r < 8 || r > 256)
        throw new Error("Invalid int<N> width: " + r);
      n = ec(a);
      const u = si.bitLengthFromBigInt(n);
      if (u > r)
        throw new Error("Supplied int exceeds width: " + r + " vs " + u);
      const l = si.twosFromBigInt(n, r);
      i.push(si.bufferBEFromBigInt(l, r / 8));
    } else
      throw new Error("Unsupported or invalid type: " + o);
  }
  return Buffer.concat(i);
}
function wY(t, e) {
  return si.keccak(VE(t, e));
}
var xY = {
  rawEncode: yY,
  solidityPack: VE,
  soliditySHA3: wY
};
const ys = WE, Vf = xY, GE = {
  type: "object",
  properties: {
    types: {
      type: "object",
      additionalProperties: {
        type: "array",
        items: {
          type: "object",
          properties: {
            name: { type: "string" },
            type: { type: "string" }
          },
          required: ["name", "type"]
        }
      }
    },
    primaryType: { type: "string" },
    domain: { type: "object" },
    message: { type: "object" }
  },
  required: ["types", "primaryType", "domain", "message"]
}, Pm = {
  /**
   * Encodes an object by encoding and concatenating each of its members
   *
   * @param {string} primaryType - Root type
   * @param {Object} data - Object to encode
   * @param {Object} types - Type definitions
   * @returns {string} - Encoded representation of an object
   */
  encodeData(t, e, r, n = !0) {
    const i = ["bytes32"], s = [this.hashType(t, r)];
    if (n) {
      const o = (a, u, l) => {
        if (r[u] !== void 0)
          return ["bytes32", l == null ? "0x0000000000000000000000000000000000000000000000000000000000000000" : ys.keccak(this.encodeData(u, l, r, n))];
        if (l === void 0)
          throw new Error(`missing value for field ${a} of type ${u}`);
        if (u === "bytes")
          return ["bytes32", ys.keccak(l)];
        if (u === "string")
          return typeof l == "string" && (l = Buffer.from(l, "utf8")), ["bytes32", ys.keccak(l)];
        if (u.lastIndexOf("]") === u.length - 1) {
          const d = u.slice(0, u.lastIndexOf("[")), p = l.map((w) => o(a, d, w));
          return ["bytes32", ys.keccak(Vf.rawEncode(
            p.map(([w]) => w),
            p.map(([, w]) => w)
          ))];
        }
        return [u, l];
      };
      for (const a of r[t]) {
        const [u, l] = o(a.name, a.type, e[a.name]);
        i.push(u), s.push(l);
      }
    } else
      for (const o of r[t]) {
        let a = e[o.name];
        if (a !== void 0)
          if (o.type === "bytes")
            i.push("bytes32"), a = ys.keccak(a), s.push(a);
          else if (o.type === "string")
            i.push("bytes32"), typeof a == "string" && (a = Buffer.from(a, "utf8")), a = ys.keccak(a), s.push(a);
          else if (r[o.type] !== void 0)
            i.push("bytes32"), a = ys.keccak(this.encodeData(o.type, a, r, n)), s.push(a);
          else {
            if (o.type.lastIndexOf("]") === o.type.length - 1)
              throw new Error("Arrays currently unimplemented in encodeData");
            i.push(o.type), s.push(a);
          }
      }
    return Vf.rawEncode(i, s);
  },
  /**
   * Encodes the type of an object by encoding a comma delimited list of its members
   *
   * @param {string} primaryType - Root type to encode
   * @param {Object} types - Type definitions
   * @returns {string} - Encoded representation of the type of an object
   */
  encodeType(t, e) {
    let r = "", n = this.findTypeDependencies(t, e).filter((i) => i !== t);
    n = [t].concat(n.sort());
    for (const i of n) {
      if (!e[i])
        throw new Error("No type definition specified: " + i);
      r += i + "(" + e[i].map(({ name: o, type: a }) => a + " " + o).join(",") + ")";
    }
    return r;
  },
  /**
   * Finds all types within a type definition object
   *
   * @param {string} primaryType - Root type
   * @param {Object} types - Type definitions
   * @param {Array} results - current set of accumulated types
   * @returns {Array} - Set of all types found in the type definition
   */
  findTypeDependencies(t, e, r = []) {
    if (t = t.match(/^\w*/)[0], r.includes(t) || e[t] === void 0)
      return r;
    r.push(t);
    for (const n of e[t])
      for (const i of this.findTypeDependencies(n.type, e, r))
        !r.includes(i) && r.push(i);
    return r;
  },
  /**
   * Hashes an object
   *
   * @param {string} primaryType - Root type
   * @param {Object} data - Object to hash
   * @param {Object} types - Type definitions
   * @returns {Buffer} - Hash of an object
   */
  hashStruct(t, e, r, n = !0) {
    return ys.keccak(this.encodeData(t, e, r, n));
  },
  /**
   * Hashes the type of an object
   *
   * @param {string} primaryType - Root type to hash
   * @param {Object} types - Type definitions
   * @returns {string} - Hash of an object
   */
  hashType(t, e) {
    return ys.keccak(this.encodeType(t, e));
  },
  /**
   * Removes properties from a message object that are not defined per EIP-712
   *
   * @param {Object} data - typed message object
   * @returns {Object} - typed message object with only allowed fields
   */
  sanitizeData(t) {
    const e = {};
    for (const r in GE.properties)
      t[r] && (e[r] = t[r]);
    return e.types && (e.types = Object.assign({ EIP712Domain: [] }, e.types)), e;
  },
  /**
   * Returns the hash of a typed message as per EIP-712 for signing
   *
   * @param {Object} typedData - Types message data to sign
   * @returns {string} - sha3 hash for signing
   */
  hash(t, e = !0) {
    const r = this.sanitizeData(t), n = [Buffer.from("1901", "hex")];
    return n.push(this.hashStruct("EIP712Domain", r.domain, r.types, e)), r.primaryType !== "EIP712Domain" && n.push(this.hashStruct(r.primaryType, r.message, r.types, e)), ys.keccak(Buffer.concat(n));
  }
};
var _Y = {
  TYPED_MESSAGE_SCHEMA: GE,
  TypedDataUtils: Pm,
  hashForSignTypedDataLegacy: function(t) {
    return EY(t.data);
  },
  hashForSignTypedData_v3: function(t) {
    return Pm.hash(t.data, !1);
  },
  hashForSignTypedData_v4: function(t) {
    return Pm.hash(t.data);
  }
};
function EY(t) {
  const e = new Error("Expect argument to be non-empty array");
  if (typeof t != "object" || !t.length) throw e;
  const r = t.map(function(s) {
    return s.type === "bytes" ? ys.toBuffer(s.value) : s.value;
  }), n = t.map(function(s) {
    return s.type;
  }), i = t.map(function(s) {
    if (!s.name) throw e;
    return s.type + " " + s.name;
  });
  return Vf.soliditySHA3(
    ["bytes32", "bytes32"],
    [
      Vf.soliditySHA3(new Array(t.length).fill("string"), i),
      Vf.soliditySHA3(n, r)
    ]
  );
}
const dd = /* @__PURE__ */ ts(_Y), SY = "walletUsername", $1 = "Addresses", AY = "AppVersion";
function jn(t) {
  return t.errorMessage !== void 0;
}
class PY {
  // @param secret hex representation of 32-byte secret
  constructor(e) {
    this.secret = e;
  }
  /**
   *
   * @param plainText string to be encrypted
   * returns hex string representation of bytes in the order: initialization vector (iv),
   * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes. Remaining bytes are the
   * encrypted plainText.
   */
  async encrypt(e) {
    const r = this.secret;
    if (r.length !== 64)
      throw Error("secret must be 256 bits");
    const n = crypto.getRandomValues(new Uint8Array(12)), i = await crypto.subtle.importKey("raw", Dd(r), { name: "aes-gcm" }, !1, ["encrypt", "decrypt"]), s = new TextEncoder(), o = await window.crypto.subtle.encrypt({
      name: "AES-GCM",
      iv: n
    }, i, s.encode(e)), a = 16, u = o.slice(o.byteLength - a), l = o.slice(0, o.byteLength - a), d = new Uint8Array(u), p = new Uint8Array(l), w = new Uint8Array([...n, ...d, ...p]);
    return mb(w);
  }
  /**
   *
   * @param cipherText hex string representation of bytes in the order: initialization vector (iv),
   * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes.
   */
  async decrypt(e) {
    const r = this.secret;
    if (r.length !== 64)
      throw Error("secret must be 256 bits");
    return new Promise((n, i) => {
      (async function() {
        const s = await crypto.subtle.importKey("raw", Dd(r), { name: "aes-gcm" }, !1, ["encrypt", "decrypt"]), o = Dd(e), a = o.slice(0, 12), u = o.slice(12, 28), l = o.slice(28), d = new Uint8Array([...l, ...u]), p = {
          name: "AES-GCM",
          iv: new Uint8Array(a)
        };
        try {
          const w = await window.crypto.subtle.decrypt(p, s, d), A = new TextDecoder();
          n(A.decode(w));
        } catch (w) {
          i(w);
        }
      })();
    });
  }
}
class MY {
  constructor(e, r, n) {
    this.linkAPIUrl = e, this.sessionId = r;
    const i = `${r}:${n}`;
    this.auth = `Basic ${btoa(i)}`;
  }
  // mark unseen events as seen
  async markUnseenEventsAsSeen(e) {
    return Promise.all(e.map((r) => fetch(`${this.linkAPIUrl}/events/${r.eventId}/seen`, {
      method: "POST",
      headers: {
        Authorization: this.auth
      }
    }))).catch((r) => console.error("Unabled to mark event as failed:", r));
  }
  async fetchUnseenEvents() {
    var e;
    const r = await fetch(`${this.linkAPIUrl}/events?unseen=true`, {
      headers: {
        Authorization: this.auth
      }
    });
    if (r.ok) {
      const { events: n, error: i } = await r.json();
      if (i)
        throw new Error(`Check unseen events failed: ${i}`);
      const s = (e = n == null ? void 0 : n.filter((o) => o.event === "Web3Response").map((o) => ({
        type: "Event",
        sessionId: this.sessionId,
        eventId: o.id,
        event: o.event,
        data: o.data
      }))) !== null && e !== void 0 ? e : [];
      return this.markUnseenEventsAsSeen(s), s;
    }
    throw new Error(`Check unseen events failed: ${r.status}`);
  }
}
var Po;
(function(t) {
  t[t.DISCONNECTED = 0] = "DISCONNECTED", t[t.CONNECTING = 1] = "CONNECTING", t[t.CONNECTED = 2] = "CONNECTED";
})(Po || (Po = {}));
class IY {
  setConnectionStateListener(e) {
    this.connectionStateListener = e;
  }
  setIncomingDataListener(e) {
    this.incomingDataListener = e;
  }
  /**
   * Constructor
   * @param url WebSocket server URL
   * @param [WebSocketClass] Custom WebSocket implementation
   */
  constructor(e, r = WebSocket) {
    this.WebSocketClass = r, this.webSocket = null, this.pendingData = [], this.url = e.replace(/^http/, "ws");
  }
  /**
   * Make a websocket connection
   * @returns a Promise that resolves when connected
   */
  async connect() {
    if (this.webSocket)
      throw new Error("webSocket object is not null");
    return new Promise((e, r) => {
      var n;
      let i;
      try {
        this.webSocket = i = new this.WebSocketClass(this.url);
      } catch (s) {
        r(s);
        return;
      }
      (n = this.connectionStateListener) === null || n === void 0 || n.call(this, Po.CONNECTING), i.onclose = (s) => {
        var o;
        this.clearWebSocket(), r(new Error(`websocket error ${s.code}: ${s.reason}`)), (o = this.connectionStateListener) === null || o === void 0 || o.call(this, Po.DISCONNECTED);
      }, i.onopen = (s) => {
        var o;
        e(), (o = this.connectionStateListener) === null || o === void 0 || o.call(this, Po.CONNECTED), this.pendingData.length > 0 && ([...this.pendingData].forEach((u) => this.sendData(u)), this.pendingData = []);
      }, i.onmessage = (s) => {
        var o, a;
        if (s.data === "h")
          (o = this.incomingDataListener) === null || o === void 0 || o.call(this, {
            type: "Heartbeat"
          });
        else
          try {
            const u = JSON.parse(s.data);
            (a = this.incomingDataListener) === null || a === void 0 || a.call(this, u);
          } catch {
          }
      };
    });
  }
  /**
   * Disconnect from server
   */
  disconnect() {
    var e;
    const { webSocket: r } = this;
    if (r) {
      this.clearWebSocket(), (e = this.connectionStateListener) === null || e === void 0 || e.call(this, Po.DISCONNECTED), this.connectionStateListener = void 0, this.incomingDataListener = void 0;
      try {
        r.close();
      } catch {
      }
    }
  }
  /**
   * Send data to server
   * @param data text to send
   */
  sendData(e) {
    const { webSocket: r } = this;
    if (!r) {
      this.pendingData.push(e), this.connect();
      return;
    }
    r.send(e);
  }
  clearWebSocket() {
    const { webSocket: e } = this;
    e && (this.webSocket = null, e.onclose = null, e.onerror = null, e.onmessage = null, e.onopen = null);
  }
}
const c6 = 1e4, CY = 6e4;
class TY {
  /**
   * Constructor
   * @param session Session
   * @param linkAPIUrl Coinbase Wallet link server URL
   * @param listener WalletLinkConnectionUpdateListener
   * @param [WebSocketClass] Custom WebSocket implementation
   */
  constructor({ session: e, linkAPIUrl: r, listener: n }) {
    this.destroyed = !1, this.lastHeartbeatResponse = 0, this.nextReqId = _o(1), this._connected = !1, this._linked = !1, this.shouldFetchUnseenEventsOnConnect = !1, this.requestResolutions = /* @__PURE__ */ new Map(), this.handleSessionMetadataUpdated = (s) => {
      if (!s)
        return;
      (/* @__PURE__ */ new Map([
        ["__destroyed", this.handleDestroyed],
        ["EthereumAddress", this.handleAccountUpdated],
        ["WalletUsername", this.handleWalletUsernameUpdated],
        ["AppVersion", this.handleAppVersionUpdated],
        [
          "ChainId",
          // ChainId and JsonRpcUrl are always updated together
          (a) => s.JsonRpcUrl && this.handleChainUpdated(a, s.JsonRpcUrl)
        ]
      ])).forEach((a, u) => {
        const l = s[u];
        l !== void 0 && a(l);
      });
    }, this.handleDestroyed = (s) => {
      var o;
      s === "1" && ((o = this.listener) === null || o === void 0 || o.resetAndReload());
    }, this.handleAccountUpdated = async (s) => {
      var o;
      const a = await this.cipher.decrypt(s);
      (o = this.listener) === null || o === void 0 || o.accountUpdated(a);
    }, this.handleMetadataUpdated = async (s, o) => {
      var a;
      const u = await this.cipher.decrypt(o);
      (a = this.listener) === null || a === void 0 || a.metadataUpdated(s, u);
    }, this.handleWalletUsernameUpdated = async (s) => {
      this.handleMetadataUpdated(SY, s);
    }, this.handleAppVersionUpdated = async (s) => {
      this.handleMetadataUpdated(AY, s);
    }, this.handleChainUpdated = async (s, o) => {
      var a;
      const u = await this.cipher.decrypt(s), l = await this.cipher.decrypt(o);
      (a = this.listener) === null || a === void 0 || a.chainUpdated(u, l);
    }, this.session = e, this.cipher = new PY(e.secret), this.listener = n;
    const i = new IY(`${r}/rpc`, WebSocket);
    i.setConnectionStateListener(async (s) => {
      let o = !1;
      switch (s) {
        case Po.DISCONNECTED:
          if (!this.destroyed) {
            const a = async () => {
              await new Promise((u) => setTimeout(u, 5e3)), this.destroyed || i.connect().catch(() => {
                a();
              });
            };
            a();
          }
          break;
        case Po.CONNECTED:
          o = await this.handleConnected(), this.updateLastHeartbeat(), setInterval(() => {
            this.heartbeat();
          }, c6), this.shouldFetchUnseenEventsOnConnect && this.fetchUnseenEventsAPI();
          break;
        case Po.CONNECTING:
          break;
      }
      this.connected !== o && (this.connected = o);
    }), i.setIncomingDataListener((s) => {
      var o;
      switch (s.type) {
        case "Heartbeat":
          this.updateLastHeartbeat();
          return;
        case "IsLinkedOK":
        case "Linked": {
          const a = s.type === "IsLinkedOK" ? s.linked : void 0;
          this.linked = a || s.onlineGuests > 0;
          break;
        }
        case "GetSessionConfigOK":
        case "SessionConfigUpdated": {
          this.handleSessionMetadataUpdated(s.metadata);
          break;
        }
        case "Event": {
          this.handleIncomingEvent(s);
          break;
        }
      }
      s.id !== void 0 && ((o = this.requestResolutions.get(s.id)) === null || o === void 0 || o(s));
    }), this.ws = i, this.http = new MY(r, e.id, e.key);
  }
  /**
   * Make a connection to the server
   */
  connect() {
    if (this.destroyed)
      throw new Error("instance is destroyed");
    this.ws.connect();
  }
  /**
   * Terminate connection, and mark as destroyed. To reconnect, create a new
   * instance of WalletSDKConnection
   */
  async destroy() {
    this.destroyed || (await this.makeRequest({
      type: "SetSessionConfig",
      id: _o(this.nextReqId++),
      sessionId: this.session.id,
      metadata: { __destroyed: "1" }
    }, { timeout: 1e3 }), this.destroyed = !0, this.ws.disconnect(), this.listener = void 0);
  }
  get connected() {
    return this._connected;
  }
  set connected(e) {
    this._connected = e;
  }
  get linked() {
    return this._linked;
  }
  set linked(e) {
    var r, n;
    this._linked = e, e && ((r = this.onceLinked) === null || r === void 0 || r.call(this)), (n = this.listener) === null || n === void 0 || n.linkedUpdated(e);
  }
  setOnceLinked(e) {
    return new Promise((r) => {
      this.linked ? e().then(r) : this.onceLinked = () => {
        e().then(r), this.onceLinked = void 0;
      };
    });
  }
  async handleIncomingEvent(e) {
    var r;
    if (e.type !== "Event" || e.event !== "Web3Response")
      return;
    const n = await this.cipher.decrypt(e.data), i = JSON.parse(n);
    if (i.type !== "WEB3_RESPONSE")
      return;
    const { id: s, response: o } = i;
    (r = this.listener) === null || r === void 0 || r.handleWeb3ResponseMessage(s, o);
  }
  async checkUnseenEvents() {
    if (!this.connected) {
      this.shouldFetchUnseenEventsOnConnect = !0;
      return;
    }
    await new Promise((e) => setTimeout(e, 250));
    try {
      await this.fetchUnseenEventsAPI();
    } catch (e) {
      console.error("Unable to check for unseen events", e);
    }
  }
  async fetchUnseenEventsAPI() {
    this.shouldFetchUnseenEventsOnConnect = !1, (await this.http.fetchUnseenEvents()).forEach((r) => this.handleIncomingEvent(r));
  }
  /**
   * Publish an event and emit event ID when successful
   * @param event event name
   * @param unencryptedData unencrypted event data
   * @param callWebhook whether the webhook should be invoked
   * @returns a Promise that emits event ID when successful
   */
  async publishEvent(e, r, n = !1) {
    const i = await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({}, r), { origin: location.origin, location: location.href, relaySource: "coinbaseWalletExtension" in window && window.coinbaseWalletExtension ? "injected_sdk" : "sdk" }))), s = {
      type: "PublishEvent",
      id: _o(this.nextReqId++),
      sessionId: this.session.id,
      event: e,
      data: i,
      callWebhook: n
    };
    return this.setOnceLinked(async () => {
      const o = await this.makeRequest(s);
      if (o.type === "Fail")
        throw new Error(o.error || "failed to publish event");
      return o.eventId;
    });
  }
  sendData(e) {
    this.ws.sendData(JSON.stringify(e));
  }
  updateLastHeartbeat() {
    this.lastHeartbeatResponse = Date.now();
  }
  heartbeat() {
    if (Date.now() - this.lastHeartbeatResponse > c6 * 2) {
      this.ws.disconnect();
      return;
    }
    try {
      this.ws.sendData("h");
    } catch {
    }
  }
  async makeRequest(e, r = { timeout: CY }) {
    const n = e.id;
    this.sendData(e);
    let i;
    return Promise.race([
      new Promise((s, o) => {
        i = window.setTimeout(() => {
          o(new Error(`request ${n} timed out`));
        }, r.timeout);
      }),
      new Promise((s) => {
        this.requestResolutions.set(n, (o) => {
          clearTimeout(i), s(o), this.requestResolutions.delete(n);
        });
      })
    ]);
  }
  async handleConnected() {
    return (await this.makeRequest({
      type: "HostSession",
      id: _o(this.nextReqId++),
      sessionId: this.session.id,
      sessionKey: this.session.key
    })).type === "Fail" ? !1 : (this.sendData({
      type: "IsLinked",
      id: _o(this.nextReqId++),
      sessionId: this.session.id
    }), this.sendData({
      type: "GetSessionConfig",
      id: _o(this.nextReqId++),
      sessionId: this.session.id
    }), !0);
  }
}
class RY {
  constructor() {
    this._nextRequestId = 0, this.callbacks = /* @__PURE__ */ new Map();
  }
  makeRequestId() {
    this._nextRequestId = (this._nextRequestId + 1) % 2147483647;
    const e = this._nextRequestId, r = OE(e.toString(16));
    return this.callbacks.get(r) && this.callbacks.delete(r), e;
  }
}
const u6 = "session:id", f6 = "session:secret", l6 = "session:linked";
class gu {
  constructor(e, r, n, i = !1) {
    this.storage = e, this.id = r, this.secret = n, this.key = _D(r4(`${r}, ${n} WalletLink`)), this._linked = !!i;
  }
  static create(e) {
    const r = Qa(16), n = Qa(32);
    return new gu(e, r, n).save();
  }
  static load(e) {
    const r = e.getItem(u6), n = e.getItem(l6), i = e.getItem(f6);
    return r && i ? new gu(e, r, i, n === "1") : null;
  }
  get linked() {
    return this._linked;
  }
  set linked(e) {
    this._linked = e, this.persistLinked();
  }
  save() {
    return this.storage.setItem(u6, this.id), this.storage.setItem(f6, this.secret), this.persistLinked(), this;
  }
  persistLinked() {
    this.storage.setItem(l6, this._linked ? "1" : "0");
  }
}
function DY() {
  try {
    return window.frameElement !== null;
  } catch {
    return !1;
  }
}
function OY() {
  try {
    return DY() && window.top ? window.top.location : window.location;
  } catch {
    return window.location;
  }
}
function NY() {
  var t;
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((t = window == null ? void 0 : window.navigator) === null || t === void 0 ? void 0 : t.userAgent);
}
function YE() {
  var t, e;
  return (e = (t = window == null ? void 0 : window.matchMedia) === null || t === void 0 ? void 0 : t.call(window, "(prefers-color-scheme: dark)").matches) !== null && e !== void 0 ? e : !1;
}
const LY = '@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';
function JE() {
  const t = document.createElement("style");
  t.type = "text/css", t.appendChild(document.createTextNode(LY)), document.documentElement.appendChild(t);
}
function XE(t) {
  var e, r, n = "";
  if (typeof t == "string" || typeof t == "number") n += t;
  else if (typeof t == "object") if (Array.isArray(t)) for (e = 0; e < t.length; e++) t[e] && (r = XE(t[e])) && (n && (n += " "), n += r);
  else for (e in t) t[e] && (n && (n += " "), n += e);
  return n;
}
function Gf() {
  for (var t, e, r = 0, n = ""; r < arguments.length; ) (t = arguments[r++]) && (e = XE(t)) && (n && (n += " "), n += e);
  return n;
}
var up, Jr, ZE, tc, h6, QE, B1, eS, yb, F1, j1, Pl = {}, tS = [], kY = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, wb = Array.isArray;
function ga(t, e) {
  for (var r in e) t[r] = e[r];
  return t;
}
function xb(t) {
  t && t.parentNode && t.parentNode.removeChild(t);
}
function Nr(t, e, r) {
  var n, i, s, o = {};
  for (s in e) s == "key" ? n = e[s] : s == "ref" ? i = e[s] : o[s] = e[s];
  if (arguments.length > 2 && (o.children = arguments.length > 3 ? up.call(arguments, 2) : r), typeof t == "function" && t.defaultProps != null) for (s in t.defaultProps) o[s] === void 0 && (o[s] = t.defaultProps[s]);
  return Od(t, o, n, i, null);
}
function Od(t, e, r, n, i) {
  var s = { type: t, props: e, key: r, ref: n, __k: null, __: null, __b: 0, __e: null, __c: null, constructor: void 0, __v: i ?? ++ZE, __i: -1, __u: 0 };
  return i == null && Jr.vnode != null && Jr.vnode(s), s;
}
function ih(t) {
  return t.children;
}
function Nd(t, e) {
  this.props = t, this.context = e;
}
function Pu(t, e) {
  if (e == null) return t.__ ? Pu(t.__, t.__i + 1) : null;
  for (var r; e < t.__k.length; e++) if ((r = t.__k[e]) != null && r.__e != null) return r.__e;
  return typeof t.type == "function" ? Pu(t) : null;
}
function rS(t) {
  var e, r;
  if ((t = t.__) != null && t.__c != null) {
    for (t.__e = t.__c.base = null, e = 0; e < t.__k.length; e++) if ((r = t.__k[e]) != null && r.__e != null) {
      t.__e = t.__c.base = r.__e;
      break;
    }
    return rS(t);
  }
}
function d6(t) {
  (!t.__d && (t.__d = !0) && tc.push(t) && !d0.__r++ || h6 !== Jr.debounceRendering) && ((h6 = Jr.debounceRendering) || QE)(d0);
}
function d0() {
  var t, e, r, n, i, s, o, a;
  for (tc.sort(B1); t = tc.shift(); ) t.__d && (e = tc.length, n = void 0, s = (i = (r = t).__v).__e, o = [], a = [], r.__P && ((n = ga({}, i)).__v = i.__v + 1, Jr.vnode && Jr.vnode(n), _b(r.__P, n, i, r.__n, r.__P.namespaceURI, 32 & i.__u ? [s] : null, o, s ?? Pu(i), !!(32 & i.__u), a), n.__v = i.__v, n.__.__k[n.__i] = n, sS(o, n, a), n.__e != s && rS(n)), tc.length > e && tc.sort(B1));
  d0.__r = 0;
}
function nS(t, e, r, n, i, s, o, a, u, l, d) {
  var p, w, A, M, N, L, B = n && n.__k || tS, $ = e.length;
  for (u = $Y(r, e, B, u), p = 0; p < $; p++) (A = r.__k[p]) != null && (w = A.__i === -1 ? Pl : B[A.__i] || Pl, A.__i = p, L = _b(t, A, w, i, s, o, a, u, l, d), M = A.__e, A.ref && w.ref != A.ref && (w.ref && Eb(w.ref, null, A), d.push(A.ref, A.__c || M, A)), N == null && M != null && (N = M), 4 & A.__u || w.__k === A.__k ? u = iS(A, u, t) : typeof A.type == "function" && L !== void 0 ? u = L : M && (u = M.nextSibling), A.__u &= -7);
  return r.__e = N, u;
}
function $Y(t, e, r, n) {
  var i, s, o, a, u, l = e.length, d = r.length, p = d, w = 0;
  for (t.__k = [], i = 0; i < l; i++) (s = e[i]) != null && typeof s != "boolean" && typeof s != "function" ? (a = i + w, (s = t.__k[i] = typeof s == "string" || typeof s == "number" || typeof s == "bigint" || s.constructor == String ? Od(null, s, null, null, null) : wb(s) ? Od(ih, { children: s }, null, null, null) : s.constructor === void 0 && s.__b > 0 ? Od(s.type, s.props, s.key, s.ref ? s.ref : null, s.__v) : s).__ = t, s.__b = t.__b + 1, o = null, (u = s.__i = BY(s, r, a, p)) !== -1 && (p--, (o = r[u]) && (o.__u |= 2)), o == null || o.__v === null ? (u == -1 && w--, typeof s.type != "function" && (s.__u |= 4)) : u !== a && (u == a - 1 ? w-- : u == a + 1 ? w++ : (u > a ? w-- : w++, s.__u |= 4))) : s = t.__k[i] = null;
  if (p) for (i = 0; i < d; i++) (o = r[i]) != null && !(2 & o.__u) && (o.__e == n && (n = Pu(o)), oS(o, o));
  return n;
}
function iS(t, e, r) {
  var n, i;
  if (typeof t.type == "function") {
    for (n = t.__k, i = 0; n && i < n.length; i++) n[i] && (n[i].__ = t, e = iS(n[i], e, r));
    return e;
  }
  t.__e != e && (e && t.type && !r.contains(e) && (e = Pu(t)), r.insertBefore(t.__e, e || null), e = t.__e);
  do
    e = e && e.nextSibling;
  while (e != null && e.nodeType === 8);
  return e;
}
function BY(t, e, r, n) {
  var i = t.key, s = t.type, o = r - 1, a = r + 1, u = e[r];
  if (u === null || u && i == u.key && s === u.type && !(2 & u.__u)) return r;
  if ((typeof s != "function" || s === ih || i) && n > (u != null && !(2 & u.__u) ? 1 : 0)) for (; o >= 0 || a < e.length; ) {
    if (o >= 0) {
      if ((u = e[o]) && !(2 & u.__u) && i == u.key && s === u.type) return o;
      o--;
    }
    if (a < e.length) {
      if ((u = e[a]) && !(2 & u.__u) && i == u.key && s === u.type) return a;
      a++;
    }
  }
  return -1;
}
function p6(t, e, r) {
  e[0] === "-" ? t.setProperty(e, r ?? "") : t[e] = r == null ? "" : typeof r != "number" || kY.test(e) ? r : r + "px";
}
function pd(t, e, r, n, i) {
  var s;
  e: if (e === "style") if (typeof r == "string") t.style.cssText = r;
  else {
    if (typeof n == "string" && (t.style.cssText = n = ""), n) for (e in n) r && e in r || p6(t.style, e, "");
    if (r) for (e in r) n && r[e] === n[e] || p6(t.style, e, r[e]);
  }
  else if (e[0] === "o" && e[1] === "n") s = e !== (e = e.replace(eS, "$1")), e = e.toLowerCase() in t || e === "onFocusOut" || e === "onFocusIn" ? e.toLowerCase().slice(2) : e.slice(2), t.l || (t.l = {}), t.l[e + s] = r, r ? n ? r.u = n.u : (r.u = yb, t.addEventListener(e, s ? j1 : F1, s)) : t.removeEventListener(e, s ? j1 : F1, s);
  else {
    if (i == "http://www.w3.org/2000/svg") e = e.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
    else if (e != "width" && e != "height" && e != "href" && e != "list" && e != "form" && e != "tabIndex" && e != "download" && e != "rowSpan" && e != "colSpan" && e != "role" && e != "popover" && e in t) try {
      t[e] = r ?? "";
      break e;
    } catch {
    }
    typeof r == "function" || (r == null || r === !1 && e[4] !== "-" ? t.removeAttribute(e) : t.setAttribute(e, e == "popover" && r == 1 ? "" : r));
  }
}
function g6(t) {
  return function(e) {
    if (this.l) {
      var r = this.l[e.type + t];
      if (e.t == null) e.t = yb++;
      else if (e.t < r.u) return;
      return r(Jr.event ? Jr.event(e) : e);
    }
  };
}
function _b(t, e, r, n, i, s, o, a, u, l) {
  var d, p, w, A, M, N, L, B, $, H, W, V, te, R, K, ge, Ee, Y = e.type;
  if (e.constructor !== void 0) return null;
  128 & r.__u && (u = !!(32 & r.__u), s = [a = e.__e = r.__e]), (d = Jr.__b) && d(e);
  e: if (typeof Y == "function") try {
    if (B = e.props, $ = "prototype" in Y && Y.prototype.render, H = (d = Y.contextType) && n[d.__c], W = d ? H ? H.props.value : d.__ : n, r.__c ? L = (p = e.__c = r.__c).__ = p.__E : ($ ? e.__c = p = new Y(B, W) : (e.__c = p = new Nd(B, W), p.constructor = Y, p.render = jY), H && H.sub(p), p.props = B, p.state || (p.state = {}), p.context = W, p.__n = n, w = p.__d = !0, p.__h = [], p._sb = []), $ && p.__s == null && (p.__s = p.state), $ && Y.getDerivedStateFromProps != null && (p.__s == p.state && (p.__s = ga({}, p.__s)), ga(p.__s, Y.getDerivedStateFromProps(B, p.__s))), A = p.props, M = p.state, p.__v = e, w) $ && Y.getDerivedStateFromProps == null && p.componentWillMount != null && p.componentWillMount(), $ && p.componentDidMount != null && p.__h.push(p.componentDidMount);
    else {
      if ($ && Y.getDerivedStateFromProps == null && B !== A && p.componentWillReceiveProps != null && p.componentWillReceiveProps(B, W), !p.__e && (p.shouldComponentUpdate != null && p.shouldComponentUpdate(B, p.__s, W) === !1 || e.__v === r.__v)) {
        for (e.__v !== r.__v && (p.props = B, p.state = p.__s, p.__d = !1), e.__e = r.__e, e.__k = r.__k, e.__k.some(function(S) {
          S && (S.__ = e);
        }), V = 0; V < p._sb.length; V++) p.__h.push(p._sb[V]);
        p._sb = [], p.__h.length && o.push(p);
        break e;
      }
      p.componentWillUpdate != null && p.componentWillUpdate(B, p.__s, W), $ && p.componentDidUpdate != null && p.__h.push(function() {
        p.componentDidUpdate(A, M, N);
      });
    }
    if (p.context = W, p.props = B, p.__P = t, p.__e = !1, te = Jr.__r, R = 0, $) {
      for (p.state = p.__s, p.__d = !1, te && te(e), d = p.render(p.props, p.state, p.context), K = 0; K < p._sb.length; K++) p.__h.push(p._sb[K]);
      p._sb = [];
    } else do
      p.__d = !1, te && te(e), d = p.render(p.props, p.state, p.context), p.state = p.__s;
    while (p.__d && ++R < 25);
    p.state = p.__s, p.getChildContext != null && (n = ga(ga({}, n), p.getChildContext())), $ && !w && p.getSnapshotBeforeUpdate != null && (N = p.getSnapshotBeforeUpdate(A, M)), a = nS(t, wb(ge = d != null && d.type === ih && d.key == null ? d.props.children : d) ? ge : [ge], e, r, n, i, s, o, a, u, l), p.base = e.__e, e.__u &= -161, p.__h.length && o.push(p), L && (p.__E = p.__ = null);
  } catch (S) {
    if (e.__v = null, u || s != null) if (S.then) {
      for (e.__u |= u ? 160 : 128; a && a.nodeType === 8 && a.nextSibling; ) a = a.nextSibling;
      s[s.indexOf(a)] = null, e.__e = a;
    } else for (Ee = s.length; Ee--; ) xb(s[Ee]);
    else e.__e = r.__e, e.__k = r.__k;
    Jr.__e(S, e, r);
  }
  else s == null && e.__v === r.__v ? (e.__k = r.__k, e.__e = r.__e) : a = e.__e = FY(r.__e, e, r, n, i, s, o, u, l);
  return (d = Jr.diffed) && d(e), 128 & e.__u ? void 0 : a;
}
function sS(t, e, r) {
  for (var n = 0; n < r.length; n++) Eb(r[n], r[++n], r[++n]);
  Jr.__c && Jr.__c(e, t), t.some(function(i) {
    try {
      t = i.__h, i.__h = [], t.some(function(s) {
        s.call(i);
      });
    } catch (s) {
      Jr.__e(s, i.__v);
    }
  });
}
function FY(t, e, r, n, i, s, o, a, u) {
  var l, d, p, w, A, M, N, L = r.props, B = e.props, $ = e.type;
  if ($ === "svg" ? i = "http://www.w3.org/2000/svg" : $ === "math" ? i = "http://www.w3.org/1998/Math/MathML" : i || (i = "http://www.w3.org/1999/xhtml"), s != null) {
    for (l = 0; l < s.length; l++) if ((A = s[l]) && "setAttribute" in A == !!$ && ($ ? A.localName === $ : A.nodeType === 3)) {
      t = A, s[l] = null;
      break;
    }
  }
  if (t == null) {
    if ($ === null) return document.createTextNode(B);
    t = document.createElementNS(i, $, B.is && B), a && (Jr.__m && Jr.__m(e, s), a = !1), s = null;
  }
  if ($ === null) L === B || a && t.data === B || (t.data = B);
  else {
    if (s = s && up.call(t.childNodes), L = r.props || Pl, !a && s != null) for (L = {}, l = 0; l < t.attributes.length; l++) L[(A = t.attributes[l]).name] = A.value;
    for (l in L) if (A = L[l], l != "children") {
      if (l == "dangerouslySetInnerHTML") p = A;
      else if (!(l in B)) {
        if (l == "value" && "defaultValue" in B || l == "checked" && "defaultChecked" in B) continue;
        pd(t, l, null, A, i);
      }
    }
    for (l in B) A = B[l], l == "children" ? w = A : l == "dangerouslySetInnerHTML" ? d = A : l == "value" ? M = A : l == "checked" ? N = A : a && typeof A != "function" || L[l] === A || pd(t, l, A, L[l], i);
    if (d) a || p && (d.__html === p.__html || d.__html === t.innerHTML) || (t.innerHTML = d.__html), e.__k = [];
    else if (p && (t.innerHTML = ""), nS(t, wb(w) ? w : [w], e, r, n, $ === "foreignObject" ? "http://www.w3.org/1999/xhtml" : i, s, o, s ? s[0] : r.__k && Pu(r, 0), a, u), s != null) for (l = s.length; l--; ) xb(s[l]);
    a || (l = "value", $ === "progress" && M == null ? t.removeAttribute("value") : M !== void 0 && (M !== t[l] || $ === "progress" && !M || $ === "option" && M !== L[l]) && pd(t, l, M, L[l], i), l = "checked", N !== void 0 && N !== t[l] && pd(t, l, N, L[l], i));
  }
  return t;
}
function Eb(t, e, r) {
  try {
    if (typeof t == "function") {
      var n = typeof t.__u == "function";
      n && t.__u(), n && e == null || (t.__u = t(e));
    } else t.current = e;
  } catch (i) {
    Jr.__e(i, r);
  }
}
function oS(t, e, r) {
  var n, i;
  if (Jr.unmount && Jr.unmount(t), (n = t.ref) && (n.current && n.current !== t.__e || Eb(n, null, e)), (n = t.__c) != null) {
    if (n.componentWillUnmount) try {
      n.componentWillUnmount();
    } catch (s) {
      Jr.__e(s, e);
    }
    n.base = n.__P = null;
  }
  if (n = t.__k) for (i = 0; i < n.length; i++) n[i] && oS(n[i], e, r || typeof t.type != "function");
  r || xb(t.__e), t.__c = t.__ = t.__e = void 0;
}
function jY(t, e, r) {
  return this.constructor(t, r);
}
function U1(t, e, r) {
  var n, i, s, o;
  e === document && (e = document.documentElement), Jr.__ && Jr.__(t, e), i = (n = typeof r == "function") ? null : e.__k, s = [], o = [], _b(e, t = (!n && r || e).__k = Nr(ih, null, [t]), i || Pl, Pl, e.namespaceURI, !n && r ? [r] : i ? null : e.firstChild ? up.call(e.childNodes) : null, s, !n && r ? r : i ? i.__e : e.firstChild, n, o), sS(s, t, o);
}
up = tS.slice, Jr = { __e: function(t, e, r, n) {
  for (var i, s, o; e = e.__; ) if ((i = e.__c) && !i.__) try {
    if ((s = i.constructor) && s.getDerivedStateFromError != null && (i.setState(s.getDerivedStateFromError(t)), o = i.__d), i.componentDidCatch != null && (i.componentDidCatch(t, n || {}), o = i.__d), o) return i.__E = i;
  } catch (a) {
    t = a;
  }
  throw t;
} }, ZE = 0, Nd.prototype.setState = function(t, e) {
  var r;
  r = this.__s != null && this.__s !== this.state ? this.__s : this.__s = ga({}, this.state), typeof t == "function" && (t = t(ga({}, r), this.props)), t && ga(r, t), t != null && this.__v && (e && this._sb.push(e), d6(this));
}, Nd.prototype.forceUpdate = function(t) {
  this.__v && (this.__e = !0, t && this.__h.push(t), d6(this));
}, Nd.prototype.render = ih, tc = [], QE = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, B1 = function(t, e) {
  return t.__v.__b - e.__v.__b;
}, d0.__r = 0, eS = /(PointerCapture)$|Capture$/i, yb = 0, F1 = g6(!1), j1 = g6(!0);
var p0, pn, Mm, m6, q1 = 0, aS = [], yn = Jr, v6 = yn.__b, b6 = yn.__r, y6 = yn.diffed, w6 = yn.__c, x6 = yn.unmount, _6 = yn.__;
function cS(t, e) {
  yn.__h && yn.__h(pn, t, q1 || e), q1 = 0;
  var r = pn.__H || (pn.__H = { __: [], __h: [] });
  return t >= r.__.length && r.__.push({}), r.__[t];
}
function E6(t) {
  return q1 = 1, UY(uS, t);
}
function UY(t, e, r) {
  var n = cS(p0++, 2);
  if (n.t = t, !n.__c && (n.__ = [uS(void 0, e), function(a) {
    var u = n.__N ? n.__N[0] : n.__[0], l = n.t(u, a);
    u !== l && (n.__N = [l, n.__[1]], n.__c.setState({}));
  }], n.__c = pn, !pn.u)) {
    var i = function(a, u, l) {
      if (!n.__c.__H) return !0;
      var d = n.__c.__H.__.filter(function(w) {
        return !!w.__c;
      });
      if (d.every(function(w) {
        return !w.__N;
      })) return !s || s.call(this, a, u, l);
      var p = n.__c.props !== a;
      return d.forEach(function(w) {
        if (w.__N) {
          var A = w.__[0];
          w.__ = w.__N, w.__N = void 0, A !== w.__[0] && (p = !0);
        }
      }), s && s.call(this, a, u, l) || p;
    };
    pn.u = !0;
    var s = pn.shouldComponentUpdate, o = pn.componentWillUpdate;
    pn.componentWillUpdate = function(a, u, l) {
      if (this.__e) {
        var d = s;
        s = void 0, i(a, u, l), s = d;
      }
      o && o.call(this, a, u, l);
    }, pn.shouldComponentUpdate = i;
  }
  return n.__N || n.__;
}
function qY(t, e) {
  var r = cS(p0++, 3);
  !yn.__s && HY(r.__H, e) && (r.__ = t, r.i = e, pn.__H.__h.push(r));
}
function zY() {
  for (var t; t = aS.shift(); ) if (t.__P && t.__H) try {
    t.__H.__h.forEach(Ld), t.__H.__h.forEach(z1), t.__H.__h = [];
  } catch (e) {
    t.__H.__h = [], yn.__e(e, t.__v);
  }
}
yn.__b = function(t) {
  pn = null, v6 && v6(t);
}, yn.__ = function(t, e) {
  t && e.__k && e.__k.__m && (t.__m = e.__k.__m), _6 && _6(t, e);
}, yn.__r = function(t) {
  b6 && b6(t), p0 = 0;
  var e = (pn = t.__c).__H;
  e && (Mm === pn ? (e.__h = [], pn.__h = [], e.__.forEach(function(r) {
    r.__N && (r.__ = r.__N), r.i = r.__N = void 0;
  })) : (e.__h.forEach(Ld), e.__h.forEach(z1), e.__h = [], p0 = 0)), Mm = pn;
}, yn.diffed = function(t) {
  y6 && y6(t);
  var e = t.__c;
  e && e.__H && (e.__H.__h.length && (aS.push(e) !== 1 && m6 === yn.requestAnimationFrame || ((m6 = yn.requestAnimationFrame) || WY)(zY)), e.__H.__.forEach(function(r) {
    r.i && (r.__H = r.i), r.i = void 0;
  })), Mm = pn = null;
}, yn.__c = function(t, e) {
  e.some(function(r) {
    try {
      r.__h.forEach(Ld), r.__h = r.__h.filter(function(n) {
        return !n.__ || z1(n);
      });
    } catch (n) {
      e.some(function(i) {
        i.__h && (i.__h = []);
      }), e = [], yn.__e(n, r.__v);
    }
  }), w6 && w6(t, e);
}, yn.unmount = function(t) {
  x6 && x6(t);
  var e, r = t.__c;
  r && r.__H && (r.__H.__.forEach(function(n) {
    try {
      Ld(n);
    } catch (i) {
      e = i;
    }
  }), r.__H = void 0, e && yn.__e(e, r.__v));
};
var S6 = typeof requestAnimationFrame == "function";
function WY(t) {
  var e, r = function() {
    clearTimeout(n), S6 && cancelAnimationFrame(e), setTimeout(t);
  }, n = setTimeout(r, 100);
  S6 && (e = requestAnimationFrame(r));
}
function Ld(t) {
  var e = pn, r = t.__c;
  typeof r == "function" && (t.__c = void 0, r()), pn = e;
}
function z1(t) {
  var e = pn;
  t.__c = t.__(), pn = e;
}
function HY(t, e) {
  return !t || t.length !== e.length || e.some(function(r, n) {
    return r !== t[n];
  });
}
function uS(t, e) {
  return typeof e == "function" ? e(t) : e;
}
const KY = ".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}", VY = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+", GY = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";
class YY {
  constructor() {
    this.items = /* @__PURE__ */ new Map(), this.nextItemKey = 0, this.root = null, this.darkMode = YE();
  }
  attach(e) {
    this.root = document.createElement("div"), this.root.className = "-cbwsdk-snackbar-root", e.appendChild(this.root), this.render();
  }
  presentItem(e) {
    const r = this.nextItemKey++;
    return this.items.set(r, e), this.render(), () => {
      this.items.delete(r), this.render();
    };
  }
  clear() {
    this.items.clear(), this.render();
  }
  render() {
    this.root && U1(Nr(
      "div",
      null,
      Nr(fS, { darkMode: this.darkMode }, Array.from(this.items.entries()).map(([e, r]) => Nr(JY, Object.assign({}, r, { key: e }))))
    ), this.root);
  }
}
const fS = (t) => Nr(
  "div",
  { class: Gf("-cbwsdk-snackbar-container") },
  Nr("style", null, KY),
  Nr("div", { class: "-cbwsdk-snackbar" }, t.children)
), JY = ({ autoExpand: t, message: e, menuItems: r }) => {
  const [n, i] = E6(!0), [s, o] = E6(t ?? !1);
  qY(() => {
    const u = [
      window.setTimeout(() => {
        i(!1);
      }, 1),
      window.setTimeout(() => {
        o(!0);
      }, 1e4)
    ];
    return () => {
      u.forEach(window.clearTimeout);
    };
  });
  const a = () => {
    o(!s);
  };
  return Nr(
    "div",
    { class: Gf("-cbwsdk-snackbar-instance", n && "-cbwsdk-snackbar-instance-hidden", s && "-cbwsdk-snackbar-instance-expanded") },
    Nr(
      "div",
      { class: "-cbwsdk-snackbar-instance-header", onClick: a },
      Nr("img", { src: VY, class: "-cbwsdk-snackbar-instance-header-cblogo" }),
      " ",
      Nr("div", { class: "-cbwsdk-snackbar-instance-header-message" }, e),
      Nr(
        "div",
        { class: "-gear-container" },
        !s && Nr(
          "svg",
          { width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
          Nr("circle", { cx: "12", cy: "12", r: "12", fill: "#F5F7F8" })
        ),
        Nr("img", { src: GY, class: "-gear-icon", title: "Expand" })
      )
    ),
    r && r.length > 0 && Nr("div", { class: "-cbwsdk-snackbar-instance-menu" }, r.map((u, l) => Nr(
      "div",
      { class: Gf("-cbwsdk-snackbar-instance-menu-item", u.isRed && "-cbwsdk-snackbar-instance-menu-item-is-red"), onClick: u.onClick, key: l },
      Nr(
        "svg",
        { width: u.svgWidth, height: u.svgHeight, viewBox: "0 0 10 11", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
        Nr("path", { "fill-rule": u.defaultFillRule, "clip-rule": u.defaultClipRule, d: u.path, fill: "#AAAAAA" })
      ),
      Nr("span", { class: Gf("-cbwsdk-snackbar-instance-menu-item-info", u.isRed && "-cbwsdk-snackbar-instance-menu-item-info-is-red") }, u.info)
    )))
  );
};
class XY {
  constructor() {
    this.attached = !1, this.snackbar = new YY();
  }
  attach() {
    if (this.attached)
      throw new Error("Coinbase Wallet SDK UI is already attached");
    const e = document.documentElement, r = document.createElement("div");
    r.className = "-cbwsdk-css-reset", e.appendChild(r), this.snackbar.attach(r), this.attached = !0, JE();
  }
  showConnecting(e) {
    let r;
    return e.isUnlinkedErrorState ? r = {
      autoExpand: !0,
      message: "Connection lost",
      menuItems: [
        {
          isRed: !1,
          info: "Reset connection",
          svgWidth: "10",
          svgHeight: "11",
          path: "M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",
          defaultFillRule: "evenodd",
          defaultClipRule: "evenodd",
          onClick: e.onResetConnection
        }
      ]
    } : r = {
      message: "Confirm on phone",
      menuItems: [
        {
          isRed: !0,
          info: "Cancel transaction",
          svgWidth: "11",
          svgHeight: "11",
          path: "M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",
          defaultFillRule: "inherit",
          defaultClipRule: "inherit",
          onClick: e.onCancel
        },
        {
          isRed: !1,
          info: "Reset connection",
          svgWidth: "10",
          svgHeight: "11",
          path: "M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",
          defaultFillRule: "evenodd",
          defaultClipRule: "evenodd",
          onClick: e.onResetConnection
        }
      ]
    }, this.snackbar.presentItem(r);
  }
}
const ZY = ".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";
class QY {
  constructor() {
    this.root = null, this.darkMode = YE();
  }
  attach() {
    const e = document.documentElement;
    this.root = document.createElement("div"), this.root.className = "-cbwsdk-css-reset", e.appendChild(this.root), JE();
  }
  present(e) {
    this.render(e);
  }
  clear() {
    this.render(null);
  }
  render(e) {
    this.root && (U1(null, this.root), e && U1(Nr(eJ, Object.assign({}, e, { onDismiss: () => {
      this.clear();
    }, darkMode: this.darkMode })), this.root));
  }
}
const eJ = ({ title: t, buttonText: e, darkMode: r, onButtonClick: n, onDismiss: i }) => {
  const s = r ? "dark" : "light";
  return Nr(
    fS,
    { darkMode: r },
    Nr(
      "div",
      { class: "-cbwsdk-redirect-dialog" },
      Nr("style", null, ZY),
      Nr("div", { class: "-cbwsdk-redirect-dialog-backdrop", onClick: i }),
      Nr(
        "div",
        { class: Gf("-cbwsdk-redirect-dialog-box", s) },
        Nr("p", null, t),
        Nr("button", { onClick: n }, e)
      )
    )
  );
}, tJ = "https://keys.coinbase.com/connect", A6 = "https://www.walletlink.org", rJ = "https://go.cb-w.com/walletlink";
class P6 {
  constructor() {
    this.attached = !1, this.redirectDialog = new QY();
  }
  attach() {
    if (this.attached)
      throw new Error("Coinbase Wallet SDK UI is already attached");
    this.redirectDialog.attach(), this.attached = !0;
  }
  redirectToCoinbaseWallet(e) {
    const r = new URL(rJ);
    r.searchParams.append("redirect_url", OY().href), e && r.searchParams.append("wl_url", e);
    const n = document.createElement("a");
    n.target = "cbw-opener", n.href = r.href, n.rel = "noreferrer noopener", n.click();
  }
  openCoinbaseWalletDeeplink(e) {
    this.redirectDialog.present({
      title: "Redirecting to Coinbase Wallet...",
      buttonText: "Open",
      onButtonClick: () => {
        this.redirectToCoinbaseWallet(e);
      }
    }), setTimeout(() => {
      this.redirectToCoinbaseWallet(e);
    }, 99);
  }
  showConnecting(e) {
    return () => {
      this.redirectDialog.clear();
    };
  }
}
class Eo {
  constructor(e) {
    this.chainCallbackParams = { chainId: "", jsonRpcUrl: "" }, this.isMobileWeb = NY(), this.linkedUpdated = (s) => {
      this.isLinked = s;
      const o = this.storage.getItem($1);
      if (s && (this._session.linked = s), this.isUnlinkedErrorState = !1, o) {
        const a = o.split(" "), u = this.storage.getItem("IsStandaloneSigning") === "true";
        a[0] !== "" && !s && this._session.linked && !u && (this.isUnlinkedErrorState = !0);
      }
    }, this.metadataUpdated = (s, o) => {
      this.storage.setItem(s, o);
    }, this.chainUpdated = (s, o) => {
      this.chainCallbackParams.chainId === s && this.chainCallbackParams.jsonRpcUrl === o || (this.chainCallbackParams = {
        chainId: s,
        jsonRpcUrl: o
      }, this.chainCallback && this.chainCallback(o, Number.parseInt(s, 10)));
    }, this.accountUpdated = (s) => {
      this.accountsCallback && this.accountsCallback([s]), Eo.accountRequestCallbackIds.size > 0 && (Array.from(Eo.accountRequestCallbackIds.values()).forEach((o) => {
        this.invokeCallback(o, {
          method: "requestEthereumAccounts",
          result: [s]
        });
      }), Eo.accountRequestCallbackIds.clear());
    }, this.resetAndReload = this.resetAndReload.bind(this), this.linkAPIUrl = e.linkAPIUrl, this.storage = e.storage, this.metadata = e.metadata, this.accountsCallback = e.accountsCallback, this.chainCallback = e.chainCallback;
    const { session: r, ui: n, connection: i } = this.subscribe();
    this._session = r, this.connection = i, this.relayEventManager = new RY(), this.ui = n, this.ui.attach();
  }
  subscribe() {
    const e = gu.load(this.storage) || gu.create(this.storage), { linkAPIUrl: r } = this, n = new TY({
      session: e,
      linkAPIUrl: r,
      listener: this
    }), i = this.isMobileWeb ? new P6() : new XY();
    return n.connect(), { session: e, ui: i, connection: n };
  }
  resetAndReload() {
    this.connection.destroy().then(() => {
      const e = gu.load(this.storage);
      (e == null ? void 0 : e.id) === this._session.id && eo.clearAll(), document.location.reload();
    }).catch((e) => {
    });
  }
  signEthereumTransaction(e) {
    return this.sendRequest({
      method: "signEthereumTransaction",
      params: {
        fromAddress: e.fromAddress,
        toAddress: e.toAddress,
        weiValue: $s(e.weiValue),
        data: Hf(e.data, !0),
        nonce: e.nonce,
        gasPriceInWei: e.gasPriceInWei ? $s(e.gasPriceInWei) : null,
        maxFeePerGas: e.gasPriceInWei ? $s(e.gasPriceInWei) : null,
        maxPriorityFeePerGas: e.gasPriceInWei ? $s(e.gasPriceInWei) : null,
        gasLimit: e.gasLimit ? $s(e.gasLimit) : null,
        chainId: e.chainId,
        shouldSubmit: !1
      }
    });
  }
  signAndSubmitEthereumTransaction(e) {
    return this.sendRequest({
      method: "signEthereumTransaction",
      params: {
        fromAddress: e.fromAddress,
        toAddress: e.toAddress,
        weiValue: $s(e.weiValue),
        data: Hf(e.data, !0),
        nonce: e.nonce,
        gasPriceInWei: e.gasPriceInWei ? $s(e.gasPriceInWei) : null,
        maxFeePerGas: e.maxFeePerGas ? $s(e.maxFeePerGas) : null,
        maxPriorityFeePerGas: e.maxPriorityFeePerGas ? $s(e.maxPriorityFeePerGas) : null,
        gasLimit: e.gasLimit ? $s(e.gasLimit) : null,
        chainId: e.chainId,
        shouldSubmit: !0
      }
    });
  }
  submitEthereumTransaction(e, r) {
    return this.sendRequest({
      method: "submitEthereumTransaction",
      params: {
        signedTransaction: Hf(e, !0),
        chainId: r
      }
    });
  }
  getWalletLinkSession() {
    return this._session;
  }
  sendRequest(e) {
    let r = null;
    const n = Qa(8), i = (s) => {
      this.publishWeb3RequestCanceledEvent(n), this.handleErrorResponse(n, e.method, s), r == null || r();
    };
    return new Promise((s, o) => {
      r = this.ui.showConnecting({
        isUnlinkedErrorState: this.isUnlinkedErrorState,
        onCancel: i,
        onResetConnection: this.resetAndReload
        // eslint-disable-line @typescript-eslint/unbound-method
      }), this.relayEventManager.callbacks.set(n, (a) => {
        if (r == null || r(), jn(a))
          return o(new Error(a.errorMessage));
        s(a);
      }), this.publishWeb3RequestEvent(n, e);
    });
  }
  publishWeb3RequestEvent(e, r) {
    const n = { type: "WEB3_REQUEST", id: e, request: r };
    this.publishEvent("Web3Request", n, !0).then((i) => {
    }).catch((i) => {
      this.handleWeb3ResponseMessage(n.id, {
        method: r.method,
        errorMessage: i.message
      });
    }), this.isMobileWeb && this.openCoinbaseWalletDeeplink(r.method);
  }
  // copied from MobileRelay
  openCoinbaseWalletDeeplink(e) {
    if (this.ui instanceof P6)
      switch (e) {
        case "requestEthereumAccounts":
        case "switchEthereumChain":
          return;
        default:
          window.addEventListener("blur", () => {
            window.addEventListener("focus", () => {
              this.connection.checkUnseenEvents();
            }, { once: !0 });
          }, { once: !0 }), this.ui.openCoinbaseWalletDeeplink();
          break;
      }
  }
  publishWeb3RequestCanceledEvent(e) {
    const r = {
      type: "WEB3_REQUEST_CANCELED",
      id: e
    };
    this.publishEvent("Web3RequestCanceled", r, !1).then();
  }
  publishEvent(e, r, n) {
    return this.connection.publishEvent(e, r, n);
  }
  handleWeb3ResponseMessage(e, r) {
    if (r.method === "requestEthereumAccounts") {
      Eo.accountRequestCallbackIds.forEach((n) => this.invokeCallback(n, r)), Eo.accountRequestCallbackIds.clear();
      return;
    }
    this.invokeCallback(e, r);
  }
  handleErrorResponse(e, r, n) {
    var i;
    const s = (i = n == null ? void 0 : n.message) !== null && i !== void 0 ? i : "Unspecified error message.";
    this.handleWeb3ResponseMessage(e, {
      method: r,
      errorMessage: s
    });
  }
  invokeCallback(e, r) {
    const n = this.relayEventManager.callbacks.get(e);
    n && (n(r), this.relayEventManager.callbacks.delete(e));
  }
  requestEthereumAccounts() {
    const { appName: e, appLogoUrl: r } = this.metadata, n = {
      method: "requestEthereumAccounts",
      params: {
        appName: e,
        appLogoUrl: r
      }
    }, i = Qa(8);
    return new Promise((s, o) => {
      this.relayEventManager.callbacks.set(i, (a) => {
        if (jn(a))
          return o(new Error(a.errorMessage));
        s(a);
      }), Eo.accountRequestCallbackIds.add(i), this.publishWeb3RequestEvent(i, n);
    });
  }
  watchAsset(e, r, n, i, s, o) {
    const a = {
      method: "watchAsset",
      params: {
        type: e,
        options: {
          address: r,
          symbol: n,
          decimals: i,
          image: s
        },
        chainId: o
      }
    };
    let u = null;
    const l = Qa(8), d = (p) => {
      this.publishWeb3RequestCanceledEvent(l), this.handleErrorResponse(l, a.method, p), u == null || u();
    };
    return u = this.ui.showConnecting({
      isUnlinkedErrorState: this.isUnlinkedErrorState,
      onCancel: d,
      onResetConnection: this.resetAndReload
      // eslint-disable-line @typescript-eslint/unbound-method
    }), new Promise((p, w) => {
      this.relayEventManager.callbacks.set(l, (A) => {
        if (u == null || u(), jn(A))
          return w(new Error(A.errorMessage));
        p(A);
      }), this.publishWeb3RequestEvent(l, a);
    });
  }
  addEthereumChain(e, r, n, i, s, o) {
    const a = {
      method: "addEthereumChain",
      params: {
        chainId: e,
        rpcUrls: r,
        blockExplorerUrls: i,
        chainName: s,
        iconUrls: n,
        nativeCurrency: o
      }
    };
    let u = null;
    const l = Qa(8), d = (p) => {
      this.publishWeb3RequestCanceledEvent(l), this.handleErrorResponse(l, a.method, p), u == null || u();
    };
    return u = this.ui.showConnecting({
      isUnlinkedErrorState: this.isUnlinkedErrorState,
      onCancel: d,
      onResetConnection: this.resetAndReload
      // eslint-disable-line @typescript-eslint/unbound-method
    }), new Promise((p, w) => {
      this.relayEventManager.callbacks.set(l, (A) => {
        if (u == null || u(), jn(A))
          return w(new Error(A.errorMessage));
        p(A);
      }), this.publishWeb3RequestEvent(l, a);
    });
  }
  switchEthereumChain(e, r) {
    const n = {
      method: "switchEthereumChain",
      params: Object.assign({ chainId: e }, { address: r })
    };
    let i = null;
    const s = Qa(8), o = (a) => {
      this.publishWeb3RequestCanceledEvent(s), this.handleErrorResponse(s, n.method, a), i == null || i();
    };
    return i = this.ui.showConnecting({
      isUnlinkedErrorState: this.isUnlinkedErrorState,
      onCancel: o,
      onResetConnection: this.resetAndReload
      // eslint-disable-line @typescript-eslint/unbound-method
    }), new Promise((a, u) => {
      this.relayEventManager.callbacks.set(s, (l) => {
        if (i == null || i(), jn(l) && l.errorCode)
          return u(Sr.provider.custom({
            code: l.errorCode,
            message: "Unrecognized chain ID. Try adding the chain using addEthereumChain first."
          }));
        if (jn(l))
          return u(new Error(l.errorMessage));
        a(l);
      }), this.publishWeb3RequestEvent(s, n);
    });
  }
}
Eo.accountRequestCallbackIds = /* @__PURE__ */ new Set();
const M6 = "DefaultChainId", I6 = "DefaultJsonRpcUrl";
class lS {
  constructor(e) {
    this._relay = null, this._addresses = [], this.metadata = e.metadata, this._storage = new eo("walletlink", A6), this.callback = e.callback || null;
    const r = this._storage.getItem($1);
    if (r) {
      const n = r.split(" ");
      n[0] !== "" && (this._addresses = n.map((i) => ra(i)));
    }
    this.initializeRelay();
  }
  getSession() {
    const e = this.initializeRelay(), { id: r, secret: n } = e.getWalletLinkSession();
    return { id: r, secret: n };
  }
  async handshake() {
    await this._eth_requestAccounts();
  }
  get selectedAddress() {
    return this._addresses[0] || void 0;
  }
  get jsonRpcUrl() {
    var e;
    return (e = this._storage.getItem(I6)) !== null && e !== void 0 ? e : void 0;
  }
  set jsonRpcUrl(e) {
    this._storage.setItem(I6, e);
  }
  updateProviderInfo(e, r) {
    var n;
    this.jsonRpcUrl = e;
    const i = this.getChainId();
    this._storage.setItem(M6, r.toString(10)), Kf(r) !== i && ((n = this.callback) === null || n === void 0 || n.call(this, "chainChanged", pa(r)));
  }
  async watchAsset(e) {
    const r = Array.isArray(e) ? e[0] : e;
    if (!r.type)
      throw Sr.rpc.invalidParams("Type is required");
    if ((r == null ? void 0 : r.type) !== "ERC20")
      throw Sr.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);
    if (!(r != null && r.options))
      throw Sr.rpc.invalidParams("Options are required");
    if (!(r != null && r.options.address))
      throw Sr.rpc.invalidParams("Address is required");
    const n = this.getChainId(), { address: i, symbol: s, image: o, decimals: a } = r.options, l = await this.initializeRelay().watchAsset(r.type, i, s, a, o, n == null ? void 0 : n.toString());
    return jn(l) ? !1 : !!l.result;
  }
  async addEthereumChain(e) {
    var r, n;
    const i = e[0];
    if (((r = i.rpcUrls) === null || r === void 0 ? void 0 : r.length) === 0)
      throw Sr.rpc.invalidParams("please pass in at least 1 rpcUrl");
    if (!i.chainName || i.chainName.trim() === "")
      throw Sr.rpc.invalidParams("chainName is a required field");
    if (!i.nativeCurrency)
      throw Sr.rpc.invalidParams("nativeCurrency is a required field");
    const s = Number.parseInt(i.chainId, 16);
    if (s === this.getChainId())
      return !1;
    const o = this.initializeRelay(), { rpcUrls: a = [], blockExplorerUrls: u = [], chainName: l, iconUrls: d = [], nativeCurrency: p } = i, w = await o.addEthereumChain(s.toString(), a, d, u, l, p);
    if (jn(w))
      return !1;
    if (((n = w.result) === null || n === void 0 ? void 0 : n.isApproved) === !0)
      return this.updateProviderInfo(a[0], s), null;
    throw Sr.rpc.internal("unable to add ethereum chain");
  }
  async switchEthereumChain(e) {
    const r = e[0], n = Number.parseInt(r.chainId, 16), s = await this.initializeRelay().switchEthereumChain(n.toString(10), this.selectedAddress || void 0);
    if (jn(s))
      throw s;
    const o = s.result;
    return o.isApproved && o.rpcUrl.length > 0 && this.updateProviderInfo(o.rpcUrl, n), null;
  }
  async cleanup() {
    this.callback = null, this._relay && this._relay.resetAndReload(), this._storage.clear();
  }
  _setAddresses(e, r) {
    var n;
    if (!Array.isArray(e))
      throw new Error("addresses is not an array");
    const i = e.map((s) => ra(s));
    JSON.stringify(i) !== JSON.stringify(this._addresses) && (this._addresses = i, (n = this.callback) === null || n === void 0 || n.call(this, "accountsChanged", i), this._storage.setItem($1, i.join(" ")));
  }
  async request(e) {
    const r = e.params || [];
    switch (e.method) {
      case "eth_accounts":
        return [...this._addresses];
      case "eth_coinbase":
        return this.selectedAddress || null;
      case "net_version":
        return this.getChainId().toString(10);
      case "eth_chainId":
        return pa(this.getChainId());
      case "eth_requestAccounts":
        return this._eth_requestAccounts();
      case "eth_ecRecover":
      case "personal_ecRecover":
        return this.ecRecover(e);
      case "personal_sign":
        return this.personalSign(e);
      case "eth_signTransaction":
        return this._eth_signTransaction(r);
      case "eth_sendRawTransaction":
        return this._eth_sendRawTransaction(r);
      case "eth_sendTransaction":
        return this._eth_sendTransaction(r);
      case "eth_signTypedData_v1":
      case "eth_signTypedData_v3":
      case "eth_signTypedData_v4":
      case "eth_signTypedData":
        return this.signTypedData(e);
      case "wallet_addEthereumChain":
        return this.addEthereumChain(r);
      case "wallet_switchEthereumChain":
        return this.switchEthereumChain(r);
      case "wallet_watchAsset":
        return this.watchAsset(r);
      default:
        if (!this.jsonRpcUrl)
          throw Sr.rpc.internal("No RPC URL set for chain");
        return BE(e, this.jsonRpcUrl);
    }
  }
  _ensureKnownAddress(e) {
    const r = ra(e);
    if (!this._addresses.map((i) => ra(i)).includes(r))
      throw new Error("Unknown Ethereum address");
  }
  _prepareTransactionParams(e) {
    const r = e.from ? ra(e.from) : this.selectedAddress;
    if (!r)
      throw new Error("Ethereum address is unavailable");
    this._ensureKnownAddress(r);
    const n = e.to ? ra(e.to) : null, i = e.value != null ? Rf(e.value) : BigInt(0), s = e.data ? k1(e.data) : Buffer.alloc(0), o = e.nonce != null ? Kf(e.nonce) : null, a = e.gasPrice != null ? Rf(e.gasPrice) : null, u = e.maxFeePerGas != null ? Rf(e.maxFeePerGas) : null, l = e.maxPriorityFeePerGas != null ? Rf(e.maxPriorityFeePerGas) : null, d = e.gas != null ? Rf(e.gas) : null, p = e.chainId ? Kf(e.chainId) : this.getChainId();
    return {
      fromAddress: r,
      toAddress: n,
      weiValue: i,
      data: s,
      nonce: o,
      gasPriceInWei: a,
      maxFeePerGas: u,
      maxPriorityFeePerGas: l,
      gasLimit: d,
      chainId: p
    };
  }
  async ecRecover(e) {
    const { method: r, params: n } = e;
    if (!Array.isArray(n))
      throw Sr.rpc.invalidParams();
    const s = await this.initializeRelay().sendRequest({
      method: "ethereumAddressFromSignedMessage",
      params: {
        message: _m(n[0]),
        signature: _m(n[1]),
        addPrefix: r === "personal_ecRecover"
      }
    });
    if (jn(s))
      throw s;
    return s.result;
  }
  getChainId() {
    var e;
    return Number.parseInt((e = this._storage.getItem(M6)) !== null && e !== void 0 ? e : "1", 10);
  }
  async _eth_requestAccounts() {
    var e, r;
    if (this._addresses.length > 0)
      return (e = this.callback) === null || e === void 0 || e.call(this, "connect", { chainId: pa(this.getChainId()) }), this._addresses;
    const i = await this.initializeRelay().requestEthereumAccounts();
    if (jn(i))
      throw i;
    if (!i.result)
      throw new Error("accounts received is empty");
    return this._setAddresses(i.result), (r = this.callback) === null || r === void 0 || r.call(this, "connect", { chainId: pa(this.getChainId()) }), this._addresses;
  }
  async personalSign({ params: e }) {
    if (!Array.isArray(e))
      throw Sr.rpc.invalidParams();
    const r = e[1], n = e[0];
    this._ensureKnownAddress(r);
    const s = await this.initializeRelay().sendRequest({
      method: "signEthereumMessage",
      params: {
        address: ra(r),
        message: _m(n),
        addPrefix: !0,
        typedDataJson: null
      }
    });
    if (jn(s))
      throw s;
    return s.result;
  }
  async _eth_signTransaction(e) {
    const r = this._prepareTransactionParams(e[0] || {}), i = await this.initializeRelay().signEthereumTransaction(r);
    if (jn(i))
      throw i;
    return i.result;
  }
  async _eth_sendRawTransaction(e) {
    const r = k1(e[0]), i = await this.initializeRelay().submitEthereumTransaction(r, this.getChainId());
    if (jn(i))
      throw i;
    return i.result;
  }
  async _eth_sendTransaction(e) {
    const r = this._prepareTransactionParams(e[0] || {}), i = await this.initializeRelay().signAndSubmitEthereumTransaction(r);
    if (jn(i))
      throw i;
    return i.result;
  }
  async signTypedData(e) {
    const { method: r, params: n } = e;
    if (!Array.isArray(n))
      throw Sr.rpc.invalidParams();
    const i = (l) => {
      const d = {
        eth_signTypedData_v1: dd.hashForSignTypedDataLegacy,
        eth_signTypedData_v3: dd.hashForSignTypedData_v3,
        eth_signTypedData_v4: dd.hashForSignTypedData_v4,
        eth_signTypedData: dd.hashForSignTypedData_v4
      };
      return Hf(d[r]({
        data: YG(l)
      }), !0);
    }, s = n[r === "eth_signTypedData_v1" ? 1 : 0], o = n[r === "eth_signTypedData_v1" ? 0 : 1];
    this._ensureKnownAddress(s);
    const u = await this.initializeRelay().sendRequest({
      method: "signEthereumMessage",
      params: {
        address: ra(s),
        message: i(o),
        typedDataJson: JSON.stringify(o, null, 2),
        addPrefix: !1
      }
    });
    if (jn(u))
      throw u;
    return u.result;
  }
  initializeRelay() {
    return this._relay || (this._relay = new Eo({
      linkAPIUrl: A6,
      storage: this._storage,
      metadata: this.metadata,
      accountsCallback: this._setAddresses.bind(this),
      chainCallback: this.updateProviderInfo.bind(this)
    })), this._relay;
  }
}
const hS = "SignerType", dS = new eo("CBWSDK", "SignerConfigurator");
function nJ() {
  return dS.getItem(hS);
}
function iJ(t) {
  dS.setItem(hS, t);
}
async function sJ(t) {
  const { communicator: e, metadata: r, handshakeRequest: n, callback: i } = t;
  aJ(e, r, i).catch(() => {
  });
  const s = {
    id: crypto.randomUUID(),
    event: "selectSignerType",
    data: Object.assign(Object.assign({}, t.preference), { handshakeRequest: n })
  }, { data: o } = await e.postRequestAndWaitForResponse(s);
  return o;
}
function oJ(t) {
  const { signerType: e, metadata: r, communicator: n, callback: i } = t;
  switch (e) {
    case "scw":
      return new cY({
        metadata: r,
        callback: i,
        communicator: n
      });
    case "walletlink":
      return new lS({
        metadata: r,
        callback: i
      });
  }
}
async function aJ(t, e, r) {
  await t.onMessage(({ event: i }) => i === "WalletLinkSessionRequest");
  const n = new lS({
    metadata: e,
    callback: r
  });
  t.postMessage({
    event: "WalletLinkUpdate",
    data: { session: n.getSession() }
  }), await n.handshake(), t.postMessage({
    event: "WalletLinkUpdate",
    data: { connected: !0 }
  });
}
const cJ = `Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`, uJ = () => {
  let t;
  return {
    getCrossOriginOpenerPolicy: () => t === void 0 ? "undefined" : t,
    checkCrossOriginOpenerPolicy: async () => {
      if (typeof window > "u") {
        t = "non-browser-env";
        return;
      }
      try {
        const e = `${window.location.origin}${window.location.pathname}`, r = await fetch(e, {
          method: "HEAD"
        });
        if (!r.ok)
          throw new Error(`HTTP error! status: ${r.status}`);
        const n = r.headers.get("Cross-Origin-Opener-Policy");
        t = n ?? "null", t === "same-origin" && console.error(cJ);
      } catch (e) {
        console.error("Error checking Cross-Origin-Opener-Policy:", e.message), t = "error";
      }
    }
  };
}, { checkCrossOriginOpenerPolicy: fJ, getCrossOriginOpenerPolicy: lJ } = uJ(), C6 = 420, T6 = 540;
function hJ(t) {
  const e = (window.innerWidth - C6) / 2 + window.screenX, r = (window.innerHeight - T6) / 2 + window.screenY;
  pJ(t);
  const n = window.open(t, "Smart Wallet", `width=${C6}, height=${T6}, left=${e}, top=${r}`);
  if (n == null || n.focus(), !n)
    throw Sr.rpc.internal("Pop up window failed to open");
  return n;
}
function dJ(t) {
  t && !t.closed && t.close();
}
function pJ(t) {
  const e = {
    sdkName: $E,
    sdkVersion: nh,
    origin: window.location.origin,
    coop: lJ()
  };
  for (const [r, n] of Object.entries(e))
    t.searchParams.append(r, n.toString());
}
class gJ {
  constructor({ url: e = tJ, metadata: r, preference: n }) {
    this.popup = null, this.listeners = /* @__PURE__ */ new Map(), this.postMessage = async (i) => {
      (await this.waitForPopupLoaded()).postMessage(i, this.url.origin);
    }, this.postRequestAndWaitForResponse = async (i) => {
      const s = this.onMessage(({ requestId: o }) => o === i.id);
      return this.postMessage(i), await s;
    }, this.onMessage = async (i) => new Promise((s, o) => {
      const a = (u) => {
        if (u.origin !== this.url.origin)
          return;
        const l = u.data;
        i(l) && (s(l), window.removeEventListener("message", a), this.listeners.delete(a));
      };
      window.addEventListener("message", a), this.listeners.set(a, { reject: o });
    }), this.disconnect = () => {
      dJ(this.popup), this.popup = null, this.listeners.forEach(({ reject: i }, s) => {
        i(Sr.provider.userRejectedRequest("Request rejected")), window.removeEventListener("message", s);
      }), this.listeners.clear();
    }, this.waitForPopupLoaded = async () => this.popup && !this.popup.closed ? (this.popup.focus(), this.popup) : (this.popup = hJ(this.url), this.onMessage(({ event: i }) => i === "PopupUnload").then(this.disconnect).catch(() => {
    }), this.onMessage(({ event: i }) => i === "PopupLoaded").then((i) => {
      this.postMessage({
        requestId: i.id,
        data: {
          version: nh,
          metadata: this.metadata,
          preference: this.preference,
          location: window.location.toString()
        }
      });
    }).then(() => {
      if (!this.popup)
        throw Sr.rpc.internal();
      return this.popup;
    })), this.url = new URL(e), this.metadata = r, this.preference = n;
  }
}
function mJ(t) {
  const e = WG(vJ(t), {
    shouldIncludeStack: !0
  }), r = new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");
  return r.searchParams.set("version", nh), r.searchParams.set("code", e.code.toString()), r.searchParams.set("message", e.message), Object.assign(Object.assign({}, e), { docUrl: r.href });
}
function vJ(t) {
  var e;
  if (typeof t == "string")
    return {
      message: t,
      code: fn.rpc.internal
    };
  if (jn(t)) {
    const r = t.errorMessage, n = (e = t.errorCode) !== null && e !== void 0 ? e : r.match(/(denied|rejected)/i) ? fn.provider.userRejectedRequest : void 0;
    return Object.assign(Object.assign({}, t), {
      message: r,
      code: n,
      data: { method: t.method }
    });
  }
  return t;
}
var pS = { exports: {} };
(function(t) {
  var e = Object.prototype.hasOwnProperty, r = "~";
  function n() {
  }
  Object.create && (n.prototype = /* @__PURE__ */ Object.create(null), new n().__proto__ || (r = !1));
  function i(u, l, d) {
    this.fn = u, this.context = l, this.once = d || !1;
  }
  function s(u, l, d, p, w) {
    if (typeof d != "function")
      throw new TypeError("The listener must be a function");
    var A = new i(d, p || u, w), M = r ? r + l : l;
    return u._events[M] ? u._events[M].fn ? u._events[M] = [u._events[M], A] : u._events[M].push(A) : (u._events[M] = A, u._eventsCount++), u;
  }
  function o(u, l) {
    --u._eventsCount === 0 ? u._events = new n() : delete u._events[l];
  }
  function a() {
    this._events = new n(), this._eventsCount = 0;
  }
  a.prototype.eventNames = function() {
    var l = [], d, p;
    if (this._eventsCount === 0) return l;
    for (p in d = this._events)
      e.call(d, p) && l.push(r ? p.slice(1) : p);
    return Object.getOwnPropertySymbols ? l.concat(Object.getOwnPropertySymbols(d)) : l;
  }, a.prototype.listeners = function(l) {
    var d = r ? r + l : l, p = this._events[d];
    if (!p) return [];
    if (p.fn) return [p.fn];
    for (var w = 0, A = p.length, M = new Array(A); w < A; w++)
      M[w] = p[w].fn;
    return M;
  }, a.prototype.listenerCount = function(l) {
    var d = r ? r + l : l, p = this._events[d];
    return p ? p.fn ? 1 : p.length : 0;
  }, a.prototype.emit = function(l, d, p, w, A, M) {
    var N = r ? r + l : l;
    if (!this._events[N]) return !1;
    var L = this._events[N], B = arguments.length, $, H;
    if (L.fn) {
      switch (L.once && this.removeListener(l, L.fn, void 0, !0), B) {
        case 1:
          return L.fn.call(L.context), !0;
        case 2:
          return L.fn.call(L.context, d), !0;
        case 3:
          return L.fn.call(L.context, d, p), !0;
        case 4:
          return L.fn.call(L.context, d, p, w), !0;
        case 5:
          return L.fn.call(L.context, d, p, w, A), !0;
        case 6:
          return L.fn.call(L.context, d, p, w, A, M), !0;
      }
      for (H = 1, $ = new Array(B - 1); H < B; H++)
        $[H - 1] = arguments[H];
      L.fn.apply(L.context, $);
    } else {
      var W = L.length, V;
      for (H = 0; H < W; H++)
        switch (L[H].once && this.removeListener(l, L[H].fn, void 0, !0), B) {
          case 1:
            L[H].fn.call(L[H].context);
            break;
          case 2:
            L[H].fn.call(L[H].context, d);
            break;
          case 3:
            L[H].fn.call(L[H].context, d, p);
            break;
          case 4:
            L[H].fn.call(L[H].context, d, p, w);
            break;
          default:
            if (!$) for (V = 1, $ = new Array(B - 1); V < B; V++)
              $[V - 1] = arguments[V];
            L[H].fn.apply(L[H].context, $);
        }
    }
    return !0;
  }, a.prototype.on = function(l, d, p) {
    return s(this, l, d, p, !1);
  }, a.prototype.once = function(l, d, p) {
    return s(this, l, d, p, !0);
  }, a.prototype.removeListener = function(l, d, p, w) {
    var A = r ? r + l : l;
    if (!this._events[A]) return this;
    if (!d)
      return o(this, A), this;
    var M = this._events[A];
    if (M.fn)
      M.fn === d && (!w || M.once) && (!p || M.context === p) && o(this, A);
    else {
      for (var N = 0, L = [], B = M.length; N < B; N++)
        (M[N].fn !== d || w && !M[N].once || p && M[N].context !== p) && L.push(M[N]);
      L.length ? this._events[A] = L.length === 1 ? L[0] : L : o(this, A);
    }
    return this;
  }, a.prototype.removeAllListeners = function(l) {
    var d;
    return l ? (d = r ? r + l : l, this._events[d] && o(this, d)) : (this._events = new n(), this._eventsCount = 0), this;
  }, a.prototype.off = a.prototype.removeListener, a.prototype.addListener = a.prototype.on, a.prefixed = r, a.EventEmitter = a, t.exports = a;
})(pS);
var bJ = pS.exports;
const yJ = /* @__PURE__ */ ts(bJ);
class wJ extends yJ {
}
var xJ = function(t, e) {
  var r = {};
  for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, n = Object.getOwnPropertySymbols(t); i < n.length; i++)
      e.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[i]) && (r[n[i]] = t[n[i]]);
  return r;
};
class _J extends wJ {
  constructor(e) {
    var { metadata: r } = e, n = e.preference, { keysUrl: i } = n, s = xJ(n, ["keysUrl"]);
    super(), this.signer = null, this.isCoinbaseWallet = !0, this.metadata = r, this.preference = s, this.communicator = new gJ({
      url: i,
      metadata: r,
      preference: s
    });
    const o = nJ();
    o && (this.signer = this.initSigner(o));
  }
  async request(e) {
    try {
      if (aY(e), !this.signer)
        switch (e.method) {
          case "eth_requestAccounts": {
            const r = await this.requestSignerSelection(e), n = this.initSigner(r);
            await n.handshake(e), this.signer = n, iJ(r);
            break;
          }
          case "net_version":
            return 1;
          case "eth_chainId":
            return pa(1);
          default:
            throw Sr.provider.unauthorized("Must call 'eth_requestAccounts' before other methods");
        }
      return this.signer.request(e);
    } catch (r) {
      const { code: n } = r;
      return n === fn.provider.unauthorized && this.disconnect(), Promise.reject(mJ(r));
    }
  }
  /** @deprecated Use `.request({ method: 'eth_requestAccounts' })` instead. */
  async enable() {
    return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'), await this.request({
      method: "eth_requestAccounts"
    });
  }
  async disconnect() {
    var e;
    await ((e = this.signer) === null || e === void 0 ? void 0 : e.cleanup()), this.signer = null, eo.clearAll(), this.emit("disconnect", Sr.provider.disconnected("User initiated disconnection"));
  }
  requestSignerSelection(e) {
    return sJ({
      communicator: this.communicator,
      preference: this.preference,
      metadata: this.metadata,
      handshakeRequest: e,
      callback: this.emit.bind(this)
    });
  }
  initSigner(e) {
    return oJ({
      signerType: e,
      metadata: this.metadata,
      communicator: this.communicator,
      callback: this.emit.bind(this)
    });
  }
}
function EJ(t) {
  if (t) {
    if (!["all", "smartWalletOnly", "eoaOnly"].includes(t.options))
      throw new Error(`Invalid options: ${t.options}`);
    if (t.attribution && t.attribution.auto !== void 0 && t.attribution.dataSuffix !== void 0)
      throw new Error("Attribution cannot contain both auto and dataSuffix properties");
  }
}
function SJ(t) {
  var e;
  const r = {
    metadata: t.metadata,
    preference: t.preference
  };
  return (e = oY(r)) !== null && e !== void 0 ? e : new _J(r);
}
const AJ = {
  options: "all"
};
function PJ(t) {
  var e;
  new eo("CBWSDK").setItem("VERSION", nh), fJ();
  const n = {
    metadata: {
      appName: t.appName || "Dapp",
      appLogoUrl: t.appLogoUrl || "",
      appChainIds: t.appChainIds || []
    },
    preference: Object.assign(AJ, (e = t.preference) !== null && e !== void 0 ? e : {})
  };
  EJ(n.preference);
  let i = null;
  return {
    getProvider: () => (i || (i = SJ(n)), i)
  };
}
function gS(t, e) {
  return function() {
    return t.apply(e, arguments);
  };
}
const { toString: MJ } = Object.prototype, { getPrototypeOf: Sb } = Object, fp = /* @__PURE__ */ ((t) => (e) => {
  const r = MJ.call(e);
  return t[r] || (t[r] = r.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null)), Ps = (t) => (t = t.toLowerCase(), (e) => fp(e) === t), lp = (t) => (e) => typeof e === t, { isArray: Wu } = Array, Ml = lp("undefined");
function IJ(t) {
  return t !== null && !Ml(t) && t.constructor !== null && !Ml(t.constructor) && Oi(t.constructor.isBuffer) && t.constructor.isBuffer(t);
}
const mS = Ps("ArrayBuffer");
function CJ(t) {
  let e;
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? e = ArrayBuffer.isView(t) : e = t && t.buffer && mS(t.buffer), e;
}
const TJ = lp("string"), Oi = lp("function"), vS = lp("number"), hp = (t) => t !== null && typeof t == "object", RJ = (t) => t === !0 || t === !1, kd = (t) => {
  if (fp(t) !== "object")
    return !1;
  const e = Sb(t);
  return (e === null || e === Object.prototype || Object.getPrototypeOf(e) === null) && !(Symbol.toStringTag in t) && !(Symbol.iterator in t);
}, DJ = Ps("Date"), OJ = Ps("File"), NJ = Ps("Blob"), LJ = Ps("FileList"), kJ = (t) => hp(t) && Oi(t.pipe), $J = (t) => {
  let e;
  return t && (typeof FormData == "function" && t instanceof FormData || Oi(t.append) && ((e = fp(t)) === "formdata" || // detect form-data instance
  e === "object" && Oi(t.toString) && t.toString() === "[object FormData]"));
}, BJ = Ps("URLSearchParams"), [FJ, jJ, UJ, qJ] = ["ReadableStream", "Request", "Response", "Headers"].map(Ps), zJ = (t) => t.trim ? t.trim() : t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function sh(t, e, { allOwnKeys: r = !1 } = {}) {
  if (t === null || typeof t > "u")
    return;
  let n, i;
  if (typeof t != "object" && (t = [t]), Wu(t))
    for (n = 0, i = t.length; n < i; n++)
      e.call(null, t[n], n, t);
  else {
    const s = r ? Object.getOwnPropertyNames(t) : Object.keys(t), o = s.length;
    let a;
    for (n = 0; n < o; n++)
      a = s[n], e.call(null, t[a], a, t);
  }
}
function bS(t, e) {
  e = e.toLowerCase();
  const r = Object.keys(t);
  let n = r.length, i;
  for (; n-- > 0; )
    if (i = r[n], e === i.toLowerCase())
      return i;
  return null;
}
const ic = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global, yS = (t) => !Ml(t) && t !== ic;
function W1() {
  const { caseless: t } = yS(this) && this || {}, e = {}, r = (n, i) => {
    const s = t && bS(e, i) || i;
    kd(e[s]) && kd(n) ? e[s] = W1(e[s], n) : kd(n) ? e[s] = W1({}, n) : Wu(n) ? e[s] = n.slice() : e[s] = n;
  };
  for (let n = 0, i = arguments.length; n < i; n++)
    arguments[n] && sh(arguments[n], r);
  return e;
}
const WJ = (t, e, r, { allOwnKeys: n } = {}) => (sh(e, (i, s) => {
  r && Oi(i) ? t[s] = gS(i, r) : t[s] = i;
}, { allOwnKeys: n }), t), HJ = (t) => (t.charCodeAt(0) === 65279 && (t = t.slice(1)), t), KJ = (t, e, r, n) => {
  t.prototype = Object.create(e.prototype, n), t.prototype.constructor = t, Object.defineProperty(t, "super", {
    value: e.prototype
  }), r && Object.assign(t.prototype, r);
}, VJ = (t, e, r, n) => {
  let i, s, o;
  const a = {};
  if (e = e || {}, t == null) return e;
  do {
    for (i = Object.getOwnPropertyNames(t), s = i.length; s-- > 0; )
      o = i[s], (!n || n(o, t, e)) && !a[o] && (e[o] = t[o], a[o] = !0);
    t = r !== !1 && Sb(t);
  } while (t && (!r || r(t, e)) && t !== Object.prototype);
  return e;
}, GJ = (t, e, r) => {
  t = String(t), (r === void 0 || r > t.length) && (r = t.length), r -= e.length;
  const n = t.indexOf(e, r);
  return n !== -1 && n === r;
}, YJ = (t) => {
  if (!t) return null;
  if (Wu(t)) return t;
  let e = t.length;
  if (!vS(e)) return null;
  const r = new Array(e);
  for (; e-- > 0; )
    r[e] = t[e];
  return r;
}, JJ = /* @__PURE__ */ ((t) => (e) => t && e instanceof t)(typeof Uint8Array < "u" && Sb(Uint8Array)), XJ = (t, e) => {
  const n = (t && t[Symbol.iterator]).call(t);
  let i;
  for (; (i = n.next()) && !i.done; ) {
    const s = i.value;
    e.call(t, s[0], s[1]);
  }
}, ZJ = (t, e) => {
  let r;
  const n = [];
  for (; (r = t.exec(e)) !== null; )
    n.push(r);
  return n;
}, QJ = Ps("HTMLFormElement"), eX = (t) => t.toLowerCase().replace(
  /[-_\s]([a-z\d])(\w*)/g,
  function(r, n, i) {
    return n.toUpperCase() + i;
  }
), R6 = (({ hasOwnProperty: t }) => (e, r) => t.call(e, r))(Object.prototype), tX = Ps("RegExp"), wS = (t, e) => {
  const r = Object.getOwnPropertyDescriptors(t), n = {};
  sh(r, (i, s) => {
    let o;
    (o = e(i, s, t)) !== !1 && (n[s] = o || i);
  }), Object.defineProperties(t, n);
}, rX = (t) => {
  wS(t, (e, r) => {
    if (Oi(t) && ["arguments", "caller", "callee"].indexOf(r) !== -1)
      return !1;
    const n = t[r];
    if (Oi(n)) {
      if (e.enumerable = !1, "writable" in e) {
        e.writable = !1;
        return;
      }
      e.set || (e.set = () => {
        throw Error("Can not rewrite read-only method '" + r + "'");
      });
    }
  });
}, nX = (t, e) => {
  const r = {}, n = (i) => {
    i.forEach((s) => {
      r[s] = !0;
    });
  };
  return Wu(t) ? n(t) : n(String(t).split(e)), r;
}, iX = () => {
}, sX = (t, e) => t != null && Number.isFinite(t = +t) ? t : e, Im = "abcdefghijklmnopqrstuvwxyz", D6 = "0123456789", xS = {
  DIGIT: D6,
  ALPHA: Im,
  ALPHA_DIGIT: Im + Im.toUpperCase() + D6
}, oX = (t = 16, e = xS.ALPHA_DIGIT) => {
  let r = "";
  const { length: n } = e;
  for (; t--; )
    r += e[Math.random() * n | 0];
  return r;
};
function aX(t) {
  return !!(t && Oi(t.append) && t[Symbol.toStringTag] === "FormData" && t[Symbol.iterator]);
}
const cX = (t) => {
  const e = new Array(10), r = (n, i) => {
    if (hp(n)) {
      if (e.indexOf(n) >= 0)
        return;
      if (!("toJSON" in n)) {
        e[i] = n;
        const s = Wu(n) ? [] : {};
        return sh(n, (o, a) => {
          const u = r(o, i + 1);
          !Ml(u) && (s[a] = u);
        }), e[i] = void 0, s;
      }
    }
    return n;
  };
  return r(t, 0);
}, uX = Ps("AsyncFunction"), fX = (t) => t && (hp(t) || Oi(t)) && Oi(t.then) && Oi(t.catch), _S = ((t, e) => t ? setImmediate : e ? ((r, n) => (ic.addEventListener("message", ({ source: i, data: s }) => {
  i === ic && s === r && n.length && n.shift()();
}, !1), (i) => {
  n.push(i), ic.postMessage(r, "*");
}))(`axios@${Math.random()}`, []) : (r) => setTimeout(r))(
  typeof setImmediate == "function",
  Oi(ic.postMessage)
), lX = typeof queueMicrotask < "u" ? queueMicrotask.bind(ic) : typeof process < "u" && process.nextTick || _S, Oe = {
  isArray: Wu,
  isArrayBuffer: mS,
  isBuffer: IJ,
  isFormData: $J,
  isArrayBufferView: CJ,
  isString: TJ,
  isNumber: vS,
  isBoolean: RJ,
  isObject: hp,
  isPlainObject: kd,
  isReadableStream: FJ,
  isRequest: jJ,
  isResponse: UJ,
  isHeaders: qJ,
  isUndefined: Ml,
  isDate: DJ,
  isFile: OJ,
  isBlob: NJ,
  isRegExp: tX,
  isFunction: Oi,
  isStream: kJ,
  isURLSearchParams: BJ,
  isTypedArray: JJ,
  isFileList: LJ,
  forEach: sh,
  merge: W1,
  extend: WJ,
  trim: zJ,
  stripBOM: HJ,
  inherits: KJ,
  toFlatObject: VJ,
  kindOf: fp,
  kindOfTest: Ps,
  endsWith: GJ,
  toArray: YJ,
  forEachEntry: XJ,
  matchAll: ZJ,
  isHTMLForm: QJ,
  hasOwnProperty: R6,
  hasOwnProp: R6,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors: wS,
  freezeMethods: rX,
  toObjectSet: nX,
  toCamelCase: eX,
  noop: iX,
  toFiniteNumber: sX,
  findKey: bS,
  global: ic,
  isContextDefined: yS,
  ALPHABET: xS,
  generateString: oX,
  isSpecCompliantForm: aX,
  toJSONObject: cX,
  isAsyncFn: uX,
  isThenable: fX,
  setImmediate: _S,
  asap: lX
};
function or(t, e, r, n, i) {
  Error.call(this), Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : this.stack = new Error().stack, this.message = t, this.name = "AxiosError", e && (this.code = e), r && (this.config = r), n && (this.request = n), i && (this.response = i, this.status = i.status ? i.status : null);
}
Oe.inherits(or, Error, {
  toJSON: function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: Oe.toJSONObject(this.config),
      code: this.code,
      status: this.status
    };
  }
});
const ES = or.prototype, SS = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((t) => {
  SS[t] = { value: t };
});
Object.defineProperties(or, SS);
Object.defineProperty(ES, "isAxiosError", { value: !0 });
or.from = (t, e, r, n, i, s) => {
  const o = Object.create(ES);
  return Oe.toFlatObject(t, o, function(u) {
    return u !== Error.prototype;
  }, (a) => a !== "isAxiosError"), or.call(o, t.message, e, r, n, i), o.cause = t, o.name = t.name, s && Object.assign(o, s), o;
};
const hX = null;
function H1(t) {
  return Oe.isPlainObject(t) || Oe.isArray(t);
}
function AS(t) {
  return Oe.endsWith(t, "[]") ? t.slice(0, -2) : t;
}
function O6(t, e, r) {
  return t ? t.concat(e).map(function(i, s) {
    return i = AS(i), !r && s ? "[" + i + "]" : i;
  }).join(r ? "." : "") : e;
}
function dX(t) {
  return Oe.isArray(t) && !t.some(H1);
}
const pX = Oe.toFlatObject(Oe, {}, null, function(e) {
  return /^is[A-Z]/.test(e);
});
function dp(t, e, r) {
  if (!Oe.isObject(t))
    throw new TypeError("target must be an object");
  e = e || new FormData(), r = Oe.toFlatObject(r, {
    metaTokens: !0,
    dots: !1,
    indexes: !1
  }, !1, function(N, L) {
    return !Oe.isUndefined(L[N]);
  });
  const n = r.metaTokens, i = r.visitor || d, s = r.dots, o = r.indexes, u = (r.Blob || typeof Blob < "u" && Blob) && Oe.isSpecCompliantForm(e);
  if (!Oe.isFunction(i))
    throw new TypeError("visitor must be a function");
  function l(M) {
    if (M === null) return "";
    if (Oe.isDate(M))
      return M.toISOString();
    if (!u && Oe.isBlob(M))
      throw new or("Blob is not supported. Use a Buffer instead.");
    return Oe.isArrayBuffer(M) || Oe.isTypedArray(M) ? u && typeof Blob == "function" ? new Blob([M]) : Buffer.from(M) : M;
  }
  function d(M, N, L) {
    let B = M;
    if (M && !L && typeof M == "object") {
      if (Oe.endsWith(N, "{}"))
        N = n ? N : N.slice(0, -2), M = JSON.stringify(M);
      else if (Oe.isArray(M) && dX(M) || (Oe.isFileList(M) || Oe.endsWith(N, "[]")) && (B = Oe.toArray(M)))
        return N = AS(N), B.forEach(function(H, W) {
          !(Oe.isUndefined(H) || H === null) && e.append(
            // eslint-disable-next-line no-nested-ternary
            o === !0 ? O6([N], W, s) : o === null ? N : N + "[]",
            l(H)
          );
        }), !1;
    }
    return H1(M) ? !0 : (e.append(O6(L, N, s), l(M)), !1);
  }
  const p = [], w = Object.assign(pX, {
    defaultVisitor: d,
    convertValue: l,
    isVisitable: H1
  });
  function A(M, N) {
    if (!Oe.isUndefined(M)) {
      if (p.indexOf(M) !== -1)
        throw Error("Circular reference detected in " + N.join("."));
      p.push(M), Oe.forEach(M, function(B, $) {
        (!(Oe.isUndefined(B) || B === null) && i.call(
          e,
          B,
          Oe.isString($) ? $.trim() : $,
          N,
          w
        )) === !0 && A(B, N ? N.concat($) : [$]);
      }), p.pop();
    }
  }
  if (!Oe.isObject(t))
    throw new TypeError("data must be an object");
  return A(t), e;
}
function N6(t) {
  const e = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g, function(n) {
    return e[n];
  });
}
function Ab(t, e) {
  this._pairs = [], t && dp(t, this, e);
}
const PS = Ab.prototype;
PS.append = function(e, r) {
  this._pairs.push([e, r]);
};
PS.toString = function(e) {
  const r = e ? function(n) {
    return e.call(this, n, N6);
  } : N6;
  return this._pairs.map(function(i) {
    return r(i[0]) + "=" + r(i[1]);
  }, "").join("&");
};
function gX(t) {
  return encodeURIComponent(t).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function MS(t, e, r) {
  if (!e)
    return t;
  const n = r && r.encode || gX;
  Oe.isFunction(r) && (r = {
    serialize: r
  });
  const i = r && r.serialize;
  let s;
  if (i ? s = i(e, r) : s = Oe.isURLSearchParams(e) ? e.toString() : new Ab(e, r).toString(n), s) {
    const o = t.indexOf("#");
    o !== -1 && (t = t.slice(0, o)), t += (t.indexOf("?") === -1 ? "?" : "&") + s;
  }
  return t;
}
class L6 {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(e, r, n) {
    return this.handlers.push({
      fulfilled: e,
      rejected: r,
      synchronous: n ? n.synchronous : !1,
      runWhen: n ? n.runWhen : null
    }), this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(e) {
    this.handlers[e] && (this.handlers[e] = null);
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    this.handlers && (this.handlers = []);
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(e) {
    Oe.forEach(this.handlers, function(n) {
      n !== null && e(n);
    });
  }
}
const IS = {
  silentJSONParsing: !0,
  forcedJSONParsing: !0,
  clarifyTimeoutError: !1
}, mX = typeof URLSearchParams < "u" ? URLSearchParams : Ab, vX = typeof FormData < "u" ? FormData : null, bX = typeof Blob < "u" ? Blob : null, yX = {
  isBrowser: !0,
  classes: {
    URLSearchParams: mX,
    FormData: vX,
    Blob: bX
  },
  protocols: ["http", "https", "file", "blob", "url", "data"]
}, Pb = typeof window < "u" && typeof document < "u", K1 = typeof navigator == "object" && navigator || void 0, wX = Pb && (!K1 || ["ReactNative", "NativeScript", "NS"].indexOf(K1.product) < 0), xX = typeof WorkerGlobalScope < "u" && // eslint-disable-next-line no-undef
self instanceof WorkerGlobalScope && typeof self.importScripts == "function", _X = Pb && window.location.href || "http://localhost", EX = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  hasBrowserEnv: Pb,
  hasStandardBrowserEnv: wX,
  hasStandardBrowserWebWorkerEnv: xX,
  navigator: K1,
  origin: _X
}, Symbol.toStringTag, { value: "Module" })), Jn = {
  ...EX,
  ...yX
};
function SX(t, e) {
  return dp(t, new Jn.classes.URLSearchParams(), Object.assign({
    visitor: function(r, n, i, s) {
      return Jn.isNode && Oe.isBuffer(r) ? (this.append(n, r.toString("base64")), !1) : s.defaultVisitor.apply(this, arguments);
    }
  }, e));
}
function AX(t) {
  return Oe.matchAll(/\w+|\[(\w*)]/g, t).map((e) => e[0] === "[]" ? "" : e[1] || e[0]);
}
function PX(t) {
  const e = {}, r = Object.keys(t);
  let n;
  const i = r.length;
  let s;
  for (n = 0; n < i; n++)
    s = r[n], e[s] = t[s];
  return e;
}
function CS(t) {
  function e(r, n, i, s) {
    let o = r[s++];
    if (o === "__proto__") return !0;
    const a = Number.isFinite(+o), u = s >= r.length;
    return o = !o && Oe.isArray(i) ? i.length : o, u ? (Oe.hasOwnProp(i, o) ? i[o] = [i[o], n] : i[o] = n, !a) : ((!i[o] || !Oe.isObject(i[o])) && (i[o] = []), e(r, n, i[o], s) && Oe.isArray(i[o]) && (i[o] = PX(i[o])), !a);
  }
  if (Oe.isFormData(t) && Oe.isFunction(t.entries)) {
    const r = {};
    return Oe.forEachEntry(t, (n, i) => {
      e(AX(n), i, r, 0);
    }), r;
  }
  return null;
}
function MX(t, e, r) {
  if (Oe.isString(t))
    try {
      return (e || JSON.parse)(t), Oe.trim(t);
    } catch (n) {
      if (n.name !== "SyntaxError")
        throw n;
    }
  return (r || JSON.stringify)(t);
}
const oh = {
  transitional: IS,
  adapter: ["xhr", "http", "fetch"],
  transformRequest: [function(e, r) {
    const n = r.getContentType() || "", i = n.indexOf("application/json") > -1, s = Oe.isObject(e);
    if (s && Oe.isHTMLForm(e) && (e = new FormData(e)), Oe.isFormData(e))
      return i ? JSON.stringify(CS(e)) : e;
    if (Oe.isArrayBuffer(e) || Oe.isBuffer(e) || Oe.isStream(e) || Oe.isFile(e) || Oe.isBlob(e) || Oe.isReadableStream(e))
      return e;
    if (Oe.isArrayBufferView(e))
      return e.buffer;
    if (Oe.isURLSearchParams(e))
      return r.setContentType("application/x-www-form-urlencoded;charset=utf-8", !1), e.toString();
    let a;
    if (s) {
      if (n.indexOf("application/x-www-form-urlencoded") > -1)
        return SX(e, this.formSerializer).toString();
      if ((a = Oe.isFileList(e)) || n.indexOf("multipart/form-data") > -1) {
        const u = this.env && this.env.FormData;
        return dp(
          a ? { "files[]": e } : e,
          u && new u(),
          this.formSerializer
        );
      }
    }
    return s || i ? (r.setContentType("application/json", !1), MX(e)) : e;
  }],
  transformResponse: [function(e) {
    const r = this.transitional || oh.transitional, n = r && r.forcedJSONParsing, i = this.responseType === "json";
    if (Oe.isResponse(e) || Oe.isReadableStream(e))
      return e;
    if (e && Oe.isString(e) && (n && !this.responseType || i)) {
      const o = !(r && r.silentJSONParsing) && i;
      try {
        return JSON.parse(e);
      } catch (a) {
        if (o)
          throw a.name === "SyntaxError" ? or.from(a, or.ERR_BAD_RESPONSE, this, null, this.response) : a;
      }
    }
    return e;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: Jn.classes.FormData,
    Blob: Jn.classes.Blob
  },
  validateStatus: function(e) {
    return e >= 200 && e < 300;
  },
  headers: {
    common: {
      Accept: "application/json, text/plain, */*",
      "Content-Type": void 0
    }
  }
};
Oe.forEach(["delete", "get", "head", "post", "put", "patch"], (t) => {
  oh.headers[t] = {};
});
const IX = Oe.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]), CX = (t) => {
  const e = {};
  let r, n, i;
  return t && t.split(`
`).forEach(function(o) {
    i = o.indexOf(":"), r = o.substring(0, i).trim().toLowerCase(), n = o.substring(i + 1).trim(), !(!r || e[r] && IX[r]) && (r === "set-cookie" ? e[r] ? e[r].push(n) : e[r] = [n] : e[r] = e[r] ? e[r] + ", " + n : n);
  }), e;
}, k6 = Symbol("internals");
function Df(t) {
  return t && String(t).trim().toLowerCase();
}
function $d(t) {
  return t === !1 || t == null ? t : Oe.isArray(t) ? t.map($d) : String(t);
}
function TX(t) {
  const e = /* @__PURE__ */ Object.create(null), r = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let n;
  for (; n = r.exec(t); )
    e[n[1]] = n[2];
  return e;
}
const RX = (t) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());
function Cm(t, e, r, n, i) {
  if (Oe.isFunction(n))
    return n.call(this, e, r);
  if (i && (e = r), !!Oe.isString(e)) {
    if (Oe.isString(n))
      return e.indexOf(n) !== -1;
    if (Oe.isRegExp(n))
      return n.test(e);
  }
}
function DX(t) {
  return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (e, r, n) => r.toUpperCase() + n);
}
function OX(t, e) {
  const r = Oe.toCamelCase(" " + e);
  ["get", "set", "has"].forEach((n) => {
    Object.defineProperty(t, n + r, {
      value: function(i, s, o) {
        return this[n].call(this, e, i, s, o);
      },
      configurable: !0
    });
  });
}
let yi = class {
  constructor(e) {
    e && this.set(e);
  }
  set(e, r, n) {
    const i = this;
    function s(a, u, l) {
      const d = Df(u);
      if (!d)
        throw new Error("header name must be a non-empty string");
      const p = Oe.findKey(i, d);
      (!p || i[p] === void 0 || l === !0 || l === void 0 && i[p] !== !1) && (i[p || u] = $d(a));
    }
    const o = (a, u) => Oe.forEach(a, (l, d) => s(l, d, u));
    if (Oe.isPlainObject(e) || e instanceof this.constructor)
      o(e, r);
    else if (Oe.isString(e) && (e = e.trim()) && !RX(e))
      o(CX(e), r);
    else if (Oe.isHeaders(e))
      for (const [a, u] of e.entries())
        s(u, a, n);
    else
      e != null && s(r, e, n);
    return this;
  }
  get(e, r) {
    if (e = Df(e), e) {
      const n = Oe.findKey(this, e);
      if (n) {
        const i = this[n];
        if (!r)
          return i;
        if (r === !0)
          return TX(i);
        if (Oe.isFunction(r))
          return r.call(this, i, n);
        if (Oe.isRegExp(r))
          return r.exec(i);
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(e, r) {
    if (e = Df(e), e) {
      const n = Oe.findKey(this, e);
      return !!(n && this[n] !== void 0 && (!r || Cm(this, this[n], n, r)));
    }
    return !1;
  }
  delete(e, r) {
    const n = this;
    let i = !1;
    function s(o) {
      if (o = Df(o), o) {
        const a = Oe.findKey(n, o);
        a && (!r || Cm(n, n[a], a, r)) && (delete n[a], i = !0);
      }
    }
    return Oe.isArray(e) ? e.forEach(s) : s(e), i;
  }
  clear(e) {
    const r = Object.keys(this);
    let n = r.length, i = !1;
    for (; n--; ) {
      const s = r[n];
      (!e || Cm(this, this[s], s, e, !0)) && (delete this[s], i = !0);
    }
    return i;
  }
  normalize(e) {
    const r = this, n = {};
    return Oe.forEach(this, (i, s) => {
      const o = Oe.findKey(n, s);
      if (o) {
        r[o] = $d(i), delete r[s];
        return;
      }
      const a = e ? DX(s) : String(s).trim();
      a !== s && delete r[s], r[a] = $d(i), n[a] = !0;
    }), this;
  }
  concat(...e) {
    return this.constructor.concat(this, ...e);
  }
  toJSON(e) {
    const r = /* @__PURE__ */ Object.create(null);
    return Oe.forEach(this, (n, i) => {
      n != null && n !== !1 && (r[i] = e && Oe.isArray(n) ? n.join(", ") : n);
    }), r;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([e, r]) => e + ": " + r).join(`
`);
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(e) {
    return e instanceof this ? e : new this(e);
  }
  static concat(e, ...r) {
    const n = new this(e);
    return r.forEach((i) => n.set(i)), n;
  }
  static accessor(e) {
    const n = (this[k6] = this[k6] = {
      accessors: {}
    }).accessors, i = this.prototype;
    function s(o) {
      const a = Df(o);
      n[a] || (OX(i, o), n[a] = !0);
    }
    return Oe.isArray(e) ? e.forEach(s) : s(e), this;
  }
};
yi.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
Oe.reduceDescriptors(yi.prototype, ({ value: t }, e) => {
  let r = e[0].toUpperCase() + e.slice(1);
  return {
    get: () => t,
    set(n) {
      this[r] = n;
    }
  };
});
Oe.freezeMethods(yi);
function Tm(t, e) {
  const r = this || oh, n = e || r, i = yi.from(n.headers);
  let s = n.data;
  return Oe.forEach(t, function(a) {
    s = a.call(r, s, i.normalize(), e ? e.status : void 0);
  }), i.normalize(), s;
}
function TS(t) {
  return !!(t && t.__CANCEL__);
}
function Hu(t, e, r) {
  or.call(this, t ?? "canceled", or.ERR_CANCELED, e, r), this.name = "CanceledError";
}
Oe.inherits(Hu, or, {
  __CANCEL__: !0
});
function RS(t, e, r) {
  const n = r.config.validateStatus;
  !r.status || !n || n(r.status) ? t(r) : e(new or(
    "Request failed with status code " + r.status,
    [or.ERR_BAD_REQUEST, or.ERR_BAD_RESPONSE][Math.floor(r.status / 100) - 4],
    r.config,
    r.request,
    r
  ));
}
function NX(t) {
  const e = /^([-+\w]{1,25})(:?\/\/|:)/.exec(t);
  return e && e[1] || "";
}
function LX(t, e) {
  t = t || 10;
  const r = new Array(t), n = new Array(t);
  let i = 0, s = 0, o;
  return e = e !== void 0 ? e : 1e3, function(u) {
    const l = Date.now(), d = n[s];
    o || (o = l), r[i] = u, n[i] = l;
    let p = s, w = 0;
    for (; p !== i; )
      w += r[p++], p = p % t;
    if (i = (i + 1) % t, i === s && (s = (s + 1) % t), l - o < e)
      return;
    const A = d && l - d;
    return A ? Math.round(w * 1e3 / A) : void 0;
  };
}
function kX(t, e) {
  let r = 0, n = 1e3 / e, i, s;
  const o = (l, d = Date.now()) => {
    r = d, i = null, s && (clearTimeout(s), s = null), t.apply(null, l);
  };
  return [(...l) => {
    const d = Date.now(), p = d - r;
    p >= n ? o(l, d) : (i = l, s || (s = setTimeout(() => {
      s = null, o(i);
    }, n - p)));
  }, () => i && o(i)];
}
const g0 = (t, e, r = 3) => {
  let n = 0;
  const i = LX(50, 250);
  return kX((s) => {
    const o = s.loaded, a = s.lengthComputable ? s.total : void 0, u = o - n, l = i(u), d = o <= a;
    n = o;
    const p = {
      loaded: o,
      total: a,
      progress: a ? o / a : void 0,
      bytes: u,
      rate: l || void 0,
      estimated: l && a && d ? (a - o) / l : void 0,
      event: s,
      lengthComputable: a != null,
      [e ? "download" : "upload"]: !0
    };
    t(p);
  }, r);
}, $6 = (t, e) => {
  const r = t != null;
  return [(n) => e[0]({
    lengthComputable: r,
    total: t,
    loaded: n
  }), e[1]];
}, B6 = (t) => (...e) => Oe.asap(() => t(...e)), $X = Jn.hasStandardBrowserEnv ? /* @__PURE__ */ ((t, e) => (r) => (r = new URL(r, Jn.origin), t.protocol === r.protocol && t.host === r.host && (e || t.port === r.port)))(
  new URL(Jn.origin),
  Jn.navigator && /(msie|trident)/i.test(Jn.navigator.userAgent)
) : () => !0, BX = Jn.hasStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  {
    write(t, e, r, n, i, s) {
      const o = [t + "=" + encodeURIComponent(e)];
      Oe.isNumber(r) && o.push("expires=" + new Date(r).toGMTString()), Oe.isString(n) && o.push("path=" + n), Oe.isString(i) && o.push("domain=" + i), s === !0 && o.push("secure"), document.cookie = o.join("; ");
    },
    read(t) {
      const e = document.cookie.match(new RegExp("(^|;\\s*)(" + t + ")=([^;]*)"));
      return e ? decodeURIComponent(e[3]) : null;
    },
    remove(t) {
      this.write(t, "", Date.now() - 864e5);
    }
  }
) : (
  // Non-standard browser env (web workers, react-native) lack needed support.
  {
    write() {
    },
    read() {
      return null;
    },
    remove() {
    }
  }
);
function FX(t) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);
}
function jX(t, e) {
  return e ? t.replace(/\/?\/$/, "") + "/" + e.replace(/^\/+/, "") : t;
}
function DS(t, e) {
  return t && !FX(e) ? jX(t, e) : e;
}
const F6 = (t) => t instanceof yi ? { ...t } : t;
function gc(t, e) {
  e = e || {};
  const r = {};
  function n(l, d, p, w) {
    return Oe.isPlainObject(l) && Oe.isPlainObject(d) ? Oe.merge.call({ caseless: w }, l, d) : Oe.isPlainObject(d) ? Oe.merge({}, d) : Oe.isArray(d) ? d.slice() : d;
  }
  function i(l, d, p, w) {
    if (Oe.isUndefined(d)) {
      if (!Oe.isUndefined(l))
        return n(void 0, l, p, w);
    } else return n(l, d, p, w);
  }
  function s(l, d) {
    if (!Oe.isUndefined(d))
      return n(void 0, d);
  }
  function o(l, d) {
    if (Oe.isUndefined(d)) {
      if (!Oe.isUndefined(l))
        return n(void 0, l);
    } else return n(void 0, d);
  }
  function a(l, d, p) {
    if (p in e)
      return n(l, d);
    if (p in t)
      return n(void 0, l);
  }
  const u = {
    url: s,
    method: s,
    data: s,
    baseURL: o,
    transformRequest: o,
    transformResponse: o,
    paramsSerializer: o,
    timeout: o,
    timeoutMessage: o,
    withCredentials: o,
    withXSRFToken: o,
    adapter: o,
    responseType: o,
    xsrfCookieName: o,
    xsrfHeaderName: o,
    onUploadProgress: o,
    onDownloadProgress: o,
    decompress: o,
    maxContentLength: o,
    maxBodyLength: o,
    beforeRedirect: o,
    transport: o,
    httpAgent: o,
    httpsAgent: o,
    cancelToken: o,
    socketPath: o,
    responseEncoding: o,
    validateStatus: a,
    headers: (l, d, p) => i(F6(l), F6(d), p, !0)
  };
  return Oe.forEach(Object.keys(Object.assign({}, t, e)), function(d) {
    const p = u[d] || i, w = p(t[d], e[d], d);
    Oe.isUndefined(w) && p !== a || (r[d] = w);
  }), r;
}
const OS = (t) => {
  const e = gc({}, t);
  let { data: r, withXSRFToken: n, xsrfHeaderName: i, xsrfCookieName: s, headers: o, auth: a } = e;
  e.headers = o = yi.from(o), e.url = MS(DS(e.baseURL, e.url), t.params, t.paramsSerializer), a && o.set(
    "Authorization",
    "Basic " + btoa((a.username || "") + ":" + (a.password ? unescape(encodeURIComponent(a.password)) : ""))
  );
  let u;
  if (Oe.isFormData(r)) {
    if (Jn.hasStandardBrowserEnv || Jn.hasStandardBrowserWebWorkerEnv)
      o.setContentType(void 0);
    else if ((u = o.getContentType()) !== !1) {
      const [l, ...d] = u ? u.split(";").map((p) => p.trim()).filter(Boolean) : [];
      o.setContentType([l || "multipart/form-data", ...d].join("; "));
    }
  }
  if (Jn.hasStandardBrowserEnv && (n && Oe.isFunction(n) && (n = n(e)), n || n !== !1 && $X(e.url))) {
    const l = i && s && BX.read(s);
    l && o.set(i, l);
  }
  return e;
}, UX = typeof XMLHttpRequest < "u", qX = UX && function(t) {
  return new Promise(function(r, n) {
    const i = OS(t);
    let s = i.data;
    const o = yi.from(i.headers).normalize();
    let { responseType: a, onUploadProgress: u, onDownloadProgress: l } = i, d, p, w, A, M;
    function N() {
      A && A(), M && M(), i.cancelToken && i.cancelToken.unsubscribe(d), i.signal && i.signal.removeEventListener("abort", d);
    }
    let L = new XMLHttpRequest();
    L.open(i.method.toUpperCase(), i.url, !0), L.timeout = i.timeout;
    function B() {
      if (!L)
        return;
      const H = yi.from(
        "getAllResponseHeaders" in L && L.getAllResponseHeaders()
      ), V = {
        data: !a || a === "text" || a === "json" ? L.responseText : L.response,
        status: L.status,
        statusText: L.statusText,
        headers: H,
        config: t,
        request: L
      };
      RS(function(R) {
        r(R), N();
      }, function(R) {
        n(R), N();
      }, V), L = null;
    }
    "onloadend" in L ? L.onloadend = B : L.onreadystatechange = function() {
      !L || L.readyState !== 4 || L.status === 0 && !(L.responseURL && L.responseURL.indexOf("file:") === 0) || setTimeout(B);
    }, L.onabort = function() {
      L && (n(new or("Request aborted", or.ECONNABORTED, t, L)), L = null);
    }, L.onerror = function() {
      n(new or("Network Error", or.ERR_NETWORK, t, L)), L = null;
    }, L.ontimeout = function() {
      let W = i.timeout ? "timeout of " + i.timeout + "ms exceeded" : "timeout exceeded";
      const V = i.transitional || IS;
      i.timeoutErrorMessage && (W = i.timeoutErrorMessage), n(new or(
        W,
        V.clarifyTimeoutError ? or.ETIMEDOUT : or.ECONNABORTED,
        t,
        L
      )), L = null;
    }, s === void 0 && o.setContentType(null), "setRequestHeader" in L && Oe.forEach(o.toJSON(), function(W, V) {
      L.setRequestHeader(V, W);
    }), Oe.isUndefined(i.withCredentials) || (L.withCredentials = !!i.withCredentials), a && a !== "json" && (L.responseType = i.responseType), l && ([w, M] = g0(l, !0), L.addEventListener("progress", w)), u && L.upload && ([p, A] = g0(u), L.upload.addEventListener("progress", p), L.upload.addEventListener("loadend", A)), (i.cancelToken || i.signal) && (d = (H) => {
      L && (n(!H || H.type ? new Hu(null, t, L) : H), L.abort(), L = null);
    }, i.cancelToken && i.cancelToken.subscribe(d), i.signal && (i.signal.aborted ? d() : i.signal.addEventListener("abort", d)));
    const $ = NX(i.url);
    if ($ && Jn.protocols.indexOf($) === -1) {
      n(new or("Unsupported protocol " + $ + ":", or.ERR_BAD_REQUEST, t));
      return;
    }
    L.send(s || null);
  });
}, zX = (t, e) => {
  const { length: r } = t = t ? t.filter(Boolean) : [];
  if (e || r) {
    let n = new AbortController(), i;
    const s = function(l) {
      if (!i) {
        i = !0, a();
        const d = l instanceof Error ? l : this.reason;
        n.abort(d instanceof or ? d : new Hu(d instanceof Error ? d.message : d));
      }
    };
    let o = e && setTimeout(() => {
      o = null, s(new or(`timeout ${e} of ms exceeded`, or.ETIMEDOUT));
    }, e);
    const a = () => {
      t && (o && clearTimeout(o), o = null, t.forEach((l) => {
        l.unsubscribe ? l.unsubscribe(s) : l.removeEventListener("abort", s);
      }), t = null);
    };
    t.forEach((l) => l.addEventListener("abort", s));
    const { signal: u } = n;
    return u.unsubscribe = () => Oe.asap(a), u;
  }
}, WX = function* (t, e) {
  let r = t.byteLength;
  if (r < e) {
    yield t;
    return;
  }
  let n = 0, i;
  for (; n < r; )
    i = n + e, yield t.slice(n, i), n = i;
}, HX = async function* (t, e) {
  for await (const r of KX(t))
    yield* WX(r, e);
}, KX = async function* (t) {
  if (t[Symbol.asyncIterator]) {
    yield* t;
    return;
  }
  const e = t.getReader();
  try {
    for (; ; ) {
      const { done: r, value: n } = await e.read();
      if (r)
        break;
      yield n;
    }
  } finally {
    await e.cancel();
  }
}, j6 = (t, e, r, n) => {
  const i = HX(t, e);
  let s = 0, o, a = (u) => {
    o || (o = !0, n && n(u));
  };
  return new ReadableStream({
    async pull(u) {
      try {
        const { done: l, value: d } = await i.next();
        if (l) {
          a(), u.close();
          return;
        }
        let p = d.byteLength;
        if (r) {
          let w = s += p;
          r(w);
        }
        u.enqueue(new Uint8Array(d));
      } catch (l) {
        throw a(l), l;
      }
    },
    cancel(u) {
      return a(u), i.return();
    }
  }, {
    highWaterMark: 2
  });
}, pp = typeof fetch == "function" && typeof Request == "function" && typeof Response == "function", NS = pp && typeof ReadableStream == "function", VX = pp && (typeof TextEncoder == "function" ? /* @__PURE__ */ ((t) => (e) => t.encode(e))(new TextEncoder()) : async (t) => new Uint8Array(await new Response(t).arrayBuffer())), LS = (t, ...e) => {
  try {
    return !!t(...e);
  } catch {
    return !1;
  }
}, GX = NS && LS(() => {
  let t = !1;
  const e = new Request(Jn.origin, {
    body: new ReadableStream(),
    method: "POST",
    get duplex() {
      return t = !0, "half";
    }
  }).headers.has("Content-Type");
  return t && !e;
}), U6 = 64 * 1024, V1 = NS && LS(() => Oe.isReadableStream(new Response("").body)), m0 = {
  stream: V1 && ((t) => t.body)
};
pp && ((t) => {
  ["text", "arrayBuffer", "blob", "formData", "stream"].forEach((e) => {
    !m0[e] && (m0[e] = Oe.isFunction(t[e]) ? (r) => r[e]() : (r, n) => {
      throw new or(`Response type '${e}' is not supported`, or.ERR_NOT_SUPPORT, n);
    });
  });
})(new Response());
const YX = async (t) => {
  if (t == null)
    return 0;
  if (Oe.isBlob(t))
    return t.size;
  if (Oe.isSpecCompliantForm(t))
    return (await new Request(Jn.origin, {
      method: "POST",
      body: t
    }).arrayBuffer()).byteLength;
  if (Oe.isArrayBufferView(t) || Oe.isArrayBuffer(t))
    return t.byteLength;
  if (Oe.isURLSearchParams(t) && (t = t + ""), Oe.isString(t))
    return (await VX(t)).byteLength;
}, JX = async (t, e) => {
  const r = Oe.toFiniteNumber(t.getContentLength());
  return r ?? YX(e);
}, XX = pp && (async (t) => {
  let {
    url: e,
    method: r,
    data: n,
    signal: i,
    cancelToken: s,
    timeout: o,
    onDownloadProgress: a,
    onUploadProgress: u,
    responseType: l,
    headers: d,
    withCredentials: p = "same-origin",
    fetchOptions: w
  } = OS(t);
  l = l ? (l + "").toLowerCase() : "text";
  let A = zX([i, s && s.toAbortSignal()], o), M;
  const N = A && A.unsubscribe && (() => {
    A.unsubscribe();
  });
  let L;
  try {
    if (u && GX && r !== "get" && r !== "head" && (L = await JX(d, n)) !== 0) {
      let V = new Request(e, {
        method: "POST",
        body: n,
        duplex: "half"
      }), te;
      if (Oe.isFormData(n) && (te = V.headers.get("content-type")) && d.setContentType(te), V.body) {
        const [R, K] = $6(
          L,
          g0(B6(u))
        );
        n = j6(V.body, U6, R, K);
      }
    }
    Oe.isString(p) || (p = p ? "include" : "omit");
    const B = "credentials" in Request.prototype;
    M = new Request(e, {
      ...w,
      signal: A,
      method: r.toUpperCase(),
      headers: d.normalize().toJSON(),
      body: n,
      duplex: "half",
      credentials: B ? p : void 0
    });
    let $ = await fetch(M);
    const H = V1 && (l === "stream" || l === "response");
    if (V1 && (a || H && N)) {
      const V = {};
      ["status", "statusText", "headers"].forEach((ge) => {
        V[ge] = $[ge];
      });
      const te = Oe.toFiniteNumber($.headers.get("content-length")), [R, K] = a && $6(
        te,
        g0(B6(a), !0)
      ) || [];
      $ = new Response(
        j6($.body, U6, R, () => {
          K && K(), N && N();
        }),
        V
      );
    }
    l = l || "text";
    let W = await m0[Oe.findKey(m0, l) || "text"]($, t);
    return !H && N && N(), await new Promise((V, te) => {
      RS(V, te, {
        data: W,
        headers: yi.from($.headers),
        status: $.status,
        statusText: $.statusText,
        config: t,
        request: M
      });
    });
  } catch (B) {
    throw N && N(), B && B.name === "TypeError" && /fetch/i.test(B.message) ? Object.assign(
      new or("Network Error", or.ERR_NETWORK, t, M),
      {
        cause: B.cause || B
      }
    ) : or.from(B, B && B.code, t, M);
  }
}), G1 = {
  http: hX,
  xhr: qX,
  fetch: XX
};
Oe.forEach(G1, (t, e) => {
  if (t) {
    try {
      Object.defineProperty(t, "name", { value: e });
    } catch {
    }
    Object.defineProperty(t, "adapterName", { value: e });
  }
});
const q6 = (t) => `- ${t}`, ZX = (t) => Oe.isFunction(t) || t === null || t === !1, kS = {
  getAdapter: (t) => {
    t = Oe.isArray(t) ? t : [t];
    const { length: e } = t;
    let r, n;
    const i = {};
    for (let s = 0; s < e; s++) {
      r = t[s];
      let o;
      if (n = r, !ZX(r) && (n = G1[(o = String(r)).toLowerCase()], n === void 0))
        throw new or(`Unknown adapter '${o}'`);
      if (n)
        break;
      i[o || "#" + s] = n;
    }
    if (!n) {
      const s = Object.entries(i).map(
        ([a, u]) => `adapter ${a} ` + (u === !1 ? "is not supported by the environment" : "is not available in the build")
      );
      let o = e ? s.length > 1 ? `since :
` + s.map(q6).join(`
`) : " " + q6(s[0]) : "as no adapter specified";
      throw new or(
        "There is no suitable adapter to dispatch the request " + o,
        "ERR_NOT_SUPPORT"
      );
    }
    return n;
  },
  adapters: G1
};
function Rm(t) {
  if (t.cancelToken && t.cancelToken.throwIfRequested(), t.signal && t.signal.aborted)
    throw new Hu(null, t);
}
function z6(t) {
  return Rm(t), t.headers = yi.from(t.headers), t.data = Tm.call(
    t,
    t.transformRequest
  ), ["post", "put", "patch"].indexOf(t.method) !== -1 && t.headers.setContentType("application/x-www-form-urlencoded", !1), kS.getAdapter(t.adapter || oh.adapter)(t).then(function(n) {
    return Rm(t), n.data = Tm.call(
      t,
      t.transformResponse,
      n
    ), n.headers = yi.from(n.headers), n;
  }, function(n) {
    return TS(n) || (Rm(t), n && n.response && (n.response.data = Tm.call(
      t,
      t.transformResponse,
      n.response
    ), n.response.headers = yi.from(n.response.headers))), Promise.reject(n);
  });
}
const $S = "1.7.8", gp = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((t, e) => {
  gp[t] = function(n) {
    return typeof n === t || "a" + (e < 1 ? "n " : " ") + t;
  };
});
const W6 = {};
gp.transitional = function(e, r, n) {
  function i(s, o) {
    return "[Axios v" + $S + "] Transitional option '" + s + "'" + o + (n ? ". " + n : "");
  }
  return (s, o, a) => {
    if (e === !1)
      throw new or(
        i(o, " has been removed" + (r ? " in " + r : "")),
        or.ERR_DEPRECATED
      );
    return r && !W6[o] && (W6[o] = !0, console.warn(
      i(
        o,
        " has been deprecated since v" + r + " and will be removed in the near future"
      )
    )), e ? e(s, o, a) : !0;
  };
};
gp.spelling = function(e) {
  return (r, n) => (console.warn(`${n} is likely a misspelling of ${e}`), !0);
};
function QX(t, e, r) {
  if (typeof t != "object")
    throw new or("options must be an object", or.ERR_BAD_OPTION_VALUE);
  const n = Object.keys(t);
  let i = n.length;
  for (; i-- > 0; ) {
    const s = n[i], o = e[s];
    if (o) {
      const a = t[s], u = a === void 0 || o(a, s, t);
      if (u !== !0)
        throw new or("option " + s + " must be " + u, or.ERR_BAD_OPTION_VALUE);
      continue;
    }
    if (r !== !0)
      throw new or("Unknown option " + s, or.ERR_BAD_OPTION);
  }
}
const Bd = {
  assertOptions: QX,
  validators: gp
}, Bs = Bd.validators;
let ac = class {
  constructor(e) {
    this.defaults = e, this.interceptors = {
      request: new L6(),
      response: new L6()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  async request(e, r) {
    try {
      return await this._request(e, r);
    } catch (n) {
      if (n instanceof Error) {
        let i = {};
        Error.captureStackTrace ? Error.captureStackTrace(i) : i = new Error();
        const s = i.stack ? i.stack.replace(/^.+\n/, "") : "";
        try {
          n.stack ? s && !String(n.stack).endsWith(s.replace(/^.+\n.+\n/, "")) && (n.stack += `
` + s) : n.stack = s;
        } catch {
        }
      }
      throw n;
    }
  }
  _request(e, r) {
    typeof e == "string" ? (r = r || {}, r.url = e) : r = e || {}, r = gc(this.defaults, r);
    const { transitional: n, paramsSerializer: i, headers: s } = r;
    n !== void 0 && Bd.assertOptions(n, {
      silentJSONParsing: Bs.transitional(Bs.boolean),
      forcedJSONParsing: Bs.transitional(Bs.boolean),
      clarifyTimeoutError: Bs.transitional(Bs.boolean)
    }, !1), i != null && (Oe.isFunction(i) ? r.paramsSerializer = {
      serialize: i
    } : Bd.assertOptions(i, {
      encode: Bs.function,
      serialize: Bs.function
    }, !0)), Bd.assertOptions(r, {
      baseUrl: Bs.spelling("baseURL"),
      withXsrfToken: Bs.spelling("withXSRFToken")
    }, !0), r.method = (r.method || this.defaults.method || "get").toLowerCase();
    let o = s && Oe.merge(
      s.common,
      s[r.method]
    );
    s && Oe.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (M) => {
        delete s[M];
      }
    ), r.headers = yi.concat(o, s);
    const a = [];
    let u = !0;
    this.interceptors.request.forEach(function(N) {
      typeof N.runWhen == "function" && N.runWhen(r) === !1 || (u = u && N.synchronous, a.unshift(N.fulfilled, N.rejected));
    });
    const l = [];
    this.interceptors.response.forEach(function(N) {
      l.push(N.fulfilled, N.rejected);
    });
    let d, p = 0, w;
    if (!u) {
      const M = [z6.bind(this), void 0];
      for (M.unshift.apply(M, a), M.push.apply(M, l), w = M.length, d = Promise.resolve(r); p < w; )
        d = d.then(M[p++], M[p++]);
      return d;
    }
    w = a.length;
    let A = r;
    for (p = 0; p < w; ) {
      const M = a[p++], N = a[p++];
      try {
        A = M(A);
      } catch (L) {
        N.call(this, L);
        break;
      }
    }
    try {
      d = z6.call(this, A);
    } catch (M) {
      return Promise.reject(M);
    }
    for (p = 0, w = l.length; p < w; )
      d = d.then(l[p++], l[p++]);
    return d;
  }
  getUri(e) {
    e = gc(this.defaults, e);
    const r = DS(e.baseURL, e.url);
    return MS(r, e.params, e.paramsSerializer);
  }
};
Oe.forEach(["delete", "get", "head", "options"], function(e) {
  ac.prototype[e] = function(r, n) {
    return this.request(gc(n || {}, {
      method: e,
      url: r,
      data: (n || {}).data
    }));
  };
});
Oe.forEach(["post", "put", "patch"], function(e) {
  function r(n) {
    return function(s, o, a) {
      return this.request(gc(a || {}, {
        method: e,
        headers: n ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url: s,
        data: o
      }));
    };
  }
  ac.prototype[e] = r(), ac.prototype[e + "Form"] = r(!0);
});
let eZ = class BS {
  constructor(e) {
    if (typeof e != "function")
      throw new TypeError("executor must be a function.");
    let r;
    this.promise = new Promise(function(s) {
      r = s;
    });
    const n = this;
    this.promise.then((i) => {
      if (!n._listeners) return;
      let s = n._listeners.length;
      for (; s-- > 0; )
        n._listeners[s](i);
      n._listeners = null;
    }), this.promise.then = (i) => {
      let s;
      const o = new Promise((a) => {
        n.subscribe(a), s = a;
      }).then(i);
      return o.cancel = function() {
        n.unsubscribe(s);
      }, o;
    }, e(function(s, o, a) {
      n.reason || (n.reason = new Hu(s, o, a), r(n.reason));
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason)
      throw this.reason;
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(e) {
    if (this.reason) {
      e(this.reason);
      return;
    }
    this._listeners ? this._listeners.push(e) : this._listeners = [e];
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(e) {
    if (!this._listeners)
      return;
    const r = this._listeners.indexOf(e);
    r !== -1 && this._listeners.splice(r, 1);
  }
  toAbortSignal() {
    const e = new AbortController(), r = (n) => {
      e.abort(n);
    };
    return this.subscribe(r), e.signal.unsubscribe = () => this.unsubscribe(r), e.signal;
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let e;
    return {
      token: new BS(function(i) {
        e = i;
      }),
      cancel: e
    };
  }
};
function tZ(t) {
  return function(r) {
    return t.apply(null, r);
  };
}
function rZ(t) {
  return Oe.isObject(t) && t.isAxiosError === !0;
}
const Y1 = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(Y1).forEach(([t, e]) => {
  Y1[e] = t;
});
function FS(t) {
  const e = new ac(t), r = gS(ac.prototype.request, e);
  return Oe.extend(r, ac.prototype, e, { allOwnKeys: !0 }), Oe.extend(r, e, null, { allOwnKeys: !0 }), r.create = function(i) {
    return FS(gc(t, i));
  }, r;
}
const mn = FS(oh);
mn.Axios = ac;
mn.CanceledError = Hu;
mn.CancelToken = eZ;
mn.isCancel = TS;
mn.VERSION = $S;
mn.toFormData = dp;
mn.AxiosError = or;
mn.Cancel = mn.CanceledError;
mn.all = function(e) {
  return Promise.all(e);
};
mn.spread = tZ;
mn.isAxiosError = rZ;
mn.mergeConfig = gc;
mn.AxiosHeaders = yi;
mn.formToJSON = (t) => CS(Oe.isHTMLForm(t) ? new FormData(t) : t);
mn.getAdapter = kS.getAdapter;
mn.HttpStatusCode = Y1;
mn.default = mn;
const {
  Axios: noe,
  AxiosError: jS,
  CanceledError: ioe,
  isCancel: soe,
  CancelToken: ooe,
  VERSION: aoe,
  all: coe,
  Cancel: uoe,
  isAxiosError: foe,
  spread: loe,
  toFormData: hoe,
  AxiosHeaders: doe,
  HttpStatusCode: poe,
  formToJSON: goe,
  getAdapter: moe,
  mergeConfig: voe
} = mn, US = mn.create({
  timeout: 6e4,
  headers: {
    "Content-Type": "application/json",
    token: localStorage.getItem("auth")
  }
});
function nZ(t) {
  var e, r, n;
  if (((e = t.data) == null ? void 0 : e.success) !== !0) {
    const i = new jS(
      (r = t.data) == null ? void 0 : r.errorMessage,
      (n = t.data) == null ? void 0 : n.errorCode,
      t.config,
      t.request,
      t
    );
    return Promise.reject(i);
  } else
    return t;
}
function iZ(t) {
  var r;
  console.log(t);
  const e = (r = t.response) == null ? void 0 : r.data;
  if (e) {
    console.log(e, "responseData");
    const n = new jS(
      e.errorMessage,
      t.code,
      t.config,
      t.request,
      t.response
    );
    return Promise.reject(n);
  } else
    return Promise.reject(t);
}
US.interceptors.response.use(
  nZ,
  iZ
);
class sZ {
  constructor(e) {
    Ds(this, "_apiBase", "");
    this.request = e;
  }
  setApiBase(e) {
    this._apiBase = e || "";
  }
  async getNonce(e) {
    const { data: r } = await this.request.post(`${this._apiBase}/api/v2/user/nonce`, e);
    return r.data;
  }
  async getEmailCode(e, r) {
    const { data: n } = await this.request.post(`${this._apiBase}/api/v2/user/get_code`, e, {
      headers: { "Captcha-Param": r }
    });
    return n.data;
  }
  async emailLogin(e) {
    return (await this.request.post(`${this._apiBase}/api/v2/user/login`, e)).data;
  }
  async walletLogin(e) {
    return (await this.request.post(`${this._apiBase}/api/v2/user/login`, e)).data;
  }
  async tonLogin(e) {
    return (await this.request.post(`${this._apiBase}/api/v2/user/login`, e)).data;
  }
  async bindEmail(e) {
    return (await this.request.post("/api/v2/user/account/bind", e)).data;
  }
  async bindTonWallet(e) {
    return (await this.request.post("/api/v2/user/account/bind", e)).data;
  }
  async bindEvmWallet(e) {
    return (await this.request.post("/api/v2/user/account/bind", e)).data;
  }
}
const Ta = new sZ(US), oZ = {
  projectId: "7a4434fefbcc9af474fb5c995e47d286",
  metadata: {
    name: "codatta",
    description: "codatta",
    url: "https://codatta.io/",
    icons: ["https://avatars.githubusercontent.com/u/171659315"]
  }
}, aZ = PJ({
  appName: "codatta",
  appLogoUrl: "https://avatars.githubusercontent.com/u/171659315"
}), qS = Sa({
  saveLastUsedWallet: () => {
  },
  lastUsedWallet: null,
  wallets: [],
  initialized: !1,
  featuredWallets: []
});
function mp() {
  return Tn(qS);
}
function boe(t) {
  const { apiBaseUrl: e } = t, [r, n] = Qt([]), [i, s] = Qt([]), [o, a] = Qt(null), [u, l] = Qt(!1), d = (A) => {
    console.log("saveLastUsedWallet", A);
  };
  function p(A) {
    const M = A.filter((B) => B.featured || B.installed), N = A.filter((B) => !B.featured && !B.installed), L = [...M, ...N];
    n(L), s(M);
  }
  async function w() {
    const A = [], M = /* @__PURE__ */ new Map();
    qR.forEach((L) => {
      const B = new vl(L);
      L.name === "Coinbase Wallet" && B.EIP6963Detected({
        info: { name: "Coinbase Wallet", uuid: "coinbase", icon: L.image, rdns: "coinbase" },
        provider: aZ.getProvider()
      }), M.set(B.key, B), A.push(B);
    }), (await UG()).forEach((L) => {
      const B = M.get(L.info.name);
      if (B)
        B.EIP6963Detected(L);
      else {
        const $ = new vl(L);
        M.set($.key, $), A.push($);
      }
    });
    try {
      const L = JSON.parse(localStorage.getItem("xn-last-used-info") || "{}"), B = M.get(L.key);
      if (B) {
        if (B.lastUsed = !0, L.provider === "UniversalProvider") {
          const $ = await EE.init(oZ);
          $.session && B.setUniversalProvider($);
        }
        a(B);
      }
    } catch (L) {
      console.log(L);
    }
    p(A), l(!0);
  }
  return Dn(() => {
    w(), Ta.setApiBase(e);
  }, []), /* @__PURE__ */ pe.jsx(
    qS.Provider,
    {
      value: {
        saveLastUsedWallet: d,
        wallets: r,
        initialized: u,
        lastUsedWallet: o,
        featuredWallets: i
      },
      children: t.children
    }
  );
}
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const cZ = (t) => t.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase(), zS = (...t) => t.filter((e, r, n) => !!e && e.trim() !== "" && n.indexOf(e) === r).join(" ").trim();
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var uZ = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  strokeWidth: 2,
  strokeLinecap: "round",
  strokeLinejoin: "round"
};
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const fZ = gv(
  ({
    color: t = "currentColor",
    size: e = 24,
    strokeWidth: r = 2,
    absoluteStrokeWidth: n,
    className: i = "",
    children: s,
    iconNode: o,
    ...a
  }, u) => qd(
    "svg",
    {
      ref: u,
      ...uZ,
      width: e,
      height: e,
      stroke: t,
      strokeWidth: n ? Number(r) * 24 / Number(e) : r,
      className: zS("lucide", i),
      ...a
    },
    [
      ...o.map(([l, d]) => qd(l, d)),
      ...Array.isArray(s) ? s : [s]
    ]
  )
);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const us = (t, e) => {
  const r = gv(
    ({ className: n, ...i }, s) => qd(fZ, {
      ref: s,
      iconNode: e,
      className: zS(`lucide-${cZ(t)}`, n),
      ...i
    })
  );
  return r.displayName = `${t}`, r;
};
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const lZ = us("ArrowLeft", [
  ["path", { d: "m12 19-7-7 7-7", key: "1l729n" }],
  ["path", { d: "M19 12H5", key: "x3x0zl" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const WS = us("ArrowRight", [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "m12 5 7 7-7 7", key: "xquz4c" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const hZ = us("ChevronRight", [
  ["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const dZ = us("CircleCheckBig", [
  ["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const pZ = us("Download", [
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["polyline", { points: "7 10 12 15 17 10", key: "2ggqvy" }],
  ["line", { x1: "12", x2: "12", y1: "15", y2: "3", key: "1vk2je" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gZ = us("Globe", [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20", key: "13o1zl" }],
  ["path", { d: "M2 12h20", key: "9i4pu4" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const HS = us("Laptop", [
  [
    "path",
    {
      d: "M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",
      key: "tarvll"
    }
  ]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mZ = us("Link2", [
  ["path", { d: "M9 17H7A5 5 0 0 1 7 7h2", key: "8i5ue5" }],
  ["path", { d: "M15 7h2a5 5 0 1 1 0 10h-2", key: "1b9ql8" }],
  ["line", { x1: "8", x2: "16", y1: "12", y2: "12", key: "1jonct" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mc = us("LoaderCircle", [
  ["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vZ = us("Mail", [
  ["rect", { width: "20", height: "16", x: "2", y: "4", rx: "2", key: "18n3k1" }],
  ["path", { d: "m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7", key: "1ocrg3" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const KS = us("Search", [
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }],
  ["path", { d: "m21 21-4.3-4.3", key: "1qie3q" }]
]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const bZ = us("UserRoundCheck", [
  ["path", { d: "M2 21a8 8 0 0 1 13.292-6", key: "bjp14o" }],
  ["circle", { cx: "10", cy: "8", r: "5", key: "o932ke" }],
  ["path", { d: "m16 19 2 2 4-4", key: "1b14m6" }]
]), H6 = /* @__PURE__ */ new Set();
function vp(t, e, r) {
  t || H6.has(e) || (console.warn(e), H6.add(e));
}
function yZ(t) {
  if (typeof Proxy > "u")
    return t;
  const e = /* @__PURE__ */ new Map(), r = (...n) => (process.env.NODE_ENV !== "production" && vp(!1, "motion() is deprecated. Use motion.create() instead."), t(...n));
  return new Proxy(r, {
    /**
     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.
     * The prop name is passed through as `key` and we can use that to generate a `motion`
     * DOM component with that name.
     */
    get: (n, i) => i === "create" ? t : (e.has(i) || e.set(i, t(i)), e.get(i))
  });
}
function bp(t) {
  return t !== null && typeof t == "object" && typeof t.start == "function";
}
const J1 = (t) => Array.isArray(t);
function VS(t, e) {
  if (!Array.isArray(e))
    return !1;
  const r = e.length;
  if (r !== t.length)
    return !1;
  for (let n = 0; n < r; n++)
    if (e[n] !== t[n])
      return !1;
  return !0;
}
function Il(t) {
  return typeof t == "string" || Array.isArray(t);
}
function K6(t) {
  const e = [{}, {}];
  return t == null || t.values.forEach((r, n) => {
    e[0][n] = r.get(), e[1][n] = r.getVelocity();
  }), e;
}
function Mb(t, e, r, n) {
  if (typeof e == "function") {
    const [i, s] = K6(n);
    e = e(r !== void 0 ? r : t.custom, i, s);
  }
  if (typeof e == "string" && (e = t.variants && t.variants[e]), typeof e == "function") {
    const [i, s] = K6(n);
    e = e(r !== void 0 ? r : t.custom, i, s);
  }
  return e;
}
function yp(t, e, r) {
  const n = t.getProps();
  return Mb(n, e, r !== void 0 ? r : n.custom, t);
}
const Ib = [
  "animate",
  "whileInView",
  "whileFocus",
  "whileHover",
  "whileTap",
  "whileDrag",
  "exit"
], Cb = ["initial", ...Ib], ah = [
  "transformPerspective",
  "x",
  "y",
  "z",
  "translateX",
  "translateY",
  "translateZ",
  "scale",
  "scaleX",
  "scaleY",
  "rotate",
  "rotateX",
  "rotateY",
  "rotateZ",
  "skew",
  "skewX",
  "skewY"
], Ac = new Set(ah), Vs = (t) => t * 1e3, To = (t) => t / 1e3, wZ = {
  type: "spring",
  stiffness: 500,
  damping: 25,
  restSpeed: 10
}, xZ = (t) => ({
  type: "spring",
  stiffness: 550,
  damping: t === 0 ? 2 * Math.sqrt(550) : 30,
  restSpeed: 10
}), _Z = {
  type: "keyframes",
  duration: 0.8
}, EZ = {
  type: "keyframes",
  ease: [0.25, 0.1, 0.35, 1],
  duration: 0.3
}, SZ = (t, { keyframes: e }) => e.length > 2 ? _Z : Ac.has(t) ? t.startsWith("scale") ? xZ(e[1]) : wZ : EZ;
function Tb(t, e) {
  return t ? t[e] || t.default || t : void 0;
}
const AZ = {
  useManualTiming: !1
}, PZ = (t) => t !== null;
function wp(t, { repeat: e, repeatType: r = "loop" }, n) {
  const i = t.filter(PZ), s = e && r !== "loop" && e % 2 === 1 ? 0 : i.length - 1;
  return !s || n === void 0 ? i[s] : n;
}
const Un = (t) => t;
function MZ(t) {
  let e = /* @__PURE__ */ new Set(), r = /* @__PURE__ */ new Set(), n = !1, i = !1;
  const s = /* @__PURE__ */ new WeakSet();
  let o = {
    delta: 0,
    timestamp: 0,
    isProcessing: !1
  };
  function a(l) {
    s.has(l) && (u.schedule(l), t()), l(o);
  }
  const u = {
    /**
     * Schedule a process to run on the next frame.
     */
    schedule: (l, d = !1, p = !1) => {
      const A = p && n ? e : r;
      return d && s.add(l), A.has(l) || A.add(l), l;
    },
    /**
     * Cancel the provided callback from running on the next frame.
     */
    cancel: (l) => {
      r.delete(l), s.delete(l);
    },
    /**
     * Execute all schedule callbacks.
     */
    process: (l) => {
      if (o = l, n) {
        i = !0;
        return;
      }
      n = !0, [e, r] = [r, e], r.clear(), e.forEach(a), n = !1, i && (i = !1, u.process(l));
    }
  };
  return u;
}
const gd = [
  "read",
  // Read
  "resolveKeyframes",
  // Write/Read/Write/Read
  "update",
  // Compute
  "preRender",
  // Compute
  "render",
  // Write
  "postRender"
  // Compute
], IZ = 40;
function GS(t, e) {
  let r = !1, n = !0;
  const i = {
    delta: 0,
    timestamp: 0,
    isProcessing: !1
  }, s = () => r = !0, o = gd.reduce((B, $) => (B[$] = MZ(s), B), {}), { read: a, resolveKeyframes: u, update: l, preRender: d, render: p, postRender: w } = o, A = () => {
    const B = performance.now();
    r = !1, i.delta = n ? 1e3 / 60 : Math.max(Math.min(B - i.timestamp, IZ), 1), i.timestamp = B, i.isProcessing = !0, a.process(i), u.process(i), l.process(i), d.process(i), p.process(i), w.process(i), i.isProcessing = !1, r && e && (n = !1, t(A));
  }, M = () => {
    r = !0, n = !0, i.isProcessing || t(A);
  };
  return { schedule: gd.reduce((B, $) => {
    const H = o[$];
    return B[$] = (W, V = !1, te = !1) => (r || M(), H.schedule(W, V, te)), B;
  }, {}), cancel: (B) => {
    for (let $ = 0; $ < gd.length; $++)
      o[gd[$]].cancel(B);
  }, state: i, steps: o };
}
const { schedule: Lr, cancel: wa, state: Fn, steps: Dm } = GS(typeof requestAnimationFrame < "u" ? requestAnimationFrame : Un, !0), YS = (t, e, r) => (((1 - 3 * r + 3 * e) * t + (3 * r - 6 * e)) * t + 3 * e) * t, CZ = 1e-7, TZ = 12;
function RZ(t, e, r, n, i) {
  let s, o, a = 0;
  do
    o = e + (r - e) / 2, s = YS(o, n, i) - t, s > 0 ? r = o : e = o;
  while (Math.abs(s) > CZ && ++a < TZ);
  return o;
}
function ch(t, e, r, n) {
  if (t === e && r === n)
    return Un;
  const i = (s) => RZ(s, 0, 1, t, r);
  return (s) => s === 0 || s === 1 ? s : YS(i(s), e, n);
}
const JS = (t) => (e) => e <= 0.5 ? t(2 * e) / 2 : (2 - t(2 * (1 - e))) / 2, XS = (t) => (e) => 1 - t(1 - e), ZS = /* @__PURE__ */ ch(0.33, 1.53, 0.69, 0.99), Rb = /* @__PURE__ */ XS(ZS), QS = /* @__PURE__ */ JS(Rb), e7 = (t) => (t *= 2) < 1 ? 0.5 * Rb(t) : 0.5 * (2 - Math.pow(2, -10 * (t - 1))), Db = (t) => 1 - Math.sin(Math.acos(t)), t7 = XS(Db), r7 = JS(Db), n7 = (t) => /^0[^.\s]+$/u.test(t);
function DZ(t) {
  return typeof t == "number" ? t === 0 : t !== null ? t === "none" || t === "0" || n7(t) : !0;
}
let Ku = Un, Uo = Un;
process.env.NODE_ENV !== "production" && (Ku = (t, e) => {
  !t && typeof console < "u" && console.warn(e);
}, Uo = (t, e) => {
  if (!t)
    throw new Error(e);
});
const i7 = (t) => /^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t), s7 = (t) => (e) => typeof e == "string" && e.startsWith(t), o7 = /* @__PURE__ */ s7("--"), OZ = /* @__PURE__ */ s7("var(--"), Ob = (t) => OZ(t) ? NZ.test(t.split("/*")[0].trim()) : !1, NZ = /var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu, LZ = (
  // eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive, as it can match a lot of words
  /^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u
);
function kZ(t) {
  const e = LZ.exec(t);
  if (!e)
    return [,];
  const [, r, n, i] = e;
  return [`--${r ?? n}`, i];
}
const $Z = 4;
function a7(t, e, r = 1) {
  Uo(r <= $Z, `Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);
  const [n, i] = kZ(t);
  if (!n)
    return;
  const s = window.getComputedStyle(e).getPropertyValue(n);
  if (s) {
    const o = s.trim();
    return i7(o) ? parseFloat(o) : o;
  }
  return Ob(i) ? a7(i, e, r + 1) : i;
}
const xa = (t, e, r) => r > e ? e : r < t ? t : r, Vu = {
  test: (t) => typeof t == "number",
  parse: parseFloat,
  transform: (t) => t
}, Cl = {
  ...Vu,
  transform: (t) => xa(0, 1, t)
}, md = {
  ...Vu,
  default: 1
}, uh = (t) => ({
  test: (e) => typeof e == "string" && e.endsWith(t) && e.split(" ").length === 1,
  parse: parseFloat,
  transform: (e) => `${e}${t}`
}), oa = /* @__PURE__ */ uh("deg"), Gs = /* @__PURE__ */ uh("%"), Vt = /* @__PURE__ */ uh("px"), BZ = /* @__PURE__ */ uh("vh"), FZ = /* @__PURE__ */ uh("vw"), V6 = {
  ...Gs,
  parse: (t) => Gs.parse(t) / 100,
  transform: (t) => Gs.transform(t * 100)
}, jZ = /* @__PURE__ */ new Set([
  "width",
  "height",
  "top",
  "left",
  "right",
  "bottom",
  "x",
  "y",
  "translateX",
  "translateY"
]), G6 = (t) => t === Vu || t === Vt, Y6 = (t, e) => parseFloat(t.split(", ")[e]), J6 = (t, e) => (r, { transform: n }) => {
  if (n === "none" || !n)
    return 0;
  const i = n.match(/^matrix3d\((.+)\)$/u);
  if (i)
    return Y6(i[1], e);
  {
    const s = n.match(/^matrix\((.+)\)$/u);
    return s ? Y6(s[1], t) : 0;
  }
}, UZ = /* @__PURE__ */ new Set(["x", "y", "z"]), qZ = ah.filter((t) => !UZ.has(t));
function zZ(t) {
  const e = [];
  return qZ.forEach((r) => {
    const n = t.getValue(r);
    n !== void 0 && (e.push([r, n.get()]), n.set(r.startsWith("scale") ? 1 : 0));
  }), e;
}
const Mu = {
  // Dimensions
  width: ({ x: t }, { paddingLeft: e = "0", paddingRight: r = "0" }) => t.max - t.min - parseFloat(e) - parseFloat(r),
  height: ({ y: t }, { paddingTop: e = "0", paddingBottom: r = "0" }) => t.max - t.min - parseFloat(e) - parseFloat(r),
  top: (t, { top: e }) => parseFloat(e),
  left: (t, { left: e }) => parseFloat(e),
  bottom: ({ y: t }, { top: e }) => parseFloat(e) + (t.max - t.min),
  right: ({ x: t }, { left: e }) => parseFloat(e) + (t.max - t.min),
  // Transform
  x: J6(4, 13),
  y: J6(5, 14)
};
Mu.translateX = Mu.x;
Mu.translateY = Mu.y;
const c7 = (t) => (e) => e.test(t), WZ = {
  test: (t) => t === "auto",
  parse: (t) => t
}, u7 = [Vu, Vt, Gs, oa, FZ, BZ, WZ], X6 = (t) => u7.find(c7(t)), cc = /* @__PURE__ */ new Set();
let X1 = !1, Z1 = !1;
function f7() {
  if (Z1) {
    const t = Array.from(cc).filter((n) => n.needsMeasurement), e = new Set(t.map((n) => n.element)), r = /* @__PURE__ */ new Map();
    e.forEach((n) => {
      const i = zZ(n);
      i.length && (r.set(n, i), n.render());
    }), t.forEach((n) => n.measureInitialState()), e.forEach((n) => {
      n.render();
      const i = r.get(n);
      i && i.forEach(([s, o]) => {
        var a;
        (a = n.getValue(s)) === null || a === void 0 || a.set(o);
      });
    }), t.forEach((n) => n.measureEndState()), t.forEach((n) => {
      n.suspendedScrollY !== void 0 && window.scrollTo(0, n.suspendedScrollY);
    });
  }
  Z1 = !1, X1 = !1, cc.forEach((t) => t.complete()), cc.clear();
}
function l7() {
  cc.forEach((t) => {
    t.readKeyframes(), t.needsMeasurement && (Z1 = !0);
  });
}
function HZ() {
  l7(), f7();
}
class Nb {
  constructor(e, r, n, i, s, o = !1) {
    this.isComplete = !1, this.isAsync = !1, this.needsMeasurement = !1, this.isScheduled = !1, this.unresolvedKeyframes = [...e], this.onComplete = r, this.name = n, this.motionValue = i, this.element = s, this.isAsync = o;
  }
  scheduleResolve() {
    this.isScheduled = !0, this.isAsync ? (cc.add(this), X1 || (X1 = !0, Lr.read(l7), Lr.resolveKeyframes(f7))) : (this.readKeyframes(), this.complete());
  }
  readKeyframes() {
    const { unresolvedKeyframes: e, name: r, element: n, motionValue: i } = this;
    for (let s = 0; s < e.length; s++)
      if (e[s] === null)
        if (s === 0) {
          const o = i == null ? void 0 : i.get(), a = e[e.length - 1];
          if (o !== void 0)
            e[0] = o;
          else if (n && r) {
            const u = n.readValue(r, a);
            u != null && (e[0] = u);
          }
          e[0] === void 0 && (e[0] = a), i && o === void 0 && i.set(e[0]);
        } else
          e[s] = e[s - 1];
  }
  setFinalKeyframe() {
  }
  measureInitialState() {
  }
  renderEndStyles() {
  }
  measureEndState() {
  }
  complete() {
    this.isComplete = !0, this.onComplete(this.unresolvedKeyframes, this.finalKeyframe), cc.delete(this);
  }
  cancel() {
    this.isComplete || (this.isScheduled = !1, cc.delete(this));
  }
  resume() {
    this.isComplete || this.scheduleResolve();
  }
}
const Yf = (t) => Math.round(t * 1e5) / 1e5, Lb = /-?(?:\d+(?:\.\d+)?|\.\d+)/gu;
function KZ(t) {
  return t == null;
}
const VZ = /^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu, kb = (t, e) => (r) => !!(typeof r == "string" && VZ.test(r) && r.startsWith(t) || e && !KZ(r) && Object.prototype.hasOwnProperty.call(r, e)), h7 = (t, e, r) => (n) => {
  if (typeof n != "string")
    return n;
  const [i, s, o, a] = n.match(Lb);
  return {
    [t]: parseFloat(i),
    [e]: parseFloat(s),
    [r]: parseFloat(o),
    alpha: a !== void 0 ? parseFloat(a) : 1
  };
}, GZ = (t) => xa(0, 255, t), Om = {
  ...Vu,
  transform: (t) => Math.round(GZ(t))
}, sc = {
  test: /* @__PURE__ */ kb("rgb", "red"),
  parse: /* @__PURE__ */ h7("red", "green", "blue"),
  transform: ({ red: t, green: e, blue: r, alpha: n = 1 }) => "rgba(" + Om.transform(t) + ", " + Om.transform(e) + ", " + Om.transform(r) + ", " + Yf(Cl.transform(n)) + ")"
};
function YZ(t) {
  let e = "", r = "", n = "", i = "";
  return t.length > 5 ? (e = t.substring(1, 3), r = t.substring(3, 5), n = t.substring(5, 7), i = t.substring(7, 9)) : (e = t.substring(1, 2), r = t.substring(2, 3), n = t.substring(3, 4), i = t.substring(4, 5), e += e, r += r, n += n, i += i), {
    red: parseInt(e, 16),
    green: parseInt(r, 16),
    blue: parseInt(n, 16),
    alpha: i ? parseInt(i, 16) / 255 : 1
  };
}
const Q1 = {
  test: /* @__PURE__ */ kb("#"),
  parse: YZ,
  transform: sc.transform
}, eu = {
  test: /* @__PURE__ */ kb("hsl", "hue"),
  parse: /* @__PURE__ */ h7("hue", "saturation", "lightness"),
  transform: ({ hue: t, saturation: e, lightness: r, alpha: n = 1 }) => "hsla(" + Math.round(t) + ", " + Gs.transform(Yf(e)) + ", " + Gs.transform(Yf(r)) + ", " + Yf(Cl.transform(n)) + ")"
}, Yn = {
  test: (t) => sc.test(t) || Q1.test(t) || eu.test(t),
  parse: (t) => sc.test(t) ? sc.parse(t) : eu.test(t) ? eu.parse(t) : Q1.parse(t),
  transform: (t) => typeof t == "string" ? t : t.hasOwnProperty("red") ? sc.transform(t) : eu.transform(t)
}, JZ = /(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;
function XZ(t) {
  var e, r;
  return isNaN(t) && typeof t == "string" && (((e = t.match(Lb)) === null || e === void 0 ? void 0 : e.length) || 0) + (((r = t.match(JZ)) === null || r === void 0 ? void 0 : r.length) || 0) > 0;
}
const d7 = "number", p7 = "color", ZZ = "var", QZ = "var(", Z6 = "${}", eQ = /var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;
function Tl(t) {
  const e = t.toString(), r = [], n = {
    color: [],
    number: [],
    var: []
  }, i = [];
  let s = 0;
  const a = e.replace(eQ, (u) => (Yn.test(u) ? (n.color.push(s), i.push(p7), r.push(Yn.parse(u))) : u.startsWith(QZ) ? (n.var.push(s), i.push(ZZ), r.push(u)) : (n.number.push(s), i.push(d7), r.push(parseFloat(u))), ++s, Z6)).split(Z6);
  return { values: r, split: a, indexes: n, types: i };
}
function g7(t) {
  return Tl(t).values;
}
function m7(t) {
  const { split: e, types: r } = Tl(t), n = e.length;
  return (i) => {
    let s = "";
    for (let o = 0; o < n; o++)
      if (s += e[o], i[o] !== void 0) {
        const a = r[o];
        a === d7 ? s += Yf(i[o]) : a === p7 ? s += Yn.transform(i[o]) : s += i[o];
      }
    return s;
  };
}
const tQ = (t) => typeof t == "number" ? 0 : t;
function rQ(t) {
  const e = g7(t);
  return m7(t)(e.map(tQ));
}
const _a = {
  test: XZ,
  parse: g7,
  createTransformer: m7,
  getAnimatableNone: rQ
}, nQ = /* @__PURE__ */ new Set(["brightness", "contrast", "saturate", "opacity"]);
function iQ(t) {
  const [e, r] = t.slice(0, -1).split("(");
  if (e === "drop-shadow")
    return t;
  const [n] = r.match(Lb) || [];
  if (!n)
    return t;
  const i = r.replace(n, "");
  let s = nQ.has(e) ? 1 : 0;
  return n !== r && (s *= 100), e + "(" + s + i + ")";
}
const sQ = /\b([a-z-]*)\(.*?\)/gu, ev = {
  ..._a,
  getAnimatableNone: (t) => {
    const e = t.match(sQ);
    return e ? e.map(iQ).join(" ") : t;
  }
}, oQ = {
  // Border props
  borderWidth: Vt,
  borderTopWidth: Vt,
  borderRightWidth: Vt,
  borderBottomWidth: Vt,
  borderLeftWidth: Vt,
  borderRadius: Vt,
  radius: Vt,
  borderTopLeftRadius: Vt,
  borderTopRightRadius: Vt,
  borderBottomRightRadius: Vt,
  borderBottomLeftRadius: Vt,
  // Positioning props
  width: Vt,
  maxWidth: Vt,
  height: Vt,
  maxHeight: Vt,
  top: Vt,
  right: Vt,
  bottom: Vt,
  left: Vt,
  // Spacing props
  padding: Vt,
  paddingTop: Vt,
  paddingRight: Vt,
  paddingBottom: Vt,
  paddingLeft: Vt,
  margin: Vt,
  marginTop: Vt,
  marginRight: Vt,
  marginBottom: Vt,
  marginLeft: Vt,
  // Misc
  backgroundPositionX: Vt,
  backgroundPositionY: Vt
}, aQ = {
  rotate: oa,
  rotateX: oa,
  rotateY: oa,
  rotateZ: oa,
  scale: md,
  scaleX: md,
  scaleY: md,
  scaleZ: md,
  skew: oa,
  skewX: oa,
  skewY: oa,
  distance: Vt,
  translateX: Vt,
  translateY: Vt,
  translateZ: Vt,
  x: Vt,
  y: Vt,
  z: Vt,
  perspective: Vt,
  transformPerspective: Vt,
  opacity: Cl,
  originX: V6,
  originY: V6,
  originZ: Vt
}, Q6 = {
  ...Vu,
  transform: Math.round
}, $b = {
  ...oQ,
  ...aQ,
  zIndex: Q6,
  size: Vt,
  // SVG
  fillOpacity: Cl,
  strokeOpacity: Cl,
  numOctaves: Q6
}, cQ = {
  ...$b,
  // Color props
  color: Yn,
  backgroundColor: Yn,
  outlineColor: Yn,
  fill: Yn,
  stroke: Yn,
  // Border props
  borderColor: Yn,
  borderTopColor: Yn,
  borderRightColor: Yn,
  borderBottomColor: Yn,
  borderLeftColor: Yn,
  filter: ev,
  WebkitFilter: ev
}, Bb = (t) => cQ[t];
function v7(t, e) {
  let r = Bb(t);
  return r !== ev && (r = _a), r.getAnimatableNone ? r.getAnimatableNone(e) : void 0;
}
const uQ = /* @__PURE__ */ new Set(["auto", "none", "0"]);
function fQ(t, e, r) {
  let n = 0, i;
  for (; n < t.length && !i; ) {
    const s = t[n];
    typeof s == "string" && !uQ.has(s) && Tl(s).values.length && (i = t[n]), n++;
  }
  if (i && r)
    for (const s of e)
      t[s] = v7(r, i);
}
class b7 extends Nb {
  constructor(e, r, n, i, s) {
    super(e, r, n, i, s, !0);
  }
  readKeyframes() {
    const { unresolvedKeyframes: e, element: r, name: n } = this;
    if (!r || !r.current)
      return;
    super.readKeyframes();
    for (let u = 0; u < e.length; u++) {
      let l = e[u];
      if (typeof l == "string" && (l = l.trim(), Ob(l))) {
        const d = a7(l, r.current);
        d !== void 0 && (e[u] = d), u === e.length - 1 && (this.finalKeyframe = l);
      }
    }
    if (this.resolveNoneKeyframes(), !jZ.has(n) || e.length !== 2)
      return;
    const [i, s] = e, o = X6(i), a = X6(s);
    if (o !== a)
      if (G6(o) && G6(a))
        for (let u = 0; u < e.length; u++) {
          const l = e[u];
          typeof l == "string" && (e[u] = parseFloat(l));
        }
      else
        this.needsMeasurement = !0;
  }
  resolveNoneKeyframes() {
    const { unresolvedKeyframes: e, name: r } = this, n = [];
    for (let i = 0; i < e.length; i++)
      DZ(e[i]) && n.push(i);
    n.length && fQ(e, n, r);
  }
  measureInitialState() {
    const { element: e, unresolvedKeyframes: r, name: n } = this;
    if (!e || !e.current)
      return;
    n === "height" && (this.suspendedScrollY = window.pageYOffset), this.measuredOrigin = Mu[n](e.measureViewportBox(), window.getComputedStyle(e.current)), r[0] = this.measuredOrigin;
    const i = r[r.length - 1];
    i !== void 0 && e.getValue(n, i).jump(i, !1);
  }
  measureEndState() {
    var e;
    const { element: r, name: n, unresolvedKeyframes: i } = this;
    if (!r || !r.current)
      return;
    const s = r.getValue(n);
    s && s.jump(this.measuredOrigin, !1);
    const o = i.length - 1, a = i[o];
    i[o] = Mu[n](r.measureViewportBox(), window.getComputedStyle(r.current)), a !== null && this.finalKeyframe === void 0 && (this.finalKeyframe = a), !((e = this.removedTransforms) === null || e === void 0) && e.length && this.removedTransforms.forEach(([u, l]) => {
      r.getValue(u).set(l);
    }), this.resolveNoneKeyframes();
  }
}
function Fb(t) {
  return typeof t == "function";
}
let Fd;
function lQ() {
  Fd = void 0;
}
const Ys = {
  now: () => (Fd === void 0 && Ys.set(Fn.isProcessing || AZ.useManualTiming ? Fn.timestamp : performance.now()), Fd),
  set: (t) => {
    Fd = t, queueMicrotask(lQ);
  }
}, e_ = (t, e) => e === "zIndex" ? !1 : !!(typeof t == "number" || Array.isArray(t) || typeof t == "string" && // It's animatable if we have a string
(_a.test(t) || t === "0") && // And it contains numbers and/or colors
!t.startsWith("url("));
function hQ(t) {
  const e = t[0];
  if (t.length === 1)
    return !0;
  for (let r = 0; r < t.length; r++)
    if (t[r] !== e)
      return !0;
}
function dQ(t, e, r, n) {
  const i = t[0];
  if (i === null)
    return !1;
  if (e === "display" || e === "visibility")
    return !0;
  const s = t[t.length - 1], o = e_(i, e), a = e_(s, e);
  return Ku(o === a, `You are trying to animate ${e} from "${i}" to "${s}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${s} via the \`style\` property.`), !o || !a ? !1 : hQ(t) || (r === "spring" || Fb(r)) && n;
}
const pQ = 40;
class y7 {
  constructor({ autoplay: e = !0, delay: r = 0, type: n = "keyframes", repeat: i = 0, repeatDelay: s = 0, repeatType: o = "loop", ...a }) {
    this.isStopped = !1, this.hasAttemptedResolve = !1, this.createdAt = Ys.now(), this.options = {
      autoplay: e,
      delay: r,
      type: n,
      repeat: i,
      repeatDelay: s,
      repeatType: o,
      ...a
    }, this.updateFinishedPromise();
  }
  /**
   * This method uses the createdAt and resolvedAt to calculate the
   * animation startTime. *Ideally*, we would use the createdAt time as t=0
   * as the following frame would then be the first frame of the animation in
   * progress, which would feel snappier.
   *
   * However, if there's a delay (main thread work) between the creation of
   * the animation and the first commited frame, we prefer to use resolvedAt
   * to avoid a sudden jump into the animation.
   */
  calcStartTime() {
    return this.resolvedAt ? this.resolvedAt - this.createdAt > pQ ? this.resolvedAt : this.createdAt : this.createdAt;
  }
  /**
   * A getter for resolved data. If keyframes are not yet resolved, accessing
   * this.resolved will synchronously flush all pending keyframe resolvers.
   * This is a deoptimisation, but at its worst still batches read/writes.
   */
  get resolved() {
    return !this._resolved && !this.hasAttemptedResolve && HZ(), this._resolved;
  }
  /**
   * A method to be called when the keyframes resolver completes. This method
   * will check if its possible to run the animation and, if not, skip it.
   * Otherwise, it will call initPlayback on the implementing class.
   */
  onKeyframesResolved(e, r) {
    this.resolvedAt = Ys.now(), this.hasAttemptedResolve = !0;
    const { name: n, type: i, velocity: s, delay: o, onComplete: a, onUpdate: u, isGenerator: l } = this.options;
    if (!l && !dQ(e, n, i, s))
      if (o)
        this.options.duration = 0;
      else {
        u == null || u(wp(e, this.options, r)), a == null || a(), this.resolveFinishedPromise();
        return;
      }
    const d = this.initPlayback(e, r);
    d !== !1 && (this._resolved = {
      keyframes: e,
      finalKeyframe: r,
      ...d
    }, this.onPostResolved());
  }
  onPostResolved() {
  }
  /**
   * Allows the returned animation to be awaited or promise-chained. Currently
   * resolves when the animation finishes at all but in a future update could/should
   * reject if its cancels.
   */
  then(e, r) {
    return this.currentFinishedPromise.then(e, r);
  }
  flatten() {
    this.options.type = "keyframes", this.options.ease = "linear";
  }
  updateFinishedPromise() {
    this.currentFinishedPromise = new Promise((e) => {
      this.resolveFinishedPromise = e;
    });
  }
}
function w7(t, e) {
  return e ? t * (1e3 / e) : 0;
}
const gQ = 5;
function x7(t, e, r) {
  const n = Math.max(e - gQ, 0);
  return w7(r - t(n), e - n);
}
const Nm = 1e-3, mQ = 0.01, t_ = 10, vQ = 0.05, bQ = 1;
function yQ({ duration: t = 800, bounce: e = 0.25, velocity: r = 0, mass: n = 1 }) {
  let i, s;
  Ku(t <= Vs(t_), "Spring duration must be 10 seconds or less");
  let o = 1 - e;
  o = xa(vQ, bQ, o), t = xa(mQ, t_, To(t)), o < 1 ? (i = (l) => {
    const d = l * o, p = d * t, w = d - r, A = tv(l, o), M = Math.exp(-p);
    return Nm - w / A * M;
  }, s = (l) => {
    const p = l * o * t, w = p * r + r, A = Math.pow(o, 2) * Math.pow(l, 2) * t, M = Math.exp(-p), N = tv(Math.pow(l, 2), o);
    return (-i(l) + Nm > 0 ? -1 : 1) * ((w - A) * M) / N;
  }) : (i = (l) => {
    const d = Math.exp(-l * t), p = (l - r) * t + 1;
    return -Nm + d * p;
  }, s = (l) => {
    const d = Math.exp(-l * t), p = (r - l) * (t * t);
    return d * p;
  });
  const a = 5 / t, u = xQ(i, s, a);
  if (t = Vs(t), isNaN(u))
    return {
      stiffness: 100,
      damping: 10,
      duration: t
    };
  {
    const l = Math.pow(u, 2) * n;
    return {
      stiffness: l,
      damping: o * 2 * Math.sqrt(n * l),
      duration: t
    };
  }
}
const wQ = 12;
function xQ(t, e, r) {
  let n = r;
  for (let i = 1; i < wQ; i++)
    n = n - t(n) / e(n);
  return n;
}
function tv(t, e) {
  return t * Math.sqrt(1 - e * e);
}
const _Q = ["duration", "bounce"], EQ = ["stiffness", "damping", "mass"];
function r_(t, e) {
  return e.some((r) => t[r] !== void 0);
}
function SQ(t) {
  let e = {
    velocity: 0,
    stiffness: 100,
    damping: 10,
    mass: 1,
    isResolvedFromDuration: !1,
    ...t
  };
  if (!r_(t, EQ) && r_(t, _Q)) {
    const r = yQ(t);
    e = {
      ...e,
      ...r,
      mass: 1
    }, e.isResolvedFromDuration = !0;
  }
  return e;
}
function _7({ keyframes: t, restDelta: e, restSpeed: r, ...n }) {
  const i = t[0], s = t[t.length - 1], o = { done: !1, value: i }, { stiffness: a, damping: u, mass: l, duration: d, velocity: p, isResolvedFromDuration: w } = SQ({
    ...n,
    velocity: -To(n.velocity || 0)
  }), A = p || 0, M = u / (2 * Math.sqrt(a * l)), N = s - i, L = To(Math.sqrt(a / l)), B = Math.abs(N) < 5;
  r || (r = B ? 0.01 : 2), e || (e = B ? 5e-3 : 0.5);
  let $;
  if (M < 1) {
    const H = tv(L, M);
    $ = (W) => {
      const V = Math.exp(-M * L * W);
      return s - V * ((A + M * L * N) / H * Math.sin(H * W) + N * Math.cos(H * W));
    };
  } else if (M === 1)
    $ = (H) => s - Math.exp(-L * H) * (N + (A + L * N) * H);
  else {
    const H = L * Math.sqrt(M * M - 1);
    $ = (W) => {
      const V = Math.exp(-M * L * W), te = Math.min(H * W, 300);
      return s - V * ((A + M * L * N) * Math.sinh(te) + H * N * Math.cosh(te)) / H;
    };
  }
  return {
    calculatedDuration: w && d || null,
    next: (H) => {
      const W = $(H);
      if (w)
        o.done = H >= d;
      else {
        let V = 0;
        M < 1 && (V = H === 0 ? Vs(A) : x7($, H, W));
        const te = Math.abs(V) <= r, R = Math.abs(s - W) <= e;
        o.done = te && R;
      }
      return o.value = o.done ? s : W, o;
    }
  };
}
function n_({ keyframes: t, velocity: e = 0, power: r = 0.8, timeConstant: n = 325, bounceDamping: i = 10, bounceStiffness: s = 500, modifyTarget: o, min: a, max: u, restDelta: l = 0.5, restSpeed: d }) {
  const p = t[0], w = {
    done: !1,
    value: p
  }, A = (K) => a !== void 0 && K < a || u !== void 0 && K > u, M = (K) => a === void 0 ? u : u === void 0 || Math.abs(a - K) < Math.abs(u - K) ? a : u;
  let N = r * e;
  const L = p + N, B = o === void 0 ? L : o(L);
  B !== L && (N = B - p);
  const $ = (K) => -N * Math.exp(-K / n), H = (K) => B + $(K), W = (K) => {
    const ge = $(K), Ee = H(K);
    w.done = Math.abs(ge) <= l, w.value = w.done ? B : Ee;
  };
  let V, te;
  const R = (K) => {
    A(w.value) && (V = K, te = _7({
      keyframes: [w.value, M(w.value)],
      velocity: x7(H, K, w.value),
      // TODO: This should be passing * 1000
      damping: i,
      stiffness: s,
      restDelta: l,
      restSpeed: d
    }));
  };
  return R(0), {
    calculatedDuration: null,
    next: (K) => {
      let ge = !1;
      return !te && V === void 0 && (ge = !0, W(K), R(K)), V !== void 0 && K >= V ? te.next(K - V) : (!ge && W(K), w);
    }
  };
}
const AQ = /* @__PURE__ */ ch(0.42, 0, 1, 1), PQ = /* @__PURE__ */ ch(0, 0, 0.58, 1), E7 = /* @__PURE__ */ ch(0.42, 0, 0.58, 1), MQ = (t) => Array.isArray(t) && typeof t[0] != "number", jb = (t) => Array.isArray(t) && typeof t[0] == "number", i_ = {
  linear: Un,
  easeIn: AQ,
  easeInOut: E7,
  easeOut: PQ,
  circIn: Db,
  circInOut: r7,
  circOut: t7,
  backIn: Rb,
  backInOut: QS,
  backOut: ZS,
  anticipate: e7
}, s_ = (t) => {
  if (jb(t)) {
    Uo(t.length === 4, "Cubic bezier arrays must contain four numerical values.");
    const [e, r, n, i] = t;
    return ch(e, r, n, i);
  } else if (typeof t == "string")
    return Uo(i_[t] !== void 0, `Invalid easing type '${t}'`), i_[t];
  return t;
}, IQ = (t, e) => (r) => e(t(r)), Ro = (...t) => t.reduce(IQ), Iu = (t, e, r) => {
  const n = e - t;
  return n === 0 ? 1 : (r - t) / n;
}, Qr = (t, e, r) => t + (e - t) * r;
function Lm(t, e, r) {
  return r < 0 && (r += 1), r > 1 && (r -= 1), r < 1 / 6 ? t + (e - t) * 6 * r : r < 1 / 2 ? e : r < 2 / 3 ? t + (e - t) * (2 / 3 - r) * 6 : t;
}
function CQ({ hue: t, saturation: e, lightness: r, alpha: n }) {
  t /= 360, e /= 100, r /= 100;
  let i = 0, s = 0, o = 0;
  if (!e)
    i = s = o = r;
  else {
    const a = r < 0.5 ? r * (1 + e) : r + e - r * e, u = 2 * r - a;
    i = Lm(u, a, t + 1 / 3), s = Lm(u, a, t), o = Lm(u, a, t - 1 / 3);
  }
  return {
    red: Math.round(i * 255),
    green: Math.round(s * 255),
    blue: Math.round(o * 255),
    alpha: n
  };
}
function v0(t, e) {
  return (r) => r > 0 ? e : t;
}
const km = (t, e, r) => {
  const n = t * t, i = r * (e * e - n) + n;
  return i < 0 ? 0 : Math.sqrt(i);
}, TQ = [Q1, sc, eu], RQ = (t) => TQ.find((e) => e.test(t));
function o_(t) {
  const e = RQ(t);
  if (Ku(!!e, `'${t}' is not an animatable color. Use the equivalent color code instead.`), !e)
    return !1;
  let r = e.parse(t);
  return e === eu && (r = CQ(r)), r;
}
const a_ = (t, e) => {
  const r = o_(t), n = o_(e);
  if (!r || !n)
    return v0(t, e);
  const i = { ...r };
  return (s) => (i.red = km(r.red, n.red, s), i.green = km(r.green, n.green, s), i.blue = km(r.blue, n.blue, s), i.alpha = Qr(r.alpha, n.alpha, s), sc.transform(i));
}, rv = /* @__PURE__ */ new Set(["none", "hidden"]);
function DQ(t, e) {
  return rv.has(t) ? (r) => r <= 0 ? t : e : (r) => r >= 1 ? e : t;
}
function OQ(t, e) {
  return (r) => Qr(t, e, r);
}
function Ub(t) {
  return typeof t == "number" ? OQ : typeof t == "string" ? Ob(t) ? v0 : Yn.test(t) ? a_ : kQ : Array.isArray(t) ? S7 : typeof t == "object" ? Yn.test(t) ? a_ : NQ : v0;
}
function S7(t, e) {
  const r = [...t], n = r.length, i = t.map((s, o) => Ub(s)(s, e[o]));
  return (s) => {
    for (let o = 0; o < n; o++)
      r[o] = i[o](s);
    return r;
  };
}
function NQ(t, e) {
  const r = { ...t, ...e }, n = {};
  for (const i in r)
    t[i] !== void 0 && e[i] !== void 0 && (n[i] = Ub(t[i])(t[i], e[i]));
  return (i) => {
    for (const s in n)
      r[s] = n[s](i);
    return r;
  };
}
function LQ(t, e) {
  var r;
  const n = [], i = { color: 0, var: 0, number: 0 };
  for (let s = 0; s < e.values.length; s++) {
    const o = e.types[s], a = t.indexes[o][i[o]], u = (r = t.values[a]) !== null && r !== void 0 ? r : 0;
    n[s] = u, i[o]++;
  }
  return n;
}
const kQ = (t, e) => {
  const r = _a.createTransformer(e), n = Tl(t), i = Tl(e);
  return n.indexes.var.length === i.indexes.var.length && n.indexes.color.length === i.indexes.color.length && n.indexes.number.length >= i.indexes.number.length ? rv.has(t) && !i.values.length || rv.has(e) && !n.values.length ? DQ(t, e) : Ro(S7(LQ(n, i), i.values), r) : (Ku(!0, `Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`), v0(t, e));
};
function A7(t, e, r) {
  return typeof t == "number" && typeof e == "number" && typeof r == "number" ? Qr(t, e, r) : Ub(t)(t, e);
}
function $Q(t, e, r) {
  const n = [], i = r || A7, s = t.length - 1;
  for (let o = 0; o < s; o++) {
    let a = i(t[o], t[o + 1]);
    if (e) {
      const u = Array.isArray(e) ? e[o] || Un : e;
      a = Ro(u, a);
    }
    n.push(a);
  }
  return n;
}
function BQ(t, e, { clamp: r = !0, ease: n, mixer: i } = {}) {
  const s = t.length;
  if (Uo(s === e.length, "Both input and output ranges must be the same length"), s === 1)
    return () => e[0];
  if (s === 2 && t[0] === t[1])
    return () => e[1];
  t[0] > t[s - 1] && (t = [...t].reverse(), e = [...e].reverse());
  const o = $Q(e, n, i), a = o.length, u = (l) => {
    let d = 0;
    if (a > 1)
      for (; d < t.length - 2 && !(l < t[d + 1]); d++)
        ;
    const p = Iu(t[d], t[d + 1], l);
    return o[d](p);
  };
  return r ? (l) => u(xa(t[0], t[s - 1], l)) : u;
}
function FQ(t, e) {
  const r = t[t.length - 1];
  for (let n = 1; n <= e; n++) {
    const i = Iu(0, e, n);
    t.push(Qr(r, 1, i));
  }
}
function jQ(t) {
  const e = [0];
  return FQ(e, t.length - 1), e;
}
function UQ(t, e) {
  return t.map((r) => r * e);
}
function qQ(t, e) {
  return t.map(() => e || E7).splice(0, t.length - 1);
}
function b0({ duration: t = 300, keyframes: e, times: r, ease: n = "easeInOut" }) {
  const i = MQ(n) ? n.map(s_) : s_(n), s = {
    done: !1,
    value: e[0]
  }, o = UQ(
    // Only use the provided offsets if they're the correct length
    // TODO Maybe we should warn here if there's a length mismatch
    r && r.length === e.length ? r : jQ(e),
    t
  ), a = BQ(o, e, {
    ease: Array.isArray(i) ? i : qQ(e, i)
  });
  return {
    calculatedDuration: t,
    next: (u) => (s.value = a(u), s.done = u >= t, s)
  };
}
const c_ = 2e4;
function zQ(t) {
  let e = 0;
  const r = 50;
  let n = t.next(e);
  for (; !n.done && e < c_; )
    e += r, n = t.next(e);
  return e >= c_ ? 1 / 0 : e;
}
const WQ = (t) => {
  const e = ({ timestamp: r }) => t(r);
  return {
    start: () => Lr.update(e, !0),
    stop: () => wa(e),
    /**
     * If we're processing this frame we can use the
     * framelocked timestamp to keep things in sync.
     */
    now: () => Fn.isProcessing ? Fn.timestamp : Ys.now()
  };
}, HQ = {
  decay: n_,
  inertia: n_,
  tween: b0,
  keyframes: b0,
  spring: _7
}, KQ = (t) => t / 100;
class qb extends y7 {
  constructor(e) {
    super(e), this.holdTime = null, this.cancelTime = null, this.currentTime = 0, this.playbackSpeed = 1, this.pendingPlayState = "running", this.startTime = null, this.state = "idle", this.stop = () => {
      if (this.resolver.cancel(), this.isStopped = !0, this.state === "idle")
        return;
      this.teardown();
      const { onStop: u } = this.options;
      u && u();
    };
    const { name: r, motionValue: n, element: i, keyframes: s } = this.options, o = (i == null ? void 0 : i.KeyframeResolver) || Nb, a = (u, l) => this.onKeyframesResolved(u, l);
    this.resolver = new o(s, a, r, n, i), this.resolver.scheduleResolve();
  }
  flatten() {
    super.flatten(), this._resolved && Object.assign(this._resolved, this.initPlayback(this._resolved.keyframes));
  }
  initPlayback(e) {
    const { type: r = "keyframes", repeat: n = 0, repeatDelay: i = 0, repeatType: s, velocity: o = 0 } = this.options, a = Fb(r) ? r : HQ[r] || b0;
    let u, l;
    a !== b0 && typeof e[0] != "number" && (process.env.NODE_ENV !== "production" && Uo(e.length === 2, `Only two keyframes currently supported with spring and inertia animations. Trying to animate ${e}`), u = Ro(KQ, A7(e[0], e[1])), e = [0, 100]);
    const d = a({ ...this.options, keyframes: e });
    s === "mirror" && (l = a({
      ...this.options,
      keyframes: [...e].reverse(),
      velocity: -o
    })), d.calculatedDuration === null && (d.calculatedDuration = zQ(d));
    const { calculatedDuration: p } = d, w = p + i, A = w * (n + 1) - i;
    return {
      generator: d,
      mirroredGenerator: l,
      mapPercentToKeyframes: u,
      calculatedDuration: p,
      resolvedDuration: w,
      totalDuration: A
    };
  }
  onPostResolved() {
    const { autoplay: e = !0 } = this.options;
    this.play(), this.pendingPlayState === "paused" || !e ? this.pause() : this.state = this.pendingPlayState;
  }
  tick(e, r = !1) {
    const { resolved: n } = this;
    if (!n) {
      const { keyframes: K } = this.options;
      return { done: !0, value: K[K.length - 1] };
    }
    const { finalKeyframe: i, generator: s, mirroredGenerator: o, mapPercentToKeyframes: a, keyframes: u, calculatedDuration: l, totalDuration: d, resolvedDuration: p } = n;
    if (this.startTime === null)
      return s.next(0);
    const { delay: w, repeat: A, repeatType: M, repeatDelay: N, onUpdate: L } = this.options;
    this.speed > 0 ? this.startTime = Math.min(this.startTime, e) : this.speed < 0 && (this.startTime = Math.min(e - d / this.speed, this.startTime)), r ? this.currentTime = e : this.holdTime !== null ? this.currentTime = this.holdTime : this.currentTime = Math.round(e - this.startTime) * this.speed;
    const B = this.currentTime - w * (this.speed >= 0 ? 1 : -1), $ = this.speed >= 0 ? B < 0 : B > d;
    this.currentTime = Math.max(B, 0), this.state === "finished" && this.holdTime === null && (this.currentTime = d);
    let H = this.currentTime, W = s;
    if (A) {
      const K = Math.min(this.currentTime, d) / p;
      let ge = Math.floor(K), Ee = K % 1;
      !Ee && K >= 1 && (Ee = 1), Ee === 1 && ge--, ge = Math.min(ge, A + 1), !!(ge % 2) && (M === "reverse" ? (Ee = 1 - Ee, N && (Ee -= N / p)) : M === "mirror" && (W = o)), H = xa(0, 1, Ee) * p;
    }
    const V = $ ? { done: !1, value: u[0] } : W.next(H);
    a && (V.value = a(V.value));
    let { done: te } = V;
    !$ && l !== null && (te = this.speed >= 0 ? this.currentTime >= d : this.currentTime <= 0);
    const R = this.holdTime === null && (this.state === "finished" || this.state === "running" && te);
    return R && i !== void 0 && (V.value = wp(u, this.options, i)), L && L(V.value), R && this.finish(), V;
  }
  get duration() {
    const { resolved: e } = this;
    return e ? To(e.calculatedDuration) : 0;
  }
  get time() {
    return To(this.currentTime);
  }
  set time(e) {
    e = Vs(e), this.currentTime = e, this.holdTime !== null || this.speed === 0 ? this.holdTime = e : this.driver && (this.startTime = this.driver.now() - e / this.speed);
  }
  get speed() {
    return this.playbackSpeed;
  }
  set speed(e) {
    const r = this.playbackSpeed !== e;
    this.playbackSpeed = e, r && (this.time = To(this.currentTime));
  }
  play() {
    if (this.resolver.isScheduled || this.resolver.resume(), !this._resolved) {
      this.pendingPlayState = "running";
      return;
    }
    if (this.isStopped)
      return;
    const { driver: e = WQ, onPlay: r, startTime: n } = this.options;
    this.driver || (this.driver = e((s) => this.tick(s))), r && r();
    const i = this.driver.now();
    this.holdTime !== null ? this.startTime = i - this.holdTime : this.startTime ? this.state === "finished" && (this.startTime = i) : this.startTime = n ?? this.calcStartTime(), this.state === "finished" && this.updateFinishedPromise(), this.cancelTime = this.startTime, this.holdTime = null, this.state = "running", this.driver.start();
  }
  pause() {
    var e;
    if (!this._resolved) {
      this.pendingPlayState = "paused";
      return;
    }
    this.state = "paused", this.holdTime = (e = this.currentTime) !== null && e !== void 0 ? e : 0;
  }
  complete() {
    this.state !== "running" && this.play(), this.pendingPlayState = this.state = "finished", this.holdTime = null;
  }
  finish() {
    this.teardown(), this.state = "finished";
    const { onComplete: e } = this.options;
    e && e();
  }
  cancel() {
    this.cancelTime !== null && this.tick(this.cancelTime), this.teardown(), this.updateFinishedPromise();
  }
  teardown() {
    this.state = "idle", this.stopDriver(), this.resolveFinishedPromise(), this.updateFinishedPromise(), this.startTime = this.cancelTime = null, this.resolver.cancel();
  }
  stopDriver() {
    this.driver && (this.driver.stop(), this.driver = void 0);
  }
  sample(e) {
    return this.startTime = 0, this.tick(e, !0);
  }
}
const VQ = /* @__PURE__ */ new Set([
  "opacity",
  "clipPath",
  "filter",
  "transform"
  // TODO: Can be accelerated but currently disabled until https://issues.chromium.org/issues/41491098 is resolved
  // or until we implement support for linear() easing.
  // "background-color"
]), GQ = 10, YQ = (t, e) => {
  let r = "";
  const n = Math.max(Math.round(e / GQ), 2);
  for (let i = 0; i < n; i++)
    r += t(Iu(0, n - 1, i)) + ", ";
  return `linear(${r.substring(0, r.length - 2)})`;
};
function zb(t) {
  let e;
  return () => (e === void 0 && (e = t()), e);
}
const JQ = {
  linearEasing: void 0
};
function XQ(t, e) {
  const r = zb(t);
  return () => {
    var n;
    return (n = JQ[e]) !== null && n !== void 0 ? n : r();
  };
}
const y0 = /* @__PURE__ */ XQ(() => {
  try {
    document.createElement("div").animate({ opacity: 0 }, { easing: "linear(0, 1)" });
  } catch {
    return !1;
  }
  return !0;
}, "linearEasing");
function P7(t) {
  return !!(typeof t == "function" && y0() || !t || typeof t == "string" && (t in nv || y0()) || jb(t) || Array.isArray(t) && t.every(P7));
}
const jf = ([t, e, r, n]) => `cubic-bezier(${t}, ${e}, ${r}, ${n})`, nv = {
  linear: "linear",
  ease: "ease",
  easeIn: "ease-in",
  easeOut: "ease-out",
  easeInOut: "ease-in-out",
  circIn: /* @__PURE__ */ jf([0, 0.65, 0.55, 1]),
  circOut: /* @__PURE__ */ jf([0.55, 0, 1, 0.45]),
  backIn: /* @__PURE__ */ jf([0.31, 0.01, 0.66, -0.59]),
  backOut: /* @__PURE__ */ jf([0.33, 1.53, 0.69, 0.99])
};
function M7(t, e) {
  if (t)
    return typeof t == "function" && y0() ? YQ(t, e) : jb(t) ? jf(t) : Array.isArray(t) ? t.map((r) => M7(r, e) || nv.easeOut) : nv[t];
}
function ZQ(t, e, r, { delay: n = 0, duration: i = 300, repeat: s = 0, repeatType: o = "loop", ease: a = "easeInOut", times: u } = {}) {
  const l = { [e]: r };
  u && (l.offset = u);
  const d = M7(a, i);
  return Array.isArray(d) && (l.easing = d), t.animate(l, {
    delay: n,
    duration: i,
    easing: Array.isArray(d) ? "linear" : d,
    fill: "both",
    iterations: s + 1,
    direction: o === "reverse" ? "alternate" : "normal"
  });
}
function u_(t, e) {
  t.timeline = e, t.onfinish = null;
}
const QQ = /* @__PURE__ */ zb(() => Object.hasOwnProperty.call(Element.prototype, "animate")), w0 = 10, eee = 2e4;
function tee(t) {
  return Fb(t.type) || t.type === "spring" || !P7(t.ease);
}
function ree(t, e) {
  const r = new qb({
    ...e,
    keyframes: t,
    repeat: 0,
    delay: 0,
    isGenerator: !0
  });
  let n = { done: !1, value: t[0] };
  const i = [];
  let s = 0;
  for (; !n.done && s < eee; )
    n = r.sample(s), i.push(n.value), s += w0;
  return {
    times: void 0,
    keyframes: i,
    duration: s - w0,
    ease: "linear"
  };
}
const I7 = {
  anticipate: e7,
  backInOut: QS,
  circInOut: r7
};
function nee(t) {
  return t in I7;
}
class f_ extends y7 {
  constructor(e) {
    super(e);
    const { name: r, motionValue: n, element: i, keyframes: s } = this.options;
    this.resolver = new b7(s, (o, a) => this.onKeyframesResolved(o, a), r, n, i), this.resolver.scheduleResolve();
  }
  initPlayback(e, r) {
    var n;
    let { duration: i = 300, times: s, ease: o, type: a, motionValue: u, name: l, startTime: d } = this.options;
    if (!(!((n = u.owner) === null || n === void 0) && n.current))
      return !1;
    if (typeof o == "string" && y0() && nee(o) && (o = I7[o]), tee(this.options)) {
      const { onComplete: w, onUpdate: A, motionValue: M, element: N, ...L } = this.options, B = ree(e, L);
      e = B.keyframes, e.length === 1 && (e[1] = e[0]), i = B.duration, s = B.times, o = B.ease, a = "keyframes";
    }
    const p = ZQ(u.owner.current, l, e, { ...this.options, duration: i, times: s, ease: o });
    return p.startTime = d ?? this.calcStartTime(), this.pendingTimeline ? (u_(p, this.pendingTimeline), this.pendingTimeline = void 0) : p.onfinish = () => {
      const { onComplete: w } = this.options;
      u.set(wp(e, this.options, r)), w && w(), this.cancel(), this.resolveFinishedPromise();
    }, {
      animation: p,
      duration: i,
      times: s,
      type: a,
      ease: o,
      keyframes: e
    };
  }
  get duration() {
    const { resolved: e } = this;
    if (!e)
      return 0;
    const { duration: r } = e;
    return To(r);
  }
  get time() {
    const { resolved: e } = this;
    if (!e)
      return 0;
    const { animation: r } = e;
    return To(r.currentTime || 0);
  }
  set time(e) {
    const { resolved: r } = this;
    if (!r)
      return;
    const { animation: n } = r;
    n.currentTime = Vs(e);
  }
  get speed() {
    const { resolved: e } = this;
    if (!e)
      return 1;
    const { animation: r } = e;
    return r.playbackRate;
  }
  set speed(e) {
    const { resolved: r } = this;
    if (!r)
      return;
    const { animation: n } = r;
    n.playbackRate = e;
  }
  get state() {
    const { resolved: e } = this;
    if (!e)
      return "idle";
    const { animation: r } = e;
    return r.playState;
  }
  get startTime() {
    const { resolved: e } = this;
    if (!e)
      return null;
    const { animation: r } = e;
    return r.startTime;
  }
  /**
   * Replace the default DocumentTimeline with another AnimationTimeline.
   * Currently used for scroll animations.
   */
  attachTimeline(e) {
    if (!this._resolved)
      this.pendingTimeline = e;
    else {
      const { resolved: r } = this;
      if (!r)
        return Un;
      const { animation: n } = r;
      u_(n, e);
    }
    return Un;
  }
  play() {
    if (this.isStopped)
      return;
    const { resolved: e } = this;
    if (!e)
      return;
    const { animation: r } = e;
    r.playState === "finished" && this.updateFinishedPromise(), r.play();
  }
  pause() {
    const { resolved: e } = this;
    if (!e)
      return;
    const { animation: r } = e;
    r.pause();
  }
  stop() {
    if (this.resolver.cancel(), this.isStopped = !0, this.state === "idle")
      return;
    this.resolveFinishedPromise(), this.updateFinishedPromise();
    const { resolved: e } = this;
    if (!e)
      return;
    const { animation: r, keyframes: n, duration: i, type: s, ease: o, times: a } = e;
    if (r.playState === "idle" || r.playState === "finished")
      return;
    if (this.time) {
      const { motionValue: l, onUpdate: d, onComplete: p, element: w, ...A } = this.options, M = new qb({
        ...A,
        keyframes: n,
        duration: i,
        type: s,
        ease: o,
        times: a,
        isGenerator: !0
      }), N = Vs(this.time);
      l.setWithVelocity(M.sample(N - w0).value, M.sample(N).value, w0);
    }
    const { onStop: u } = this.options;
    u && u(), this.cancel();
  }
  complete() {
    const { resolved: e } = this;
    e && e.animation.finish();
  }
  cancel() {
    const { resolved: e } = this;
    e && e.animation.cancel();
  }
  static supports(e) {
    const { motionValue: r, name: n, repeatDelay: i, repeatType: s, damping: o, type: a } = e;
    return QQ() && n && VQ.has(n) && r && r.owner && r.owner.current instanceof HTMLElement && /**
     * If we're outputting values to onUpdate then we can't use WAAPI as there's
     * no way to read the value from WAAPI every frame.
     */
    !r.owner.getProps().onUpdate && !i && s !== "mirror" && o !== 0 && a !== "inertia";
  }
}
const iee = zb(() => window.ScrollTimeline !== void 0);
class see {
  constructor(e) {
    this.stop = () => this.runAll("stop"), this.animations = e.filter(Boolean);
  }
  then(e, r) {
    return Promise.all(this.animations).then(e).catch(r);
  }
  /**
   * TODO: Filter out cancelled or stopped animations before returning
   */
  getAll(e) {
    return this.animations[0][e];
  }
  setAll(e, r) {
    for (let n = 0; n < this.animations.length; n++)
      this.animations[n][e] = r;
  }
  attachTimeline(e, r) {
    const n = this.animations.map((i) => iee() && i.attachTimeline ? i.attachTimeline(e) : r(i));
    return () => {
      n.forEach((i, s) => {
        i && i(), this.animations[s].stop();
      });
    };
  }
  get time() {
    return this.getAll("time");
  }
  set time(e) {
    this.setAll("time", e);
  }
  get speed() {
    return this.getAll("speed");
  }
  set speed(e) {
    this.setAll("speed", e);
  }
  get startTime() {
    return this.getAll("startTime");
  }
  get duration() {
    let e = 0;
    for (let r = 0; r < this.animations.length; r++)
      e = Math.max(e, this.animations[r].duration);
    return e;
  }
  runAll(e) {
    this.animations.forEach((r) => r[e]());
  }
  flatten() {
    this.runAll("flatten");
  }
  play() {
    this.runAll("play");
  }
  pause() {
    this.runAll("pause");
  }
  cancel() {
    this.runAll("cancel");
  }
  complete() {
    this.runAll("complete");
  }
}
function oee({ when: t, delay: e, delayChildren: r, staggerChildren: n, staggerDirection: i, repeat: s, repeatType: o, repeatDelay: a, from: u, elapsed: l, ...d }) {
  return !!Object.keys(d).length;
}
const Wb = (t, e, r, n = {}, i, s) => (o) => {
  const a = Tb(n, t) || {}, u = a.delay || n.delay || 0;
  let { elapsed: l = 0 } = n;
  l = l - Vs(u);
  let d = {
    keyframes: Array.isArray(r) ? r : [null, r],
    ease: "easeOut",
    velocity: e.getVelocity(),
    ...a,
    delay: -l,
    onUpdate: (w) => {
      e.set(w), a.onUpdate && a.onUpdate(w);
    },
    onComplete: () => {
      o(), a.onComplete && a.onComplete();
    },
    name: t,
    motionValue: e,
    element: s ? void 0 : i
  };
  oee(a) || (d = {
    ...d,
    ...SZ(t, d)
  }), d.duration && (d.duration = Vs(d.duration)), d.repeatDelay && (d.repeatDelay = Vs(d.repeatDelay)), d.from !== void 0 && (d.keyframes[0] = d.from);
  let p = !1;
  if ((d.type === !1 || d.duration === 0 && !d.repeatDelay) && (d.duration = 0, d.delay === 0 && (p = !0)), p && !s && e.get() !== void 0) {
    const w = wp(d.keyframes, a);
    if (w !== void 0)
      return Lr.update(() => {
        d.onUpdate(w), d.onComplete();
      }), new see([]);
  }
  return !s && f_.supports(d) ? new f_(d) : new qb(d);
}, aee = (t) => !!(t && typeof t == "object" && t.mix && t.toValue), cee = (t) => J1(t) ? t[t.length - 1] || 0 : t;
function Hb(t, e) {
  t.indexOf(e) === -1 && t.push(e);
}
function Kb(t, e) {
  const r = t.indexOf(e);
  r > -1 && t.splice(r, 1);
}
class Vb {
  constructor() {
    this.subscriptions = [];
  }
  add(e) {
    return Hb(this.subscriptions, e), () => Kb(this.subscriptions, e);
  }
  notify(e, r, n) {
    const i = this.subscriptions.length;
    if (i)
      if (i === 1)
        this.subscriptions[0](e, r, n);
      else
        for (let s = 0; s < i; s++) {
          const o = this.subscriptions[s];
          o && o(e, r, n);
        }
  }
  getSize() {
    return this.subscriptions.length;
  }
  clear() {
    this.subscriptions.length = 0;
  }
}
const l_ = 30, uee = (t) => !isNaN(parseFloat(t));
class fee {
  /**
   * @param init - The initiating value
   * @param config - Optional configuration options
   *
   * -  `transformer`: A function to transform incoming values with.
   *
   * @internal
   */
  constructor(e, r = {}) {
    this.version = "11.11.17", this.canTrackVelocity = null, this.events = {}, this.updateAndNotify = (n, i = !0) => {
      const s = Ys.now();
      this.updatedAt !== s && this.setPrevFrameValue(), this.prev = this.current, this.setCurrent(n), this.current !== this.prev && this.events.change && this.events.change.notify(this.current), i && this.events.renderRequest && this.events.renderRequest.notify(this.current);
    }, this.hasAnimated = !1, this.setCurrent(e), this.owner = r.owner;
  }
  setCurrent(e) {
    this.current = e, this.updatedAt = Ys.now(), this.canTrackVelocity === null && e !== void 0 && (this.canTrackVelocity = uee(this.current));
  }
  setPrevFrameValue(e = this.current) {
    this.prevFrameValue = e, this.prevUpdatedAt = this.updatedAt;
  }
  /**
   * Adds a function that will be notified when the `MotionValue` is updated.
   *
   * It returns a function that, when called, will cancel the subscription.
   *
   * When calling `onChange` inside a React component, it should be wrapped with the
   * `useEffect` hook. As it returns an unsubscribe function, this should be returned
   * from the `useEffect` function to ensure you don't add duplicate subscribers..
   *
   * ```jsx
   * export const MyComponent = () => {
   *   const x = useMotionValue(0)
   *   const y = useMotionValue(0)
   *   const opacity = useMotionValue(1)
   *
   *   useEffect(() => {
   *     function updateOpacity() {
   *       const maxXY = Math.max(x.get(), y.get())
   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])
   *       opacity.set(newOpacity)
   *     }
   *
   *     const unsubscribeX = x.on("change", updateOpacity)
   *     const unsubscribeY = y.on("change", updateOpacity)
   *
   *     return () => {
   *       unsubscribeX()
   *       unsubscribeY()
   *     }
   *   }, [])
   *
   *   return <motion.div style={{ x }} />
   * }
   * ```
   *
   * @param subscriber - A function that receives the latest value.
   * @returns A function that, when called, will cancel this subscription.
   *
   * @deprecated
   */
  onChange(e) {
    return process.env.NODE_ENV !== "production" && vp(!1, 'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'), this.on("change", e);
  }
  on(e, r) {
    this.events[e] || (this.events[e] = new Vb());
    const n = this.events[e].add(r);
    return e === "change" ? () => {
      n(), Lr.read(() => {
        this.events.change.getSize() || this.stop();
      });
    } : n;
  }
  clearListeners() {
    for (const e in this.events)
      this.events[e].clear();
  }
  /**
   * Attaches a passive effect to the `MotionValue`.
   *
   * @internal
   */
  attach(e, r) {
    this.passiveEffect = e, this.stopPassiveEffect = r;
  }
  /**
   * Sets the state of the `MotionValue`.
   *
   * @remarks
   *
   * ```jsx
   * const x = useMotionValue(0)
   * x.set(10)
   * ```
   *
   * @param latest - Latest value to set.
   * @param render - Whether to notify render subscribers. Defaults to `true`
   *
   * @public
   */
  set(e, r = !0) {
    !r || !this.passiveEffect ? this.updateAndNotify(e, r) : this.passiveEffect(e, this.updateAndNotify);
  }
  setWithVelocity(e, r, n) {
    this.set(r), this.prev = void 0, this.prevFrameValue = e, this.prevUpdatedAt = this.updatedAt - n;
  }
  /**
   * Set the state of the `MotionValue`, stopping any active animations,
   * effects, and resets velocity to `0`.
   */
  jump(e, r = !0) {
    this.updateAndNotify(e), this.prev = e, this.prevUpdatedAt = this.prevFrameValue = void 0, r && this.stop(), this.stopPassiveEffect && this.stopPassiveEffect();
  }
  /**
   * Returns the latest state of `MotionValue`
   *
   * @returns - The latest state of `MotionValue`
   *
   * @public
   */
  get() {
    return this.current;
  }
  /**
   * @public
   */
  getPrevious() {
    return this.prev;
  }
  /**
   * Returns the latest velocity of `MotionValue`
   *
   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.
   *
   * @public
   */
  getVelocity() {
    const e = Ys.now();
    if (!this.canTrackVelocity || this.prevFrameValue === void 0 || e - this.updatedAt > l_)
      return 0;
    const r = Math.min(this.updatedAt - this.prevUpdatedAt, l_);
    return w7(parseFloat(this.current) - parseFloat(this.prevFrameValue), r);
  }
  /**
   * Registers a new animation to control this `MotionValue`. Only one
   * animation can drive a `MotionValue` at one time.
   *
   * ```jsx
   * value.start()
   * ```
   *
   * @param animation - A function that starts the provided animation
   *
   * @internal
   */
  start(e) {
    return this.stop(), new Promise((r) => {
      this.hasAnimated = !0, this.animation = e(r), this.events.animationStart && this.events.animationStart.notify();
    }).then(() => {
      this.events.animationComplete && this.events.animationComplete.notify(), this.clearAnimation();
    });
  }
  /**
   * Stop the currently active animation.
   *
   * @public
   */
  stop() {
    this.animation && (this.animation.stop(), this.events.animationCancel && this.events.animationCancel.notify()), this.clearAnimation();
  }
  /**
   * Returns `true` if this value is currently animating.
   *
   * @public
   */
  isAnimating() {
    return !!this.animation;
  }
  clearAnimation() {
    delete this.animation;
  }
  /**
   * Destroy and clean up subscribers to this `MotionValue`.
   *
   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically
   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually
   * created a `MotionValue` via the `motionValue` function.
   *
   * @public
   */
  destroy() {
    this.clearListeners(), this.stop(), this.stopPassiveEffect && this.stopPassiveEffect();
  }
}
function Rl(t, e) {
  return new fee(t, e);
}
function lee(t, e, r) {
  t.hasValue(e) ? t.getValue(e).set(r) : t.addValue(e, Rl(r));
}
function hee(t, e) {
  const r = yp(t, e);
  let { transitionEnd: n = {}, transition: i = {}, ...s } = r || {};
  s = { ...s, ...n };
  for (const o in s) {
    const a = cee(s[o]);
    lee(t, o, a);
  }
}
const Gb = (t) => t.replace(/([a-z])([A-Z])/gu, "$1-$2").toLowerCase(), dee = "framerAppearId", C7 = "data-" + Gb(dee);
function T7(t) {
  return t.props[C7];
}
const Xn = (t) => !!(t && t.getVelocity);
function pee(t) {
  return !!(Xn(t) && t.add);
}
function iv(t, e) {
  const r = t.getValue("willChange");
  if (pee(r))
    return r.add(e);
}
function gee({ protectedKeys: t, needsAnimating: e }, r) {
  const n = t.hasOwnProperty(r) && e[r] !== !0;
  return e[r] = !1, n;
}
function R7(t, e, { delay: r = 0, transitionOverride: n, type: i } = {}) {
  var s;
  let { transition: o = t.getDefaultTransition(), transitionEnd: a, ...u } = e;
  n && (o = n);
  const l = [], d = i && t.animationState && t.animationState.getState()[i];
  for (const p in u) {
    const w = t.getValue(p, (s = t.latestValues[p]) !== null && s !== void 0 ? s : null), A = u[p];
    if (A === void 0 || d && gee(d, p))
      continue;
    const M = {
      delay: r,
      ...Tb(o || {}, p)
    };
    let N = !1;
    if (window.MotionHandoffAnimation) {
      const B = T7(t);
      if (B) {
        const $ = window.MotionHandoffAnimation(B, p, Lr);
        $ !== null && (M.startTime = $, N = !0);
      }
    }
    iv(t, p), w.start(Wb(p, w, A, t.shouldReduceMotion && Ac.has(p) ? { type: !1 } : M, t, N));
    const L = w.animation;
    L && l.push(L);
  }
  return a && Promise.all(l).then(() => {
    Lr.update(() => {
      a && hee(t, a);
    });
  }), l;
}
function sv(t, e, r = {}) {
  var n;
  const i = yp(t, e, r.type === "exit" ? (n = t.presenceContext) === null || n === void 0 ? void 0 : n.custom : void 0);
  let { transition: s = t.getDefaultTransition() || {} } = i || {};
  r.transitionOverride && (s = r.transitionOverride);
  const o = i ? () => Promise.all(R7(t, i, r)) : () => Promise.resolve(), a = t.variantChildren && t.variantChildren.size ? (l = 0) => {
    const { delayChildren: d = 0, staggerChildren: p, staggerDirection: w } = s;
    return mee(t, e, d + l, p, w, r);
  } : () => Promise.resolve(), { when: u } = s;
  if (u) {
    const [l, d] = u === "beforeChildren" ? [o, a] : [a, o];
    return l().then(() => d());
  } else
    return Promise.all([o(), a(r.delay)]);
}
function mee(t, e, r = 0, n = 0, i = 1, s) {
  const o = [], a = (t.variantChildren.size - 1) * n, u = i === 1 ? (l = 0) => l * n : (l = 0) => a - l * n;
  return Array.from(t.variantChildren).sort(vee).forEach((l, d) => {
    l.notify("AnimationStart", e), o.push(sv(l, e, {
      ...s,
      delay: r + u(d)
    }).then(() => l.notify("AnimationComplete", e)));
  }), Promise.all(o);
}
function vee(t, e) {
  return t.sortNodePosition(e);
}
function bee(t, e, r = {}) {
  t.notify("AnimationStart", e);
  let n;
  if (Array.isArray(e)) {
    const i = e.map((s) => sv(t, s, r));
    n = Promise.all(i);
  } else if (typeof e == "string")
    n = sv(t, e, r);
  else {
    const i = typeof e == "function" ? yp(t, e, r.custom) : e;
    n = Promise.all(R7(t, i, r));
  }
  return n.then(() => {
    t.notify("AnimationComplete", e);
  });
}
const yee = Cb.length;
function D7(t) {
  if (!t)
    return;
  if (!t.isControllingVariants) {
    const r = t.parent ? D7(t.parent) || {} : {};
    return t.props.initial !== void 0 && (r.initial = t.props.initial), r;
  }
  const e = {};
  for (let r = 0; r < yee; r++) {
    const n = Cb[r], i = t.props[n];
    (Il(i) || i === !1) && (e[n] = i);
  }
  return e;
}
const wee = [...Ib].reverse(), xee = Ib.length;
function _ee(t) {
  return (e) => Promise.all(e.map(({ animation: r, options: n }) => bee(t, r, n)));
}
function Eee(t) {
  let e = _ee(t), r = h_(), n = !0;
  const i = (u) => (l, d) => {
    var p;
    const w = yp(t, d, u === "exit" ? (p = t.presenceContext) === null || p === void 0 ? void 0 : p.custom : void 0);
    if (w) {
      const { transition: A, transitionEnd: M, ...N } = w;
      l = { ...l, ...N, ...M };
    }
    return l;
  };
  function s(u) {
    e = u(t);
  }
  function o(u) {
    const { props: l } = t, d = D7(t.parent) || {}, p = [], w = /* @__PURE__ */ new Set();
    let A = {}, M = 1 / 0;
    for (let L = 0; L < xee; L++) {
      const B = wee[L], $ = r[B], H = l[B] !== void 0 ? l[B] : d[B], W = Il(H), V = B === u ? $.isActive : null;
      V === !1 && (M = L);
      let te = H === d[B] && H !== l[B] && W;
      if (te && n && t.manuallyAnimateOnMount && (te = !1), $.protectedKeys = { ...A }, // If it isn't active and hasn't *just* been set as inactive
      !$.isActive && V === null || // If we didn't and don't have any defined prop for this animation type
      !H && !$.prevProp || // Or if the prop doesn't define an animation
      bp(H) || typeof H == "boolean")
        continue;
      const R = See($.prevProp, H);
      let K = R || // If we're making this variant active, we want to always make it active
      B === u && $.isActive && !te && W || // If we removed a higher-priority variant (i is in reverse order)
      L > M && W, ge = !1;
      const Ee = Array.isArray(H) ? H : [H];
      let Y = Ee.reduce(i(B), {});
      V === !1 && (Y = {});
      const { prevResolvedValues: S = {} } = $, m = {
        ...S,
        ...Y
      }, f = (x) => {
        K = !0, w.has(x) && (ge = !0, w.delete(x)), $.needsAnimating[x] = !0;
        const _ = t.getValue(x);
        _ && (_.liveStyle = !1);
      };
      for (const x in m) {
        const _ = Y[x], E = S[x];
        if (A.hasOwnProperty(x))
          continue;
        let v = !1;
        J1(_) && J1(E) ? v = !VS(_, E) : v = _ !== E, v ? _ != null ? f(x) : w.add(x) : _ !== void 0 && w.has(x) ? f(x) : $.protectedKeys[x] = !0;
      }
      $.prevProp = H, $.prevResolvedValues = Y, $.isActive && (A = { ...A, ...Y }), n && t.blockInitialAnimation && (K = !1), K && (!(te && R) || ge) && p.push(...Ee.map((x) => ({
        animation: x,
        options: { type: B }
      })));
    }
    if (w.size) {
      const L = {};
      w.forEach((B) => {
        const $ = t.getBaseTarget(B), H = t.getValue(B);
        H && (H.liveStyle = !0), L[B] = $ ?? null;
      }), p.push({ animation: L });
    }
    let N = !!p.length;
    return n && (l.initial === !1 || l.initial === l.animate) && !t.manuallyAnimateOnMount && (N = !1), n = !1, N ? e(p) : Promise.resolve();
  }
  function a(u, l) {
    var d;
    if (r[u].isActive === l)
      return Promise.resolve();
    (d = t.variantChildren) === null || d === void 0 || d.forEach((w) => {
      var A;
      return (A = w.animationState) === null || A === void 0 ? void 0 : A.setActive(u, l);
    }), r[u].isActive = l;
    const p = o(u);
    for (const w in r)
      r[w].protectedKeys = {};
    return p;
  }
  return {
    animateChanges: o,
    setActive: a,
    setAnimateFunction: s,
    getState: () => r,
    reset: () => {
      r = h_(), n = !0;
    }
  };
}
function See(t, e) {
  return typeof e == "string" ? e !== t : Array.isArray(e) ? !VS(e, t) : !1;
}
function Va(t = !1) {
  return {
    isActive: t,
    protectedKeys: {},
    needsAnimating: {},
    prevResolvedValues: {}
  };
}
function h_() {
  return {
    animate: Va(!0),
    whileInView: Va(),
    whileHover: Va(),
    whileTap: Va(),
    whileDrag: Va(),
    whileFocus: Va(),
    exit: Va()
  };
}
class Ra {
  constructor(e) {
    this.isMounted = !1, this.node = e;
  }
  update() {
  }
}
class Aee extends Ra {
  /**
   * We dynamically generate the AnimationState manager as it contains a reference
   * to the underlying animation library. We only want to load that if we load this,
   * so people can optionally code split it out using the `m` component.
   */
  constructor(e) {
    super(e), e.animationState || (e.animationState = Eee(e));
  }
  updateAnimationControlsSubscription() {
    const { animate: e } = this.node.getProps();
    bp(e) && (this.unmountControls = e.subscribe(this.node));
  }
  /**
   * Subscribe any provided AnimationControls to the component's VisualElement
   */
  mount() {
    this.updateAnimationControlsSubscription();
  }
  update() {
    const { animate: e } = this.node.getProps(), { animate: r } = this.node.prevProps || {};
    e !== r && this.updateAnimationControlsSubscription();
  }
  unmount() {
    var e;
    this.node.animationState.reset(), (e = this.unmountControls) === null || e === void 0 || e.call(this);
  }
}
let Pee = 0;
class Mee extends Ra {
  constructor() {
    super(...arguments), this.id = Pee++;
  }
  update() {
    if (!this.node.presenceContext)
      return;
    const { isPresent: e, onExitComplete: r } = this.node.presenceContext, { isPresent: n } = this.node.prevPresenceContext || {};
    if (!this.node.animationState || e === n)
      return;
    const i = this.node.animationState.setActive("exit", !e);
    r && !e && i.then(() => r(this.id));
  }
  mount() {
    const { register: e } = this.node.presenceContext || {};
    e && (this.unmount = e(this.id));
  }
  unmount() {
  }
}
const Iee = {
  animation: {
    Feature: Aee
  },
  exit: {
    Feature: Mee
  }
}, O7 = (t) => t.pointerType === "mouse" ? typeof t.button != "number" || t.button <= 0 : t.isPrimary !== !1;
function xp(t, e = "page") {
  return {
    point: {
      x: t[`${e}X`],
      y: t[`${e}Y`]
    }
  };
}
const Cee = (t) => (e) => O7(e) && t(e, xp(e));
function Mo(t, e, r, n = { passive: !0 }) {
  return t.addEventListener(e, r, n), () => t.removeEventListener(e, r);
}
function Do(t, e, r, n) {
  return Mo(t, e, Cee(r), n);
}
const d_ = (t, e) => Math.abs(t - e);
function Tee(t, e) {
  const r = d_(t.x, e.x), n = d_(t.y, e.y);
  return Math.sqrt(r ** 2 + n ** 2);
}
class N7 {
  constructor(e, r, { transformPagePoint: n, contextWindow: i, dragSnapToOrigin: s = !1 } = {}) {
    if (this.startEvent = null, this.lastMoveEvent = null, this.lastMoveEventInfo = null, this.handlers = {}, this.contextWindow = window, this.updatePoint = () => {
      if (!(this.lastMoveEvent && this.lastMoveEventInfo))
        return;
      const p = Bm(this.lastMoveEventInfo, this.history), w = this.startEvent !== null, A = Tee(p.offset, { x: 0, y: 0 }) >= 3;
      if (!w && !A)
        return;
      const { point: M } = p, { timestamp: N } = Fn;
      this.history.push({ ...M, timestamp: N });
      const { onStart: L, onMove: B } = this.handlers;
      w || (L && L(this.lastMoveEvent, p), this.startEvent = this.lastMoveEvent), B && B(this.lastMoveEvent, p);
    }, this.handlePointerMove = (p, w) => {
      this.lastMoveEvent = p, this.lastMoveEventInfo = $m(w, this.transformPagePoint), Lr.update(this.updatePoint, !0);
    }, this.handlePointerUp = (p, w) => {
      this.end();
      const { onEnd: A, onSessionEnd: M, resumeAnimation: N } = this.handlers;
      if (this.dragSnapToOrigin && N && N(), !(this.lastMoveEvent && this.lastMoveEventInfo))
        return;
      const L = Bm(p.type === "pointercancel" ? this.lastMoveEventInfo : $m(w, this.transformPagePoint), this.history);
      this.startEvent && A && A(p, L), M && M(p, L);
    }, !O7(e))
      return;
    this.dragSnapToOrigin = s, this.handlers = r, this.transformPagePoint = n, this.contextWindow = i || window;
    const o = xp(e), a = $m(o, this.transformPagePoint), { point: u } = a, { timestamp: l } = Fn;
    this.history = [{ ...u, timestamp: l }];
    const { onSessionStart: d } = r;
    d && d(e, Bm(a, this.history)), this.removeListeners = Ro(Do(this.contextWindow, "pointermove", this.handlePointerMove), Do(this.contextWindow, "pointerup", this.handlePointerUp), Do(this.contextWindow, "pointercancel", this.handlePointerUp));
  }
  updateHandlers(e) {
    this.handlers = e;
  }
  end() {
    this.removeListeners && this.removeListeners(), wa(this.updatePoint);
  }
}
function $m(t, e) {
  return e ? { point: e(t.point) } : t;
}
function p_(t, e) {
  return { x: t.x - e.x, y: t.y - e.y };
}
function Bm({ point: t }, e) {
  return {
    point: t,
    delta: p_(t, L7(e)),
    offset: p_(t, Ree(e)),
    velocity: Dee(e, 0.1)
  };
}
function Ree(t) {
  return t[0];
}
function L7(t) {
  return t[t.length - 1];
}
function Dee(t, e) {
  if (t.length < 2)
    return { x: 0, y: 0 };
  let r = t.length - 1, n = null;
  const i = L7(t);
  for (; r >= 0 && (n = t[r], !(i.timestamp - n.timestamp > Vs(e))); )
    r--;
  if (!n)
    return { x: 0, y: 0 };
  const s = To(i.timestamp - n.timestamp);
  if (s === 0)
    return { x: 0, y: 0 };
  const o = {
    x: (i.x - n.x) / s,
    y: (i.y - n.y) / s
  };
  return o.x === 1 / 0 && (o.x = 0), o.y === 1 / 0 && (o.y = 0), o;
}
function k7(t) {
  let e = null;
  return () => {
    const r = () => {
      e = null;
    };
    return e === null ? (e = t, r) : !1;
  };
}
const g_ = k7("dragHorizontal"), m_ = k7("dragVertical");
function $7(t) {
  let e = !1;
  if (t === "y")
    e = m_();
  else if (t === "x")
    e = g_();
  else {
    const r = g_(), n = m_();
    r && n ? e = () => {
      r(), n();
    } : (r && r(), n && n());
  }
  return e;
}
function B7() {
  const t = $7(!0);
  return t ? (t(), !1) : !0;
}
function tu(t) {
  return t && typeof t == "object" && Object.prototype.hasOwnProperty.call(t, "current");
}
const F7 = 1e-4, Oee = 1 - F7, Nee = 1 + F7, j7 = 0.01, Lee = 0 - j7, kee = 0 + j7;
function Li(t) {
  return t.max - t.min;
}
function $ee(t, e, r) {
  return Math.abs(t - e) <= r;
}
function v_(t, e, r, n = 0.5) {
  t.origin = n, t.originPoint = Qr(e.min, e.max, t.origin), t.scale = Li(r) / Li(e), t.translate = Qr(r.min, r.max, t.origin) - t.originPoint, (t.scale >= Oee && t.scale <= Nee || isNaN(t.scale)) && (t.scale = 1), (t.translate >= Lee && t.translate <= kee || isNaN(t.translate)) && (t.translate = 0);
}
function Jf(t, e, r, n) {
  v_(t.x, e.x, r.x, n ? n.originX : void 0), v_(t.y, e.y, r.y, n ? n.originY : void 0);
}
function b_(t, e, r) {
  t.min = r.min + e.min, t.max = t.min + Li(e);
}
function Bee(t, e, r) {
  b_(t.x, e.x, r.x), b_(t.y, e.y, r.y);
}
function y_(t, e, r) {
  t.min = e.min - r.min, t.max = t.min + Li(e);
}
function Xf(t, e, r) {
  y_(t.x, e.x, r.x), y_(t.y, e.y, r.y);
}
function Fee(t, { min: e, max: r }, n) {
  return e !== void 0 && t < e ? t = n ? Qr(e, t, n.min) : Math.max(t, e) : r !== void 0 && t > r && (t = n ? Qr(r, t, n.max) : Math.min(t, r)), t;
}
function w_(t, e, r) {
  return {
    min: e !== void 0 ? t.min + e : void 0,
    max: r !== void 0 ? t.max + r - (t.max - t.min) : void 0
  };
}
function jee(t, { top: e, left: r, bottom: n, right: i }) {
  return {
    x: w_(t.x, r, i),
    y: w_(t.y, e, n)
  };
}
function x_(t, e) {
  let r = e.min - t.min, n = e.max - t.max;
  return e.max - e.min < t.max - t.min && ([r, n] = [n, r]), { min: r, max: n };
}
function Uee(t, e) {
  return {
    x: x_(t.x, e.x),
    y: x_(t.y, e.y)
  };
}
function qee(t, e) {
  let r = 0.5;
  const n = Li(t), i = Li(e);
  return i > n ? r = Iu(e.min, e.max - n, t.min) : n > i && (r = Iu(t.min, t.max - i, e.min)), xa(0, 1, r);
}
function zee(t, e) {
  const r = {};
  return e.min !== void 0 && (r.min = e.min - t.min), e.max !== void 0 && (r.max = e.max - t.min), r;
}
const ov = 0.35;
function Wee(t = ov) {
  return t === !1 ? t = 0 : t === !0 && (t = ov), {
    x: __(t, "left", "right"),
    y: __(t, "top", "bottom")
  };
}
function __(t, e, r) {
  return {
    min: E_(t, e),
    max: E_(t, r)
  };
}
function E_(t, e) {
  return typeof t == "number" ? t : t[e] || 0;
}
const S_ = () => ({
  translate: 0,
  scale: 1,
  origin: 0,
  originPoint: 0
}), ru = () => ({
  x: S_(),
  y: S_()
}), A_ = () => ({ min: 0, max: 0 }), ln = () => ({
  x: A_(),
  y: A_()
});
function Xi(t) {
  return [t("x"), t("y")];
}
function U7({ top: t, left: e, right: r, bottom: n }) {
  return {
    x: { min: e, max: r },
    y: { min: t, max: n }
  };
}
function Hee({ x: t, y: e }) {
  return { top: e.min, right: t.max, bottom: e.max, left: t.min };
}
function Kee(t, e) {
  if (!e)
    return t;
  const r = e({ x: t.left, y: t.top }), n = e({ x: t.right, y: t.bottom });
  return {
    top: r.y,
    left: r.x,
    bottom: n.y,
    right: n.x
  };
}
function Fm(t) {
  return t === void 0 || t === 1;
}
function av({ scale: t, scaleX: e, scaleY: r }) {
  return !Fm(t) || !Fm(e) || !Fm(r);
}
function Ya(t) {
  return av(t) || q7(t) || t.z || t.rotate || t.rotateX || t.rotateY || t.skewX || t.skewY;
}
function q7(t) {
  return P_(t.x) || P_(t.y);
}
function P_(t) {
  return t && t !== "0%";
}
function x0(t, e, r) {
  const n = t - r, i = e * n;
  return r + i;
}
function M_(t, e, r, n, i) {
  return i !== void 0 && (t = x0(t, i, n)), x0(t, r, n) + e;
}
function cv(t, e = 0, r = 1, n, i) {
  t.min = M_(t.min, e, r, n, i), t.max = M_(t.max, e, r, n, i);
}
function z7(t, { x: e, y: r }) {
  cv(t.x, e.translate, e.scale, e.originPoint), cv(t.y, r.translate, r.scale, r.originPoint);
}
const I_ = 0.999999999999, C_ = 1.0000000000001;
function Vee(t, e, r, n = !1) {
  const i = r.length;
  if (!i)
    return;
  e.x = e.y = 1;
  let s, o;
  for (let a = 0; a < i; a++) {
    s = r[a], o = s.projectionDelta;
    const { visualElement: u } = s.options;
    u && u.props.style && u.props.style.display === "contents" || (n && s.options.layoutScroll && s.scroll && s !== s.root && iu(t, {
      x: -s.scroll.offset.x,
      y: -s.scroll.offset.y
    }), o && (e.x *= o.x.scale, e.y *= o.y.scale, z7(t, o)), n && Ya(s.latestValues) && iu(t, s.latestValues));
  }
  e.x < C_ && e.x > I_ && (e.x = 1), e.y < C_ && e.y > I_ && (e.y = 1);
}
function nu(t, e) {
  t.min = t.min + e, t.max = t.max + e;
}
function T_(t, e, r, n, i = 0.5) {
  const s = Qr(t.min, t.max, i);
  cv(t, e, r, s, n);
}
function iu(t, e) {
  T_(t.x, e.x, e.scaleX, e.scale, e.originX), T_(t.y, e.y, e.scaleY, e.scale, e.originY);
}
function W7(t, e) {
  return U7(Kee(t.getBoundingClientRect(), e));
}
function Gee(t, e, r) {
  const n = W7(t, r), { scroll: i } = e;
  return i && (nu(n.x, i.offset.x), nu(n.y, i.offset.y)), n;
}
const H7 = ({ current: t }) => t ? t.ownerDocument.defaultView : null, Yee = /* @__PURE__ */ new WeakMap();
class Jee {
  constructor(e) {
    this.openGlobalLock = null, this.isDragging = !1, this.currentDirection = null, this.originPoint = { x: 0, y: 0 }, this.constraints = !1, this.hasMutatedConstraints = !1, this.elastic = ln(), this.visualElement = e;
  }
  start(e, { snapToCursor: r = !1 } = {}) {
    const { presenceContext: n } = this.visualElement;
    if (n && n.isPresent === !1)
      return;
    const i = (d) => {
      const { dragSnapToOrigin: p } = this.getProps();
      p ? this.pauseAnimation() : this.stopAnimation(), r && this.snapToCursor(xp(d, "page").point);
    }, s = (d, p) => {
      const { drag: w, dragPropagation: A, onDragStart: M } = this.getProps();
      if (w && !A && (this.openGlobalLock && this.openGlobalLock(), this.openGlobalLock = $7(w), !this.openGlobalLock))
        return;
      this.isDragging = !0, this.currentDirection = null, this.resolveConstraints(), this.visualElement.projection && (this.visualElement.projection.isAnimationBlocked = !0, this.visualElement.projection.target = void 0), Xi((L) => {
        let B = this.getAxisMotionValue(L).get() || 0;
        if (Gs.test(B)) {
          const { projection: $ } = this.visualElement;
          if ($ && $.layout) {
            const H = $.layout.layoutBox[L];
            H && (B = Li(H) * (parseFloat(B) / 100));
          }
        }
        this.originPoint[L] = B;
      }), M && Lr.postRender(() => M(d, p)), iv(this.visualElement, "transform");
      const { animationState: N } = this.visualElement;
      N && N.setActive("whileDrag", !0);
    }, o = (d, p) => {
      const { dragPropagation: w, dragDirectionLock: A, onDirectionLock: M, onDrag: N } = this.getProps();
      if (!w && !this.openGlobalLock)
        return;
      const { offset: L } = p;
      if (A && this.currentDirection === null) {
        this.currentDirection = Xee(L), this.currentDirection !== null && M && M(this.currentDirection);
        return;
      }
      this.updateAxis("x", p.point, L), this.updateAxis("y", p.point, L), this.visualElement.render(), N && N(d, p);
    }, a = (d, p) => this.stop(d, p), u = () => Xi((d) => {
      var p;
      return this.getAnimationState(d) === "paused" && ((p = this.getAxisMotionValue(d).animation) === null || p === void 0 ? void 0 : p.play());
    }), { dragSnapToOrigin: l } = this.getProps();
    this.panSession = new N7(e, {
      onSessionStart: i,
      onStart: s,
      onMove: o,
      onSessionEnd: a,
      resumeAnimation: u
    }, {
      transformPagePoint: this.visualElement.getTransformPagePoint(),
      dragSnapToOrigin: l,
      contextWindow: H7(this.visualElement)
    });
  }
  stop(e, r) {
    const n = this.isDragging;
    if (this.cancel(), !n)
      return;
    const { velocity: i } = r;
    this.startAnimation(i);
    const { onDragEnd: s } = this.getProps();
    s && Lr.postRender(() => s(e, r));
  }
  cancel() {
    this.isDragging = !1;
    const { projection: e, animationState: r } = this.visualElement;
    e && (e.isAnimationBlocked = !1), this.panSession && this.panSession.end(), this.panSession = void 0;
    const { dragPropagation: n } = this.getProps();
    !n && this.openGlobalLock && (this.openGlobalLock(), this.openGlobalLock = null), r && r.setActive("whileDrag", !1);
  }
  updateAxis(e, r, n) {
    const { drag: i } = this.getProps();
    if (!n || !vd(e, i, this.currentDirection))
      return;
    const s = this.getAxisMotionValue(e);
    let o = this.originPoint[e] + n[e];
    this.constraints && this.constraints[e] && (o = Fee(o, this.constraints[e], this.elastic[e])), s.set(o);
  }
  resolveConstraints() {
    var e;
    const { dragConstraints: r, dragElastic: n } = this.getProps(), i = this.visualElement.projection && !this.visualElement.projection.layout ? this.visualElement.projection.measure(!1) : (e = this.visualElement.projection) === null || e === void 0 ? void 0 : e.layout, s = this.constraints;
    r && tu(r) ? this.constraints || (this.constraints = this.resolveRefConstraints()) : r && i ? this.constraints = jee(i.layoutBox, r) : this.constraints = !1, this.elastic = Wee(n), s !== this.constraints && i && this.constraints && !this.hasMutatedConstraints && Xi((o) => {
      this.constraints !== !1 && this.getAxisMotionValue(o) && (this.constraints[o] = zee(i.layoutBox[o], this.constraints[o]));
    });
  }
  resolveRefConstraints() {
    const { dragConstraints: e, onMeasureDragConstraints: r } = this.getProps();
    if (!e || !tu(e))
      return !1;
    const n = e.current;
    Uo(n !== null, "If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");
    const { projection: i } = this.visualElement;
    if (!i || !i.layout)
      return !1;
    const s = Gee(n, i.root, this.visualElement.getTransformPagePoint());
    let o = Uee(i.layout.layoutBox, s);
    if (r) {
      const a = r(Hee(o));
      this.hasMutatedConstraints = !!a, a && (o = U7(a));
    }
    return o;
  }
  startAnimation(e) {
    const { drag: r, dragMomentum: n, dragElastic: i, dragTransition: s, dragSnapToOrigin: o, onDragTransitionEnd: a } = this.getProps(), u = this.constraints || {}, l = Xi((d) => {
      if (!vd(d, r, this.currentDirection))
        return;
      let p = u && u[d] || {};
      o && (p = { min: 0, max: 0 });
      const w = i ? 200 : 1e6, A = i ? 40 : 1e7, M = {
        type: "inertia",
        velocity: n ? e[d] : 0,
        bounceStiffness: w,
        bounceDamping: A,
        timeConstant: 750,
        restDelta: 1,
        restSpeed: 10,
        ...s,
        ...p
      };
      return this.startAxisValueAnimation(d, M);
    });
    return Promise.all(l).then(a);
  }
  startAxisValueAnimation(e, r) {
    const n = this.getAxisMotionValue(e);
    return iv(this.visualElement, e), n.start(Wb(e, n, 0, r, this.visualElement, !1));
  }
  stopAnimation() {
    Xi((e) => this.getAxisMotionValue(e).stop());
  }
  pauseAnimation() {
    Xi((e) => {
      var r;
      return (r = this.getAxisMotionValue(e).animation) === null || r === void 0 ? void 0 : r.pause();
    });
  }
  getAnimationState(e) {
    var r;
    return (r = this.getAxisMotionValue(e).animation) === null || r === void 0 ? void 0 : r.state;
  }
  /**
   * Drag works differently depending on which props are provided.
   *
   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.
   * - Otherwise, we apply the delta to the x/y motion values.
   */
  getAxisMotionValue(e) {
    const r = `_drag${e.toUpperCase()}`, n = this.visualElement.getProps(), i = n[r];
    return i || this.visualElement.getValue(e, (n.initial ? n.initial[e] : void 0) || 0);
  }
  snapToCursor(e) {
    Xi((r) => {
      const { drag: n } = this.getProps();
      if (!vd(r, n, this.currentDirection))
        return;
      const { projection: i } = this.visualElement, s = this.getAxisMotionValue(r);
      if (i && i.layout) {
        const { min: o, max: a } = i.layout.layoutBox[r];
        s.set(e[r] - Qr(o, a, 0.5));
      }
    });
  }
  /**
   * When the viewport resizes we want to check if the measured constraints
   * have changed and, if so, reposition the element within those new constraints
   * relative to where it was before the resize.
   */
  scalePositionWithinConstraints() {
    if (!this.visualElement.current)
      return;
    const { drag: e, dragConstraints: r } = this.getProps(), { projection: n } = this.visualElement;
    if (!tu(r) || !n || !this.constraints)
      return;
    this.stopAnimation();
    const i = { x: 0, y: 0 };
    Xi((o) => {
      const a = this.getAxisMotionValue(o);
      if (a && this.constraints !== !1) {
        const u = a.get();
        i[o] = qee({ min: u, max: u }, this.constraints[o]);
      }
    });
    const { transformTemplate: s } = this.visualElement.getProps();
    this.visualElement.current.style.transform = s ? s({}, "") : "none", n.root && n.root.updateScroll(), n.updateLayout(), this.resolveConstraints(), Xi((o) => {
      if (!vd(o, e, null))
        return;
      const a = this.getAxisMotionValue(o), { min: u, max: l } = this.constraints[o];
      a.set(Qr(u, l, i[o]));
    });
  }
  addListeners() {
    if (!this.visualElement.current)
      return;
    Yee.set(this.visualElement, this);
    const e = this.visualElement.current, r = Do(e, "pointerdown", (u) => {
      const { drag: l, dragListener: d = !0 } = this.getProps();
      l && d && this.start(u);
    }), n = () => {
      const { dragConstraints: u } = this.getProps();
      tu(u) && u.current && (this.constraints = this.resolveRefConstraints());
    }, { projection: i } = this.visualElement, s = i.addEventListener("measure", n);
    i && !i.layout && (i.root && i.root.updateScroll(), i.updateLayout()), Lr.read(n);
    const o = Mo(window, "resize", () => this.scalePositionWithinConstraints()), a = i.addEventListener("didUpdate", ({ delta: u, hasLayoutChanged: l }) => {
      this.isDragging && l && (Xi((d) => {
        const p = this.getAxisMotionValue(d);
        p && (this.originPoint[d] += u[d].translate, p.set(p.get() + u[d].translate));
      }), this.visualElement.render());
    });
    return () => {
      o(), r(), s(), a && a();
    };
  }
  getProps() {
    const e = this.visualElement.getProps(), { drag: r = !1, dragDirectionLock: n = !1, dragPropagation: i = !1, dragConstraints: s = !1, dragElastic: o = ov, dragMomentum: a = !0 } = e;
    return {
      ...e,
      drag: r,
      dragDirectionLock: n,
      dragPropagation: i,
      dragConstraints: s,
      dragElastic: o,
      dragMomentum: a
    };
  }
}
function vd(t, e, r) {
  return (e === !0 || e === t) && (r === null || r === t);
}
function Xee(t, e = 10) {
  let r = null;
  return Math.abs(t.y) > e ? r = "y" : Math.abs(t.x) > e && (r = "x"), r;
}
class Zee extends Ra {
  constructor(e) {
    super(e), this.removeGroupControls = Un, this.removeListeners = Un, this.controls = new Jee(e);
  }
  mount() {
    const { dragControls: e } = this.node.getProps();
    e && (this.removeGroupControls = e.subscribe(this.controls)), this.removeListeners = this.controls.addListeners() || Un;
  }
  unmount() {
    this.removeGroupControls(), this.removeListeners();
  }
}
const R_ = (t) => (e, r) => {
  t && Lr.postRender(() => t(e, r));
};
class Qee extends Ra {
  constructor() {
    super(...arguments), this.removePointerDownListener = Un;
  }
  onPointerDown(e) {
    this.session = new N7(e, this.createPanHandlers(), {
      transformPagePoint: this.node.getTransformPagePoint(),
      contextWindow: H7(this.node)
    });
  }
  createPanHandlers() {
    const { onPanSessionStart: e, onPanStart: r, onPan: n, onPanEnd: i } = this.node.getProps();
    return {
      onSessionStart: R_(e),
      onStart: R_(r),
      onMove: n,
      onEnd: (s, o) => {
        delete this.session, i && Lr.postRender(() => i(s, o));
      }
    };
  }
  mount() {
    this.removePointerDownListener = Do(this.node.current, "pointerdown", (e) => this.onPointerDown(e));
  }
  update() {
    this.session && this.session.updateHandlers(this.createPanHandlers());
  }
  unmount() {
    this.removePointerDownListener(), this.session && this.session.end();
  }
}
const _p = Sa(null);
function ete() {
  const t = Tn(_p);
  if (t === null)
    return [!0, null];
  const { isPresent: e, onExitComplete: r, register: n } = t, i = mv();
  Dn(() => n(i), []);
  const s = vv(() => r && r(i), [i, r]);
  return !e && r ? [!1, s] : [!0];
}
const Yb = Sa({}), K7 = Sa({}), jd = {
  /**
   * Global flag as to whether the tree has animated since the last time
   * we resized the window
   */
  hasAnimatedSinceResize: !0,
  /**
   * We set this to true once, on the first update. Any nodes added to the tree beyond that
   * update will be given a `data-projection-id` attribute.
   */
  hasEverUpdated: !1
};
function D_(t, e) {
  return e.max === e.min ? 0 : t / (e.max - e.min) * 100;
}
const Of = {
  correct: (t, e) => {
    if (!e.target)
      return t;
    if (typeof t == "string")
      if (Vt.test(t))
        t = parseFloat(t);
      else
        return t;
    const r = D_(t, e.target.x), n = D_(t, e.target.y);
    return `${r}% ${n}%`;
  }
}, tte = {
  correct: (t, { treeScale: e, projectionDelta: r }) => {
    const n = t, i = _a.parse(t);
    if (i.length > 5)
      return n;
    const s = _a.createTransformer(t), o = typeof i[0] != "number" ? 1 : 0, a = r.x.scale * e.x, u = r.y.scale * e.y;
    i[0 + o] /= a, i[1 + o] /= u;
    const l = Qr(a, u, 0.5);
    return typeof i[2 + o] == "number" && (i[2 + o] /= l), typeof i[3 + o] == "number" && (i[3 + o] /= l), s(i);
  }
}, _0 = {};
function rte(t) {
  Object.assign(_0, t);
}
const { schedule: Jb } = GS(queueMicrotask, !1);
class nte extends kR {
  /**
   * This only mounts projection nodes for components that
   * need measuring, we might want to do it for all components
   * in order to incorporate transforms
   */
  componentDidMount() {
    const { visualElement: e, layoutGroup: r, switchLayoutGroup: n, layoutId: i } = this.props, { projection: s } = e;
    rte(ite), s && (r.group && r.group.add(s), n && n.register && i && n.register(s), s.root.didUpdate(), s.addEventListener("animationComplete", () => {
      this.safeToRemove();
    }), s.setOptions({
      ...s.options,
      onExitComplete: () => this.safeToRemove()
    })), jd.hasEverUpdated = !0;
  }
  getSnapshotBeforeUpdate(e) {
    const { layoutDependency: r, visualElement: n, drag: i, isPresent: s } = this.props, o = n.projection;
    return o && (o.isPresent = s, i || e.layoutDependency !== r || r === void 0 ? o.willUpdate() : this.safeToRemove(), e.isPresent !== s && (s ? o.promote() : o.relegate() || Lr.postRender(() => {
      const a = o.getStack();
      (!a || !a.members.length) && this.safeToRemove();
    }))), null;
  }
  componentDidUpdate() {
    const { projection: e } = this.props.visualElement;
    e && (e.root.didUpdate(), Jb.postRender(() => {
      !e.currentAnimation && e.isLead() && this.safeToRemove();
    }));
  }
  componentWillUnmount() {
    const { visualElement: e, layoutGroup: r, switchLayoutGroup: n } = this.props, { projection: i } = e;
    i && (i.scheduleCheckAfterUnmount(), r && r.group && r.group.remove(i), n && n.deregister && n.deregister(i));
  }
  safeToRemove() {
    const { safeToRemove: e } = this.props;
    e && e();
  }
  render() {
    return null;
  }
}
function V7(t) {
  const [e, r] = ete(), n = Tn(Yb);
  return pe.jsx(nte, { ...t, layoutGroup: n, switchLayoutGroup: Tn(K7), isPresent: e, safeToRemove: r });
}
const ite = {
  borderRadius: {
    ...Of,
    applyTo: [
      "borderTopLeftRadius",
      "borderTopRightRadius",
      "borderBottomLeftRadius",
      "borderBottomRightRadius"
    ]
  },
  borderTopLeftRadius: Of,
  borderTopRightRadius: Of,
  borderBottomLeftRadius: Of,
  borderBottomRightRadius: Of,
  boxShadow: tte
}, G7 = ["TopLeft", "TopRight", "BottomLeft", "BottomRight"], ste = G7.length, O_ = (t) => typeof t == "string" ? parseFloat(t) : t, N_ = (t) => typeof t == "number" || Vt.test(t);
function ote(t, e, r, n, i, s) {
  i ? (t.opacity = Qr(
    0,
    // TODO Reinstate this if only child
    r.opacity !== void 0 ? r.opacity : 1,
    ate(n)
  ), t.opacityExit = Qr(e.opacity !== void 0 ? e.opacity : 1, 0, cte(n))) : s && (t.opacity = Qr(e.opacity !== void 0 ? e.opacity : 1, r.opacity !== void 0 ? r.opacity : 1, n));
  for (let o = 0; o < ste; o++) {
    const a = `border${G7[o]}Radius`;
    let u = L_(e, a), l = L_(r, a);
    if (u === void 0 && l === void 0)
      continue;
    u || (u = 0), l || (l = 0), u === 0 || l === 0 || N_(u) === N_(l) ? (t[a] = Math.max(Qr(O_(u), O_(l), n), 0), (Gs.test(l) || Gs.test(u)) && (t[a] += "%")) : t[a] = l;
  }
  (e.rotate || r.rotate) && (t.rotate = Qr(e.rotate || 0, r.rotate || 0, n));
}
function L_(t, e) {
  return t[e] !== void 0 ? t[e] : t.borderRadius;
}
const ate = /* @__PURE__ */ Y7(0, 0.5, t7), cte = /* @__PURE__ */ Y7(0.5, 0.95, Un);
function Y7(t, e, r) {
  return (n) => n < t ? 0 : n > e ? 1 : r(Iu(t, e, n));
}
function k_(t, e) {
  t.min = e.min, t.max = e.max;
}
function Yi(t, e) {
  k_(t.x, e.x), k_(t.y, e.y);
}
function $_(t, e) {
  t.translate = e.translate, t.scale = e.scale, t.originPoint = e.originPoint, t.origin = e.origin;
}
function B_(t, e, r, n, i) {
  return t -= e, t = x0(t, 1 / r, n), i !== void 0 && (t = x0(t, 1 / i, n)), t;
}
function ute(t, e = 0, r = 1, n = 0.5, i, s = t, o = t) {
  if (Gs.test(e) && (e = parseFloat(e), e = Qr(o.min, o.max, e / 100) - o.min), typeof e != "number")
    return;
  let a = Qr(s.min, s.max, n);
  t === s && (a -= e), t.min = B_(t.min, e, r, a, i), t.max = B_(t.max, e, r, a, i);
}
function F_(t, e, [r, n, i], s, o) {
  ute(t, e[r], e[n], e[i], e.scale, s, o);
}
const fte = ["x", "scaleX", "originX"], lte = ["y", "scaleY", "originY"];
function j_(t, e, r, n) {
  F_(t.x, e, fte, r ? r.x : void 0, n ? n.x : void 0), F_(t.y, e, lte, r ? r.y : void 0, n ? n.y : void 0);
}
function U_(t) {
  return t.translate === 0 && t.scale === 1;
}
function J7(t) {
  return U_(t.x) && U_(t.y);
}
function q_(t, e) {
  return t.min === e.min && t.max === e.max;
}
function hte(t, e) {
  return q_(t.x, e.x) && q_(t.y, e.y);
}
function z_(t, e) {
  return Math.round(t.min) === Math.round(e.min) && Math.round(t.max) === Math.round(e.max);
}
function X7(t, e) {
  return z_(t.x, e.x) && z_(t.y, e.y);
}
function W_(t) {
  return Li(t.x) / Li(t.y);
}
function H_(t, e) {
  return t.translate === e.translate && t.scale === e.scale && t.originPoint === e.originPoint;
}
class dte {
  constructor() {
    this.members = [];
  }
  add(e) {
    Hb(this.members, e), e.scheduleRender();
  }
  remove(e) {
    if (Kb(this.members, e), e === this.prevLead && (this.prevLead = void 0), e === this.lead) {
      const r = this.members[this.members.length - 1];
      r && this.promote(r);
    }
  }
  relegate(e) {
    const r = this.members.findIndex((i) => e === i);
    if (r === 0)
      return !1;
    let n;
    for (let i = r; i >= 0; i--) {
      const s = this.members[i];
      if (s.isPresent !== !1) {
        n = s;
        break;
      }
    }
    return n ? (this.promote(n), !0) : !1;
  }
  promote(e, r) {
    const n = this.lead;
    if (e !== n && (this.prevLead = n, this.lead = e, e.show(), n)) {
      n.instance && n.scheduleRender(), e.scheduleRender(), e.resumeFrom = n, r && (e.resumeFrom.preserveOpacity = !0), n.snapshot && (e.snapshot = n.snapshot, e.snapshot.latestValues = n.animationValues || n.latestValues), e.root && e.root.isUpdating && (e.isLayoutDirty = !0);
      const { crossfade: i } = e.options;
      i === !1 && n.hide();
    }
  }
  exitAnimationComplete() {
    this.members.forEach((e) => {
      const { options: r, resumingFrom: n } = e;
      r.onExitComplete && r.onExitComplete(), n && n.options.onExitComplete && n.options.onExitComplete();
    });
  }
  scheduleRender() {
    this.members.forEach((e) => {
      e.instance && e.scheduleRender(!1);
    });
  }
  /**
   * Clear any leads that have been removed this render to prevent them from being
   * used in future animations and to prevent memory leaks
   */
  removeLeadSnapshot() {
    this.lead && this.lead.snapshot && (this.lead.snapshot = void 0);
  }
}
function pte(t, e, r) {
  let n = "";
  const i = t.x.translate / e.x, s = t.y.translate / e.y, o = (r == null ? void 0 : r.z) || 0;
  if ((i || s || o) && (n = `translate3d(${i}px, ${s}px, ${o}px) `), (e.x !== 1 || e.y !== 1) && (n += `scale(${1 / e.x}, ${1 / e.y}) `), r) {
    const { transformPerspective: l, rotate: d, rotateX: p, rotateY: w, skewX: A, skewY: M } = r;
    l && (n = `perspective(${l}px) ${n}`), d && (n += `rotate(${d}deg) `), p && (n += `rotateX(${p}deg) `), w && (n += `rotateY(${w}deg) `), A && (n += `skewX(${A}deg) `), M && (n += `skewY(${M}deg) `);
  }
  const a = t.x.scale * e.x, u = t.y.scale * e.y;
  return (a !== 1 || u !== 1) && (n += `scale(${a}, ${u})`), n || "none";
}
const gte = (t, e) => t.depth - e.depth;
class mte {
  constructor() {
    this.children = [], this.isDirty = !1;
  }
  add(e) {
    Hb(this.children, e), this.isDirty = !0;
  }
  remove(e) {
    Kb(this.children, e), this.isDirty = !0;
  }
  forEach(e) {
    this.isDirty && this.children.sort(gte), this.isDirty = !1, this.children.forEach(e);
  }
}
function Ud(t) {
  const e = Xn(t) ? t.get() : t;
  return aee(e) ? e.toValue() : e;
}
function vte(t, e) {
  const r = Ys.now(), n = ({ timestamp: i }) => {
    const s = i - r;
    s >= e && (wa(n), t(s - e));
  };
  return Lr.read(n, !0), () => wa(n);
}
function bte(t) {
  return t instanceof SVGElement && t.tagName !== "svg";
}
function yte(t, e, r) {
  const n = Xn(t) ? t : Rl(t);
  return n.start(Wb("", n, e, r)), n.animation;
}
const Ja = {
  type: "projectionFrame",
  totalNodes: 0,
  resolvedTargetDeltas: 0,
  recalculatedProjection: 0
}, Uf = typeof window < "u" && window.MotionDebug !== void 0, jm = ["", "X", "Y", "Z"], wte = { visibility: "hidden" }, K_ = 1e3;
let xte = 0;
function Um(t, e, r, n) {
  const { latestValues: i } = e;
  i[t] && (r[t] = i[t], e.setStaticValue(t, 0), n && (n[t] = 0));
}
function Z7(t) {
  if (t.hasCheckedOptimisedAppear = !0, t.root === t)
    return;
  const { visualElement: e } = t.options;
  if (!e)
    return;
  const r = T7(e);
  if (window.MotionHasOptimisedAnimation(r, "transform")) {
    const { layout: i, layoutId: s } = t.options;
    window.MotionCancelOptimisedAnimation(r, "transform", Lr, !(i || s));
  }
  const { parent: n } = t;
  n && !n.hasCheckedOptimisedAppear && Z7(n);
}
function Q7({ attachResizeListener: t, defaultParent: e, measureScroll: r, checkIsScrollRoot: n, resetTransform: i }) {
  return class {
    constructor(o = {}, a = e == null ? void 0 : e()) {
      this.id = xte++, this.animationId = 0, this.children = /* @__PURE__ */ new Set(), this.options = {}, this.isTreeAnimating = !1, this.isAnimationBlocked = !1, this.isLayoutDirty = !1, this.isProjectionDirty = !1, this.isSharedProjectionDirty = !1, this.isTransformDirty = !1, this.updateManuallyBlocked = !1, this.updateBlockedByResize = !1, this.isUpdating = !1, this.isSVG = !1, this.needsReset = !1, this.shouldResetTransform = !1, this.hasCheckedOptimisedAppear = !1, this.treeScale = { x: 1, y: 1 }, this.eventHandlers = /* @__PURE__ */ new Map(), this.hasTreeAnimated = !1, this.updateScheduled = !1, this.scheduleUpdate = () => this.update(), this.projectionUpdateScheduled = !1, this.checkUpdateFailed = () => {
        this.isUpdating && (this.isUpdating = !1, this.clearAllSnapshots());
      }, this.updateProjection = () => {
        this.projectionUpdateScheduled = !1, Uf && (Ja.totalNodes = Ja.resolvedTargetDeltas = Ja.recalculatedProjection = 0), this.nodes.forEach(Ste), this.nodes.forEach(Cte), this.nodes.forEach(Tte), this.nodes.forEach(Ate), Uf && window.MotionDebug.record(Ja);
      }, this.resolvedRelativeTargetAt = 0, this.hasProjected = !1, this.isVisible = !0, this.animationProgress = 0, this.sharedNodes = /* @__PURE__ */ new Map(), this.latestValues = o, this.root = a ? a.root || a : this, this.path = a ? [...a.path, a] : [], this.parent = a, this.depth = a ? a.depth + 1 : 0;
      for (let u = 0; u < this.path.length; u++)
        this.path[u].shouldResetTransform = !0;
      this.root === this && (this.nodes = new mte());
    }
    addEventListener(o, a) {
      return this.eventHandlers.has(o) || this.eventHandlers.set(o, new Vb()), this.eventHandlers.get(o).add(a);
    }
    notifyListeners(o, ...a) {
      const u = this.eventHandlers.get(o);
      u && u.notify(...a);
    }
    hasListeners(o) {
      return this.eventHandlers.has(o);
    }
    /**
     * Lifecycles
     */
    mount(o, a = this.root.hasTreeAnimated) {
      if (this.instance)
        return;
      this.isSVG = bte(o), this.instance = o;
      const { layoutId: u, layout: l, visualElement: d } = this.options;
      if (d && !d.current && d.mount(o), this.root.nodes.add(this), this.parent && this.parent.children.add(this), a && (l || u) && (this.isLayoutDirty = !0), t) {
        let p;
        const w = () => this.root.updateBlockedByResize = !1;
        t(o, () => {
          this.root.updateBlockedByResize = !0, p && p(), p = vte(w, 250), jd.hasAnimatedSinceResize && (jd.hasAnimatedSinceResize = !1, this.nodes.forEach(G_));
        });
      }
      u && this.root.registerSharedNode(u, this), this.options.animate !== !1 && d && (u || l) && this.addEventListener("didUpdate", ({ delta: p, hasLayoutChanged: w, hasRelativeTargetChanged: A, layout: M }) => {
        if (this.isTreeAnimationBlocked()) {
          this.target = void 0, this.relativeTarget = void 0;
          return;
        }
        const N = this.options.transition || d.getDefaultTransition() || Lte, { onLayoutAnimationStart: L, onLayoutAnimationComplete: B } = d.getProps(), $ = !this.targetLayout || !X7(this.targetLayout, M) || A, H = !w && A;
        if (this.options.layoutRoot || this.resumeFrom && this.resumeFrom.instance || H || w && ($ || !this.currentAnimation)) {
          this.resumeFrom && (this.resumingFrom = this.resumeFrom, this.resumingFrom.resumingFrom = void 0), this.setAnimationOrigin(p, H);
          const W = {
            ...Tb(N, "layout"),
            onPlay: L,
            onComplete: B
          };
          (d.shouldReduceMotion || this.options.layoutRoot) && (W.delay = 0, W.type = !1), this.startAnimation(W);
        } else
          w || G_(this), this.isLead() && this.options.onExitComplete && this.options.onExitComplete();
        this.targetLayout = M;
      });
    }
    unmount() {
      this.options.layoutId && this.willUpdate(), this.root.nodes.remove(this);
      const o = this.getStack();
      o && o.remove(this), this.parent && this.parent.children.delete(this), this.instance = void 0, wa(this.updateProjection);
    }
    // only on the root
    blockUpdate() {
      this.updateManuallyBlocked = !0;
    }
    unblockUpdate() {
      this.updateManuallyBlocked = !1;
    }
    isUpdateBlocked() {
      return this.updateManuallyBlocked || this.updateBlockedByResize;
    }
    isTreeAnimationBlocked() {
      return this.isAnimationBlocked || this.parent && this.parent.isTreeAnimationBlocked() || !1;
    }
    // Note: currently only running on root node
    startUpdate() {
      this.isUpdateBlocked() || (this.isUpdating = !0, this.nodes && this.nodes.forEach(Rte), this.animationId++);
    }
    getTransformTemplate() {
      const { visualElement: o } = this.options;
      return o && o.getProps().transformTemplate;
    }
    willUpdate(o = !0) {
      if (this.root.hasTreeAnimated = !0, this.root.isUpdateBlocked()) {
        this.options.onExitComplete && this.options.onExitComplete();
        return;
      }
      if (window.MotionCancelOptimisedAnimation && !this.hasCheckedOptimisedAppear && Z7(this), !this.root.isUpdating && this.root.startUpdate(), this.isLayoutDirty)
        return;
      this.isLayoutDirty = !0;
      for (let d = 0; d < this.path.length; d++) {
        const p = this.path[d];
        p.shouldResetTransform = !0, p.updateScroll("snapshot"), p.options.layoutRoot && p.willUpdate(!1);
      }
      const { layoutId: a, layout: u } = this.options;
      if (a === void 0 && !u)
        return;
      const l = this.getTransformTemplate();
      this.prevTransformTemplateValue = l ? l(this.latestValues, "") : void 0, this.updateSnapshot(), o && this.notifyListeners("willUpdate");
    }
    update() {
      if (this.updateScheduled = !1, this.isUpdateBlocked()) {
        this.unblockUpdate(), this.clearAllSnapshots(), this.nodes.forEach(V_);
        return;
      }
      this.isUpdating || this.nodes.forEach(Mte), this.isUpdating = !1, this.nodes.forEach(Ite), this.nodes.forEach(_te), this.nodes.forEach(Ete), this.clearAllSnapshots();
      const a = Ys.now();
      Fn.delta = xa(0, 1e3 / 60, a - Fn.timestamp), Fn.timestamp = a, Fn.isProcessing = !0, Dm.update.process(Fn), Dm.preRender.process(Fn), Dm.render.process(Fn), Fn.isProcessing = !1;
    }
    didUpdate() {
      this.updateScheduled || (this.updateScheduled = !0, Jb.read(this.scheduleUpdate));
    }
    clearAllSnapshots() {
      this.nodes.forEach(Pte), this.sharedNodes.forEach(Dte);
    }
    scheduleUpdateProjection() {
      this.projectionUpdateScheduled || (this.projectionUpdateScheduled = !0, Lr.preRender(this.updateProjection, !1, !0));
    }
    scheduleCheckAfterUnmount() {
      Lr.postRender(() => {
        this.isLayoutDirty ? this.root.didUpdate() : this.root.checkUpdateFailed();
      });
    }
    /**
     * Update measurements
     */
    updateSnapshot() {
      this.snapshot || !this.instance || (this.snapshot = this.measure());
    }
    updateLayout() {
      if (!this.instance || (this.updateScroll(), !(this.options.alwaysMeasureLayout && this.isLead()) && !this.isLayoutDirty))
        return;
      if (this.resumeFrom && !this.resumeFrom.instance)
        for (let u = 0; u < this.path.length; u++)
          this.path[u].updateScroll();
      const o = this.layout;
      this.layout = this.measure(!1), this.layoutCorrected = ln(), this.isLayoutDirty = !1, this.projectionDelta = void 0, this.notifyListeners("measure", this.layout.layoutBox);
      const { visualElement: a } = this.options;
      a && a.notify("LayoutMeasure", this.layout.layoutBox, o ? o.layoutBox : void 0);
    }
    updateScroll(o = "measure") {
      let a = !!(this.options.layoutScroll && this.instance);
      if (this.scroll && this.scroll.animationId === this.root.animationId && this.scroll.phase === o && (a = !1), a) {
        const u = n(this.instance);
        this.scroll = {
          animationId: this.root.animationId,
          phase: o,
          isRoot: u,
          offset: r(this.instance),
          wasRoot: this.scroll ? this.scroll.isRoot : u
        };
      }
    }
    resetTransform() {
      if (!i)
        return;
      const o = this.isLayoutDirty || this.shouldResetTransform || this.options.alwaysMeasureLayout, a = this.projectionDelta && !J7(this.projectionDelta), u = this.getTransformTemplate(), l = u ? u(this.latestValues, "") : void 0, d = l !== this.prevTransformTemplateValue;
      o && (a || Ya(this.latestValues) || d) && (i(this.instance, l), this.shouldResetTransform = !1, this.scheduleRender());
    }
    measure(o = !0) {
      const a = this.measurePageBox();
      let u = this.removeElementScroll(a);
      return o && (u = this.removeTransform(u)), kte(u), {
        animationId: this.root.animationId,
        measuredBox: a,
        layoutBox: u,
        latestValues: {},
        source: this.id
      };
    }
    measurePageBox() {
      var o;
      const { visualElement: a } = this.options;
      if (!a)
        return ln();
      const u = a.measureViewportBox();
      if (!(((o = this.scroll) === null || o === void 0 ? void 0 : o.wasRoot) || this.path.some($te))) {
        const { scroll: d } = this.root;
        d && (nu(u.x, d.offset.x), nu(u.y, d.offset.y));
      }
      return u;
    }
    removeElementScroll(o) {
      var a;
      const u = ln();
      if (Yi(u, o), !((a = this.scroll) === null || a === void 0) && a.wasRoot)
        return u;
      for (let l = 0; l < this.path.length; l++) {
        const d = this.path[l], { scroll: p, options: w } = d;
        d !== this.root && p && w.layoutScroll && (p.wasRoot && Yi(u, o), nu(u.x, p.offset.x), nu(u.y, p.offset.y));
      }
      return u;
    }
    applyTransform(o, a = !1) {
      const u = ln();
      Yi(u, o);
      for (let l = 0; l < this.path.length; l++) {
        const d = this.path[l];
        !a && d.options.layoutScroll && d.scroll && d !== d.root && iu(u, {
          x: -d.scroll.offset.x,
          y: -d.scroll.offset.y
        }), Ya(d.latestValues) && iu(u, d.latestValues);
      }
      return Ya(this.latestValues) && iu(u, this.latestValues), u;
    }
    removeTransform(o) {
      const a = ln();
      Yi(a, o);
      for (let u = 0; u < this.path.length; u++) {
        const l = this.path[u];
        if (!l.instance || !Ya(l.latestValues))
          continue;
        av(l.latestValues) && l.updateSnapshot();
        const d = ln(), p = l.measurePageBox();
        Yi(d, p), j_(a, l.latestValues, l.snapshot ? l.snapshot.layoutBox : void 0, d);
      }
      return Ya(this.latestValues) && j_(a, this.latestValues), a;
    }
    setTargetDelta(o) {
      this.targetDelta = o, this.root.scheduleUpdateProjection(), this.isProjectionDirty = !0;
    }
    setOptions(o) {
      this.options = {
        ...this.options,
        ...o,
        crossfade: o.crossfade !== void 0 ? o.crossfade : !0
      };
    }
    clearMeasurements() {
      this.scroll = void 0, this.layout = void 0, this.snapshot = void 0, this.prevTransformTemplateValue = void 0, this.targetDelta = void 0, this.target = void 0, this.isLayoutDirty = !1;
    }
    forceRelativeParentToResolveTarget() {
      this.relativeParent && this.relativeParent.resolvedRelativeTargetAt !== Fn.timestamp && this.relativeParent.resolveTargetDelta(!0);
    }
    resolveTargetDelta(o = !1) {
      var a;
      const u = this.getLead();
      this.isProjectionDirty || (this.isProjectionDirty = u.isProjectionDirty), this.isTransformDirty || (this.isTransformDirty = u.isTransformDirty), this.isSharedProjectionDirty || (this.isSharedProjectionDirty = u.isSharedProjectionDirty);
      const l = !!this.resumingFrom || this !== u;
      if (!(o || l && this.isSharedProjectionDirty || this.isProjectionDirty || !((a = this.parent) === null || a === void 0) && a.isProjectionDirty || this.attemptToResolveRelativeTarget || this.root.updateBlockedByResize))
        return;
      const { layout: p, layoutId: w } = this.options;
      if (!(!this.layout || !(p || w))) {
        if (this.resolvedRelativeTargetAt = Fn.timestamp, !this.targetDelta && !this.relativeTarget) {
          const A = this.getClosestProjectingParent();
          A && A.layout && this.animationProgress !== 1 ? (this.relativeParent = A, this.forceRelativeParentToResolveTarget(), this.relativeTarget = ln(), this.relativeTargetOrigin = ln(), Xf(this.relativeTargetOrigin, this.layout.layoutBox, A.layout.layoutBox), Yi(this.relativeTarget, this.relativeTargetOrigin)) : this.relativeParent = this.relativeTarget = void 0;
        }
        if (!(!this.relativeTarget && !this.targetDelta)) {
          if (this.target || (this.target = ln(), this.targetWithTransforms = ln()), this.relativeTarget && this.relativeTargetOrigin && this.relativeParent && this.relativeParent.target ? (this.forceRelativeParentToResolveTarget(), Bee(this.target, this.relativeTarget, this.relativeParent.target)) : this.targetDelta ? (this.resumingFrom ? this.target = this.applyTransform(this.layout.layoutBox) : Yi(this.target, this.layout.layoutBox), z7(this.target, this.targetDelta)) : Yi(this.target, this.layout.layoutBox), this.attemptToResolveRelativeTarget) {
            this.attemptToResolveRelativeTarget = !1;
            const A = this.getClosestProjectingParent();
            A && !!A.resumingFrom == !!this.resumingFrom && !A.options.layoutScroll && A.target && this.animationProgress !== 1 ? (this.relativeParent = A, this.forceRelativeParentToResolveTarget(), this.relativeTarget = ln(), this.relativeTargetOrigin = ln(), Xf(this.relativeTargetOrigin, this.target, A.target), Yi(this.relativeTarget, this.relativeTargetOrigin)) : this.relativeParent = this.relativeTarget = void 0;
          }
          Uf && Ja.resolvedTargetDeltas++;
        }
      }
    }
    getClosestProjectingParent() {
      if (!(!this.parent || av(this.parent.latestValues) || q7(this.parent.latestValues)))
        return this.parent.isProjecting() ? this.parent : this.parent.getClosestProjectingParent();
    }
    isProjecting() {
      return !!((this.relativeTarget || this.targetDelta || this.options.layoutRoot) && this.layout);
    }
    calcProjection() {
      var o;
      const a = this.getLead(), u = !!this.resumingFrom || this !== a;
      let l = !0;
      if ((this.isProjectionDirty || !((o = this.parent) === null || o === void 0) && o.isProjectionDirty) && (l = !1), u && (this.isSharedProjectionDirty || this.isTransformDirty) && (l = !1), this.resolvedRelativeTargetAt === Fn.timestamp && (l = !1), l)
        return;
      const { layout: d, layoutId: p } = this.options;
      if (this.isTreeAnimating = !!(this.parent && this.parent.isTreeAnimating || this.currentAnimation || this.pendingAnimation), this.isTreeAnimating || (this.targetDelta = this.relativeTarget = void 0), !this.layout || !(d || p))
        return;
      Yi(this.layoutCorrected, this.layout.layoutBox);
      const w = this.treeScale.x, A = this.treeScale.y;
      Vee(this.layoutCorrected, this.treeScale, this.path, u), a.layout && !a.target && (this.treeScale.x !== 1 || this.treeScale.y !== 1) && (a.target = a.layout.layoutBox, a.targetWithTransforms = ln());
      const { target: M } = a;
      if (!M) {
        this.prevProjectionDelta && (this.createProjectionDeltas(), this.scheduleRender());
        return;
      }
      !this.projectionDelta || !this.prevProjectionDelta ? this.createProjectionDeltas() : ($_(this.prevProjectionDelta.x, this.projectionDelta.x), $_(this.prevProjectionDelta.y, this.projectionDelta.y)), Jf(this.projectionDelta, this.layoutCorrected, M, this.latestValues), (this.treeScale.x !== w || this.treeScale.y !== A || !H_(this.projectionDelta.x, this.prevProjectionDelta.x) || !H_(this.projectionDelta.y, this.prevProjectionDelta.y)) && (this.hasProjected = !0, this.scheduleRender(), this.notifyListeners("projectionUpdate", M)), Uf && Ja.recalculatedProjection++;
    }
    hide() {
      this.isVisible = !1;
    }
    show() {
      this.isVisible = !0;
    }
    scheduleRender(o = !0) {
      var a;
      if ((a = this.options.visualElement) === null || a === void 0 || a.scheduleRender(), o) {
        const u = this.getStack();
        u && u.scheduleRender();
      }
      this.resumingFrom && !this.resumingFrom.instance && (this.resumingFrom = void 0);
    }
    createProjectionDeltas() {
      this.prevProjectionDelta = ru(), this.projectionDelta = ru(), this.projectionDeltaWithTransform = ru();
    }
    setAnimationOrigin(o, a = !1) {
      const u = this.snapshot, l = u ? u.latestValues : {}, d = { ...this.latestValues }, p = ru();
      (!this.relativeParent || !this.relativeParent.options.layoutRoot) && (this.relativeTarget = this.relativeTargetOrigin = void 0), this.attemptToResolveRelativeTarget = !a;
      const w = ln(), A = u ? u.source : void 0, M = this.layout ? this.layout.source : void 0, N = A !== M, L = this.getStack(), B = !L || L.members.length <= 1, $ = !!(N && !B && this.options.crossfade === !0 && !this.path.some(Nte));
      this.animationProgress = 0;
      let H;
      this.mixTargetDelta = (W) => {
        const V = W / 1e3;
        Y_(p.x, o.x, V), Y_(p.y, o.y, V), this.setTargetDelta(p), this.relativeTarget && this.relativeTargetOrigin && this.layout && this.relativeParent && this.relativeParent.layout && (Xf(w, this.layout.layoutBox, this.relativeParent.layout.layoutBox), Ote(this.relativeTarget, this.relativeTargetOrigin, w, V), H && hte(this.relativeTarget, H) && (this.isProjectionDirty = !1), H || (H = ln()), Yi(H, this.relativeTarget)), N && (this.animationValues = d, ote(d, l, this.latestValues, V, $, B)), this.root.scheduleUpdateProjection(), this.scheduleRender(), this.animationProgress = V;
      }, this.mixTargetDelta(this.options.layoutRoot ? 1e3 : 0);
    }
    startAnimation(o) {
      this.notifyListeners("animationStart"), this.currentAnimation && this.currentAnimation.stop(), this.resumingFrom && this.resumingFrom.currentAnimation && this.resumingFrom.currentAnimation.stop(), this.pendingAnimation && (wa(this.pendingAnimation), this.pendingAnimation = void 0), this.pendingAnimation = Lr.update(() => {
        jd.hasAnimatedSinceResize = !0, this.currentAnimation = yte(0, K_, {
          ...o,
          onUpdate: (a) => {
            this.mixTargetDelta(a), o.onUpdate && o.onUpdate(a);
          },
          onComplete: () => {
            o.onComplete && o.onComplete(), this.completeAnimation();
          }
        }), this.resumingFrom && (this.resumingFrom.currentAnimation = this.currentAnimation), this.pendingAnimation = void 0;
      });
    }
    completeAnimation() {
      this.resumingFrom && (this.resumingFrom.currentAnimation = void 0, this.resumingFrom.preserveOpacity = void 0);
      const o = this.getStack();
      o && o.exitAnimationComplete(), this.resumingFrom = this.currentAnimation = this.animationValues = void 0, this.notifyListeners("animationComplete");
    }
    finishAnimation() {
      this.currentAnimation && (this.mixTargetDelta && this.mixTargetDelta(K_), this.currentAnimation.stop()), this.completeAnimation();
    }
    applyTransformsToTarget() {
      const o = this.getLead();
      let { targetWithTransforms: a, target: u, layout: l, latestValues: d } = o;
      if (!(!a || !u || !l)) {
        if (this !== o && this.layout && l && e9(this.options.animationType, this.layout.layoutBox, l.layoutBox)) {
          u = this.target || ln();
          const p = Li(this.layout.layoutBox.x);
          u.x.min = o.target.x.min, u.x.max = u.x.min + p;
          const w = Li(this.layout.layoutBox.y);
          u.y.min = o.target.y.min, u.y.max = u.y.min + w;
        }
        Yi(a, u), iu(a, d), Jf(this.projectionDeltaWithTransform, this.layoutCorrected, a, d);
      }
    }
    registerSharedNode(o, a) {
      this.sharedNodes.has(o) || this.sharedNodes.set(o, new dte()), this.sharedNodes.get(o).add(a);
      const l = a.options.initialPromotionConfig;
      a.promote({
        transition: l ? l.transition : void 0,
        preserveFollowOpacity: l && l.shouldPreserveFollowOpacity ? l.shouldPreserveFollowOpacity(a) : void 0
      });
    }
    isLead() {
      const o = this.getStack();
      return o ? o.lead === this : !0;
    }
    getLead() {
      var o;
      const { layoutId: a } = this.options;
      return a ? ((o = this.getStack()) === null || o === void 0 ? void 0 : o.lead) || this : this;
    }
    getPrevLead() {
      var o;
      const { layoutId: a } = this.options;
      return a ? (o = this.getStack()) === null || o === void 0 ? void 0 : o.prevLead : void 0;
    }
    getStack() {
      const { layoutId: o } = this.options;
      if (o)
        return this.root.sharedNodes.get(o);
    }
    promote({ needsReset: o, transition: a, preserveFollowOpacity: u } = {}) {
      const l = this.getStack();
      l && l.promote(this, u), o && (this.projectionDelta = void 0, this.needsReset = !0), a && this.setOptions({ transition: a });
    }
    relegate() {
      const o = this.getStack();
      return o ? o.relegate(this) : !1;
    }
    resetSkewAndRotation() {
      const { visualElement: o } = this.options;
      if (!o)
        return;
      let a = !1;
      const { latestValues: u } = o;
      if ((u.z || u.rotate || u.rotateX || u.rotateY || u.rotateZ || u.skewX || u.skewY) && (a = !0), !a)
        return;
      const l = {};
      u.z && Um("z", o, l, this.animationValues);
      for (let d = 0; d < jm.length; d++)
        Um(`rotate${jm[d]}`, o, l, this.animationValues), Um(`skew${jm[d]}`, o, l, this.animationValues);
      o.render();
      for (const d in l)
        o.setStaticValue(d, l[d]), this.animationValues && (this.animationValues[d] = l[d]);
      o.scheduleRender();
    }
    getProjectionStyles(o) {
      var a, u;
      if (!this.instance || this.isSVG)
        return;
      if (!this.isVisible)
        return wte;
      const l = {
        visibility: ""
      }, d = this.getTransformTemplate();
      if (this.needsReset)
        return this.needsReset = !1, l.opacity = "", l.pointerEvents = Ud(o == null ? void 0 : o.pointerEvents) || "", l.transform = d ? d(this.latestValues, "") : "none", l;
      const p = this.getLead();
      if (!this.projectionDelta || !this.layout || !p.target) {
        const N = {};
        return this.options.layoutId && (N.opacity = this.latestValues.opacity !== void 0 ? this.latestValues.opacity : 1, N.pointerEvents = Ud(o == null ? void 0 : o.pointerEvents) || ""), this.hasProjected && !Ya(this.latestValues) && (N.transform = d ? d({}, "") : "none", this.hasProjected = !1), N;
      }
      const w = p.animationValues || p.latestValues;
      this.applyTransformsToTarget(), l.transform = pte(this.projectionDeltaWithTransform, this.treeScale, w), d && (l.transform = d(w, l.transform));
      const { x: A, y: M } = this.projectionDelta;
      l.transformOrigin = `${A.origin * 100}% ${M.origin * 100}% 0`, p.animationValues ? l.opacity = p === this ? (u = (a = w.opacity) !== null && a !== void 0 ? a : this.latestValues.opacity) !== null && u !== void 0 ? u : 1 : this.preserveOpacity ? this.latestValues.opacity : w.opacityExit : l.opacity = p === this ? w.opacity !== void 0 ? w.opacity : "" : w.opacityExit !== void 0 ? w.opacityExit : 0;
      for (const N in _0) {
        if (w[N] === void 0)
          continue;
        const { correct: L, applyTo: B } = _0[N], $ = l.transform === "none" ? w[N] : L(w[N], p);
        if (B) {
          const H = B.length;
          for (let W = 0; W < H; W++)
            l[B[W]] = $;
        } else
          l[N] = $;
      }
      return this.options.layoutId && (l.pointerEvents = p === this ? Ud(o == null ? void 0 : o.pointerEvents) || "" : "none"), l;
    }
    clearSnapshot() {
      this.resumeFrom = this.snapshot = void 0;
    }
    // Only run on root
    resetTree() {
      this.root.nodes.forEach((o) => {
        var a;
        return (a = o.currentAnimation) === null || a === void 0 ? void 0 : a.stop();
      }), this.root.nodes.forEach(V_), this.root.sharedNodes.clear();
    }
  };
}
function _te(t) {
  t.updateLayout();
}
function Ete(t) {
  var e;
  const r = ((e = t.resumeFrom) === null || e === void 0 ? void 0 : e.snapshot) || t.snapshot;
  if (t.isLead() && t.layout && r && t.hasListeners("didUpdate")) {
    const { layoutBox: n, measuredBox: i } = t.layout, { animationType: s } = t.options, o = r.source !== t.layout.source;
    s === "size" ? Xi((p) => {
      const w = o ? r.measuredBox[p] : r.layoutBox[p], A = Li(w);
      w.min = n[p].min, w.max = w.min + A;
    }) : e9(s, r.layoutBox, n) && Xi((p) => {
      const w = o ? r.measuredBox[p] : r.layoutBox[p], A = Li(n[p]);
      w.max = w.min + A, t.relativeTarget && !t.currentAnimation && (t.isProjectionDirty = !0, t.relativeTarget[p].max = t.relativeTarget[p].min + A);
    });
    const a = ru();
    Jf(a, n, r.layoutBox);
    const u = ru();
    o ? Jf(u, t.applyTransform(i, !0), r.measuredBox) : Jf(u, n, r.layoutBox);
    const l = !J7(a);
    let d = !1;
    if (!t.resumeFrom) {
      const p = t.getClosestProjectingParent();
      if (p && !p.resumeFrom) {
        const { snapshot: w, layout: A } = p;
        if (w && A) {
          const M = ln();
          Xf(M, r.layoutBox, w.layoutBox);
          const N = ln();
          Xf(N, n, A.layoutBox), X7(M, N) || (d = !0), p.options.layoutRoot && (t.relativeTarget = N, t.relativeTargetOrigin = M, t.relativeParent = p);
        }
      }
    }
    t.notifyListeners("didUpdate", {
      layout: n,
      snapshot: r,
      delta: u,
      layoutDelta: a,
      hasLayoutChanged: l,
      hasRelativeTargetChanged: d
    });
  } else if (t.isLead()) {
    const { onExitComplete: n } = t.options;
    n && n();
  }
  t.options.transition = void 0;
}
function Ste(t) {
  Uf && Ja.totalNodes++, t.parent && (t.isProjecting() || (t.isProjectionDirty = t.parent.isProjectionDirty), t.isSharedProjectionDirty || (t.isSharedProjectionDirty = !!(t.isProjectionDirty || t.parent.isProjectionDirty || t.parent.isSharedProjectionDirty)), t.isTransformDirty || (t.isTransformDirty = t.parent.isTransformDirty));
}
function Ate(t) {
  t.isProjectionDirty = t.isSharedProjectionDirty = t.isTransformDirty = !1;
}
function Pte(t) {
  t.clearSnapshot();
}
function V_(t) {
  t.clearMeasurements();
}
function Mte(t) {
  t.isLayoutDirty = !1;
}
function Ite(t) {
  const { visualElement: e } = t.options;
  e && e.getProps().onBeforeLayoutMeasure && e.notify("BeforeLayoutMeasure"), t.resetTransform();
}
function G_(t) {
  t.finishAnimation(), t.targetDelta = t.relativeTarget = t.target = void 0, t.isProjectionDirty = !0;
}
function Cte(t) {
  t.resolveTargetDelta();
}
function Tte(t) {
  t.calcProjection();
}
function Rte(t) {
  t.resetSkewAndRotation();
}
function Dte(t) {
  t.removeLeadSnapshot();
}
function Y_(t, e, r) {
  t.translate = Qr(e.translate, 0, r), t.scale = Qr(e.scale, 1, r), t.origin = e.origin, t.originPoint = e.originPoint;
}
function J_(t, e, r, n) {
  t.min = Qr(e.min, r.min, n), t.max = Qr(e.max, r.max, n);
}
function Ote(t, e, r, n) {
  J_(t.x, e.x, r.x, n), J_(t.y, e.y, r.y, n);
}
function Nte(t) {
  return t.animationValues && t.animationValues.opacityExit !== void 0;
}
const Lte = {
  duration: 0.45,
  ease: [0.4, 0, 0.1, 1]
}, X_ = (t) => typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().includes(t), Z_ = X_("applewebkit/") && !X_("chrome/") ? Math.round : Un;
function Q_(t) {
  t.min = Z_(t.min), t.max = Z_(t.max);
}
function kte(t) {
  Q_(t.x), Q_(t.y);
}
function e9(t, e, r) {
  return t === "position" || t === "preserve-aspect" && !$ee(W_(e), W_(r), 0.2);
}
function $te(t) {
  var e;
  return t !== t.root && ((e = t.scroll) === null || e === void 0 ? void 0 : e.wasRoot);
}
const Bte = Q7({
  attachResizeListener: (t, e) => Mo(t, "resize", e),
  measureScroll: () => ({
    x: document.documentElement.scrollLeft || document.body.scrollLeft,
    y: document.documentElement.scrollTop || document.body.scrollTop
  }),
  checkIsScrollRoot: () => !0
}), qm = {
  current: void 0
}, t9 = Q7({
  measureScroll: (t) => ({
    x: t.scrollLeft,
    y: t.scrollTop
  }),
  defaultParent: () => {
    if (!qm.current) {
      const t = new Bte({});
      t.mount(window), t.setOptions({ layoutScroll: !0 }), qm.current = t;
    }
    return qm.current;
  },
  resetTransform: (t, e) => {
    t.style.transform = e !== void 0 ? e : "none";
  },
  checkIsScrollRoot: (t) => window.getComputedStyle(t).position === "fixed"
}), Fte = {
  pan: {
    Feature: Qee
  },
  drag: {
    Feature: Zee,
    ProjectionNode: t9,
    MeasureLayout: V7
  }
};
function e5(t, e) {
  const r = e ? "pointerenter" : "pointerleave", n = e ? "onHoverStart" : "onHoverEnd", i = (s, o) => {
    if (s.pointerType === "touch" || B7())
      return;
    const a = t.getProps();
    t.animationState && a.whileHover && t.animationState.setActive("whileHover", e);
    const u = a[n];
    u && Lr.postRender(() => u(s, o));
  };
  return Do(t.current, r, i, {
    passive: !t.getProps()[n]
  });
}
class jte extends Ra {
  mount() {
    this.unmount = Ro(e5(this.node, !0), e5(this.node, !1));
  }
  unmount() {
  }
}
class Ute extends Ra {
  constructor() {
    super(...arguments), this.isActive = !1;
  }
  onFocus() {
    let e = !1;
    try {
      e = this.node.current.matches(":focus-visible");
    } catch {
      e = !0;
    }
    !e || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !0), this.isActive = !0);
  }
  onBlur() {
    !this.isActive || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !1), this.isActive = !1);
  }
  mount() {
    this.unmount = Ro(Mo(this.node.current, "focus", () => this.onFocus()), Mo(this.node.current, "blur", () => this.onBlur()));
  }
  unmount() {
  }
}
const r9 = (t, e) => e ? t === e ? !0 : r9(t, e.parentElement) : !1;
function zm(t, e) {
  if (!e)
    return;
  const r = new PointerEvent("pointer" + t);
  e(r, xp(r));
}
class qte extends Ra {
  constructor() {
    super(...arguments), this.removeStartListeners = Un, this.removeEndListeners = Un, this.removeAccessibleListeners = Un, this.startPointerPress = (e, r) => {
      if (this.isPressing)
        return;
      this.removeEndListeners();
      const n = this.node.getProps(), s = Do(window, "pointerup", (a, u) => {
        if (!this.checkPressEnd())
          return;
        const { onTap: l, onTapCancel: d, globalTapTarget: p } = this.node.getProps(), w = !p && !r9(this.node.current, a.target) ? d : l;
        w && Lr.update(() => w(a, u));
      }, {
        passive: !(n.onTap || n.onPointerUp)
      }), o = Do(window, "pointercancel", (a, u) => this.cancelPress(a, u), {
        passive: !(n.onTapCancel || n.onPointerCancel)
      });
      this.removeEndListeners = Ro(s, o), this.startPress(e, r);
    }, this.startAccessiblePress = () => {
      const e = (s) => {
        if (s.key !== "Enter" || this.isPressing)
          return;
        const o = (a) => {
          a.key !== "Enter" || !this.checkPressEnd() || zm("up", (u, l) => {
            const { onTap: d } = this.node.getProps();
            d && Lr.postRender(() => d(u, l));
          });
        };
        this.removeEndListeners(), this.removeEndListeners = Mo(this.node.current, "keyup", o), zm("down", (a, u) => {
          this.startPress(a, u);
        });
      }, r = Mo(this.node.current, "keydown", e), n = () => {
        this.isPressing && zm("cancel", (s, o) => this.cancelPress(s, o));
      }, i = Mo(this.node.current, "blur", n);
      this.removeAccessibleListeners = Ro(r, i);
    };
  }
  startPress(e, r) {
    this.isPressing = !0;
    const { onTapStart: n, whileTap: i } = this.node.getProps();
    i && this.node.animationState && this.node.animationState.setActive("whileTap", !0), n && Lr.postRender(() => n(e, r));
  }
  checkPressEnd() {
    return this.removeEndListeners(), this.isPressing = !1, this.node.getProps().whileTap && this.node.animationState && this.node.animationState.setActive("whileTap", !1), !B7();
  }
  cancelPress(e, r) {
    if (!this.checkPressEnd())
      return;
    const { onTapCancel: n } = this.node.getProps();
    n && Lr.postRender(() => n(e, r));
  }
  mount() {
    const e = this.node.getProps(), r = Do(e.globalTapTarget ? window : this.node.current, "pointerdown", this.startPointerPress, {
      passive: !(e.onTapStart || e.onPointerStart)
    }), n = Mo(this.node.current, "focus", this.startAccessiblePress);
    this.removeStartListeners = Ro(r, n);
  }
  unmount() {
    this.removeStartListeners(), this.removeEndListeners(), this.removeAccessibleListeners();
  }
}
const uv = /* @__PURE__ */ new WeakMap(), Wm = /* @__PURE__ */ new WeakMap(), zte = (t) => {
  const e = uv.get(t.target);
  e && e(t);
}, Wte = (t) => {
  t.forEach(zte);
};
function Hte({ root: t, ...e }) {
  const r = t || document;
  Wm.has(r) || Wm.set(r, {});
  const n = Wm.get(r), i = JSON.stringify(e);
  return n[i] || (n[i] = new IntersectionObserver(Wte, { root: t, ...e })), n[i];
}
function Kte(t, e, r) {
  const n = Hte(e);
  return uv.set(t, r), n.observe(t), () => {
    uv.delete(t), n.unobserve(t);
  };
}
const Vte = {
  some: 0,
  all: 1
};
class Gte extends Ra {
  constructor() {
    super(...arguments), this.hasEnteredView = !1, this.isInView = !1;
  }
  startObserver() {
    this.unmount();
    const { viewport: e = {} } = this.node.getProps(), { root: r, margin: n, amount: i = "some", once: s } = e, o = {
      root: r ? r.current : void 0,
      rootMargin: n,
      threshold: typeof i == "number" ? i : Vte[i]
    }, a = (u) => {
      const { isIntersecting: l } = u;
      if (this.isInView === l || (this.isInView = l, s && !l && this.hasEnteredView))
        return;
      l && (this.hasEnteredView = !0), this.node.animationState && this.node.animationState.setActive("whileInView", l);
      const { onViewportEnter: d, onViewportLeave: p } = this.node.getProps(), w = l ? d : p;
      w && w(u);
    };
    return Kte(this.node.current, o, a);
  }
  mount() {
    this.startObserver();
  }
  update() {
    if (typeof IntersectionObserver > "u")
      return;
    const { props: e, prevProps: r } = this.node;
    ["amount", "margin", "root"].some(Yte(e, r)) && this.startObserver();
  }
  unmount() {
  }
}
function Yte({ viewport: t = {} }, { viewport: e = {} } = {}) {
  return (r) => t[r] !== e[r];
}
const Jte = {
  inView: {
    Feature: Gte
  },
  tap: {
    Feature: qte
  },
  focus: {
    Feature: Ute
  },
  hover: {
    Feature: jte
  }
}, Xte = {
  layout: {
    ProjectionNode: t9,
    MeasureLayout: V7
  }
}, Xb = Sa({
  transformPagePoint: (t) => t,
  isStatic: !1,
  reducedMotion: "never"
}), Ep = Sa({}), Zb = typeof window < "u", n9 = Zb ? $R : Dn, i9 = Sa({ strict: !1 });
function Zte(t, e, r, n, i) {
  var s, o;
  const { visualElement: a } = Tn(Ep), u = Tn(i9), l = Tn(_p), d = Tn(Xb).reducedMotion, p = Zn();
  n = n || u.renderer, !p.current && n && (p.current = n(t, {
    visualState: e,
    parent: a,
    props: r,
    presenceContext: l,
    blockInitialAnimation: l ? l.initial === !1 : !1,
    reducedMotionConfig: d
  }));
  const w = p.current, A = Tn(K7);
  w && !w.projection && i && (w.type === "html" || w.type === "svg") && Qte(p.current, r, i, A);
  const M = Zn(!1);
  b5(() => {
    w && M.current && w.update(r, l);
  });
  const N = r[C7], L = Zn(!!N && !(!((s = window.MotionHandoffIsComplete) === null || s === void 0) && s.call(window, N)) && ((o = window.MotionHasOptimisedAnimation) === null || o === void 0 ? void 0 : o.call(window, N)));
  return n9(() => {
    w && (M.current = !0, window.MotionIsMounted = !0, w.updateFeatures(), Jb.render(w.render), L.current && w.animationState && w.animationState.animateChanges());
  }), Dn(() => {
    w && (!L.current && w.animationState && w.animationState.animateChanges(), L.current && (queueMicrotask(() => {
      var B;
      (B = window.MotionHandoffMarkAsComplete) === null || B === void 0 || B.call(window, N);
    }), L.current = !1));
  }), w;
}
function Qte(t, e, r, n) {
  const { layoutId: i, layout: s, drag: o, dragConstraints: a, layoutScroll: u, layoutRoot: l } = e;
  t.projection = new r(t.latestValues, e["data-framer-portal-id"] ? void 0 : s9(t.parent)), t.projection.setOptions({
    layoutId: i,
    layout: s,
    alwaysMeasureLayout: !!o || a && tu(a),
    visualElement: t,
    /**
     * TODO: Update options in an effect. This could be tricky as it'll be too late
     * to update by the time layout animations run.
     * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,
     * ensuring it gets called if there's no potential layout animations.
     *
     */
    animationType: typeof s == "string" ? s : "both",
    initialPromotionConfig: n,
    layoutScroll: u,
    layoutRoot: l
  });
}
function s9(t) {
  if (t)
    return t.options.allowProjection !== !1 ? t.projection : s9(t.parent);
}
function ere(t, e, r) {
  return vv(
    (n) => {
      n && t.mount && t.mount(n), e && (n ? e.mount(n) : e.unmount()), r && (typeof r == "function" ? r(n) : tu(r) && (r.current = n));
    },
    /**
     * Only pass a new ref callback to React if we've received a visual element
     * factory. Otherwise we'll be mounting/remounting every time externalRef
     * or other dependencies change.
     */
    [e]
  );
}
function Sp(t) {
  return bp(t.animate) || Cb.some((e) => Il(t[e]));
}
function o9(t) {
  return !!(Sp(t) || t.variants);
}
function tre(t, e) {
  if (Sp(t)) {
    const { initial: r, animate: n } = t;
    return {
      initial: r === !1 || Il(r) ? r : void 0,
      animate: Il(n) ? n : void 0
    };
  }
  return t.inherit !== !1 ? e : {};
}
function rre(t) {
  const { initial: e, animate: r } = tre(t, Tn(Ep));
  return wi(() => ({ initial: e, animate: r }), [t5(e), t5(r)]);
}
function t5(t) {
  return Array.isArray(t) ? t.join(" ") : t;
}
const r5 = {
  animation: [
    "animate",
    "variants",
    "whileHover",
    "whileTap",
    "exit",
    "whileInView",
    "whileFocus",
    "whileDrag"
  ],
  exit: ["exit"],
  drag: ["drag", "dragControls"],
  focus: ["whileFocus"],
  hover: ["whileHover", "onHoverStart", "onHoverEnd"],
  tap: ["whileTap", "onTap", "onTapStart", "onTapCancel"],
  pan: ["onPan", "onPanStart", "onPanSessionStart", "onPanEnd"],
  inView: ["whileInView", "onViewportEnter", "onViewportLeave"],
  layout: ["layout", "layoutId"]
}, Cu = {};
for (const t in r5)
  Cu[t] = {
    isEnabled: (e) => r5[t].some((r) => !!e[r])
  };
function nre(t) {
  for (const e in t)
    Cu[e] = {
      ...Cu[e],
      ...t[e]
    };
}
const ire = Symbol.for("motionComponentSymbol");
function sre({ preloadedFeatures: t, createVisualElement: e, useRender: r, useVisualState: n, Component: i }) {
  t && nre(t);
  function s(a, u) {
    let l;
    const d = {
      ...Tn(Xb),
      ...a,
      layoutId: ore(a)
    }, { isStatic: p } = d, w = rre(a), A = n(a, p);
    if (!p && Zb) {
      are(d, t);
      const M = cre(d);
      l = M.MeasureLayout, w.visualElement = Zte(i, A, d, e, M.ProjectionNode);
    }
    return pe.jsxs(Ep.Provider, { value: w, children: [l && w.visualElement ? pe.jsx(l, { visualElement: w.visualElement, ...d }) : null, r(i, a, ere(A, w.visualElement, u), A, p, w.visualElement)] });
  }
  const o = gv(s);
  return o[ire] = i, o;
}
function ore({ layoutId: t }) {
  const e = Tn(Yb).id;
  return e && t !== void 0 ? e + "-" + t : t;
}
function are(t, e) {
  const r = Tn(i9).strict;
  if (process.env.NODE_ENV !== "production" && e && r) {
    const n = "You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";
    t.ignoreStrict ? Ku(!1, n) : Uo(!1, n);
  }
}
function cre(t) {
  const { drag: e, layout: r } = Cu;
  if (!e && !r)
    return {};
  const n = { ...e, ...r };
  return {
    MeasureLayout: e != null && e.isEnabled(t) || r != null && r.isEnabled(t) ? n.MeasureLayout : void 0,
    ProjectionNode: n.ProjectionNode
  };
}
const ure = [
  "animate",
  "circle",
  "defs",
  "desc",
  "ellipse",
  "g",
  "image",
  "line",
  "filter",
  "marker",
  "mask",
  "metadata",
  "path",
  "pattern",
  "polygon",
  "polyline",
  "rect",
  "stop",
  "switch",
  "symbol",
  "svg",
  "text",
  "tspan",
  "use",
  "view"
];
function Qb(t) {
  return (
    /**
     * If it's not a string, it's a custom React component. Currently we only support
     * HTML custom React components.
     */
    typeof t != "string" || /**
     * If it contains a dash, the element is a custom HTML webcomponent.
     */
    t.includes("-") ? !1 : (
      /**
       * If it's in our list of lowercase SVG tags, it's an SVG component
       */
      !!(ure.indexOf(t) > -1 || /**
       * If it contains a capital letter, it's an SVG component
       */
      /[A-Z]/u.test(t))
    )
  );
}
function a9(t, { style: e, vars: r }, n, i) {
  Object.assign(t.style, e, i && i.getProjectionStyles(n));
  for (const s in r)
    t.style.setProperty(s, r[s]);
}
const c9 = /* @__PURE__ */ new Set([
  "baseFrequency",
  "diffuseConstant",
  "kernelMatrix",
  "kernelUnitLength",
  "keySplines",
  "keyTimes",
  "limitingConeAngle",
  "markerHeight",
  "markerWidth",
  "numOctaves",
  "targetX",
  "targetY",
  "surfaceScale",
  "specularConstant",
  "specularExponent",
  "stdDeviation",
  "tableValues",
  "viewBox",
  "gradientTransform",
  "pathLength",
  "startOffset",
  "textLength",
  "lengthAdjust"
]);
function u9(t, e, r, n) {
  a9(t, e, void 0, n);
  for (const i in e.attrs)
    t.setAttribute(c9.has(i) ? i : Gb(i), e.attrs[i]);
}
function f9(t, { layout: e, layoutId: r }) {
  return Ac.has(t) || t.startsWith("origin") || (e || r !== void 0) && (!!_0[t] || t === "opacity");
}
function ey(t, e, r) {
  var n;
  const { style: i } = t, s = {};
  for (const o in i)
    (Xn(i[o]) || e.style && Xn(e.style[o]) || f9(o, t) || ((n = r == null ? void 0 : r.getValue(o)) === null || n === void 0 ? void 0 : n.liveStyle) !== void 0) && (s[o] = i[o]);
  return s;
}
function l9(t, e, r) {
  const n = ey(t, e, r);
  for (const i in t)
    if (Xn(t[i]) || Xn(e[i])) {
      const s = ah.indexOf(i) !== -1 ? "attr" + i.charAt(0).toUpperCase() + i.substring(1) : i;
      n[s] = t[i];
    }
  return n;
}
function ty(t) {
  const e = Zn(null);
  return e.current === null && (e.current = t()), e.current;
}
function fre({ scrapeMotionValuesFromProps: t, createRenderState: e, onMount: r }, n, i, s) {
  const o = {
    latestValues: lre(n, i, s, t),
    renderState: e()
  };
  return r && (o.mount = (a) => r(n, a, o)), o;
}
const h9 = (t) => (e, r) => {
  const n = Tn(Ep), i = Tn(_p), s = () => fre(t, e, n, i);
  return r ? s() : ty(s);
};
function lre(t, e, r, n) {
  const i = {}, s = n(t, {});
  for (const w in s)
    i[w] = Ud(s[w]);
  let { initial: o, animate: a } = t;
  const u = Sp(t), l = o9(t);
  e && l && !u && t.inherit !== !1 && (o === void 0 && (o = e.initial), a === void 0 && (a = e.animate));
  let d = r ? r.initial === !1 : !1;
  d = d || o === !1;
  const p = d ? a : o;
  if (p && typeof p != "boolean" && !bp(p)) {
    const w = Array.isArray(p) ? p : [p];
    for (let A = 0; A < w.length; A++) {
      const M = Mb(t, w[A]);
      if (M) {
        const { transitionEnd: N, transition: L, ...B } = M;
        for (const $ in B) {
          let H = B[$];
          if (Array.isArray(H)) {
            const W = d ? H.length - 1 : 0;
            H = H[W];
          }
          H !== null && (i[$] = H);
        }
        for (const $ in N)
          i[$] = N[$];
      }
    }
  }
  return i;
}
const ry = () => ({
  style: {},
  transform: {},
  transformOrigin: {},
  vars: {}
}), d9 = () => ({
  ...ry(),
  attrs: {}
}), p9 = (t, e) => e && typeof t == "number" ? e.transform(t) : t, hre = {
  x: "translateX",
  y: "translateY",
  z: "translateZ",
  transformPerspective: "perspective"
}, dre = ah.length;
function pre(t, e, r) {
  let n = "", i = !0;
  for (let s = 0; s < dre; s++) {
    const o = ah[s], a = t[o];
    if (a === void 0)
      continue;
    let u = !0;
    if (typeof a == "number" ? u = a === (o.startsWith("scale") ? 1 : 0) : u = parseFloat(a) === 0, !u || r) {
      const l = p9(a, $b[o]);
      if (!u) {
        i = !1;
        const d = hre[o] || o;
        n += `${d}(${l}) `;
      }
      r && (e[o] = l);
    }
  }
  return n = n.trim(), r ? n = r(e, i ? "" : n) : i && (n = "none"), n;
}
function ny(t, e, r) {
  const { style: n, vars: i, transformOrigin: s } = t;
  let o = !1, a = !1;
  for (const u in e) {
    const l = e[u];
    if (Ac.has(u)) {
      o = !0;
      continue;
    } else if (o7(u)) {
      i[u] = l;
      continue;
    } else {
      const d = p9(l, $b[u]);
      u.startsWith("origin") ? (a = !0, s[u] = d) : n[u] = d;
    }
  }
  if (e.transform || (o || r ? n.transform = pre(e, t.transform, r) : n.transform && (n.transform = "none")), a) {
    const { originX: u = "50%", originY: l = "50%", originZ: d = 0 } = s;
    n.transformOrigin = `${u} ${l} ${d}`;
  }
}
function n5(t, e, r) {
  return typeof t == "string" ? t : Vt.transform(e + r * t);
}
function gre(t, e, r) {
  const n = n5(e, t.x, t.width), i = n5(r, t.y, t.height);
  return `${n} ${i}`;
}
const mre = {
  offset: "stroke-dashoffset",
  array: "stroke-dasharray"
}, vre = {
  offset: "strokeDashoffset",
  array: "strokeDasharray"
};
function bre(t, e, r = 1, n = 0, i = !0) {
  t.pathLength = 1;
  const s = i ? mre : vre;
  t[s.offset] = Vt.transform(-n);
  const o = Vt.transform(e), a = Vt.transform(r);
  t[s.array] = `${o} ${a}`;
}
function iy(t, {
  attrX: e,
  attrY: r,
  attrScale: n,
  originX: i,
  originY: s,
  pathLength: o,
  pathSpacing: a = 1,
  pathOffset: u = 0,
  // This is object creation, which we try to avoid per-frame.
  ...l
}, d, p) {
  if (ny(t, l, p), d) {
    t.style.viewBox && (t.attrs.viewBox = t.style.viewBox);
    return;
  }
  t.attrs = t.style, t.style = {};
  const { attrs: w, style: A, dimensions: M } = t;
  w.transform && (M && (A.transform = w.transform), delete w.transform), M && (i !== void 0 || s !== void 0 || A.transform) && (A.transformOrigin = gre(M, i !== void 0 ? i : 0.5, s !== void 0 ? s : 0.5)), e !== void 0 && (w.x = e), r !== void 0 && (w.y = r), n !== void 0 && (w.scale = n), o !== void 0 && bre(w, o, a, u, !1);
}
const sy = (t) => typeof t == "string" && t.toLowerCase() === "svg", yre = {
  useVisualState: h9({
    scrapeMotionValuesFromProps: l9,
    createRenderState: d9,
    onMount: (t, e, { renderState: r, latestValues: n }) => {
      Lr.read(() => {
        try {
          r.dimensions = typeof e.getBBox == "function" ? e.getBBox() : e.getBoundingClientRect();
        } catch {
          r.dimensions = {
            x: 0,
            y: 0,
            width: 0,
            height: 0
          };
        }
      }), Lr.render(() => {
        iy(r, n, sy(e.tagName), t.transformTemplate), u9(e, r);
      });
    }
  })
}, wre = {
  useVisualState: h9({
    scrapeMotionValuesFromProps: ey,
    createRenderState: ry
  })
};
function g9(t, e, r) {
  for (const n in e)
    !Xn(e[n]) && !f9(n, r) && (t[n] = e[n]);
}
function xre({ transformTemplate: t }, e) {
  return wi(() => {
    const r = ry();
    return ny(r, e, t), Object.assign({}, r.vars, r.style);
  }, [e]);
}
function _re(t, e) {
  const r = t.style || {}, n = {};
  return g9(n, r, t), Object.assign(n, xre(t, e)), n;
}
function Ere(t, e) {
  const r = {}, n = _re(t, e);
  return t.drag && t.dragListener !== !1 && (r.draggable = !1, n.userSelect = n.WebkitUserSelect = n.WebkitTouchCallout = "none", n.touchAction = t.drag === !0 ? "none" : `pan-${t.drag === "x" ? "y" : "x"}`), t.tabIndex === void 0 && (t.onTap || t.onTapStart || t.whileTap) && (r.tabIndex = 0), r.style = n, r;
}
const Sre = /* @__PURE__ */ new Set([
  "animate",
  "exit",
  "variants",
  "initial",
  "style",
  "values",
  "variants",
  "transition",
  "transformTemplate",
  "custom",
  "inherit",
  "onBeforeLayoutMeasure",
  "onAnimationStart",
  "onAnimationComplete",
  "onUpdate",
  "onDragStart",
  "onDrag",
  "onDragEnd",
  "onMeasureDragConstraints",
  "onDirectionLock",
  "onDragTransitionEnd",
  "_dragX",
  "_dragY",
  "onHoverStart",
  "onHoverEnd",
  "onViewportEnter",
  "onViewportLeave",
  "globalTapTarget",
  "ignoreStrict",
  "viewport"
]);
function E0(t) {
  return t.startsWith("while") || t.startsWith("drag") && t !== "draggable" || t.startsWith("layout") || t.startsWith("onTap") || t.startsWith("onPan") || t.startsWith("onLayout") || Sre.has(t);
}
let m9 = (t) => !E0(t);
function Are(t) {
  t && (m9 = (e) => e.startsWith("on") ? !E0(e) : t(e));
}
try {
  Are(require("@emotion/is-prop-valid").default);
} catch {
}
function Pre(t, e, r) {
  const n = {};
  for (const i in t)
    i === "values" && typeof t.values == "object" || (m9(i) || r === !0 && E0(i) || !e && !E0(i) || // If trying to use native HTML drag events, forward drag listeners
    t.draggable && i.startsWith("onDrag")) && (n[i] = t[i]);
  return n;
}
function Mre(t, e, r, n) {
  const i = wi(() => {
    const s = d9();
    return iy(s, e, sy(n), t.transformTemplate), {
      ...s.attrs,
      style: { ...s.style }
    };
  }, [e]);
  if (t.style) {
    const s = {};
    g9(s, t.style, t), i.style = { ...s, ...i.style };
  }
  return i;
}
function Ire(t = !1) {
  return (r, n, i, { latestValues: s }, o) => {
    const u = (Qb(r) ? Mre : Ere)(n, s, o, r), l = Pre(n, typeof r == "string", t), d = r !== y5 ? { ...l, ...u, ref: i } : {}, { children: p } = n, w = wi(() => Xn(p) ? p.get() : p, [p]);
    return qd(r, {
      ...d,
      children: w
    });
  };
}
function Cre(t, e) {
  return function(n, { forwardMotionProps: i } = { forwardMotionProps: !1 }) {
    const o = {
      ...Qb(n) ? yre : wre,
      preloadedFeatures: t,
      useRender: Ire(i),
      createVisualElement: e,
      Component: n
    };
    return sre(o);
  };
}
const fv = { current: null }, v9 = { current: !1 };
function Tre() {
  if (v9.current = !0, !!Zb)
    if (window.matchMedia) {
      const t = window.matchMedia("(prefers-reduced-motion)"), e = () => fv.current = t.matches;
      t.addListener(e), e();
    } else
      fv.current = !1;
}
function Rre(t, e, r) {
  for (const n in e) {
    const i = e[n], s = r[n];
    if (Xn(i))
      t.addValue(n, i), process.env.NODE_ENV === "development" && vp(i.version === "11.11.17", `Attempting to mix Motion versions ${i.version} with 11.11.17 may not work as expected.`);
    else if (Xn(s))
      t.addValue(n, Rl(i, { owner: t }));
    else if (s !== i)
      if (t.hasValue(n)) {
        const o = t.getValue(n);
        o.liveStyle === !0 ? o.jump(i) : o.hasAnimated || o.set(i);
      } else {
        const o = t.getStaticValue(n);
        t.addValue(n, Rl(o !== void 0 ? o : i, { owner: t }));
      }
  }
  for (const n in r)
    e[n] === void 0 && t.removeValue(n);
  return e;
}
const i5 = /* @__PURE__ */ new WeakMap(), Dre = [...u7, Yn, _a], Ore = (t) => Dre.find(c7(t)), s5 = [
  "AnimationStart",
  "AnimationComplete",
  "Update",
  "BeforeLayoutMeasure",
  "LayoutMeasure",
  "LayoutAnimationStart",
  "LayoutAnimationComplete"
];
class Nre {
  /**
   * This method takes React props and returns found MotionValues. For example, HTML
   * MotionValues will be found within the style prop, whereas for Three.js within attribute arrays.
   *
   * This isn't an abstract method as it needs calling in the constructor, but it is
   * intended to be one.
   */
  scrapeMotionValuesFromProps(e, r, n) {
    return {};
  }
  constructor({ parent: e, props: r, presenceContext: n, reducedMotionConfig: i, blockInitialAnimation: s, visualState: o }, a = {}) {
    this.current = null, this.children = /* @__PURE__ */ new Set(), this.isVariantNode = !1, this.isControllingVariants = !1, this.shouldReduceMotion = null, this.values = /* @__PURE__ */ new Map(), this.KeyframeResolver = Nb, this.features = {}, this.valueSubscriptions = /* @__PURE__ */ new Map(), this.prevMotionValues = {}, this.events = {}, this.propEventSubscriptions = {}, this.notifyUpdate = () => this.notify("Update", this.latestValues), this.render = () => {
      this.current && (this.triggerBuild(), this.renderInstance(this.current, this.renderState, this.props.style, this.projection));
    }, this.renderScheduledAt = 0, this.scheduleRender = () => {
      const w = Ys.now();
      this.renderScheduledAt < w && (this.renderScheduledAt = w, Lr.render(this.render, !1, !0));
    };
    const { latestValues: u, renderState: l } = o;
    this.latestValues = u, this.baseTarget = { ...u }, this.initialValues = r.initial ? { ...u } : {}, this.renderState = l, this.parent = e, this.props = r, this.presenceContext = n, this.depth = e ? e.depth + 1 : 0, this.reducedMotionConfig = i, this.options = a, this.blockInitialAnimation = !!s, this.isControllingVariants = Sp(r), this.isVariantNode = o9(r), this.isVariantNode && (this.variantChildren = /* @__PURE__ */ new Set()), this.manuallyAnimateOnMount = !!(e && e.current);
    const { willChange: d, ...p } = this.scrapeMotionValuesFromProps(r, {}, this);
    for (const w in p) {
      const A = p[w];
      u[w] !== void 0 && Xn(A) && A.set(u[w], !1);
    }
  }
  mount(e) {
    this.current = e, i5.set(e, this), this.projection && !this.projection.instance && this.projection.mount(e), this.parent && this.isVariantNode && !this.isControllingVariants && (this.removeFromVariantTree = this.parent.addVariantChild(this)), this.values.forEach((r, n) => this.bindToMotionValue(n, r)), v9.current || Tre(), this.shouldReduceMotion = this.reducedMotionConfig === "never" ? !1 : this.reducedMotionConfig === "always" ? !0 : fv.current, process.env.NODE_ENV !== "production" && vp(this.shouldReduceMotion !== !0, "You have Reduced Motion enabled on your device. Animations may not appear as expected."), this.parent && this.parent.children.add(this), this.update(this.props, this.presenceContext);
  }
  unmount() {
    i5.delete(this.current), this.projection && this.projection.unmount(), wa(this.notifyUpdate), wa(this.render), this.valueSubscriptions.forEach((e) => e()), this.valueSubscriptions.clear(), this.removeFromVariantTree && this.removeFromVariantTree(), this.parent && this.parent.children.delete(this);
    for (const e in this.events)
      this.events[e].clear();
    for (const e in this.features) {
      const r = this.features[e];
      r && (r.unmount(), r.isMounted = !1);
    }
    this.current = null;
  }
  bindToMotionValue(e, r) {
    this.valueSubscriptions.has(e) && this.valueSubscriptions.get(e)();
    const n = Ac.has(e), i = r.on("change", (a) => {
      this.latestValues[e] = a, this.props.onUpdate && Lr.preRender(this.notifyUpdate), n && this.projection && (this.projection.isTransformDirty = !0);
    }), s = r.on("renderRequest", this.scheduleRender);
    let o;
    window.MotionCheckAppearSync && (o = window.MotionCheckAppearSync(this, e, r)), this.valueSubscriptions.set(e, () => {
      i(), s(), o && o(), r.owner && r.stop();
    });
  }
  sortNodePosition(e) {
    return !this.current || !this.sortInstanceNodePosition || this.type !== e.type ? 0 : this.sortInstanceNodePosition(this.current, e.current);
  }
  updateFeatures() {
    let e = "animation";
    for (e in Cu) {
      const r = Cu[e];
      if (!r)
        continue;
      const { isEnabled: n, Feature: i } = r;
      if (!this.features[e] && i && n(this.props) && (this.features[e] = new i(this)), this.features[e]) {
        const s = this.features[e];
        s.isMounted ? s.update() : (s.mount(), s.isMounted = !0);
      }
    }
  }
  triggerBuild() {
    this.build(this.renderState, this.latestValues, this.props);
  }
  /**
   * Measure the current viewport box with or without transforms.
   * Only measures axis-aligned boxes, rotate and skew must be manually
   * removed with a re-render to work.
   */
  measureViewportBox() {
    return this.current ? this.measureInstanceViewportBox(this.current, this.props) : ln();
  }
  getStaticValue(e) {
    return this.latestValues[e];
  }
  setStaticValue(e, r) {
    this.latestValues[e] = r;
  }
  /**
   * Update the provided props. Ensure any newly-added motion values are
   * added to our map, old ones removed, and listeners updated.
   */
  update(e, r) {
    (e.transformTemplate || this.props.transformTemplate) && this.scheduleRender(), this.prevProps = this.props, this.props = e, this.prevPresenceContext = this.presenceContext, this.presenceContext = r;
    for (let n = 0; n < s5.length; n++) {
      const i = s5[n];
      this.propEventSubscriptions[i] && (this.propEventSubscriptions[i](), delete this.propEventSubscriptions[i]);
      const s = "on" + i, o = e[s];
      o && (this.propEventSubscriptions[i] = this.on(i, o));
    }
    this.prevMotionValues = Rre(this, this.scrapeMotionValuesFromProps(e, this.prevProps, this), this.prevMotionValues), this.handleChildMotionValue && this.handleChildMotionValue();
  }
  getProps() {
    return this.props;
  }
  /**
   * Returns the variant definition with a given name.
   */
  getVariant(e) {
    return this.props.variants ? this.props.variants[e] : void 0;
  }
  /**
   * Returns the defined default transition on this component.
   */
  getDefaultTransition() {
    return this.props.transition;
  }
  getTransformPagePoint() {
    return this.props.transformPagePoint;
  }
  getClosestVariantNode() {
    return this.isVariantNode ? this : this.parent ? this.parent.getClosestVariantNode() : void 0;
  }
  /**
   * Add a child visual element to our set of children.
   */
  addVariantChild(e) {
    const r = this.getClosestVariantNode();
    if (r)
      return r.variantChildren && r.variantChildren.add(e), () => r.variantChildren.delete(e);
  }
  /**
   * Add a motion value and bind it to this visual element.
   */
  addValue(e, r) {
    const n = this.values.get(e);
    r !== n && (n && this.removeValue(e), this.bindToMotionValue(e, r), this.values.set(e, r), this.latestValues[e] = r.get());
  }
  /**
   * Remove a motion value and unbind any active subscriptions.
   */
  removeValue(e) {
    this.values.delete(e);
    const r = this.valueSubscriptions.get(e);
    r && (r(), this.valueSubscriptions.delete(e)), delete this.latestValues[e], this.removeValueFromRenderState(e, this.renderState);
  }
  /**
   * Check whether we have a motion value for this key
   */
  hasValue(e) {
    return this.values.has(e);
  }
  getValue(e, r) {
    if (this.props.values && this.props.values[e])
      return this.props.values[e];
    let n = this.values.get(e);
    return n === void 0 && r !== void 0 && (n = Rl(r === null ? void 0 : r, { owner: this }), this.addValue(e, n)), n;
  }
  /**
   * If we're trying to animate to a previously unencountered value,
   * we need to check for it in our state and as a last resort read it
   * directly from the instance (which might have performance implications).
   */
  readValue(e, r) {
    var n;
    let i = this.latestValues[e] !== void 0 || !this.current ? this.latestValues[e] : (n = this.getBaseTargetFromProps(this.props, e)) !== null && n !== void 0 ? n : this.readValueFromInstance(this.current, e, this.options);
    return i != null && (typeof i == "string" && (i7(i) || n7(i)) ? i = parseFloat(i) : !Ore(i) && _a.test(r) && (i = v7(e, r)), this.setBaseTarget(e, Xn(i) ? i.get() : i)), Xn(i) ? i.get() : i;
  }
  /**
   * Set the base target to later animate back to. This is currently
   * only hydrated on creation and when we first read a value.
   */
  setBaseTarget(e, r) {
    this.baseTarget[e] = r;
  }
  /**
   * Find the base target for a value thats been removed from all animation
   * props.
   */
  getBaseTarget(e) {
    var r;
    const { initial: n } = this.props;
    let i;
    if (typeof n == "string" || typeof n == "object") {
      const o = Mb(this.props, n, (r = this.presenceContext) === null || r === void 0 ? void 0 : r.custom);
      o && (i = o[e]);
    }
    if (n && i !== void 0)
      return i;
    const s = this.getBaseTargetFromProps(this.props, e);
    return s !== void 0 && !Xn(s) ? s : this.initialValues[e] !== void 0 && i === void 0 ? void 0 : this.baseTarget[e];
  }
  on(e, r) {
    return this.events[e] || (this.events[e] = new Vb()), this.events[e].add(r);
  }
  notify(e, ...r) {
    this.events[e] && this.events[e].notify(...r);
  }
}
class b9 extends Nre {
  constructor() {
    super(...arguments), this.KeyframeResolver = b7;
  }
  sortInstanceNodePosition(e, r) {
    return e.compareDocumentPosition(r) & 2 ? 1 : -1;
  }
  getBaseTargetFromProps(e, r) {
    return e.style ? e.style[r] : void 0;
  }
  removeValueFromRenderState(e, { vars: r, style: n }) {
    delete r[e], delete n[e];
  }
}
function Lre(t) {
  return window.getComputedStyle(t);
}
class kre extends b9 {
  constructor() {
    super(...arguments), this.type = "html", this.renderInstance = a9;
  }
  readValueFromInstance(e, r) {
    if (Ac.has(r)) {
      const n = Bb(r);
      return n && n.default || 0;
    } else {
      const n = Lre(e), i = (o7(r) ? n.getPropertyValue(r) : n[r]) || 0;
      return typeof i == "string" ? i.trim() : i;
    }
  }
  measureInstanceViewportBox(e, { transformPagePoint: r }) {
    return W7(e, r);
  }
  build(e, r, n) {
    ny(e, r, n.transformTemplate);
  }
  scrapeMotionValuesFromProps(e, r, n) {
    return ey(e, r, n);
  }
  handleChildMotionValue() {
    this.childSubscription && (this.childSubscription(), delete this.childSubscription);
    const { children: e } = this.props;
    Xn(e) && (this.childSubscription = e.on("change", (r) => {
      this.current && (this.current.textContent = `${r}`);
    }));
  }
}
class $re extends b9 {
  constructor() {
    super(...arguments), this.type = "svg", this.isSVGTag = !1, this.measureInstanceViewportBox = ln;
  }
  getBaseTargetFromProps(e, r) {
    return e[r];
  }
  readValueFromInstance(e, r) {
    if (Ac.has(r)) {
      const n = Bb(r);
      return n && n.default || 0;
    }
    return r = c9.has(r) ? r : Gb(r), e.getAttribute(r);
  }
  scrapeMotionValuesFromProps(e, r, n) {
    return l9(e, r, n);
  }
  build(e, r, n) {
    iy(e, r, this.isSVGTag, n.transformTemplate);
  }
  renderInstance(e, r, n, i) {
    u9(e, r, n, i);
  }
  mount(e) {
    this.isSVGTag = sy(e.tagName), super.mount(e);
  }
}
const Bre = (t, e) => Qb(t) ? new $re(e) : new kre(e, {
  allowProjection: t !== y5
}), Fre = /* @__PURE__ */ Cre({
  ...Iee,
  ...Jte,
  ...Fte,
  ...Xte
}, Bre), jre = /* @__PURE__ */ yZ(Fre);
class Ure extends Gt.Component {
  getSnapshotBeforeUpdate(e) {
    const r = this.props.childRef.current;
    if (r && e.isPresent && !this.props.isPresent) {
      const n = this.props.sizeRef.current;
      n.height = r.offsetHeight || 0, n.width = r.offsetWidth || 0, n.top = r.offsetTop, n.left = r.offsetLeft;
    }
    return null;
  }
  /**
   * Required with getSnapshotBeforeUpdate to stop React complaining.
   */
  componentDidUpdate() {
  }
  render() {
    return this.props.children;
  }
}
function qre({ children: t, isPresent: e }) {
  const r = mv(), n = Zn(null), i = Zn({
    width: 0,
    height: 0,
    top: 0,
    left: 0
  }), { nonce: s } = Tn(Xb);
  return b5(() => {
    const { width: o, height: a, top: u, left: l } = i.current;
    if (e || !n.current || !o || !a)
      return;
    n.current.dataset.motionPopId = r;
    const d = document.createElement("style");
    return s && (d.nonce = s), document.head.appendChild(d), d.sheet && d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${l}px !important;
          }
        `), () => {
      document.head.removeChild(d);
    };
  }, [e]), pe.jsx(Ure, { isPresent: e, childRef: n, sizeRef: i, children: Gt.cloneElement(t, { ref: n }) });
}
const zre = ({ children: t, initial: e, isPresent: r, onExitComplete: n, custom: i, presenceAffectsLayout: s, mode: o }) => {
  const a = ty(Wre), u = mv(), l = vv((p) => {
    a.set(p, !0);
    for (const w of a.values())
      if (!w)
        return;
    n && n();
  }, [a, n]), d = wi(
    () => ({
      id: u,
      initial: e,
      isPresent: r,
      custom: i,
      onExitComplete: l,
      register: (p) => (a.set(p, !1), () => a.delete(p))
    }),
    /**
     * If the presence of a child affects the layout of the components around it,
     * we want to make a new context value to ensure they get re-rendered
     * so they can detect that layout change.
     */
    s ? [Math.random(), l] : [r, l]
  );
  return wi(() => {
    a.forEach((p, w) => a.set(w, !1));
  }, [r]), Gt.useEffect(() => {
    !r && !a.size && n && n();
  }, [r]), o === "popLayout" && (t = pe.jsx(qre, { isPresent: r, children: t })), pe.jsx(_p.Provider, { value: d, children: t });
};
function Wre() {
  return /* @__PURE__ */ new Map();
}
const bd = (t) => t.key || "";
function o5(t) {
  const e = [];
  return BR.forEach(t, (r) => {
    FR(r) && e.push(r);
  }), e;
}
const Hre = ({ children: t, exitBeforeEnter: e, custom: r, initial: n = !0, onExitComplete: i, presenceAffectsLayout: s = !0, mode: o = "sync" }) => {
  Uo(!e, "Replace exitBeforeEnter with mode='wait'");
  const a = wi(() => o5(t), [t]), u = a.map(bd), l = Zn(!0), d = Zn(a), p = ty(() => /* @__PURE__ */ new Map()), [w, A] = Qt(a), [M, N] = Qt(a);
  n9(() => {
    l.current = !1, d.current = a;
    for (let $ = 0; $ < M.length; $++) {
      const H = bd(M[$]);
      u.includes(H) ? p.delete(H) : p.get(H) !== !0 && p.set(H, !1);
    }
  }, [M, u.length, u.join("-")]);
  const L = [];
  if (a !== w) {
    let $ = [...a];
    for (let H = 0; H < M.length; H++) {
      const W = M[H], V = bd(W);
      u.includes(V) || ($.splice(H, 0, W), L.push(W));
    }
    o === "wait" && L.length && ($ = L), N(o5($)), A(a);
    return;
  }
  process.env.NODE_ENV !== "production" && o === "wait" && M.length > 1 && console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);
  const { forceRender: B } = Tn(Yb);
  return pe.jsx(pe.Fragment, { children: M.map(($) => {
    const H = bd($), W = a === M || u.includes(H), V = () => {
      if (p.has(H))
        p.set(H, !0);
      else
        return;
      let te = !0;
      p.forEach((R) => {
        R || (te = !1);
      }), te && (B == null || B(), N(d.current), i && i());
    };
    return pe.jsx(zre, { isPresent: W, initial: !l.current || n ? void 0 : !1, custom: W ? void 0 : r, presenceAffectsLayout: s, mode: o, onExitComplete: W ? void 0 : V, children: $ }, H);
  }) });
}, Ms = (t) => /* @__PURE__ */ pe.jsx(Hre, { children: /* @__PURE__ */ pe.jsx(
  jre.div,
  {
    initial: { x: 0, opacity: 0 },
    animate: { x: 0, opacity: 1 },
    exit: { x: 30, opacity: 0 },
    transition: { duration: 0.3 },
    className: t.className,
    children: t.children
  }
) });
function oy(t) {
  const { icon: e, title: r, extra: n, onClick: i } = t;
  function s() {
    i && i();
  }
  return /* @__PURE__ */ pe.jsxs(
    "div",
    {
      className: "xc-rounded-lg xc-group xc-flex xc-cursor-pointer xc-items-center xc-gap-2 xc-border xc-border-white xc-border-opacity-15 xc-px-4 xc-py-2 xc-transition-all hover:xc-shadow-lg",
      onClick: s,
      children: [
        e,
        r,
        /* @__PURE__ */ pe.jsxs("div", { className: "xc-relative xc-ml-auto xc-h-6", children: [
          /* @__PURE__ */ pe.jsx("div", { className: "xc-relative xc-left-0 xc-opacity-100 xc-transition-all group-hover:xc-left-2 group-hover:xc-opacity-0", children: n }),
          /* @__PURE__ */ pe.jsx("div", { className: "xc-absolute xc-right-2 xc-top-0 xc-text-gray-400 xc-opacity-0 xc-transition-all group-hover:xc-right-0 group-hover:xc-opacity-100", children: /* @__PURE__ */ pe.jsx(hZ, {}) })
        ] })
      ]
    }
  );
}
function Kre(t) {
  return t.lastUsed ? /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-items-center xc-gap-2 xc-rounded-full xc-py-1 xc-text-xs xc-text-gray-500", children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-h-1 xc-w-1 xc-rounded-full xc-bg-[#009E8C]" }),
    "Last Used"
  ] }) : t.installed ? /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-items-center xc-gap-2 xc-rounded-full xc-py-1 xc-text-xs xc-text-gray-500", children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-h-1 xc-w-1 xc-rounded-full xc-bg-[#2596FF]" }),
    "Installed"
  ] }) : null;
}
function y9(t) {
  var o, a;
  const { wallet: e, onClick: r } = t, n = /* @__PURE__ */ pe.jsx("img", { className: "xc-rounded-md xc-h-5 xc-w-5", src: (o = e.config) == null ? void 0 : o.image }), i = ((a = e.config) == null ? void 0 : a.name) || "", s = wi(() => Kre(e), [e]);
  return /* @__PURE__ */ pe.jsx(oy, { icon: n, title: i, extra: s, onClick: () => r(e) });
}
function w9(t) {
  var e, r, n = "";
  if (typeof t == "string" || typeof t == "number") n += t;
  else if (typeof t == "object") if (Array.isArray(t)) {
    var i = t.length;
    for (e = 0; e < i; e++) t[e] && (r = w9(t[e])) && (n && (n += " "), n += r);
  } else for (r in t) t[r] && (n && (n += " "), n += r);
  return n;
}
function Vre() {
  for (var t, e, r = 0, n = "", i = arguments.length; r < i; r++) (t = arguments[r]) && (e = w9(t)) && (n && (n += " "), n += e);
  return n;
}
const Gre = Vre, ay = "-", Yre = (t) => {
  const e = Xre(t), {
    conflictingClassGroups: r,
    conflictingClassGroupModifiers: n
  } = t;
  return {
    getClassGroupId: (o) => {
      const a = o.split(ay);
      return a[0] === "" && a.length !== 1 && a.shift(), x9(a, e) || Jre(o);
    },
    getConflictingClassGroupIds: (o, a) => {
      const u = r[o] || [];
      return a && n[o] ? [...u, ...n[o]] : u;
    }
  };
}, x9 = (t, e) => {
  var o;
  if (t.length === 0)
    return e.classGroupId;
  const r = t[0], n = e.nextPart.get(r), i = n ? x9(t.slice(1), n) : void 0;
  if (i)
    return i;
  if (e.validators.length === 0)
    return;
  const s = t.join(ay);
  return (o = e.validators.find(({
    validator: a
  }) => a(s))) == null ? void 0 : o.classGroupId;
}, a5 = /^\[(.+)\]$/, Jre = (t) => {
  if (a5.test(t)) {
    const e = a5.exec(t)[1], r = e == null ? void 0 : e.substring(0, e.indexOf(":"));
    if (r)
      return "arbitrary.." + r;
  }
}, Xre = (t) => {
  const {
    theme: e,
    prefix: r
  } = t, n = {
    nextPart: /* @__PURE__ */ new Map(),
    validators: []
  };
  return Qre(Object.entries(t.classGroups), r).forEach(([s, o]) => {
    lv(o, n, s, e);
  }), n;
}, lv = (t, e, r, n) => {
  t.forEach((i) => {
    if (typeof i == "string") {
      const s = i === "" ? e : c5(e, i);
      s.classGroupId = r;
      return;
    }
    if (typeof i == "function") {
      if (Zre(i)) {
        lv(i(n), e, r, n);
        return;
      }
      e.validators.push({
        validator: i,
        classGroupId: r
      });
      return;
    }
    Object.entries(i).forEach(([s, o]) => {
      lv(o, c5(e, s), r, n);
    });
  });
}, c5 = (t, e) => {
  let r = t;
  return e.split(ay).forEach((n) => {
    r.nextPart.has(n) || r.nextPart.set(n, {
      nextPart: /* @__PURE__ */ new Map(),
      validators: []
    }), r = r.nextPart.get(n);
  }), r;
}, Zre = (t) => t.isThemeGetter, Qre = (t, e) => e ? t.map(([r, n]) => {
  const i = n.map((s) => typeof s == "string" ? e + s : typeof s == "object" ? Object.fromEntries(Object.entries(s).map(([o, a]) => [e + o, a])) : s);
  return [r, i];
}) : t, ene = (t) => {
  if (t < 1)
    return {
      get: () => {
      },
      set: () => {
      }
    };
  let e = 0, r = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ new Map();
  const i = (s, o) => {
    r.set(s, o), e++, e > t && (e = 0, n = r, r = /* @__PURE__ */ new Map());
  };
  return {
    get(s) {
      let o = r.get(s);
      if (o !== void 0)
        return o;
      if ((o = n.get(s)) !== void 0)
        return i(s, o), o;
    },
    set(s, o) {
      r.has(s) ? r.set(s, o) : i(s, o);
    }
  };
}, _9 = "!", tne = (t) => {
  const {
    separator: e,
    experimentalParseClassName: r
  } = t, n = e.length === 1, i = e[0], s = e.length, o = (a) => {
    const u = [];
    let l = 0, d = 0, p;
    for (let L = 0; L < a.length; L++) {
      let B = a[L];
      if (l === 0) {
        if (B === i && (n || a.slice(L, L + s) === e)) {
          u.push(a.slice(d, L)), d = L + s;
          continue;
        }
        if (B === "/") {
          p = L;
          continue;
        }
      }
      B === "[" ? l++ : B === "]" && l--;
    }
    const w = u.length === 0 ? a : a.substring(d), A = w.startsWith(_9), M = A ? w.substring(1) : w, N = p && p > d ? p - d : void 0;
    return {
      modifiers: u,
      hasImportantModifier: A,
      baseClassName: M,
      maybePostfixModifierPosition: N
    };
  };
  return r ? (a) => r({
    className: a,
    parseClassName: o
  }) : o;
}, rne = (t) => {
  if (t.length <= 1)
    return t;
  const e = [];
  let r = [];
  return t.forEach((n) => {
    n[0] === "[" ? (e.push(...r.sort(), n), r = []) : r.push(n);
  }), e.push(...r.sort()), e;
}, nne = (t) => ({
  cache: ene(t.cacheSize),
  parseClassName: tne(t),
  ...Yre(t)
}), ine = /\s+/, sne = (t, e) => {
  const {
    parseClassName: r,
    getClassGroupId: n,
    getConflictingClassGroupIds: i
  } = e, s = [], o = t.trim().split(ine);
  let a = "";
  for (let u = o.length - 1; u >= 0; u -= 1) {
    const l = o[u], {
      modifiers: d,
      hasImportantModifier: p,
      baseClassName: w,
      maybePostfixModifierPosition: A
    } = r(l);
    let M = !!A, N = n(M ? w.substring(0, A) : w);
    if (!N) {
      if (!M) {
        a = l + (a.length > 0 ? " " + a : a);
        continue;
      }
      if (N = n(w), !N) {
        a = l + (a.length > 0 ? " " + a : a);
        continue;
      }
      M = !1;
    }
    const L = rne(d).join(":"), B = p ? L + _9 : L, $ = B + N;
    if (s.includes($))
      continue;
    s.push($);
    const H = i(N, M);
    for (let W = 0; W < H.length; ++W) {
      const V = H[W];
      s.push(B + V);
    }
    a = l + (a.length > 0 ? " " + a : a);
  }
  return a;
};
function one() {
  let t = 0, e, r, n = "";
  for (; t < arguments.length; )
    (e = arguments[t++]) && (r = E9(e)) && (n && (n += " "), n += r);
  return n;
}
const E9 = (t) => {
  if (typeof t == "string")
    return t;
  let e, r = "";
  for (let n = 0; n < t.length; n++)
    t[n] && (e = E9(t[n])) && (r && (r += " "), r += e);
  return r;
};
function ane(t, ...e) {
  let r, n, i, s = o;
  function o(u) {
    const l = e.reduce((d, p) => p(d), t());
    return r = nne(l), n = r.cache.get, i = r.cache.set, s = a, a(u);
  }
  function a(u) {
    const l = n(u);
    if (l)
      return l;
    const d = sne(u, r);
    return i(u, d), d;
  }
  return function() {
    return s(one.apply(null, arguments));
  };
}
const Gr = (t) => {
  const e = (r) => r[t] || [];
  return e.isThemeGetter = !0, e;
}, S9 = /^\[(?:([a-z-]+):)?(.+)\]$/i, cne = /^\d+\/\d+$/, une = /* @__PURE__ */ new Set(["px", "full", "screen"]), fne = /^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/, lne = /\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/, hne = /^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/, dne = /^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/, pne = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/, bo = (t) => mu(t) || une.has(t) || cne.test(t), na = (t) => Gu(t, "length", _ne), mu = (t) => !!t && !Number.isNaN(Number(t)), Hm = (t) => Gu(t, "number", mu), Nf = (t) => !!t && Number.isInteger(Number(t)), gne = (t) => t.endsWith("%") && mu(t.slice(0, -1)), ur = (t) => S9.test(t), ia = (t) => fne.test(t), mne = /* @__PURE__ */ new Set(["length", "size", "percentage"]), vne = (t) => Gu(t, mne, A9), bne = (t) => Gu(t, "position", A9), yne = /* @__PURE__ */ new Set(["image", "url"]), wne = (t) => Gu(t, yne, Sne), xne = (t) => Gu(t, "", Ene), Lf = () => !0, Gu = (t, e, r) => {
  const n = S9.exec(t);
  return n ? n[1] ? typeof e == "string" ? n[1] === e : e.has(n[1]) : r(n[2]) : !1;
}, _ne = (t) => (
  // `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.
  // For example, `hsl(0 0% 0%)` would be classified as a length without this check.
  // I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.
  lne.test(t) && !hne.test(t)
), A9 = () => !1, Ene = (t) => dne.test(t), Sne = (t) => pne.test(t), Ane = () => {
  const t = Gr("colors"), e = Gr("spacing"), r = Gr("blur"), n = Gr("brightness"), i = Gr("borderColor"), s = Gr("borderRadius"), o = Gr("borderSpacing"), a = Gr("borderWidth"), u = Gr("contrast"), l = Gr("grayscale"), d = Gr("hueRotate"), p = Gr("invert"), w = Gr("gap"), A = Gr("gradientColorStops"), M = Gr("gradientColorStopPositions"), N = Gr("inset"), L = Gr("margin"), B = Gr("opacity"), $ = Gr("padding"), H = Gr("saturate"), W = Gr("scale"), V = Gr("sepia"), te = Gr("skew"), R = Gr("space"), K = Gr("translate"), ge = () => ["auto", "contain", "none"], Ee = () => ["auto", "hidden", "clip", "visible", "scroll"], Y = () => ["auto", ur, e], S = () => [ur, e], m = () => ["", bo, na], f = () => ["auto", mu, ur], g = () => ["bottom", "center", "left", "left-bottom", "left-top", "right", "right-bottom", "right-top", "top"], b = () => ["solid", "dashed", "dotted", "double", "none"], x = () => ["normal", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"], _ = () => ["start", "end", "center", "between", "around", "evenly", "stretch"], E = () => ["", "0", ur], v = () => ["auto", "avoid", "all", "avoid-page", "page", "left", "right", "column"], P = () => [mu, ur];
  return {
    cacheSize: 500,
    separator: ":",
    theme: {
      colors: [Lf],
      spacing: [bo, na],
      blur: ["none", "", ia, ur],
      brightness: P(),
      borderColor: [t],
      borderRadius: ["none", "", "full", ia, ur],
      borderSpacing: S(),
      borderWidth: m(),
      contrast: P(),
      grayscale: E(),
      hueRotate: P(),
      invert: E(),
      gap: S(),
      gradientColorStops: [t],
      gradientColorStopPositions: [gne, na],
      inset: Y(),
      margin: Y(),
      opacity: P(),
      padding: S(),
      saturate: P(),
      scale: P(),
      sepia: E(),
      skew: P(),
      space: S(),
      translate: S()
    },
    classGroups: {
      // Layout
      /**
       * Aspect Ratio
       * @see https://tailwindcss.com/docs/aspect-ratio
       */
      aspect: [{
        aspect: ["auto", "square", "video", ur]
      }],
      /**
       * Container
       * @see https://tailwindcss.com/docs/container
       */
      container: ["container"],
      /**
       * Columns
       * @see https://tailwindcss.com/docs/columns
       */
      columns: [{
        columns: [ia]
      }],
      /**
       * Break After
       * @see https://tailwindcss.com/docs/break-after
       */
      "break-after": [{
        "break-after": v()
      }],
      /**
       * Break Before
       * @see https://tailwindcss.com/docs/break-before
       */
      "break-before": [{
        "break-before": v()
      }],
      /**
       * Break Inside
       * @see https://tailwindcss.com/docs/break-inside
       */
      "break-inside": [{
        "break-inside": ["auto", "avoid", "avoid-page", "avoid-column"]
      }],
      /**
       * Box Decoration Break
       * @see https://tailwindcss.com/docs/box-decoration-break
       */
      "box-decoration": [{
        "box-decoration": ["slice", "clone"]
      }],
      /**
       * Box Sizing
       * @see https://tailwindcss.com/docs/box-sizing
       */
      box: [{
        box: ["border", "content"]
      }],
      /**
       * Display
       * @see https://tailwindcss.com/docs/display
       */
      display: ["block", "inline-block", "inline", "flex", "inline-flex", "table", "inline-table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row-group", "table-row", "flow-root", "grid", "inline-grid", "contents", "list-item", "hidden"],
      /**
       * Floats
       * @see https://tailwindcss.com/docs/float
       */
      float: [{
        float: ["right", "left", "none", "start", "end"]
      }],
      /**
       * Clear
       * @see https://tailwindcss.com/docs/clear
       */
      clear: [{
        clear: ["left", "right", "both", "none", "start", "end"]
      }],
      /**
       * Isolation
       * @see https://tailwindcss.com/docs/isolation
       */
      isolation: ["isolate", "isolation-auto"],
      /**
       * Object Fit
       * @see https://tailwindcss.com/docs/object-fit
       */
      "object-fit": [{
        object: ["contain", "cover", "fill", "none", "scale-down"]
      }],
      /**
       * Object Position
       * @see https://tailwindcss.com/docs/object-position
       */
      "object-position": [{
        object: [...g(), ur]
      }],
      /**
       * Overflow
       * @see https://tailwindcss.com/docs/overflow
       */
      overflow: [{
        overflow: Ee()
      }],
      /**
       * Overflow X
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-x": [{
        "overflow-x": Ee()
      }],
      /**
       * Overflow Y
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-y": [{
        "overflow-y": Ee()
      }],
      /**
       * Overscroll Behavior
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      overscroll: [{
        overscroll: ge()
      }],
      /**
       * Overscroll Behavior X
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-x": [{
        "overscroll-x": ge()
      }],
      /**
       * Overscroll Behavior Y
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-y": [{
        "overscroll-y": ge()
      }],
      /**
       * Position
       * @see https://tailwindcss.com/docs/position
       */
      position: ["static", "fixed", "absolute", "relative", "sticky"],
      /**
       * Top / Right / Bottom / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      inset: [{
        inset: [N]
      }],
      /**
       * Right / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-x": [{
        "inset-x": [N]
      }],
      /**
       * Top / Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-y": [{
        "inset-y": [N]
      }],
      /**
       * Start
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      start: [{
        start: [N]
      }],
      /**
       * End
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      end: [{
        end: [N]
      }],
      /**
       * Top
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      top: [{
        top: [N]
      }],
      /**
       * Right
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      right: [{
        right: [N]
      }],
      /**
       * Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      bottom: [{
        bottom: [N]
      }],
      /**
       * Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      left: [{
        left: [N]
      }],
      /**
       * Visibility
       * @see https://tailwindcss.com/docs/visibility
       */
      visibility: ["visible", "invisible", "collapse"],
      /**
       * Z-Index
       * @see https://tailwindcss.com/docs/z-index
       */
      z: [{
        z: ["auto", Nf, ur]
      }],
      // Flexbox and Grid
      /**
       * Flex Basis
       * @see https://tailwindcss.com/docs/flex-basis
       */
      basis: [{
        basis: Y()
      }],
      /**
       * Flex Direction
       * @see https://tailwindcss.com/docs/flex-direction
       */
      "flex-direction": [{
        flex: ["row", "row-reverse", "col", "col-reverse"]
      }],
      /**
       * Flex Wrap
       * @see https://tailwindcss.com/docs/flex-wrap
       */
      "flex-wrap": [{
        flex: ["wrap", "wrap-reverse", "nowrap"]
      }],
      /**
       * Flex
       * @see https://tailwindcss.com/docs/flex
       */
      flex: [{
        flex: ["1", "auto", "initial", "none", ur]
      }],
      /**
       * Flex Grow
       * @see https://tailwindcss.com/docs/flex-grow
       */
      grow: [{
        grow: E()
      }],
      /**
       * Flex Shrink
       * @see https://tailwindcss.com/docs/flex-shrink
       */
      shrink: [{
        shrink: E()
      }],
      /**
       * Order
       * @see https://tailwindcss.com/docs/order
       */
      order: [{
        order: ["first", "last", "none", Nf, ur]
      }],
      /**
       * Grid Template Columns
       * @see https://tailwindcss.com/docs/grid-template-columns
       */
      "grid-cols": [{
        "grid-cols": [Lf]
      }],
      /**
       * Grid Column Start / End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start-end": [{
        col: ["auto", {
          span: ["full", Nf, ur]
        }, ur]
      }],
      /**
       * Grid Column Start
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start": [{
        "col-start": f()
      }],
      /**
       * Grid Column End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-end": [{
        "col-end": f()
      }],
      /**
       * Grid Template Rows
       * @see https://tailwindcss.com/docs/grid-template-rows
       */
      "grid-rows": [{
        "grid-rows": [Lf]
      }],
      /**
       * Grid Row Start / End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start-end": [{
        row: ["auto", {
          span: [Nf, ur]
        }, ur]
      }],
      /**
       * Grid Row Start
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start": [{
        "row-start": f()
      }],
      /**
       * Grid Row End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-end": [{
        "row-end": f()
      }],
      /**
       * Grid Auto Flow
       * @see https://tailwindcss.com/docs/grid-auto-flow
       */
      "grid-flow": [{
        "grid-flow": ["row", "col", "dense", "row-dense", "col-dense"]
      }],
      /**
       * Grid Auto Columns
       * @see https://tailwindcss.com/docs/grid-auto-columns
       */
      "auto-cols": [{
        "auto-cols": ["auto", "min", "max", "fr", ur]
      }],
      /**
       * Grid Auto Rows
       * @see https://tailwindcss.com/docs/grid-auto-rows
       */
      "auto-rows": [{
        "auto-rows": ["auto", "min", "max", "fr", ur]
      }],
      /**
       * Gap
       * @see https://tailwindcss.com/docs/gap
       */
      gap: [{
        gap: [w]
      }],
      /**
       * Gap X
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-x": [{
        "gap-x": [w]
      }],
      /**
       * Gap Y
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-y": [{
        "gap-y": [w]
      }],
      /**
       * Justify Content
       * @see https://tailwindcss.com/docs/justify-content
       */
      "justify-content": [{
        justify: ["normal", ..._()]
      }],
      /**
       * Justify Items
       * @see https://tailwindcss.com/docs/justify-items
       */
      "justify-items": [{
        "justify-items": ["start", "end", "center", "stretch"]
      }],
      /**
       * Justify Self
       * @see https://tailwindcss.com/docs/justify-self
       */
      "justify-self": [{
        "justify-self": ["auto", "start", "end", "center", "stretch"]
      }],
      /**
       * Align Content
       * @see https://tailwindcss.com/docs/align-content
       */
      "align-content": [{
        content: ["normal", ..._(), "baseline"]
      }],
      /**
       * Align Items
       * @see https://tailwindcss.com/docs/align-items
       */
      "align-items": [{
        items: ["start", "end", "center", "baseline", "stretch"]
      }],
      /**
       * Align Self
       * @see https://tailwindcss.com/docs/align-self
       */
      "align-self": [{
        self: ["auto", "start", "end", "center", "stretch", "baseline"]
      }],
      /**
       * Place Content
       * @see https://tailwindcss.com/docs/place-content
       */
      "place-content": [{
        "place-content": [..._(), "baseline"]
      }],
      /**
       * Place Items
       * @see https://tailwindcss.com/docs/place-items
       */
      "place-items": [{
        "place-items": ["start", "end", "center", "baseline", "stretch"]
      }],
      /**
       * Place Self
       * @see https://tailwindcss.com/docs/place-self
       */
      "place-self": [{
        "place-self": ["auto", "start", "end", "center", "stretch"]
      }],
      // Spacing
      /**
       * Padding
       * @see https://tailwindcss.com/docs/padding
       */
      p: [{
        p: [$]
      }],
      /**
       * Padding X
       * @see https://tailwindcss.com/docs/padding
       */
      px: [{
        px: [$]
      }],
      /**
       * Padding Y
       * @see https://tailwindcss.com/docs/padding
       */
      py: [{
        py: [$]
      }],
      /**
       * Padding Start
       * @see https://tailwindcss.com/docs/padding
       */
      ps: [{
        ps: [$]
      }],
      /**
       * Padding End
       * @see https://tailwindcss.com/docs/padding
       */
      pe: [{
        pe: [$]
      }],
      /**
       * Padding Top
       * @see https://tailwindcss.com/docs/padding
       */
      pt: [{
        pt: [$]
      }],
      /**
       * Padding Right
       * @see https://tailwindcss.com/docs/padding
       */
      pr: [{
        pr: [$]
      }],
      /**
       * Padding Bottom
       * @see https://tailwindcss.com/docs/padding
       */
      pb: [{
        pb: [$]
      }],
      /**
       * Padding Left
       * @see https://tailwindcss.com/docs/padding
       */
      pl: [{
        pl: [$]
      }],
      /**
       * Margin
       * @see https://tailwindcss.com/docs/margin
       */
      m: [{
        m: [L]
      }],
      /**
       * Margin X
       * @see https://tailwindcss.com/docs/margin
       */
      mx: [{
        mx: [L]
      }],
      /**
       * Margin Y
       * @see https://tailwindcss.com/docs/margin
       */
      my: [{
        my: [L]
      }],
      /**
       * Margin Start
       * @see https://tailwindcss.com/docs/margin
       */
      ms: [{
        ms: [L]
      }],
      /**
       * Margin End
       * @see https://tailwindcss.com/docs/margin
       */
      me: [{
        me: [L]
      }],
      /**
       * Margin Top
       * @see https://tailwindcss.com/docs/margin
       */
      mt: [{
        mt: [L]
      }],
      /**
       * Margin Right
       * @see https://tailwindcss.com/docs/margin
       */
      mr: [{
        mr: [L]
      }],
      /**
       * Margin Bottom
       * @see https://tailwindcss.com/docs/margin
       */
      mb: [{
        mb: [L]
      }],
      /**
       * Margin Left
       * @see https://tailwindcss.com/docs/margin
       */
      ml: [{
        ml: [L]
      }],
      /**
       * Space Between X
       * @see https://tailwindcss.com/docs/space
       */
      "space-x": [{
        "space-x": [R]
      }],
      /**
       * Space Between X Reverse
       * @see https://tailwindcss.com/docs/space
       */
      "space-x-reverse": ["space-x-reverse"],
      /**
       * Space Between Y
       * @see https://tailwindcss.com/docs/space
       */
      "space-y": [{
        "space-y": [R]
      }],
      /**
       * Space Between Y Reverse
       * @see https://tailwindcss.com/docs/space
       */
      "space-y-reverse": ["space-y-reverse"],
      // Sizing
      /**
       * Width
       * @see https://tailwindcss.com/docs/width
       */
      w: [{
        w: ["auto", "min", "max", "fit", "svw", "lvw", "dvw", ur, e]
      }],
      /**
       * Min-Width
       * @see https://tailwindcss.com/docs/min-width
       */
      "min-w": [{
        "min-w": [ur, e, "min", "max", "fit"]
      }],
      /**
       * Max-Width
       * @see https://tailwindcss.com/docs/max-width
       */
      "max-w": [{
        "max-w": [ur, e, "none", "full", "min", "max", "fit", "prose", {
          screen: [ia]
        }, ia]
      }],
      /**
       * Height
       * @see https://tailwindcss.com/docs/height
       */
      h: [{
        h: [ur, e, "auto", "min", "max", "fit", "svh", "lvh", "dvh"]
      }],
      /**
       * Min-Height
       * @see https://tailwindcss.com/docs/min-height
       */
      "min-h": [{
        "min-h": [ur, e, "min", "max", "fit", "svh", "lvh", "dvh"]
      }],
      /**
       * Max-Height
       * @see https://tailwindcss.com/docs/max-height
       */
      "max-h": [{
        "max-h": [ur, e, "min", "max", "fit", "svh", "lvh", "dvh"]
      }],
      /**
       * Size
       * @see https://tailwindcss.com/docs/size
       */
      size: [{
        size: [ur, e, "auto", "min", "max", "fit"]
      }],
      // Typography
      /**
       * Font Size
       * @see https://tailwindcss.com/docs/font-size
       */
      "font-size": [{
        text: ["base", ia, na]
      }],
      /**
       * Font Smoothing
       * @see https://tailwindcss.com/docs/font-smoothing
       */
      "font-smoothing": ["antialiased", "subpixel-antialiased"],
      /**
       * Font Style
       * @see https://tailwindcss.com/docs/font-style
       */
      "font-style": ["italic", "not-italic"],
      /**
       * Font Weight
       * @see https://tailwindcss.com/docs/font-weight
       */
      "font-weight": [{
        font: ["thin", "extralight", "light", "normal", "medium", "semibold", "bold", "extrabold", "black", Hm]
      }],
      /**
       * Font Family
       * @see https://tailwindcss.com/docs/font-family
       */
      "font-family": [{
        font: [Lf]
      }],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-normal": ["normal-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-ordinal": ["ordinal"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-slashed-zero": ["slashed-zero"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-figure": ["lining-nums", "oldstyle-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-spacing": ["proportional-nums", "tabular-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-fraction": ["diagonal-fractions", "stacked-fractions"],
      /**
       * Letter Spacing
       * @see https://tailwindcss.com/docs/letter-spacing
       */
      tracking: [{
        tracking: ["tighter", "tight", "normal", "wide", "wider", "widest", ur]
      }],
      /**
       * Line Clamp
       * @see https://tailwindcss.com/docs/line-clamp
       */
      "line-clamp": [{
        "line-clamp": ["none", mu, Hm]
      }],
      /**
       * Line Height
       * @see https://tailwindcss.com/docs/line-height
       */
      leading: [{
        leading: ["none", "tight", "snug", "normal", "relaxed", "loose", bo, ur]
      }],
      /**
       * List Style Image
       * @see https://tailwindcss.com/docs/list-style-image
       */
      "list-image": [{
        "list-image": ["none", ur]
      }],
      /**
       * List Style Type
       * @see https://tailwindcss.com/docs/list-style-type
       */
      "list-style-type": [{
        list: ["none", "disc", "decimal", ur]
      }],
      /**
       * List Style Position
       * @see https://tailwindcss.com/docs/list-style-position
       */
      "list-style-position": [{
        list: ["inside", "outside"]
      }],
      /**
       * Placeholder Color
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/placeholder-color
       */
      "placeholder-color": [{
        placeholder: [t]
      }],
      /**
       * Placeholder Opacity
       * @see https://tailwindcss.com/docs/placeholder-opacity
       */
      "placeholder-opacity": [{
        "placeholder-opacity": [B]
      }],
      /**
       * Text Alignment
       * @see https://tailwindcss.com/docs/text-align
       */
      "text-alignment": [{
        text: ["left", "center", "right", "justify", "start", "end"]
      }],
      /**
       * Text Color
       * @see https://tailwindcss.com/docs/text-color
       */
      "text-color": [{
        text: [t]
      }],
      /**
       * Text Opacity
       * @see https://tailwindcss.com/docs/text-opacity
       */
      "text-opacity": [{
        "text-opacity": [B]
      }],
      /**
       * Text Decoration
       * @see https://tailwindcss.com/docs/text-decoration
       */
      "text-decoration": ["underline", "overline", "line-through", "no-underline"],
      /**
       * Text Decoration Style
       * @see https://tailwindcss.com/docs/text-decoration-style
       */
      "text-decoration-style": [{
        decoration: [...b(), "wavy"]
      }],
      /**
       * Text Decoration Thickness
       * @see https://tailwindcss.com/docs/text-decoration-thickness
       */
      "text-decoration-thickness": [{
        decoration: ["auto", "from-font", bo, na]
      }],
      /**
       * Text Underline Offset
       * @see https://tailwindcss.com/docs/text-underline-offset
       */
      "underline-offset": [{
        "underline-offset": ["auto", bo, ur]
      }],
      /**
       * Text Decoration Color
       * @see https://tailwindcss.com/docs/text-decoration-color
       */
      "text-decoration-color": [{
        decoration: [t]
      }],
      /**
       * Text Transform
       * @see https://tailwindcss.com/docs/text-transform
       */
      "text-transform": ["uppercase", "lowercase", "capitalize", "normal-case"],
      /**
       * Text Overflow
       * @see https://tailwindcss.com/docs/text-overflow
       */
      "text-overflow": ["truncate", "text-ellipsis", "text-clip"],
      /**
       * Text Wrap
       * @see https://tailwindcss.com/docs/text-wrap
       */
      "text-wrap": [{
        text: ["wrap", "nowrap", "balance", "pretty"]
      }],
      /**
       * Text Indent
       * @see https://tailwindcss.com/docs/text-indent
       */
      indent: [{
        indent: S()
      }],
      /**
       * Vertical Alignment
       * @see https://tailwindcss.com/docs/vertical-align
       */
      "vertical-align": [{
        align: ["baseline", "top", "middle", "bottom", "text-top", "text-bottom", "sub", "super", ur]
      }],
      /**
       * Whitespace
       * @see https://tailwindcss.com/docs/whitespace
       */
      whitespace: [{
        whitespace: ["normal", "nowrap", "pre", "pre-line", "pre-wrap", "break-spaces"]
      }],
      /**
       * Word Break
       * @see https://tailwindcss.com/docs/word-break
       */
      break: [{
        break: ["normal", "words", "all", "keep"]
      }],
      /**
       * Hyphens
       * @see https://tailwindcss.com/docs/hyphens
       */
      hyphens: [{
        hyphens: ["none", "manual", "auto"]
      }],
      /**
       * Content
       * @see https://tailwindcss.com/docs/content
       */
      content: [{
        content: ["none", ur]
      }],
      // Backgrounds
      /**
       * Background Attachment
       * @see https://tailwindcss.com/docs/background-attachment
       */
      "bg-attachment": [{
        bg: ["fixed", "local", "scroll"]
      }],
      /**
       * Background Clip
       * @see https://tailwindcss.com/docs/background-clip
       */
      "bg-clip": [{
        "bg-clip": ["border", "padding", "content", "text"]
      }],
      /**
       * Background Opacity
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/background-opacity
       */
      "bg-opacity": [{
        "bg-opacity": [B]
      }],
      /**
       * Background Origin
       * @see https://tailwindcss.com/docs/background-origin
       */
      "bg-origin": [{
        "bg-origin": ["border", "padding", "content"]
      }],
      /**
       * Background Position
       * @see https://tailwindcss.com/docs/background-position
       */
      "bg-position": [{
        bg: [...g(), bne]
      }],
      /**
       * Background Repeat
       * @see https://tailwindcss.com/docs/background-repeat
       */
      "bg-repeat": [{
        bg: ["no-repeat", {
          repeat: ["", "x", "y", "round", "space"]
        }]
      }],
      /**
       * Background Size
       * @see https://tailwindcss.com/docs/background-size
       */
      "bg-size": [{
        bg: ["auto", "cover", "contain", vne]
      }],
      /**
       * Background Image
       * @see https://tailwindcss.com/docs/background-image
       */
      "bg-image": [{
        bg: ["none", {
          "gradient-to": ["t", "tr", "r", "br", "b", "bl", "l", "tl"]
        }, wne]
      }],
      /**
       * Background Color
       * @see https://tailwindcss.com/docs/background-color
       */
      "bg-color": [{
        bg: [t]
      }],
      /**
       * Gradient Color Stops From Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from-pos": [{
        from: [M]
      }],
      /**
       * Gradient Color Stops Via Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via-pos": [{
        via: [M]
      }],
      /**
       * Gradient Color Stops To Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to-pos": [{
        to: [M]
      }],
      /**
       * Gradient Color Stops From
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from": [{
        from: [A]
      }],
      /**
       * Gradient Color Stops Via
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via": [{
        via: [A]
      }],
      /**
       * Gradient Color Stops To
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to": [{
        to: [A]
      }],
      // Borders
      /**
       * Border Radius
       * @see https://tailwindcss.com/docs/border-radius
       */
      rounded: [{
        rounded: [s]
      }],
      /**
       * Border Radius Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-s": [{
        "rounded-s": [s]
      }],
      /**
       * Border Radius End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-e": [{
        "rounded-e": [s]
      }],
      /**
       * Border Radius Top
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-t": [{
        "rounded-t": [s]
      }],
      /**
       * Border Radius Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-r": [{
        "rounded-r": [s]
      }],
      /**
       * Border Radius Bottom
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-b": [{
        "rounded-b": [s]
      }],
      /**
       * Border Radius Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-l": [{
        "rounded-l": [s]
      }],
      /**
       * Border Radius Start Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ss": [{
        "rounded-ss": [s]
      }],
      /**
       * Border Radius Start End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-se": [{
        "rounded-se": [s]
      }],
      /**
       * Border Radius End End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ee": [{
        "rounded-ee": [s]
      }],
      /**
       * Border Radius End Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-es": [{
        "rounded-es": [s]
      }],
      /**
       * Border Radius Top Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tl": [{
        "rounded-tl": [s]
      }],
      /**
       * Border Radius Top Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tr": [{
        "rounded-tr": [s]
      }],
      /**
       * Border Radius Bottom Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-br": [{
        "rounded-br": [s]
      }],
      /**
       * Border Radius Bottom Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-bl": [{
        "rounded-bl": [s]
      }],
      /**
       * Border Width
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w": [{
        border: [a]
      }],
      /**
       * Border Width X
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-x": [{
        "border-x": [a]
      }],
      /**
       * Border Width Y
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-y": [{
        "border-y": [a]
      }],
      /**
       * Border Width Start
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-s": [{
        "border-s": [a]
      }],
      /**
       * Border Width End
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-e": [{
        "border-e": [a]
      }],
      /**
       * Border Width Top
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-t": [{
        "border-t": [a]
      }],
      /**
       * Border Width Right
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-r": [{
        "border-r": [a]
      }],
      /**
       * Border Width Bottom
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-b": [{
        "border-b": [a]
      }],
      /**
       * Border Width Left
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-l": [{
        "border-l": [a]
      }],
      /**
       * Border Opacity
       * @see https://tailwindcss.com/docs/border-opacity
       */
      "border-opacity": [{
        "border-opacity": [B]
      }],
      /**
       * Border Style
       * @see https://tailwindcss.com/docs/border-style
       */
      "border-style": [{
        border: [...b(), "hidden"]
      }],
      /**
       * Divide Width X
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-x": [{
        "divide-x": [a]
      }],
      /**
       * Divide Width X Reverse
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-x-reverse": ["divide-x-reverse"],
      /**
       * Divide Width Y
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-y": [{
        "divide-y": [a]
      }],
      /**
       * Divide Width Y Reverse
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-y-reverse": ["divide-y-reverse"],
      /**
       * Divide Opacity
       * @see https://tailwindcss.com/docs/divide-opacity
       */
      "divide-opacity": [{
        "divide-opacity": [B]
      }],
      /**
       * Divide Style
       * @see https://tailwindcss.com/docs/divide-style
       */
      "divide-style": [{
        divide: b()
      }],
      /**
       * Border Color
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color": [{
        border: [i]
      }],
      /**
       * Border Color X
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-x": [{
        "border-x": [i]
      }],
      /**
       * Border Color Y
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-y": [{
        "border-y": [i]
      }],
      /**
       * Border Color S
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-s": [{
        "border-s": [i]
      }],
      /**
       * Border Color E
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-e": [{
        "border-e": [i]
      }],
      /**
       * Border Color Top
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-t": [{
        "border-t": [i]
      }],
      /**
       * Border Color Right
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-r": [{
        "border-r": [i]
      }],
      /**
       * Border Color Bottom
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-b": [{
        "border-b": [i]
      }],
      /**
       * Border Color Left
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-l": [{
        "border-l": [i]
      }],
      /**
       * Divide Color
       * @see https://tailwindcss.com/docs/divide-color
       */
      "divide-color": [{
        divide: [i]
      }],
      /**
       * Outline Style
       * @see https://tailwindcss.com/docs/outline-style
       */
      "outline-style": [{
        outline: ["", ...b()]
      }],
      /**
       * Outline Offset
       * @see https://tailwindcss.com/docs/outline-offset
       */
      "outline-offset": [{
        "outline-offset": [bo, ur]
      }],
      /**
       * Outline Width
       * @see https://tailwindcss.com/docs/outline-width
       */
      "outline-w": [{
        outline: [bo, na]
      }],
      /**
       * Outline Color
       * @see https://tailwindcss.com/docs/outline-color
       */
      "outline-color": [{
        outline: [t]
      }],
      /**
       * Ring Width
       * @see https://tailwindcss.com/docs/ring-width
       */
      "ring-w": [{
        ring: m()
      }],
      /**
       * Ring Width Inset
       * @see https://tailwindcss.com/docs/ring-width
       */
      "ring-w-inset": ["ring-inset"],
      /**
       * Ring Color
       * @see https://tailwindcss.com/docs/ring-color
       */
      "ring-color": [{
        ring: [t]
      }],
      /**
       * Ring Opacity
       * @see https://tailwindcss.com/docs/ring-opacity
       */
      "ring-opacity": [{
        "ring-opacity": [B]
      }],
      /**
       * Ring Offset Width
       * @see https://tailwindcss.com/docs/ring-offset-width
       */
      "ring-offset-w": [{
        "ring-offset": [bo, na]
      }],
      /**
       * Ring Offset Color
       * @see https://tailwindcss.com/docs/ring-offset-color
       */
      "ring-offset-color": [{
        "ring-offset": [t]
      }],
      // Effects
      /**
       * Box Shadow
       * @see https://tailwindcss.com/docs/box-shadow
       */
      shadow: [{
        shadow: ["", "inner", "none", ia, xne]
      }],
      /**
       * Box Shadow Color
       * @see https://tailwindcss.com/docs/box-shadow-color
       */
      "shadow-color": [{
        shadow: [Lf]
      }],
      /**
       * Opacity
       * @see https://tailwindcss.com/docs/opacity
       */
      opacity: [{
        opacity: [B]
      }],
      /**
       * Mix Blend Mode
       * @see https://tailwindcss.com/docs/mix-blend-mode
       */
      "mix-blend": [{
        "mix-blend": [...x(), "plus-lighter", "plus-darker"]
      }],
      /**
       * Background Blend Mode
       * @see https://tailwindcss.com/docs/background-blend-mode
       */
      "bg-blend": [{
        "bg-blend": x()
      }],
      // Filters
      /**
       * Filter
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/filter
       */
      filter: [{
        filter: ["", "none"]
      }],
      /**
       * Blur
       * @see https://tailwindcss.com/docs/blur
       */
      blur: [{
        blur: [r]
      }],
      /**
       * Brightness
       * @see https://tailwindcss.com/docs/brightness
       */
      brightness: [{
        brightness: [n]
      }],
      /**
       * Contrast
       * @see https://tailwindcss.com/docs/contrast
       */
      contrast: [{
        contrast: [u]
      }],
      /**
       * Drop Shadow
       * @see https://tailwindcss.com/docs/drop-shadow
       */
      "drop-shadow": [{
        "drop-shadow": ["", "none", ia, ur]
      }],
      /**
       * Grayscale
       * @see https://tailwindcss.com/docs/grayscale
       */
      grayscale: [{
        grayscale: [l]
      }],
      /**
       * Hue Rotate
       * @see https://tailwindcss.com/docs/hue-rotate
       */
      "hue-rotate": [{
        "hue-rotate": [d]
      }],
      /**
       * Invert
       * @see https://tailwindcss.com/docs/invert
       */
      invert: [{
        invert: [p]
      }],
      /**
       * Saturate
       * @see https://tailwindcss.com/docs/saturate
       */
      saturate: [{
        saturate: [H]
      }],
      /**
       * Sepia
       * @see https://tailwindcss.com/docs/sepia
       */
      sepia: [{
        sepia: [V]
      }],
      /**
       * Backdrop Filter
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/backdrop-filter
       */
      "backdrop-filter": [{
        "backdrop-filter": ["", "none"]
      }],
      /**
       * Backdrop Blur
       * @see https://tailwindcss.com/docs/backdrop-blur
       */
      "backdrop-blur": [{
        "backdrop-blur": [r]
      }],
      /**
       * Backdrop Brightness
       * @see https://tailwindcss.com/docs/backdrop-brightness
       */
      "backdrop-brightness": [{
        "backdrop-brightness": [n]
      }],
      /**
       * Backdrop Contrast
       * @see https://tailwindcss.com/docs/backdrop-contrast
       */
      "backdrop-contrast": [{
        "backdrop-contrast": [u]
      }],
      /**
       * Backdrop Grayscale
       * @see https://tailwindcss.com/docs/backdrop-grayscale
       */
      "backdrop-grayscale": [{
        "backdrop-grayscale": [l]
      }],
      /**
       * Backdrop Hue Rotate
       * @see https://tailwindcss.com/docs/backdrop-hue-rotate
       */
      "backdrop-hue-rotate": [{
        "backdrop-hue-rotate": [d]
      }],
      /**
       * Backdrop Invert
       * @see https://tailwindcss.com/docs/backdrop-invert
       */
      "backdrop-invert": [{
        "backdrop-invert": [p]
      }],
      /**
       * Backdrop Opacity
       * @see https://tailwindcss.com/docs/backdrop-opacity
       */
      "backdrop-opacity": [{
        "backdrop-opacity": [B]
      }],
      /**
       * Backdrop Saturate
       * @see https://tailwindcss.com/docs/backdrop-saturate
       */
      "backdrop-saturate": [{
        "backdrop-saturate": [H]
      }],
      /**
       * Backdrop Sepia
       * @see https://tailwindcss.com/docs/backdrop-sepia
       */
      "backdrop-sepia": [{
        "backdrop-sepia": [V]
      }],
      // Tables
      /**
       * Border Collapse
       * @see https://tailwindcss.com/docs/border-collapse
       */
      "border-collapse": [{
        border: ["collapse", "separate"]
      }],
      /**
       * Border Spacing
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing": [{
        "border-spacing": [o]
      }],
      /**
       * Border Spacing X
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-x": [{
        "border-spacing-x": [o]
      }],
      /**
       * Border Spacing Y
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-y": [{
        "border-spacing-y": [o]
      }],
      /**
       * Table Layout
       * @see https://tailwindcss.com/docs/table-layout
       */
      "table-layout": [{
        table: ["auto", "fixed"]
      }],
      /**
       * Caption Side
       * @see https://tailwindcss.com/docs/caption-side
       */
      caption: [{
        caption: ["top", "bottom"]
      }],
      // Transitions and Animation
      /**
       * Tranisition Property
       * @see https://tailwindcss.com/docs/transition-property
       */
      transition: [{
        transition: ["none", "all", "", "colors", "opacity", "shadow", "transform", ur]
      }],
      /**
       * Transition Duration
       * @see https://tailwindcss.com/docs/transition-duration
       */
      duration: [{
        duration: P()
      }],
      /**
       * Transition Timing Function
       * @see https://tailwindcss.com/docs/transition-timing-function
       */
      ease: [{
        ease: ["linear", "in", "out", "in-out", ur]
      }],
      /**
       * Transition Delay
       * @see https://tailwindcss.com/docs/transition-delay
       */
      delay: [{
        delay: P()
      }],
      /**
       * Animation
       * @see https://tailwindcss.com/docs/animation
       */
      animate: [{
        animate: ["none", "spin", "ping", "pulse", "bounce", ur]
      }],
      // Transforms
      /**
       * Transform
       * @see https://tailwindcss.com/docs/transform
       */
      transform: [{
        transform: ["", "gpu", "none"]
      }],
      /**
       * Scale
       * @see https://tailwindcss.com/docs/scale
       */
      scale: [{
        scale: [W]
      }],
      /**
       * Scale X
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-x": [{
        "scale-x": [W]
      }],
      /**
       * Scale Y
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-y": [{
        "scale-y": [W]
      }],
      /**
       * Rotate
       * @see https://tailwindcss.com/docs/rotate
       */
      rotate: [{
        rotate: [Nf, ur]
      }],
      /**
       * Translate X
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-x": [{
        "translate-x": [K]
      }],
      /**
       * Translate Y
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-y": [{
        "translate-y": [K]
      }],
      /**
       * Skew X
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-x": [{
        "skew-x": [te]
      }],
      /**
       * Skew Y
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-y": [{
        "skew-y": [te]
      }],
      /**
       * Transform Origin
       * @see https://tailwindcss.com/docs/transform-origin
       */
      "transform-origin": [{
        origin: ["center", "top", "top-right", "right", "bottom-right", "bottom", "bottom-left", "left", "top-left", ur]
      }],
      // Interactivity
      /**
       * Accent Color
       * @see https://tailwindcss.com/docs/accent-color
       */
      accent: [{
        accent: ["auto", t]
      }],
      /**
       * Appearance
       * @see https://tailwindcss.com/docs/appearance
       */
      appearance: [{
        appearance: ["none", "auto"]
      }],
      /**
       * Cursor
       * @see https://tailwindcss.com/docs/cursor
       */
      cursor: [{
        cursor: ["auto", "default", "pointer", "wait", "text", "move", "help", "not-allowed", "none", "context-menu", "progress", "cell", "crosshair", "vertical-text", "alias", "copy", "no-drop", "grab", "grabbing", "all-scroll", "col-resize", "row-resize", "n-resize", "e-resize", "s-resize", "w-resize", "ne-resize", "nw-resize", "se-resize", "sw-resize", "ew-resize", "ns-resize", "nesw-resize", "nwse-resize", "zoom-in", "zoom-out", ur]
      }],
      /**
       * Caret Color
       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities
       */
      "caret-color": [{
        caret: [t]
      }],
      /**
       * Pointer Events
       * @see https://tailwindcss.com/docs/pointer-events
       */
      "pointer-events": [{
        "pointer-events": ["none", "auto"]
      }],
      /**
       * Resize
       * @see https://tailwindcss.com/docs/resize
       */
      resize: [{
        resize: ["none", "y", "x", ""]
      }],
      /**
       * Scroll Behavior
       * @see https://tailwindcss.com/docs/scroll-behavior
       */
      "scroll-behavior": [{
        scroll: ["auto", "smooth"]
      }],
      /**
       * Scroll Margin
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-m": [{
        "scroll-m": S()
      }],
      /**
       * Scroll Margin X
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mx": [{
        "scroll-mx": S()
      }],
      /**
       * Scroll Margin Y
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-my": [{
        "scroll-my": S()
      }],
      /**
       * Scroll Margin Start
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ms": [{
        "scroll-ms": S()
      }],
      /**
       * Scroll Margin End
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-me": [{
        "scroll-me": S()
      }],
      /**
       * Scroll Margin Top
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mt": [{
        "scroll-mt": S()
      }],
      /**
       * Scroll Margin Right
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mr": [{
        "scroll-mr": S()
      }],
      /**
       * Scroll Margin Bottom
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mb": [{
        "scroll-mb": S()
      }],
      /**
       * Scroll Margin Left
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ml": [{
        "scroll-ml": S()
      }],
      /**
       * Scroll Padding
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-p": [{
        "scroll-p": S()
      }],
      /**
       * Scroll Padding X
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-px": [{
        "scroll-px": S()
      }],
      /**
       * Scroll Padding Y
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-py": [{
        "scroll-py": S()
      }],
      /**
       * Scroll Padding Start
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-ps": [{
        "scroll-ps": S()
      }],
      /**
       * Scroll Padding End
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pe": [{
        "scroll-pe": S()
      }],
      /**
       * Scroll Padding Top
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pt": [{
        "scroll-pt": S()
      }],
      /**
       * Scroll Padding Right
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pr": [{
        "scroll-pr": S()
      }],
      /**
       * Scroll Padding Bottom
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pb": [{
        "scroll-pb": S()
      }],
      /**
       * Scroll Padding Left
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pl": [{
        "scroll-pl": S()
      }],
      /**
       * Scroll Snap Align
       * @see https://tailwindcss.com/docs/scroll-snap-align
       */
      "snap-align": [{
        snap: ["start", "end", "center", "align-none"]
      }],
      /**
       * Scroll Snap Stop
       * @see https://tailwindcss.com/docs/scroll-snap-stop
       */
      "snap-stop": [{
        snap: ["normal", "always"]
      }],
      /**
       * Scroll Snap Type
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-type": [{
        snap: ["none", "x", "y", "both"]
      }],
      /**
       * Scroll Snap Type Strictness
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-strictness": [{
        snap: ["mandatory", "proximity"]
      }],
      /**
       * Touch Action
       * @see https://tailwindcss.com/docs/touch-action
       */
      touch: [{
        touch: ["auto", "none", "manipulation"]
      }],
      /**
       * Touch Action X
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-x": [{
        "touch-pan": ["x", "left", "right"]
      }],
      /**
       * Touch Action Y
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-y": [{
        "touch-pan": ["y", "up", "down"]
      }],
      /**
       * Touch Action Pinch Zoom
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-pz": ["touch-pinch-zoom"],
      /**
       * User Select
       * @see https://tailwindcss.com/docs/user-select
       */
      select: [{
        select: ["none", "text", "all", "auto"]
      }],
      /**
       * Will Change
       * @see https://tailwindcss.com/docs/will-change
       */
      "will-change": [{
        "will-change": ["auto", "scroll", "contents", "transform", ur]
      }],
      // SVG
      /**
       * Fill
       * @see https://tailwindcss.com/docs/fill
       */
      fill: [{
        fill: [t, "none"]
      }],
      /**
       * Stroke Width
       * @see https://tailwindcss.com/docs/stroke-width
       */
      "stroke-w": [{
        stroke: [bo, na, Hm]
      }],
      /**
       * Stroke
       * @see https://tailwindcss.com/docs/stroke
       */
      stroke: [{
        stroke: [t, "none"]
      }],
      // Accessibility
      /**
       * Screen Readers
       * @see https://tailwindcss.com/docs/screen-readers
       */
      sr: ["sr-only", "not-sr-only"],
      /**
       * Forced Color Adjust
       * @see https://tailwindcss.com/docs/forced-color-adjust
       */
      "forced-color-adjust": [{
        "forced-color-adjust": ["auto", "none"]
      }]
    },
    conflictingClassGroups: {
      overflow: ["overflow-x", "overflow-y"],
      overscroll: ["overscroll-x", "overscroll-y"],
      inset: ["inset-x", "inset-y", "start", "end", "top", "right", "bottom", "left"],
      "inset-x": ["right", "left"],
      "inset-y": ["top", "bottom"],
      flex: ["basis", "grow", "shrink"],
      gap: ["gap-x", "gap-y"],
      p: ["px", "py", "ps", "pe", "pt", "pr", "pb", "pl"],
      px: ["pr", "pl"],
      py: ["pt", "pb"],
      m: ["mx", "my", "ms", "me", "mt", "mr", "mb", "ml"],
      mx: ["mr", "ml"],
      my: ["mt", "mb"],
      size: ["w", "h"],
      "font-size": ["leading"],
      "fvn-normal": ["fvn-ordinal", "fvn-slashed-zero", "fvn-figure", "fvn-spacing", "fvn-fraction"],
      "fvn-ordinal": ["fvn-normal"],
      "fvn-slashed-zero": ["fvn-normal"],
      "fvn-figure": ["fvn-normal"],
      "fvn-spacing": ["fvn-normal"],
      "fvn-fraction": ["fvn-normal"],
      "line-clamp": ["display", "overflow"],
      rounded: ["rounded-s", "rounded-e", "rounded-t", "rounded-r", "rounded-b", "rounded-l", "rounded-ss", "rounded-se", "rounded-ee", "rounded-es", "rounded-tl", "rounded-tr", "rounded-br", "rounded-bl"],
      "rounded-s": ["rounded-ss", "rounded-es"],
      "rounded-e": ["rounded-se", "rounded-ee"],
      "rounded-t": ["rounded-tl", "rounded-tr"],
      "rounded-r": ["rounded-tr", "rounded-br"],
      "rounded-b": ["rounded-br", "rounded-bl"],
      "rounded-l": ["rounded-tl", "rounded-bl"],
      "border-spacing": ["border-spacing-x", "border-spacing-y"],
      "border-w": ["border-w-s", "border-w-e", "border-w-t", "border-w-r", "border-w-b", "border-w-l"],
      "border-w-x": ["border-w-r", "border-w-l"],
      "border-w-y": ["border-w-t", "border-w-b"],
      "border-color": ["border-color-s", "border-color-e", "border-color-t", "border-color-r", "border-color-b", "border-color-l"],
      "border-color-x": ["border-color-r", "border-color-l"],
      "border-color-y": ["border-color-t", "border-color-b"],
      "scroll-m": ["scroll-mx", "scroll-my", "scroll-ms", "scroll-me", "scroll-mt", "scroll-mr", "scroll-mb", "scroll-ml"],
      "scroll-mx": ["scroll-mr", "scroll-ml"],
      "scroll-my": ["scroll-mt", "scroll-mb"],
      "scroll-p": ["scroll-px", "scroll-py", "scroll-ps", "scroll-pe", "scroll-pt", "scroll-pr", "scroll-pb", "scroll-pl"],
      "scroll-px": ["scroll-pr", "scroll-pl"],
      "scroll-py": ["scroll-pt", "scroll-pb"],
      touch: ["touch-x", "touch-y", "touch-pz"],
      "touch-x": ["touch"],
      "touch-y": ["touch"],
      "touch-pz": ["touch"]
    },
    conflictingClassGroupModifiers: {
      "font-size": ["leading"]
    }
  };
}, Pne = /* @__PURE__ */ ane(Ane);
function Oo(...t) {
  return Pne(Gre(t));
}
function P9(t) {
  const { className: e } = t;
  return /* @__PURE__ */ pe.jsxs("div", { className: Oo("xc-flex xc-items-center xc-gap-2"), children: [
    /* @__PURE__ */ pe.jsx("hr", { className: Oo("xc-flex-1 xc-border-gray-200", e) }),
    /* @__PURE__ */ pe.jsx("div", { className: "xc-shrink-0", children: t.children }),
    /* @__PURE__ */ pe.jsx("hr", { className: Oo("xc-flex-1 xc-border-gray-200", e) })
  ] });
}
const Mne = "https://static.codatta.io/codatta-connect/wallet-icons.svg?v=2#ton";
function Ine(t) {
  const { onClick: e } = t;
  function r() {
    e && e();
  }
  return /* @__PURE__ */ pe.jsx(P9, { className: "xc-opacity-20", children: /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-items-center xc-gap-2 xc-cursor-pointer", onClick: r, children: [
    /* @__PURE__ */ pe.jsx("span", { className: "xc-text-sm", children: "View more wallets" }),
    /* @__PURE__ */ pe.jsx(WS, { size: 16 })
  ] }) });
}
function M9(t) {
  const [e, r] = Qt(""), { featuredWallets: n, initialized: i } = mp(), { onEmailConfirm: s, onSelectWallet: o, onSelectMoreWallets: a, onSelectTonConnect: u, config: l } = t, d = wi(() => {
    const N = /[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\u{20000}-\u{2a6df}]|[\u{2a700}-\u{2b73f}]|[\u{2b740}-\u{2b81f}]|[\u{2b820}-\u{2ceaf}]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]/gu, L = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return !N.test(e) && L.test(e);
  }, [e]);
  function p(N) {
    o(N);
  }
  function w(N) {
    r(N.target.value);
  }
  async function A() {
    s(e);
  }
  function M(N) {
    N.key === "Enter" && d && A();
  }
  return /* @__PURE__ */ pe.jsx(Ms, { children: i && /* @__PURE__ */ pe.jsxs(pe.Fragment, { children: [
    t.header || /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-6 xc-text-xl xc-font-bold", children: "Log in or sign up" }),
    /* @__PURE__ */ pe.jsxs("div", { children: [
      /* @__PURE__ */ pe.jsxs("div", { className: "xc-mb-4 xc-flex xc-max-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar", children: [
        l.showFeaturedWallets && n && n.map((N) => /* @__PURE__ */ pe.jsx(
          y9,
          {
            wallet: N,
            onClick: p
          },
          `feature-${N.key}`
        )),
        l.showTonConnect && /* @__PURE__ */ pe.jsx(
          oy,
          {
            icon: /* @__PURE__ */ pe.jsx("img", { className: "xc-h-5 xc-w-5", src: Mne }),
            title: "TON Connect",
            onClick: u
          }
        )
      ] }),
      l.showMoreWallets && /* @__PURE__ */ pe.jsx(Ine, { onClick: a })
    ] }),
    l.showEmailSignIn && (l.showFeaturedWallets || l.showTonConnect) && /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-4 xc-mt-4", children: /* @__PURE__ */ pe.jsxs(P9, { className: "xc-opacity-20", children: [
      " ",
      /* @__PURE__ */ pe.jsx("span", { className: "xc-text-sm xc-opacity-20", children: "OR" })
    ] }) }),
    l.showEmailSignIn && /* @__PURE__ */ pe.jsxs("div", { className: "xc-mb-4", children: [
      /* @__PURE__ */ pe.jsx("input", { className: "xc-w-full xc-bg-transparent xc-border-white xc-border xc-border-opacity-15 xc-h-10 xc-rounded-lg xc-px-3 xc-mb-3", placeholder: "Enter your email", type: "email", onChange: w, onKeyDown: M }),
      /* @__PURE__ */ pe.jsx("button", { disabled: !d, className: "xc-bg-[rgb(135,93,255)] xc-text-white xc-w-full xc-rounded-lg xc-py-2 disabled:xc-bg-opacity-10 disabled:xc-text-opacity-50 disabled:xc-bg-white xc-transition-all", onClick: A, children: "Continue" })
    ] })
  ] }) });
}
function Pc(t) {
  const { title: e } = t;
  return /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-items-center xc-gap-2", children: [
    /* @__PURE__ */ pe.jsx(lZ, { onClick: t.onBack, size: 20, className: "xc-cursor-pointer" }),
    /* @__PURE__ */ pe.jsx("span", { children: e })
  ] });
}
const I9 = Sa({
  channel: "",
  device: "WEB",
  app: "",
  inviterCode: ""
});
function cy() {
  return Tn(I9);
}
function Cne(t) {
  const { config: e } = t, [r, n] = Qt(e.channel), [i, s] = Qt(e.device), [o, a] = Qt(e.app), [u, l] = Qt(e.inviterCode);
  return Dn(() => {
    n(e.channel), s(e.device), a(e.app), l(e.inviterCode);
  }, [e]), /* @__PURE__ */ pe.jsx(
    I9.Provider,
    {
      value: {
        channel: r,
        device: i,
        app: o,
        inviterCode: u
      },
      children: t.children
    }
  );
}
var Tne = Object.defineProperty, Rne = Object.defineProperties, Dne = Object.getOwnPropertyDescriptors, S0 = Object.getOwnPropertySymbols, C9 = Object.prototype.hasOwnProperty, T9 = Object.prototype.propertyIsEnumerable, u5 = (t, e, r) => e in t ? Tne(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, One = (t, e) => {
  for (var r in e || (e = {})) C9.call(e, r) && u5(t, r, e[r]);
  if (S0) for (var r of S0(e)) T9.call(e, r) && u5(t, r, e[r]);
  return t;
}, Nne = (t, e) => Rne(t, Dne(e)), Lne = (t, e) => {
  var r = {};
  for (var n in t) C9.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]);
  if (t != null && S0) for (var n of S0(t)) e.indexOf(n) < 0 && T9.call(t, n) && (r[n] = t[n]);
  return r;
};
function kne(t) {
  let e = setTimeout(t, 0), r = setTimeout(t, 10), n = setTimeout(t, 50);
  return [e, r, n];
}
function $ne(t) {
  let e = Gt.useRef();
  return Gt.useEffect(() => {
    e.current = t;
  }), e.current;
}
var Bne = 18, R9 = 40, Fne = `${R9}px`, jne = ["[data-lastpass-icon-root]", "com-1password-button", "[data-dashlanecreated]", '[style$="2147483647 !important;"]'].join(",");
function Une({ containerRef: t, inputRef: e, pushPasswordManagerStrategy: r, isFocused: n }) {
  let [i, s] = Gt.useState(!1), [o, a] = Gt.useState(!1), [u, l] = Gt.useState(!1), d = Gt.useMemo(() => r === "none" ? !1 : (r === "increase-width" || r === "experimental-no-flickering") && i && o, [i, o, r]), p = Gt.useCallback(() => {
    let w = t.current, A = e.current;
    if (!w || !A || u || r === "none") return;
    let M = w, N = M.getBoundingClientRect().left + M.offsetWidth, L = M.getBoundingClientRect().top + M.offsetHeight / 2, B = N - Bne, $ = L;
    document.querySelectorAll(jne).length === 0 && document.elementFromPoint(B, $) === w || (s(!0), l(!0));
  }, [t, e, u, r]);
  return Gt.useEffect(() => {
    let w = t.current;
    if (!w || r === "none") return;
    function A() {
      let N = window.innerWidth - w.getBoundingClientRect().right;
      a(N >= R9);
    }
    A();
    let M = setInterval(A, 1e3);
    return () => {
      clearInterval(M);
    };
  }, [t, r]), Gt.useEffect(() => {
    let w = n || document.activeElement === e.current;
    if (r === "none" || !w) return;
    let A = setTimeout(p, 0), M = setTimeout(p, 2e3), N = setTimeout(p, 5e3), L = setTimeout(() => {
      l(!0);
    }, 6e3);
    return () => {
      clearTimeout(A), clearTimeout(M), clearTimeout(N), clearTimeout(L);
    };
  }, [e, n, r, p]), { hasPWMBadge: i, willPushPWMBadge: d, PWM_BADGE_SPACE_WIDTH: Fne };
}
var D9 = Gt.createContext({}), O9 = Gt.forwardRef((t, e) => {
  var r = t, { value: n, onChange: i, maxLength: s, textAlign: o = "left", pattern: a, placeholder: u, inputMode: l = "numeric", onComplete: d, pushPasswordManagerStrategy: p = "increase-width", pasteTransformer: w, containerClassName: A, noScriptCSSFallback: M = qne, render: N, children: L } = r, B = Lne(r, ["value", "onChange", "maxLength", "textAlign", "pattern", "placeholder", "inputMode", "onComplete", "pushPasswordManagerStrategy", "pasteTransformer", "containerClassName", "noScriptCSSFallback", "render", "children"]), $, H, W, V, te;
  let [R, K] = Gt.useState(typeof B.defaultValue == "string" ? B.defaultValue : ""), ge = n ?? R, Ee = $ne(ge), Y = Gt.useCallback((ie) => {
    i == null || i(ie), K(ie);
  }, [i]), S = Gt.useMemo(() => a ? typeof a == "string" ? new RegExp(a) : a : null, [a]), m = Gt.useRef(null), f = Gt.useRef(null), g = Gt.useRef({ value: ge, onChange: Y, isIOS: typeof window < "u" && ((H = ($ = window == null ? void 0 : window.CSS) == null ? void 0 : $.supports) == null ? void 0 : H.call($, "-webkit-touch-callout", "none")) }), b = Gt.useRef({ prev: [(W = m.current) == null ? void 0 : W.selectionStart, (V = m.current) == null ? void 0 : V.selectionEnd, (te = m.current) == null ? void 0 : te.selectionDirection] });
  Gt.useImperativeHandle(e, () => m.current, []), Gt.useEffect(() => {
    let ie = m.current, ue = f.current;
    if (!ie || !ue) return;
    g.current.value !== ie.value && g.current.onChange(ie.value), b.current.prev = [ie.selectionStart, ie.selectionEnd, ie.selectionDirection];
    function ve() {
      if (document.activeElement !== ie) {
        I(null), ce(null);
        return;
      }
      let Ce = ie.selectionStart, $e = ie.selectionEnd, Me = ie.selectionDirection, Ne = ie.maxLength, Ke = ie.value, Le = b.current.prev, qe = -1, ze = -1, _e;
      if (Ke.length !== 0 && Ce !== null && $e !== null) {
        let Qe = Ce === $e, tt = Ce === Ke.length && Ke.length < Ne;
        if (Qe && !tt) {
          let Ye = Ce;
          if (Ye === 0) qe = 0, ze = 1, _e = "forward";
          else if (Ye === Ne) qe = Ye - 1, ze = Ye, _e = "backward";
          else if (Ne > 1 && Ke.length > 1) {
            let dt = 0;
            if (Le[0] !== null && Le[1] !== null) {
              _e = Ye < Le[1] ? "backward" : "forward";
              let lt = Le[0] === Le[1] && Le[0] < Ne;
              _e === "backward" && !lt && (dt = -1);
            }
            qe = dt + Ye, ze = dt + Ye + 1;
          }
        }
        qe !== -1 && ze !== -1 && qe !== ze && m.current.setSelectionRange(qe, ze, _e);
      }
      let Ze = qe !== -1 ? qe : Ce, at = ze !== -1 ? ze : $e, ke = _e ?? Me;
      I(Ze), ce(at), b.current.prev = [Ze, at, ke];
    }
    if (document.addEventListener("selectionchange", ve, { capture: !0 }), ve(), document.activeElement === ie && v(!0), !document.getElementById("input-otp-style")) {
      let Ce = document.createElement("style");
      if (Ce.id = "input-otp-style", document.head.appendChild(Ce), Ce.sheet) {
        let $e = "background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";
        kf(Ce.sheet, "[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"), kf(Ce.sheet, `[data-input-otp]:autofill { ${$e} }`), kf(Ce.sheet, `[data-input-otp]:-webkit-autofill { ${$e} }`), kf(Ce.sheet, "@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"), kf(Ce.sheet, "[data-input-otp] + * { pointer-events: all !important; }");
      }
    }
    let Pe = () => {
      ue && ue.style.setProperty("--root-height", `${ie.clientHeight}px`);
    };
    Pe();
    let De = new ResizeObserver(Pe);
    return De.observe(ie), () => {
      document.removeEventListener("selectionchange", ve, { capture: !0 }), De.disconnect();
    };
  }, []);
  let [x, _] = Gt.useState(!1), [E, v] = Gt.useState(!1), [P, I] = Gt.useState(null), [F, ce] = Gt.useState(null);
  Gt.useEffect(() => {
    kne(() => {
      var ie, ue, ve, Pe;
      (ie = m.current) == null || ie.dispatchEvent(new Event("input"));
      let De = (ue = m.current) == null ? void 0 : ue.selectionStart, Ce = (ve = m.current) == null ? void 0 : ve.selectionEnd, $e = (Pe = m.current) == null ? void 0 : Pe.selectionDirection;
      De !== null && Ce !== null && (I(De), ce(Ce), b.current.prev = [De, Ce, $e]);
    });
  }, [ge, E]), Gt.useEffect(() => {
    Ee !== void 0 && ge !== Ee && Ee.length < s && ge.length === s && (d == null || d(ge));
  }, [s, d, Ee, ge]);
  let D = Une({ containerRef: f, inputRef: m, pushPasswordManagerStrategy: p, isFocused: E }), oe = Gt.useCallback((ie) => {
    let ue = ie.currentTarget.value.slice(0, s);
    if (ue.length > 0 && S && !S.test(ue)) {
      ie.preventDefault();
      return;
    }
    typeof Ee == "string" && ue.length < Ee.length && document.dispatchEvent(new Event("selectionchange")), Y(ue);
  }, [s, Y, Ee, S]), Z = Gt.useCallback(() => {
    var ie;
    if (m.current) {
      let ue = Math.min(m.current.value.length, s - 1), ve = m.current.value.length;
      (ie = m.current) == null || ie.setSelectionRange(ue, ve), I(ue), ce(ve);
    }
    v(!0);
  }, [s]), J = Gt.useCallback((ie) => {
    var ue, ve;
    let Pe = m.current;
    if (!w && (!g.current.isIOS || !ie.clipboardData || !Pe)) return;
    let De = ie.clipboardData.getData("text/plain"), Ce = w ? w(De) : De;
    console.log({ _content: De, content: Ce }), ie.preventDefault();
    let $e = (ue = m.current) == null ? void 0 : ue.selectionStart, Me = (ve = m.current) == null ? void 0 : ve.selectionEnd, Ne = ($e !== Me ? ge.slice(0, $e) + Ce + ge.slice(Me) : ge.slice(0, $e) + Ce + ge.slice($e)).slice(0, s);
    if (Ne.length > 0 && S && !S.test(Ne)) return;
    Pe.value = Ne, Y(Ne);
    let Ke = Math.min(Ne.length, s - 1), Le = Ne.length;
    Pe.setSelectionRange(Ke, Le), I(Ke), ce(Le);
  }, [s, Y, S, ge]), Q = Gt.useMemo(() => ({ position: "relative", cursor: B.disabled ? "default" : "text", userSelect: "none", WebkitUserSelect: "none", pointerEvents: "none" }), [B.disabled]), T = Gt.useMemo(() => ({ position: "absolute", inset: 0, width: D.willPushPWMBadge ? `calc(100% + ${D.PWM_BADGE_SPACE_WIDTH})` : "100%", clipPath: D.willPushPWMBadge ? `inset(0 ${D.PWM_BADGE_SPACE_WIDTH} 0 0)` : void 0, height: "100%", display: "flex", textAlign: o, opacity: "1", color: "transparent", pointerEvents: "all", background: "transparent", caretColor: "transparent", border: "0 solid transparent", outline: "0 solid transparent", boxShadow: "none", lineHeight: "1", letterSpacing: "-.5em", fontSize: "var(--root-height)", fontFamily: "monospace", fontVariantNumeric: "tabular-nums" }), [D.PWM_BADGE_SPACE_WIDTH, D.willPushPWMBadge, o]), X = Gt.useMemo(() => Gt.createElement("input", Nne(One({ autoComplete: B.autoComplete || "one-time-code" }, B), { "data-input-otp": !0, "data-input-otp-placeholder-shown": ge.length === 0 || void 0, "data-input-otp-mss": P, "data-input-otp-mse": F, inputMode: l, pattern: S == null ? void 0 : S.source, "aria-placeholder": u, style: T, maxLength: s, value: ge, ref: m, onPaste: (ie) => {
    var ue;
    J(ie), (ue = B.onPaste) == null || ue.call(B, ie);
  }, onChange: oe, onMouseOver: (ie) => {
    var ue;
    _(!0), (ue = B.onMouseOver) == null || ue.call(B, ie);
  }, onMouseLeave: (ie) => {
    var ue;
    _(!1), (ue = B.onMouseLeave) == null || ue.call(B, ie);
  }, onFocus: (ie) => {
    var ue;
    Z(), (ue = B.onFocus) == null || ue.call(B, ie);
  }, onBlur: (ie) => {
    var ue;
    v(!1), (ue = B.onBlur) == null || ue.call(B, ie);
  } })), [oe, Z, J, l, T, s, F, P, B, S == null ? void 0 : S.source, ge]), re = Gt.useMemo(() => ({ slots: Array.from({ length: s }).map((ie, ue) => {
    var ve;
    let Pe = E && P !== null && F !== null && (P === F && ue === P || ue >= P && ue < F), De = ge[ue] !== void 0 ? ge[ue] : null, Ce = ge[0] !== void 0 ? null : (ve = u == null ? void 0 : u[ue]) != null ? ve : null;
    return { char: De, placeholderChar: Ce, isActive: Pe, hasFakeCaret: Pe && De === null };
  }), isFocused: E, isHovering: !B.disabled && x }), [E, x, s, F, P, B.disabled, ge]), de = Gt.useMemo(() => N ? N(re) : Gt.createElement(D9.Provider, { value: re }, L), [L, re, N]);
  return Gt.createElement(Gt.Fragment, null, M !== null && Gt.createElement("noscript", null, Gt.createElement("style", null, M)), Gt.createElement("div", { ref: f, "data-input-otp-container": !0, style: Q, className: A }, de, Gt.createElement("div", { style: { position: "absolute", inset: 0, pointerEvents: "none" } }, X)));
});
O9.displayName = "Input";
function kf(t, e) {
  try {
    t.insertRule(e);
  } catch {
    console.error("input-otp could not insert CSS rule:", e);
  }
}
var qne = `
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;
const N9 = Gt.forwardRef(({ className: t, containerClassName: e, ...r }, n) => /* @__PURE__ */ pe.jsx(
  O9,
  {
    ref: n,
    containerClassName: Oo(
      "xc-flex xc-items-center xc-gap-2 xc-has-[:disabled]:opacity-50",
      e
    ),
    className: Oo("disabled:xc-cursor-not-allowed", t),
    ...r
  }
));
N9.displayName = "InputOTP";
const L9 = Gt.forwardRef(({ className: t, ...e }, r) => /* @__PURE__ */ pe.jsx("div", { ref: r, className: Oo("xc-flex xc-items-center", t), ...e }));
L9.displayName = "InputOTPGroup";
const Xa = Gt.forwardRef(({ index: t, className: e, ...r }, n) => {
  const i = Gt.useContext(D9), { char: s, hasFakeCaret: o, isActive: a } = i.slots[t];
  return /* @__PURE__ */ pe.jsxs(
    "div",
    {
      ref: n,
      className: Oo(
        "xc-relative xc-rounded-xl xc-text-2xl xc-flex xc-h-12 xc-w-12 xc-items-center xc-justify-center xc-border xc-border-white xc-border-opacity-20 xc-transition-all",
        a && "xc-z-10 xc-ring-2 xc-ring-ring xc-ring-[rgb(135,93,255)] xc-ring-offset-background",
        e
      ),
      ...r,
      children: [
        s,
        o && /* @__PURE__ */ pe.jsx("div", { className: "xc-pointer-events-none xc-absolute xc-inset-0 xc-flex xc-items-center xc-justify-center", children: /* @__PURE__ */ pe.jsx("div", { className: "xc-h-4 xc-w-px xc-animate-caret-blink xc-bg-foreground xc-duration-1000" }) })
      ]
    }
  );
});
Xa.displayName = "InputOTPSlot";
function zne(t) {
  const { spinning: e, children: r, className: n } = t;
  return /* @__PURE__ */ pe.jsxs("div", { className: "xc-inline-block xc-relative", children: [
    r,
    e && /* @__PURE__ */ pe.jsx("div", { className: Oo("xc-absolute xc-top-0 xc-left-0 xc-w-full xc-h-full xc-bg-black xc-bg-opacity-10 xc-flex xc-items-center xc-justify-center", n), children: /* @__PURE__ */ pe.jsx(mc, { className: "xc-animate-spin" }) })
  ] });
}
function k9(t) {
  const { email: e } = t, [r, n] = Qt(0), [i, s] = Qt(!1), [o, a] = Qt("");
  async function u() {
    n(60);
    const d = setInterval(() => {
      n((p) => p === 0 ? (clearInterval(d), 0) : p - 1);
    }, 1e3);
  }
  async function l(d) {
    if (a(""), !(d.length < 6)) {
      s(!0);
      try {
        await t.onInputCode(e, d);
      } catch (p) {
        a(p.message);
      }
      s(!1);
    }
  }
  return Dn(() => {
    u();
  }, []), /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-12", children: [
      /* @__PURE__ */ pe.jsx(vZ, { className: "xc-mb-4", size: 60 }),
      /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-8 xc-h-16", children: [
        /* @__PURE__ */ pe.jsx("p", { className: "xc-text-lg xc-mb-1", children: "We’ve sent a verification code to" }),
        /* @__PURE__ */ pe.jsx("p", { className: "xc-font-bold xc-text-center", children: e })
      ] }),
      /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-2 xc-h-12", children: /* @__PURE__ */ pe.jsx(zne, { spinning: i, className: "xc-rounded-xl", children: /* @__PURE__ */ pe.jsx(N9, { maxLength: 6, onChange: l, disabled: i, className: "disabled:xc-opacity-20", children: /* @__PURE__ */ pe.jsx(L9, { children: /* @__PURE__ */ pe.jsxs("div", { className: Oo("xc-flex xc-gap-2", i ? "xc-opacity-20" : ""), children: [
        /* @__PURE__ */ pe.jsx(Xa, { index: 0 }),
        /* @__PURE__ */ pe.jsx(Xa, { index: 1 }),
        /* @__PURE__ */ pe.jsx(Xa, { index: 2 }),
        /* @__PURE__ */ pe.jsx(Xa, { index: 3 }),
        /* @__PURE__ */ pe.jsx(Xa, { index: 4 }),
        /* @__PURE__ */ pe.jsx(Xa, { index: 5 })
      ] }) }) }) }) }),
      o && /* @__PURE__ */ pe.jsx("div", { className: "xc-text-[#ff0000] xc-text-center", children: /* @__PURE__ */ pe.jsx("p", { children: o }) })
    ] }),
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-text-center xc-text-sm xc-text-gray-400", children: [
      "Not get it? ",
      r ? `Resend in ${r}s` : /* @__PURE__ */ pe.jsx("button", { id: "sendCodeButton", onClick: t.onResendCode, children: "Send again" })
    ] }),
    /* @__PURE__ */ pe.jsx("div", { id: "captcha-element" })
  ] });
}
function $9(t) {
  const { email: e } = t, [r, n] = Qt(!1), [i, s] = Qt(""), o = wi(() => `xn-btn-${(/* @__PURE__ */ new Date()).getTime()}`, [e]);
  async function a(w, A) {
    n(!0), s(""), await Ta.getEmailCode({ account_type: "email", email: w }, A), n(!1);
  }
  async function u(w) {
    try {
      return await a(e, JSON.stringify(w)), { captchaResult: !0, bizResult: !0 };
    } catch (A) {
      return s(A.message), { captchaResult: !1, bizResult: !1 };
    }
  }
  async function l(w) {
    w && t.onCodeSend();
  }
  const d = Zn();
  function p(w) {
    d.current = w;
  }
  return Dn(() => {
    if (e)
      return window.initAliyunCaptcha({
        SceneId: "tqyu8129d",
        prefix: "1mfsn5f",
        mode: "popup",
        element: "#captcha-element",
        button: `#${o}`,
        captchaVerifyCallback: u,
        onBizResultCallback: l,
        getInstance: p,
        slideStyle: {
          width: 360,
          height: 40
        },
        language: "en",
        region: "cn"
      }), () => {
        var w, A;
        (w = document.getElementById("aliyunCaptcha-mask")) == null || w.remove(), (A = document.getElementById("aliyunCaptcha-window-popup")) == null || A.remove();
      };
  }, [e]), /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-12", children: [
      /* @__PURE__ */ pe.jsx(bZ, { className: "xc-mb-4", size: 60 }),
      /* @__PURE__ */ pe.jsx("button", { className: "xc-border xc-rounded-full xc-bg-white xc-text-black xc-px-8 xc-py-2", id: o, children: r ? /* @__PURE__ */ pe.jsx(mc, { className: "xc-animate-spin" }) : "I'm not a robot" })
    ] }),
    i && /* @__PURE__ */ pe.jsx("div", { className: "xc-text-[#ff0000] xc-text-center", children: /* @__PURE__ */ pe.jsx("p", { children: i }) })
  ] });
}
function Wne(t) {
  const { email: e } = t, r = cy(), [n, i] = Qt("captcha");
  async function s(o, a) {
    const u = await Ta.emailLogin({
      account_type: "email",
      connector: "codatta_email",
      account_enum: "C",
      email_code: a,
      email: o,
      inviter_code: r.inviterCode,
      source: {
        device: r.device,
        channel: r.channel,
        app: r.app
      }
    });
    t.onLogin(u.data);
  }
  return /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-12", children: /* @__PURE__ */ pe.jsx(Pc, { title: "Sign in with email", onBack: t.onBack }) }),
    n === "captcha" && /* @__PURE__ */ pe.jsx($9, { email: e, onCodeSend: () => i("verify-email") }),
    n === "verify-email" && /* @__PURE__ */ pe.jsx(k9, { email: e, onInputCode: s, onResendCode: () => i("captcha") })
  ] });
}
var B9 = { exports: {} };
(function(t, e) {
  (function(r, n) {
    t.exports = n();
  })(gn, () => (() => {
    var r = { 873: (o, a) => {
      var u, l, d = function() {
        var p = function(f, g) {
          var b = f, x = B[g], _ = null, E = 0, v = null, P = [], I = {}, F = function(re, de) {
            _ = function(ie) {
              for (var ue = new Array(ie), ve = 0; ve < ie; ve += 1) {
                ue[ve] = new Array(ie);
                for (var Pe = 0; Pe < ie; Pe += 1) ue[ve][Pe] = null;
              }
              return ue;
            }(E = 4 * b + 17), ce(0, 0), ce(E - 7, 0), ce(0, E - 7), oe(), D(), J(re, de), b >= 7 && Z(re), v == null && (v = T(b, x, P)), Q(v, de);
          }, ce = function(re, de) {
            for (var ie = -1; ie <= 7; ie += 1) if (!(re + ie <= -1 || E <= re + ie)) for (var ue = -1; ue <= 7; ue += 1) de + ue <= -1 || E <= de + ue || (_[re + ie][de + ue] = 0 <= ie && ie <= 6 && (ue == 0 || ue == 6) || 0 <= ue && ue <= 6 && (ie == 0 || ie == 6) || 2 <= ie && ie <= 4 && 2 <= ue && ue <= 4);
          }, D = function() {
            for (var re = 8; re < E - 8; re += 1) _[re][6] == null && (_[re][6] = re % 2 == 0);
            for (var de = 8; de < E - 8; de += 1) _[6][de] == null && (_[6][de] = de % 2 == 0);
          }, oe = function() {
            for (var re = $.getPatternPosition(b), de = 0; de < re.length; de += 1) for (var ie = 0; ie < re.length; ie += 1) {
              var ue = re[de], ve = re[ie];
              if (_[ue][ve] == null) for (var Pe = -2; Pe <= 2; Pe += 1) for (var De = -2; De <= 2; De += 1) _[ue + Pe][ve + De] = Pe == -2 || Pe == 2 || De == -2 || De == 2 || Pe == 0 && De == 0;
            }
          }, Z = function(re) {
            for (var de = $.getBCHTypeNumber(b), ie = 0; ie < 18; ie += 1) {
              var ue = !re && (de >> ie & 1) == 1;
              _[Math.floor(ie / 3)][ie % 3 + E - 8 - 3] = ue;
            }
            for (ie = 0; ie < 18; ie += 1) ue = !re && (de >> ie & 1) == 1, _[ie % 3 + E - 8 - 3][Math.floor(ie / 3)] = ue;
          }, J = function(re, de) {
            for (var ie = x << 3 | de, ue = $.getBCHTypeInfo(ie), ve = 0; ve < 15; ve += 1) {
              var Pe = !re && (ue >> ve & 1) == 1;
              ve < 6 ? _[ve][8] = Pe : ve < 8 ? _[ve + 1][8] = Pe : _[E - 15 + ve][8] = Pe;
            }
            for (ve = 0; ve < 15; ve += 1) Pe = !re && (ue >> ve & 1) == 1, ve < 8 ? _[8][E - ve - 1] = Pe : ve < 9 ? _[8][15 - ve - 1 + 1] = Pe : _[8][15 - ve - 1] = Pe;
            _[E - 8][8] = !re;
          }, Q = function(re, de) {
            for (var ie = -1, ue = E - 1, ve = 7, Pe = 0, De = $.getMaskFunction(de), Ce = E - 1; Ce > 0; Ce -= 2) for (Ce == 6 && (Ce -= 1); ; ) {
              for (var $e = 0; $e < 2; $e += 1) if (_[ue][Ce - $e] == null) {
                var Me = !1;
                Pe < re.length && (Me = (re[Pe] >>> ve & 1) == 1), De(ue, Ce - $e) && (Me = !Me), _[ue][Ce - $e] = Me, (ve -= 1) == -1 && (Pe += 1, ve = 7);
              }
              if ((ue += ie) < 0 || E <= ue) {
                ue -= ie, ie = -ie;
                break;
              }
            }
          }, T = function(re, de, ie) {
            for (var ue = V.getRSBlocks(re, de), ve = te(), Pe = 0; Pe < ie.length; Pe += 1) {
              var De = ie[Pe];
              ve.put(De.getMode(), 4), ve.put(De.getLength(), $.getLengthInBits(De.getMode(), re)), De.write(ve);
            }
            var Ce = 0;
            for (Pe = 0; Pe < ue.length; Pe += 1) Ce += ue[Pe].dataCount;
            if (ve.getLengthInBits() > 8 * Ce) throw "code length overflow. (" + ve.getLengthInBits() + ">" + 8 * Ce + ")";
            for (ve.getLengthInBits() + 4 <= 8 * Ce && ve.put(0, 4); ve.getLengthInBits() % 8 != 0; ) ve.putBit(!1);
            for (; !(ve.getLengthInBits() >= 8 * Ce || (ve.put(236, 8), ve.getLengthInBits() >= 8 * Ce)); ) ve.put(17, 8);
            return function($e, Me) {
              for (var Ne = 0, Ke = 0, Le = 0, qe = new Array(Me.length), ze = new Array(Me.length), _e = 0; _e < Me.length; _e += 1) {
                var Ze = Me[_e].dataCount, at = Me[_e].totalCount - Ze;
                Ke = Math.max(Ke, Ze), Le = Math.max(Le, at), qe[_e] = new Array(Ze);
                for (var ke = 0; ke < qe[_e].length; ke += 1) qe[_e][ke] = 255 & $e.getBuffer()[ke + Ne];
                Ne += Ze;
                var Qe = $.getErrorCorrectPolynomial(at), tt = W(qe[_e], Qe.getLength() - 1).mod(Qe);
                for (ze[_e] = new Array(Qe.getLength() - 1), ke = 0; ke < ze[_e].length; ke += 1) {
                  var Ye = ke + tt.getLength() - ze[_e].length;
                  ze[_e][ke] = Ye >= 0 ? tt.getAt(Ye) : 0;
                }
              }
              var dt = 0;
              for (ke = 0; ke < Me.length; ke += 1) dt += Me[ke].totalCount;
              var lt = new Array(dt), ct = 0;
              for (ke = 0; ke < Ke; ke += 1) for (_e = 0; _e < Me.length; _e += 1) ke < qe[_e].length && (lt[ct] = qe[_e][ke], ct += 1);
              for (ke = 0; ke < Le; ke += 1) for (_e = 0; _e < Me.length; _e += 1) ke < ze[_e].length && (lt[ct] = ze[_e][ke], ct += 1);
              return lt;
            }(ve, ue);
          };
          I.addData = function(re, de) {
            var ie = null;
            switch (de = de || "Byte") {
              case "Numeric":
                ie = R(re);
                break;
              case "Alphanumeric":
                ie = K(re);
                break;
              case "Byte":
                ie = ge(re);
                break;
              case "Kanji":
                ie = Ee(re);
                break;
              default:
                throw "mode:" + de;
            }
            P.push(ie), v = null;
          }, I.isDark = function(re, de) {
            if (re < 0 || E <= re || de < 0 || E <= de) throw re + "," + de;
            return _[re][de];
          }, I.getModuleCount = function() {
            return E;
          }, I.make = function() {
            if (b < 1) {
              for (var re = 1; re < 40; re++) {
                for (var de = V.getRSBlocks(re, x), ie = te(), ue = 0; ue < P.length; ue++) {
                  var ve = P[ue];
                  ie.put(ve.getMode(), 4), ie.put(ve.getLength(), $.getLengthInBits(ve.getMode(), re)), ve.write(ie);
                }
                var Pe = 0;
                for (ue = 0; ue < de.length; ue++) Pe += de[ue].dataCount;
                if (ie.getLengthInBits() <= 8 * Pe) break;
              }
              b = re;
            }
            F(!1, function() {
              for (var De = 0, Ce = 0, $e = 0; $e < 8; $e += 1) {
                F(!0, $e);
                var Me = $.getLostPoint(I);
                ($e == 0 || De > Me) && (De = Me, Ce = $e);
              }
              return Ce;
            }());
          }, I.createTableTag = function(re, de) {
            re = re || 2;
            var ie = "";
            ie += '<table style="', ie += " border-width: 0px; border-style: none;", ie += " border-collapse: collapse;", ie += " padding: 0px; margin: " + (de = de === void 0 ? 4 * re : de) + "px;", ie += '">', ie += "<tbody>";
            for (var ue = 0; ue < I.getModuleCount(); ue += 1) {
              ie += "<tr>";
              for (var ve = 0; ve < I.getModuleCount(); ve += 1) ie += '<td style="', ie += " border-width: 0px; border-style: none;", ie += " border-collapse: collapse;", ie += " padding: 0px; margin: 0px;", ie += " width: " + re + "px;", ie += " height: " + re + "px;", ie += " background-color: ", ie += I.isDark(ue, ve) ? "#000000" : "#ffffff", ie += ";", ie += '"/>';
              ie += "</tr>";
            }
            return (ie += "</tbody>") + "</table>";
          }, I.createSvgTag = function(re, de, ie, ue) {
            var ve = {};
            typeof arguments[0] == "object" && (re = (ve = arguments[0]).cellSize, de = ve.margin, ie = ve.alt, ue = ve.title), re = re || 2, de = de === void 0 ? 4 * re : de, (ie = typeof ie == "string" ? { text: ie } : ie || {}).text = ie.text || null, ie.id = ie.text ? ie.id || "qrcode-description" : null, (ue = typeof ue == "string" ? { text: ue } : ue || {}).text = ue.text || null, ue.id = ue.text ? ue.id || "qrcode-title" : null;
            var Pe, De, Ce, $e, Me = I.getModuleCount() * re + 2 * de, Ne = "";
            for ($e = "l" + re + ",0 0," + re + " -" + re + ",0 0,-" + re + "z ", Ne += '<svg version="1.1" xmlns="http://www.w3.org/2000/svg"', Ne += ve.scalable ? "" : ' width="' + Me + 'px" height="' + Me + 'px"', Ne += ' viewBox="0 0 ' + Me + " " + Me + '" ', Ne += ' preserveAspectRatio="xMinYMin meet"', Ne += ue.text || ie.text ? ' role="img" aria-labelledby="' + X([ue.id, ie.id].join(" ").trim()) + '"' : "", Ne += ">", Ne += ue.text ? '<title id="' + X(ue.id) + '">' + X(ue.text) + "</title>" : "", Ne += ie.text ? '<description id="' + X(ie.id) + '">' + X(ie.text) + "</description>" : "", Ne += '<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>', Ne += '<path d="', De = 0; De < I.getModuleCount(); De += 1) for (Ce = De * re + de, Pe = 0; Pe < I.getModuleCount(); Pe += 1) I.isDark(De, Pe) && (Ne += "M" + (Pe * re + de) + "," + Ce + $e);
            return (Ne += '" stroke="transparent" fill="black"/>') + "</svg>";
          }, I.createDataURL = function(re, de) {
            re = re || 2, de = de === void 0 ? 4 * re : de;
            var ie = I.getModuleCount() * re + 2 * de, ue = de, ve = ie - de;
            return m(ie, ie, function(Pe, De) {
              if (ue <= Pe && Pe < ve && ue <= De && De < ve) {
                var Ce = Math.floor((Pe - ue) / re), $e = Math.floor((De - ue) / re);
                return I.isDark($e, Ce) ? 0 : 1;
              }
              return 1;
            });
          }, I.createImgTag = function(re, de, ie) {
            re = re || 2, de = de === void 0 ? 4 * re : de;
            var ue = I.getModuleCount() * re + 2 * de, ve = "";
            return ve += "<img", ve += ' src="', ve += I.createDataURL(re, de), ve += '"', ve += ' width="', ve += ue, ve += '"', ve += ' height="', ve += ue, ve += '"', ie && (ve += ' alt="', ve += X(ie), ve += '"'), ve + "/>";
          };
          var X = function(re) {
            for (var de = "", ie = 0; ie < re.length; ie += 1) {
              var ue = re.charAt(ie);
              switch (ue) {
                case "<":
                  de += "&lt;";
                  break;
                case ">":
                  de += "&gt;";
                  break;
                case "&":
                  de += "&amp;";
                  break;
                case '"':
                  de += "&quot;";
                  break;
                default:
                  de += ue;
              }
            }
            return de;
          };
          return I.createASCII = function(re, de) {
            if ((re = re || 1) < 2) return function(qe) {
              qe = qe === void 0 ? 2 : qe;
              var ze, _e, Ze, at, ke, Qe = 1 * I.getModuleCount() + 2 * qe, tt = qe, Ye = Qe - qe, dt = { "██": "█", "█ ": "▀", " █": "▄", "  ": " " }, lt = { "██": "▀", "█ ": "▀", " █": " ", "  ": " " }, ct = "";
              for (ze = 0; ze < Qe; ze += 2) {
                for (Ze = Math.floor((ze - tt) / 1), at = Math.floor((ze + 1 - tt) / 1), _e = 0; _e < Qe; _e += 1) ke = "█", tt <= _e && _e < Ye && tt <= ze && ze < Ye && I.isDark(Ze, Math.floor((_e - tt) / 1)) && (ke = " "), tt <= _e && _e < Ye && tt <= ze + 1 && ze + 1 < Ye && I.isDark(at, Math.floor((_e - tt) / 1)) ? ke += " " : ke += "█", ct += qe < 1 && ze + 1 >= Ye ? lt[ke] : dt[ke];
                ct += `
`;
              }
              return Qe % 2 && qe > 0 ? ct.substring(0, ct.length - Qe - 1) + Array(Qe + 1).join("▀") : ct.substring(0, ct.length - 1);
            }(de);
            re -= 1, de = de === void 0 ? 2 * re : de;
            var ie, ue, ve, Pe, De = I.getModuleCount() * re + 2 * de, Ce = de, $e = De - de, Me = Array(re + 1).join("██"), Ne = Array(re + 1).join("  "), Ke = "", Le = "";
            for (ie = 0; ie < De; ie += 1) {
              for (ve = Math.floor((ie - Ce) / re), Le = "", ue = 0; ue < De; ue += 1) Pe = 1, Ce <= ue && ue < $e && Ce <= ie && ie < $e && I.isDark(ve, Math.floor((ue - Ce) / re)) && (Pe = 0), Le += Pe ? Me : Ne;
              for (ve = 0; ve < re; ve += 1) Ke += Le + `
`;
            }
            return Ke.substring(0, Ke.length - 1);
          }, I.renderTo2dContext = function(re, de) {
            de = de || 2;
            for (var ie = I.getModuleCount(), ue = 0; ue < ie; ue++) for (var ve = 0; ve < ie; ve++) re.fillStyle = I.isDark(ue, ve) ? "black" : "white", re.fillRect(ue * de, ve * de, de, de);
          }, I;
        };
        p.stringToBytes = (p.stringToBytesFuncs = { default: function(f) {
          for (var g = [], b = 0; b < f.length; b += 1) {
            var x = f.charCodeAt(b);
            g.push(255 & x);
          }
          return g;
        } }).default, p.createStringToBytes = function(f, g) {
          var b = function() {
            for (var _ = S(f), E = function() {
              var D = _.read();
              if (D == -1) throw "eof";
              return D;
            }, v = 0, P = {}; ; ) {
              var I = _.read();
              if (I == -1) break;
              var F = E(), ce = E() << 8 | E();
              P[String.fromCharCode(I << 8 | F)] = ce, v += 1;
            }
            if (v != g) throw v + " != " + g;
            return P;
          }(), x = 63;
          return function(_) {
            for (var E = [], v = 0; v < _.length; v += 1) {
              var P = _.charCodeAt(v);
              if (P < 128) E.push(P);
              else {
                var I = b[_.charAt(v)];
                typeof I == "number" ? (255 & I) == I ? E.push(I) : (E.push(I >>> 8), E.push(255 & I)) : E.push(x);
              }
            }
            return E;
          };
        };
        var w, A, M, N, L, B = { L: 1, M: 0, Q: 3, H: 2 }, $ = (w = [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]], A = 1335, M = 7973, L = function(f) {
          for (var g = 0; f != 0; ) g += 1, f >>>= 1;
          return g;
        }, (N = {}).getBCHTypeInfo = function(f) {
          for (var g = f << 10; L(g) - L(A) >= 0; ) g ^= A << L(g) - L(A);
          return 21522 ^ (f << 10 | g);
        }, N.getBCHTypeNumber = function(f) {
          for (var g = f << 12; L(g) - L(M) >= 0; ) g ^= M << L(g) - L(M);
          return f << 12 | g;
        }, N.getPatternPosition = function(f) {
          return w[f - 1];
        }, N.getMaskFunction = function(f) {
          switch (f) {
            case 0:
              return function(g, b) {
                return (g + b) % 2 == 0;
              };
            case 1:
              return function(g, b) {
                return g % 2 == 0;
              };
            case 2:
              return function(g, b) {
                return b % 3 == 0;
              };
            case 3:
              return function(g, b) {
                return (g + b) % 3 == 0;
              };
            case 4:
              return function(g, b) {
                return (Math.floor(g / 2) + Math.floor(b / 3)) % 2 == 0;
              };
            case 5:
              return function(g, b) {
                return g * b % 2 + g * b % 3 == 0;
              };
            case 6:
              return function(g, b) {
                return (g * b % 2 + g * b % 3) % 2 == 0;
              };
            case 7:
              return function(g, b) {
                return (g * b % 3 + (g + b) % 2) % 2 == 0;
              };
            default:
              throw "bad maskPattern:" + f;
          }
        }, N.getErrorCorrectPolynomial = function(f) {
          for (var g = W([1], 0), b = 0; b < f; b += 1) g = g.multiply(W([1, H.gexp(b)], 0));
          return g;
        }, N.getLengthInBits = function(f, g) {
          if (1 <= g && g < 10) switch (f) {
            case 1:
              return 10;
            case 2:
              return 9;
            case 4:
            case 8:
              return 8;
            default:
              throw "mode:" + f;
          }
          else if (g < 27) switch (f) {
            case 1:
              return 12;
            case 2:
              return 11;
            case 4:
              return 16;
            case 8:
              return 10;
            default:
              throw "mode:" + f;
          }
          else {
            if (!(g < 41)) throw "type:" + g;
            switch (f) {
              case 1:
                return 14;
              case 2:
                return 13;
              case 4:
                return 16;
              case 8:
                return 12;
              default:
                throw "mode:" + f;
            }
          }
        }, N.getLostPoint = function(f) {
          for (var g = f.getModuleCount(), b = 0, x = 0; x < g; x += 1) for (var _ = 0; _ < g; _ += 1) {
            for (var E = 0, v = f.isDark(x, _), P = -1; P <= 1; P += 1) if (!(x + P < 0 || g <= x + P)) for (var I = -1; I <= 1; I += 1) _ + I < 0 || g <= _ + I || P == 0 && I == 0 || v == f.isDark(x + P, _ + I) && (E += 1);
            E > 5 && (b += 3 + E - 5);
          }
          for (x = 0; x < g - 1; x += 1) for (_ = 0; _ < g - 1; _ += 1) {
            var F = 0;
            f.isDark(x, _) && (F += 1), f.isDark(x + 1, _) && (F += 1), f.isDark(x, _ + 1) && (F += 1), f.isDark(x + 1, _ + 1) && (F += 1), F != 0 && F != 4 || (b += 3);
          }
          for (x = 0; x < g; x += 1) for (_ = 0; _ < g - 6; _ += 1) f.isDark(x, _) && !f.isDark(x, _ + 1) && f.isDark(x, _ + 2) && f.isDark(x, _ + 3) && f.isDark(x, _ + 4) && !f.isDark(x, _ + 5) && f.isDark(x, _ + 6) && (b += 40);
          for (_ = 0; _ < g; _ += 1) for (x = 0; x < g - 6; x += 1) f.isDark(x, _) && !f.isDark(x + 1, _) && f.isDark(x + 2, _) && f.isDark(x + 3, _) && f.isDark(x + 4, _) && !f.isDark(x + 5, _) && f.isDark(x + 6, _) && (b += 40);
          var ce = 0;
          for (_ = 0; _ < g; _ += 1) for (x = 0; x < g; x += 1) f.isDark(x, _) && (ce += 1);
          return b + Math.abs(100 * ce / g / g - 50) / 5 * 10;
        }, N), H = function() {
          for (var f = new Array(256), g = new Array(256), b = 0; b < 8; b += 1) f[b] = 1 << b;
          for (b = 8; b < 256; b += 1) f[b] = f[b - 4] ^ f[b - 5] ^ f[b - 6] ^ f[b - 8];
          for (b = 0; b < 255; b += 1) g[f[b]] = b;
          return { glog: function(x) {
            if (x < 1) throw "glog(" + x + ")";
            return g[x];
          }, gexp: function(x) {
            for (; x < 0; ) x += 255;
            for (; x >= 256; ) x -= 255;
            return f[x];
          } };
        }();
        function W(f, g) {
          if (f.length === void 0) throw f.length + "/" + g;
          var b = function() {
            for (var _ = 0; _ < f.length && f[_] == 0; ) _ += 1;
            for (var E = new Array(f.length - _ + g), v = 0; v < f.length - _; v += 1) E[v] = f[v + _];
            return E;
          }(), x = { getAt: function(_) {
            return b[_];
          }, getLength: function() {
            return b.length;
          }, multiply: function(_) {
            for (var E = new Array(x.getLength() + _.getLength() - 1), v = 0; v < x.getLength(); v += 1) for (var P = 0; P < _.getLength(); P += 1) E[v + P] ^= H.gexp(H.glog(x.getAt(v)) + H.glog(_.getAt(P)));
            return W(E, 0);
          }, mod: function(_) {
            if (x.getLength() - _.getLength() < 0) return x;
            for (var E = H.glog(x.getAt(0)) - H.glog(_.getAt(0)), v = new Array(x.getLength()), P = 0; P < x.getLength(); P += 1) v[P] = x.getAt(P);
            for (P = 0; P < _.getLength(); P += 1) v[P] ^= H.gexp(H.glog(_.getAt(P)) + E);
            return W(v, 0).mod(_);
          } };
          return x;
        }
        var V = /* @__PURE__ */ function() {
          var f = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12, 7, 37, 13], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]], g = function(x, _) {
            var E = {};
            return E.totalCount = x, E.dataCount = _, E;
          }, b = { getRSBlocks: function(x, _) {
            var E = function(Z, J) {
              switch (J) {
                case B.L:
                  return f[4 * (Z - 1) + 0];
                case B.M:
                  return f[4 * (Z - 1) + 1];
                case B.Q:
                  return f[4 * (Z - 1) + 2];
                case B.H:
                  return f[4 * (Z - 1) + 3];
                default:
                  return;
              }
            }(x, _);
            if (E === void 0) throw "bad rs block @ typeNumber:" + x + "/errorCorrectionLevel:" + _;
            for (var v = E.length / 3, P = [], I = 0; I < v; I += 1) for (var F = E[3 * I + 0], ce = E[3 * I + 1], D = E[3 * I + 2], oe = 0; oe < F; oe += 1) P.push(g(ce, D));
            return P;
          } };
          return b;
        }(), te = function() {
          var f = [], g = 0, b = { getBuffer: function() {
            return f;
          }, getAt: function(x) {
            var _ = Math.floor(x / 8);
            return (f[_] >>> 7 - x % 8 & 1) == 1;
          }, put: function(x, _) {
            for (var E = 0; E < _; E += 1) b.putBit((x >>> _ - E - 1 & 1) == 1);
          }, getLengthInBits: function() {
            return g;
          }, putBit: function(x) {
            var _ = Math.floor(g / 8);
            f.length <= _ && f.push(0), x && (f[_] |= 128 >>> g % 8), g += 1;
          } };
          return b;
        }, R = function(f) {
          var g = f, b = { getMode: function() {
            return 1;
          }, getLength: function(E) {
            return g.length;
          }, write: function(E) {
            for (var v = g, P = 0; P + 2 < v.length; ) E.put(x(v.substring(P, P + 3)), 10), P += 3;
            P < v.length && (v.length - P == 1 ? E.put(x(v.substring(P, P + 1)), 4) : v.length - P == 2 && E.put(x(v.substring(P, P + 2)), 7));
          } }, x = function(E) {
            for (var v = 0, P = 0; P < E.length; P += 1) v = 10 * v + _(E.charAt(P));
            return v;
          }, _ = function(E) {
            if ("0" <= E && E <= "9") return E.charCodeAt(0) - 48;
            throw "illegal char :" + E;
          };
          return b;
        }, K = function(f) {
          var g = f, b = { getMode: function() {
            return 2;
          }, getLength: function(_) {
            return g.length;
          }, write: function(_) {
            for (var E = g, v = 0; v + 1 < E.length; ) _.put(45 * x(E.charAt(v)) + x(E.charAt(v + 1)), 11), v += 2;
            v < E.length && _.put(x(E.charAt(v)), 6);
          } }, x = function(_) {
            if ("0" <= _ && _ <= "9") return _.charCodeAt(0) - 48;
            if ("A" <= _ && _ <= "Z") return _.charCodeAt(0) - 65 + 10;
            switch (_) {
              case " ":
                return 36;
              case "$":
                return 37;
              case "%":
                return 38;
              case "*":
                return 39;
              case "+":
                return 40;
              case "-":
                return 41;
              case ".":
                return 42;
              case "/":
                return 43;
              case ":":
                return 44;
              default:
                throw "illegal char :" + _;
            }
          };
          return b;
        }, ge = function(f) {
          var g = p.stringToBytes(f);
          return { getMode: function() {
            return 4;
          }, getLength: function(b) {
            return g.length;
          }, write: function(b) {
            for (var x = 0; x < g.length; x += 1) b.put(g[x], 8);
          } };
        }, Ee = function(f) {
          var g = p.stringToBytesFuncs.SJIS;
          if (!g) throw "sjis not supported.";
          (function() {
            var _ = g("友");
            if (_.length != 2 || (_[0] << 8 | _[1]) != 38726) throw "sjis not supported.";
          })();
          var b = g(f), x = { getMode: function() {
            return 8;
          }, getLength: function(_) {
            return ~~(b.length / 2);
          }, write: function(_) {
            for (var E = b, v = 0; v + 1 < E.length; ) {
              var P = (255 & E[v]) << 8 | 255 & E[v + 1];
              if (33088 <= P && P <= 40956) P -= 33088;
              else {
                if (!(57408 <= P && P <= 60351)) throw "illegal char at " + (v + 1) + "/" + P;
                P -= 49472;
              }
              P = 192 * (P >>> 8 & 255) + (255 & P), _.put(P, 13), v += 2;
            }
            if (v < E.length) throw "illegal char at " + (v + 1);
          } };
          return x;
        }, Y = function() {
          var f = [], g = { writeByte: function(b) {
            f.push(255 & b);
          }, writeShort: function(b) {
            g.writeByte(b), g.writeByte(b >>> 8);
          }, writeBytes: function(b, x, _) {
            x = x || 0, _ = _ || b.length;
            for (var E = 0; E < _; E += 1) g.writeByte(b[E + x]);
          }, writeString: function(b) {
            for (var x = 0; x < b.length; x += 1) g.writeByte(b.charCodeAt(x));
          }, toByteArray: function() {
            return f;
          }, toString: function() {
            var b = "";
            b += "[";
            for (var x = 0; x < f.length; x += 1) x > 0 && (b += ","), b += f[x];
            return b + "]";
          } };
          return g;
        }, S = function(f) {
          var g = f, b = 0, x = 0, _ = 0, E = { read: function() {
            for (; _ < 8; ) {
              if (b >= g.length) {
                if (_ == 0) return -1;
                throw "unexpected end of file./" + _;
              }
              var P = g.charAt(b);
              if (b += 1, P == "=") return _ = 0, -1;
              P.match(/^\s$/) || (x = x << 6 | v(P.charCodeAt(0)), _ += 6);
            }
            var I = x >>> _ - 8 & 255;
            return _ -= 8, I;
          } }, v = function(P) {
            if (65 <= P && P <= 90) return P - 65;
            if (97 <= P && P <= 122) return P - 97 + 26;
            if (48 <= P && P <= 57) return P - 48 + 52;
            if (P == 43) return 62;
            if (P == 47) return 63;
            throw "c:" + P;
          };
          return E;
        }, m = function(f, g, b) {
          for (var x = function(ce, D) {
            var oe = ce, Z = D, J = new Array(ce * D), Q = { setPixel: function(re, de, ie) {
              J[de * oe + re] = ie;
            }, write: function(re) {
              re.writeString("GIF87a"), re.writeShort(oe), re.writeShort(Z), re.writeByte(128), re.writeByte(0), re.writeByte(0), re.writeByte(0), re.writeByte(0), re.writeByte(0), re.writeByte(255), re.writeByte(255), re.writeByte(255), re.writeString(","), re.writeShort(0), re.writeShort(0), re.writeShort(oe), re.writeShort(Z), re.writeByte(0);
              var de = T(2);
              re.writeByte(2);
              for (var ie = 0; de.length - ie > 255; ) re.writeByte(255), re.writeBytes(de, ie, 255), ie += 255;
              re.writeByte(de.length - ie), re.writeBytes(de, ie, de.length - ie), re.writeByte(0), re.writeString(";");
            } }, T = function(re) {
              for (var de = 1 << re, ie = 1 + (1 << re), ue = re + 1, ve = X(), Pe = 0; Pe < de; Pe += 1) ve.add(String.fromCharCode(Pe));
              ve.add(String.fromCharCode(de)), ve.add(String.fromCharCode(ie));
              var De, Ce, $e, Me = Y(), Ne = (De = Me, Ce = 0, $e = 0, { write: function(ze, _e) {
                if (ze >>> _e) throw "length over";
                for (; Ce + _e >= 8; ) De.writeByte(255 & (ze << Ce | $e)), _e -= 8 - Ce, ze >>>= 8 - Ce, $e = 0, Ce = 0;
                $e |= ze << Ce, Ce += _e;
              }, flush: function() {
                Ce > 0 && De.writeByte($e);
              } });
              Ne.write(de, ue);
              var Ke = 0, Le = String.fromCharCode(J[Ke]);
              for (Ke += 1; Ke < J.length; ) {
                var qe = String.fromCharCode(J[Ke]);
                Ke += 1, ve.contains(Le + qe) ? Le += qe : (Ne.write(ve.indexOf(Le), ue), ve.size() < 4095 && (ve.size() == 1 << ue && (ue += 1), ve.add(Le + qe)), Le = qe);
              }
              return Ne.write(ve.indexOf(Le), ue), Ne.write(ie, ue), Ne.flush(), Me.toByteArray();
            }, X = function() {
              var re = {}, de = 0, ie = { add: function(ue) {
                if (ie.contains(ue)) throw "dup key:" + ue;
                re[ue] = de, de += 1;
              }, size: function() {
                return de;
              }, indexOf: function(ue) {
                return re[ue];
              }, contains: function(ue) {
                return re[ue] !== void 0;
              } };
              return ie;
            };
            return Q;
          }(f, g), _ = 0; _ < g; _ += 1) for (var E = 0; E < f; E += 1) x.setPixel(E, _, b(E, _));
          var v = Y();
          x.write(v);
          for (var P = function() {
            var ce = 0, D = 0, oe = 0, Z = "", J = {}, Q = function(X) {
              Z += String.fromCharCode(T(63 & X));
            }, T = function(X) {
              if (!(X < 0)) {
                if (X < 26) return 65 + X;
                if (X < 52) return X - 26 + 97;
                if (X < 62) return X - 52 + 48;
                if (X == 62) return 43;
                if (X == 63) return 47;
              }
              throw "n:" + X;
            };
            return J.writeByte = function(X) {
              for (ce = ce << 8 | 255 & X, D += 8, oe += 1; D >= 6; ) Q(ce >>> D - 6), D -= 6;
            }, J.flush = function() {
              if (D > 0 && (Q(ce << 6 - D), ce = 0, D = 0), oe % 3 != 0) for (var X = 3 - oe % 3, re = 0; re < X; re += 1) Z += "=";
            }, J.toString = function() {
              return Z;
            }, J;
          }(), I = v.toByteArray(), F = 0; F < I.length; F += 1) P.writeByte(I[F]);
          return P.flush(), "data:image/gif;base64," + P;
        };
        return p;
      }();
      d.stringToBytesFuncs["UTF-8"] = function(p) {
        return function(w) {
          for (var A = [], M = 0; M < w.length; M++) {
            var N = w.charCodeAt(M);
            N < 128 ? A.push(N) : N < 2048 ? A.push(192 | N >> 6, 128 | 63 & N) : N < 55296 || N >= 57344 ? A.push(224 | N >> 12, 128 | N >> 6 & 63, 128 | 63 & N) : (M++, N = 65536 + ((1023 & N) << 10 | 1023 & w.charCodeAt(M)), A.push(240 | N >> 18, 128 | N >> 12 & 63, 128 | N >> 6 & 63, 128 | 63 & N));
          }
          return A;
        }(p);
      }, (l = typeof (u = function() {
        return d;
      }) == "function" ? u.apply(a, []) : u) === void 0 || (o.exports = l);
    } }, n = {};
    function i(o) {
      var a = n[o];
      if (a !== void 0) return a.exports;
      var u = n[o] = { exports: {} };
      return r[o](u, u.exports, i), u.exports;
    }
    i.n = (o) => {
      var a = o && o.__esModule ? () => o.default : () => o;
      return i.d(a, { a }), a;
    }, i.d = (o, a) => {
      for (var u in a) i.o(a, u) && !i.o(o, u) && Object.defineProperty(o, u, { enumerable: !0, get: a[u] });
    }, i.o = (o, a) => Object.prototype.hasOwnProperty.call(o, a);
    var s = {};
    return (() => {
      i.d(s, { default: () => Y });
      const o = (S) => !!S && typeof S == "object" && !Array.isArray(S);
      function a(S, ...m) {
        if (!m.length) return S;
        const f = m.shift();
        return f !== void 0 && o(S) && o(f) ? (S = Object.assign({}, S), Object.keys(f).forEach((g) => {
          const b = S[g], x = f[g];
          Array.isArray(b) && Array.isArray(x) ? S[g] = x : o(b) && o(x) ? S[g] = a(Object.assign({}, b), x) : S[g] = x;
        }), a(S, ...m)) : S;
      }
      function u(S, m) {
        const f = document.createElement("a");
        f.download = m, f.href = S, document.body.appendChild(f), f.click(), document.body.removeChild(f);
      }
      const l = { L: 0.07, M: 0.15, Q: 0.25, H: 0.3 };
      class d {
        constructor({ svg: m, type: f, window: g }) {
          this._svg = m, this._type = f, this._window = g;
        }
        draw(m, f, g, b) {
          let x;
          switch (this._type) {
            case "dots":
              x = this._drawDot;
              break;
            case "classy":
              x = this._drawClassy;
              break;
            case "classy-rounded":
              x = this._drawClassyRounded;
              break;
            case "rounded":
              x = this._drawRounded;
              break;
            case "extra-rounded":
              x = this._drawExtraRounded;
              break;
            default:
              x = this._drawSquare;
          }
          x.call(this, { x: m, y: f, size: g, getNeighbor: b });
        }
        _rotateFigure({ x: m, y: f, size: g, rotation: b = 0, draw: x }) {
          var _;
          const E = m + g / 2, v = f + g / 2;
          x(), (_ = this._element) === null || _ === void 0 || _.setAttribute("transform", `rotate(${180 * b / Math.PI},${E},${v})`);
        }
        _basicDot(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "circle"), this._element.setAttribute("cx", String(g + f / 2)), this._element.setAttribute("cy", String(b + f / 2)), this._element.setAttribute("r", String(f / 2));
          } }));
        }
        _basicSquare(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect"), this._element.setAttribute("x", String(g)), this._element.setAttribute("y", String(b)), this._element.setAttribute("width", String(f)), this._element.setAttribute("height", String(f));
          } }));
        }
        _basicSideRounded(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${g} ${b}v ${f}h ` + f / 2 + `a ${f / 2} ${f / 2}, 0, 0, 0, 0 ${-f}`);
          } }));
        }
        _basicCornerRounded(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${g} ${b}v ${f}h ${f}v ` + -f / 2 + `a ${f / 2} ${f / 2}, 0, 0, 0, ${-f / 2} ${-f / 2}`);
          } }));
        }
        _basicCornerExtraRounded(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${g} ${b}v ${f}h ${f}a ${f} ${f}, 0, 0, 0, ${-f} ${-f}`);
          } }));
        }
        _basicCornersRounded(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${g} ${b}v ` + f / 2 + `a ${f / 2} ${f / 2}, 0, 0, 0, ${f / 2} ${f / 2}h ` + f / 2 + "v " + -f / 2 + `a ${f / 2} ${f / 2}, 0, 0, 0, ${-f / 2} ${-f / 2}`);
          } }));
        }
        _drawDot({ x: m, y: f, size: g }) {
          this._basicDot({ x: m, y: f, size: g, rotation: 0 });
        }
        _drawSquare({ x: m, y: f, size: g }) {
          this._basicSquare({ x: m, y: f, size: g, rotation: 0 });
        }
        _drawRounded({ x: m, y: f, size: g, getNeighbor: b }) {
          const x = b ? +b(-1, 0) : 0, _ = b ? +b(1, 0) : 0, E = b ? +b(0, -1) : 0, v = b ? +b(0, 1) : 0, P = x + _ + E + v;
          if (P !== 0) if (P > 2 || x && _ || E && v) this._basicSquare({ x: m, y: f, size: g, rotation: 0 });
          else {
            if (P === 2) {
              let I = 0;
              return x && E ? I = Math.PI / 2 : E && _ ? I = Math.PI : _ && v && (I = -Math.PI / 2), void this._basicCornerRounded({ x: m, y: f, size: g, rotation: I });
            }
            if (P === 1) {
              let I = 0;
              return E ? I = Math.PI / 2 : _ ? I = Math.PI : v && (I = -Math.PI / 2), void this._basicSideRounded({ x: m, y: f, size: g, rotation: I });
            }
          }
          else this._basicDot({ x: m, y: f, size: g, rotation: 0 });
        }
        _drawExtraRounded({ x: m, y: f, size: g, getNeighbor: b }) {
          const x = b ? +b(-1, 0) : 0, _ = b ? +b(1, 0) : 0, E = b ? +b(0, -1) : 0, v = b ? +b(0, 1) : 0, P = x + _ + E + v;
          if (P !== 0) if (P > 2 || x && _ || E && v) this._basicSquare({ x: m, y: f, size: g, rotation: 0 });
          else {
            if (P === 2) {
              let I = 0;
              return x && E ? I = Math.PI / 2 : E && _ ? I = Math.PI : _ && v && (I = -Math.PI / 2), void this._basicCornerExtraRounded({ x: m, y: f, size: g, rotation: I });
            }
            if (P === 1) {
              let I = 0;
              return E ? I = Math.PI / 2 : _ ? I = Math.PI : v && (I = -Math.PI / 2), void this._basicSideRounded({ x: m, y: f, size: g, rotation: I });
            }
          }
          else this._basicDot({ x: m, y: f, size: g, rotation: 0 });
        }
        _drawClassy({ x: m, y: f, size: g, getNeighbor: b }) {
          const x = b ? +b(-1, 0) : 0, _ = b ? +b(1, 0) : 0, E = b ? +b(0, -1) : 0, v = b ? +b(0, 1) : 0;
          x + _ + E + v !== 0 ? x || E ? _ || v ? this._basicSquare({ x: m, y: f, size: g, rotation: 0 }) : this._basicCornerRounded({ x: m, y: f, size: g, rotation: Math.PI / 2 }) : this._basicCornerRounded({ x: m, y: f, size: g, rotation: -Math.PI / 2 }) : this._basicCornersRounded({ x: m, y: f, size: g, rotation: Math.PI / 2 });
        }
        _drawClassyRounded({ x: m, y: f, size: g, getNeighbor: b }) {
          const x = b ? +b(-1, 0) : 0, _ = b ? +b(1, 0) : 0, E = b ? +b(0, -1) : 0, v = b ? +b(0, 1) : 0;
          x + _ + E + v !== 0 ? x || E ? _ || v ? this._basicSquare({ x: m, y: f, size: g, rotation: 0 }) : this._basicCornerExtraRounded({ x: m, y: f, size: g, rotation: Math.PI / 2 }) : this._basicCornerExtraRounded({ x: m, y: f, size: g, rotation: -Math.PI / 2 }) : this._basicCornersRounded({ x: m, y: f, size: g, rotation: Math.PI / 2 });
        }
      }
      class p {
        constructor({ svg: m, type: f, window: g }) {
          this._svg = m, this._type = f, this._window = g;
        }
        draw(m, f, g, b) {
          let x;
          switch (this._type) {
            case "square":
              x = this._drawSquare;
              break;
            case "extra-rounded":
              x = this._drawExtraRounded;
              break;
            default:
              x = this._drawDot;
          }
          x.call(this, { x: m, y: f, size: g, rotation: b });
        }
        _rotateFigure({ x: m, y: f, size: g, rotation: b = 0, draw: x }) {
          var _;
          const E = m + g / 2, v = f + g / 2;
          x(), (_ = this._element) === null || _ === void 0 || _.setAttribute("transform", `rotate(${180 * b / Math.PI},${E},${v})`);
        }
        _basicDot(m) {
          const { size: f, x: g, y: b } = m, x = f / 7;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("clip-rule", "evenodd"), this._element.setAttribute("d", `M ${g + f / 2} ${b}a ${f / 2} ${f / 2} 0 1 0 0.1 0zm 0 ${x}a ${f / 2 - x} ${f / 2 - x} 0 1 1 -0.1 0Z`);
          } }));
        }
        _basicSquare(m) {
          const { size: f, x: g, y: b } = m, x = f / 7;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("clip-rule", "evenodd"), this._element.setAttribute("d", `M ${g} ${b}v ${f}h ${f}v ` + -f + `zM ${g + x} ${b + x}h ` + (f - 2 * x) + "v " + (f - 2 * x) + "h " + (2 * x - f) + "z");
          } }));
        }
        _basicExtraRounded(m) {
          const { size: f, x: g, y: b } = m, x = f / 7;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("clip-rule", "evenodd"), this._element.setAttribute("d", `M ${g} ${b + 2.5 * x}v ` + 2 * x + `a ${2.5 * x} ${2.5 * x}, 0, 0, 0, ${2.5 * x} ${2.5 * x}h ` + 2 * x + `a ${2.5 * x} ${2.5 * x}, 0, 0, 0, ${2.5 * x} ${2.5 * -x}v ` + -2 * x + `a ${2.5 * x} ${2.5 * x}, 0, 0, 0, ${2.5 * -x} ${2.5 * -x}h ` + -2 * x + `a ${2.5 * x} ${2.5 * x}, 0, 0, 0, ${2.5 * -x} ${2.5 * x}M ${g + 2.5 * x} ${b + x}h ` + 2 * x + `a ${1.5 * x} ${1.5 * x}, 0, 0, 1, ${1.5 * x} ${1.5 * x}v ` + 2 * x + `a ${1.5 * x} ${1.5 * x}, 0, 0, 1, ${1.5 * -x} ${1.5 * x}h ` + -2 * x + `a ${1.5 * x} ${1.5 * x}, 0, 0, 1, ${1.5 * -x} ${1.5 * -x}v ` + -2 * x + `a ${1.5 * x} ${1.5 * x}, 0, 0, 1, ${1.5 * x} ${1.5 * -x}`);
          } }));
        }
        _drawDot({ x: m, y: f, size: g, rotation: b }) {
          this._basicDot({ x: m, y: f, size: g, rotation: b });
        }
        _drawSquare({ x: m, y: f, size: g, rotation: b }) {
          this._basicSquare({ x: m, y: f, size: g, rotation: b });
        }
        _drawExtraRounded({ x: m, y: f, size: g, rotation: b }) {
          this._basicExtraRounded({ x: m, y: f, size: g, rotation: b });
        }
      }
      class w {
        constructor({ svg: m, type: f, window: g }) {
          this._svg = m, this._type = f, this._window = g;
        }
        draw(m, f, g, b) {
          let x;
          x = this._type === "square" ? this._drawSquare : this._drawDot, x.call(this, { x: m, y: f, size: g, rotation: b });
        }
        _rotateFigure({ x: m, y: f, size: g, rotation: b = 0, draw: x }) {
          var _;
          const E = m + g / 2, v = f + g / 2;
          x(), (_ = this._element) === null || _ === void 0 || _.setAttribute("transform", `rotate(${180 * b / Math.PI},${E},${v})`);
        }
        _basicDot(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "circle"), this._element.setAttribute("cx", String(g + f / 2)), this._element.setAttribute("cy", String(b + f / 2)), this._element.setAttribute("r", String(f / 2));
          } }));
        }
        _basicSquare(m) {
          const { size: f, x: g, y: b } = m;
          this._rotateFigure(Object.assign(Object.assign({}, m), { draw: () => {
            this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect"), this._element.setAttribute("x", String(g)), this._element.setAttribute("y", String(b)), this._element.setAttribute("width", String(f)), this._element.setAttribute("height", String(f));
          } }));
        }
        _drawDot({ x: m, y: f, size: g, rotation: b }) {
          this._basicDot({ x: m, y: f, size: g, rotation: b });
        }
        _drawSquare({ x: m, y: f, size: g, rotation: b }) {
          this._basicSquare({ x: m, y: f, size: g, rotation: b });
        }
      }
      const A = "circle", M = [[1, 1, 1, 1, 1, 1, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 1, 1, 1, 1, 1, 1]], N = [[0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 1, 1, 0, 0], [0, 0, 1, 1, 1, 0, 0], [0, 0, 1, 1, 1, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0]];
      class L {
        constructor(m, f) {
          this._roundSize = (g) => this._options.dotsOptions.roundSize ? Math.floor(g) : g, this._window = f, this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "svg"), this._element.setAttribute("width", String(m.width)), this._element.setAttribute("height", String(m.height)), this._element.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink"), m.dotsOptions.roundSize || this._element.setAttribute("shape-rendering", "crispEdges"), this._element.setAttribute("viewBox", `0 0 ${m.width} ${m.height}`), this._defs = this._window.document.createElementNS("http://www.w3.org/2000/svg", "defs"), this._element.appendChild(this._defs), this._imageUri = m.image, this._instanceId = L.instanceCount++, this._options = m;
        }
        get width() {
          return this._options.width;
        }
        get height() {
          return this._options.height;
        }
        getElement() {
          return this._element;
        }
        async drawQR(m) {
          const f = m.getModuleCount(), g = Math.min(this._options.width, this._options.height) - 2 * this._options.margin, b = this._options.shape === A ? g / Math.sqrt(2) : g, x = this._roundSize(b / f);
          let _ = { hideXDots: 0, hideYDots: 0, width: 0, height: 0 };
          if (this._qr = m, this._options.image) {
            if (await this.loadImage(), !this._image) return;
            const { imageOptions: E, qrOptions: v } = this._options, P = E.imageSize * l[v.errorCorrectionLevel], I = Math.floor(P * f * f);
            _ = function({ originalHeight: F, originalWidth: ce, maxHiddenDots: D, maxHiddenAxisDots: oe, dotSize: Z }) {
              const J = { x: 0, y: 0 }, Q = { x: 0, y: 0 };
              if (F <= 0 || ce <= 0 || D <= 0 || Z <= 0) return { height: 0, width: 0, hideYDots: 0, hideXDots: 0 };
              const T = F / ce;
              return J.x = Math.floor(Math.sqrt(D / T)), J.x <= 0 && (J.x = 1), oe && oe < J.x && (J.x = oe), J.x % 2 == 0 && J.x--, Q.x = J.x * Z, J.y = 1 + 2 * Math.ceil((J.x * T - 1) / 2), Q.y = Math.round(Q.x * T), (J.y * J.x > D || oe && oe < J.y) && (oe && oe < J.y ? (J.y = oe, J.y % 2 == 0 && J.x--) : J.y -= 2, Q.y = J.y * Z, J.x = 1 + 2 * Math.ceil((J.y / T - 1) / 2), Q.x = Math.round(Q.y / T)), { height: Q.y, width: Q.x, hideYDots: J.y, hideXDots: J.x };
            }({ originalWidth: this._image.width, originalHeight: this._image.height, maxHiddenDots: I, maxHiddenAxisDots: f - 14, dotSize: x });
          }
          this.drawBackground(), this.drawDots((E, v) => {
            var P, I, F, ce, D, oe;
            return !(this._options.imageOptions.hideBackgroundDots && E >= (f - _.hideYDots) / 2 && E < (f + _.hideYDots) / 2 && v >= (f - _.hideXDots) / 2 && v < (f + _.hideXDots) / 2 || !((P = M[E]) === null || P === void 0) && P[v] || !((I = M[E - f + 7]) === null || I === void 0) && I[v] || !((F = M[E]) === null || F === void 0) && F[v - f + 7] || !((ce = N[E]) === null || ce === void 0) && ce[v] || !((D = N[E - f + 7]) === null || D === void 0) && D[v] || !((oe = N[E]) === null || oe === void 0) && oe[v - f + 7]);
          }), this.drawCorners(), this._options.image && await this.drawImage({ width: _.width, height: _.height, count: f, dotSize: x });
        }
        drawBackground() {
          var m, f, g;
          const b = this._element, x = this._options;
          if (b) {
            const _ = (m = x.backgroundOptions) === null || m === void 0 ? void 0 : m.gradient, E = (f = x.backgroundOptions) === null || f === void 0 ? void 0 : f.color;
            let v = x.height, P = x.width;
            if (_ || E) {
              const I = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect");
              this._backgroundClipPath = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), this._backgroundClipPath.setAttribute("id", `clip-path-background-color-${this._instanceId}`), this._defs.appendChild(this._backgroundClipPath), !((g = x.backgroundOptions) === null || g === void 0) && g.round && (v = P = Math.min(x.width, x.height), I.setAttribute("rx", String(v / 2 * x.backgroundOptions.round))), I.setAttribute("x", String(this._roundSize((x.width - P) / 2))), I.setAttribute("y", String(this._roundSize((x.height - v) / 2))), I.setAttribute("width", String(P)), I.setAttribute("height", String(v)), this._backgroundClipPath.appendChild(I), this._createColor({ options: _, color: E, additionalRotation: 0, x: 0, y: 0, height: x.height, width: x.width, name: `background-color-${this._instanceId}` });
            }
          }
        }
        drawDots(m) {
          var f, g;
          if (!this._qr) throw "QR code is not defined";
          const b = this._options, x = this._qr.getModuleCount();
          if (x > b.width || x > b.height) throw "The canvas is too small.";
          const _ = Math.min(b.width, b.height) - 2 * b.margin, E = b.shape === A ? _ / Math.sqrt(2) : _, v = this._roundSize(E / x), P = this._roundSize((b.width - x * v) / 2), I = this._roundSize((b.height - x * v) / 2), F = new d({ svg: this._element, type: b.dotsOptions.type, window: this._window });
          this._dotsClipPath = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), this._dotsClipPath.setAttribute("id", `clip-path-dot-color-${this._instanceId}`), this._defs.appendChild(this._dotsClipPath), this._createColor({ options: (f = b.dotsOptions) === null || f === void 0 ? void 0 : f.gradient, color: b.dotsOptions.color, additionalRotation: 0, x: 0, y: 0, height: b.height, width: b.width, name: `dot-color-${this._instanceId}` });
          for (let ce = 0; ce < x; ce++) for (let D = 0; D < x; D++) m && !m(ce, D) || !((g = this._qr) === null || g === void 0) && g.isDark(ce, D) && (F.draw(P + D * v, I + ce * v, v, (oe, Z) => !(D + oe < 0 || ce + Z < 0 || D + oe >= x || ce + Z >= x) && !(m && !m(ce + Z, D + oe)) && !!this._qr && this._qr.isDark(ce + Z, D + oe)), F._element && this._dotsClipPath && this._dotsClipPath.appendChild(F._element));
          if (b.shape === A) {
            const ce = this._roundSize((_ / v - x) / 2), D = x + 2 * ce, oe = P - ce * v, Z = I - ce * v, J = [], Q = this._roundSize(D / 2);
            for (let T = 0; T < D; T++) {
              J[T] = [];
              for (let X = 0; X < D; X++) T >= ce - 1 && T <= D - ce && X >= ce - 1 && X <= D - ce || Math.sqrt((T - Q) * (T - Q) + (X - Q) * (X - Q)) > Q ? J[T][X] = 0 : J[T][X] = this._qr.isDark(X - 2 * ce < 0 ? X : X >= x ? X - 2 * ce : X - ce, T - 2 * ce < 0 ? T : T >= x ? T - 2 * ce : T - ce) ? 1 : 0;
            }
            for (let T = 0; T < D; T++) for (let X = 0; X < D; X++) J[T][X] && (F.draw(oe + X * v, Z + T * v, v, (re, de) => {
              var ie;
              return !!(!((ie = J[T + de]) === null || ie === void 0) && ie[X + re]);
            }), F._element && this._dotsClipPath && this._dotsClipPath.appendChild(F._element));
          }
        }
        drawCorners() {
          if (!this._qr) throw "QR code is not defined";
          const m = this._element, f = this._options;
          if (!m) throw "Element code is not defined";
          const g = this._qr.getModuleCount(), b = Math.min(f.width, f.height) - 2 * f.margin, x = f.shape === A ? b / Math.sqrt(2) : b, _ = this._roundSize(x / g), E = 7 * _, v = 3 * _, P = this._roundSize((f.width - g * _) / 2), I = this._roundSize((f.height - g * _) / 2);
          [[0, 0, 0], [1, 0, Math.PI / 2], [0, 1, -Math.PI / 2]].forEach(([F, ce, D]) => {
            var oe, Z, J, Q, T, X, re, de, ie, ue, ve, Pe;
            const De = P + F * _ * (g - 7), Ce = I + ce * _ * (g - 7);
            let $e = this._dotsClipPath, Me = this._dotsClipPath;
            if ((!((oe = f.cornersSquareOptions) === null || oe === void 0) && oe.gradient || !((Z = f.cornersSquareOptions) === null || Z === void 0) && Z.color) && ($e = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), $e.setAttribute("id", `clip-path-corners-square-color-${F}-${ce}-${this._instanceId}`), this._defs.appendChild($e), this._cornersSquareClipPath = this._cornersDotClipPath = Me = $e, this._createColor({ options: (J = f.cornersSquareOptions) === null || J === void 0 ? void 0 : J.gradient, color: (Q = f.cornersSquareOptions) === null || Q === void 0 ? void 0 : Q.color, additionalRotation: D, x: De, y: Ce, height: E, width: E, name: `corners-square-color-${F}-${ce}-${this._instanceId}` })), (T = f.cornersSquareOptions) === null || T === void 0 ? void 0 : T.type) {
              const Ne = new p({ svg: this._element, type: f.cornersSquareOptions.type, window: this._window });
              Ne.draw(De, Ce, E, D), Ne._element && $e && $e.appendChild(Ne._element);
            } else {
              const Ne = new d({ svg: this._element, type: f.dotsOptions.type, window: this._window });
              for (let Ke = 0; Ke < M.length; Ke++) for (let Le = 0; Le < M[Ke].length; Le++) !((X = M[Ke]) === null || X === void 0) && X[Le] && (Ne.draw(De + Le * _, Ce + Ke * _, _, (qe, ze) => {
                var _e;
                return !!(!((_e = M[Ke + ze]) === null || _e === void 0) && _e[Le + qe]);
              }), Ne._element && $e && $e.appendChild(Ne._element));
            }
            if ((!((re = f.cornersDotOptions) === null || re === void 0) && re.gradient || !((de = f.cornersDotOptions) === null || de === void 0) && de.color) && (Me = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), Me.setAttribute("id", `clip-path-corners-dot-color-${F}-${ce}-${this._instanceId}`), this._defs.appendChild(Me), this._cornersDotClipPath = Me, this._createColor({ options: (ie = f.cornersDotOptions) === null || ie === void 0 ? void 0 : ie.gradient, color: (ue = f.cornersDotOptions) === null || ue === void 0 ? void 0 : ue.color, additionalRotation: D, x: De + 2 * _, y: Ce + 2 * _, height: v, width: v, name: `corners-dot-color-${F}-${ce}-${this._instanceId}` })), (ve = f.cornersDotOptions) === null || ve === void 0 ? void 0 : ve.type) {
              const Ne = new w({ svg: this._element, type: f.cornersDotOptions.type, window: this._window });
              Ne.draw(De + 2 * _, Ce + 2 * _, v, D), Ne._element && Me && Me.appendChild(Ne._element);
            } else {
              const Ne = new d({ svg: this._element, type: f.dotsOptions.type, window: this._window });
              for (let Ke = 0; Ke < N.length; Ke++) for (let Le = 0; Le < N[Ke].length; Le++) !((Pe = N[Ke]) === null || Pe === void 0) && Pe[Le] && (Ne.draw(De + Le * _, Ce + Ke * _, _, (qe, ze) => {
                var _e;
                return !!(!((_e = N[Ke + ze]) === null || _e === void 0) && _e[Le + qe]);
              }), Ne._element && Me && Me.appendChild(Ne._element));
            }
          });
        }
        loadImage() {
          return new Promise((m, f) => {
            var g;
            const b = this._options;
            if (!b.image) return f("Image is not defined");
            if (!((g = b.nodeCanvas) === null || g === void 0) && g.loadImage) b.nodeCanvas.loadImage(b.image).then((x) => {
              var _, E;
              if (this._image = x, this._options.imageOptions.saveAsBlob) {
                const v = (_ = b.nodeCanvas) === null || _ === void 0 ? void 0 : _.createCanvas(this._image.width, this._image.height);
                (E = v == null ? void 0 : v.getContext("2d")) === null || E === void 0 || E.drawImage(x, 0, 0), this._imageUri = v == null ? void 0 : v.toDataURL();
              }
              m();
            }).catch(f);
            else {
              const x = new this._window.Image();
              typeof b.imageOptions.crossOrigin == "string" && (x.crossOrigin = b.imageOptions.crossOrigin), this._image = x, x.onload = async () => {
                this._options.imageOptions.saveAsBlob && (this._imageUri = await async function(_, E) {
                  return new Promise((v) => {
                    const P = new E.XMLHttpRequest();
                    P.onload = function() {
                      const I = new E.FileReader();
                      I.onloadend = function() {
                        v(I.result);
                      }, I.readAsDataURL(P.response);
                    }, P.open("GET", _), P.responseType = "blob", P.send();
                  });
                }(b.image || "", this._window)), m();
              }, x.src = b.image;
            }
          });
        }
        async drawImage({ width: m, height: f, count: g, dotSize: b }) {
          const x = this._options, _ = this._roundSize((x.width - g * b) / 2), E = this._roundSize((x.height - g * b) / 2), v = _ + this._roundSize(x.imageOptions.margin + (g * b - m) / 2), P = E + this._roundSize(x.imageOptions.margin + (g * b - f) / 2), I = m - 2 * x.imageOptions.margin, F = f - 2 * x.imageOptions.margin, ce = this._window.document.createElementNS("http://www.w3.org/2000/svg", "image");
          ce.setAttribute("href", this._imageUri || ""), ce.setAttribute("x", String(v)), ce.setAttribute("y", String(P)), ce.setAttribute("width", `${I}px`), ce.setAttribute("height", `${F}px`), this._element.appendChild(ce);
        }
        _createColor({ options: m, color: f, additionalRotation: g, x: b, y: x, height: _, width: E, name: v }) {
          const P = E > _ ? E : _, I = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect");
          if (I.setAttribute("x", String(b)), I.setAttribute("y", String(x)), I.setAttribute("height", String(_)), I.setAttribute("width", String(E)), I.setAttribute("clip-path", `url('#clip-path-${v}')`), m) {
            let F;
            if (m.type === "radial") F = this._window.document.createElementNS("http://www.w3.org/2000/svg", "radialGradient"), F.setAttribute("id", v), F.setAttribute("gradientUnits", "userSpaceOnUse"), F.setAttribute("fx", String(b + E / 2)), F.setAttribute("fy", String(x + _ / 2)), F.setAttribute("cx", String(b + E / 2)), F.setAttribute("cy", String(x + _ / 2)), F.setAttribute("r", String(P / 2));
            else {
              const ce = ((m.rotation || 0) + g) % (2 * Math.PI), D = (ce + 2 * Math.PI) % (2 * Math.PI);
              let oe = b + E / 2, Z = x + _ / 2, J = b + E / 2, Q = x + _ / 2;
              D >= 0 && D <= 0.25 * Math.PI || D > 1.75 * Math.PI && D <= 2 * Math.PI ? (oe -= E / 2, Z -= _ / 2 * Math.tan(ce), J += E / 2, Q += _ / 2 * Math.tan(ce)) : D > 0.25 * Math.PI && D <= 0.75 * Math.PI ? (Z -= _ / 2, oe -= E / 2 / Math.tan(ce), Q += _ / 2, J += E / 2 / Math.tan(ce)) : D > 0.75 * Math.PI && D <= 1.25 * Math.PI ? (oe += E / 2, Z += _ / 2 * Math.tan(ce), J -= E / 2, Q -= _ / 2 * Math.tan(ce)) : D > 1.25 * Math.PI && D <= 1.75 * Math.PI && (Z += _ / 2, oe += E / 2 / Math.tan(ce), Q -= _ / 2, J -= E / 2 / Math.tan(ce)), F = this._window.document.createElementNS("http://www.w3.org/2000/svg", "linearGradient"), F.setAttribute("id", v), F.setAttribute("gradientUnits", "userSpaceOnUse"), F.setAttribute("x1", String(Math.round(oe))), F.setAttribute("y1", String(Math.round(Z))), F.setAttribute("x2", String(Math.round(J))), F.setAttribute("y2", String(Math.round(Q)));
            }
            m.colorStops.forEach(({ offset: ce, color: D }) => {
              const oe = this._window.document.createElementNS("http://www.w3.org/2000/svg", "stop");
              oe.setAttribute("offset", 100 * ce + "%"), oe.setAttribute("stop-color", D), F.appendChild(oe);
            }), I.setAttribute("fill", `url('#${v}')`), this._defs.appendChild(F);
          } else f && I.setAttribute("fill", f);
          this._element.appendChild(I);
        }
      }
      L.instanceCount = 0;
      const B = L, $ = "canvas", H = {};
      for (let S = 0; S <= 40; S++) H[S] = S;
      const W = { type: $, shape: "square", width: 300, height: 300, data: "", margin: 0, qrOptions: { typeNumber: H[0], mode: void 0, errorCorrectionLevel: "Q" }, imageOptions: { saveAsBlob: !0, hideBackgroundDots: !0, imageSize: 0.4, crossOrigin: void 0, margin: 0 }, dotsOptions: { type: "square", color: "#000", roundSize: !0 }, backgroundOptions: { round: 0, color: "#fff" } };
      function V(S) {
        const m = Object.assign({}, S);
        if (!m.colorStops || !m.colorStops.length) throw "Field 'colorStops' is required in gradient";
        return m.rotation ? m.rotation = Number(m.rotation) : m.rotation = 0, m.colorStops = m.colorStops.map((f) => Object.assign(Object.assign({}, f), { offset: Number(f.offset) })), m;
      }
      function te(S) {
        const m = Object.assign({}, S);
        return m.width = Number(m.width), m.height = Number(m.height), m.margin = Number(m.margin), m.imageOptions = Object.assign(Object.assign({}, m.imageOptions), { hideBackgroundDots: !!m.imageOptions.hideBackgroundDots, imageSize: Number(m.imageOptions.imageSize), margin: Number(m.imageOptions.margin) }), m.margin > Math.min(m.width, m.height) && (m.margin = Math.min(m.width, m.height)), m.dotsOptions = Object.assign({}, m.dotsOptions), m.dotsOptions.gradient && (m.dotsOptions.gradient = V(m.dotsOptions.gradient)), m.cornersSquareOptions && (m.cornersSquareOptions = Object.assign({}, m.cornersSquareOptions), m.cornersSquareOptions.gradient && (m.cornersSquareOptions.gradient = V(m.cornersSquareOptions.gradient))), m.cornersDotOptions && (m.cornersDotOptions = Object.assign({}, m.cornersDotOptions), m.cornersDotOptions.gradient && (m.cornersDotOptions.gradient = V(m.cornersDotOptions.gradient))), m.backgroundOptions && (m.backgroundOptions = Object.assign({}, m.backgroundOptions), m.backgroundOptions.gradient && (m.backgroundOptions.gradient = V(m.backgroundOptions.gradient))), m;
      }
      var R = i(873), K = i.n(R);
      function ge(S) {
        if (!S) throw new Error("Extension must be defined");
        S[0] === "." && (S = S.substring(1));
        const m = { bmp: "image/bmp", gif: "image/gif", ico: "image/vnd.microsoft.icon", jpeg: "image/jpeg", jpg: "image/jpeg", png: "image/png", svg: "image/svg+xml", tif: "image/tiff", tiff: "image/tiff", webp: "image/webp", pdf: "application/pdf" }[S.toLowerCase()];
        if (!m) throw new Error(`Extension "${S}" is not supported`);
        return m;
      }
      class Ee {
        constructor(m) {
          m != null && m.jsdom ? this._window = new m.jsdom("", { resources: "usable" }).window : this._window = window, this._options = m ? te(a(W, m)) : W, this.update();
        }
        static _clearContainer(m) {
          m && (m.innerHTML = "");
        }
        _setupSvg() {
          if (!this._qr) return;
          const m = new B(this._options, this._window);
          this._svg = m.getElement(), this._svgDrawingPromise = m.drawQR(this._qr).then(() => {
            var f;
            this._svg && ((f = this._extension) === null || f === void 0 || f.call(this, m.getElement(), this._options));
          });
        }
        _setupCanvas() {
          var m, f;
          this._qr && (!((m = this._options.nodeCanvas) === null || m === void 0) && m.createCanvas ? (this._nodeCanvas = this._options.nodeCanvas.createCanvas(this._options.width, this._options.height), this._nodeCanvas.width = this._options.width, this._nodeCanvas.height = this._options.height) : (this._domCanvas = document.createElement("canvas"), this._domCanvas.width = this._options.width, this._domCanvas.height = this._options.height), this._setupSvg(), this._canvasDrawingPromise = (f = this._svgDrawingPromise) === null || f === void 0 ? void 0 : f.then(() => {
            var g;
            if (!this._svg) return;
            const b = this._svg, x = new this._window.XMLSerializer().serializeToString(b), _ = btoa(x), E = `data:${ge("svg")};base64,${_}`;
            if (!((g = this._options.nodeCanvas) === null || g === void 0) && g.loadImage) return this._options.nodeCanvas.loadImage(E).then((v) => {
              var P, I;
              v.width = this._options.width, v.height = this._options.height, (I = (P = this._nodeCanvas) === null || P === void 0 ? void 0 : P.getContext("2d")) === null || I === void 0 || I.drawImage(v, 0, 0);
            });
            {
              const v = new this._window.Image();
              return new Promise((P) => {
                v.onload = () => {
                  var I, F;
                  (F = (I = this._domCanvas) === null || I === void 0 ? void 0 : I.getContext("2d")) === null || F === void 0 || F.drawImage(v, 0, 0), P();
                }, v.src = E;
              });
            }
          }));
        }
        async _getElement(m = "png") {
          if (!this._qr) throw "QR code is empty";
          return m.toLowerCase() === "svg" ? (this._svg && this._svgDrawingPromise || this._setupSvg(), await this._svgDrawingPromise, this._svg) : ((this._domCanvas || this._nodeCanvas) && this._canvasDrawingPromise || this._setupCanvas(), await this._canvasDrawingPromise, this._domCanvas || this._nodeCanvas);
        }
        update(m) {
          Ee._clearContainer(this._container), this._options = m ? te(a(this._options, m)) : this._options, this._options.data && (this._qr = K()(this._options.qrOptions.typeNumber, this._options.qrOptions.errorCorrectionLevel), this._qr.addData(this._options.data, this._options.qrOptions.mode || function(f) {
            switch (!0) {
              case /^[0-9]*$/.test(f):
                return "Numeric";
              case /^[0-9A-Z $%*+\-./:]*$/.test(f):
                return "Alphanumeric";
              default:
                return "Byte";
            }
          }(this._options.data)), this._qr.make(), this._options.type === $ ? this._setupCanvas() : this._setupSvg(), this.append(this._container));
        }
        append(m) {
          if (m) {
            if (typeof m.appendChild != "function") throw "Container should be a single DOM node";
            this._options.type === $ ? this._domCanvas && m.appendChild(this._domCanvas) : this._svg && m.appendChild(this._svg), this._container = m;
          }
        }
        applyExtension(m) {
          if (!m) throw "Extension function should be defined.";
          this._extension = m, this.update();
        }
        deleteExtension() {
          this._extension = void 0, this.update();
        }
        async getRawData(m = "png") {
          if (!this._qr) throw "QR code is empty";
          const f = await this._getElement(m), g = ge(m);
          if (!f) return null;
          if (m.toLowerCase() === "svg") {
            const b = `<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(f)}`;
            return typeof Blob > "u" || this._options.jsdom ? Buffer.from(b) : new Blob([b], { type: g });
          }
          return new Promise((b) => {
            const x = f;
            if ("toBuffer" in x) if (g === "image/png") b(x.toBuffer(g));
            else if (g === "image/jpeg") b(x.toBuffer(g));
            else {
              if (g !== "application/pdf") throw Error("Unsupported extension");
              b(x.toBuffer(g));
            }
            else "toBlob" in x && x.toBlob(b, g, 1);
          });
        }
        async download(m) {
          if (!this._qr) throw "QR code is empty";
          if (typeof Blob > "u") throw "Cannot download in Node.js, call getRawData instead.";
          let f = "png", g = "qr";
          typeof m == "string" ? (f = m, console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")) : typeof m == "object" && m !== null && (m.name && (g = m.name), m.extension && (f = m.extension));
          const b = await this._getElement(f);
          if (b) if (f.toLowerCase() === "svg") {
            let x = new XMLSerializer().serializeToString(b);
            x = `<?xml version="1.0" standalone="no"?>\r
` + x, u(`data:${ge(f)};charset=utf-8,${encodeURIComponent(x)}`, `${g}.svg`);
          } else u(b.toDataURL(ge(f)), `${g}.${f}`);
        }
      }
      const Y = Ee;
    })(), s.default;
  })());
})(B9);
var Hne = B9.exports;
const F9 = /* @__PURE__ */ ts(Hne);
class sa extends yt {
  constructor(e) {
    const { docsPath: r, field: n, metaMessages: i } = e;
    super(`Invalid Sign-In with Ethereum message field "${n}".`, {
      docsPath: r,
      metaMessages: i,
      name: "SiweInvalidMessageFieldError"
    });
  }
}
function f5(t) {
  if (/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(t) || /%[^0-9a-f]/i.test(t) || /%[0-9a-f](:?[^0-9a-f]|$)/i.test(t))
    return !1;
  const e = Kne(t), r = e[1], n = e[2], i = e[3], s = e[4], o = e[5];
  if (!(r != null && r.length && i.length >= 0))
    return !1;
  if (n != null && n.length) {
    if (!(i.length === 0 || /^\//.test(i)))
      return !1;
  } else if (/^\/\//.test(i))
    return !1;
  if (!/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase()))
    return !1;
  let a = "";
  return a += `${r}:`, n != null && n.length && (a += `//${n}`), a += i, s != null && s.length && (a += `?${s}`), o != null && o.length && (a += `#${o}`), a;
}
function Kne(t) {
  return t.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);
}
function j9(t) {
  const { chainId: e, domain: r, expirationTime: n, issuedAt: i = /* @__PURE__ */ new Date(), nonce: s, notBefore: o, requestId: a, resources: u, scheme: l, uri: d, version: p } = t;
  {
    if (e !== Math.floor(e))
      throw new sa({
        field: "chainId",
        metaMessages: [
          "- Chain ID must be a EIP-155 chain ID.",
          "- See https://eips.ethereum.org/EIPS/eip-155",
          "",
          `Provided value: ${e}`
        ]
      });
    if (!(Vne.test(r) || Gne.test(r) || Yne.test(r)))
      throw new sa({
        field: "domain",
        metaMessages: [
          "- Domain must be an RFC 3986 authority.",
          "- See https://www.rfc-editor.org/rfc/rfc3986",
          "",
          `Provided value: ${r}`
        ]
      });
    if (!Jne.test(s))
      throw new sa({
        field: "nonce",
        metaMessages: [
          "- Nonce must be at least 8 characters.",
          "- Nonce must be alphanumeric.",
          "",
          `Provided value: ${s}`
        ]
      });
    if (!f5(d))
      throw new sa({
        field: "uri",
        metaMessages: [
          "- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.",
          "- See https://www.rfc-editor.org/rfc/rfc3986",
          "",
          `Provided value: ${d}`
        ]
      });
    if (p !== "1")
      throw new sa({
        field: "version",
        metaMessages: [
          "- Version must be '1'.",
          "",
          `Provided value: ${p}`
        ]
      });
    if (l && !Xne.test(l))
      throw new sa({
        field: "scheme",
        metaMessages: [
          "- Scheme must be an RFC 3986 URI scheme.",
          "- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1",
          "",
          `Provided value: ${l}`
        ]
      });
    const B = t.statement;
    if (B != null && B.includes(`
`))
      throw new sa({
        field: "statement",
        metaMessages: [
          "- Statement must not include '\\n'.",
          "",
          `Provided value: ${B}`
        ]
      });
  }
  const w = Ev(t.address), A = l ? `${l}://${r}` : r, M = t.statement ? `${t.statement}
` : "", N = `${A} wants you to sign in with your Ethereum account:
${w}

${M}`;
  let L = `URI: ${d}
Version: ${p}
Chain ID: ${e}
Nonce: ${s}
Issued At: ${i.toISOString()}`;
  if (n && (L += `
Expiration Time: ${n.toISOString()}`), o && (L += `
Not Before: ${o.toISOString()}`), a && (L += `
Request ID: ${a}`), u) {
    let B = `
Resources:`;
    for (const $ of u) {
      if (!f5($))
        throw new sa({
          field: "resources",
          metaMessages: [
            "- Every resource must be a RFC 3986 URI.",
            "- See https://www.rfc-editor.org/rfc/rfc3986",
            "",
            `Provided value: ${$}`
          ]
        });
      B += `
- ${$}`;
    }
    L += B;
  }
  return `${N}
${L}`;
}
const Vne = /^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/, Gne = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/, Yne = /^localhost(:[0-9]{1,5})?$/, Jne = /^[a-zA-Z0-9]{8,}$/, Xne = /^([a-zA-Z][a-zA-Z0-9+-.]*)$/, U9 = "7a4434fefbcc9af474fb5c995e47d286", Zne = {
  projectId: U9,
  metadata: {
    name: "codatta",
    description: "codatta",
    url: "https://codatta.io/",
    icons: ["https://avatars.githubusercontent.com/u/171659315"]
  }
}, Qne = {
  namespaces: {
    eip155: {
      methods: [
        "eth_sendTransaction",
        "eth_signTransaction",
        "eth_sign",
        "personal_sign",
        "eth_signTypedData"
      ],
      chains: ["eip155:1"],
      events: ["chainChanged", "accountsChanged", "disconnect"],
      rpcMap: {
        1: `https://rpc.walletconnect.com?chainId=eip155:1&projectId=${U9}`
      }
    }
  },
  skipPairing: !1
};
function eie(t, e) {
  const r = window.location.host, n = window.location.href;
  return j9({
    address: t,
    chainId: 1,
    domain: r,
    nonce: e,
    uri: n,
    version: "1"
  });
}
function q9(t) {
  var ge, Ee, Y;
  const e = Zn(null), { wallet: r, onGetExtension: n, onSignFinish: i } = t, [s, o] = Qt(""), [a, u] = Qt(!1), [l, d] = Qt(""), [p, w] = Qt("scan"), A = Zn(), [M, N] = Qt((ge = r.config) == null ? void 0 : ge.image), [L, B] = Qt(!1), { saveLastUsedWallet: $ } = mp();
  async function H(S) {
    var f, g, b, x;
    u(!0);
    const m = await jG.init(Zne);
    m.session && await m.disconnect();
    try {
      if (w("scan"), m.on("display_uri", (ce) => {
        console.log("display_uri", ce), o(ce), u(!1), w("scan");
      }), m.on("error", (ce) => {
        console.log(ce);
      }), m.on("session_update", (ce) => {
        console.log("session_update", ce);
      }), !await m.connect(Qne)) throw new Error("Walletconnect init failed");
      const E = new vl(m);
      N(((f = E.config) == null ? void 0 : f.image) || ((g = S.config) == null ? void 0 : g.image));
      const v = await E.getAddress(), P = await Ta.getNonce({ account_type: "block_chain" });
      console.log("get nonce", P);
      const I = eie(v, P);
      w("sign");
      const F = await E.signMessage(I, v);
      w("waiting"), await i(E, {
        message: I,
        nonce: P,
        signature: F,
        address: v,
        wallet_name: ((b = E.config) == null ? void 0 : b.name) || ((x = S.config) == null ? void 0 : x.name) || ""
      }), $(E);
    } catch (_) {
      console.log("err", _), d(_.details || _.message);
    }
  }
  function W() {
    A.current = new F9({
      width: 264,
      height: 264,
      margin: 0,
      type: "svg",
      // image: wallet.config?.image,
      qrOptions: {
        errorCorrectionLevel: "M"
      },
      dotsOptions: {
        color: "black",
        type: "rounded"
      },
      backgroundOptions: {
        color: "transparent"
      }
    }), A.current.append(e.current);
  }
  function V(S) {
    var m;
    console.log(A.current), (m = A.current) == null || m.update({
      data: S
    });
  }
  Dn(() => {
    s && V(s);
  }, [s]), Dn(() => {
    H(r);
  }, [r]), Dn(() => {
    W();
  }, []);
  function te() {
    d(""), V(""), H(r);
  }
  function R() {
    B(!0), navigator.clipboard.writeText(s), setTimeout(() => {
      B(!1);
    }, 2500);
  }
  function K() {
    var f;
    const S = (f = r.config) == null ? void 0 : f.desktop_link;
    if (!S) return;
    const m = `${S}?uri=${encodeURIComponent(s)}`;
    window.open(m, "_blank");
  }
  return /* @__PURE__ */ pe.jsxs("div", { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-text-center", children: /* @__PURE__ */ pe.jsxs("div", { className: "xc-relative xc-mx-auto xc-mb-6 xc-block xc-max-h-[272px] xc-max-w-[272px] xc-rounded-xl xc-bg-white xc-p-1", children: [
      /* @__PURE__ */ pe.jsx("div", { className: "xc-aspect-[1/1] xc-flex xc-h-full xc-w-full xc-justify-center", ref: e }),
      /* @__PURE__ */ pe.jsx("div", { className: "xc-absolute xc-left-0 xc-top-0 xc-flex xc-h-full xc-w-full xc-items-center xc-justify-center", children: a ? /* @__PURE__ */ pe.jsx(mc, { className: "xc-h-6 xc-w-6 xc-animate-spin xc-text-black", size: 20 }) : /* @__PURE__ */ pe.jsx("img", { className: "xc-h-10 xc-w-10", src: M }) })
    ] }) }),
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-m-auto xc-mb-6 xc-flex xc-max-w-[400px] xc-flex-wrap xc-items-center xc-justify-between xc-gap-3", children: [
      /* @__PURE__ */ pe.jsx(
        "button",
        {
          disabled: !s,
          onClick: R,
          className: "xc-disabled:hover-text-white xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black xc-disabled:cursor-not-allowed xc-disabled:opacity-40 xc-disabled:hover:bg-transparent",
          children: L ? /* @__PURE__ */ pe.jsxs(pe.Fragment, { children: [
            " ",
            /* @__PURE__ */ pe.jsx(dZ, {}),
            " Copied!"
          ] }) : /* @__PURE__ */ pe.jsxs(pe.Fragment, { children: [
            /* @__PURE__ */ pe.jsx(mZ, {}),
            "Copy QR URL"
          ] })
        }
      ),
      ((Ee = r.config) == null ? void 0 : Ee.getWallet) && /* @__PURE__ */ pe.jsxs(
        "button",
        {
          className: "xc-rounded-2 xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black",
          onClick: n,
          children: [
            /* @__PURE__ */ pe.jsx(pZ, {}),
            "Get Extension"
          ]
        }
      ),
      ((Y = r.config) == null ? void 0 : Y.desktop_link) && /* @__PURE__ */ pe.jsxs(
        "button",
        {
          disabled: !s,
          className: "xc-rounded-2 xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black",
          onClick: K,
          children: [
            /* @__PURE__ */ pe.jsx(HS, {}),
            "Desktop"
          ]
        }
      )
    ] }),
    /* @__PURE__ */ pe.jsx("div", { className: "xc-text-center", children: l ? /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-flex-col xc-items-center", children: [
      /* @__PURE__ */ pe.jsx("p", { className: "xc-text-danger xc-mb-2 xc-text-center", children: l }),
      /* @__PURE__ */ pe.jsx("button", { className: "xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1", onClick: te, children: "Retry" })
    ] }) : /* @__PURE__ */ pe.jsxs(pe.Fragment, { children: [
      p === "scan" && /* @__PURE__ */ pe.jsx("p", { children: "Scan this QR code from your mobile wallet or phone's camera to connect." }),
      p === "connect" && /* @__PURE__ */ pe.jsx("p", { children: "Click connect in your wallet app" }),
      p === "sign" && /* @__PURE__ */ pe.jsx("p", { children: "Click sign-in in your wallet to confirm you own this wallet." }),
      p === "waiting" && /* @__PURE__ */ pe.jsx("div", { className: "xc-text-center", children: /* @__PURE__ */ pe.jsx(mc, { className: "xc-inline-block xc-animate-spin" }) })
    ] }) })
  ] });
}
const tie = "Accept connection request in the wallet", rie = "Accept sign-in request in your wallet";
function nie(t, e) {
  const r = window.location.host, n = window.location.href;
  return j9({
    address: t,
    chainId: 1,
    domain: r,
    nonce: e,
    uri: n,
    version: "1"
  });
}
function z9(t) {
  var p;
  const [e, r] = Qt(), { wallet: n, onSignFinish: i } = t, s = Zn(), [o, a] = Qt("connect"), { saveLastUsedWallet: u } = mp();
  async function l(w) {
    var A;
    try {
      a("connect");
      const M = await n.connect();
      if (!M || M.length === 0)
        throw new Error("Wallet connect error");
      const N = Ev(M[0]), L = nie(N, w);
      a("sign");
      const B = await n.signMessage(L, N);
      if (!B || B.length === 0)
        throw new Error("user sign error");
      a("waiting"), await i(n, { address: N, signature: B, message: L, nonce: w, wallet_name: ((A = n.config) == null ? void 0 : A.name) || "" }), u(n);
    } catch (M) {
      console.log(M.details), r(M.details || M.message);
    }
  }
  async function d() {
    try {
      r("");
      const w = await Ta.getNonce({ account_type: "block_chain" });
      s.current = w, l(s.current);
    } catch (w) {
      console.log(w.details), r(w.message);
    }
  }
  return Dn(() => {
    d();
  }, []), /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-flex-col xc-items-center xc-justify-center xc-gap-4", children: [
    /* @__PURE__ */ pe.jsx("img", { className: "xc-rounded-md xc-h-16 xc-w-16", src: (p = n.config) == null ? void 0 : p.image, alt: "" }),
    e && /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-flex-col xc-items-center", children: [
      /* @__PURE__ */ pe.jsx("p", { className: "xc-text-danger xc-mb-2 xc-text-center", children: e }),
      /* @__PURE__ */ pe.jsx("div", { className: "xc-flex xc-gap-2", children: /* @__PURE__ */ pe.jsx("button", { className: "xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1", onClick: d, children: "Retry" }) })
    ] }),
    !e && /* @__PURE__ */ pe.jsxs(pe.Fragment, { children: [
      o === "connect" && /* @__PURE__ */ pe.jsx("span", { className: "xc-text-center", children: tie }),
      o === "sign" && /* @__PURE__ */ pe.jsx("span", { className: "xc-text-center", children: rie }),
      o === "waiting" && /* @__PURE__ */ pe.jsx("span", { className: "xc-text-center", children: /* @__PURE__ */ pe.jsx(mc, { className: "xc-animate-spin" }) })
    ] })
  ] });
}
const Gc = "https://static.codatta.io/codatta-connect/wallet-icons.svg", iie = "https://itunes.apple.com/app/", sie = "https://play.google.com/store/apps/details?id=", oie = "https://chromewebstore.google.com/detail/", aie = "https://chromewebstore.google.com/detail/", cie = "https://addons.mozilla.org/en-US/firefox/addon/", uie = "https://microsoftedge.microsoft.com/addons/detail/";
function Yc(t) {
  const { icon: e, title: r, link: n } = t;
  return /* @__PURE__ */ pe.jsxs(
    "a",
    {
      href: n,
      target: "_blank",
      className: "xc-flex xc-w-full xc-cursor-pointer xc-items-center xc-gap-2 xc-rounded-full xc-border xc-border-white xc-border-opacity-15 xc-px-6 xc-py-3 xc-transition-all xc-hover:bg-white xc-hover:bg-opacity-5",
      children: [
        /* @__PURE__ */ pe.jsx("img", { className: "xc-rounded-1 xc-h-6 xc-w-6", src: e, alt: "" }),
        r,
        /* @__PURE__ */ pe.jsx(WS, { className: "xc-ml-auto xc-text-gray-400" })
      ]
    }
  );
}
function fie(t) {
  const e = {
    appStoreLink: "",
    playStoreLink: "",
    chromeStoreLink: "",
    braveStoreLink: "",
    firefoxStoreLink: "",
    edgeStoreLink: ""
  };
  return t != null && t.app_store_id && (e.appStoreLink = `${iie}${t.app_store_id}`), t != null && t.play_store_id && (e.playStoreLink = `${sie}${t.play_store_id}`), t != null && t.chrome_store_id && (e.chromeStoreLink = `${oie}${t.chrome_store_id}`), t != null && t.brave_store_id && (e.braveStoreLink = `${aie}${t.brave_store_id}`), t != null && t.firefox_addon_id && (e.firefoxStoreLink = `${cie}${t.firefox_addon_id}`), t != null && t.edge_addon_id && (e.edgeStoreLink = `${uie}${t.edge_addon_id}`), e;
}
function W9(t) {
  var i, s, o;
  const { wallet: e } = t, r = (i = e.config) == null ? void 0 : i.getWallet, n = fie(r);
  return /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-flex-col xc-items-center", children: [
    /* @__PURE__ */ pe.jsx("img", { className: "xc-rounded-md xc-mb-2 xc-h-12 xc-w-12", src: (s = e.config) == null ? void 0 : s.image, alt: "" }),
    /* @__PURE__ */ pe.jsxs("p", { className: "xc-text-lg xc-font-bold", children: [
      "Install ",
      (o = e.config) == null ? void 0 : o.name,
      " to connect"
    ] }),
    /* @__PURE__ */ pe.jsx("p", { className: "xc-mb-6 xc-text-sm xc-text-gray-500", children: "Select from your preferred options below:" }),
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-grid xc-w-full xc-grid-cols-1 xc-gap-3", children: [
      (r == null ? void 0 : r.chrome_store_id) && /* @__PURE__ */ pe.jsx(
        Yc,
        {
          link: n.chromeStoreLink,
          icon: `${Gc}#chrome`,
          title: "Google Play Store"
        }
      ),
      (r == null ? void 0 : r.app_store_id) && /* @__PURE__ */ pe.jsx(
        Yc,
        {
          link: n.appStoreLink,
          icon: `${Gc}#apple-dark`,
          title: "Apple App Store"
        }
      ),
      (r == null ? void 0 : r.play_store_id) && /* @__PURE__ */ pe.jsx(
        Yc,
        {
          link: n.playStoreLink,
          icon: `${Gc}#android`,
          title: "Google Play Store"
        }
      ),
      (r == null ? void 0 : r.edge_addon_id) && /* @__PURE__ */ pe.jsx(
        Yc,
        {
          link: n.edgeStoreLink,
          icon: `${Gc}#edge`,
          title: "Microsoft Edge"
        }
      ),
      (r == null ? void 0 : r.brave_store_id) && /* @__PURE__ */ pe.jsx(
        Yc,
        {
          link: n.braveStoreLink,
          icon: `${Gc}#brave`,
          title: "Brave extension"
        }
      ),
      (r == null ? void 0 : r.firefox_addon_id) && /* @__PURE__ */ pe.jsx(
        Yc,
        {
          link: n.firefoxStoreLink,
          icon: `${Gc}#firefox`,
          title: "Mozilla Firefox"
        }
      )
    ] })
  ] });
}
function lie(t) {
  const { wallet: e } = t, [r, n] = Qt(e.installed ? "connect" : "qr"), i = cy();
  async function s(o, a) {
    var l;
    const u = await Ta.walletLogin({
      account_type: "block_chain",
      account_enum: "C",
      connector: "codatta_wallet",
      inviter_code: i.inviterCode,
      wallet_name: ((l = o.config) == null ? void 0 : l.name) || o.key,
      address: await o.getAddress(),
      chain: (await o.getChain()).toString(),
      nonce: a.nonce,
      signature: a.signature,
      message: a.message,
      source: {
        device: i.device,
        channel: i.channel,
        app: i.app
      }
    });
    await t.onLogin(u.data);
  }
  return /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-6", children: /* @__PURE__ */ pe.jsx(Pc, { title: "Connect wallet", onBack: t.onBack }) }),
    r === "qr" && /* @__PURE__ */ pe.jsx(
      q9,
      {
        wallet: e,
        onGetExtension: () => n("get-extension"),
        onSignFinish: s
      }
    ),
    r === "connect" && /* @__PURE__ */ pe.jsx(
      z9,
      {
        onShowQrCode: () => n("qr"),
        wallet: e,
        onSignFinish: s
      }
    ),
    r === "get-extension" && /* @__PURE__ */ pe.jsx(W9, { wallet: e })
  ] });
}
function hie(t) {
  const { wallet: e, onClick: r } = t, n = /* @__PURE__ */ pe.jsx("img", { className: "xc-rounded-md xc-h-5 xc-w-5", src: e.imageUrl }), i = e.name || "";
  return /* @__PURE__ */ pe.jsx(oy, { icon: n, title: i, onClick: () => r(e) });
}
function H9(t) {
  const { connector: e } = t, [r, n] = Qt(), [i, s] = Qt([]), o = wi(() => r ? i.filter((d) => d.name.toLowerCase().includes(r.toLowerCase())) : i, [r, i]);
  function a(d) {
    n(d.target.value);
  }
  async function u() {
    const d = await e.getWallets();
    s(d), console.log(d);
  }
  Dn(() => {
    u();
  }, []);
  function l(d) {
    t.onSelect(d);
  }
  return /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-6", children: /* @__PURE__ */ pe.jsx(Pc, { title: "Select wallet", onBack: t.onBack }) }),
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-mb-6 xc-flex xc-gap-3 xc-px-4 xc-py-2 xc-border xc-rounded-xl xc-w-full xc-overflow-hidden xc-items-center xc-border-opacity-15 xc-border-white focus-within:xc-border-opacity-40", children: [
      /* @__PURE__ */ pe.jsx(KS, { className: "xc-shrink-0 xc-opacity-50" }),
      /* @__PURE__ */ pe.jsx("input", { type: "text", className: "xc-flex-1 xc-bg-transparent xc-appearance-none xc-outline-none", placeholder: "Search wallet", onInput: a })
    ] }),
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-4 xc-flex xc-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar", children: o == null ? void 0 : o.map((d) => /* @__PURE__ */ pe.jsx(hie, { wallet: d, onClick: l }, d.name)) })
  ] });
}
var K9 = { exports: {} };
(function(t) {
  (function(e, r) {
    t.exports ? t.exports = r() : (e.nacl || (e.nacl = {}), e.nacl.util = r());
  })(gn, function() {
    var e = {};
    function r(n) {
      if (!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))
        throw new TypeError("invalid encoding");
    }
    return e.decodeUTF8 = function(n) {
      if (typeof n != "string") throw new TypeError("expected string");
      var i, s = unescape(encodeURIComponent(n)), o = new Uint8Array(s.length);
      for (i = 0; i < s.length; i++) o[i] = s.charCodeAt(i);
      return o;
    }, e.encodeUTF8 = function(n) {
      var i, s = [];
      for (i = 0; i < n.length; i++) s.push(String.fromCharCode(n[i]));
      return decodeURIComponent(escape(s.join("")));
    }, typeof atob > "u" ? typeof Buffer.from < "u" ? (e.encodeBase64 = function(n) {
      return Buffer.from(n).toString("base64");
    }, e.decodeBase64 = function(n) {
      return r(n), new Uint8Array(Array.prototype.slice.call(Buffer.from(n, "base64"), 0));
    }) : (e.encodeBase64 = function(n) {
      return new Buffer(n).toString("base64");
    }, e.decodeBase64 = function(n) {
      return r(n), new Uint8Array(Array.prototype.slice.call(new Buffer(n, "base64"), 0));
    }) : (e.encodeBase64 = function(n) {
      var i, s = [], o = n.length;
      for (i = 0; i < o; i++) s.push(String.fromCharCode(n[i]));
      return btoa(s.join(""));
    }, e.decodeBase64 = function(n) {
      r(n);
      var i, s = atob(n), o = new Uint8Array(s.length);
      for (i = 0; i < s.length; i++) o[i] = s.charCodeAt(i);
      return o;
    }), e;
  });
})(K9);
var die = K9.exports;
const Dl = /* @__PURE__ */ ts(die);
var V9 = { exports: {} };
(function(t) {
  (function(e) {
    var r = function(k) {
      var U, z = new Float64Array(16);
      if (k) for (U = 0; U < k.length; U++) z[U] = k[U];
      return z;
    }, n = function() {
      throw new Error("no PRNG");
    }, i = new Uint8Array(16), s = new Uint8Array(32);
    s[0] = 9;
    var o = r(), a = r([1]), u = r([56129, 1]), l = r([30883, 4953, 19914, 30187, 55467, 16705, 2637, 112, 59544, 30585, 16505, 36039, 65139, 11119, 27886, 20995]), d = r([61785, 9906, 39828, 60374, 45398, 33411, 5274, 224, 53552, 61171, 33010, 6542, 64743, 22239, 55772, 9222]), p = r([54554, 36645, 11616, 51542, 42930, 38181, 51040, 26924, 56412, 64982, 57905, 49316, 21502, 52590, 14035, 8553]), w = r([26200, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214]), A = r([41136, 18958, 6951, 50414, 58488, 44335, 6150, 12099, 55207, 15867, 153, 11085, 57099, 20417, 9344, 11139]);
    function M(k, U, z, C) {
      k[U] = z >> 24 & 255, k[U + 1] = z >> 16 & 255, k[U + 2] = z >> 8 & 255, k[U + 3] = z & 255, k[U + 4] = C >> 24 & 255, k[U + 5] = C >> 16 & 255, k[U + 6] = C >> 8 & 255, k[U + 7] = C & 255;
    }
    function N(k, U, z, C, G) {
      var j, se = 0;
      for (j = 0; j < G; j++) se |= k[U + j] ^ z[C + j];
      return (1 & se - 1 >>> 8) - 1;
    }
    function L(k, U, z, C) {
      return N(k, U, z, C, 16);
    }
    function B(k, U, z, C) {
      return N(k, U, z, C, 32);
    }
    function $(k, U, z, C) {
      for (var G = C[0] & 255 | (C[1] & 255) << 8 | (C[2] & 255) << 16 | (C[3] & 255) << 24, j = z[0] & 255 | (z[1] & 255) << 8 | (z[2] & 255) << 16 | (z[3] & 255) << 24, se = z[4] & 255 | (z[5] & 255) << 8 | (z[6] & 255) << 16 | (z[7] & 255) << 24, he = z[8] & 255 | (z[9] & 255) << 8 | (z[10] & 255) << 16 | (z[11] & 255) << 24, xe = z[12] & 255 | (z[13] & 255) << 8 | (z[14] & 255) << 16 | (z[15] & 255) << 24, Te = C[4] & 255 | (C[5] & 255) << 8 | (C[6] & 255) << 16 | (C[7] & 255) << 24, Re = U[0] & 255 | (U[1] & 255) << 8 | (U[2] & 255) << 16 | (U[3] & 255) << 24, nt = U[4] & 255 | (U[5] & 255) << 8 | (U[6] & 255) << 16 | (U[7] & 255) << 24, je = U[8] & 255 | (U[9] & 255) << 8 | (U[10] & 255) << 16 | (U[11] & 255) << 24, pt = U[12] & 255 | (U[13] & 255) << 8 | (U[14] & 255) << 16 | (U[15] & 255) << 24, it = C[8] & 255 | (C[9] & 255) << 8 | (C[10] & 255) << 16 | (C[11] & 255) << 24, et = z[16] & 255 | (z[17] & 255) << 8 | (z[18] & 255) << 16 | (z[19] & 255) << 24, St = z[20] & 255 | (z[21] & 255) << 8 | (z[22] & 255) << 16 | (z[23] & 255) << 24, Tt = z[24] & 255 | (z[25] & 255) << 8 | (z[26] & 255) << 16 | (z[27] & 255) << 24, At = z[28] & 255 | (z[29] & 255) << 8 | (z[30] & 255) << 16 | (z[31] & 255) << 24, _t = C[12] & 255 | (C[13] & 255) << 8 | (C[14] & 255) << 16 | (C[15] & 255) << 24, ht = G, xt = j, st = se, bt = he, ut = xe, ot = Te, Se = Re, Ae = nt, Ve = je, Fe = pt, Ue = it, Je = et, Lt = St, zt = Tt, Xt = At, Wt = _t, le, rr = 0; rr < 20; rr += 2)
        le = ht + Lt | 0, ut ^= le << 7 | le >>> 25, le = ut + ht | 0, Ve ^= le << 9 | le >>> 23, le = Ve + ut | 0, Lt ^= le << 13 | le >>> 19, le = Lt + Ve | 0, ht ^= le << 18 | le >>> 14, le = ot + xt | 0, Fe ^= le << 7 | le >>> 25, le = Fe + ot | 0, zt ^= le << 9 | le >>> 23, le = zt + Fe | 0, xt ^= le << 13 | le >>> 19, le = xt + zt | 0, ot ^= le << 18 | le >>> 14, le = Ue + Se | 0, Xt ^= le << 7 | le >>> 25, le = Xt + Ue | 0, st ^= le << 9 | le >>> 23, le = st + Xt | 0, Se ^= le << 13 | le >>> 19, le = Se + st | 0, Ue ^= le << 18 | le >>> 14, le = Wt + Je | 0, bt ^= le << 7 | le >>> 25, le = bt + Wt | 0, Ae ^= le << 9 | le >>> 23, le = Ae + bt | 0, Je ^= le << 13 | le >>> 19, le = Je + Ae | 0, Wt ^= le << 18 | le >>> 14, le = ht + bt | 0, xt ^= le << 7 | le >>> 25, le = xt + ht | 0, st ^= le << 9 | le >>> 23, le = st + xt | 0, bt ^= le << 13 | le >>> 19, le = bt + st | 0, ht ^= le << 18 | le >>> 14, le = ot + ut | 0, Se ^= le << 7 | le >>> 25, le = Se + ot | 0, Ae ^= le << 9 | le >>> 23, le = Ae + Se | 0, ut ^= le << 13 | le >>> 19, le = ut + Ae | 0, ot ^= le << 18 | le >>> 14, le = Ue + Fe | 0, Je ^= le << 7 | le >>> 25, le = Je + Ue | 0, Ve ^= le << 9 | le >>> 23, le = Ve + Je | 0, Fe ^= le << 13 | le >>> 19, le = Fe + Ve | 0, Ue ^= le << 18 | le >>> 14, le = Wt + Xt | 0, Lt ^= le << 7 | le >>> 25, le = Lt + Wt | 0, zt ^= le << 9 | le >>> 23, le = zt + Lt | 0, Xt ^= le << 13 | le >>> 19, le = Xt + zt | 0, Wt ^= le << 18 | le >>> 14;
      ht = ht + G | 0, xt = xt + j | 0, st = st + se | 0, bt = bt + he | 0, ut = ut + xe | 0, ot = ot + Te | 0, Se = Se + Re | 0, Ae = Ae + nt | 0, Ve = Ve + je | 0, Fe = Fe + pt | 0, Ue = Ue + it | 0, Je = Je + et | 0, Lt = Lt + St | 0, zt = zt + Tt | 0, Xt = Xt + At | 0, Wt = Wt + _t | 0, k[0] = ht >>> 0 & 255, k[1] = ht >>> 8 & 255, k[2] = ht >>> 16 & 255, k[3] = ht >>> 24 & 255, k[4] = xt >>> 0 & 255, k[5] = xt >>> 8 & 255, k[6] = xt >>> 16 & 255, k[7] = xt >>> 24 & 255, k[8] = st >>> 0 & 255, k[9] = st >>> 8 & 255, k[10] = st >>> 16 & 255, k[11] = st >>> 24 & 255, k[12] = bt >>> 0 & 255, k[13] = bt >>> 8 & 255, k[14] = bt >>> 16 & 255, k[15] = bt >>> 24 & 255, k[16] = ut >>> 0 & 255, k[17] = ut >>> 8 & 255, k[18] = ut >>> 16 & 255, k[19] = ut >>> 24 & 255, k[20] = ot >>> 0 & 255, k[21] = ot >>> 8 & 255, k[22] = ot >>> 16 & 255, k[23] = ot >>> 24 & 255, k[24] = Se >>> 0 & 255, k[25] = Se >>> 8 & 255, k[26] = Se >>> 16 & 255, k[27] = Se >>> 24 & 255, k[28] = Ae >>> 0 & 255, k[29] = Ae >>> 8 & 255, k[30] = Ae >>> 16 & 255, k[31] = Ae >>> 24 & 255, k[32] = Ve >>> 0 & 255, k[33] = Ve >>> 8 & 255, k[34] = Ve >>> 16 & 255, k[35] = Ve >>> 24 & 255, k[36] = Fe >>> 0 & 255, k[37] = Fe >>> 8 & 255, k[38] = Fe >>> 16 & 255, k[39] = Fe >>> 24 & 255, k[40] = Ue >>> 0 & 255, k[41] = Ue >>> 8 & 255, k[42] = Ue >>> 16 & 255, k[43] = Ue >>> 24 & 255, k[44] = Je >>> 0 & 255, k[45] = Je >>> 8 & 255, k[46] = Je >>> 16 & 255, k[47] = Je >>> 24 & 255, k[48] = Lt >>> 0 & 255, k[49] = Lt >>> 8 & 255, k[50] = Lt >>> 16 & 255, k[51] = Lt >>> 24 & 255, k[52] = zt >>> 0 & 255, k[53] = zt >>> 8 & 255, k[54] = zt >>> 16 & 255, k[55] = zt >>> 24 & 255, k[56] = Xt >>> 0 & 255, k[57] = Xt >>> 8 & 255, k[58] = Xt >>> 16 & 255, k[59] = Xt >>> 24 & 255, k[60] = Wt >>> 0 & 255, k[61] = Wt >>> 8 & 255, k[62] = Wt >>> 16 & 255, k[63] = Wt >>> 24 & 255;
    }
    function H(k, U, z, C) {
      for (var G = C[0] & 255 | (C[1] & 255) << 8 | (C[2] & 255) << 16 | (C[3] & 255) << 24, j = z[0] & 255 | (z[1] & 255) << 8 | (z[2] & 255) << 16 | (z[3] & 255) << 24, se = z[4] & 255 | (z[5] & 255) << 8 | (z[6] & 255) << 16 | (z[7] & 255) << 24, he = z[8] & 255 | (z[9] & 255) << 8 | (z[10] & 255) << 16 | (z[11] & 255) << 24, xe = z[12] & 255 | (z[13] & 255) << 8 | (z[14] & 255) << 16 | (z[15] & 255) << 24, Te = C[4] & 255 | (C[5] & 255) << 8 | (C[6] & 255) << 16 | (C[7] & 255) << 24, Re = U[0] & 255 | (U[1] & 255) << 8 | (U[2] & 255) << 16 | (U[3] & 255) << 24, nt = U[4] & 255 | (U[5] & 255) << 8 | (U[6] & 255) << 16 | (U[7] & 255) << 24, je = U[8] & 255 | (U[9] & 255) << 8 | (U[10] & 255) << 16 | (U[11] & 255) << 24, pt = U[12] & 255 | (U[13] & 255) << 8 | (U[14] & 255) << 16 | (U[15] & 255) << 24, it = C[8] & 255 | (C[9] & 255) << 8 | (C[10] & 255) << 16 | (C[11] & 255) << 24, et = z[16] & 255 | (z[17] & 255) << 8 | (z[18] & 255) << 16 | (z[19] & 255) << 24, St = z[20] & 255 | (z[21] & 255) << 8 | (z[22] & 255) << 16 | (z[23] & 255) << 24, Tt = z[24] & 255 | (z[25] & 255) << 8 | (z[26] & 255) << 16 | (z[27] & 255) << 24, At = z[28] & 255 | (z[29] & 255) << 8 | (z[30] & 255) << 16 | (z[31] & 255) << 24, _t = C[12] & 255 | (C[13] & 255) << 8 | (C[14] & 255) << 16 | (C[15] & 255) << 24, ht = G, xt = j, st = se, bt = he, ut = xe, ot = Te, Se = Re, Ae = nt, Ve = je, Fe = pt, Ue = it, Je = et, Lt = St, zt = Tt, Xt = At, Wt = _t, le, rr = 0; rr < 20; rr += 2)
        le = ht + Lt | 0, ut ^= le << 7 | le >>> 25, le = ut + ht | 0, Ve ^= le << 9 | le >>> 23, le = Ve + ut | 0, Lt ^= le << 13 | le >>> 19, le = Lt + Ve | 0, ht ^= le << 18 | le >>> 14, le = ot + xt | 0, Fe ^= le << 7 | le >>> 25, le = Fe + ot | 0, zt ^= le << 9 | le >>> 23, le = zt + Fe | 0, xt ^= le << 13 | le >>> 19, le = xt + zt | 0, ot ^= le << 18 | le >>> 14, le = Ue + Se | 0, Xt ^= le << 7 | le >>> 25, le = Xt + Ue | 0, st ^= le << 9 | le >>> 23, le = st + Xt | 0, Se ^= le << 13 | le >>> 19, le = Se + st | 0, Ue ^= le << 18 | le >>> 14, le = Wt + Je | 0, bt ^= le << 7 | le >>> 25, le = bt + Wt | 0, Ae ^= le << 9 | le >>> 23, le = Ae + bt | 0, Je ^= le << 13 | le >>> 19, le = Je + Ae | 0, Wt ^= le << 18 | le >>> 14, le = ht + bt | 0, xt ^= le << 7 | le >>> 25, le = xt + ht | 0, st ^= le << 9 | le >>> 23, le = st + xt | 0, bt ^= le << 13 | le >>> 19, le = bt + st | 0, ht ^= le << 18 | le >>> 14, le = ot + ut | 0, Se ^= le << 7 | le >>> 25, le = Se + ot | 0, Ae ^= le << 9 | le >>> 23, le = Ae + Se | 0, ut ^= le << 13 | le >>> 19, le = ut + Ae | 0, ot ^= le << 18 | le >>> 14, le = Ue + Fe | 0, Je ^= le << 7 | le >>> 25, le = Je + Ue | 0, Ve ^= le << 9 | le >>> 23, le = Ve + Je | 0, Fe ^= le << 13 | le >>> 19, le = Fe + Ve | 0, Ue ^= le << 18 | le >>> 14, le = Wt + Xt | 0, Lt ^= le << 7 | le >>> 25, le = Lt + Wt | 0, zt ^= le << 9 | le >>> 23, le = zt + Lt | 0, Xt ^= le << 13 | le >>> 19, le = Xt + zt | 0, Wt ^= le << 18 | le >>> 14;
      k[0] = ht >>> 0 & 255, k[1] = ht >>> 8 & 255, k[2] = ht >>> 16 & 255, k[3] = ht >>> 24 & 255, k[4] = ot >>> 0 & 255, k[5] = ot >>> 8 & 255, k[6] = ot >>> 16 & 255, k[7] = ot >>> 24 & 255, k[8] = Ue >>> 0 & 255, k[9] = Ue >>> 8 & 255, k[10] = Ue >>> 16 & 255, k[11] = Ue >>> 24 & 255, k[12] = Wt >>> 0 & 255, k[13] = Wt >>> 8 & 255, k[14] = Wt >>> 16 & 255, k[15] = Wt >>> 24 & 255, k[16] = Se >>> 0 & 255, k[17] = Se >>> 8 & 255, k[18] = Se >>> 16 & 255, k[19] = Se >>> 24 & 255, k[20] = Ae >>> 0 & 255, k[21] = Ae >>> 8 & 255, k[22] = Ae >>> 16 & 255, k[23] = Ae >>> 24 & 255, k[24] = Ve >>> 0 & 255, k[25] = Ve >>> 8 & 255, k[26] = Ve >>> 16 & 255, k[27] = Ve >>> 24 & 255, k[28] = Fe >>> 0 & 255, k[29] = Fe >>> 8 & 255, k[30] = Fe >>> 16 & 255, k[31] = Fe >>> 24 & 255;
    }
    function W(k, U, z, C) {
      $(k, U, z, C);
    }
    function V(k, U, z, C) {
      H(k, U, z, C);
    }
    var te = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);
    function R(k, U, z, C, G, j, se) {
      var he = new Uint8Array(16), xe = new Uint8Array(64), Te, Re;
      for (Re = 0; Re < 16; Re++) he[Re] = 0;
      for (Re = 0; Re < 8; Re++) he[Re] = j[Re];
      for (; G >= 64; ) {
        for (W(xe, he, se, te), Re = 0; Re < 64; Re++) k[U + Re] = z[C + Re] ^ xe[Re];
        for (Te = 1, Re = 8; Re < 16; Re++)
          Te = Te + (he[Re] & 255) | 0, he[Re] = Te & 255, Te >>>= 8;
        G -= 64, U += 64, C += 64;
      }
      if (G > 0)
        for (W(xe, he, se, te), Re = 0; Re < G; Re++) k[U + Re] = z[C + Re] ^ xe[Re];
      return 0;
    }
    function K(k, U, z, C, G) {
      var j = new Uint8Array(16), se = new Uint8Array(64), he, xe;
      for (xe = 0; xe < 16; xe++) j[xe] = 0;
      for (xe = 0; xe < 8; xe++) j[xe] = C[xe];
      for (; z >= 64; ) {
        for (W(se, j, G, te), xe = 0; xe < 64; xe++) k[U + xe] = se[xe];
        for (he = 1, xe = 8; xe < 16; xe++)
          he = he + (j[xe] & 255) | 0, j[xe] = he & 255, he >>>= 8;
        z -= 64, U += 64;
      }
      if (z > 0)
        for (W(se, j, G, te), xe = 0; xe < z; xe++) k[U + xe] = se[xe];
      return 0;
    }
    function ge(k, U, z, C, G) {
      var j = new Uint8Array(32);
      V(j, C, G, te);
      for (var se = new Uint8Array(8), he = 0; he < 8; he++) se[he] = C[he + 16];
      return K(k, U, z, se, j);
    }
    function Ee(k, U, z, C, G, j, se) {
      var he = new Uint8Array(32);
      V(he, j, se, te);
      for (var xe = new Uint8Array(8), Te = 0; Te < 8; Te++) xe[Te] = j[Te + 16];
      return R(k, U, z, C, G, xe, he);
    }
    var Y = function(k) {
      this.buffer = new Uint8Array(16), this.r = new Uint16Array(10), this.h = new Uint16Array(10), this.pad = new Uint16Array(8), this.leftover = 0, this.fin = 0;
      var U, z, C, G, j, se, he, xe;
      U = k[0] & 255 | (k[1] & 255) << 8, this.r[0] = U & 8191, z = k[2] & 255 | (k[3] & 255) << 8, this.r[1] = (U >>> 13 | z << 3) & 8191, C = k[4] & 255 | (k[5] & 255) << 8, this.r[2] = (z >>> 10 | C << 6) & 7939, G = k[6] & 255 | (k[7] & 255) << 8, this.r[3] = (C >>> 7 | G << 9) & 8191, j = k[8] & 255 | (k[9] & 255) << 8, this.r[4] = (G >>> 4 | j << 12) & 255, this.r[5] = j >>> 1 & 8190, se = k[10] & 255 | (k[11] & 255) << 8, this.r[6] = (j >>> 14 | se << 2) & 8191, he = k[12] & 255 | (k[13] & 255) << 8, this.r[7] = (se >>> 11 | he << 5) & 8065, xe = k[14] & 255 | (k[15] & 255) << 8, this.r[8] = (he >>> 8 | xe << 8) & 8191, this.r[9] = xe >>> 5 & 127, this.pad[0] = k[16] & 255 | (k[17] & 255) << 8, this.pad[1] = k[18] & 255 | (k[19] & 255) << 8, this.pad[2] = k[20] & 255 | (k[21] & 255) << 8, this.pad[3] = k[22] & 255 | (k[23] & 255) << 8, this.pad[4] = k[24] & 255 | (k[25] & 255) << 8, this.pad[5] = k[26] & 255 | (k[27] & 255) << 8, this.pad[6] = k[28] & 255 | (k[29] & 255) << 8, this.pad[7] = k[30] & 255 | (k[31] & 255) << 8;
    };
    Y.prototype.blocks = function(k, U, z) {
      for (var C = this.fin ? 0 : 2048, G, j, se, he, xe, Te, Re, nt, je, pt, it, et, St, Tt, At, _t, ht, xt, st, bt = this.h[0], ut = this.h[1], ot = this.h[2], Se = this.h[3], Ae = this.h[4], Ve = this.h[5], Fe = this.h[6], Ue = this.h[7], Je = this.h[8], Lt = this.h[9], zt = this.r[0], Xt = this.r[1], Wt = this.r[2], le = this.r[3], rr = this.r[4], dr = this.r[5], pr = this.r[6], Zt = this.r[7], gr = this.r[8], lr = this.r[9]; z >= 16; )
        G = k[U + 0] & 255 | (k[U + 1] & 255) << 8, bt += G & 8191, j = k[U + 2] & 255 | (k[U + 3] & 255) << 8, ut += (G >>> 13 | j << 3) & 8191, se = k[U + 4] & 255 | (k[U + 5] & 255) << 8, ot += (j >>> 10 | se << 6) & 8191, he = k[U + 6] & 255 | (k[U + 7] & 255) << 8, Se += (se >>> 7 | he << 9) & 8191, xe = k[U + 8] & 255 | (k[U + 9] & 255) << 8, Ae += (he >>> 4 | xe << 12) & 8191, Ve += xe >>> 1 & 8191, Te = k[U + 10] & 255 | (k[U + 11] & 255) << 8, Fe += (xe >>> 14 | Te << 2) & 8191, Re = k[U + 12] & 255 | (k[U + 13] & 255) << 8, Ue += (Te >>> 11 | Re << 5) & 8191, nt = k[U + 14] & 255 | (k[U + 15] & 255) << 8, Je += (Re >>> 8 | nt << 8) & 8191, Lt += nt >>> 5 | C, je = 0, pt = je, pt += bt * zt, pt += ut * (5 * lr), pt += ot * (5 * gr), pt += Se * (5 * Zt), pt += Ae * (5 * pr), je = pt >>> 13, pt &= 8191, pt += Ve * (5 * dr), pt += Fe * (5 * rr), pt += Ue * (5 * le), pt += Je * (5 * Wt), pt += Lt * (5 * Xt), je += pt >>> 13, pt &= 8191, it = je, it += bt * Xt, it += ut * zt, it += ot * (5 * lr), it += Se * (5 * gr), it += Ae * (5 * Zt), je = it >>> 13, it &= 8191, it += Ve * (5 * pr), it += Fe * (5 * dr), it += Ue * (5 * rr), it += Je * (5 * le), it += Lt * (5 * Wt), je += it >>> 13, it &= 8191, et = je, et += bt * Wt, et += ut * Xt, et += ot * zt, et += Se * (5 * lr), et += Ae * (5 * gr), je = et >>> 13, et &= 8191, et += Ve * (5 * Zt), et += Fe * (5 * pr), et += Ue * (5 * dr), et += Je * (5 * rr), et += Lt * (5 * le), je += et >>> 13, et &= 8191, St = je, St += bt * le, St += ut * Wt, St += ot * Xt, St += Se * zt, St += Ae * (5 * lr), je = St >>> 13, St &= 8191, St += Ve * (5 * gr), St += Fe * (5 * Zt), St += Ue * (5 * pr), St += Je * (5 * dr), St += Lt * (5 * rr), je += St >>> 13, St &= 8191, Tt = je, Tt += bt * rr, Tt += ut * le, Tt += ot * Wt, Tt += Se * Xt, Tt += Ae * zt, je = Tt >>> 13, Tt &= 8191, Tt += Ve * (5 * lr), Tt += Fe * (5 * gr), Tt += Ue * (5 * Zt), Tt += Je * (5 * pr), Tt += Lt * (5 * dr), je += Tt >>> 13, Tt &= 8191, At = je, At += bt * dr, At += ut * rr, At += ot * le, At += Se * Wt, At += Ae * Xt, je = At >>> 13, At &= 8191, At += Ve * zt, At += Fe * (5 * lr), At += Ue * (5 * gr), At += Je * (5 * Zt), At += Lt * (5 * pr), je += At >>> 13, At &= 8191, _t = je, _t += bt * pr, _t += ut * dr, _t += ot * rr, _t += Se * le, _t += Ae * Wt, je = _t >>> 13, _t &= 8191, _t += Ve * Xt, _t += Fe * zt, _t += Ue * (5 * lr), _t += Je * (5 * gr), _t += Lt * (5 * Zt), je += _t >>> 13, _t &= 8191, ht = je, ht += bt * Zt, ht += ut * pr, ht += ot * dr, ht += Se * rr, ht += Ae * le, je = ht >>> 13, ht &= 8191, ht += Ve * Wt, ht += Fe * Xt, ht += Ue * zt, ht += Je * (5 * lr), ht += Lt * (5 * gr), je += ht >>> 13, ht &= 8191, xt = je, xt += bt * gr, xt += ut * Zt, xt += ot * pr, xt += Se * dr, xt += Ae * rr, je = xt >>> 13, xt &= 8191, xt += Ve * le, xt += Fe * Wt, xt += Ue * Xt, xt += Je * zt, xt += Lt * (5 * lr), je += xt >>> 13, xt &= 8191, st = je, st += bt * lr, st += ut * gr, st += ot * Zt, st += Se * pr, st += Ae * dr, je = st >>> 13, st &= 8191, st += Ve * rr, st += Fe * le, st += Ue * Wt, st += Je * Xt, st += Lt * zt, je += st >>> 13, st &= 8191, je = (je << 2) + je | 0, je = je + pt | 0, pt = je & 8191, je = je >>> 13, it += je, bt = pt, ut = it, ot = et, Se = St, Ae = Tt, Ve = At, Fe = _t, Ue = ht, Je = xt, Lt = st, U += 16, z -= 16;
      this.h[0] = bt, this.h[1] = ut, this.h[2] = ot, this.h[3] = Se, this.h[4] = Ae, this.h[5] = Ve, this.h[6] = Fe, this.h[7] = Ue, this.h[8] = Je, this.h[9] = Lt;
    }, Y.prototype.finish = function(k, U) {
      var z = new Uint16Array(10), C, G, j, se;
      if (this.leftover) {
        for (se = this.leftover, this.buffer[se++] = 1; se < 16; se++) this.buffer[se] = 0;
        this.fin = 1, this.blocks(this.buffer, 0, 16);
      }
      for (C = this.h[1] >>> 13, this.h[1] &= 8191, se = 2; se < 10; se++)
        this.h[se] += C, C = this.h[se] >>> 13, this.h[se] &= 8191;
      for (this.h[0] += C * 5, C = this.h[0] >>> 13, this.h[0] &= 8191, this.h[1] += C, C = this.h[1] >>> 13, this.h[1] &= 8191, this.h[2] += C, z[0] = this.h[0] + 5, C = z[0] >>> 13, z[0] &= 8191, se = 1; se < 10; se++)
        z[se] = this.h[se] + C, C = z[se] >>> 13, z[se] &= 8191;
      for (z[9] -= 8192, G = (C ^ 1) - 1, se = 0; se < 10; se++) z[se] &= G;
      for (G = ~G, se = 0; se < 10; se++) this.h[se] = this.h[se] & G | z[se];
      for (this.h[0] = (this.h[0] | this.h[1] << 13) & 65535, this.h[1] = (this.h[1] >>> 3 | this.h[2] << 10) & 65535, this.h[2] = (this.h[2] >>> 6 | this.h[3] << 7) & 65535, this.h[3] = (this.h[3] >>> 9 | this.h[4] << 4) & 65535, this.h[4] = (this.h[4] >>> 12 | this.h[5] << 1 | this.h[6] << 14) & 65535, this.h[5] = (this.h[6] >>> 2 | this.h[7] << 11) & 65535, this.h[6] = (this.h[7] >>> 5 | this.h[8] << 8) & 65535, this.h[7] = (this.h[8] >>> 8 | this.h[9] << 5) & 65535, j = this.h[0] + this.pad[0], this.h[0] = j & 65535, se = 1; se < 8; se++)
        j = (this.h[se] + this.pad[se] | 0) + (j >>> 16) | 0, this.h[se] = j & 65535;
      k[U + 0] = this.h[0] >>> 0 & 255, k[U + 1] = this.h[0] >>> 8 & 255, k[U + 2] = this.h[1] >>> 0 & 255, k[U + 3] = this.h[1] >>> 8 & 255, k[U + 4] = this.h[2] >>> 0 & 255, k[U + 5] = this.h[2] >>> 8 & 255, k[U + 6] = this.h[3] >>> 0 & 255, k[U + 7] = this.h[3] >>> 8 & 255, k[U + 8] = this.h[4] >>> 0 & 255, k[U + 9] = this.h[4] >>> 8 & 255, k[U + 10] = this.h[5] >>> 0 & 255, k[U + 11] = this.h[5] >>> 8 & 255, k[U + 12] = this.h[6] >>> 0 & 255, k[U + 13] = this.h[6] >>> 8 & 255, k[U + 14] = this.h[7] >>> 0 & 255, k[U + 15] = this.h[7] >>> 8 & 255;
    }, Y.prototype.update = function(k, U, z) {
      var C, G;
      if (this.leftover) {
        for (G = 16 - this.leftover, G > z && (G = z), C = 0; C < G; C++)
          this.buffer[this.leftover + C] = k[U + C];
        if (z -= G, U += G, this.leftover += G, this.leftover < 16)
          return;
        this.blocks(this.buffer, 0, 16), this.leftover = 0;
      }
      if (z >= 16 && (G = z - z % 16, this.blocks(k, U, G), U += G, z -= G), z) {
        for (C = 0; C < z; C++)
          this.buffer[this.leftover + C] = k[U + C];
        this.leftover += z;
      }
    };
    function S(k, U, z, C, G, j) {
      var se = new Y(j);
      return se.update(z, C, G), se.finish(k, U), 0;
    }
    function m(k, U, z, C, G, j) {
      var se = new Uint8Array(16);
      return S(se, 0, z, C, G, j), L(k, U, se, 0);
    }
    function f(k, U, z, C, G) {
      var j;
      if (z < 32) return -1;
      for (Ee(k, 0, U, 0, z, C, G), S(k, 16, k, 32, z - 32, k), j = 0; j < 16; j++) k[j] = 0;
      return 0;
    }
    function g(k, U, z, C, G) {
      var j, se = new Uint8Array(32);
      if (z < 32 || (ge(se, 0, 32, C, G), m(U, 16, U, 32, z - 32, se) !== 0)) return -1;
      for (Ee(k, 0, U, 0, z, C, G), j = 0; j < 32; j++) k[j] = 0;
      return 0;
    }
    function b(k, U) {
      var z;
      for (z = 0; z < 16; z++) k[z] = U[z] | 0;
    }
    function x(k) {
      var U, z, C = 1;
      for (U = 0; U < 16; U++)
        z = k[U] + C + 65535, C = Math.floor(z / 65536), k[U] = z - C * 65536;
      k[0] += C - 1 + 37 * (C - 1);
    }
    function _(k, U, z) {
      for (var C, G = ~(z - 1), j = 0; j < 16; j++)
        C = G & (k[j] ^ U[j]), k[j] ^= C, U[j] ^= C;
    }
    function E(k, U) {
      var z, C, G, j = r(), se = r();
      for (z = 0; z < 16; z++) se[z] = U[z];
      for (x(se), x(se), x(se), C = 0; C < 2; C++) {
        for (j[0] = se[0] - 65517, z = 1; z < 15; z++)
          j[z] = se[z] - 65535 - (j[z - 1] >> 16 & 1), j[z - 1] &= 65535;
        j[15] = se[15] - 32767 - (j[14] >> 16 & 1), G = j[15] >> 16 & 1, j[14] &= 65535, _(se, j, 1 - G);
      }
      for (z = 0; z < 16; z++)
        k[2 * z] = se[z] & 255, k[2 * z + 1] = se[z] >> 8;
    }
    function v(k, U) {
      var z = new Uint8Array(32), C = new Uint8Array(32);
      return E(z, k), E(C, U), B(z, 0, C, 0);
    }
    function P(k) {
      var U = new Uint8Array(32);
      return E(U, k), U[0] & 1;
    }
    function I(k, U) {
      var z;
      for (z = 0; z < 16; z++) k[z] = U[2 * z] + (U[2 * z + 1] << 8);
      k[15] &= 32767;
    }
    function F(k, U, z) {
      for (var C = 0; C < 16; C++) k[C] = U[C] + z[C];
    }
    function ce(k, U, z) {
      for (var C = 0; C < 16; C++) k[C] = U[C] - z[C];
    }
    function D(k, U, z) {
      var C, G, j = 0, se = 0, he = 0, xe = 0, Te = 0, Re = 0, nt = 0, je = 0, pt = 0, it = 0, et = 0, St = 0, Tt = 0, At = 0, _t = 0, ht = 0, xt = 0, st = 0, bt = 0, ut = 0, ot = 0, Se = 0, Ae = 0, Ve = 0, Fe = 0, Ue = 0, Je = 0, Lt = 0, zt = 0, Xt = 0, Wt = 0, le = z[0], rr = z[1], dr = z[2], pr = z[3], Zt = z[4], gr = z[5], lr = z[6], Rr = z[7], mr = z[8], yr = z[9], $r = z[10], Br = z[11], Ir = z[12], nn = z[13], sn = z[14], on = z[15];
      C = U[0], j += C * le, se += C * rr, he += C * dr, xe += C * pr, Te += C * Zt, Re += C * gr, nt += C * lr, je += C * Rr, pt += C * mr, it += C * yr, et += C * $r, St += C * Br, Tt += C * Ir, At += C * nn, _t += C * sn, ht += C * on, C = U[1], se += C * le, he += C * rr, xe += C * dr, Te += C * pr, Re += C * Zt, nt += C * gr, je += C * lr, pt += C * Rr, it += C * mr, et += C * yr, St += C * $r, Tt += C * Br, At += C * Ir, _t += C * nn, ht += C * sn, xt += C * on, C = U[2], he += C * le, xe += C * rr, Te += C * dr, Re += C * pr, nt += C * Zt, je += C * gr, pt += C * lr, it += C * Rr, et += C * mr, St += C * yr, Tt += C * $r, At += C * Br, _t += C * Ir, ht += C * nn, xt += C * sn, st += C * on, C = U[3], xe += C * le, Te += C * rr, Re += C * dr, nt += C * pr, je += C * Zt, pt += C * gr, it += C * lr, et += C * Rr, St += C * mr, Tt += C * yr, At += C * $r, _t += C * Br, ht += C * Ir, xt += C * nn, st += C * sn, bt += C * on, C = U[4], Te += C * le, Re += C * rr, nt += C * dr, je += C * pr, pt += C * Zt, it += C * gr, et += C * lr, St += C * Rr, Tt += C * mr, At += C * yr, _t += C * $r, ht += C * Br, xt += C * Ir, st += C * nn, bt += C * sn, ut += C * on, C = U[5], Re += C * le, nt += C * rr, je += C * dr, pt += C * pr, it += C * Zt, et += C * gr, St += C * lr, Tt += C * Rr, At += C * mr, _t += C * yr, ht += C * $r, xt += C * Br, st += C * Ir, bt += C * nn, ut += C * sn, ot += C * on, C = U[6], nt += C * le, je += C * rr, pt += C * dr, it += C * pr, et += C * Zt, St += C * gr, Tt += C * lr, At += C * Rr, _t += C * mr, ht += C * yr, xt += C * $r, st += C * Br, bt += C * Ir, ut += C * nn, ot += C * sn, Se += C * on, C = U[7], je += C * le, pt += C * rr, it += C * dr, et += C * pr, St += C * Zt, Tt += C * gr, At += C * lr, _t += C * Rr, ht += C * mr, xt += C * yr, st += C * $r, bt += C * Br, ut += C * Ir, ot += C * nn, Se += C * sn, Ae += C * on, C = U[8], pt += C * le, it += C * rr, et += C * dr, St += C * pr, Tt += C * Zt, At += C * gr, _t += C * lr, ht += C * Rr, xt += C * mr, st += C * yr, bt += C * $r, ut += C * Br, ot += C * Ir, Se += C * nn, Ae += C * sn, Ve += C * on, C = U[9], it += C * le, et += C * rr, St += C * dr, Tt += C * pr, At += C * Zt, _t += C * gr, ht += C * lr, xt += C * Rr, st += C * mr, bt += C * yr, ut += C * $r, ot += C * Br, Se += C * Ir, Ae += C * nn, Ve += C * sn, Fe += C * on, C = U[10], et += C * le, St += C * rr, Tt += C * dr, At += C * pr, _t += C * Zt, ht += C * gr, xt += C * lr, st += C * Rr, bt += C * mr, ut += C * yr, ot += C * $r, Se += C * Br, Ae += C * Ir, Ve += C * nn, Fe += C * sn, Ue += C * on, C = U[11], St += C * le, Tt += C * rr, At += C * dr, _t += C * pr, ht += C * Zt, xt += C * gr, st += C * lr, bt += C * Rr, ut += C * mr, ot += C * yr, Se += C * $r, Ae += C * Br, Ve += C * Ir, Fe += C * nn, Ue += C * sn, Je += C * on, C = U[12], Tt += C * le, At += C * rr, _t += C * dr, ht += C * pr, xt += C * Zt, st += C * gr, bt += C * lr, ut += C * Rr, ot += C * mr, Se += C * yr, Ae += C * $r, Ve += C * Br, Fe += C * Ir, Ue += C * nn, Je += C * sn, Lt += C * on, C = U[13], At += C * le, _t += C * rr, ht += C * dr, xt += C * pr, st += C * Zt, bt += C * gr, ut += C * lr, ot += C * Rr, Se += C * mr, Ae += C * yr, Ve += C * $r, Fe += C * Br, Ue += C * Ir, Je += C * nn, Lt += C * sn, zt += C * on, C = U[14], _t += C * le, ht += C * rr, xt += C * dr, st += C * pr, bt += C * Zt, ut += C * gr, ot += C * lr, Se += C * Rr, Ae += C * mr, Ve += C * yr, Fe += C * $r, Ue += C * Br, Je += C * Ir, Lt += C * nn, zt += C * sn, Xt += C * on, C = U[15], ht += C * le, xt += C * rr, st += C * dr, bt += C * pr, ut += C * Zt, ot += C * gr, Se += C * lr, Ae += C * Rr, Ve += C * mr, Fe += C * yr, Ue += C * $r, Je += C * Br, Lt += C * Ir, zt += C * nn, Xt += C * sn, Wt += C * on, j += 38 * xt, se += 38 * st, he += 38 * bt, xe += 38 * ut, Te += 38 * ot, Re += 38 * Se, nt += 38 * Ae, je += 38 * Ve, pt += 38 * Fe, it += 38 * Ue, et += 38 * Je, St += 38 * Lt, Tt += 38 * zt, At += 38 * Xt, _t += 38 * Wt, G = 1, C = j + G + 65535, G = Math.floor(C / 65536), j = C - G * 65536, C = se + G + 65535, G = Math.floor(C / 65536), se = C - G * 65536, C = he + G + 65535, G = Math.floor(C / 65536), he = C - G * 65536, C = xe + G + 65535, G = Math.floor(C / 65536), xe = C - G * 65536, C = Te + G + 65535, G = Math.floor(C / 65536), Te = C - G * 65536, C = Re + G + 65535, G = Math.floor(C / 65536), Re = C - G * 65536, C = nt + G + 65535, G = Math.floor(C / 65536), nt = C - G * 65536, C = je + G + 65535, G = Math.floor(C / 65536), je = C - G * 65536, C = pt + G + 65535, G = Math.floor(C / 65536), pt = C - G * 65536, C = it + G + 65535, G = Math.floor(C / 65536), it = C - G * 65536, C = et + G + 65535, G = Math.floor(C / 65536), et = C - G * 65536, C = St + G + 65535, G = Math.floor(C / 65536), St = C - G * 65536, C = Tt + G + 65535, G = Math.floor(C / 65536), Tt = C - G * 65536, C = At + G + 65535, G = Math.floor(C / 65536), At = C - G * 65536, C = _t + G + 65535, G = Math.floor(C / 65536), _t = C - G * 65536, C = ht + G + 65535, G = Math.floor(C / 65536), ht = C - G * 65536, j += G - 1 + 37 * (G - 1), G = 1, C = j + G + 65535, G = Math.floor(C / 65536), j = C - G * 65536, C = se + G + 65535, G = Math.floor(C / 65536), se = C - G * 65536, C = he + G + 65535, G = Math.floor(C / 65536), he = C - G * 65536, C = xe + G + 65535, G = Math.floor(C / 65536), xe = C - G * 65536, C = Te + G + 65535, G = Math.floor(C / 65536), Te = C - G * 65536, C = Re + G + 65535, G = Math.floor(C / 65536), Re = C - G * 65536, C = nt + G + 65535, G = Math.floor(C / 65536), nt = C - G * 65536, C = je + G + 65535, G = Math.floor(C / 65536), je = C - G * 65536, C = pt + G + 65535, G = Math.floor(C / 65536), pt = C - G * 65536, C = it + G + 65535, G = Math.floor(C / 65536), it = C - G * 65536, C = et + G + 65535, G = Math.floor(C / 65536), et = C - G * 65536, C = St + G + 65535, G = Math.floor(C / 65536), St = C - G * 65536, C = Tt + G + 65535, G = Math.floor(C / 65536), Tt = C - G * 65536, C = At + G + 65535, G = Math.floor(C / 65536), At = C - G * 65536, C = _t + G + 65535, G = Math.floor(C / 65536), _t = C - G * 65536, C = ht + G + 65535, G = Math.floor(C / 65536), ht = C - G * 65536, j += G - 1 + 37 * (G - 1), k[0] = j, k[1] = se, k[2] = he, k[3] = xe, k[4] = Te, k[5] = Re, k[6] = nt, k[7] = je, k[8] = pt, k[9] = it, k[10] = et, k[11] = St, k[12] = Tt, k[13] = At, k[14] = _t, k[15] = ht;
    }
    function oe(k, U) {
      D(k, U, U);
    }
    function Z(k, U) {
      var z = r(), C;
      for (C = 0; C < 16; C++) z[C] = U[C];
      for (C = 253; C >= 0; C--)
        oe(z, z), C !== 2 && C !== 4 && D(z, z, U);
      for (C = 0; C < 16; C++) k[C] = z[C];
    }
    function J(k, U) {
      var z = r(), C;
      for (C = 0; C < 16; C++) z[C] = U[C];
      for (C = 250; C >= 0; C--)
        oe(z, z), C !== 1 && D(z, z, U);
      for (C = 0; C < 16; C++) k[C] = z[C];
    }
    function Q(k, U, z) {
      var C = new Uint8Array(32), G = new Float64Array(80), j, se, he = r(), xe = r(), Te = r(), Re = r(), nt = r(), je = r();
      for (se = 0; se < 31; se++) C[se] = U[se];
      for (C[31] = U[31] & 127 | 64, C[0] &= 248, I(G, z), se = 0; se < 16; se++)
        xe[se] = G[se], Re[se] = he[se] = Te[se] = 0;
      for (he[0] = Re[0] = 1, se = 254; se >= 0; --se)
        j = C[se >>> 3] >>> (se & 7) & 1, _(he, xe, j), _(Te, Re, j), F(nt, he, Te), ce(he, he, Te), F(Te, xe, Re), ce(xe, xe, Re), oe(Re, nt), oe(je, he), D(he, Te, he), D(Te, xe, nt), F(nt, he, Te), ce(he, he, Te), oe(xe, he), ce(Te, Re, je), D(he, Te, u), F(he, he, Re), D(Te, Te, he), D(he, Re, je), D(Re, xe, G), oe(xe, nt), _(he, xe, j), _(Te, Re, j);
      for (se = 0; se < 16; se++)
        G[se + 16] = he[se], G[se + 32] = Te[se], G[se + 48] = xe[se], G[se + 64] = Re[se];
      var pt = G.subarray(32), it = G.subarray(16);
      return Z(pt, pt), D(it, it, pt), E(k, it), 0;
    }
    function T(k, U) {
      return Q(k, U, s);
    }
    function X(k, U) {
      return n(U, 32), T(k, U);
    }
    function re(k, U, z) {
      var C = new Uint8Array(32);
      return Q(C, z, U), V(k, i, C, te);
    }
    var de = f, ie = g;
    function ue(k, U, z, C, G, j) {
      var se = new Uint8Array(32);
      return re(se, G, j), de(k, U, z, C, se);
    }
    function ve(k, U, z, C, G, j) {
      var se = new Uint8Array(32);
      return re(se, G, j), ie(k, U, z, C, se);
    }
    var Pe = [
      1116352408,
      3609767458,
      1899447441,
      602891725,
      3049323471,
      3964484399,
      3921009573,
      2173295548,
      961987163,
      4081628472,
      1508970993,
      3053834265,
      2453635748,
      2937671579,
      2870763221,
      3664609560,
      3624381080,
      2734883394,
      310598401,
      1164996542,
      607225278,
      1323610764,
      1426881987,
      3590304994,
      1925078388,
      4068182383,
      2162078206,
      991336113,
      2614888103,
      633803317,
      3248222580,
      3479774868,
      3835390401,
      2666613458,
      4022224774,
      944711139,
      264347078,
      2341262773,
      604807628,
      2007800933,
      770255983,
      1495990901,
      1249150122,
      1856431235,
      1555081692,
      3175218132,
      1996064986,
      2198950837,
      2554220882,
      3999719339,
      2821834349,
      766784016,
      2952996808,
      2566594879,
      3210313671,
      3203337956,
      3336571891,
      1034457026,
      3584528711,
      2466948901,
      113926993,
      3758326383,
      338241895,
      168717936,
      666307205,
      1188179964,
      773529912,
      1546045734,
      1294757372,
      1522805485,
      1396182291,
      2643833823,
      1695183700,
      2343527390,
      1986661051,
      1014477480,
      2177026350,
      1206759142,
      2456956037,
      344077627,
      2730485921,
      1290863460,
      2820302411,
      3158454273,
      3259730800,
      3505952657,
      3345764771,
      106217008,
      3516065817,
      3606008344,
      3600352804,
      1432725776,
      4094571909,
      1467031594,
      275423344,
      851169720,
      430227734,
      3100823752,
      506948616,
      1363258195,
      659060556,
      3750685593,
      883997877,
      3785050280,
      958139571,
      3318307427,
      1322822218,
      3812723403,
      1537002063,
      2003034995,
      1747873779,
      3602036899,
      1955562222,
      1575990012,
      2024104815,
      1125592928,
      2227730452,
      2716904306,
      2361852424,
      442776044,
      2428436474,
      593698344,
      2756734187,
      3733110249,
      3204031479,
      2999351573,
      3329325298,
      3815920427,
      3391569614,
      3928383900,
      3515267271,
      566280711,
      3940187606,
      3454069534,
      4118630271,
      4000239992,
      116418474,
      1914138554,
      174292421,
      2731055270,
      289380356,
      3203993006,
      460393269,
      320620315,
      685471733,
      587496836,
      852142971,
      1086792851,
      1017036298,
      365543100,
      1126000580,
      2618297676,
      1288033470,
      3409855158,
      1501505948,
      4234509866,
      1607167915,
      987167468,
      1816402316,
      1246189591
    ];
    function De(k, U, z, C) {
      for (var G = new Int32Array(16), j = new Int32Array(16), se, he, xe, Te, Re, nt, je, pt, it, et, St, Tt, At, _t, ht, xt, st, bt, ut, ot, Se, Ae, Ve, Fe, Ue, Je, Lt = k[0], zt = k[1], Xt = k[2], Wt = k[3], le = k[4], rr = k[5], dr = k[6], pr = k[7], Zt = U[0], gr = U[1], lr = U[2], Rr = U[3], mr = U[4], yr = U[5], $r = U[6], Br = U[7], Ir = 0; C >= 128; ) {
        for (ut = 0; ut < 16; ut++)
          ot = 8 * ut + Ir, G[ut] = z[ot + 0] << 24 | z[ot + 1] << 16 | z[ot + 2] << 8 | z[ot + 3], j[ut] = z[ot + 4] << 24 | z[ot + 5] << 16 | z[ot + 6] << 8 | z[ot + 7];
        for (ut = 0; ut < 80; ut++)
          if (se = Lt, he = zt, xe = Xt, Te = Wt, Re = le, nt = rr, je = dr, pt = pr, it = Zt, et = gr, St = lr, Tt = Rr, At = mr, _t = yr, ht = $r, xt = Br, Se = pr, Ae = Br, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = (le >>> 14 | mr << 18) ^ (le >>> 18 | mr << 14) ^ (mr >>> 9 | le << 23), Ae = (mr >>> 14 | le << 18) ^ (mr >>> 18 | le << 14) ^ (le >>> 9 | mr << 23), Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Se = le & rr ^ ~le & dr, Ae = mr & yr ^ ~mr & $r, Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Se = Pe[ut * 2], Ae = Pe[ut * 2 + 1], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Se = G[ut % 16], Ae = j[ut % 16], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, st = Ue & 65535 | Je << 16, bt = Ve & 65535 | Fe << 16, Se = st, Ae = bt, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = (Lt >>> 28 | Zt << 4) ^ (Zt >>> 2 | Lt << 30) ^ (Zt >>> 7 | Lt << 25), Ae = (Zt >>> 28 | Lt << 4) ^ (Lt >>> 2 | Zt << 30) ^ (Lt >>> 7 | Zt << 25), Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Se = Lt & zt ^ Lt & Xt ^ zt & Xt, Ae = Zt & gr ^ Zt & lr ^ gr & lr, Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, pt = Ue & 65535 | Je << 16, xt = Ve & 65535 | Fe << 16, Se = Te, Ae = Tt, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = st, Ae = bt, Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, Te = Ue & 65535 | Je << 16, Tt = Ve & 65535 | Fe << 16, zt = se, Xt = he, Wt = xe, le = Te, rr = Re, dr = nt, pr = je, Lt = pt, gr = it, lr = et, Rr = St, mr = Tt, yr = At, $r = _t, Br = ht, Zt = xt, ut % 16 === 15)
            for (ot = 0; ot < 16; ot++)
              Se = G[ot], Ae = j[ot], Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = G[(ot + 9) % 16], Ae = j[(ot + 9) % 16], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, st = G[(ot + 1) % 16], bt = j[(ot + 1) % 16], Se = (st >>> 1 | bt << 31) ^ (st >>> 8 | bt << 24) ^ st >>> 7, Ae = (bt >>> 1 | st << 31) ^ (bt >>> 8 | st << 24) ^ (bt >>> 7 | st << 25), Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, st = G[(ot + 14) % 16], bt = j[(ot + 14) % 16], Se = (st >>> 19 | bt << 13) ^ (bt >>> 29 | st << 3) ^ st >>> 6, Ae = (bt >>> 19 | st << 13) ^ (st >>> 29 | bt << 3) ^ (bt >>> 6 | st << 26), Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, G[ot] = Ue & 65535 | Je << 16, j[ot] = Ve & 65535 | Fe << 16;
        Se = Lt, Ae = Zt, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[0], Ae = U[0], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[0] = Lt = Ue & 65535 | Je << 16, U[0] = Zt = Ve & 65535 | Fe << 16, Se = zt, Ae = gr, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[1], Ae = U[1], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[1] = zt = Ue & 65535 | Je << 16, U[1] = gr = Ve & 65535 | Fe << 16, Se = Xt, Ae = lr, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[2], Ae = U[2], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[2] = Xt = Ue & 65535 | Je << 16, U[2] = lr = Ve & 65535 | Fe << 16, Se = Wt, Ae = Rr, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[3], Ae = U[3], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[3] = Wt = Ue & 65535 | Je << 16, U[3] = Rr = Ve & 65535 | Fe << 16, Se = le, Ae = mr, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[4], Ae = U[4], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[4] = le = Ue & 65535 | Je << 16, U[4] = mr = Ve & 65535 | Fe << 16, Se = rr, Ae = yr, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[5], Ae = U[5], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[5] = rr = Ue & 65535 | Je << 16, U[5] = yr = Ve & 65535 | Fe << 16, Se = dr, Ae = $r, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[6], Ae = U[6], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[6] = dr = Ue & 65535 | Je << 16, U[6] = $r = Ve & 65535 | Fe << 16, Se = pr, Ae = Br, Ve = Ae & 65535, Fe = Ae >>> 16, Ue = Se & 65535, Je = Se >>> 16, Se = k[7], Ae = U[7], Ve += Ae & 65535, Fe += Ae >>> 16, Ue += Se & 65535, Je += Se >>> 16, Fe += Ve >>> 16, Ue += Fe >>> 16, Je += Ue >>> 16, k[7] = pr = Ue & 65535 | Je << 16, U[7] = Br = Ve & 65535 | Fe << 16, Ir += 128, C -= 128;
      }
      return C;
    }
    function Ce(k, U, z) {
      var C = new Int32Array(8), G = new Int32Array(8), j = new Uint8Array(256), se, he = z;
      for (C[0] = 1779033703, C[1] = 3144134277, C[2] = 1013904242, C[3] = 2773480762, C[4] = 1359893119, C[5] = 2600822924, C[6] = 528734635, C[7] = 1541459225, G[0] = 4089235720, G[1] = 2227873595, G[2] = 4271175723, G[3] = 1595750129, G[4] = 2917565137, G[5] = 725511199, G[6] = 4215389547, G[7] = 327033209, De(C, G, U, z), z %= 128, se = 0; se < z; se++) j[se] = U[he - z + se];
      for (j[z] = 128, z = 256 - 128 * (z < 112 ? 1 : 0), j[z - 9] = 0, M(j, z - 8, he / 536870912 | 0, he << 3), De(C, G, j, z), se = 0; se < 8; se++) M(k, 8 * se, C[se], G[se]);
      return 0;
    }
    function $e(k, U) {
      var z = r(), C = r(), G = r(), j = r(), se = r(), he = r(), xe = r(), Te = r(), Re = r();
      ce(z, k[1], k[0]), ce(Re, U[1], U[0]), D(z, z, Re), F(C, k[0], k[1]), F(Re, U[0], U[1]), D(C, C, Re), D(G, k[3], U[3]), D(G, G, d), D(j, k[2], U[2]), F(j, j, j), ce(se, C, z), ce(he, j, G), F(xe, j, G), F(Te, C, z), D(k[0], se, he), D(k[1], Te, xe), D(k[2], xe, he), D(k[3], se, Te);
    }
    function Me(k, U, z) {
      var C;
      for (C = 0; C < 4; C++)
        _(k[C], U[C], z);
    }
    function Ne(k, U) {
      var z = r(), C = r(), G = r();
      Z(G, U[2]), D(z, U[0], G), D(C, U[1], G), E(k, C), k[31] ^= P(z) << 7;
    }
    function Ke(k, U, z) {
      var C, G;
      for (b(k[0], o), b(k[1], a), b(k[2], a), b(k[3], o), G = 255; G >= 0; --G)
        C = z[G / 8 | 0] >> (G & 7) & 1, Me(k, U, C), $e(U, k), $e(k, k), Me(k, U, C);
    }
    function Le(k, U) {
      var z = [r(), r(), r(), r()];
      b(z[0], p), b(z[1], w), b(z[2], a), D(z[3], p, w), Ke(k, z, U);
    }
    function qe(k, U, z) {
      var C = new Uint8Array(64), G = [r(), r(), r(), r()], j;
      for (z || n(U, 32), Ce(C, U, 32), C[0] &= 248, C[31] &= 127, C[31] |= 64, Le(G, C), Ne(k, G), j = 0; j < 32; j++) U[j + 32] = k[j];
      return 0;
    }
    var ze = new Float64Array([237, 211, 245, 92, 26, 99, 18, 88, 214, 156, 247, 162, 222, 249, 222, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16]);
    function _e(k, U) {
      var z, C, G, j;
      for (C = 63; C >= 32; --C) {
        for (z = 0, G = C - 32, j = C - 12; G < j; ++G)
          U[G] += z - 16 * U[C] * ze[G - (C - 32)], z = Math.floor((U[G] + 128) / 256), U[G] -= z * 256;
        U[G] += z, U[C] = 0;
      }
      for (z = 0, G = 0; G < 32; G++)
        U[G] += z - (U[31] >> 4) * ze[G], z = U[G] >> 8, U[G] &= 255;
      for (G = 0; G < 32; G++) U[G] -= z * ze[G];
      for (C = 0; C < 32; C++)
        U[C + 1] += U[C] >> 8, k[C] = U[C] & 255;
    }
    function Ze(k) {
      var U = new Float64Array(64), z;
      for (z = 0; z < 64; z++) U[z] = k[z];
      for (z = 0; z < 64; z++) k[z] = 0;
      _e(k, U);
    }
    function at(k, U, z, C) {
      var G = new Uint8Array(64), j = new Uint8Array(64), se = new Uint8Array(64), he, xe, Te = new Float64Array(64), Re = [r(), r(), r(), r()];
      Ce(G, C, 32), G[0] &= 248, G[31] &= 127, G[31] |= 64;
      var nt = z + 64;
      for (he = 0; he < z; he++) k[64 + he] = U[he];
      for (he = 0; he < 32; he++) k[32 + he] = G[32 + he];
      for (Ce(se, k.subarray(32), z + 32), Ze(se), Le(Re, se), Ne(k, Re), he = 32; he < 64; he++) k[he] = C[he];
      for (Ce(j, k, z + 64), Ze(j), he = 0; he < 64; he++) Te[he] = 0;
      for (he = 0; he < 32; he++) Te[he] = se[he];
      for (he = 0; he < 32; he++)
        for (xe = 0; xe < 32; xe++)
          Te[he + xe] += j[he] * G[xe];
      return _e(k.subarray(32), Te), nt;
    }
    function ke(k, U) {
      var z = r(), C = r(), G = r(), j = r(), se = r(), he = r(), xe = r();
      return b(k[2], a), I(k[1], U), oe(G, k[1]), D(j, G, l), ce(G, G, k[2]), F(j, k[2], j), oe(se, j), oe(he, se), D(xe, he, se), D(z, xe, G), D(z, z, j), J(z, z), D(z, z, G), D(z, z, j), D(z, z, j), D(k[0], z, j), oe(C, k[0]), D(C, C, j), v(C, G) && D(k[0], k[0], A), oe(C, k[0]), D(C, C, j), v(C, G) ? -1 : (P(k[0]) === U[31] >> 7 && ce(k[0], o, k[0]), D(k[3], k[0], k[1]), 0);
    }
    function Qe(k, U, z, C) {
      var G, j = new Uint8Array(32), se = new Uint8Array(64), he = [r(), r(), r(), r()], xe = [r(), r(), r(), r()];
      if (z < 64 || ke(xe, C)) return -1;
      for (G = 0; G < z; G++) k[G] = U[G];
      for (G = 0; G < 32; G++) k[G + 32] = C[G];
      if (Ce(se, k, z), Ze(se), Ke(he, xe, se), Le(xe, U.subarray(32)), $e(he, xe), Ne(j, he), z -= 64, B(U, 0, j, 0)) {
        for (G = 0; G < z; G++) k[G] = 0;
        return -1;
      }
      for (G = 0; G < z; G++) k[G] = U[G + 64];
      return z;
    }
    var tt = 32, Ye = 24, dt = 32, lt = 16, ct = 32, qt = 32, Yt = 32, Et = 32, er = 32, Jt = Ye, Dt = dt, kt = lt, Ct = 64, gt = 32, Rt = 64, Nt = 32, vt = 64;
    e.lowlevel = {
      crypto_core_hsalsa20: V,
      crypto_stream_xor: Ee,
      crypto_stream: ge,
      crypto_stream_salsa20_xor: R,
      crypto_stream_salsa20: K,
      crypto_onetimeauth: S,
      crypto_onetimeauth_verify: m,
      crypto_verify_16: L,
      crypto_verify_32: B,
      crypto_secretbox: f,
      crypto_secretbox_open: g,
      crypto_scalarmult: Q,
      crypto_scalarmult_base: T,
      crypto_box_beforenm: re,
      crypto_box_afternm: de,
      crypto_box: ue,
      crypto_box_open: ve,
      crypto_box_keypair: X,
      crypto_hash: Ce,
      crypto_sign: at,
      crypto_sign_keypair: qe,
      crypto_sign_open: Qe,
      crypto_secretbox_KEYBYTES: tt,
      crypto_secretbox_NONCEBYTES: Ye,
      crypto_secretbox_ZEROBYTES: dt,
      crypto_secretbox_BOXZEROBYTES: lt,
      crypto_scalarmult_BYTES: ct,
      crypto_scalarmult_SCALARBYTES: qt,
      crypto_box_PUBLICKEYBYTES: Yt,
      crypto_box_SECRETKEYBYTES: Et,
      crypto_box_BEFORENMBYTES: er,
      crypto_box_NONCEBYTES: Jt,
      crypto_box_ZEROBYTES: Dt,
      crypto_box_BOXZEROBYTES: kt,
      crypto_sign_BYTES: Ct,
      crypto_sign_PUBLICKEYBYTES: gt,
      crypto_sign_SECRETKEYBYTES: Rt,
      crypto_sign_SEEDBYTES: Nt,
      crypto_hash_BYTES: vt,
      gf: r,
      D: l,
      L: ze,
      pack25519: E,
      unpack25519: I,
      M: D,
      A: F,
      S: oe,
      Z: ce,
      pow2523: J,
      add: $e,
      set25519: b,
      modL: _e,
      scalarmult: Ke,
      scalarbase: Le
    };
    function $t(k, U) {
      if (k.length !== tt) throw new Error("bad key size");
      if (U.length !== Ye) throw new Error("bad nonce size");
    }
    function Ft(k, U) {
      if (k.length !== Yt) throw new Error("bad public key size");
      if (U.length !== Et) throw new Error("bad secret key size");
    }
    function rt() {
      for (var k = 0; k < arguments.length; k++)
        if (!(arguments[k] instanceof Uint8Array))
          throw new TypeError("unexpected type, use Uint8Array");
    }
    function Bt(k) {
      for (var U = 0; U < k.length; U++) k[U] = 0;
    }
    e.randomBytes = function(k) {
      var U = new Uint8Array(k);
      return n(U, k), U;
    }, e.secretbox = function(k, U, z) {
      rt(k, U, z), $t(z, U);
      for (var C = new Uint8Array(dt + k.length), G = new Uint8Array(C.length), j = 0; j < k.length; j++) C[j + dt] = k[j];
      return f(G, C, C.length, U, z), G.subarray(lt);
    }, e.secretbox.open = function(k, U, z) {
      rt(k, U, z), $t(z, U);
      for (var C = new Uint8Array(lt + k.length), G = new Uint8Array(C.length), j = 0; j < k.length; j++) C[j + lt] = k[j];
      return C.length < 32 || g(G, C, C.length, U, z) !== 0 ? null : G.subarray(dt);
    }, e.secretbox.keyLength = tt, e.secretbox.nonceLength = Ye, e.secretbox.overheadLength = lt, e.scalarMult = function(k, U) {
      if (rt(k, U), k.length !== qt) throw new Error("bad n size");
      if (U.length !== ct) throw new Error("bad p size");
      var z = new Uint8Array(ct);
      return Q(z, k, U), z;
    }, e.scalarMult.base = function(k) {
      if (rt(k), k.length !== qt) throw new Error("bad n size");
      var U = new Uint8Array(ct);
      return T(U, k), U;
    }, e.scalarMult.scalarLength = qt, e.scalarMult.groupElementLength = ct, e.box = function(k, U, z, C) {
      var G = e.box.before(z, C);
      return e.secretbox(k, U, G);
    }, e.box.before = function(k, U) {
      rt(k, U), Ft(k, U);
      var z = new Uint8Array(er);
      return re(z, k, U), z;
    }, e.box.after = e.secretbox, e.box.open = function(k, U, z, C) {
      var G = e.box.before(z, C);
      return e.secretbox.open(k, U, G);
    }, e.box.open.after = e.secretbox.open, e.box.keyPair = function() {
      var k = new Uint8Array(Yt), U = new Uint8Array(Et);
      return X(k, U), { publicKey: k, secretKey: U };
    }, e.box.keyPair.fromSecretKey = function(k) {
      if (rt(k), k.length !== Et)
        throw new Error("bad secret key size");
      var U = new Uint8Array(Yt);
      return T(U, k), { publicKey: U, secretKey: new Uint8Array(k) };
    }, e.box.publicKeyLength = Yt, e.box.secretKeyLength = Et, e.box.sharedKeyLength = er, e.box.nonceLength = Jt, e.box.overheadLength = e.secretbox.overheadLength, e.sign = function(k, U) {
      if (rt(k, U), U.length !== Rt)
        throw new Error("bad secret key size");
      var z = new Uint8Array(Ct + k.length);
      return at(z, k, k.length, U), z;
    }, e.sign.open = function(k, U) {
      if (rt(k, U), U.length !== gt)
        throw new Error("bad public key size");
      var z = new Uint8Array(k.length), C = Qe(z, k, k.length, U);
      if (C < 0) return null;
      for (var G = new Uint8Array(C), j = 0; j < G.length; j++) G[j] = z[j];
      return G;
    }, e.sign.detached = function(k, U) {
      for (var z = e.sign(k, U), C = new Uint8Array(Ct), G = 0; G < C.length; G++) C[G] = z[G];
      return C;
    }, e.sign.detached.verify = function(k, U, z) {
      if (rt(k, U, z), U.length !== Ct)
        throw new Error("bad signature size");
      if (z.length !== gt)
        throw new Error("bad public key size");
      var C = new Uint8Array(Ct + k.length), G = new Uint8Array(Ct + k.length), j;
      for (j = 0; j < Ct; j++) C[j] = U[j];
      for (j = 0; j < k.length; j++) C[j + Ct] = k[j];
      return Qe(G, C, C.length, z) >= 0;
    }, e.sign.keyPair = function() {
      var k = new Uint8Array(gt), U = new Uint8Array(Rt);
      return qe(k, U), { publicKey: k, secretKey: U };
    }, e.sign.keyPair.fromSecretKey = function(k) {
      if (rt(k), k.length !== Rt)
        throw new Error("bad secret key size");
      for (var U = new Uint8Array(gt), z = 0; z < U.length; z++) U[z] = k[32 + z];
      return { publicKey: U, secretKey: new Uint8Array(k) };
    }, e.sign.keyPair.fromSeed = function(k) {
      if (rt(k), k.length !== Nt)
        throw new Error("bad seed size");
      for (var U = new Uint8Array(gt), z = new Uint8Array(Rt), C = 0; C < 32; C++) z[C] = k[C];
      return qe(U, z, !0), { publicKey: U, secretKey: z };
    }, e.sign.publicKeyLength = gt, e.sign.secretKeyLength = Rt, e.sign.seedLength = Nt, e.sign.signatureLength = Ct, e.hash = function(k) {
      rt(k);
      var U = new Uint8Array(vt);
      return Ce(U, k, k.length), U;
    }, e.hash.hashLength = vt, e.verify = function(k, U) {
      return rt(k, U), k.length === 0 || U.length === 0 || k.length !== U.length ? !1 : N(k, 0, U, 0, k.length) === 0;
    }, e.setPRNG = function(k) {
      n = k;
    }, function() {
      var k = typeof self < "u" ? self.crypto || self.msCrypto : null;
      if (k && k.getRandomValues) {
        var U = 65536;
        e.setPRNG(function(z, C) {
          var G, j = new Uint8Array(C);
          for (G = 0; G < C; G += U)
            k.getRandomValues(j.subarray(G, G + Math.min(C - G, U)));
          for (G = 0; G < C; G++) z[G] = j[G];
          Bt(j);
        });
      } else typeof A4 < "u" && (k = Wl, k && k.randomBytes && e.setPRNG(function(z, C) {
        var G, j = k.randomBytes(C);
        for (G = 0; G < C; G++) z[G] = j[G];
        Bt(j);
      }));
    }();
  })(t.exports ? t.exports : self.nacl = self.nacl || {});
})(V9);
var pie = V9.exports;
const yd = /* @__PURE__ */ ts(pie);
var fa;
(function(t) {
  t[t.UNKNOWN_ERROR = 0] = "UNKNOWN_ERROR", t[t.BAD_REQUEST_ERROR = 1] = "BAD_REQUEST_ERROR", t[t.MANIFEST_NOT_FOUND_ERROR = 2] = "MANIFEST_NOT_FOUND_ERROR", t[t.MANIFEST_CONTENT_ERROR = 3] = "MANIFEST_CONTENT_ERROR", t[t.UNKNOWN_APP_ERROR = 100] = "UNKNOWN_APP_ERROR", t[t.USER_REJECTS_ERROR = 300] = "USER_REJECTS_ERROR", t[t.METHOD_NOT_SUPPORTED = 400] = "METHOD_NOT_SUPPORTED";
})(fa || (fa = {}));
var l5;
(function(t) {
  t[t.UNKNOWN_ERROR = 0] = "UNKNOWN_ERROR", t[t.METHOD_NOT_SUPPORTED = 400] = "METHOD_NOT_SUPPORTED";
})(l5 || (l5 = {}));
var su;
(function(t) {
  t[t.UNKNOWN_ERROR = 0] = "UNKNOWN_ERROR", t[t.BAD_REQUEST_ERROR = 1] = "BAD_REQUEST_ERROR", t[t.UNKNOWN_APP_ERROR = 100] = "UNKNOWN_APP_ERROR", t[t.USER_REJECTS_ERROR = 300] = "USER_REJECTS_ERROR", t[t.METHOD_NOT_SUPPORTED = 400] = "METHOD_NOT_SUPPORTED";
})(su || (su = {}));
var h5;
(function(t) {
  t[t.UNKNOWN_ERROR = 0] = "UNKNOWN_ERROR", t[t.BAD_REQUEST_ERROR = 1] = "BAD_REQUEST_ERROR", t[t.UNKNOWN_APP_ERROR = 100] = "UNKNOWN_APP_ERROR", t[t.USER_REJECTS_ERROR = 300] = "USER_REJECTS_ERROR", t[t.METHOD_NOT_SUPPORTED = 400] = "METHOD_NOT_SUPPORTED";
})(h5 || (h5 = {}));
var d5;
(function(t) {
  t[t.UNKNOWN_ERROR = 0] = "UNKNOWN_ERROR", t[t.BAD_REQUEST_ERROR = 1] = "BAD_REQUEST_ERROR", t[t.UNKNOWN_APP_ERROR = 100] = "UNKNOWN_APP_ERROR", t[t.METHOD_NOT_SUPPORTED = 400] = "METHOD_NOT_SUPPORTED";
})(d5 || (d5 = {}));
var p5;
(function(t) {
  t.MAINNET = "-239", t.TESTNET = "-3";
})(p5 || (p5 = {}));
function gie(t, e) {
  const r = Dl.encodeBase64(t);
  return e ? encodeURIComponent(r) : r;
}
function mie(t, e) {
  return e && (t = decodeURIComponent(t)), Dl.decodeBase64(t);
}
function vie(t, e = !1) {
  let r;
  return t instanceof Uint8Array ? r = t : (typeof t != "string" && (t = JSON.stringify(t)), r = Dl.decodeUTF8(t)), gie(r, e);
}
function bie(t, e = !1) {
  const r = mie(t, e);
  return {
    toString() {
      return Dl.encodeUTF8(r);
    },
    toObject() {
      try {
        return JSON.parse(Dl.encodeUTF8(r));
      } catch {
        return null;
      }
    },
    toUint8Array() {
      return r;
    }
  };
}
const G9 = {
  encode: vie,
  decode: bie
};
function yie(t, e) {
  const r = new Uint8Array(t.length + e.length);
  return r.set(t), r.set(e, t.length), r;
}
function wie(t, e) {
  if (e >= t.length)
    throw new Error("Index is out of buffer");
  const r = t.slice(0, e), n = t.slice(e);
  return [r, n];
}
function Km(t) {
  let e = "";
  return t.forEach((r) => {
    e += ("0" + (r & 255).toString(16)).slice(-2);
  }), e;
}
function A0(t) {
  if (t.length % 2 !== 0)
    throw new Error(`Cannot convert ${t} to bytesArray`);
  const e = new Uint8Array(t.length / 2);
  for (let r = 0; r < t.length; r += 2)
    e[r / 2] = parseInt(t.slice(r, r + 2), 16);
  return e;
}
class hv {
  constructor(e) {
    this.nonceLength = 24, this.keyPair = e ? this.createKeypairFromString(e) : this.createKeypair(), this.sessionId = Km(this.keyPair.publicKey);
  }
  createKeypair() {
    return yd.box.keyPair();
  }
  createKeypairFromString(e) {
    return {
      publicKey: A0(e.publicKey),
      secretKey: A0(e.secretKey)
    };
  }
  createNonce() {
    return yd.randomBytes(this.nonceLength);
  }
  encrypt(e, r) {
    const n = new TextEncoder().encode(e), i = this.createNonce(), s = yd.box(n, i, r, this.keyPair.secretKey);
    return yie(i, s);
  }
  decrypt(e, r) {
    const [n, i] = wie(e, this.nonceLength), s = yd.box.open(i, n, r, this.keyPair.secretKey);
    if (!s)
      throw new Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${r.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);
    return new TextDecoder().decode(s);
  }
  stringifyKeypair() {
    return {
      publicKey: Km(this.keyPair.publicKey),
      secretKey: Km(this.keyPair.secretKey)
    };
  }
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function xie(t, e) {
  var r = {};
  for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, n = Object.getOwnPropertySymbols(t); i < n.length; i++)
      e.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[i]) && (r[n[i]] = t[n[i]]);
  return r;
}
function Mt(t, e, r, n) {
  function i(s) {
    return s instanceof r ? s : new r(function(o) {
      o(s);
    });
  }
  return new (r || (r = Promise))(function(s, o) {
    function a(d) {
      try {
        l(n.next(d));
      } catch (p) {
        o(p);
      }
    }
    function u(d) {
      try {
        l(n.throw(d));
      } catch (p) {
        o(p);
      }
    }
    function l(d) {
      d.done ? s(d.value) : i(d.value).then(a, u);
    }
    l((n = n.apply(t, [])).next());
  });
}
class jt extends Error {
  constructor(e, r) {
    super(e, r), this.message = `${jt.prefix} ${this.constructor.name}${this.info ? ": " + this.info : ""}${e ? `
` + e : ""}`, Object.setPrototypeOf(this, jt.prototype);
  }
  get info() {
    return "";
  }
}
jt.prefix = "[TON_CONNECT_SDK_ERROR]";
class uy extends jt {
  get info() {
    return "Passed DappMetadata is in incorrect format.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, uy.prototype);
  }
}
class Ap extends jt {
  get info() {
    return "Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, Ap.prototype);
  }
}
class Pp extends jt {
  get info() {
    return "Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, Pp.prototype);
  }
}
class fy extends jt {
  get info() {
    return "Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, fy.prototype);
  }
}
class P0 extends jt {
  get info() {
    return "Send transaction or other protocol methods called while wallet is not connected.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, P0.prototype);
  }
}
function _ie(t) {
  return "jsBridgeKey" in t;
}
class Mp extends jt {
  get info() {
    return "User rejects the action in the wallet.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, Mp.prototype);
  }
}
class Ip extends jt {
  get info() {
    return "Request to the wallet contains errors.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, Ip.prototype);
  }
}
class Cp extends jt {
  get info() {
    return "App tries to send rpc request to the injected wallet while not connected.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, Cp.prototype);
  }
}
class ly extends jt {
  get info() {
    return "There is an attempt to connect to the injected wallet while it is not exists in the webpage.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, ly.prototype);
  }
}
class hy extends jt {
  get info() {
    return "An error occurred while fetching the wallets list.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, hy.prototype);
  }
}
class Ea extends jt {
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, Ea.prototype);
  }
}
const g5 = {
  [fa.UNKNOWN_ERROR]: Ea,
  [fa.USER_REJECTS_ERROR]: Mp,
  [fa.BAD_REQUEST_ERROR]: Ip,
  [fa.UNKNOWN_APP_ERROR]: Cp,
  [fa.MANIFEST_NOT_FOUND_ERROR]: Pp,
  [fa.MANIFEST_CONTENT_ERROR]: Ap
};
class Eie {
  parseError(e) {
    let r = Ea;
    return e.code in g5 && (r = g5[e.code] || Ea), new r(e.message);
  }
}
const Sie = new Eie();
class Aie {
  isError(e) {
    return "error" in e;
  }
}
const m5 = {
  [su.UNKNOWN_ERROR]: Ea,
  [su.USER_REJECTS_ERROR]: Mp,
  [su.BAD_REQUEST_ERROR]: Ip,
  [su.UNKNOWN_APP_ERROR]: Cp
};
class Pie extends Aie {
  convertToRpcRequest(e) {
    return {
      method: "sendTransaction",
      params: [JSON.stringify(e)]
    };
  }
  parseAndThrowError(e) {
    let r = Ea;
    throw e.error.code in m5 && (r = m5[e.error.code] || Ea), new r(e.error.message);
  }
  convertFromRpcResponse(e) {
    return {
      boc: e.result
    };
  }
}
const wd = new Pie();
class Mie {
  constructor(e, r) {
    this.storage = e, this.storeKey = "ton-connect-storage_http-bridge-gateway::" + r;
  }
  storeLastEventId(e) {
    return Mt(this, void 0, void 0, function* () {
      return this.storage.setItem(this.storeKey, e);
    });
  }
  removeLastEventId() {
    return Mt(this, void 0, void 0, function* () {
      return this.storage.removeItem(this.storeKey);
    });
  }
  getLastEventId() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.storage.getItem(this.storeKey);
      return e || null;
    });
  }
}
function Iie(t) {
  return t.slice(-1) === "/" ? t.slice(0, -1) : t;
}
function Y9(t, e) {
  return Iie(t) + "/" + e;
}
function Cie(t) {
  if (!t)
    return !1;
  const e = new URL(t);
  return e.protocol === "tg:" || e.hostname === "t.me";
}
function Tie(t) {
  return t.replaceAll(".", "%2E").replaceAll("-", "%2D").replaceAll("_", "%5F").replaceAll("&", "-").replaceAll("=", "__").replaceAll("%", "--");
}
function J9(t, e) {
  return Mt(this, void 0, void 0, function* () {
    return new Promise((r, n) => {
      var i, s;
      if (!((i = void 0) === null || i === void 0) && i.aborted) {
        n(new jt("Delay aborted"));
        return;
      }
      const o = setTimeout(() => r(), t);
      (s = void 0) === null || s === void 0 || s.addEventListener("abort", () => {
        clearTimeout(o), n(new jt("Delay aborted"));
      });
    });
  });
}
function _s(t) {
  const e = new AbortController();
  return t != null && t.aborted ? e.abort() : t == null || t.addEventListener("abort", () => e.abort(), { once: !0 }), e;
}
function Zf(t, e) {
  var r, n;
  return Mt(this, void 0, void 0, function* () {
    const i = (r = e == null ? void 0 : e.attempts) !== null && r !== void 0 ? r : 10, s = (n = e == null ? void 0 : e.delayMs) !== null && n !== void 0 ? n : 200, o = _s(e == null ? void 0 : e.signal);
    if (typeof t != "function")
      throw new jt(`Expected a function, got ${typeof t}`);
    let a = 0, u;
    for (; a < i; ) {
      if (o.signal.aborted)
        throw new jt(`Aborted after attempts ${a}`);
      try {
        return yield t({ signal: o.signal });
      } catch (l) {
        u = l, a++, a < i && (yield J9(s));
      }
    }
    throw u;
  });
}
function Sn(...t) {
  try {
    console.debug("[TON_CONNECT_SDK]", ...t);
  } catch {
  }
}
function No(...t) {
  try {
    console.error("[TON_CONNECT_SDK]", ...t);
  } catch {
  }
}
function Rie(...t) {
  try {
    console.warn("[TON_CONNECT_SDK]", ...t);
  } catch {
  }
}
function Die(t, e) {
  let r = null, n = null, i = null, s = null, o = null;
  const a = (p, ...w) => Mt(this, void 0, void 0, function* () {
    if (s = p ?? null, o == null || o.abort(), o = _s(p), o.signal.aborted)
      throw new jt("Resource creation was aborted");
    n = w ?? null;
    const A = t(o.signal, ...w);
    i = A;
    const M = yield A;
    if (i !== A && M !== r)
      throw yield e(M), new jt("Resource creation was aborted by a new resource creation");
    return r = M, r;
  });
  return {
    create: a,
    current: () => r ?? null,
    dispose: () => Mt(this, void 0, void 0, function* () {
      try {
        const p = r;
        r = null;
        const w = i;
        i = null;
        try {
          o == null || o.abort();
        } catch {
        }
        yield Promise.allSettled([
          p ? e(p) : Promise.resolve(),
          w ? e(yield w) : Promise.resolve()
        ]);
      } catch {
      }
    }),
    recreate: (p) => Mt(this, void 0, void 0, function* () {
      const w = r, A = i, M = n, N = s;
      if (yield J9(p), w === r && A === i && M === n && N === s)
        return yield a(s, ...M ?? []);
      throw new jt("Resource recreation was aborted by a new resource creation");
    })
  };
}
function Oie(t, e) {
  const r = e == null ? void 0 : e.timeout, n = e == null ? void 0 : e.signal, i = _s(n);
  return new Promise((s, o) => Mt(this, void 0, void 0, function* () {
    if (i.signal.aborted) {
      o(new jt("Operation aborted"));
      return;
    }
    let a;
    typeof r < "u" && (a = setTimeout(() => {
      i.abort(), o(new jt(`Timeout after ${r}ms`));
    }, r)), i.signal.addEventListener("abort", () => {
      clearTimeout(a), o(new jt("Operation aborted"));
    }, { once: !0 });
    const u = { timeout: r, abort: i.signal };
    yield t((...l) => {
      clearTimeout(a), s(...l);
    }, () => {
      clearTimeout(a), o();
    }, u);
  }));
}
class Vm {
  constructor(e, r, n, i, s) {
    this.bridgeUrl = r, this.sessionId = n, this.listener = i, this.errorsListener = s, this.ssePath = "events", this.postPath = "message", this.heartbeatMessage = "heartbeat", this.defaultTtl = 300, this.defaultReconnectDelay = 2e3, this.defaultResendDelay = 5e3, this.eventSource = Die((o, a) => Mt(this, void 0, void 0, function* () {
      const u = {
        bridgeUrl: this.bridgeUrl,
        ssePath: this.ssePath,
        sessionId: this.sessionId,
        bridgeGatewayStorage: this.bridgeGatewayStorage,
        errorHandler: this.errorsHandler.bind(this),
        messageHandler: this.messagesHandler.bind(this),
        signal: o,
        openingDeadlineMS: a
      };
      return yield Nie(u);
    }), (o) => Mt(this, void 0, void 0, function* () {
      o.close();
    })), this.bridgeGatewayStorage = new Mie(e, r);
  }
  get isReady() {
    const e = this.eventSource.current();
    return (e == null ? void 0 : e.readyState) === EventSource.OPEN;
  }
  get isClosed() {
    const e = this.eventSource.current();
    return (e == null ? void 0 : e.readyState) !== EventSource.OPEN;
  }
  get isConnecting() {
    const e = this.eventSource.current();
    return (e == null ? void 0 : e.readyState) === EventSource.CONNECTING;
  }
  registerSession(e) {
    return Mt(this, void 0, void 0, function* () {
      yield this.eventSource.create(e == null ? void 0 : e.signal, e == null ? void 0 : e.openingDeadlineMS);
    });
  }
  send(e, r, n, i) {
    var s;
    return Mt(this, void 0, void 0, function* () {
      const o = {};
      typeof i == "number" ? o.ttl = i : (o.ttl = i == null ? void 0 : i.ttl, o.signal = i == null ? void 0 : i.signal, o.attempts = i == null ? void 0 : i.attempts);
      const a = new URL(Y9(this.bridgeUrl, this.postPath));
      a.searchParams.append("client_id", this.sessionId), a.searchParams.append("to", r), a.searchParams.append("ttl", ((o == null ? void 0 : o.ttl) || this.defaultTtl).toString()), a.searchParams.append("topic", n);
      const u = G9.encode(e);
      yield Zf((l) => Mt(this, void 0, void 0, function* () {
        const d = yield this.post(a, u, l.signal);
        if (!d.ok)
          throw new jt(`Bridge send failed, status ${d.status}`);
      }), {
        attempts: (s = o == null ? void 0 : o.attempts) !== null && s !== void 0 ? s : Number.MAX_SAFE_INTEGER,
        delayMs: this.defaultResendDelay,
        signal: o == null ? void 0 : o.signal
      });
    });
  }
  pause() {
    this.eventSource.dispose().catch((e) => No(`Bridge pause failed, ${e}`));
  }
  unPause() {
    return Mt(this, void 0, void 0, function* () {
      yield this.eventSource.recreate(0);
    });
  }
  close() {
    return Mt(this, void 0, void 0, function* () {
      yield this.eventSource.dispose().catch((e) => No(`Bridge close failed, ${e}`));
    });
  }
  setListener(e) {
    this.listener = e;
  }
  setErrorsListener(e) {
    this.errorsListener = e;
  }
  post(e, r, n) {
    return Mt(this, void 0, void 0, function* () {
      const i = yield fetch(e, {
        method: "post",
        body: r,
        signal: n
      });
      if (!i.ok)
        throw new jt(`Bridge send failed, status ${i.status}`);
      return i;
    });
  }
  errorsHandler(e, r) {
    return Mt(this, void 0, void 0, function* () {
      if (this.isConnecting)
        throw e.close(), new jt("Bridge error, failed to connect");
      if (this.isReady) {
        try {
          this.errorsListener(r);
        } catch {
        }
        return;
      }
      if (this.isClosed)
        return e.close(), Sn(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`), yield this.eventSource.recreate(this.defaultReconnectDelay);
      throw new jt("Bridge error, unknown state");
    });
  }
  messagesHandler(e) {
    return Mt(this, void 0, void 0, function* () {
      if (e.data === this.heartbeatMessage || (yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId), this.isClosed))
        return;
      let r;
      try {
        r = JSON.parse(e.data);
      } catch (n) {
        throw new jt(`Bridge message parse failed, message ${n.data}`);
      }
      this.listener(r);
    });
  }
}
function Nie(t) {
  return Mt(this, void 0, void 0, function* () {
    return yield Oie((e, r, n) => Mt(this, void 0, void 0, function* () {
      var i;
      const o = _s(n.signal).signal;
      if (o.aborted) {
        r(new jt("Bridge connection aborted"));
        return;
      }
      const a = new URL(Y9(t.bridgeUrl, t.ssePath));
      a.searchParams.append("client_id", t.sessionId);
      const u = yield t.bridgeGatewayStorage.getLastEventId();
      if (u && a.searchParams.append("last_event_id", u), o.aborted) {
        r(new jt("Bridge connection aborted"));
        return;
      }
      const l = new EventSource(a.toString());
      l.onerror = (d) => Mt(this, void 0, void 0, function* () {
        if (o.aborted) {
          l.close(), r(new jt("Bridge connection aborted"));
          return;
        }
        try {
          const p = yield t.errorHandler(l, d);
          p !== l && l.close(), p && p !== l && e(p);
        } catch (p) {
          l.close(), r(p);
        }
      }), l.onopen = () => {
        if (o.aborted) {
          l.close(), r(new jt("Bridge connection aborted"));
          return;
        }
        e(l);
      }, l.onmessage = (d) => {
        if (o.aborted) {
          l.close(), r(new jt("Bridge connection aborted"));
          return;
        }
        t.messageHandler(d);
      }, (i = t.signal) === null || i === void 0 || i.addEventListener("abort", () => {
        l.close(), r(new jt("Bridge connection aborted"));
      });
    }), { timeout: t.openingDeadlineMS, signal: t.signal });
  });
}
function Qf(t) {
  return !("connectEvent" in t);
}
class Ol {
  constructor(e) {
    this.storage = e, this.storeKey = "ton-connect-storage_bridge-connection";
  }
  storeConnection(e) {
    return Mt(this, void 0, void 0, function* () {
      if (e.type === "injected")
        return this.storage.setItem(this.storeKey, JSON.stringify(e));
      if (!Qf(e)) {
        const n = {
          sessionKeyPair: e.session.sessionCrypto.stringifyKeypair(),
          walletPublicKey: e.session.walletPublicKey,
          bridgeUrl: e.session.bridgeUrl
        }, i = {
          type: "http",
          connectEvent: e.connectEvent,
          session: n,
          lastWalletEventId: e.lastWalletEventId,
          nextRpcRequestId: e.nextRpcRequestId
        };
        return this.storage.setItem(this.storeKey, JSON.stringify(i));
      }
      const r = {
        type: "http",
        connectionSource: e.connectionSource,
        sessionCrypto: e.sessionCrypto.stringifyKeypair()
      };
      return this.storage.setItem(this.storeKey, JSON.stringify(r));
    });
  }
  removeConnection() {
    return Mt(this, void 0, void 0, function* () {
      return this.storage.removeItem(this.storeKey);
    });
  }
  getConnection() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.storage.getItem(this.storeKey);
      if (!e)
        return null;
      const r = JSON.parse(e);
      if (r.type === "injected")
        return r;
      if ("connectEvent" in r) {
        const n = new hv(r.session.sessionKeyPair);
        return {
          type: "http",
          connectEvent: r.connectEvent,
          lastWalletEventId: r.lastWalletEventId,
          nextRpcRequestId: r.nextRpcRequestId,
          session: {
            sessionCrypto: n,
            bridgeUrl: r.session.bridgeUrl,
            walletPublicKey: r.session.walletPublicKey
          }
        };
      }
      return {
        type: "http",
        sessionCrypto: new hv(r.sessionCrypto),
        connectionSource: r.connectionSource
      };
    });
  }
  getHttpConnection() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.getConnection();
      if (!e)
        throw new jt("Trying to read HTTP connection source while nothing is stored");
      if (e.type === "injected")
        throw new jt("Trying to read HTTP connection source while injected connection is stored");
      return e;
    });
  }
  getHttpPendingConnection() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.getConnection();
      if (!e)
        throw new jt("Trying to read HTTP connection source while nothing is stored");
      if (e.type === "injected")
        throw new jt("Trying to read HTTP connection source while injected connection is stored");
      if (!Qf(e))
        throw new jt("Trying to read HTTP-pending connection while http connection is stored");
      return e;
    });
  }
  getInjectedConnection() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.getConnection();
      if (!e)
        throw new jt("Trying to read Injected bridge connection source while nothing is stored");
      if ((e == null ? void 0 : e.type) === "http")
        throw new jt("Trying to read Injected bridge connection source while HTTP connection is stored");
      return e;
    });
  }
  storedConnectionType() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.storage.getItem(this.storeKey);
      return e ? JSON.parse(e).type : null;
    });
  }
  storeLastWalletEventId(e) {
    return Mt(this, void 0, void 0, function* () {
      const r = yield this.getConnection();
      if (r && r.type === "http" && !Qf(r))
        return r.lastWalletEventId = e, this.storeConnection(r);
    });
  }
  getLastWalletEventId() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.getConnection();
      if (e && "lastWalletEventId" in e)
        return e.lastWalletEventId;
    });
  }
  increaseNextRpcRequestId() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.getConnection();
      if (e && "nextRpcRequestId" in e) {
        const r = e.nextRpcRequestId || 0;
        return e.nextRpcRequestId = r + 1, this.storeConnection(e);
      }
    });
  }
  getNextRpcRequestId() {
    return Mt(this, void 0, void 0, function* () {
      const e = yield this.getConnection();
      return e && "nextRpcRequestId" in e && e.nextRpcRequestId || 0;
    });
  }
}
const X9 = 2;
class Nl {
  constructor(e, r) {
    this.storage = e, this.walletConnectionSource = r, this.type = "http", this.standardUniversalLink = "tc://", this.pendingRequests = /* @__PURE__ */ new Map(), this.session = null, this.gateway = null, this.pendingGateways = [], this.listeners = [], this.defaultOpeningDeadlineMS = 12e3, this.defaultRetryTimeoutMS = 2e3, this.connectionStorage = new Ol(e);
  }
  static fromStorage(e) {
    return Mt(this, void 0, void 0, function* () {
      const n = yield new Ol(e).getHttpConnection();
      return Qf(n) ? new Nl(e, n.connectionSource) : new Nl(e, { bridgeUrl: n.session.bridgeUrl });
    });
  }
  connect(e, r) {
    var n;
    const i = _s(r == null ? void 0 : r.signal);
    (n = this.abortController) === null || n === void 0 || n.abort(), this.abortController = i, this.closeGateways();
    const s = new hv();
    this.session = {
      sessionCrypto: s,
      bridgeUrl: "bridgeUrl" in this.walletConnectionSource ? this.walletConnectionSource.bridgeUrl : ""
    }, this.connectionStorage.storeConnection({
      type: "http",
      connectionSource: this.walletConnectionSource,
      sessionCrypto: s
    }).then(() => Mt(this, void 0, void 0, function* () {
      i.signal.aborted || (yield Zf((a) => {
        var u;
        return this.openGateways(s, {
          openingDeadlineMS: (u = r == null ? void 0 : r.openingDeadlineMS) !== null && u !== void 0 ? u : this.defaultOpeningDeadlineMS,
          signal: a == null ? void 0 : a.signal
        });
      }, {
        attempts: Number.MAX_SAFE_INTEGER,
        delayMs: this.defaultRetryTimeoutMS,
        signal: i.signal
      }));
    }));
    const o = "universalLink" in this.walletConnectionSource && this.walletConnectionSource.universalLink ? this.walletConnectionSource.universalLink : this.standardUniversalLink;
    return this.generateUniversalLink(o, e);
  }
  restoreConnection(e) {
    var r, n;
    return Mt(this, void 0, void 0, function* () {
      const i = _s(e == null ? void 0 : e.signal);
      if ((r = this.abortController) === null || r === void 0 || r.abort(), this.abortController = i, i.signal.aborted)
        return;
      this.closeGateways();
      const s = yield this.connectionStorage.getHttpConnection();
      if (!s || i.signal.aborted)
        return;
      const o = (n = e == null ? void 0 : e.openingDeadlineMS) !== null && n !== void 0 ? n : this.defaultOpeningDeadlineMS;
      if (Qf(s))
        return this.session = {
          sessionCrypto: s.sessionCrypto,
          bridgeUrl: "bridgeUrl" in this.walletConnectionSource ? this.walletConnectionSource.bridgeUrl : ""
        }, yield this.openGateways(s.sessionCrypto, {
          openingDeadlineMS: o,
          signal: i == null ? void 0 : i.signal
        });
      if (Array.isArray(this.walletConnectionSource))
        throw new jt("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");
      if (this.session = s.session, this.gateway && (Sn("Gateway is already opened, closing previous gateway"), yield this.gateway.close()), this.gateway = new Vm(this.storage, this.walletConnectionSource.bridgeUrl, s.session.sessionCrypto.sessionId, this.gatewayListener.bind(this), this.gatewayErrorsListener.bind(this)), !i.signal.aborted) {
        this.listeners.forEach((a) => a(s.connectEvent));
        try {
          yield Zf((a) => this.gateway.registerSession({
            openingDeadlineMS: o,
            signal: a.signal
          }), {
            attempts: Number.MAX_SAFE_INTEGER,
            delayMs: this.defaultRetryTimeoutMS,
            signal: i.signal
          });
        } catch {
          yield this.disconnect({ signal: i.signal });
          return;
        }
      }
    });
  }
  sendRequest(e, r) {
    const n = {};
    return typeof r == "function" ? n.onRequestSent = r : (n.onRequestSent = r == null ? void 0 : r.onRequestSent, n.signal = r == null ? void 0 : r.signal, n.attempts = r == null ? void 0 : r.attempts), new Promise((i, s) => Mt(this, void 0, void 0, function* () {
      var o;
      if (!this.gateway || !this.session || !("walletPublicKey" in this.session))
        throw new jt("Trying to send bridge request without session");
      const a = (yield this.connectionStorage.getNextRpcRequestId()).toString();
      yield this.connectionStorage.increaseNextRpcRequestId(), Sn("Send http-bridge request:", Object.assign(Object.assign({}, e), { id: a }));
      const u = this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({}, e), { id: a })), A0(this.session.walletPublicKey));
      try {
        yield this.gateway.send(u, this.session.walletPublicKey, e.method, { attempts: n == null ? void 0 : n.attempts, signal: n == null ? void 0 : n.signal }), (o = n == null ? void 0 : n.onRequestSent) === null || o === void 0 || o.call(n), this.pendingRequests.set(a.toString(), i);
      } catch (l) {
        s(l);
      }
    }));
  }
  closeConnection() {
    this.closeGateways(), this.listeners = [], this.session = null, this.gateway = null;
  }
  disconnect(e) {
    return Mt(this, void 0, void 0, function* () {
      return new Promise((r) => Mt(this, void 0, void 0, function* () {
        let n = !1, i = null;
        const s = () => {
          n || (n = !0, this.removeBridgeAndSession().then(r));
        };
        try {
          this.closeGateways();
          const o = _s(e == null ? void 0 : e.signal);
          i = setTimeout(() => {
            o.abort();
          }, this.defaultOpeningDeadlineMS), yield this.sendRequest({ method: "disconnect", params: [] }, {
            onRequestSent: s,
            signal: o.signal,
            attempts: 1
          });
        } catch (o) {
          Sn("Disconnect error:", o), n || this.removeBridgeAndSession().then(r);
        } finally {
          i && clearTimeout(i), s();
        }
      }));
    });
  }
  listen(e) {
    return this.listeners.push(e), () => this.listeners = this.listeners.filter((r) => r !== e);
  }
  pause() {
    var e;
    (e = this.gateway) === null || e === void 0 || e.pause(), this.pendingGateways.forEach((r) => r.pause());
  }
  unPause() {
    return Mt(this, void 0, void 0, function* () {
      const e = this.pendingGateways.map((r) => r.unPause());
      this.gateway && e.push(this.gateway.unPause()), yield Promise.all(e);
    });
  }
  pendingGatewaysListener(e, r, n) {
    return Mt(this, void 0, void 0, function* () {
      if (!this.pendingGateways.includes(e)) {
        yield e.close();
        return;
      }
      return this.closeGateways({ except: e }), this.gateway && (Sn("Gateway is already opened, closing previous gateway"), yield this.gateway.close()), this.session.bridgeUrl = r, this.gateway = e, this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)), this.gateway.setListener(this.gatewayListener.bind(this)), this.gatewayListener(n);
    });
  }
  gatewayListener(e) {
    return Mt(this, void 0, void 0, function* () {
      const r = JSON.parse(this.session.sessionCrypto.decrypt(G9.decode(e.message).toUint8Array(), A0(e.from)));
      if (Sn("Wallet message received:", r), !("event" in r)) {
        const i = r.id.toString(), s = this.pendingRequests.get(i);
        if (!s) {
          Sn(`Response id ${i} doesn't match any request's id`);
          return;
        }
        s(r), this.pendingRequests.delete(i);
        return;
      }
      if (r.id !== void 0) {
        const i = yield this.connectionStorage.getLastWalletEventId();
        if (i !== void 0 && r.id <= i) {
          No(`Received event id (=${r.id}) must be greater than stored last wallet event id (=${i}) `);
          return;
        }
        r.event !== "connect" && (yield this.connectionStorage.storeLastWalletEventId(r.id));
      }
      const n = this.listeners;
      r.event === "connect" && (yield this.updateSession(r, e.from)), r.event === "disconnect" && (Sn("Removing bridge and session: received disconnect event"), yield this.removeBridgeAndSession()), n.forEach((i) => i(r));
    });
  }
  gatewayErrorsListener(e) {
    return Mt(this, void 0, void 0, function* () {
      throw new jt(`Bridge error ${JSON.stringify(e)}`);
    });
  }
  updateSession(e, r) {
    return Mt(this, void 0, void 0, function* () {
      this.session = Object.assign(Object.assign({}, this.session), { walletPublicKey: r });
      const n = e.payload.items.find((s) => s.name === "ton_addr"), i = Object.assign(Object.assign({}, e), { payload: Object.assign(Object.assign({}, e.payload), { items: [n] }) });
      yield this.connectionStorage.storeConnection({
        type: "http",
        session: this.session,
        lastWalletEventId: e.id,
        connectEvent: i,
        nextRpcRequestId: 0
      });
    });
  }
  removeBridgeAndSession() {
    return Mt(this, void 0, void 0, function* () {
      this.closeConnection(), yield this.connectionStorage.removeConnection();
    });
  }
  generateUniversalLink(e, r) {
    return Cie(e) ? this.generateTGUniversalLink(e, r) : this.generateRegularUniversalLink(e, r);
  }
  generateRegularUniversalLink(e, r) {
    const n = new URL(e);
    return n.searchParams.append("v", X9.toString()), n.searchParams.append("id", this.session.sessionCrypto.sessionId), n.searchParams.append("r", JSON.stringify(r)), n.toString();
  }
  generateTGUniversalLink(e, r) {
    const i = this.generateRegularUniversalLink("about:blank", r).split("?")[1], s = "tonconnect-" + Tie(i), o = this.convertToDirectLink(e), a = new URL(o);
    return a.searchParams.append("startapp", s), a.toString();
  }
  // TODO: Remove this method after all dApps and the wallets-list.json have been updated
  convertToDirectLink(e) {
    const r = new URL(e);
    return r.searchParams.has("attach") && (r.searchParams.delete("attach"), r.pathname += "/start"), r.toString();
  }
  openGateways(e, r) {
    return Mt(this, void 0, void 0, function* () {
      if (Array.isArray(this.walletConnectionSource)) {
        this.pendingGateways.map((n) => n.close().catch()), this.pendingGateways = this.walletConnectionSource.map((n) => {
          const i = new Vm(this.storage, n.bridgeUrl, e.sessionId, () => {
          }, () => {
          });
          return i.setListener((s) => this.pendingGatewaysListener(i, n.bridgeUrl, s)), i;
        }), yield Promise.allSettled(this.pendingGateways.map((n) => Zf((i) => {
          var s;
          return this.pendingGateways.some((o) => o === n) ? n.registerSession({
            openingDeadlineMS: (s = r == null ? void 0 : r.openingDeadlineMS) !== null && s !== void 0 ? s : this.defaultOpeningDeadlineMS,
            signal: i.signal
          }) : n.close();
        }, {
          attempts: Number.MAX_SAFE_INTEGER,
          delayMs: this.defaultRetryTimeoutMS,
          signal: r == null ? void 0 : r.signal
        })));
        return;
      } else
        return this.gateway && (Sn("Gateway is already opened, closing previous gateway"), yield this.gateway.close()), this.gateway = new Vm(this.storage, this.walletConnectionSource.bridgeUrl, e.sessionId, this.gatewayListener.bind(this), this.gatewayErrorsListener.bind(this)), yield this.gateway.registerSession({
          openingDeadlineMS: r == null ? void 0 : r.openingDeadlineMS,
          signal: r == null ? void 0 : r.signal
        });
    });
  }
  closeGateways(e) {
    var r;
    (r = this.gateway) === null || r === void 0 || r.close(), this.pendingGateways.filter((n) => n !== (e == null ? void 0 : e.except)).forEach((n) => n.close()), this.pendingGateways = [];
  }
}
function v5(t, e) {
  return Z9(t, [e]);
}
function Z9(t, e) {
  return !t || typeof t != "object" ? !1 : e.every((r) => r in t);
}
function Lie(t) {
  try {
    return !v5(t, "tonconnect") || !v5(t.tonconnect, "walletInfo") ? !1 : Z9(t.tonconnect.walletInfo, [
      "name",
      "app_name",
      "image",
      "about_url",
      "platforms"
    ]);
  } catch {
    return !1;
  }
}
class ou {
  constructor() {
    this.storage = {};
  }
  static getInstance() {
    return ou.instance || (ou.instance = new ou()), ou.instance;
  }
  get length() {
    return Object.keys(this.storage).length;
  }
  clear() {
    this.storage = {};
  }
  getItem(e) {
    var r;
    return (r = this.storage[e]) !== null && r !== void 0 ? r : null;
  }
  key(e) {
    var r;
    const n = Object.keys(this.storage);
    return e < 0 || e >= n.length ? null : (r = n[e]) !== null && r !== void 0 ? r : null;
  }
  removeItem(e) {
    delete this.storage[e];
  }
  setItem(e, r) {
    this.storage[e] = r;
  }
}
function Tp() {
  if (!(typeof window > "u"))
    return window;
}
function kie() {
  const t = Tp();
  if (!t)
    return [];
  try {
    return Object.keys(t);
  } catch {
    return [];
  }
}
function $ie() {
  if (!(typeof document > "u"))
    return document;
}
function Bie() {
  var t;
  const e = (t = Tp()) === null || t === void 0 ? void 0 : t.location.origin;
  return e ? e + "/tonconnect-manifest.json" : "";
}
function Fie() {
  if (jie())
    return localStorage;
  if (Uie())
    throw new jt("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");
  return ou.getInstance();
}
function jie() {
  try {
    return typeof localStorage < "u";
  } catch {
    return !1;
  }
}
function Uie() {
  return typeof process < "u" && process.versions != null && process.versions.node != null;
}
class vi {
  constructor(e, r) {
    this.injectedWalletKey = r, this.type = "injected", this.unsubscribeCallback = null, this.listenSubscriptions = !1, this.listeners = [];
    const n = vi.window;
    if (!vi.isWindowContainsWallet(n, r))
      throw new ly();
    this.connectionStorage = new Ol(e), this.injectedWallet = n[r].tonconnect;
  }
  static fromStorage(e) {
    return Mt(this, void 0, void 0, function* () {
      const n = yield new Ol(e).getInjectedConnection();
      return new vi(e, n.jsBridgeKey);
    });
  }
  static isWalletInjected(e) {
    return vi.isWindowContainsWallet(this.window, e);
  }
  static isInsideWalletBrowser(e) {
    return vi.isWindowContainsWallet(this.window, e) ? this.window[e].tonconnect.isWalletBrowser : !1;
  }
  static getCurrentlyInjectedWallets() {
    return this.window ? kie().filter(([n, i]) => Lie(i)).map(([n, i]) => ({
      name: i.tonconnect.walletInfo.name,
      appName: i.tonconnect.walletInfo.app_name,
      aboutUrl: i.tonconnect.walletInfo.about_url,
      imageUrl: i.tonconnect.walletInfo.image,
      tondns: i.tonconnect.walletInfo.tondns,
      jsBridgeKey: n,
      injected: !0,
      embedded: i.tonconnect.isWalletBrowser,
      platforms: i.tonconnect.walletInfo.platforms
    })) : [];
  }
  static isWindowContainsWallet(e, r) {
    return !!e && r in e && typeof e[r] == "object" && "tonconnect" in e[r];
  }
  connect(e) {
    this._connect(X9, e);
  }
  restoreConnection() {
    return Mt(this, void 0, void 0, function* () {
      try {
        Sn("Injected Provider restoring connection...");
        const e = yield this.injectedWallet.restoreConnection();
        Sn("Injected Provider restoring connection response", e), e.event === "connect" ? (this.makeSubscriptions(), this.listeners.forEach((r) => r(e))) : yield this.connectionStorage.removeConnection();
      } catch (e) {
        yield this.connectionStorage.removeConnection(), console.error(e);
      }
    });
  }
  closeConnection() {
    this.listenSubscriptions && this.injectedWallet.disconnect(), this.closeAllListeners();
  }
  disconnect() {
    return Mt(this, void 0, void 0, function* () {
      return new Promise((e) => {
        const r = () => {
          this.closeAllListeners(), this.connectionStorage.removeConnection().then(e);
        };
        try {
          this.injectedWallet.disconnect(), r();
        } catch (n) {
          Sn(n), this.sendRequest({
            method: "disconnect",
            params: []
          }, r);
        }
      });
    });
  }
  closeAllListeners() {
    var e;
    this.listenSubscriptions = !1, this.listeners = [], (e = this.unsubscribeCallback) === null || e === void 0 || e.call(this);
  }
  listen(e) {
    return this.listeners.push(e), () => this.listeners = this.listeners.filter((r) => r !== e);
  }
  sendRequest(e, r) {
    var n;
    return Mt(this, void 0, void 0, function* () {
      const i = {};
      typeof r == "function" ? i.onRequestSent = r : (i.onRequestSent = r == null ? void 0 : r.onRequestSent, i.signal = r == null ? void 0 : r.signal);
      const s = (yield this.connectionStorage.getNextRpcRequestId()).toString();
      yield this.connectionStorage.increaseNextRpcRequestId(), Sn("Send injected-bridge request:", Object.assign(Object.assign({}, e), { id: s }));
      const o = this.injectedWallet.send(Object.assign(Object.assign({}, e), { id: s }));
      return o.then((a) => Sn("Wallet message received:", a)), (n = i == null ? void 0 : i.onRequestSent) === null || n === void 0 || n.call(i), o;
    });
  }
  _connect(e, r) {
    return Mt(this, void 0, void 0, function* () {
      try {
        Sn(`Injected Provider connect request: protocolVersion: ${e}, message:`, r);
        const n = yield this.injectedWallet.connect(e, r);
        Sn("Injected Provider connect response:", n), n.event === "connect" && (yield this.updateSession(), this.makeSubscriptions()), this.listeners.forEach((i) => i(n));
      } catch (n) {
        Sn("Injected Provider connect error:", n);
        const i = {
          event: "connect_error",
          payload: {
            code: 0,
            message: n == null ? void 0 : n.toString()
          }
        };
        this.listeners.forEach((s) => s(i));
      }
    });
  }
  makeSubscriptions() {
    this.listenSubscriptions = !0, this.unsubscribeCallback = this.injectedWallet.listen((e) => {
      Sn("Wallet message received:", e), this.listenSubscriptions && this.listeners.forEach((r) => r(e)), e.event === "disconnect" && this.disconnect();
    });
  }
  updateSession() {
    return this.connectionStorage.storeConnection({
      type: "injected",
      jsBridgeKey: this.injectedWalletKey,
      nextRpcRequestId: 0
    });
  }
}
vi.window = Tp();
class qie {
  constructor() {
    this.localStorage = Fie();
  }
  getItem(e) {
    return Mt(this, void 0, void 0, function* () {
      return this.localStorage.getItem(e);
    });
  }
  removeItem(e) {
    return Mt(this, void 0, void 0, function* () {
      this.localStorage.removeItem(e);
    });
  }
  setItem(e, r) {
    return Mt(this, void 0, void 0, function* () {
      this.localStorage.setItem(e, r);
    });
  }
}
function Q9(t) {
  return Wie(t) && t.injected;
}
function zie(t) {
  return Q9(t) && t.embedded;
}
function Wie(t) {
  return "jsBridgeKey" in t;
}
const Hie = [
  {
    app_name: "telegram-wallet",
    name: "Wallet",
    image: "https://wallet.tg/images/logo-288.png",
    about_url: "https://wallet.tg/",
    universal_url: "https://t.me/wallet?attach=wallet",
    bridge: [
      {
        type: "sse",
        url: "https://bridge.ton.space/bridge"
      }
    ],
    platforms: ["ios", "android", "macos", "windows", "linux"]
  },
  {
    app_name: "tonkeeper",
    name: "Tonkeeper",
    image: "https://tonkeeper.com/assets/tonconnect-icon.png",
    tondns: "tonkeeper.ton",
    about_url: "https://tonkeeper.com",
    universal_url: "https://app.tonkeeper.com/ton-connect",
    deepLink: "tonkeeper-tc://",
    bridge: [
      {
        type: "sse",
        url: "https://bridge.tonapi.io/bridge"
      },
      {
        type: "js",
        key: "tonkeeper"
      }
    ],
    platforms: ["ios", "android", "chrome", "firefox", "macos"]
  },
  {
    app_name: "mytonwallet",
    name: "MyTonWallet",
    image: "https://static.mytonwallet.io/icon-256.png",
    about_url: "https://mytonwallet.io",
    universal_url: "https://connect.mytonwallet.org",
    bridge: [
      {
        type: "js",
        key: "mytonwallet"
      },
      {
        type: "sse",
        url: "https://tonconnectbridge.mytonwallet.org/bridge/"
      }
    ],
    platforms: ["chrome", "windows", "macos", "linux", "ios", "android", "firefox"]
  },
  {
    app_name: "openmask",
    name: "OpenMask",
    image: "https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",
    about_url: "https://www.openmask.app/",
    bridge: [
      {
        type: "js",
        key: "openmask"
      }
    ],
    platforms: ["chrome"]
  },
  {
    app_name: "tonhub",
    name: "Tonhub",
    image: "https://tonhub.com/tonconnect_logo.png",
    about_url: "https://tonhub.com",
    universal_url: "https://tonhub.com/ton-connect",
    bridge: [
      {
        type: "js",
        key: "tonhub"
      },
      {
        type: "sse",
        url: "https://connect.tonhubapi.com/tonconnect"
      }
    ],
    platforms: ["ios", "android"]
  },
  {
    app_name: "dewallet",
    name: "DeWallet",
    image: "https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",
    about_url: "https://delabwallet.com",
    universal_url: "https://t.me/dewallet?attach=wallet",
    bridge: [
      {
        type: "sse",
        url: "https://sse-bridge.delab.team/bridge"
      }
    ],
    platforms: ["ios", "android"]
  },
  {
    app_name: "xtonwallet",
    name: "XTONWallet",
    image: "https://xtonwallet.com/assets/img/icon-256-back.png",
    about_url: "https://xtonwallet.com",
    bridge: [
      {
        type: "js",
        key: "xtonwallet"
      }
    ],
    platforms: ["chrome", "firefox"]
  },
  {
    app_name: "tonwallet",
    name: "TON Wallet",
    image: "https://wallet.ton.org/assets/ui/qr-logo.png",
    about_url: "https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",
    bridge: [
      {
        type: "js",
        key: "tonwallet"
      }
    ],
    platforms: ["chrome"]
  },
  {
    app_name: "bitgetTonWallet",
    name: "Bitget Wallet",
    image: "https://raw.githubusercontent.com/bitkeepwallet/download/main/logo/png/bitget_wallet_logo_0_gas_fee.png",
    about_url: "https://web3.bitget.com",
    deepLink: "bitkeep://",
    bridge: [
      {
        type: "js",
        key: "bitgetTonWallet"
      },
      {
        type: "sse",
        url: "https://bridge.tonapi.io/bridge"
      }
    ],
    platforms: ["ios", "android", "chrome"],
    universal_url: "https://bkcode.vip/ton-connect"
  },
  {
    app_name: "safepalwallet",
    name: "SafePal",
    image: "https://s.pvcliping.com/web/public_image/SafePal_x288.png",
    tondns: "",
    about_url: "https://www.safepal.com",
    universal_url: "https://link.safepal.io/ton-connect",
    deepLink: "safepal-tc://",
    bridge: [
      {
        type: "sse",
        url: "https://ton-bridge.safepal.com/tonbridge/v1/bridge"
      },
      {
        type: "js",
        key: "safepalwallet"
      }
    ],
    platforms: ["ios", "android", "chrome", "firefox"]
  },
  {
    app_name: "okxTonWallet",
    name: "OKX Wallet",
    image: "https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",
    about_url: "https://www.okx.com/web3",
    universal_url: "https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",
    bridge: [
      {
        type: "js",
        key: "okxTonWallet"
      },
      {
        type: "sse",
        url: "https://www.okx.com/tonbridge/discover/rpc/bridge"
      }
    ],
    platforms: ["chrome", "safari", "firefox", "ios", "android"]
  },
  {
    app_name: "okxTonWalletTr",
    name: "OKX TR Wallet",
    image: "https://static.okx.com/cdn/assets/imgs/247/587A8296F0BB640F.png",
    about_url: "https://tr.okx.com/web3",
    universal_url: "https://tr.okx.com/download?appendQuery=true&deeplink=okxtr://web3/wallet/tonconnect",
    bridge: [
      {
        type: "js",
        key: "okxTonWallet"
      },
      {
        type: "sse",
        url: "https://www.okx.com/tonbridge/discover/rpc/bridge"
      }
    ],
    platforms: ["chrome", "safari", "firefox", "ios", "android"]
  }
];
class dv {
  constructor(e) {
    this.walletsListCache = null, this.walletsListCacheCreationTimestamp = null, this.walletsListSource = "https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json", e != null && e.walletsListSource && (this.walletsListSource = e.walletsListSource), e != null && e.cacheTTLMs && (this.cacheTTLMs = e.cacheTTLMs);
  }
  getWallets() {
    return Mt(this, void 0, void 0, function* () {
      return this.cacheTTLMs && this.walletsListCacheCreationTimestamp && Date.now() > this.walletsListCacheCreationTimestamp + this.cacheTTLMs && (this.walletsListCache = null), this.walletsListCache || (this.walletsListCache = this.fetchWalletsList(), this.walletsListCache.then(() => {
        this.walletsListCacheCreationTimestamp = Date.now();
      }).catch(() => {
        this.walletsListCache = null, this.walletsListCacheCreationTimestamp = null;
      })), this.walletsListCache;
    });
  }
  getEmbeddedWallet() {
    return Mt(this, void 0, void 0, function* () {
      const r = (yield this.getWallets()).filter(zie);
      return r.length !== 1 ? null : r[0];
    });
  }
  fetchWalletsList() {
    return Mt(this, void 0, void 0, function* () {
      let e = [];
      try {
        if (e = yield (yield fetch(this.walletsListSource)).json(), !Array.isArray(e))
          throw new hy("Wrong wallets list format, wallets list must be an array.");
        const i = e.filter((s) => !this.isCorrectWalletConfigDTO(s));
        i.length && (No(`Wallet(s) ${i.map((s) => s.name).join(", ")} config format is wrong. They were removed from the wallets list.`), e = e.filter((s) => this.isCorrectWalletConfigDTO(s)));
      } catch (n) {
        No(n), e = Hie;
      }
      let r = [];
      try {
        r = vi.getCurrentlyInjectedWallets();
      } catch (n) {
        No(n);
      }
      return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(e), r);
    });
  }
  walletConfigDTOListToWalletConfigList(e) {
    return e.map((r) => {
      const i = {
        name: r.name,
        appName: r.app_name,
        imageUrl: r.image,
        aboutUrl: r.about_url,
        tondns: r.tondns,
        platforms: r.platforms
      };
      return r.bridge.forEach((s) => {
        if (s.type === "sse" && (i.bridgeUrl = s.url, i.universalLink = r.universal_url, i.deepLink = r.deepLink), s.type === "js") {
          const o = s.key;
          i.jsBridgeKey = o, i.injected = vi.isWalletInjected(o), i.embedded = vi.isInsideWalletBrowser(o);
        }
      }), i;
    });
  }
  mergeWalletsLists(e, r) {
    return [...new Set(e.concat(r).map((i) => i.name)).values()].map((i) => {
      const s = e.find((a) => a.name === i), o = r.find((a) => a.name === i);
      return Object.assign(Object.assign({}, s && Object.assign({}, s)), o && Object.assign({}, o));
    });
  }
  // eslint-disable-next-line complexity
  isCorrectWalletConfigDTO(e) {
    if (!e || typeof e != "object")
      return !1;
    const r = "name" in e, n = "app_name" in e, i = "image" in e, s = "about_url" in e, o = "platforms" in e;
    if (!r || !i || !s || !o || !n || !e.platforms || !Array.isArray(e.platforms) || !e.platforms.length || !("bridge" in e) || !Array.isArray(e.bridge) || !e.bridge.length)
      return !1;
    const a = e.bridge;
    if (a.some((d) => !d || typeof d != "object" || !("type" in d)))
      return !1;
    const u = a.find((d) => d.type === "sse");
    if (u && (!("url" in u) || !u.url || !e.universal_url))
      return !1;
    const l = a.find((d) => d.type === "js");
    return !(l && (!("key" in l) || !l.key));
  }
}
class M0 extends jt {
  get info() {
    return "Wallet doesn't support requested feature method.";
  }
  constructor(...e) {
    super(...e), Object.setPrototypeOf(this, M0.prototype);
  }
}
function Kie(t, e) {
  const r = t.includes("SendTransaction"), n = t.find((i) => i && typeof i == "object" && i.name === "SendTransaction");
  if (!r && !n)
    throw new M0("Wallet doesn't support SendTransaction feature.");
  if (n && n.maxMessages !== void 0) {
    if (n.maxMessages < e.requiredMessagesNumber)
      throw new M0(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${n.maxMessages}, but ${e.requiredMessagesNumber} is required.`);
    return;
  }
  Rie("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.");
}
function Vie() {
  return {
    type: "request-version"
  };
}
function Gie(t) {
  return {
    type: "response-version",
    version: t
  };
}
function Yu(t) {
  return {
    ton_connect_sdk_lib: t.ton_connect_sdk_lib,
    ton_connect_ui_lib: t.ton_connect_ui_lib
  };
}
function Ju(t, e) {
  var r, n, i, s, o, a, u, l;
  const p = ((r = e == null ? void 0 : e.connectItems) === null || r === void 0 ? void 0 : r.tonProof) && "proof" in e.connectItems.tonProof ? "ton_proof" : "ton_addr";
  return {
    wallet_address: (i = (n = e == null ? void 0 : e.account) === null || n === void 0 ? void 0 : n.address) !== null && i !== void 0 ? i : null,
    wallet_type: (s = e == null ? void 0 : e.device.appName) !== null && s !== void 0 ? s : null,
    wallet_version: (o = e == null ? void 0 : e.device.appVersion) !== null && o !== void 0 ? o : null,
    auth_type: p,
    custom_data: Object.assign({ chain_id: (u = (a = e == null ? void 0 : e.account) === null || a === void 0 ? void 0 : a.chain) !== null && u !== void 0 ? u : null, provider: (l = e == null ? void 0 : e.provider) !== null && l !== void 0 ? l : null }, Yu(t))
  };
}
function Yie(t) {
  return {
    type: "connection-started",
    custom_data: Yu(t)
  };
}
function Jie(t, e) {
  return Object.assign({ type: "connection-completed", is_success: !0 }, Ju(t, e));
}
function Xie(t, e, r) {
  return {
    type: "connection-error",
    is_success: !1,
    error_message: e,
    error_code: r ?? null,
    custom_data: Yu(t)
  };
}
function Zie(t) {
  return {
    type: "connection-restoring-started",
    custom_data: Yu(t)
  };
}
function Qie(t, e) {
  return Object.assign({ type: "connection-restoring-completed", is_success: !0 }, Ju(t, e));
}
function ese(t, e) {
  return {
    type: "connection-restoring-error",
    is_success: !1,
    error_message: e,
    custom_data: Yu(t)
  };
}
function dy(t, e) {
  var r, n, i, s;
  return {
    valid_until: (r = String(e.validUntil)) !== null && r !== void 0 ? r : null,
    from: (s = (n = e.from) !== null && n !== void 0 ? n : (i = t == null ? void 0 : t.account) === null || i === void 0 ? void 0 : i.address) !== null && s !== void 0 ? s : null,
    messages: e.messages.map((o) => {
      var a, u;
      return {
        address: (a = o.address) !== null && a !== void 0 ? a : null,
        amount: (u = o.amount) !== null && u !== void 0 ? u : null
      };
    })
  };
}
function tse(t, e, r) {
  return Object.assign(Object.assign({ type: "transaction-sent-for-signature" }, Ju(t, e)), dy(e, r));
}
function rse(t, e, r, n) {
  return Object.assign(Object.assign({ type: "transaction-signed", is_success: !0, signed_transaction: n.boc }, Ju(t, e)), dy(e, r));
}
function nse(t, e, r, n, i) {
  return Object.assign(Object.assign({ type: "transaction-signing-failed", is_success: !1, error_message: n, error_code: i ?? null }, Ju(t, e)), dy(e, r));
}
function ise(t, e, r) {
  return Object.assign({ type: "disconnection", scope: r }, Ju(t, e));
}
class sse {
  constructor() {
    this.window = Tp();
  }
  /**
   * Dispatches an event with the given name and details to the browser window.
   * @param eventName - The name of the event to dispatch.
   * @param eventDetails - The details of the event to dispatch.
   * @returns A promise that resolves when the event has been dispatched.
   */
  dispatchEvent(e, r) {
    var n;
    return Mt(this, void 0, void 0, function* () {
      const i = new CustomEvent(e, { detail: r });
      (n = this.window) === null || n === void 0 || n.dispatchEvent(i);
    });
  }
  /**
   * Adds an event listener to the browser window.
   * @param eventName - The name of the event to listen for.
   * @param listener - The listener to add.
   * @param options - The options for the listener.
   * @returns A function that removes the listener.
   */
  addEventListener(e, r, n) {
    var i;
    return Mt(this, void 0, void 0, function* () {
      return (i = this.window) === null || i === void 0 || i.addEventListener(e, r, n), () => {
        var s;
        return (s = this.window) === null || s === void 0 ? void 0 : s.removeEventListener(e, r);
      };
    });
  }
}
class ose {
  constructor(e) {
    var r;
    this.eventPrefix = "ton-connect-", this.tonConnectUiVersion = null, this.eventDispatcher = (r = e == null ? void 0 : e.eventDispatcher) !== null && r !== void 0 ? r : new sse(), this.tonConnectSdkVersion = e.tonConnectSdkVersion, this.init().catch();
  }
  /**
   * Version of the library.
   */
  get version() {
    return Yu({
      ton_connect_sdk_lib: this.tonConnectSdkVersion,
      ton_connect_ui_lib: this.tonConnectUiVersion
    });
  }
  /**
   * Called once when the tracker is created and request version other libraries.
   */
  init() {
    return Mt(this, void 0, void 0, function* () {
      try {
        yield this.setRequestVersionHandler(), this.tonConnectUiVersion = yield this.requestTonConnectUiVersion();
      } catch {
      }
    });
  }
  /**
   * Set request version handler.
   * @private
   */
  setRequestVersionHandler() {
    return Mt(this, void 0, void 0, function* () {
      yield this.eventDispatcher.addEventListener("ton-connect-request-version", () => Mt(this, void 0, void 0, function* () {
        yield this.eventDispatcher.dispatchEvent("ton-connect-response-version", Gie(this.tonConnectSdkVersion));
      }));
    });
  }
  /**
   * Request TonConnect UI version.
   * @private
   */
  requestTonConnectUiVersion() {
    return Mt(this, void 0, void 0, function* () {
      return new Promise((e, r) => Mt(this, void 0, void 0, function* () {
        try {
          yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version", (n) => {
            e(n.detail.version);
          }, { once: !0 }), yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version", Vie());
        } catch (n) {
          r(n);
        }
      }));
    });
  }
  /**
   * Emit user action event to the window.
   * @param eventDetails
   * @private
   */
  dispatchUserActionEvent(e) {
    try {
      this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`, e).catch();
    } catch {
    }
  }
  /**
   * Track connection init event.
   * @param args
   */
  trackConnectionStarted(...e) {
    try {
      const r = Yie(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track connection success event.
   * @param args
   */
  trackConnectionCompleted(...e) {
    try {
      const r = Jie(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track connection error event.
   * @param args
   */
  trackConnectionError(...e) {
    try {
      const r = Xie(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track connection restoring init event.
   * @param args
   */
  trackConnectionRestoringStarted(...e) {
    try {
      const r = Zie(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track connection restoring success event.
   * @param args
   */
  trackConnectionRestoringCompleted(...e) {
    try {
      const r = Qie(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track connection restoring error event.
   * @param args
   */
  trackConnectionRestoringError(...e) {
    try {
      const r = ese(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track disconnect event.
   * @param args
   */
  trackDisconnection(...e) {
    try {
      const r = ise(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track transaction init event.
   * @param args
   */
  trackTransactionSentForSignature(...e) {
    try {
      const r = tse(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track transaction signed event.
   * @param args
   */
  trackTransactionSigned(...e) {
    try {
      const r = rse(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
  /**
   * Track transaction error event.
   * @param args
   */
  trackTransactionSigningFailed(...e) {
    try {
      const r = nse(this.version, ...e);
      this.dispatchUserActionEvent(r);
    } catch {
    }
  }
}
const ase = "3.0.5";
class fh {
  constructor(e) {
    if (this.walletsList = new dv(), this._wallet = null, this.provider = null, this.statusChangeSubscriptions = [], this.statusChangeErrorSubscriptions = [], this.dappSettings = {
      manifestUrl: (e == null ? void 0 : e.manifestUrl) || Bie(),
      storage: (e == null ? void 0 : e.storage) || new qie()
    }, this.walletsList = new dv({
      walletsListSource: e == null ? void 0 : e.walletsListSource,
      cacheTTLMs: e == null ? void 0 : e.walletsListCacheTTLMs
    }), this.tracker = new ose({
      eventDispatcher: e == null ? void 0 : e.eventDispatcher,
      tonConnectSdkVersion: ase
    }), !this.dappSettings.manifestUrl)
      throw new uy("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");
    this.bridgeConnectionStorage = new Ol(this.dappSettings.storage), e != null && e.disableAutoPauseConnection || this.addWindowFocusAndBlurSubscriptions();
  }
  /**
   * Returns available wallets list.
   */
  static getWallets() {
    return this.walletsList.getWallets();
  }
  /**
   * Shows if the wallet is connected right now.
   */
  get connected() {
    return this._wallet !== null;
  }
  /**
   * Current connected account or null if no account is connected.
   */
  get account() {
    var e;
    return ((e = this._wallet) === null || e === void 0 ? void 0 : e.account) || null;
  }
  /**
   * Current connected wallet or null if no account is connected.
   */
  get wallet() {
    return this._wallet;
  }
  set wallet(e) {
    this._wallet = e, this.statusChangeSubscriptions.forEach((r) => r(this._wallet));
  }
  /**
   * Returns available wallets list.
   */
  getWallets() {
    return this.walletsList.getWallets();
  }
  /**
   * Allows to subscribe to connection status changes and handle connection errors.
   * @param callback will be called after connections status changes with actual wallet or null.
   * @param errorsHandler (optional) will be called with some instance of TonConnectError when connect error is received.
   * @returns unsubscribe callback.
   */
  onStatusChange(e, r) {
    return this.statusChangeSubscriptions.push(e), r && this.statusChangeErrorSubscriptions.push(r), () => {
      this.statusChangeSubscriptions = this.statusChangeSubscriptions.filter((n) => n !== e), r && (this.statusChangeErrorSubscriptions = this.statusChangeErrorSubscriptions.filter((n) => n !== r));
    };
  }
  connect(e, r) {
    var n, i;
    const s = {};
    if (typeof r == "object" && "tonProof" in r && (s.request = r), typeof r == "object" && ("openingDeadlineMS" in r || "signal" in r || "request" in r) && (s.request = r == null ? void 0 : r.request, s.openingDeadlineMS = r == null ? void 0 : r.openingDeadlineMS, s.signal = r == null ? void 0 : r.signal), this.connected)
      throw new fy();
    const o = _s(s == null ? void 0 : s.signal);
    if ((n = this.abortController) === null || n === void 0 || n.abort(), this.abortController = o, o.signal.aborted)
      throw new jt("Connection was aborted");
    return (i = this.provider) === null || i === void 0 || i.closeConnection(), this.provider = this.createProvider(e), o.signal.addEventListener("abort", () => {
      var a;
      (a = this.provider) === null || a === void 0 || a.closeConnection(), this.provider = null;
    }), this.tracker.trackConnectionStarted(), this.provider.connect(this.createConnectRequest(s == null ? void 0 : s.request), {
      openingDeadlineMS: s == null ? void 0 : s.openingDeadlineMS,
      signal: o.signal
    });
  }
  /**
   * Try to restore existing session and reconnect to the corresponding wallet. Call it immediately when your app is loaded.
   */
  restoreConnection(e) {
    var r, n;
    return Mt(this, void 0, void 0, function* () {
      this.tracker.trackConnectionRestoringStarted();
      const i = _s(e == null ? void 0 : e.signal);
      if ((r = this.abortController) === null || r === void 0 || r.abort(), this.abortController = i, i.signal.aborted) {
        this.tracker.trackConnectionRestoringError("Connection restoring was aborted");
        return;
      }
      const [s, o] = yield Promise.all([
        this.bridgeConnectionStorage.storedConnectionType(),
        this.walletsList.getEmbeddedWallet()
      ]);
      if (i.signal.aborted) {
        this.tracker.trackConnectionRestoringError("Connection restoring was aborted");
        return;
      }
      let a = null;
      try {
        switch (s) {
          case "http":
            a = yield Nl.fromStorage(this.dappSettings.storage);
            break;
          case "injected":
            a = yield vi.fromStorage(this.dappSettings.storage);
            break;
          default:
            if (o)
              a = this.createProvider(o);
            else
              return;
        }
      } catch {
        this.tracker.trackConnectionRestoringError("Provider is not restored"), yield this.bridgeConnectionStorage.removeConnection(), a == null || a.closeConnection(), a = null;
        return;
      }
      if (i.signal.aborted) {
        a == null || a.closeConnection(), this.tracker.trackConnectionRestoringError("Connection restoring was aborted");
        return;
      }
      if (!a) {
        No("Provider is not restored"), this.tracker.trackConnectionRestoringError("Provider is not restored");
        return;
      }
      (n = this.provider) === null || n === void 0 || n.closeConnection(), this.provider = a, a.listen(this.walletEventsListener.bind(this));
      const u = () => {
        this.tracker.trackConnectionRestoringError("Connection restoring was aborted"), a == null || a.closeConnection(), a = null;
      };
      i.signal.addEventListener("abort", u);
      const l = Zf((p) => Mt(this, void 0, void 0, function* () {
        yield a == null ? void 0 : a.restoreConnection({
          openingDeadlineMS: e == null ? void 0 : e.openingDeadlineMS,
          signal: p.signal
        }), i.signal.removeEventListener("abort", u), this.connected ? this.tracker.trackConnectionRestoringCompleted(this.wallet) : this.tracker.trackConnectionRestoringError("Connection restoring failed");
      }), {
        attempts: Number.MAX_SAFE_INTEGER,
        delayMs: 2e3,
        signal: e == null ? void 0 : e.signal
      }), d = new Promise(
        (p) => setTimeout(() => p(), 12e3)
        // connection deadline
      );
      return Promise.race([l, d]);
    });
  }
  sendTransaction(e, r) {
    return Mt(this, void 0, void 0, function* () {
      const n = {};
      typeof r == "function" ? n.onRequestSent = r : (n.onRequestSent = r == null ? void 0 : r.onRequestSent, n.signal = r == null ? void 0 : r.signal);
      const i = _s(n == null ? void 0 : n.signal);
      if (i.signal.aborted)
        throw new jt("Transaction sending was aborted");
      this.checkConnection(), Kie(this.wallet.device.features, {
        requiredMessagesNumber: e.messages.length
      }), this.tracker.trackTransactionSentForSignature(this.wallet, e);
      const { validUntil: s } = e, o = xie(e, ["validUntil"]), a = e.from || this.account.address, u = e.network || this.account.chain, l = yield this.provider.sendRequest(wd.convertToRpcRequest(Object.assign(Object.assign({}, o), {
        valid_until: s,
        from: a,
        network: u
      })), { onRequestSent: n.onRequestSent, signal: i.signal });
      if (wd.isError(l))
        return this.tracker.trackTransactionSigningFailed(this.wallet, e, l.error.message, l.error.code), wd.parseAndThrowError(l);
      const d = wd.convertFromRpcResponse(l);
      return this.tracker.trackTransactionSigned(this.wallet, e, d), d;
    });
  }
  /**
   * Disconnect form thw connected wallet and drop current session.
   */
  disconnect(e) {
    var r;
    return Mt(this, void 0, void 0, function* () {
      if (!this.connected)
        throw new P0();
      const n = _s(e == null ? void 0 : e.signal), i = this.abortController;
      if (this.abortController = n, n.signal.aborted)
        throw new jt("Disconnect was aborted");
      this.onWalletDisconnected("dapp"), yield (r = this.provider) === null || r === void 0 ? void 0 : r.disconnect({
        signal: n.signal
      }), i == null || i.abort();
    });
  }
  /**
   * Pause bridge HTTP connection. Might be helpful, if you want to pause connections while browser tab is unfocused,
   * or if you use SDK with NodeJS and want to save server resources.
   */
  pauseConnection() {
    var e;
    ((e = this.provider) === null || e === void 0 ? void 0 : e.type) === "http" && this.provider.pause();
  }
  /**
   * Unpause bridge HTTP connection if it is paused.
   */
  unPauseConnection() {
    var e;
    return ((e = this.provider) === null || e === void 0 ? void 0 : e.type) !== "http" ? Promise.resolve() : this.provider.unPause();
  }
  addWindowFocusAndBlurSubscriptions() {
    const e = $ie();
    if (e)
      try {
        e.addEventListener("visibilitychange", () => {
          e.hidden ? this.pauseConnection() : this.unPauseConnection().catch();
        });
      } catch (r) {
        No("Cannot subscribe to the document.visibilitychange: ", r);
      }
  }
  createProvider(e) {
    let r;
    return !Array.isArray(e) && _ie(e) ? r = new vi(this.dappSettings.storage, e.jsBridgeKey) : r = new Nl(this.dappSettings.storage, e), r.listen(this.walletEventsListener.bind(this)), r;
  }
  walletEventsListener(e) {
    switch (e.event) {
      case "connect":
        this.onWalletConnected(e.payload);
        break;
      case "connect_error":
        this.onWalletConnectError(e.payload);
        break;
      case "disconnect":
        this.onWalletDisconnected("wallet");
    }
  }
  onWalletConnected(e) {
    const r = e.items.find((s) => s.name === "ton_addr"), n = e.items.find((s) => s.name === "ton_proof");
    if (!r)
      throw new jt("ton_addr connection item was not found");
    const i = {
      device: e.device,
      provider: this.provider.type,
      account: {
        address: r.address,
        chain: r.network,
        walletStateInit: r.walletStateInit,
        publicKey: r.publicKey
      }
    };
    n && (i.connectItems = {
      tonProof: n
    }), this.wallet = i, this.tracker.trackConnectionCompleted(i);
  }
  onWalletConnectError(e) {
    const r = Sie.parseError(e);
    if (this.statusChangeErrorSubscriptions.forEach((n) => n(r)), Sn(r), this.tracker.trackConnectionError(e.message, e.code), r instanceof Pp || r instanceof Ap)
      throw No(r), r;
  }
  onWalletDisconnected(e) {
    this.tracker.trackDisconnection(this.wallet, e), this.wallet = null;
  }
  checkConnection() {
    if (!this.connected)
      throw new P0();
  }
  createConnectRequest(e) {
    const r = [
      {
        name: "ton_addr"
      }
    ];
    return e != null && e.tonProof && r.push({
      name: "ton_proof",
      payload: e.tonProof
    }), {
      manifestUrl: this.dappSettings.manifestUrl,
      items: r
    };
  }
}
fh.walletsList = new dv();
fh.isWalletInjected = (t) => vi.isWalletInjected(t);
fh.isInsideWalletBrowser = (t) => vi.isInsideWalletBrowser(t);
for (let t = 0; t <= 255; t++) {
  let e = t.toString(16);
  e.length < 2 && (e = "0" + e);
}
function Gm(t) {
  const { children: e, onClick: r } = t;
  return /* @__PURE__ */ pe.jsx("button", { onClick: r, className: "xc-border xc-px-4 xc-py-2 xc-rounded-full xc-text-sm xc-flex xc-gap-2 xc-items-center", children: e });
}
function eA(t) {
  const { wallet: e, connector: r, loading: n } = t, i = Zn(null), s = Zn(), [o, a] = Qt(), [u, l] = Qt(), [d, p] = Qt("connect"), [w, A] = Qt(!1), [M, N] = Qt();
  function L(K) {
    var ge;
    (ge = s.current) == null || ge.update({
      data: K
    });
  }
  async function B() {
    A(!0);
    try {
      a("");
      const K = await Ta.getNonce({ account_type: "block_chain" });
      if ("universalLink" in e && e.universalLink) {
        const ge = r.connect({
          universalLink: e.universalLink,
          bridgeUrl: e.bridgeUrl
        }, {
          request: { tonProof: K }
        });
        if (!ge) return;
        N(ge), L(ge), l(K);
      }
    } catch (K) {
      a(K.message);
    }
    A(!1);
  }
  function $() {
    s.current = new F9({
      width: 264,
      height: 264,
      margin: 0,
      type: "svg",
      qrOptions: {
        errorCorrectionLevel: "M"
      },
      dotsOptions: {
        color: "black",
        type: "rounded"
      },
      backgroundOptions: {
        color: "transparent"
      }
    }), s.current.append(i.current);
  }
  function H() {
    r.connect(e, {
      request: { tonProof: u }
    });
  }
  function W() {
    if ("deepLink" in e) {
      if (!e.deepLink || !M) return;
      const K = new URL(M), ge = `${e.deepLink}${K.search}`;
      window.open(ge);
    }
  }
  function V() {
    "universalLink" in e && e.universalLink && /t.me/.test(e.universalLink) && window.open(M);
  }
  const te = wi(() => !!("deepLink" in e && e.deepLink), [e]), R = wi(() => !!("universalLink" in e && e.universalLink && /t.me/.test(e.universalLink)), [e]);
  return Dn(() => {
    $(), B();
  }, []), /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-6", children: /* @__PURE__ */ pe.jsx(Pc, { title: "Connect wallet", onBack: t.onBack }) }),
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-text-center xc-mb-6", children: [
      /* @__PURE__ */ pe.jsxs("div", { className: "xc-relative xc-mx-auto xc-mb-6 xc-block xc-max-h-[272px] xc-max-w-[272px] xc-rounded-xl xc-bg-white xc-p-1", children: [
        /* @__PURE__ */ pe.jsx("div", { className: "xc-aspect-[1/1] xc-flex xc-h-full xc-w-full xc-justify-center", ref: i }),
        /* @__PURE__ */ pe.jsx("div", { className: "xc-absolute xc-left-0 xc-top-0 xc-flex xc-h-full xc-w-full xc-items-center xc-justify-center", children: w ? /* @__PURE__ */ pe.jsx(mc, { className: "xc-h-6 xc-w-6 xc-animate-spin xc-text-black", size: 20 }) : /* @__PURE__ */ pe.jsx("img", { className: "xc-h-10 xc-w-10 xc-rounded-md", src: e.imageUrl }) })
      ] }),
      /* @__PURE__ */ pe.jsx("p", { className: "xc-text-center", children: "Scan the QR code below with your phone's camera. " })
    ] }),
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-flex xc-justify-center xc-gap-2", children: [
      n && /* @__PURE__ */ pe.jsx(mc, { className: "xc-animate-spin" }),
      !w && !n && /* @__PURE__ */ pe.jsxs(pe.Fragment, { children: [
        Q9(e) && /* @__PURE__ */ pe.jsxs(Gm, { onClick: H, children: [
          /* @__PURE__ */ pe.jsx(gZ, { className: "xc-opacity-80" }),
          "Extension"
        ] }),
        te && /* @__PURE__ */ pe.jsxs(Gm, { onClick: W, children: [
          /* @__PURE__ */ pe.jsx(HS, { className: "xc-opacity-80" }),
          "Desktop"
        ] }),
        R && /* @__PURE__ */ pe.jsx(Gm, { onClick: V, children: "Telegram Mini App" })
      ] })
    ] })
  ] });
}
function cse(t) {
  const [e, r] = Qt(""), [n, i] = Qt(), [s, o] = Qt(), a = cy(), [u, l] = Qt(!1);
  async function d(w) {
    var M, N;
    if (!w || !((M = w.connectItems) != null && M.tonProof)) return;
    l(!0);
    const A = await Ta.tonLogin({
      account_type: "block_chain",
      connector: "codatta_ton",
      account_enum: "C",
      wallet_name: w == null ? void 0 : w.device.appName,
      inviter_code: a.inviterCode,
      address: w.account.address,
      chain: w.account.chain,
      connect_info: [
        { name: "ton_addr", network: w.account.chain, ...w.account },
        (N = w.connectItems) == null ? void 0 : N.tonProof
      ],
      source: {
        device: a.device,
        channel: a.channel,
        app: a.app
      }
    });
    await t.onLogin(A.data), l(!1);
  }
  Dn(() => {
    const w = new fh({
      manifestUrl: "https://static.codatta.io/static/tonconnect-manifest.json?v=2"
    }), A = w.onStatusChange(d);
    return o(w), r("select"), A;
  }, []);
  function p(w) {
    r("connect"), i(w);
  }
  return /* @__PURE__ */ pe.jsxs(Ms, { children: [
    e === "select" && /* @__PURE__ */ pe.jsx(
      H9,
      {
        connector: s,
        onSelect: p,
        onBack: t.onBack
      }
    ),
    e === "connect" && /* @__PURE__ */ pe.jsx(
      eA,
      {
        connector: s,
        wallet: n,
        onBack: t.onBack,
        loading: u
      }
    )
  ] });
}
function tA(t) {
  const { children: e, className: r } = t, n = Zn(null), [i, s] = pv.useState(0);
  function o() {
    var a;
    try {
      const u = ((a = n.current) == null ? void 0 : a.children) || [];
      let l = 0;
      for (let d = 0; d < u.length; d++)
        l += u[d].offsetHeight;
      s(l);
    } catch (u) {
      console.error(u);
    }
  }
  return Dn(() => {
    const a = new MutationObserver(o);
    return a.observe(n.current, { childList: !0, subtree: !0 }), () => a.disconnect();
  }, []), Dn(() => {
    console.log("maxHeight", i);
  }, [i]), /* @__PURE__ */ pe.jsx(
    "div",
    {
      ref: n,
      className: r,
      style: {
        transition: "all 0.2s ease-in-out",
        overflow: "hidden",
        height: i
      },
      children: e
    }
  );
}
function use() {
  return /* @__PURE__ */ pe.jsxs("svg", { width: "121", height: "120", viewBox: "0 0 121 120", fill: "none", xmlns: "http://www.w3.org/2000/svg", children: [
    /* @__PURE__ */ pe.jsx("rect", { x: "0.5", width: "120", height: "120", rx: "60", fill: "#404049" }),
    /* @__PURE__ */ pe.jsx("path", { "fill-rule": "evenodd", "clip-rule": "evenodd", d: "M52.8709 61.106C52.8208 61.4482 52.7948 61.7979 52.7948 62.1535C52.7948 66.2529 56.2445 69.5761 60.5 69.5761C64.7554 69.5761 68.2052 66.2529 68.2052 62.1535C68.2052 61.7979 68.1792 61.4482 68.129 61.106H86.826V77.6174C86.826 78.6422 85.9636 79.473 84.8997 79.473H36.1002C35.0364 79.473 34.174 78.6422 34.174 77.6174V61.106H52.8709Z", fill: "#252532" }),
    /* @__PURE__ */ pe.jsx("path", { "fill-rule": "evenodd", "clip-rule": "evenodd", d: "M69.061 60.9416C69.061 65.6697 65.2281 69.5026 60.5 69.5026C55.7719 69.5026 51.939 65.6697 51.939 60.9416C51.939 60.7884 51.943 60.6362 51.951 60.485H33.5L39.7959 41.8696C40.0673 41.0671 40.8202 40.527 41.6674 40.527H79.3326C80.1798 40.527 80.9327 41.0671 81.2041 41.8696L87.5 60.485H69.049C69.057 60.6362 69.061 60.7884 69.061 60.9416Z", fill: "#252532" }),
    /* @__PURE__ */ pe.jsx("path", { "fill-rule": "evenodd", "clip-rule": "evenodd", d: "M67.8081 61.5708C67.8081 65.2243 64.5361 68.8446 60.4999 68.8446C56.4637 68.8446 53.1918 65.2243 53.1918 61.5708C53.1918 61.4524 53.1952 60.6762 53.202 60.5594H39.4268L44.8013 47.4919C45.033 46.8717 45.6757 46.4543 46.3989 46.4543H74.601C75.3242 46.4543 75.9669 46.8717 76.1986 47.4919L81.5731 60.5594H67.7979C67.8046 60.6762 67.8081 61.4524 67.8081 61.5708Z", fill: "#404049" }),
    /* @__PURE__ */ pe.jsx("path", { "fill-rule": "evenodd", "clip-rule": "evenodd", d: "M34.3232 60.6199V78.063C34.3232 78.6995 34.8392 79.2155 35.4757 79.2155H85.5245C86.1609 79.2155 86.6769 78.6995 86.6769 78.063V60.6199L80.4244 42.1328C80.2661 41.6647 79.8269 41.3496 79.3327 41.3496H41.6674C41.1733 41.3496 40.7341 41.6647 40.5758 42.1328L34.3232 60.6199Z", stroke: "#77777D", "stroke-width": "2" }),
    /* @__PURE__ */ pe.jsx("path", { d: "M34.817 60.2823C37.4094 60.2823 48.1095 60.2823 51.1124 60.2823C52.348 60.2823 52.348 61.1507 52.348 61.5994C52.348 65.9638 55.9675 69.5019 60.4323 69.5019C64.8971 69.5019 68.5165 65.9638 68.5165 61.5994C68.5165 61.1507 68.5165 60.2823 69.7521 60.2823H86.1829", stroke: "#77777D", "stroke-width": "2", "stroke-linecap": "round", "stroke-linejoin": "round" })
  ] });
}
function rA(t) {
  const { wallets: e } = mp(), [r, n] = Qt(), i = wi(() => r ? e.filter((a) => a.key.toLowerCase().includes(r.toLowerCase())) : e, [r]);
  function s(a) {
    t.onSelectWallet(a);
  }
  function o(a) {
    n(a.target.value);
  }
  return /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-6", children: /* @__PURE__ */ pe.jsx(Pc, { title: "Select wallet", onBack: t.onBack }) }),
    /* @__PURE__ */ pe.jsxs("div", { className: "xc-mb-6 xc-flex xc-gap-3 xc-px-4 xc-py-2 xc-border xc-rounded-xl xc-w-full xc-overflow-hidden xc-items-center xc-border-opacity-15 xc-border-white focus-within:xc-border-opacity-40", children: [
      /* @__PURE__ */ pe.jsx(KS, { className: "xc-shrink-0 xc-opacity-50" }),
      /* @__PURE__ */ pe.jsx("input", { type: "text", className: "xc-flex-1 xc-bg-transparent xc-appearance-none xc-outline-none", placeholder: "Search wallet", onInput: o })
    ] }),
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-4 xc-flex xc-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar", children: i.length ? i.map((a) => /* @__PURE__ */ pe.jsx(
      y9,
      {
        wallet: a,
        onClick: s
      },
      `feature-${a.key}`
    )) : /* @__PURE__ */ pe.jsx(use, {}) })
  ] });
}
function woe(t) {
  const { onLogin: e, header: r, showEmailSignIn: n = !0, showMoreWallets: i = !0, showTonConnect: s = !0, showFeaturedWallets: o = !0 } = t, [a, u] = Qt(""), [l, d] = Qt(null), [p, w] = Qt("");
  function A(B) {
    d(B), u("evm-wallet");
  }
  function M(B) {
    u("email"), w(B);
  }
  async function N(B) {
    await e(B);
  }
  function L() {
    u("ton-wallet");
  }
  return Dn(() => {
    u("index");
  }, []), /* @__PURE__ */ pe.jsx(Cne, { config: t.config, children: /* @__PURE__ */ pe.jsxs(tA, { className: "xc-rounded-2xl xc-transition-height xc-box-content xc-w-full xc-min-w-[277px] xc-max-w-[420px] xc-p-6 xc-bg-[rgb(28,28,38)] xc-text-white", children: [
    a === "evm-wallet" && /* @__PURE__ */ pe.jsx(
      lie,
      {
        onBack: () => u("index"),
        onLogin: N,
        wallet: l
      }
    ),
    a === "ton-wallet" && /* @__PURE__ */ pe.jsx(
      cse,
      {
        onBack: () => u("index"),
        onLogin: N
      }
    ),
    a === "email" && /* @__PURE__ */ pe.jsx(Wne, { email: p, onBack: () => u("index"), onLogin: N }),
    a === "index" && /* @__PURE__ */ pe.jsx(
      M9,
      {
        header: r,
        onEmailConfirm: M,
        onSelectWallet: A,
        onSelectMoreWallets: () => {
          u("all-wallet");
        },
        onSelectTonConnect: L,
        config: {
          showEmailSignIn: n,
          showFeaturedWallets: o,
          showMoreWallets: i,
          showTonConnect: s
        }
      }
    ),
    a === "all-wallet" && /* @__PURE__ */ pe.jsx(
      rA,
      {
        onBack: () => u("index"),
        onSelectWallet: A
      }
    )
  ] }) });
}
function fse(t) {
  const { wallet: e, onConnect: r } = t, [n, i] = Qt(e.installed ? "connect" : "qr");
  async function s(o, a) {
    await r(o, a);
  }
  return /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-6", children: /* @__PURE__ */ pe.jsx(Pc, { title: "Connect wallet", onBack: t.onBack }) }),
    n === "qr" && /* @__PURE__ */ pe.jsx(
      q9,
      {
        wallet: e,
        onGetExtension: () => i("get-extension"),
        onSignFinish: s
      }
    ),
    n === "connect" && /* @__PURE__ */ pe.jsx(
      z9,
      {
        onShowQrCode: () => i("qr"),
        wallet: e,
        onSignFinish: s
      }
    ),
    n === "get-extension" && /* @__PURE__ */ pe.jsx(W9, { wallet: e })
  ] });
}
function lse(t) {
  const { email: e } = t, [r, n] = Qt("captcha");
  return /* @__PURE__ */ pe.jsxs(Ms, { children: [
    /* @__PURE__ */ pe.jsx("div", { className: "xc-mb-12", children: /* @__PURE__ */ pe.jsx(Pc, { title: "Sign in with email", onBack: t.onBack }) }),
    r === "captcha" && /* @__PURE__ */ pe.jsx($9, { email: e, onCodeSend: () => n("verify-email") }),
    r === "verify-email" && /* @__PURE__ */ pe.jsx(k9, { email: e, onInputCode: t.onInputCode, onResendCode: () => n("captcha") })
  ] });
}
function xoe(t) {
  const { onEvmWalletConnect: e, onTonWalletConnect: r, onEmailConnect: n, config: i = {
    showEmailSignIn: !1,
    showFeaturedWallets: !0,
    showMoreWallets: !0,
    showTonConnect: !0
  } } = t, [s, o] = Qt(""), [a, u] = Qt(), [l, d] = Qt(), p = Zn(), [w, A] = Qt("");
  function M(H) {
    u(H), o("evm-wallet-connect");
  }
  function N(H) {
    A(H), o("email-connect");
  }
  async function L(H, W) {
    await e({
      chain_type: "eip155",
      client: H.client,
      connect_info: W
    }), o("index");
  }
  function B(H) {
    d(H), o("ton-wallet-connect");
  }
  async function $(H) {
    H && await r({
      chain_type: "ton",
      client: p.current,
      connect_info: H
    });
  }
  return Dn(() => {
    p.current = new fh({
      manifestUrl: "https://static.codatta.io/static/tonconnect-manifest.json?v=2"
    });
    const H = p.current.onStatusChange($);
    return o("index"), H;
  }, []), /* @__PURE__ */ pe.jsxs(tA, { className: "xc-rounded-2xl xc-transition-height xc-box-content xc-w-full xc-min-w-[277px] xc-max-w-[420px] xc-p-6 xc-bg-[rgb(28,28,38)] xc-text-white", children: [
    s === "evm-wallet-select" && /* @__PURE__ */ pe.jsx(
      rA,
      {
        onBack: () => o("index"),
        onSelectWallet: M
      }
    ),
    s === "evm-wallet-connect" && /* @__PURE__ */ pe.jsx(
      fse,
      {
        onBack: () => o("index"),
        onConnect: L,
        wallet: a
      }
    ),
    s === "ton-wallet-select" && /* @__PURE__ */ pe.jsx(
      H9,
      {
        connector: p.current,
        onSelect: B,
        onBack: () => o("index")
      }
    ),
    s === "ton-wallet-connect" && /* @__PURE__ */ pe.jsx(
      eA,
      {
        connector: p.current,
        wallet: l,
        onBack: () => o("index")
      }
    ),
    s === "email-connect" && /* @__PURE__ */ pe.jsx(lse, { email: w, onBack: () => o("index"), onInputCode: n }),
    s === "index" && /* @__PURE__ */ pe.jsx(
      M9,
      {
        onEmailConfirm: N,
        onSelectWallet: M,
        onSelectMoreWallets: () => o("evm-wallet-select"),
        onSelectTonConnect: () => o("ton-wallet-select"),
        config: i
      }
    )
  ] });
}
export {
  boe as C,
  I5 as H,
  aZ as a,
  Ll as b,
  mse as c,
  woe as d,
  Hd as e,
  xoe as f,
  gse as h,
  vse as r,
  r4 as s,
  C0 as t,
  mp as u
};
