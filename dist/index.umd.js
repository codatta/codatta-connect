(function(Mn,Se){typeof exports=="object"&&typeof module<"u"?Se(exports,require("react"),require("https://o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js")):typeof define=="function"&&define.amd?define(["exports","react","https://o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js"],Se):(Mn=typeof globalThis<"u"?globalThis:Mn||self,Se(Mn["xny-connect"]={},Mn.React))})(this,function(Mn,Se){"use strict";var loe=Object.defineProperty;var hoe=(Mn,Se,kc)=>Se in Mn?loe(Mn,Se,{enumerable:!0,configurable:!0,writable:!0,value:kc}):Mn[Se]=kc;var oo=(Mn,Se,kc)=>hoe(Mn,typeof Se!="symbol"?Se+"":Se,kc);function kc(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Yt=kc(Se);var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Xp={exports:{}},mf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function XA(){if(Ky)return mf;Ky=1;var t=Se,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var d,p={},y=null,A=null;l!==void 0&&(y=""+l),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(A=u.ref);for(d in u)n.call(u,d)&&!s.hasOwnProperty(d)&&(p[d]=u[d]);if(a&&a.defaultProps)for(d in u=a.defaultProps,u)p[d]===void 0&&(p[d]=u[d]);return{$$typeof:e,type:a,key:y,ref:A,props:p,_owner:i.current}}return mf.Fragment=r,mf.jsx=o,mf.jsxs=o,mf}var vf={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function ZA(){return Vy||(Vy=1,process.env.NODE_ENV!=="production"&&function(){var t=Se,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),P=Symbol.iterator,O="@@iterator";function D(U){if(U===null||typeof U!="object")return null;var oe=P&&U[P]||U[O];return typeof oe=="function"?oe:null}var k=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function B(U){{for(var oe=arguments.length,ge=new Array(oe>1?oe-1:0),xe=1;xe<oe;xe++)ge[xe-1]=arguments[xe];q("error",U,ge)}}function q(U,oe,ge){{var xe=k.ReactDebugCurrentFrame,Re=xe.getStackAddendum();Re!==""&&(oe+="%s",ge=ge.concat([Re]));var De=ge.map(function(it){return String(it)});De.unshift("Warning: "+oe),Function.prototype.apply.call(console[U],console,De)}}var j=!1,H=!1,J=!1,T=!1,z=!1,ue;ue=Symbol.for("react.module.reference");function _e(U){return!!(typeof U=="string"||typeof U=="function"||U===n||U===s||z||U===i||U===l||U===d||T||U===A||j||H||J||typeof U=="object"&&U!==null&&(U.$$typeof===y||U.$$typeof===p||U.$$typeof===o||U.$$typeof===a||U.$$typeof===u||U.$$typeof===ue||U.getModuleId!==void 0))}function G(U,oe,ge){var xe=U.displayName;if(xe)return xe;var Re=oe.displayName||oe.name||"";return Re!==""?ge+"("+Re+")":ge}function E(U){return U.displayName||"Context"}function m(U){if(U==null)return null;if(typeof U.tag=="number"&&B("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof U=="function")return U.displayName||U.name||null;if(typeof U=="string")return U;switch(U){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case l:return"Suspense";case d:return"SuspenseList"}if(typeof U=="object")switch(U.$$typeof){case a:var oe=U;return E(oe)+".Consumer";case o:var ge=U;return E(ge._context)+".Provider";case u:return G(U,U.render,"ForwardRef");case p:var xe=U.displayName||null;return xe!==null?xe:m(U.type)||"Memo";case y:{var Re=U,De=Re._payload,it=Re._init;try{return m(it(De))}catch{return null}}}return null}var f=Object.assign,g=0,v,x,_,S,b,M,I;function F(){}F.__reactDisabledLog=!0;function ce(){{if(g===0){v=console.log,x=console.info,_=console.warn,S=console.error,b=console.group,M=console.groupCollapsed,I=console.groupEnd;var U={configurable:!0,enumerable:!0,value:F,writable:!0};Object.defineProperties(console,{info:U,log:U,warn:U,error:U,group:U,groupCollapsed:U,groupEnd:U})}g++}}function N(){{if(g--,g===0){var U={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:f({},U,{value:v}),info:f({},U,{value:x}),warn:f({},U,{value:_}),error:f({},U,{value:S}),group:f({},U,{value:b}),groupCollapsed:f({},U,{value:M}),groupEnd:f({},U,{value:I})})}g<0&&B("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var se=k.ReactCurrentDispatcher,ee;function X(U,oe,ge){{if(ee===void 0)try{throw Error()}catch(Re){var xe=Re.stack.trim().match(/\n( *(at )?)/);ee=xe&&xe[1]||""}return`
`+ee+U}}var Q=!1,R;{var Z=typeof WeakMap=="function"?WeakMap:Map;R=new Z}function te(U,oe){if(!U||Q)return"";{var ge=R.get(U);if(ge!==void 0)return ge}var xe;Q=!0;var Re=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var De;De=se.current,se.current=null,ce();try{if(oe){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Et){xe=Et}Reflect.construct(U,[],it)}else{try{it.call()}catch(Et){xe=Et}U.call(it.prototype)}}else{try{throw Error()}catch(Et){xe=Et}U()}}catch(Et){if(Et&&xe&&typeof Et.stack=="string"){for(var Ue=Et.stack.split(`
`),gt=xe.stack.split(`
`),st=Ue.length-1,tt=gt.length-1;st>=1&&tt>=0&&Ue[st]!==gt[tt];)tt--;for(;st>=1&&tt>=0;st--,tt--)if(Ue[st]!==gt[tt]){if(st!==1||tt!==1)do if(st--,tt--,tt<0||Ue[st]!==gt[tt]){var At=`
`+Ue[st].replace(" at new "," at ");return U.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",U.displayName)),typeof U=="function"&&R.set(U,At),At}while(st>=1&&tt>=0);break}}}finally{Q=!1,se.current=De,N(),Error.prepareStackTrace=Re}var Rt=U?U.displayName||U.name:"",Mt=Rt?X(Rt):"";return typeof U=="function"&&R.set(U,Mt),Mt}function le(U,oe,ge){return te(U,!1)}function ie(U){var oe=U.prototype;return!!(oe&&oe.isReactComponent)}function fe(U,oe,ge){if(U==null)return"";if(typeof U=="function")return te(U,ie(U));if(typeof U=="string")return X(U);switch(U){case l:return X("Suspense");case d:return X("SuspenseList")}if(typeof U=="object")switch(U.$$typeof){case u:return le(U.render);case p:return fe(U.type,oe,ge);case y:{var xe=U,Re=xe._payload,De=xe._init;try{return fe(De(Re),oe,ge)}catch{}}}return""}var ve=Object.prototype.hasOwnProperty,Me={},Ne=k.ReactDebugCurrentFrame;function Te(U){if(U){var oe=U._owner,ge=fe(U.type,U._source,oe?oe.type:null);Ne.setExtraStackFrame(ge)}else Ne.setExtraStackFrame(null)}function $e(U,oe,ge,xe,Re){{var De=Function.call.bind(ve);for(var it in U)if(De(U,it)){var Ue=void 0;try{if(typeof U[it]!="function"){var gt=Error((xe||"React class")+": "+ge+" type `"+it+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof U[it]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw gt.name="Invariant Violation",gt}Ue=U[it](oe,it,xe,ge,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(st){Ue=st}Ue&&!(Ue instanceof Error)&&(Te(Re),B("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",xe||"React class",ge,it,typeof Ue),Te(null)),Ue instanceof Error&&!(Ue.message in Me)&&(Me[Ue.message]=!0,Te(Re),B("Failed %s type: %s",ge,Ue.message),Te(null))}}}var Ie=Array.isArray;function Le(U){return Ie(U)}function Ve(U){{var oe=typeof Symbol=="function"&&Symbol.toStringTag,ge=oe&&U[Symbol.toStringTag]||U.constructor.name||"Object";return ge}}function ke(U){try{return ze(U),!1}catch{return!0}}function ze(U){return""+U}function He(U){if(ke(U))return B("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ve(U)),ze(U)}var Ee=k.ReactCurrentOwner,Qe={key:!0,ref:!0,__self:!0,__source:!0},ct,Be,et;et={};function rt(U){if(ve.call(U,"ref")){var oe=Object.getOwnPropertyDescriptor(U,"ref").get;if(oe&&oe.isReactWarning)return!1}return U.ref!==void 0}function Je(U){if(ve.call(U,"key")){var oe=Object.getOwnPropertyDescriptor(U,"key").get;if(oe&&oe.isReactWarning)return!1}return U.key!==void 0}function pt(U,oe){if(typeof U.ref=="string"&&Ee.current&&oe&&Ee.current.stateNode!==oe){var ge=m(Ee.current.type);et[ge]||(B('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',m(Ee.current.type),U.ref),et[ge]=!0)}}function ht(U,oe){{var ge=function(){ct||(ct=!0,B("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",oe))};ge.isReactWarning=!0,Object.defineProperty(U,"key",{get:ge,configurable:!0})}}function ft(U,oe){{var ge=function(){Be||(Be=!0,B("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",oe))};ge.isReactWarning=!0,Object.defineProperty(U,"ref",{get:ge,configurable:!0})}}var Ht=function(U,oe,ge,xe,Re,De,it){var Ue={$$typeof:e,type:U,key:oe,ref:ge,props:it,_owner:De};return Ue._store={},Object.defineProperty(Ue._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ue,"_self",{configurable:!1,enumerable:!1,writable:!1,value:xe}),Object.defineProperty(Ue,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Re}),Object.freeze&&(Object.freeze(Ue.props),Object.freeze(Ue)),Ue};function Jt(U,oe,ge,xe,Re){{var De,it={},Ue=null,gt=null;ge!==void 0&&(He(ge),Ue=""+ge),Je(oe)&&(He(oe.key),Ue=""+oe.key),rt(oe)&&(gt=oe.ref,pt(oe,Re));for(De in oe)ve.call(oe,De)&&!Qe.hasOwnProperty(De)&&(it[De]=oe[De]);if(U&&U.defaultProps){var st=U.defaultProps;for(De in st)it[De]===void 0&&(it[De]=st[De])}if(Ue||gt){var tt=typeof U=="function"?U.displayName||U.name||"Unknown":U;Ue&&ht(it,tt),gt&&ft(it,tt)}return Ht(U,Ue,gt,Re,xe,Ee.current,it)}}var St=k.ReactCurrentOwner,er=k.ReactDebugCurrentFrame;function Xt(U){if(U){var oe=U._owner,ge=fe(U.type,U._source,oe?oe.type:null);er.setExtraStackFrame(ge)}else er.setExtraStackFrame(null)}var Ot;Ot=!1;function Bt(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function Tt(){{if(St.current){var U=m(St.current.type);if(U)return`

Check the render method of \``+U+"`."}return""}}function vt(U){return""}var Dt={};function Lt(U){{var oe=Tt();if(!oe){var ge=typeof U=="string"?U:U.displayName||U.name;ge&&(oe=`

Check the top-level render call using <`+ge+">.")}return oe}}function bt(U,oe){{if(!U._store||U._store.validated||U.key!=null)return;U._store.validated=!0;var ge=Lt(oe);if(Dt[ge])return;Dt[ge]=!0;var xe="";U&&U._owner&&U._owner!==St.current&&(xe=" It was passed a child from "+m(U._owner.type)+"."),Xt(U),B('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ge,xe),Xt(null)}}function $t(U,oe){{if(typeof U!="object")return;if(Le(U))for(var ge=0;ge<U.length;ge++){var xe=U[ge];Bt(xe)&&bt(xe,oe)}else if(Bt(U))U._store&&(U._store.validated=!0);else if(U){var Re=D(U);if(typeof Re=="function"&&Re!==U.entries)for(var De=Re.call(U),it;!(it=De.next()).done;)Bt(it.value)&&bt(it.value,oe)}}}function jt(U){{var oe=U.type;if(oe==null||typeof oe=="string")return;var ge;if(typeof oe=="function")ge=oe.propTypes;else if(typeof oe=="object"&&(oe.$$typeof===u||oe.$$typeof===p))ge=oe.propTypes;else return;if(ge){var xe=m(oe);$e(ge,U.props,"prop",xe,U)}else if(oe.PropTypes!==void 0&&!Ot){Ot=!0;var Re=m(oe);B("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Re||"Unknown")}typeof oe.getDefaultProps=="function"&&!oe.getDefaultProps.isReactClassApproved&&B("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function nt(U){{for(var oe=Object.keys(U.props),ge=0;ge<oe.length;ge++){var xe=oe[ge];if(xe!=="children"&&xe!=="key"){Xt(U),B("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",xe),Xt(null);break}}U.ref!==null&&(Xt(U),B("Invalid attribute `ref` supplied to `React.Fragment`."),Xt(null))}}var Ft={};function $(U,oe,ge,xe,Re,De){{var it=_e(U);if(!it){var Ue="";(U===void 0||typeof U=="object"&&U!==null&&Object.keys(U).length===0)&&(Ue+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var gt=vt();gt?Ue+=gt:Ue+=Tt();var st;U===null?st="null":Le(U)?st="array":U!==void 0&&U.$$typeof===e?(st="<"+(m(U.type)||"Unknown")+" />",Ue=" Did you accidentally export a JSX literal instead of a component?"):st=typeof U,B("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",st,Ue)}var tt=Jt(U,oe,ge,Re,De);if(tt==null)return tt;if(it){var At=oe.children;if(At!==void 0)if(xe)if(Le(At)){for(var Rt=0;Rt<At.length;Rt++)$t(At[Rt],U);Object.freeze&&Object.freeze(At)}else B("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else $t(At,U)}if(ve.call(oe,"key")){var Mt=m(U),Et=Object.keys(oe).filter(function(ot){return ot!=="key"}),dt=Et.length>0?"{key: someKey, "+Et.join(": ..., ")+": ...}":"{key: someKey}";if(!Ft[Mt+dt]){var _t=Et.length>0?"{"+Et.join(": ..., ")+": ...}":"{}";B(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,dt,Mt,_t,Mt),Ft[Mt+dt]=!0}}return U===n?nt(tt):jt(tt),tt}}function W(U,oe,ge){return $(U,oe,ge,!0)}function V(U,oe,ge){return $(U,oe,ge,!1)}var C=V,Y=W;vf.Fragment=n,vf.jsx=C,vf.jsxs=Y}()),vf}process.env.NODE_ENV==="production"?Xp.exports=XA():Xp.exports=ZA();var de=Xp.exports;const Rs="https://static.codatta.io/codatta-connect/wallet-icons.svg?v=2",QA=[{featured:!0,name:"MetaMask",rdns:"io.metamask",image:`${Rs}#metamask`,getWallet:{chrome_store_id:"nkbihfbeogaeaoehlefnkodbefgpgknn",brave_store_id:"nkbihfbeogaeaoehlefnkodbefgpgknn",edge_addon_id:"ejbalbakoplchlghecdalmeeeajnimhm",firefox_addon_id:"ether-metamask",play_store_id:"io.metamask",app_store_id:"id1438144202"},deep_link:"metamask://wc",universal_link:"https://metamask.app.link/wc"},{featured:!0,name:"OKX Wallet",rdns:"com.okex.wallet",image:`${Rs}#okx`,getWallet:{chrome_store_id:"mcohilncbfahbmgdjkbpemcciiolgcge",brave_store_id:"mcohilncbfahbmgdjkbpemcciiolgcge",edge_addon_id:"pbpjkcldjiffchgbbndmhojiacbgflha",play_store_id:"com.okinc.okex.gp",app_store_id:"id1327268470"},deep_link:"okex://main/wc",universal_link:"okex://main/wc"},{featured:!0,name:"WalletConnect",image:`${Rs}#walletconnect`},{featured:!1,name:"Coinbase Wallet",image:`${Rs}#coinbase`},{featured:!1,name:"GateWallet",rdns:"io.gate.wallet",image:`${Rs}#6e528abf-7a7d-47bd-d84d-481f169b1200`,getWallet:{chrome_store_id:"cpmkedoipcpimgecpmgpldfpohjplkpp",brave_store_id:"cpmkedoipcpimgecpmgpldfpohjplkpp",play_store_id:"com.gateio.gateio",app_store_id:"id1294998195",mac_app_store_id:"id1609559473"},deep_link:"https://www.gate.io/mobileapp",universal_link:"https://www.gate.io/mobileapp"},{featured:!1,name:"Onekey",rdns:"so.onekey.app.wallet",image:`${Rs}#onekey`,getWallet:{chrome_store_id:"jnmbobjmhlngoefaiojfljckilhhlhcj",brave_store_id:"jnmbobjmhlngoefaiojfljckilhhlhcj",play_store_id:"so.onekey.app.wallet",app_store_id:"id1609559473"},deep_link:"onekey-wallet://",universal_link:"onekey://wc"},{featured:!1,name:"Infinity Wallet",image:`${Rs}#9f259366-0bcd-4817-0af9-f78773e41900`,desktop_link:"infinity://wc"},{name:"Rabby Wallet",rdns:"io.rabby",featured:!1,image:`${Rs}#rabby`,getWallet:{chrome_store_id:"acmacodkjbdgmoleebolmdjonilkdbch",brave_store_id:"acmacodkjbdgmoleebolmdjonilkdbch",play_store_id:"com.debank.rabbymobile",app_store_id:"id6474381673"}},{name:"Binance Web3 Wallet",featured:!1,image:`${Rs}#ebac7b39-688c-41e3-7912-a4fefba74600`,getWallet:{play_store_id:"com.binance.dev",app_store_id:"id1436799971"}},{name:"Rainbow Wallet",rdns:"me.rainbow",featured:!1,image:`${Rs}#rainbow`,getWallet:{chrome_store_id:"opfgelmcmbiajamepnmloijbpoleiama",edge_addon_id:"cpojfbodiccabbabgimdeohkkpjfpbnf",firefox_addon_id:"rainbow-extension",app_store_id:"id1457119021",play_store_id:"me.rainbow"}}];function eP(t,e){const r=t.exec(e);return r==null?void 0:r.groups}const Gy=/^tuple(?<array>(\[(\d*)\])*)$/;function Zp(t){let e=t.type;if(Gy.test(t.type)&&"components"in t){e="(";const r=t.components.length;for(let i=0;i<r;i++){const s=t.components[i];e+=Zp(s),i<r-1&&(e+=", ")}const n=eP(Gy,t.type);return e+=`)${(n==null?void 0:n.array)??""}`,Zp({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function bf(t){let e="";const r=t.length;for(let n=0;n<r;n++){const i=t[n];e+=Zp(i),n!==r-1&&(e+=", ")}return e}function tP(t){return t.type==="function"?`function ${t.name}(${bf(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs.length?` returns (${bf(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${bf(t.inputs)})`:t.type==="error"?`error ${t.name}(${bf(t.inputs)})`:t.type==="constructor"?`constructor(${bf(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?"fallback()":"receive() external payable"}function fi(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const i=t[r];return typeof i=="function"?i:s=>e(t,s)}function Bc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new dP(t.type);return`${t.name}(${Qp(t.inputs,{includeName:e})})`}function Qp(t,{includeName:e=!1}={}){return t?t.map(r=>rP(r,{includeName:e})).join(e?", ":","):""}function rP(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Qp(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Jo(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function _n(t){return Jo(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Yy="2.21.45";let yf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${Yy}`};class yt extends Error{constructor(e,r={}){var a;const n=(()=>{var u;return r.cause instanceof yt?r.cause.details:(u=r.cause)!=null&&u.message?r.cause.message:r.details})(),i=r.cause instanceof yt&&r.cause.docsPath||r.docsPath,s=(a=yf.getDocsUrl)==null?void 0:a.call(yf,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...yf.version?[`Version: ${yf.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=Yy}walk(e){return Jy(this,e)}}function Jy(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Jy(t.cause,e):e?null:t}class nP extends yt{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class Xy extends yt{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class iP extends yt{constructor({data:e,params:r,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Qp(r,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=r,this.size=n}}class eg extends yt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class sP extends yt{constructor({expectedLength:e,givenLength:r,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${r}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class oP extends yt{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${_n(r)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class aP extends yt{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${r}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Zy extends yt{constructor(e,{docsPath:r}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Qy extends yt{constructor(e,{docsPath:r}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionNotFoundError"})}}class cP extends yt{constructor(e,r){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Bc(e.abiItem)}\`, and`,`\`${r.type}\` in \`${Bc(r.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class uP extends yt{constructor({expectedSize:e,givenSize:r}){super(`Expected bytes${e}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}}class fP extends yt{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiEncodingType"})}}class lP extends yt{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiDecodingType"})}}class hP extends yt{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class dP extends yt{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class ew extends yt{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class tw extends yt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}class rw extends yt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function $c(t,{dir:e,size:r=32}={}){return typeof t=="string"?Xo(t,{dir:e,size:r}):pP(t,{dir:e,size:r})}function Xo(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new tw({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function pP(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new tw({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class gP extends yt{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class mP extends yt{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class vP extends yt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function tg(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let i=0;i<r.length-1&&r[e==="left"?i:r.length-i-1].toString()==="0";i++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function Ds(t,{size:e}){if(_n(t)>e)throw new vP({givenSize:_n(t),maxSize:e})}function wf(t,e={}){const{signed:r}=e;e.size&&Ds(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Fc(t,e={}){return Number(wf(t,e))}const bP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Dh(t,e={}){return typeof t=="number"||typeof t=="bigint"?Pr(t,e):typeof t=="string"?Oh(t,e):typeof t=="boolean"?nw(t,e):li(t,e)}function nw(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Ds(r,{size:e.size}),$c(r,{size:e.size})):r}function li(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=bP[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Ds(n,{size:e.size}),$c(n,{dir:"right",size:e.size})):n}function Pr(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const u=typeof t=="bigint"?"n":"";throw new gP({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?$c(a,{size:n}):a}const yP=new TextEncoder;function Oh(t,e={}){const r=yP.encode(t);return li(r,e)}const wP=new TextEncoder;function rg(t,e={}){return typeof t=="number"||typeof t=="bigint"?_P(t,e):typeof t=="boolean"?xP(t,e):Jo(t)?co(t,e):sw(t,e)}function xP(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Ds(r,{size:e.size}),$c(r,{size:e.size})):r}const ao={zero:48,nine:57,A:65,F:70,a:97,f:102};function iw(t){if(t>=ao.zero&&t<=ao.nine)return t-ao.zero;if(t>=ao.A&&t<=ao.F)return t-(ao.A-10);if(t>=ao.a&&t<=ao.f)return t-(ao.a-10)}function co(t,e={}){let r=t;e.size&&(Ds(r,{size:e.size}),r=$c(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const u=iw(n.charCodeAt(a++)),l=iw(n.charCodeAt(a++));if(u===void 0||l===void 0)throw new yt(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=u*16+l}return s}function _P(t,e){const r=Pr(t,e);return co(r)}function sw(t,e={}){const r=wP.encode(t);return typeof e.size=="number"?(Ds(r,{size:e.size}),$c(r,{dir:"right",size:e.size})):r}function Nh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function EP(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function jc(t,...e){if(!EP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function SP(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Nh(t.outputLen),Nh(t.blockLen)}function Uc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ow(t,e){jc(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Lh=BigInt(2**32-1),aw=BigInt(32);function AP(t,e=!1){return e?{h:Number(t&Lh),l:Number(t>>aw&Lh)}:{h:Number(t>>aw&Lh)|0,l:Number(t&Lh)|0}}function PP(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=AP(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const MP=(t,e,r)=>t<<r|e>>>32-r,IP=(t,e,r)=>e<<r|t>>>32-r,CP=(t,e,r)=>e<<r-32|t>>>64-r,TP=(t,e,r)=>t<<r-32|e>>>64-r,qc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RP=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ng=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Os=(t,e)=>t<<32-e|t>>>e,cw=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,DP=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function uw(t){for(let e=0;e<t.length;e++)t[e]=DP(t[e])}const OP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function NP(t){jc(t);let e="";for(let r=0;r<t.length;r++)e+=OP[t[r]];return e}function LP(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function xf(t){return typeof t=="string"&&(t=LP(t)),jc(t),t}function kP(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];jc(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class ig{clone(){return this._cloneInto()}}function fw(t){const e=n=>t().update(xf(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function BP(t){const e=(n,i)=>t(i).update(xf(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function $P(t=32){if(qc&&typeof qc.getRandomValues=="function")return qc.getRandomValues(new Uint8Array(t));if(qc&&typeof qc.randomBytes=="function")return qc.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const lw=[],hw=[],dw=[],FP=BigInt(0),_f=BigInt(1),jP=BigInt(2),UP=BigInt(7),qP=BigInt(256),zP=BigInt(113);for(let t=0,e=_f,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],lw.push(2*(5*n+r)),hw.push((t+1)*(t+2)/2%64);let i=FP;for(let s=0;s<7;s++)e=(e<<_f^(e>>UP)*zP)%qP,e&jP&&(i^=_f<<(_f<<BigInt(s))-_f);dw.push(i)}const[HP,WP]=PP(dw,!0),pw=(t,e,r)=>r>32?CP(t,e,r):MP(t,e,r),gw=(t,e,r)=>r>32?TP(t,e,r):IP(t,e,r);function mw(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,l=r[u],d=r[u+1],p=pw(l,d,1)^r[a],y=gw(l,d,1)^r[a+1];for(let A=0;A<50;A+=10)t[o+A]^=p,t[o+A+1]^=y}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=hw[o],u=pw(i,s,a),l=gw(i,s,a),d=lw[o];i=t[d],s=t[d+1],t[d]=u,t[d+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=HP[n],t[1]^=WP[n]}r.fill(0)}class Ef extends ig{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Nh(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=RP(this.state)}keccak(){cw||uw(this.state32),mw(this.state32,this.rounds),cw||uw(this.state32),this.posOut=0,this.pos=0}update(e){Uc(this);const{blockLen:r,state:n}=this;e=xf(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Uc(this,!1),jc(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Nh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ow(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Ef(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Zo=(t,e,r)=>fw(()=>new Ef(e,t,r)),KP=Zo(6,144,224/8),VP=Zo(6,136,256/8),GP=Zo(6,104,384/8),YP=Zo(6,72,512/8),JP=Zo(1,144,224/8),vw=Zo(1,136,256/8),XP=Zo(1,104,384/8),ZP=Zo(1,72,512/8),bw=(t,e,r)=>BP((n={})=>new Ef(e,t,n.dkLen===void 0?r:n.dkLen,!0)),QP=bw(31,168,128/8),eM=bw(31,136,256/8),tM=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Ef,keccakP:mw,keccak_224:JP,keccak_256:vw,keccak_384:XP,keccak_512:ZP,sha3_224:KP,sha3_256:VP,sha3_384:GP,sha3_512:YP,shake128:QP,shake256:eM},Symbol.toStringTag,{value:"Module"}));function Sf(t,e){const r=e||"hex",n=vw(Jo(t,{strict:!1})?rg(t):t);return r==="bytes"?n:Dh(n)}const rM=t=>Sf(rg(t));function nM(t){return rM(t)}function iM(t){let e=!0,r="",n=0,i="",s=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&n++,a===")"&&n--,!!e){if(n===0){if(a===" "&&["event","function",""].includes(i))i="";else if(i+=a,a===")"){s=!0;break}continue}if(a===" "){t[o-1]!==","&&r!==","&&r!==",("&&(r="",e=!1);continue}i+=a,r+=a}}if(!s)throw new yt("Unable to normalize signature.");return i}const sM=t=>{const e=typeof t=="string"?t:tP(t);return iM(e)};function yw(t){return nM(sM(t))}const oM=yw;class zc extends yt{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class kh extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const sg=new kh(8192);function Af(t,e){if(sg.has(`${t}.${e}`))return sg.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=Sf(sw(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return sg.set(`${t}.${e}`,s),s}function og(t,e){if(!uo(t,{strict:!1}))throw new zc({address:t});return Af(t,e)}const aM=/^0x[a-fA-F0-9]{40}$/,ag=new kh(8192);function uo(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(ag.has(n))return ag.get(n);const i=aM.test(t)?t.toLowerCase()===t?!0:r?Af(t)===t:!0:!1;return ag.set(n,i),i}function Hc(t){return typeof t[0]=="string"?Bh(t):cM(t)}function cM(t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Bh(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function $h(t,e,r,{strict:n}={}){return Jo(t,{strict:!1})?uM(t,e,r,{strict:n}):_w(t,e,r,{strict:n})}function ww(t,e){if(typeof e=="number"&&e>0&&e>_n(t)-1)throw new ew({offset:e,position:"start",size:_n(t)})}function xw(t,e,r){if(typeof e=="number"&&typeof r=="number"&&_n(t)!==r-e)throw new ew({offset:r,position:"end",size:_n(t)})}function _w(t,e,r,{strict:n}={}){ww(t,e);const i=t.slice(e,r);return n&&xw(i,e,r),i}function uM(t,e,r,{strict:n}={}){ww(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&xw(i,e,r),i}function Ew(t,e){if(t.length!==e.length)throw new aP({expectedLength:t.length,givenLength:e.length});const r=fM({params:t,values:e}),n=ug(r);return n.length===0?"0x":n}function fM({params:t,values:e}){const r=[];for(let n=0;n<t.length;n++)r.push(cg({param:t[n],value:e[n]}));return r}function cg({param:t,value:e}){const r=fg(t.type);if(r){const[n,i]=r;return hM(e,{length:n,param:{...t,type:i}})}if(t.type==="tuple")return vM(e,{param:t});if(t.type==="address")return lM(e);if(t.type==="bool")return pM(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const n=t.type.startsWith("int");return gM(e,{signed:n})}if(t.type.startsWith("bytes"))return dM(e,{param:t});if(t.type==="string")return mM(e);throw new fP(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function ug(t){let e=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?e+=32:e+=_n(a)}const r=[],n=[];let i=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?(r.push(Pr(e+i,{size:32})),n.push(a),i+=_n(a)):r.push(a)}return Hc([...r,...n])}function lM(t){if(!uo(t))throw new zc({address:t});return{dynamic:!1,encoded:Xo(t.toLowerCase())}}function hM(t,{length:e,param:r}){const n=e===null;if(!Array.isArray(t))throw new hP(t);if(!n&&t.length!==e)throw new sP({expectedLength:e,givenLength:t.length,type:`${r.type}[${e}]`});let i=!1;const s=[];for(let o=0;o<t.length;o++){const a=cg({param:r,value:t[o]});a.dynamic&&(i=!0),s.push(a)}if(n||i){const o=ug(s);if(n){const a=Pr(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?Hc([a,o]):a}}if(i)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Hc(s.map(({encoded:o})=>o))}}function dM(t,{param:e}){const[,r]=e.type.split("bytes"),n=_n(t);if(!r){let i=t;return n%32!==0&&(i=Xo(i,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Hc([Xo(Pr(n,{size:32})),i])}}if(n!==Number.parseInt(r))throw new oP({expectedSize:Number.parseInt(r),value:t});return{dynamic:!1,encoded:Xo(t,{dir:"right"})}}function pM(t){if(typeof t!="boolean")throw new yt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Xo(nw(t))}}function gM(t,{signed:e}){return{dynamic:!1,encoded:Pr(t,{size:32,signed:e})}}function mM(t){const e=Oh(t),r=Math.ceil(_n(e)/32),n=[];for(let i=0;i<r;i++)n.push(Xo($h(e,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Hc([Xo(Pr(_n(e),{size:32})),...n])}}function vM(t,{param:e}){let r=!1;const n=[];for(let i=0;i<e.components.length;i++){const s=e.components[i],o=Array.isArray(t)?i:s.name,a=cg({param:s,value:t[o]});n.push(a),a.dynamic&&(r=!0)}return{dynamic:r,encoded:r?ug(n):Hc(n.map(({encoded:i})=>i))}}function fg(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const lg=t=>$h(yw(t),0,4);function Sw(t){const{abi:e,args:r=[],name:n}=t,i=Jo(n,{strict:!1}),s=e.filter(a=>i?a.type==="function"?lg(a)===n:a.type==="event"?oM(a)===n:!1:"name"in a&&a.name===n);if(s.length===0)return;if(s.length===1)return s[0];let o;for(const a of s){if(!("inputs"in a))continue;if(!r||r.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==r.length)continue;if(r.every((l,d)=>{const p="inputs"in a&&a.inputs[d];return p?hg(l,p):!1})){if(o&&"inputs"in o&&o.inputs){const l=Aw(a.inputs,o.inputs,r);if(l)throw new cP({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||s[0]}function hg(t,e){const r=typeof t,n=e.type;switch(n){case"address":return uo(t,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>hg(Object.values(t)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(t)&&t.every(i=>hg(i,{...e,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Aw(t,e,r){for(const n in t){const i=t[n],s=e[n];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return Aw(i.components,s.components,r[n]);const o=[i.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?uo(r[n],{strict:!1}):o.includes("address")&&o.includes("bytes")?uo(r[n],{strict:!1}):!1)return o}}function fo(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const Pw="/docs/contract/encodeFunctionData";function bM(t){const{abi:e,args:r,functionName:n}=t;let i=e[0];if(n){const s=Sw({abi:e,args:r,name:n});if(!s)throw new Qy(n,{docsPath:Pw});i=s}if(i.type!=="function")throw new Qy(void 0,{docsPath:Pw});return{abi:[i],functionName:lg(Bc(i))}}function yM(t){const{args:e}=t,{abi:r,functionName:n}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:bM(t)})(),i=r[0],s=n,o="inputs"in i&&i.inputs?Ew(i.inputs,e??[]):void 0;return Bh([s,o??"0x"])}const wM={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},xM={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},_M={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Mw extends yt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class EM extends yt{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class SM extends yt{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const AM={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new SM({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new EM({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Mw({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Mw({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function dg(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(AM);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}function PM(t,e={}){typeof e.size<"u"&&Ds(t,{size:e.size});const r=li(t,e);return wf(r,e)}function MM(t,e={}){let r=t;if(typeof e.size<"u"&&(Ds(r,{size:e.size}),r=tg(r)),r.length>1||r[0]>1)throw new mP(r);return!!r[0]}function lo(t,e={}){typeof e.size<"u"&&Ds(t,{size:e.size});const r=li(t,e);return Fc(r,e)}function IM(t,e={}){let r=t;return typeof e.size<"u"&&(Ds(r,{size:e.size}),r=tg(r,{dir:"right"})),new TextDecoder().decode(r)}function CM(t,e){const r=typeof e=="string"?co(e):e,n=dg(r);if(_n(r)===0&&t.length>0)throw new eg;if(_n(e)&&_n(e)<32)throw new iP({data:typeof e=="string"?e:li(e),params:t,size:_n(e)});let i=0;const s=[];for(let o=0;o<t.length;++o){const a=t[o];n.setPosition(i);const[u,l]=Wc(n,a,{staticPosition:0});i+=l,s.push(u)}return s}function Wc(t,e,{staticPosition:r}){const n=fg(e.type);if(n){const[i,s]=n;return RM(t,{...e,type:s},{length:i,staticPosition:r})}if(e.type==="tuple")return LM(t,e,{staticPosition:r});if(e.type==="address")return TM(t);if(e.type==="bool")return DM(t);if(e.type.startsWith("bytes"))return OM(t,e,{staticPosition:r});if(e.type.startsWith("uint")||e.type.startsWith("int"))return NM(t,e);if(e.type==="string")return kM(t,{staticPosition:r});throw new lP(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Iw=32,pg=32;function TM(t){const e=t.readBytes(32);return[Af(li(_w(e,-20))),32]}function RM(t,e,{length:r,staticPosition:n}){if(!r){const o=lo(t.readBytes(pg)),a=n+o,u=a+Iw;t.setPosition(a);const l=lo(t.readBytes(Iw)),d=Pf(e);let p=0;const y=[];for(let A=0;A<l;++A){t.setPosition(u+(d?A*32:p));const[P,O]=Wc(t,e,{staticPosition:u});p+=O,y.push(P)}return t.setPosition(n+32),[y,32]}if(Pf(e)){const o=lo(t.readBytes(pg)),a=n+o,u=[];for(let l=0;l<r;++l){t.setPosition(a+l*32);const[d]=Wc(t,e,{staticPosition:a});u.push(d)}return t.setPosition(n+32),[u,32]}let i=0;const s=[];for(let o=0;o<r;++o){const[a,u]=Wc(t,e,{staticPosition:n+i});i+=u,s.push(a)}return[s,i]}function DM(t){return[MM(t.readBytes(32),{size:32}),32]}function OM(t,e,{staticPosition:r}){const[n,i]=e.type.split("bytes");if(!i){const o=lo(t.readBytes(32));t.setPosition(r+o);const a=lo(t.readBytes(32));if(a===0)return t.setPosition(r+32),["0x",32];const u=t.readBytes(a);return t.setPosition(r+32),[li(u),32]}return[li(t.readBytes(Number.parseInt(i),32)),32]}function NM(t,e){const r=e.type.startsWith("int"),n=Number.parseInt(e.type.split("int")[1]||"256"),i=t.readBytes(32);return[n>48?PM(i,{signed:r}):lo(i,{signed:r}),32]}function LM(t,e,{staticPosition:r}){const n=e.components.length===0||e.components.some(({name:o})=>!o),i=n?[]:{};let s=0;if(Pf(e)){const o=lo(t.readBytes(pg)),a=r+o;for(let u=0;u<e.components.length;++u){const l=e.components[u];t.setPosition(a+s);const[d,p]=Wc(t,l,{staticPosition:a});s+=p,i[n?u:l==null?void 0:l.name]=d}return t.setPosition(r+32),[i,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[u,l]=Wc(t,a,{staticPosition:r});i[n?o:a==null?void 0:a.name]=u,s+=l}return[i,s]}function kM(t,{staticPosition:e}){const r=lo(t.readBytes(32)),n=e+r;t.setPosition(n);const i=lo(t.readBytes(32));if(i===0)return t.setPosition(e+32),["",32];const s=t.readBytes(i,32),o=IM(tg(s));return t.setPosition(e+32),[o,32]}function Pf(t){var n;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(n=t.components)==null?void 0:n.some(Pf);const r=fg(t.type);return!!(r&&Pf({...t,type:r[1]}))}function BM(t){const{abi:e,data:r}=t,n=$h(r,0,4);if(n==="0x")throw new eg;const s=[...e||[],xM,_M].find(o=>o.type==="error"&&n===lg(Bc(o)));if(!s)throw new Zy(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?CM(s.inputs,$h(r,4)):void 0,errorName:s.name}}const Kc=(t,e,r)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,r);function Cw({abiItem:t,args:e,includeFunctionName:r=!0,includeName:n=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${r?t.name:""}(${t.inputs.map((i,s)=>`${n&&i.name?`${i.name}: `:""}${typeof e[s]=="object"?Kc(e[s]):e[s]}`).join(", ")})`}const $M={gwei:9,wei:18},FM={ether:-9,wei:9};function Tw(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}function Rw(t,e="wei"){return Tw(t,$M[e])}function hs(t,e="wei"){return Tw(t,FM[e])}class jM extends yt{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class UM extends yt{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Fh(t){const e=Object.entries(t).map(([n,i])=>i===void 0||i===!1?null:[n,i]).filter(Boolean),r=e.reduce((n,[i])=>Math.max(n,i.length),0);return e.map(([n,i])=>`  ${`${n}:`.padEnd(r+1)}  ${i}`).join(`
`)}class qM extends yt{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class zM extends yt{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Fh(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class HM extends yt{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:u,maxPriorityFeePerGas:l,nonce:d,to:p,value:y}){var P;const A=Fh({chain:i&&`${i==null?void 0:i.name} (id: ${i==null?void 0:i.id})`,from:r==null?void 0:r.address,to:p,value:typeof y<"u"&&`${Rw(y)} ${((P=i==null?void 0:i.nativeCurrency)==null?void 0:P.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${hs(a)} gwei`,maxFeePerGas:typeof u<"u"&&`${hs(u)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${hs(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",A].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}const WM=t=>t,Dw=t=>t;class KM extends yt{constructor(e,{abi:r,args:n,contractAddress:i,docsPath:s,functionName:o,sender:a}){const u=Sw({abi:r,args:n,name:o}),l=u?Cw({abiItem:u,args:n,includeFunctionName:!1,includeName:!1}):void 0,d=u?Bc(u,{includeName:!0}):void 0,p=Fh({address:i&&WM(i),function:d,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],p&&"Contract Call:",p].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=r,this.args=n,this.cause=e,this.contractAddress=i,this.functionName=o,this.sender=a}}class VM extends yt{constructor({abi:e,data:r,functionName:n,message:i}){let s,o,a,u;if(r&&r!=="0x")try{o=BM({abi:e,data:r});const{abiItem:d,errorName:p,args:y}=o;if(p==="Error")u=y[0];else if(p==="Panic"){const[A]=y;u=wM[A]}else{const A=d?Bc(d,{includeName:!0}):void 0,P=d&&y?Cw({abiItem:d,args:y,includeFunctionName:!1,includeName:!1}):void 0;a=[A?`Error: ${A}`:"",P&&P!=="()"?`       ${[...Array((p==null?void 0:p.length)??0).keys()].map(()=>" ").join("")}${P}`:""]}}catch(d){s=d}else i&&(u=i);let l;s instanceof Zy&&(l=s.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(u&&u!=="execution reverted"||l?[`The contract function "${n}" reverted with the following ${l?"signature":"reason"}:`,u||l].join(`
`):`The contract function "${n}" reverted.`,{cause:s,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.reason=u,this.signature=l}}class GM extends yt{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class YM extends yt{constructor({data:e,message:r}){super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Ow extends yt{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${Dw(o)}`,e&&`Request body: ${Kc(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class JM extends yt{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${Dw(n)}`,`Request body: ${Kc(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code}}const XM=-1;class hi extends yt{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof JM?e.code:r??XM}}class Vc extends hi{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class Mf extends hi{constructor(e){super(e,{code:Mf.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Mf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class If extends hi{constructor(e){super(e,{code:If.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(If,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Cf extends hi{constructor(e,{method:r}={}){super(e,{code:Cf.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(Cf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Tf extends hi{constructor(e){super(e,{code:Tf.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Tf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ba extends hi{constructor(e){super(e,{code:Ba.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ba,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Rf extends hi{constructor(e){super(e,{code:Rf.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Rf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Df extends hi{constructor(e){super(e,{code:Df.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Df,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Of extends hi{constructor(e){super(e,{code:Of.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Of,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Nf extends hi{constructor(e){super(e,{code:Nf.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Nf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Lf extends hi{constructor(e,{method:r}={}){super(e,{code:Lf.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not implemented.`})}}Object.defineProperty(Lf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Gc extends hi{constructor(e){super(e,{code:Gc.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Gc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class kf extends hi{constructor(e){super(e,{code:kf.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(kf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Yc extends Vc{constructor(e){super(e,{code:Yc.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Yc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Bf extends Vc{constructor(e){super(e,{code:Bf.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Bf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class $f extends Vc{constructor(e,{method:r}={}){super(e,{code:$f.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty($f,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ff extends Vc{constructor(e){super(e,{code:Ff.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ff,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class jf extends Vc{constructor(e){super(e,{code:jf.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(jf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Uf extends Vc{constructor(e){super(e,{code:Uf.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Uf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class ZM extends hi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const QM=3;function eI(t,{abi:e,address:r,args:n,docsPath:i,functionName:s,sender:o}){const{code:a,data:u,message:l,shortMessage:d}=t instanceof YM?t:t instanceof yt?t.walk(y=>"data"in y)||t.walk():{},p=t instanceof eg?new GM({functionName:s}):[QM,Ba.code].includes(a)&&(u||l||d)?new VM({abi:e,data:typeof u=="object"?u.data:u,functionName:s,message:d??l}):t;return new KM(p,{abi:e,args:n,contractAddress:r,docsPath:i,functionName:s,sender:o})}function tI(t){const e=Sf(`0x${t.substring(4)}`).substring(26);return Af(`0x${e}`)}async function rI({hash:t,signature:e}){const r=Jo(t)?t:Dh(t),{secp256k1:n}=await Promise.resolve().then(()=>UC);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:d,v:p,yParity:y}=e,A=Number(y??p),P=Nw(A);return new n.Signature(wf(l),wf(d)).addRecoveryBit(P)}const o=Jo(e)?e:Dh(e),a=Fc(`0x${o.slice(130)}`),u=Nw(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function Nw(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function nI({hash:t,signature:e}){return tI(await rI({hash:t,signature:e}))}function iI(t,e="hex"){const r=Lw(t),n=dg(new Uint8Array(r.length));return r.encode(n),e==="hex"?li(n.bytes):n.bytes}function Lw(t){return Array.isArray(t)?sI(t.map(e=>Lw(e))):oI(t)}function sI(t){const e=t.reduce((i,s)=>i+s.length,0),r=kw(e);return{length:e<=55?1+e:1+r+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+r),r===1?i.pushUint8(e):r===2?i.pushUint16(e):r===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of t)s(i)}}}function oI(t){const e=typeof t=="string"?co(t):t,r=kw(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+r),r===1?i.pushUint8(e.length):r===2?i.pushUint16(e.length):r===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function kw(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new yt("Length is too large.")}function aI(t){const{chainId:e,contractAddress:r,nonce:n,to:i}=t,s=Sf(Bh(["0x05",iI([e?Pr(e):"0x",r,n?Pr(n):"0x"])]));return i==="bytes"?co(s):s}async function Bw(t){const{authorization:e,signature:r}=t;return nI({hash:aI(e),signature:r??e})}class cI extends yt{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:u,maxPriorityFeePerGas:l,nonce:d,to:p,value:y}){var P;const A=Fh({from:r==null?void 0:r.address,to:p,value:typeof y<"u"&&`${Rw(y)} ${((P=i==null?void 0:i.nativeCurrency)==null?void 0:P.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${hs(a)} gwei`,maxFeePerGas:typeof u<"u"&&`${hs(u)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${hs(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",A].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Jc extends yt{constructor({cause:e,message:r}={}){var i;const n=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Jc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class jh extends yt{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${hs(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(jh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class gg extends yt{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${hs(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(gg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class mg extends yt{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(mg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class vg extends yt{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(vg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class bg extends yt{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(bg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class yg extends yt{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(yg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class wg extends yt{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(wg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class xg extends yt{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(xg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class _g extends yt{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(_g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Uh extends yt{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${hs(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${hs(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Uh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Eg extends yt{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function $w(t,e){const r=(t.details||"").toLowerCase(),n=t instanceof yt?t.walk(i=>(i==null?void 0:i.code)===Jc.code):t;return n instanceof yt?new Jc({cause:t,message:n.details}):Jc.nodeMessage.test(r)?new Jc({cause:t,message:t.details}):jh.nodeMessage.test(r)?new jh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):gg.nodeMessage.test(r)?new gg({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):mg.nodeMessage.test(r)?new mg({cause:t,nonce:e==null?void 0:e.nonce}):vg.nodeMessage.test(r)?new vg({cause:t,nonce:e==null?void 0:e.nonce}):bg.nodeMessage.test(r)?new bg({cause:t,nonce:e==null?void 0:e.nonce}):yg.nodeMessage.test(r)?new yg({cause:t}):wg.nodeMessage.test(r)?new wg({cause:t,gas:e==null?void 0:e.gas}):xg.nodeMessage.test(r)?new xg({cause:t,gas:e==null?void 0:e.gas}):_g.nodeMessage.test(r)?new _g({cause:t}):Uh.nodeMessage.test(r)?new Uh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Eg({cause:t})}function uI(t,{docsPath:e,...r}){const n=(()=>{const i=$w(t,r);return i instanceof Eg?t:i})();return new cI(n,{docsPath:e,...r})}function Fw(t,{format:e}){if(!e)return{};const r={};function n(s){const o=Object.keys(s);for(const a of o)a in t&&(r[a]=t[a]),s[a]&&typeof s[a]=="object"&&!Array.isArray(s[a])&&n(s[a])}const i=e(t||{});return n(i),r}const fI={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Sg(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=lI(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>li(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Pr(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Pr(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Pr(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Pr(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Pr(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Pr(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=fI[t.type]),typeof t.value<"u"&&(e.value=Pr(t.value)),e}function lI(t){return t.map(e=>({address:e.contractAddress,r:e.r,s:e.s,chainId:Pr(e.chainId),nonce:Pr(e.nonce),...typeof e.yParity<"u"?{yParity:Pr(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Pr(e.v)}:{}}))}function jw(t){if(!(!t||t.length===0))return t.reduce((e,{slot:r,value:n})=>{if(r.length!==66)throw new rw({size:r.length,targetSize:66,type:"hex"});if(n.length!==66)throw new rw({size:n.length,targetSize:66,type:"hex"});return e[r]=n,e},{})}function hI(t){const{balance:e,nonce:r,state:n,stateDiff:i,code:s}=t,o={};if(s!==void 0&&(o.code=s),e!==void 0&&(o.balance=Pr(e)),r!==void 0&&(o.nonce=Pr(r)),n!==void 0&&(o.state=jw(n)),i!==void 0){if(o.state)throw new UM;o.stateDiff=jw(i)}return o}function dI(t){if(!t)return;const e={};for(const{address:r,...n}of t){if(!uo(r,{strict:!1}))throw new zc({address:r});if(e[r])throw new jM({address:r});e[r]=hI(n)}return e}const pI=2n**256n-1n;function qh(t){const{account:e,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:i,to:s}=t,o=e?fo(e):void 0;if(o&&!uo(o.address))throw new zc({address:o.address});if(s&&!uo(s))throw new zc({address:s});if(typeof r<"u"&&(typeof n<"u"||typeof i<"u"))throw new qM;if(n&&n>pI)throw new jh({maxFeePerGas:n});if(i&&n&&i>n)throw new Uh({maxFeePerGas:n,maxPriorityFeePerGas:i})}class gI extends yt{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Ag extends yt{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class mI extends yt{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${hs(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class vI extends yt{constructor({blockHash:e,blockNumber:r}){let n="Block";e&&(n=`Block at hash "${e}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}const bI={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function yI(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Fc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Fc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?bI[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=wI(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function wI(t){return t.map(e=>({contractAddress:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function xI(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:yI(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function zh(t,{blockHash:e,blockNumber:r,blockTag:n,includeTransactions:i}={}){var d,p,y;const s=n??"latest",o=i??!1,a=r!==void 0?Pr(r):void 0;let u=null;if(e?u=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):u=await t.request({method:"eth_getBlockByNumber",params:[a||s,o]},{dedupe:!!a}),!u)throw new vI({blockHash:e,blockNumber:r});return(((y=(p=(d=t.chain)==null?void 0:d.formatters)==null?void 0:p.block)==null?void 0:y.format)||xI)(u)}async function Uw(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function _I(t,e){var s,o;const{block:r,chain:n=t.chain,request:i}=e||{};try{const a=((s=n==null?void 0:n.fees)==null?void 0:s.maxPriorityFeePerGas)??((o=n==null?void 0:n.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=r||await fi(t,zh,"getBlock")({}),d=await a({block:l,client:t,request:i});if(d===null)throw new Error;return d}if(typeof a<"u")return a;const u=await t.request({method:"eth_maxPriorityFeePerGas"});return wf(u)}catch{const[a,u]=await Promise.all([r?Promise.resolve(r):fi(t,zh,"getBlock")({}),fi(t,Uw,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Ag;const l=u-a.baseFeePerGas;return l<0n?0n:l}}async function qw(t,e){var y,A;const{block:r,chain:n=t.chain,request:i,type:s="eip1559"}=e||{},o=await(async()=>{var P,O;return typeof((P=n==null?void 0:n.fees)==null?void 0:P.baseFeeMultiplier)=="function"?n.fees.baseFeeMultiplier({block:r,client:t,request:i}):((O=n==null?void 0:n.fees)==null?void 0:O.baseFeeMultiplier)??1.2})();if(o<1)throw new gI;const u=10**(((y=o.toString().split(".")[1])==null?void 0:y.length)??0),l=P=>P*BigInt(Math.ceil(o*u))/BigInt(u),d=r||await fi(t,zh,"getBlock")({});if(typeof((A=n==null?void 0:n.fees)==null?void 0:A.estimateFeesPerGas)=="function"){const P=await n.fees.estimateFeesPerGas({block:r,client:t,multiply:l,request:i,type:s});if(P!==null)return P}if(s==="eip1559"){if(typeof d.baseFeePerGas!="bigint")throw new Ag;const P=typeof(i==null?void 0:i.maxPriorityFeePerGas)=="bigint"?i.maxPriorityFeePerGas:await _I(t,{block:d,chain:n,request:i}),O=l(d.baseFeePerGas);return{maxFeePerGas:(i==null?void 0:i.maxFeePerGas)??O+P,maxPriorityFeePerGas:P}}return{gasPrice:(i==null?void 0:i.gasPrice)??l(await fi(t,Uw,"getGasPrice")({}))}}async function EI(t,{address:e,blockTag:r="latest",blockNumber:n}){const i=await t.request({method:"eth_getTransactionCount",params:[e,n?Pr(n):r]},{dedupe:!!n});return Fc(i)}function zw(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(s=>co(s)):t.blobs,i=[];for(const s of n)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return r==="bytes"?i:i.map(s=>li(s))}function Hw(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>co(o)):t.blobs,i=typeof t.commitments[0]=="string"?t.commitments.map(o=>co(o)):t.commitments,s=[];for(let o=0;o<n.length;o++){const a=n[o],u=i[o];s.push(Uint8Array.from(e.computeBlobKzgProof(a,u)))}return r==="bytes"?s:s.map(o=>li(o))}function SI(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,l=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+l,a,n)}const AI=(t,e,r)=>t&e^~t&r,PI=(t,e,r)=>t&e^t&r^e&r;class MI extends ig{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ng(this.buffer)}update(e){Uc(this);const{view:r,buffer:n,blockLen:i}=this;e=xf(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=ng(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Uc(this),ow(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let p=o;p<i;p++)r[p]=0;SI(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=ng(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<l;p++)a.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const II=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ea=new Uint32Array(64);let CI=class extends MI{constructor(){super(64,32,8,!1),this.A=Qo[0]|0,this.B=Qo[1]|0,this.C=Qo[2]|0,this.D=Qo[3]|0,this.E=Qo[4]|0,this.F=Qo[5]|0,this.G=Qo[6]|0,this.H=Qo[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[e,r,n,i,s,o,a,u]}set(e,r,n,i,s,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let p=0;p<16;p++,r+=4)ea[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const y=ea[p-15],A=ea[p-2],P=Os(y,7)^Os(y,18)^y>>>3,O=Os(A,17)^Os(A,19)^A>>>10;ea[p]=O+ea[p-7]+P+ea[p-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:l,H:d}=this;for(let p=0;p<64;p++){const y=Os(a,6)^Os(a,11)^Os(a,25),A=d+y+AI(a,u,l)+II[p]+ea[p]|0,O=(Os(n,2)^Os(n,13)^Os(n,22))+PI(n,i,s)|0;d=l,l=u,u=a,a=o+A|0,o=s,s=i,i=n,n=A+O|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,i,s,o,a,u,l,d)}roundClean(){ea.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Pg=fw(()=>new CI);function TI(t,e){return Pg(Jo(t,{strict:!1})?rg(t):t)}function RI(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),i=TI(e);return i.set([r],0),n==="bytes"?i:li(i)}function DI(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),i=[];for(const s of e)i.push(RI({commitment:s,to:n,version:r}));return i}const Ww=6,Kw=32,Mg=4096,Vw=Kw*Mg,Gw=Vw*Ww-1-1*Mg*Ww;class OI extends yt{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class NI extends yt{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function LI(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?co(t.data):t.data,n=_n(r);if(!n)throw new NI;if(n>Gw)throw new OI({maxSize:Gw,size:n});const i=[];let s=!0,o=0;for(;s;){const a=dg(new Uint8Array(Vw));let u=0;for(;u<Mg;){const l=r.slice(o,o+(Kw-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),s=!1;break}u++,o+=31}i.push(a)}return e==="bytes"?i.map(a=>a.bytes):i.map(a=>li(a.bytes))}function kI(t){const{data:e,kzg:r,to:n}=t,i=t.blobs??LI({data:e,to:n}),s=t.commitments??zw({blobs:i,kzg:r,to:n}),o=t.proofs??Hw({blobs:i,commitments:s,kzg:r,to:n}),a=[];for(let u=0;u<i.length;u++)a.push({blob:i[u],commitment:s[u],proof:o[u]});return a}function BI(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new zM({transaction:t})}async function Hh(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Fc(e)}const Yw=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function Ig(t,e){const{account:r=t.account,blobs:n,chain:i,gas:s,kzg:o,nonce:a,nonceManager:u,parameters:l=Yw,type:d}=e,p=r&&fo(r),y={...e,...p?{from:p==null?void 0:p.address}:{}};let A;async function P(){return A||(A=await fi(t,zh,"getBlock")({blockTag:"latest"}),A)}let O;async function D(){return O||(i?i.id:typeof e.chainId<"u"?e.chainId:(O=await fi(t,Hh,"getChainId")({}),O))}if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&n&&o){const k=zw({blobs:n,kzg:o});if(l.includes("blobVersionedHashes")){const B=DI({commitments:k,to:"hex"});y.blobVersionedHashes=B}if(l.includes("sidecars")){const B=Hw({blobs:n,commitments:k,kzg:o}),q=kI({blobs:n,commitments:k,proofs:B,to:"hex"});y.sidecars=q}}if(l.includes("chainId")&&(y.chainId=await D()),l.includes("nonce")&&typeof a>"u"&&p)if(u){const k=await D();y.nonce=await u.consume({address:p.address,chainId:k,client:t})}else y.nonce=await fi(t,EI,"getTransactionCount")({address:p.address,blockTag:"pending"});if((l.includes("fees")||l.includes("type"))&&typeof d>"u")try{y.type=BI(y)}catch{const k=await P();y.type=typeof(k==null?void 0:k.baseFeePerGas)=="bigint"?"eip1559":"legacy"}if(l.includes("fees"))if(y.type!=="legacy"&&y.type!=="eip2930"){if(typeof y.maxFeePerGas>"u"||typeof y.maxPriorityFeePerGas>"u"){const k=await P(),{maxFeePerGas:B,maxPriorityFeePerGas:q}=await qw(t,{block:k,chain:i,request:y});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<q)throw new mI({maxPriorityFeePerGas:q});y.maxPriorityFeePerGas=q,y.maxFeePerGas=B}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Ag;const k=await P(),{gasPrice:B}=await qw(t,{block:k,chain:i,request:y,type:"legacy"});y.gasPrice=B}return l.includes("gas")&&typeof s>"u"&&(y.gas=await fi(t,FI,"estimateGas")({...y,account:p&&{address:p.address,type:"json-rpc"}})),qh(y),delete y.parameters,y}async function $I(t,{address:e,blockNumber:r,blockTag:n="latest"}){const i=r?Pr(r):void 0,s=await t.request({method:"eth_getBalance",params:[e,i||n]});return BigInt(s)}async function FI(t,e){var i,s,o;const{account:r=t.account}=e,n=r?fo(r):void 0;try{let f=function(v){const{block:x,request:_,rpcStateOverride:S}=v;return t.request({method:"eth_estimateGas",params:S?[_,x??"latest",S]:x?[_,x]:[_]})};const{accessList:a,authorizationList:u,blobs:l,blobVersionedHashes:d,blockNumber:p,blockTag:y,data:A,gas:P,gasPrice:O,maxFeePerBlobGas:D,maxFeePerGas:k,maxPriorityFeePerGas:B,nonce:q,value:j,stateOverride:H,...J}=await Ig(t,{...e,parameters:(n==null?void 0:n.type)==="local"?void 0:["blobVersionedHashes"]}),z=(p?Pr(p):void 0)||y,ue=dI(H),_e=await(async()=>{if(J.to)return J.to;if(u&&u.length>0)return await Bw({authorization:u[0]}).catch(()=>{throw new yt("`to` is required. Could not infer from `authorizationList`")})})();qh(e);const G=(o=(s=(i=t.chain)==null?void 0:i.formatters)==null?void 0:s.transactionRequest)==null?void 0:o.format,m=(G||Sg)({...Fw(J,{format:G}),from:n==null?void 0:n.address,accessList:a,authorizationList:u,blobs:l,blobVersionedHashes:d,data:A,gas:P,gasPrice:O,maxFeePerBlobGas:D,maxFeePerGas:k,maxPriorityFeePerGas:B,nonce:q,to:_e,value:j});let g=BigInt(await f({block:z,request:m,rpcStateOverride:ue}));if(u){const v=await $I(t,{address:m.from}),x=await Promise.all(u.map(async _=>{const{contractAddress:S}=_,b=await f({block:z,request:{authorizationList:void 0,data:A,from:n==null?void 0:n.address,to:S,value:Pr(v)},rpcStateOverride:ue}).catch(()=>100000n);return 2n*BigInt(b)}));g+=x.reduce((_,S)=>_+S,0n)}return g}catch(a){throw uI(a,{...e,account:n,chain:t.chain})}}class jI extends yt{constructor({chain:e,currentChainId:r}){super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class UI extends yt{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}const Cg="/docs/contract/encodeDeployData";function qI(t){const{abi:e,args:r,bytecode:n}=t;if(!r||r.length===0)return n;const i=e.find(o=>"type"in o&&o.type==="constructor");if(!i)throw new nP({docsPath:Cg});if(!("inputs"in i))throw new Xy({docsPath:Cg});if(!i.inputs||i.inputs.length===0)throw new Xy({docsPath:Cg});const s=Ew(i.inputs,r);return Bh([n,s])}async function zI(t){return new Promise(e=>setTimeout(e,t))}class qf extends yt{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Tg extends yt{constructor({docsPath:e,metaMessages:r,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:r,name:"AccountTypeNotSupportedError"})}}function Jw({chain:t,currentChainId:e}){if(!t)throw new UI;if(e!==t.id)throw new jI({chain:t,currentChainId:e})}function HI(t,{docsPath:e,...r}){const n=(()=>{const i=$w(t,r);return i instanceof Eg?t:i})();return new HM(n,{docsPath:e,...r})}async function Xw(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Rg=new kh(128);async function Dg(t,e){var k,B,q,j;const{account:r=t.account,chain:n=t.chain,accessList:i,authorizationList:s,blobs:o,data:a,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:A,value:P,...O}=e;if(typeof r>"u")throw new qf({docsPath:"/docs/actions/wallet/sendTransaction"});const D=r?fo(r):null;try{qh(e);const H=await(async()=>{if(e.to)return e.to;if(s&&s.length>0)return await Bw({authorization:s[0]}).catch(()=>{throw new yt("`to` is required. Could not infer from `authorizationList`.")})})();if((D==null?void 0:D.type)==="json-rpc"||D===null){let J;n!==null&&(J=await fi(t,Hh,"getChainId")({}),Jw({currentChainId:J,chain:n}));const T=(q=(B=(k=t.chain)==null?void 0:k.formatters)==null?void 0:B.transactionRequest)==null?void 0:q.format,ue=(T||Sg)({...Fw(O,{format:T}),accessList:i,authorizationList:s,blobs:o,chainId:J,data:a,from:D==null?void 0:D.address,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:A,to:H,value:P}),_e=Rg.get(t.uid),G=_e?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:G,params:[ue]},{retryCount:0})}catch(E){if(_e===!1)throw E;const m=E;if(m.name==="InvalidInputRpcError"||m.name==="InvalidParamsRpcError"||m.name==="MethodNotFoundRpcError"||m.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[ue]},{retryCount:0}).then(f=>(Rg.set(t.uid,!0),f)).catch(f=>{const g=f;throw g.name==="MethodNotFoundRpcError"||g.name==="MethodNotSupportedRpcError"?(Rg.set(t.uid,!1),m):g});throw m}}if((D==null?void 0:D.type)==="local"){const J=await fi(t,Ig,"prepareTransactionRequest")({account:D,accessList:i,authorizationList:s,blobs:o,chain:n,data:a,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:A,nonceManager:D.nonceManager,parameters:[...Yw,"sidecars"],value:P,...O,to:H}),T=(j=n==null?void 0:n.serializers)==null?void 0:j.transaction,z=await D.signTransaction(J,{serializer:T});return await fi(t,Xw,"sendRawTransaction")({serializedTransaction:z})}throw(D==null?void 0:D.type)==="smart"?new Tg({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Tg({docsPath:"/docs/actions/wallet/sendTransaction",type:D==null?void 0:D.type})}catch(H){throw H instanceof Tg?H:HI(H,{...e,account:D,chain:e.chain||void 0})}}async function WI(t,e){const{abi:r,account:n=t.account,address:i,args:s,dataSuffix:o,functionName:a,...u}=e;if(typeof n>"u")throw new qf({docsPath:"/docs/contract/writeContract"});const l=n?fo(n):null,d=yM({abi:r,args:s,functionName:a});try{return await fi(t,Dg,"sendTransaction")({data:`${d}${o?o.replace("0x",""):""}`,to:i,account:l,...u})}catch(p){throw eI(p,{abi:r,address:i,args:s,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}async function KI(t,{chain:e}){const{id:r,name:n,nativeCurrency:i,rpcUrls:s,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Pr(r),chainName:n,nativeCurrency:i,rpcUrls:s.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}const Og=256;let Wh=Og,Kh;function Zw(t=11){if(!Kh||Wh+t>Og*2){Kh="",Wh=0;for(let e=0;e<Og;e++)Kh+=(256+Math.random()*256|0).toString(16).substring(1)}return Kh.substring(Wh,Wh+++t)}function VI(t){const{batch:e,cacheTime:r=t.pollingInterval??4e3,ccipRead:n,key:i="base",name:s="Base Client",pollingInterval:o=4e3,type:a="base"}=t,u=t.chain,l=t.account?fo(t.account):void 0,{config:d,request:p,value:y}=t.transport({chain:u,pollingInterval:o}),A={...d,...y},P={account:l,batch:e,cacheTime:r,ccipRead:n,chain:u,key:i,name:s,pollingInterval:o,request:p,transport:A,type:a,uid:Zw()};function O(D){return k=>{const B=k(D);for(const j in P)delete B[j];const q={...D,...B};return Object.assign(q,{extend:O(q)})}}return Object.assign(P,{extend:O(P)})}const Vh=new kh(8192);function GI(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(Vh.get(r))return Vh.get(r);const n=t().finally(()=>Vh.delete(r));return Vh.set(r,n),n}function YI(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const u=async({error:l})=>{const d=typeof e=="function"?e({count:a,error:l}):e;d&&await zI(d),o({count:a+1})};try{const l=await t();i(l)}catch(l){if(a<r&&await n({count:a,error:l}))return u({error:l});s(l)}};o()})}function JI(t,e={}){return async(r,n={})=>{const{dedupe:i=!1,retryDelay:s=150,retryCount:o=3,uid:a}={...e,...n},u=i?Sf(Oh(`${a}.${Kc(r)}`)):void 0;return GI(()=>YI(async()=>{try{return await t(r)}catch(l){const d=l;switch(d.code){case Mf.code:throw new Mf(d);case If.code:throw new If(d);case Cf.code:throw new Cf(d,{method:r.method});case Tf.code:throw new Tf(d);case Ba.code:throw new Ba(d);case Rf.code:throw new Rf(d);case Df.code:throw new Df(d);case Of.code:throw new Of(d);case Nf.code:throw new Nf(d);case Lf.code:throw new Lf(d,{method:r.method});case Gc.code:throw new Gc(d);case kf.code:throw new kf(d);case Yc.code:throw new Yc(d);case Bf.code:throw new Bf(d);case $f.code:throw new $f(d);case Ff.code:throw new Ff(d);case jf.code:throw new jf(d);case Uf.code:throw new Uf(d);case 5e3:throw new Yc(d);default:throw l instanceof yt?l:new ZM(d)}}},{delay:({count:l,error:d})=>{var p;if(d&&d instanceof Ow){const y=(p=d==null?void 0:d.headers)==null?void 0:p.get("Retry-After");if(y!=null&&y.match(/\d/))return Number.parseInt(y)*1e3}return~~(1<<l)*s},retryCount:o,shouldRetry:({error:l})=>XI(l)}),{enabled:i,id:u})}}function XI(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Gc.code||t.code===Ba.code:t instanceof Ow&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function ZI({key:t,name:e,request:r,retryCount:n=3,retryDelay:i=150,timeout:s,type:o},a){const u=Zw();return{config:{key:t,name:e,request:r,retryCount:n,retryDelay:i,timeout:s,type:o},request:JI(r,{retryCount:n,retryDelay:i,uid:u}),value:a}}function QI(t,e={}){const{key:r="custom",name:n="Custom Provider",retryDelay:i}=e;return({retryCount:s})=>ZI({key:r,name:n,request:t.request.bind(t),retryCount:e.retryCount??s,retryDelay:i,type:"custom"})}const eC=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,tC=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;class rC extends yt{constructor({domain:e}){super(`Invalid domain "${Kc(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class nC extends yt{constructor({primaryType:e,types:r}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class iC extends yt{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function sC(t){const{domain:e,message:r,primaryType:n,types:i}=t,s=(u,l)=>{const d={...l};for(const p of u){const{name:y,type:A}=p;A==="address"&&(d[y]=d[y].toLowerCase())}return d},o=i.EIP712Domain?e?s(i.EIP712Domain,e):{}:{},a=(()=>{if(n!=="EIP712Domain")return s(i[n],r)})();return Kc({domain:o,message:a,primaryType:n,types:i})}function oC(t){const{domain:e,message:r,primaryType:n,types:i}=t,s=(o,a)=>{for(const u of o){const{name:l,type:d}=u,p=a[l],y=d.match(tC);if(y&&(typeof p=="number"||typeof p=="bigint")){const[O,D,k]=y;Pr(p,{signed:D==="int",size:Number.parseInt(k)/8})}if(d==="address"&&typeof p=="string"&&!uo(p))throw new zc({address:p});const A=d.match(eC);if(A){const[O,D]=A;if(D&&_n(p)!==Number.parseInt(D))throw new uP({expectedSize:Number.parseInt(D),givenSize:_n(p)})}const P=i[d];P&&(cC(d),s(P,p))}};if(i.EIP712Domain&&e){if(typeof e!="object")throw new rC({domain:e});s(i.EIP712Domain,e)}if(n!=="EIP712Domain")if(i[n])s(i[n],r);else throw new nC({primaryType:n,types:i})}function aC({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},typeof(t==null?void 0:t.chainId)=="number"&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function cC(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new iC({type:t})}let Qw=class extends ig{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,SP(e);const n=xf(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Uc(this),this.iHash.update(e),this}digestInto(e){Uc(this),jc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const e2=(t,e,r)=>new Qw(t,e).update(r).digest();e2.create=(t,e)=>new Qw(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ng=BigInt(0),Gh=BigInt(1),uC=BigInt(2);function $a(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function zf(t){if(!$a(t))throw new Error("Uint8Array expected")}function Xc(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)}const fC=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zc(t){zf(t);let e="";for(let r=0;r<t.length;r++)e+=fC[t[r]];return e}function Qc(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Lg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const ho={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function t2(t){if(t>=ho._0&&t<=ho._9)return t-ho._0;if(t>=ho._A&&t<=ho._F)return t-(ho._A-10);if(t>=ho._a&&t<=ho._f)return t-(ho._a-10)}function eu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=t2(t.charCodeAt(s)),a=t2(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}function Fa(t){return Lg(Zc(t))}function kg(t){return zf(t),Lg(Zc(Uint8Array.from(t).reverse()))}function tu(t,e){return eu(t.toString(16).padStart(e*2,"0"))}function Bg(t,e){return tu(t,e).reverse()}function lC(t){return eu(Qc(t))}function ds(t,e,r){let n;if(typeof e=="string")try{n=eu(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if($a(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function Hf(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];zf(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function hC(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function dC(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}const $g=t=>typeof t=="bigint"&&Ng<=t;function Yh(t,e,r){return $g(t)&&$g(e)&&$g(r)&&e<=t&&t<r}function ja(t,e,r,n){if(!Yh(e,r,n))throw new Error(`expected valid ${t}: ${r} <= n < ${n}, got ${typeof e} ${e}`)}function r2(t){let e;for(e=0;t>Ng;t>>=Gh,e+=1);return e}function pC(t,e){return t>>BigInt(e)&Gh}function gC(t,e,r){return t|(r?Gh:Ng)<<BigInt(e)}const Fg=t=>(uC<<BigInt(t-1))-Gh,jg=t=>new Uint8Array(t),n2=t=>Uint8Array.from(t);function i2(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=jg(t),i=jg(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...p)=>r(i,n,...p),u=(p=jg())=>{i=a(n2([0]),p),n=a(),p.length!==0&&(i=a(n2([1]),p),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const y=[];for(;p<e;){n=a();const A=n.slice();y.push(A),p+=n.length}return Hf(...y)};return(p,y)=>{o(),u(p);let A;for(;!(A=y(l()));)u();return o(),A}}const mC={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||$a(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Wf(t,e,r={}){const n=(i,s,o)=>{const a=mC[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=t[i];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const vC=()=>{throw new Error("not implemented")};function Ug(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const bC=Object.freeze(Object.defineProperty({__proto__:null,aInRange:ja,abool:Xc,abytes:zf,bitGet:pC,bitLen:r2,bitMask:Fg,bitSet:gC,bytesToHex:Zc,bytesToNumberBE:Fa,bytesToNumberLE:kg,concatBytes:Hf,createHmacDrbg:i2,ensureBytes:ds,equalBytes:hC,hexToBytes:eu,hexToNumber:Lg,inRange:Yh,isBytes:$a,memoized:Ug,notImplemented:vC,numberToBytesBE:tu,numberToBytesLE:Bg,numberToHexUnpadded:Qc,numberToVarBytesBE:lC,utf8ToBytes:dC,validateObject:Wf},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const In=BigInt(0),sn=BigInt(1),Ua=BigInt(2),yC=BigInt(3),qg=BigInt(4),s2=BigInt(5),o2=BigInt(8);BigInt(9),BigInt(16);function di(t,e){const r=t%e;return r>=In?r:e+r}function wC(t,e,r){if(r<=In||e<In)throw new Error("Expected power/modulo > 0");if(r===sn)return In;let n=sn;for(;e>In;)e&sn&&(n=n*t%r),t=t*t%r,e>>=sn;return n}function Ui(t,e,r){let n=t;for(;e-- >In;)n*=n,n%=r;return n}function zg(t,e){if(t===In||e<=In)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=di(t,e),n=e,i=In,s=sn;for(;r!==In;){const a=n/r,u=n%r,l=i-s*a;n=r,r=u,i=s,s=l}if(n!==sn)throw new Error("invert: does not exist");return di(i,e)}function xC(t){const e=(t-sn)/Ua;let r,n,i;for(r=t-sn,n=0;r%Ua===In;r/=Ua,n++);for(i=Ua;i<t&&wC(i,e,t)!==t-sn;i++);if(n===1){const o=(t+sn)/qg;return function(u,l){const d=u.pow(l,o);if(!u.eql(u.sqr(d),l))throw new Error("Cannot find square root");return d}}const s=(r+sn)/Ua;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,d=a.pow(a.mul(a.ONE,i),r),p=a.pow(u,s),y=a.pow(u,r);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let A=1;for(let O=a.sqr(y);A<l&&!a.eql(O,a.ONE);A++)O=a.sqr(O);const P=a.pow(d,sn<<BigInt(l-A-1));d=a.sqr(P),p=a.mul(p,P),y=a.mul(y,d),l=A}return p}}function _C(t){if(t%qg===yC){const e=(t+sn)/qg;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%o2===s2){const e=(t-s2)/o2;return function(n,i){const s=n.mul(i,Ua),o=n.pow(s,e),a=n.mul(i,o),u=n.mul(n.mul(a,Ua),o),l=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return xC(t)}const EC=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function SC(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=EC.reduce((n,i)=>(n[i]="function",n),e);return Wf(t,r)}function AC(t,e,r){if(r<In)throw new Error("Expected power > 0");if(r===In)return t.ONE;if(r===sn)return e;let n=t.ONE,i=e;for(;r>In;)r&sn&&(n=t.mul(n,i)),i=t.sqr(i),r>>=sn;return n}function PC(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function a2(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function c2(t,e,r=!1,n={}){if(t<=In)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=a2(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=_C(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:Fg(i),ZERO:In,ONE:sn,create:u=>di(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return In<=u&&u<t},is0:u=>u===In,isOdd:u=>(u&sn)===sn,neg:u=>di(-u,t),eql:(u,l)=>u===l,sqr:u=>di(u*u,t),add:(u,l)=>di(u+l,t),sub:(u,l)=>di(u-l,t),mul:(u,l)=>di(u*l,t),pow:(u,l)=>AC(a,u,l),div:(u,l)=>di(u*zg(l,t),t),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>zg(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>PC(a,u),cmov:(u,l,d)=>d?l:u,toBytes:u=>r?Bg(u,s):tu(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return r?kg(u):Fa(u)}});return Object.freeze(a)}function u2(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function f2(t){const e=u2(t);return e+Math.ceil(e/2)}function MC(t,e,r=!1){const n=t.length,i=u2(e),s=f2(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=r?Fa(t):kg(t),a=di(o,e-sn)+sn;return r?Bg(a,i):tu(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IC=BigInt(0),Hg=BigInt(1),Wg=new WeakMap,l2=new WeakMap;function CC(t,e){const r=(s,o)=>{const a=o.negate();return s?a:o},n=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>{n(s);const o=Math.ceil(e/s)+1,a=2**(s-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(s,o){let a=t.ZERO,u=s;for(;o>IC;)o&Hg&&(a=a.add(u)),u=u.double(),o>>=Hg;return a},precomputeWindow(s,o){const{windows:a,windowSize:u}=i(o),l=[];let d=s,p=d;for(let y=0;y<a;y++){p=d,l.push(p);for(let A=1;A<u;A++)p=p.add(d),l.push(p);d=p.double()}return l},wNAF(s,o,a){const{windows:u,windowSize:l}=i(s);let d=t.ZERO,p=t.BASE;const y=BigInt(2**s-1),A=2**s,P=BigInt(s);for(let O=0;O<u;O++){const D=O*l;let k=Number(a&y);a>>=P,k>l&&(k-=A,a+=Hg);const B=D,q=D+Math.abs(k)-1,j=O%2!==0,H=k<0;k===0?p=p.add(r(j,o[B])):d=d.add(r(H,o[q]))}return{p:d,f:p}},wNAFCached(s,o,a){const u=l2.get(s)||1;let l=Wg.get(s);return l||(l=this.precomputeWindow(s,u),u!==1&&Wg.set(s,a(l))),this.wNAF(u,l,o)},setWindowSize(s,o){n(o),l2.set(s,o),Wg.delete(s)}}}function TC(t,e,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((d,p)=>{if(!e.isValid(d))throw new Error(`wrong scalar at index ${p}`)}),r.forEach((d,p)=>{if(!(d instanceof t))throw new Error(`wrong point at index ${p}`)});const i=r2(BigInt(r.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(t.ZERO),u=Math.floor((e.BITS-1)/s)*s;let l=t.ZERO;for(let d=u;d>=0;d-=s){a.fill(t.ZERO);for(let y=0;y<n.length;y++){const A=n[y],P=Number(A>>BigInt(d)&BigInt(o));a[P]=a[P].add(r[y])}let p=t.ZERO;for(let y=a.length-1,A=t.ZERO;y>0;y--)A=A.add(a[y]),p=p.add(A);if(l=l.add(p),d!==0)for(let y=0;y<s;y++)l=l.double()}return l}function h2(t){return SC(t.Fp),Wf(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...a2(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function d2(t){t.lowS!==void 0&&Xc("lowS",t.lowS),t.prehash!==void 0&&Xc("prehash",t.prehash)}function RC(t){const e=h2(t);Wf(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:DC,hexToBytes:OC}=bC,po={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:r}=po;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Qc(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Qc(i.length/2|128):"";return`${Qc(t)}${s}${i}${e}`},decode(t,e){const{Err:r}=po;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new r("tlv.decode(long): indefinite length not supported");if(u>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+u);if(l.length!==u)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const d of l)o=o<<8|d;if(n+=u,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=po;if(t<go)throw new e("integer: negative integers are not allowed");let r=Qc(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected assertion");return r},decode(t){const{Err:e}=po;if(t[0]&128)throw new e("Invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return DC(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=po,i=typeof t=="string"?OC(t):t;zf(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("Invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,s),{v:l,l:d}=n.decode(2,u);if(d.length)throw new e("Invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=po,n=`${e.encode(2,r.encode(t.r))}${e.encode(2,r.encode(t.s))}`;return e.encode(48,n)}},go=BigInt(0),Cn=BigInt(1);BigInt(2);const p2=BigInt(3);BigInt(4);function NC(t){const e=RC(t),{Fp:r}=e,n=c2(e.n,e.nBitLength),i=e.toBytes||((O,D,k)=>{const B=D.toAffine();return Hf(Uint8Array.from([4]),r.toBytes(B.x),r.toBytes(B.y))}),s=e.fromBytes||(O=>{const D=O.subarray(1),k=r.fromBytes(D.subarray(0,r.BYTES)),B=r.fromBytes(D.subarray(r.BYTES,2*r.BYTES));return{x:k,y:B}});function o(O){const{a:D,b:k}=e,B=r.sqr(O),q=r.mul(B,O);return r.add(r.add(q,r.mul(O,D)),k)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(O){return Yh(O,Cn,e.n)}function u(O){const{allowedPrivateKeyLengths:D,nByteLength:k,wrapPrivateKey:B,n:q}=e;if(D&&typeof O!="bigint"){if($a(O)&&(O=Zc(O)),typeof O!="string"||!D.includes(O.length))throw new Error("Invalid key");O=O.padStart(k*2,"0")}let j;try{j=typeof O=="bigint"?O:Fa(ds("private key",O,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof O}`)}return B&&(j=di(j,q)),ja("private key",j,Cn,q),j}function l(O){if(!(O instanceof y))throw new Error("ProjectivePoint expected")}const d=Ug((O,D)=>{const{px:k,py:B,pz:q}=O;if(r.eql(q,r.ONE))return{x:k,y:B};const j=O.is0();D==null&&(D=j?r.ONE:r.inv(q));const H=r.mul(k,D),J=r.mul(B,D),T=r.mul(q,D);if(j)return{x:r.ZERO,y:r.ZERO};if(!r.eql(T,r.ONE))throw new Error("invZ was invalid");return{x:H,y:J}}),p=Ug(O=>{if(O.is0()){if(e.allowInfinityPoint&&!r.is0(O.py))return;throw new Error("bad point: ZERO")}const{x:D,y:k}=O.toAffine();if(!r.isValid(D)||!r.isValid(k))throw new Error("bad point: x or y not FE");const B=r.sqr(k),q=o(D);if(!r.eql(B,q))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(D,k,B){if(this.px=D,this.py=k,this.pz=B,D==null||!r.isValid(D))throw new Error("x required");if(k==null||!r.isValid(k))throw new Error("y required");if(B==null||!r.isValid(B))throw new Error("z required");Object.freeze(this)}static fromAffine(D){const{x:k,y:B}=D||{};if(!D||!r.isValid(k)||!r.isValid(B))throw new Error("invalid affine point");if(D instanceof y)throw new Error("projective point not allowed");const q=j=>r.eql(j,r.ZERO);return q(k)&&q(B)?y.ZERO:new y(k,B,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(D){const k=r.invertBatch(D.map(B=>B.pz));return D.map((B,q)=>B.toAffine(k[q])).map(y.fromAffine)}static fromHex(D){const k=y.fromAffine(s(ds("pointHex",D)));return k.assertValidity(),k}static fromPrivateKey(D){return y.BASE.multiply(u(D))}static msm(D,k){return TC(y,n,D,k)}_setWindowSize(D){P.setWindowSize(this,D)}assertValidity(){p(this)}hasEvenY(){const{y:D}=this.toAffine();if(r.isOdd)return!r.isOdd(D);throw new Error("Field doesn't support isOdd")}equals(D){l(D);const{px:k,py:B,pz:q}=this,{px:j,py:H,pz:J}=D,T=r.eql(r.mul(k,J),r.mul(j,q)),z=r.eql(r.mul(B,J),r.mul(H,q));return T&&z}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){const{a:D,b:k}=e,B=r.mul(k,p2),{px:q,py:j,pz:H}=this;let J=r.ZERO,T=r.ZERO,z=r.ZERO,ue=r.mul(q,q),_e=r.mul(j,j),G=r.mul(H,H),E=r.mul(q,j);return E=r.add(E,E),z=r.mul(q,H),z=r.add(z,z),J=r.mul(D,z),T=r.mul(B,G),T=r.add(J,T),J=r.sub(_e,T),T=r.add(_e,T),T=r.mul(J,T),J=r.mul(E,J),z=r.mul(B,z),G=r.mul(D,G),E=r.sub(ue,G),E=r.mul(D,E),E=r.add(E,z),z=r.add(ue,ue),ue=r.add(z,ue),ue=r.add(ue,G),ue=r.mul(ue,E),T=r.add(T,ue),G=r.mul(j,H),G=r.add(G,G),ue=r.mul(G,E),J=r.sub(J,ue),z=r.mul(G,_e),z=r.add(z,z),z=r.add(z,z),new y(J,T,z)}add(D){l(D);const{px:k,py:B,pz:q}=this,{px:j,py:H,pz:J}=D;let T=r.ZERO,z=r.ZERO,ue=r.ZERO;const _e=e.a,G=r.mul(e.b,p2);let E=r.mul(k,j),m=r.mul(B,H),f=r.mul(q,J),g=r.add(k,B),v=r.add(j,H);g=r.mul(g,v),v=r.add(E,m),g=r.sub(g,v),v=r.add(k,q);let x=r.add(j,J);return v=r.mul(v,x),x=r.add(E,f),v=r.sub(v,x),x=r.add(B,q),T=r.add(H,J),x=r.mul(x,T),T=r.add(m,f),x=r.sub(x,T),ue=r.mul(_e,v),T=r.mul(G,f),ue=r.add(T,ue),T=r.sub(m,ue),ue=r.add(m,ue),z=r.mul(T,ue),m=r.add(E,E),m=r.add(m,E),f=r.mul(_e,f),v=r.mul(G,v),m=r.add(m,f),f=r.sub(E,f),f=r.mul(_e,f),v=r.add(v,f),E=r.mul(m,v),z=r.add(z,E),E=r.mul(x,v),T=r.mul(g,T),T=r.sub(T,E),E=r.mul(g,m),ue=r.mul(x,ue),ue=r.add(ue,E),new y(T,z,ue)}subtract(D){return this.add(D.negate())}is0(){return this.equals(y.ZERO)}wNAF(D){return P.wNAFCached(this,D,y.normalizeZ)}multiplyUnsafe(D){ja("scalar",D,go,e.n);const k=y.ZERO;if(D===go)return k;if(D===Cn)return this;const{endo:B}=e;if(!B)return P.unsafeLadder(this,D);let{k1neg:q,k1:j,k2neg:H,k2:J}=B.splitScalar(D),T=k,z=k,ue=this;for(;j>go||J>go;)j&Cn&&(T=T.add(ue)),J&Cn&&(z=z.add(ue)),ue=ue.double(),j>>=Cn,J>>=Cn;return q&&(T=T.negate()),H&&(z=z.negate()),z=new y(r.mul(z.px,B.beta),z.py,z.pz),T.add(z)}multiply(D){const{endo:k,n:B}=e;ja("scalar",D,Cn,B);let q,j;if(k){const{k1neg:H,k1:J,k2neg:T,k2:z}=k.splitScalar(D);let{p:ue,f:_e}=this.wNAF(J),{p:G,f:E}=this.wNAF(z);ue=P.constTimeNegate(H,ue),G=P.constTimeNegate(T,G),G=new y(r.mul(G.px,k.beta),G.py,G.pz),q=ue.add(G),j=_e.add(E)}else{const{p:H,f:J}=this.wNAF(D);q=H,j=J}return y.normalizeZ([q,j])[0]}multiplyAndAddUnsafe(D,k,B){const q=y.BASE,j=(J,T)=>T===go||T===Cn||!J.equals(q)?J.multiplyUnsafe(T):J.multiply(T),H=j(this,k).add(j(D,B));return H.is0()?void 0:H}toAffine(D){return d(this,D)}isTorsionFree(){const{h:D,isTorsionFree:k}=e;if(D===Cn)return!0;if(k)return k(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:D,clearCofactor:k}=e;return D===Cn?this:k?k(y,this):this.multiplyUnsafe(e.h)}toRawBytes(D=!0){return Xc("isCompressed",D),this.assertValidity(),i(y,this,D)}toHex(D=!0){return Xc("isCompressed",D),Zc(this.toRawBytes(D))}}y.BASE=new y(e.Gx,e.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);const A=e.nBitLength,P=CC(y,e.endo?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:y,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function LC(t){const e=h2(t);return Wf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function kC(t){const e=LC(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(f){return di(f,n)}function a(f){return zg(f,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:p}=NC({...e,toBytes(f,g,v){const x=g.toAffine(),_=r.toBytes(x.x),S=Hf;return Xc("isCompressed",v),v?S(Uint8Array.from([g.hasEvenY()?2:3]),_):S(Uint8Array.from([4]),_,r.toBytes(x.y))},fromBytes(f){const g=f.length,v=f[0],x=f.subarray(1);if(g===i&&(v===2||v===3)){const _=Fa(x);if(!Yh(_,Cn,r.ORDER))throw new Error("Point is not on curve");const S=d(_);let b;try{b=r.sqrt(S)}catch(F){const ce=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+ce)}const M=(b&Cn)===Cn;return(v&1)===1!==M&&(b=r.neg(b)),{x:_,y:b}}else if(g===s&&v===4){const _=r.fromBytes(x.subarray(0,r.BYTES)),S=r.fromBytes(x.subarray(r.BYTES,2*r.BYTES));return{x:_,y:S}}else throw new Error(`Point of length ${g} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=f=>Zc(tu(f,e.nByteLength));function A(f){const g=n>>Cn;return f>g}function P(f){return A(f)?o(-f):f}const O=(f,g,v)=>Fa(f.slice(g,v));class D{constructor(g,v,x){this.r=g,this.s=v,this.recovery=x,this.assertValidity()}static fromCompact(g){const v=e.nByteLength;return g=ds("compactSignature",g,v*2),new D(O(g,0,v),O(g,v,2*v))}static fromDER(g){const{r:v,s:x}=po.toSig(ds("DER",g));return new D(v,x)}assertValidity(){ja("r",this.r,Cn,n),ja("s",this.s,Cn,n)}addRecoveryBit(g){return new D(this.r,this.s,g)}recoverPublicKey(g){const{r:v,s:x,recovery:_}=this,S=J(ds("msgHash",g));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const b=_===2||_===3?v+e.n:v;if(b>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=_&1?"03":"02",I=u.fromHex(M+y(b)),F=a(b),ce=o(-S*F),N=o(x*F),se=u.BASE.multiplyAndAddUnsafe(I,ce,N);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new D(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return eu(this.toDERHex())}toDERHex(){return po.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return eu(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const k={isValidPrivateKey(f){try{return l(f),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const f=f2(e.n);return MC(e.randomBytes(f),e.n)},precompute(f=8,g=u.BASE){return g._setWindowSize(f),g.multiply(BigInt(3)),g}};function B(f,g=!0){return u.fromPrivateKey(f).toRawBytes(g)}function q(f){const g=$a(f),v=typeof f=="string",x=(g||v)&&f.length;return g?x===i||x===s:v?x===2*i||x===2*s:f instanceof u}function j(f,g,v=!0){if(q(f))throw new Error("first arg must be private key");if(!q(g))throw new Error("second arg must be public key");return u.fromHex(g).multiply(l(f)).toRawBytes(v)}const H=e.bits2int||function(f){const g=Fa(f),v=f.length*8-e.nBitLength;return v>0?g>>BigInt(v):g},J=e.bits2int_modN||function(f){return o(H(f))},T=Fg(e.nBitLength);function z(f){return ja(`num < 2^${e.nBitLength}`,f,go,T),tu(f,e.nByteLength)}function ue(f,g,v=_e){if(["recovered","canonical"].some(X=>X in v))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:_}=e;let{lowS:S,prehash:b,extraEntropy:M}=v;S==null&&(S=!0),f=ds("msgHash",f),d2(v),b&&(f=ds("prehashed msgHash",x(f)));const I=J(f),F=l(g),ce=[z(F),z(I)];if(M!=null&&M!==!1){const X=M===!0?_(r.BYTES):M;ce.push(ds("extraEntropy",X))}const N=Hf(...ce),se=I;function ee(X){const Q=H(X);if(!p(Q))return;const R=a(Q),Z=u.BASE.multiply(Q).toAffine(),te=o(Z.x);if(te===go)return;const le=o(R*o(se+te*F));if(le===go)return;let ie=(Z.x===te?0:2)|Number(Z.y&Cn),fe=le;return S&&A(le)&&(fe=P(le),ie^=1),new D(te,fe,ie)}return{seed:N,k2sig:ee}}const _e={lowS:e.lowS,prehash:!1},G={lowS:e.lowS,prehash:!1};function E(f,g,v=_e){const{seed:x,k2sig:_}=ue(f,g,v),S=e;return i2(S.hash.outputLen,S.nByteLength,S.hmac)(x,_)}u.BASE._setWindowSize(8);function m(f,g,v,x=G){var Z;const _=f;if(g=ds("msgHash",g),v=ds("publicKey",v),"strict"in x)throw new Error("options.strict was renamed to lowS");d2(x);const{lowS:S,prehash:b}=x;let M,I;try{if(typeof _=="string"||$a(_))try{M=D.fromDER(_)}catch(te){if(!(te instanceof po.Err))throw te;M=D.fromCompact(_)}else if(typeof _=="object"&&typeof _.r=="bigint"&&typeof _.s=="bigint"){const{r:te,s:le}=_;M=new D(te,le)}else throw new Error("PARSE");I=u.fromHex(v)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&M.hasHighS())return!1;b&&(g=e.hash(g));const{r:F,s:ce}=M,N=J(g),se=a(ce),ee=o(N*se),X=o(F*se),Q=(Z=u.BASE.multiplyAndAddUnsafe(I,ee,X))==null?void 0:Z.toAffine();return Q?o(Q.x)===F:!1}return{CURVE:e,getPublicKey:B,getSharedSecret:j,sign:E,verify:m,ProjectivePoint:u,Signature:D,utils:k}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function BC(t){return{hash:t,hmac:(e,...r)=>e2(t,e,kP(...r)),randomBytes:$P}}function $C(t,e){const r=n=>kC({...t,...BC(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g2=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),m2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),FC=BigInt(1),Kg=BigInt(2),v2=(t,e)=>(t+e/Kg)/e;function jC(t){const e=g2,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),l=t*t*t%e,d=l*l*t%e,p=Ui(d,r,e)*d%e,y=Ui(p,r,e)*d%e,A=Ui(y,Kg,e)*l%e,P=Ui(A,i,e)*A%e,O=Ui(P,s,e)*P%e,D=Ui(O,a,e)*O%e,k=Ui(D,u,e)*D%e,B=Ui(k,a,e)*O%e,q=Ui(B,r,e)*d%e,j=Ui(q,o,e)*P%e,H=Ui(j,n,e)*l%e,J=Ui(H,Kg,e);if(!Vg.eql(Vg.sqr(J),t))throw new Error("Cannot find square root");return J}const Vg=c2(g2,void 0,void 0,{sqrt:jC}),b2=$C({a:BigInt(0),b:BigInt(7),Fp:Vg,n:m2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=m2,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-FC*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=v2(s*t,e),u=v2(-n*t,e);let l=di(t-a*r-u*i,e),d=di(-a*n-u*s,e);const p=l>o,y=d>o;if(p&&(l=e-l),y&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:p,k1:l,k2neg:y,k2:d}}}},Pg);BigInt(0),b2.ProjectivePoint;const UC=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:b2},Symbol.toStringTag,{value:"Module"}));function qC(t,e){const{abi:r,args:n,bytecode:i,...s}=e,o=qI({abi:r,args:n,bytecode:i});return Dg(t,{...s,data:o})}async function zC(t){var r;return((r=t.account)==null?void 0:r.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(n=>Af(n))}async function HC(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function WC(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(r=>og(r))}async function KC(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function VC(t,{account:e=t.account,message:r}){if(!e)throw new qf({docsPath:"/docs/actions/wallet/signMessage"});const n=fo(e);if(n.signMessage)return n.signMessage({message:r});const i=typeof r=="string"?Oh(r):r.raw instanceof Uint8Array?Dh(r.raw):r.raw;return t.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}async function GC(t,e){var l,d,p,y;const{account:r=t.account,chain:n=t.chain,...i}=e;if(!r)throw new qf({docsPath:"/docs/actions/wallet/signTransaction"});const s=fo(r);qh({account:s,...e});const o=await fi(t,Hh,"getChainId")({});n!==null&&Jw({currentChainId:o,chain:n});const a=(n==null?void 0:n.formatters)||((l=t.chain)==null?void 0:l.formatters),u=((d=a==null?void 0:a.transactionRequest)==null?void 0:d.format)||Sg;return s.signTransaction?s.signTransaction({...i,chainId:o},{serializer:(y=(p=t.chain)==null?void 0:p.serializers)==null?void 0:y.transaction}):await t.request({method:"eth_signTransaction",params:[{...u(i),chainId:Pr(o),from:s.address}]},{retryCount:0})}async function YC(t,e){const{account:r=t.account,domain:n,message:i,primaryType:s}=e;if(!r)throw new qf({docsPath:"/docs/actions/wallet/signTypedData"});const o=fo(r),a={EIP712Domain:aC({domain:n}),...e.types};if(oC({domain:n,message:i,primaryType:s,types:a}),o.signTypedData)return o.signTypedData({domain:n,message:i,primaryType:s,types:a});const u=sC({domain:n,message:i,primaryType:s,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,u]},{retryCount:0})}async function JC(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Pr(e)}]},{retryCount:0})}async function XC(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function ZC(t){return{addChain:e=>KI(t,e),deployContract:e=>qC(t,e),getAddresses:()=>zC(t),getChainId:()=>Hh(t),getPermissions:()=>HC(t),prepareTransactionRequest:e=>Ig(t,e),requestAddresses:()=>WC(t),requestPermissions:e=>KC(t,e),sendRawTransaction:e=>Xw(t,e),sendTransaction:e=>Dg(t,e),signMessage:e=>VC(t,e),signTransaction:e=>GC(t,e),signTypedData:e=>YC(t,e),switchChain:e=>JC(t,e),watchAsset:e=>XC(t,e),writeContract:e=>WI(t,e)}}function QC(t){const{key:e="wallet",name:r="Wallet Client",transport:n}=t;return VI({...t,key:e,name:r,transport:n,type:"walletClient"}).extend(ZC)}class ru{constructor(e){oo(this,"_key");oo(this,"_config",null);oo(this,"_provider",null);oo(this,"_connected",!1);oo(this,"_address",null);oo(this,"_fatured",!1);oo(this,"_installed",!1);oo(this,"lastUsed",!1);var r;if("name"in e&&"image"in e)this._key=e.name,this._config=e,this._fatured=e.featured;else if("session"in e){if(!e.session)throw new Error("session is null");this._key=(r=e.session)==null?void 0:r.peer.metadata.name,this._provider=e,this._config={name:e.session.peer.metadata.name,image:e.session.peer.metadata.icons[0],featured:!1}}else if("info"in e)this._key=e.info.name,this._provider=e.provider,this._installed=!0,this._config={name:e.info.name,image:e.info.icon,featured:!1},this.testConnect();else throw new Error("unknown params")}get address(){return this._address}get connected(){return this._connected}get featured(){return this._fatured}get key(){return this._key}get installed(){return this._installed}get provider(){return this._provider}get client(){return this._provider?QC({transport:QI(this._provider)}):null}get config(){return this._config}static fromWalletConfig(e){return new ru(e)}EIP6963Detected(e){this._provider=e.provider,this._installed=!0,this._provider.on("disconnect",this.disconnect),this._provider.on("accountsChanged",r=>{this._address=r[0],this._connected=!0}),this.testConnect()}setUniversalProvider(e){this._provider=e,this.testConnect()}async testConnect(){var r;const e=await((r=this.client)==null?void 0:r.getAddresses());e&&e.length>0?(this._address=e[0],this._connected=!0):(this._address=null,this._connected=!1)}async connect(){var r;const e=await((r=this.client)==null?void 0:r.request({method:"eth_requestAccounts",params:void 0}));if(!e)throw new Error("connect failed");return e}async getAddress(){var r;const e=await((r=this.client)==null?void 0:r.getAddresses());if(!e)throw new Error("get address failed");return e[0]}async getChain(){var r;const e=await((r=this.client)==null?void 0:r.getChainId());if(!e)throw new Error("get chain failed");return e}async signMessage(e,r){var i;return await((i=this.client)==null?void 0:i.signMessage({message:e,account:r}))}async disconnect(){this._provider&&"session"in this._provider&&await this._provider.disconnect(),this._connected=!1,this._address=null}}var Gg={exports:{}},nu=typeof Reflect=="object"?Reflect:null,y2=nu&&typeof nu.apply=="function"?nu.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Jh;nu&&typeof nu.ownKeys=="function"?Jh=nu.ownKeys:Object.getOwnPropertySymbols?Jh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Jh=function(e){return Object.getOwnPropertyNames(e)};function eT(t){console&&console.warn&&console.warn(t)}var w2=Number.isNaN||function(e){return e!==e};function Rr(){Rr.init.call(this)}Gg.exports=Rr,Gg.exports.once=iT,Rr.EventEmitter=Rr,Rr.prototype._events=void 0,Rr.prototype._eventsCount=0,Rr.prototype._maxListeners=void 0;var x2=10;function Xh(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Rr,"defaultMaxListeners",{enumerable:!0,get:function(){return x2},set:function(t){if(typeof t!="number"||t<0||w2(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");x2=t}}),Rr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Rr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||w2(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _2(t){return t._maxListeners===void 0?Rr.defaultMaxListeners:t._maxListeners}Rr.prototype.getMaxListeners=function(){return _2(this)},Rr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")y2(u,this,r);else for(var l=u.length,d=M2(u,l),n=0;n<l;++n)y2(d[n],this,r);return!0};function E2(t,e,r,n){var i,s,o;if(Xh(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=_2(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,eT(a)}return t}Rr.prototype.addListener=function(e,r){return E2(this,e,r,!1)},Rr.prototype.on=Rr.prototype.addListener,Rr.prototype.prependListener=function(e,r){return E2(this,e,r,!0)};function tT(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S2(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=tT.bind(n);return i.listener=r,n.wrapFn=i,i}Rr.prototype.once=function(e,r){return Xh(r),this.on(e,S2(this,e,r)),this},Rr.prototype.prependOnceListener=function(e,r){return Xh(r),this.prependListener(e,S2(this,e,r)),this},Rr.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Xh(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():rT(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},Rr.prototype.off=Rr.prototype.removeListener,Rr.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function A2(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?nT(i):M2(i,i.length)}Rr.prototype.listeners=function(e){return A2(this,e,!0)},Rr.prototype.rawListeners=function(e){return A2(this,e,!1)},Rr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):P2.call(t,e)},Rr.prototype.listenerCount=P2;function P2(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Rr.prototype.eventNames=function(){return this._eventsCount>0?Jh(this._events):[]};function M2(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function rT(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function nT(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function iT(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}I2(t,e,s,{once:!0}),e!=="error"&&sT(t,i,{once:!0})})}function sT(t,e,r){typeof t.on=="function"&&I2(t,"error",e,r)}function I2(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var qi=Gg.exports;const Yg=ji(qi);var mt={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Jg=function(t,e){return Jg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Jg(t,e)};function oT(t,e){Jg(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Xg=function(){return Xg=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xg.apply(this,arguments)};function aT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function cT(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function uT(t,e){return function(r,n){e(r,n,t)}}function fT(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function lT(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{l(n.next(d))}catch(p){o(p)}}function u(d){try{l(n.throw(d))}catch(p){o(p)}}function l(d){d.done?s(d.value):i(d.value).then(a,u)}l((n=n.apply(t,e||[])).next())})}function hT(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(d){return u([l,d])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function dT(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function pT(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Zg(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function C2(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function gT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C2(arguments[e]));return t}function mT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Kf(t){return this instanceof Kf?(this.v=t,this):new Kf(t)}function vT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){n[y]&&(i[y]=function(A){return new Promise(function(P,O){s.push([y,A,P,O])>1||a(y,A)})})}function a(y,A){try{u(n[y](A))}catch(P){p(s[0][3],P)}}function u(y){y.value instanceof Kf?Promise.resolve(y.value.v).then(l,d):p(s[0][2],y)}function l(y){a("next",y)}function d(y){a("throw",y)}function p(y,A){y(A),s.shift(),s.length&&a(s[0][0],s[0][1])}}function bT(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Kf(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function yT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Zg=="function"?Zg(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}function wT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function xT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _T(t){return t&&t.__esModule?t:{default:t}}function ET(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ST(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Vf=Jp(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xg},__asyncDelegator:bT,__asyncGenerator:vT,__asyncValues:yT,__await:Kf,__awaiter:lT,__classPrivateFieldGet:ET,__classPrivateFieldSet:ST,__createBinding:dT,__decorate:cT,__exportStar:pT,__extends:oT,__generator:hT,__importDefault:_T,__importStar:xT,__makeTemplateObject:wT,__metadata:fT,__param:uT,__read:C2,__rest:aT,__spread:gT,__spreadArrays:mT,__values:Zg},Symbol.toStringTag,{value:"Module"})));var Qg={},Gf={},T2;function AT(){if(T2)return Gf;T2=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Gf.delay=t,Gf}var qa={},em={},za={},R2;function PT(){return R2||(R2=1,Object.defineProperty(za,"__esModule",{value:!0}),za.ONE_THOUSAND=za.ONE_HUNDRED=void 0,za.ONE_HUNDRED=100,za.ONE_THOUSAND=1e3),za}var tm={},D2;function MT(){return D2||(D2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(tm)),tm}var O2;function N2(){return O2||(O2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vf;e.__exportStar(PT(),t),e.__exportStar(MT(),t)}(em)),em}var L2;function IT(){if(L2)return qa;L2=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.fromMiliseconds=qa.toMiliseconds=void 0;const t=N2();function e(n){return n*t.ONE_THOUSAND}qa.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return qa.fromMiliseconds=r,qa}var k2;function CT(){return k2||(k2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vf;e.__exportStar(AT(),t),e.__exportStar(IT(),t)}(Qg)),Qg}var iu={},B2;function TT(){if(B2)return iu;B2=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return iu.Watch=t,iu.default=t,iu}var rm={},Yf={},$2;function RT(){if($2)return Yf;$2=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.IWatch=void 0;class t{}return Yf.IWatch=t,Yf}var F2;function DT(){return F2||(F2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Vf.__exportStar(RT(),t)}(rm)),rm}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vf;e.__exportStar(CT(),t),e.__exportStar(TT(),t),e.__exportStar(DT(),t),e.__exportStar(N2(),t)})(mt);class Ha{}let OT=class extends Ha{constructor(e){super()}};const j2=mt.FIVE_SECONDS,su={pulse:"heartbeat_pulse"};let NT=class GA extends OT{constructor(e){super(e),this.events=new qi.EventEmitter,this.interval=j2,this.interval=(e==null?void 0:e.interval)||j2}static async init(e){const r=new GA(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),mt.toMiliseconds(this.interval))}pulse(){this.events.emit(su.pulse)}};const LT=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,kT=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,BT=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function $T(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){FT(t);return}return e}function FT(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Zh(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!BT.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(LT.test(t)||kT.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,$T)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function jT(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Tn(t,...e){try{return jT(t(...e))}catch(r){return Promise.reject(r)}}function UT(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function qT(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Qh(t){if(UT(t))return String(t);if(qT(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Qh(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function U2(){if(typeof Buffer>"u")throw new TypeError("[unstorage] Buffer is not supported!")}const nm="base64:";function zT(t){if(typeof t=="string")return t;U2();const e=Buffer.from(t).toString("base64");return nm+e}function HT(t){return typeof t!="string"||!t.startsWith(nm)?t:(U2(),Buffer.from(t.slice(nm.length),"base64"))}function pi(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function WT(...t){return pi(t.join(":"))}function ed(t){return t=pi(t),t?t+":":""}function poe(t){return t}const KT="memory",VT=()=>{const t=new Map;return{name:KT,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function GT(t={}){const e={mounts:{"":t.driver||VT()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const d of e.mountpoints)if(l.startsWith(d))return{base:d,relativeKey:l.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,d)=>e.mountpoints.filter(p=>p.startsWith(l)||d&&l.startsWith(p)).map(p=>({relativeBase:l.length>p.length?l.slice(p.length):void 0,mountpoint:p,driver:e.mounts[p]})),i=(l,d)=>{if(e.watching){d=pi(d);for(const p of e.watchListeners)p(l,d)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await q2(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,d,p)=>{const y=new Map,A=P=>{let O=y.get(P.base);return O||(O={driver:P.driver,base:P.base,items:[]},y.set(P.base,O)),O};for(const P of l){const O=typeof P=="string",D=pi(O?P:P.key),k=O?void 0:P.value,B=O||!P.options?d:{...d,...P.options},q=r(D);A(q).items.push({key:D,value:k,relativeKey:q.relativeKey,options:B})}return Promise.all([...y.values()].map(P=>p(P))).then(P=>P.flat())},u={hasItem(l,d={}){l=pi(l);const{relativeKey:p,driver:y}=r(l);return Tn(y.hasItem,p,d)},getItem(l,d={}){l=pi(l);const{relativeKey:p,driver:y}=r(l);return Tn(y.getItem,p,d).then(A=>Zh(A))},getItems(l,d){return a(l,d,p=>p.driver.getItems?Tn(p.driver.getItems,p.items.map(y=>({key:y.relativeKey,options:y.options})),d).then(y=>y.map(A=>({key:WT(p.base,A.key),value:Zh(A.value)}))):Promise.all(p.items.map(y=>Tn(p.driver.getItem,y.relativeKey,y.options).then(A=>({key:y.key,value:Zh(A)})))))},getItemRaw(l,d={}){l=pi(l);const{relativeKey:p,driver:y}=r(l);return y.getItemRaw?Tn(y.getItemRaw,p,d):Tn(y.getItem,p,d).then(A=>HT(A))},async setItem(l,d,p={}){if(d===void 0)return u.removeItem(l);l=pi(l);const{relativeKey:y,driver:A}=r(l);A.setItem&&(await Tn(A.setItem,y,Qh(d),p),A.watch||i("update",l))},async setItems(l,d){await a(l,d,async p=>{if(p.driver.setItems)return Tn(p.driver.setItems,p.items.map(y=>({key:y.relativeKey,value:Qh(y.value),options:y.options})),d);p.driver.setItem&&await Promise.all(p.items.map(y=>Tn(p.driver.setItem,y.relativeKey,Qh(y.value),y.options)))})},async setItemRaw(l,d,p={}){if(d===void 0)return u.removeItem(l,p);l=pi(l);const{relativeKey:y,driver:A}=r(l);if(A.setItemRaw)await Tn(A.setItemRaw,y,d,p);else if(A.setItem)await Tn(A.setItem,y,zT(d),p);else return;A.watch||i("update",l)},async removeItem(l,d={}){typeof d=="boolean"&&(d={removeMeta:d}),l=pi(l);const{relativeKey:p,driver:y}=r(l);y.removeItem&&(await Tn(y.removeItem,p,d),(d.removeMeta||d.removeMata)&&await Tn(y.removeItem,p+"$",d),y.watch||i("remove",l))},async getMeta(l,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),l=pi(l);const{relativeKey:p,driver:y}=r(l),A=Object.create(null);if(y.getMeta&&Object.assign(A,await Tn(y.getMeta,p,d)),!d.nativeOnly){const P=await Tn(y.getItem,p+"$",d).then(O=>Zh(O));P&&typeof P=="object"&&(typeof P.atime=="string"&&(P.atime=new Date(P.atime)),typeof P.mtime=="string"&&(P.mtime=new Date(P.mtime)),Object.assign(A,P))}return A},setMeta(l,d,p={}){return this.setItem(l+"$",d,p)},removeMeta(l,d={}){return this.removeItem(l+"$",d)},async getKeys(l,d={}){l=ed(l);const p=n(l,!0);let y=[];const A=[];for(const P of p){const O=await Tn(P.driver.getKeys,P.relativeBase,d);for(const D of O){const k=P.mountpoint+pi(D);y.some(B=>k.startsWith(B))||A.push(k)}y=[P.mountpoint,...y.filter(D=>!D.startsWith(P.mountpoint))]}return l?A.filter(P=>P.startsWith(l)&&P[P.length-1]!=="$"):A.filter(P=>P[P.length-1]!=="$")},async clear(l,d={}){l=ed(l),await Promise.all(n(l,!1).map(async p=>{if(p.driver.clear)return Tn(p.driver.clear,p.relativeBase,d);if(p.driver.removeItem){const y=await p.driver.getKeys(p.relativeBase||"",d);return Promise.all(y.map(A=>p.driver.removeItem(A,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>z2(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,d){if(l=ed(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((p,y)=>y.length-p.length)),e.mounts[l]=d,e.watching&&Promise.resolve(q2(d,i,l)).then(p=>{e.unwatch[l]=p}).catch(console.error),u},async unmount(l,d=!0){l=ed(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l](),delete e.unwatch[l]),d&&await z2(e.mounts[l]),e.mountpoints=e.mountpoints.filter(p=>p!==l),delete e.mounts[l])},getMount(l=""){l=pi(l)+":";const d=r(l);return{driver:d.driver,base:d.base}},getMounts(l="",d={}){return l=pi(l),n(l,d.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(l,d={})=>u.getKeys(l,d),get:(l,d={})=>u.getItem(l,d),set:(l,d,p={})=>u.setItem(l,d,p),has:(l,d={})=>u.hasItem(l,d),del:(l,d={})=>u.removeItem(l,d),remove:(l,d={})=>u.removeItem(l,d)};return u}function q2(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function z2(t){typeof t.dispose=="function"&&await Tn(t.dispose)}function Wa(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function H2(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Wa(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let im;function Jf(){return im||(im=H2("keyval-store","keyval")),im}function W2(t,e=Jf()){return e("readonly",r=>Wa(r.get(t)))}function YT(t,e,r=Jf()){return r("readwrite",n=>(n.put(e,t),Wa(n.transaction)))}function JT(t,e=Jf()){return e("readwrite",r=>(r.delete(t),Wa(r.transaction)))}function XT(t=Jf()){return t("readwrite",e=>(e.clear(),Wa(e.transaction)))}function ZT(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Wa(t.transaction)}function QT(t=Jf()){return t("readonly",e=>{if(e.getAllKeys)return Wa(e.getAllKeys());const r=[];return ZT(e,n=>r.push(n.key)).then(()=>r)})}const eR=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),tR=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ka(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return tR(t)}catch{return t}}function mo(t){return typeof t=="string"?t:eR(t)||""}const rR="idb-keyval";var nR=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=H2(t.dbName,t.storeName)),{name:rR,options:t,async hasItem(i){return!(typeof await W2(r(i),n)>"u")},async getItem(i){return await W2(r(i),n)??null},setItem(i,s){return YT(r(i),s,n)},removeItem(i){return JT(r(i),n)},getKeys(){return QT(n)},clear(){return XT(n)}}};const iR="WALLET_CONNECT_V2_INDEXED_DB",sR="keyvaluestorage";let oR=class{constructor(){this.indexedDb=GT({driver:nR({dbName:iR,storeName:sR})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,mo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},td={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof sm<"u"&&sm.localStorage?td.exports=sm.localStorage:typeof window<"u"&&window.localStorage?td.exports=window.localStorage:td.exports=new e})();function aR(t){var e;return[t[0],Ka((e=t[1])!=null?e:"")]}let cR=class{constructor(){this.localStorage=td.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(aR)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Ka(r)}async setItem(e,r){this.localStorage.setItem(e,mo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const uR="wc_storage_version",K2=1,fR=async(t,e,r)=>{const n=uR,i=await e.getItem(n);if(i&&i>=K2){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const u=a.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,K2),r(e),lR(t,o)},lR=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let hR=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new cR;this.storage=e;try{const r=new oR;fR(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};function dR(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var pR=gR;function gR(t,e,r){var n=r&&r.stringify||dR,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var l="",d=1-i,p=-1,y=t&&t.length||0,A=0;A<y;){if(t.charCodeAt(A)===37&&A+1<y){switch(p=p>-1?p:0,t.charCodeAt(A+1)){case 100:case 102:if(d>=u||e[d]==null)break;p<A&&(l+=t.slice(p,A)),l+=Number(e[d]),p=A+2,A++;break;case 105:if(d>=u||e[d]==null)break;p<A&&(l+=t.slice(p,A)),l+=Math.floor(Number(e[d])),p=A+2,A++;break;case 79:case 111:case 106:if(d>=u||e[d]===void 0)break;p<A&&(l+=t.slice(p,A));var P=typeof e[d];if(P==="string"){l+="'"+e[d]+"'",p=A+2,A++;break}if(P==="function"){l+=e[d].name||"<anonymous>",p=A+2,A++;break}l+=n(e[d]),p=A+2,A++;break;case 115:if(d>=u)break;p<A&&(l+=t.slice(p,A)),l+=String(e[d]),p=A+2,A++;break;case 37:p<A&&(l+=t.slice(p,A)),l+="%",p=A+2,A++,d--;break}++d}++A}return p===-1?t:(p<y&&(l+=t.slice(p)),l)}const V2=pR;var ou=vo;const Xf=AR().console||{},mR={mapHttpRequest:nd,mapHttpResponse:nd,wrapRequestSerializer:am,wrapResponseSerializer:am,wrapErrorSerializer:am,req:nd,res:nd,err:xR};function vR(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function vo(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||Xf;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=vR(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",u=Object.create(r);u.log||(u.log=Zf),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:p,set:y});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:_R(t)};u.levels=vo.levels,u.level=a,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=Zf,u.serializers=n,u._serialize=i,u._stdErrSerialize=s,u.child=A,e&&(u._logEvent=om());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function p(){return this._level}function y(P){if(P!=="silent"&&!this.levels.values[P])throw Error("unknown level "+P);this._level=P,au(l,u,"error","log"),au(l,u,"fatal","error"),au(l,u,"warn","error"),au(l,u,"info","log"),au(l,u,"debug","log"),au(l,u,"trace","log")}function A(P,O){if(!P)throw new Error("missing bindings for child Pino");O=O||{},i&&P.serializers&&(O.serializers=P.serializers);const D=O.serializers;if(i&&D){var k=Object.assign({},n,D),B=t.browser.serialize===!0?Object.keys(k):i;delete P.serializers,rd([P],B,k,this._stdErrSerialize)}function q(j){this._childLevel=(j._childLevel|0)+1,this.error=cu(j,P,"error"),this.fatal=cu(j,P,"fatal"),this.warn=cu(j,P,"warn"),this.info=cu(j,P,"info"),this.debug=cu(j,P,"debug"),this.trace=cu(j,P,"trace"),k&&(this.serializers=k,this._serialize=B),e&&(this._logEvent=om([].concat(j._logEvent.bindings,P)))}return q.prototype=this,new q(this)}return u}vo.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},vo.stdSerializers=mR,vo.stdTimeFunctions=Object.assign({},{nullTime:G2,epochTime:Y2,unixTime:ER,isoTime:SR});function au(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Zf:i[r]?i[r]:Xf[r]||Xf[n]||Zf,bR(t,e,r)}function bR(t,e,r){!t.transmit&&e[r]===Zf||(e[r]=function(n){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Xf?Xf:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];if(t.serialize&&!t.asObject&&rd(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,yR(this,r,o,s)):n.apply(a,o),t.transmit){const l=t.transmit.level||e.level,d=vo.levels.values[l],p=vo.levels.values[r];if(p<d)return;wR(this,{ts:s,methodLevel:r,methodValue:p,send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function yR(t,e,r,n){t._serialize&&rd(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};n&&(o.time=n),o.level=vo.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?V2(i.shift(),i):void 0}else typeof s=="string"&&(s=V2(i.shift(),i));return s!==void 0&&(o.msg=s),o}function rd(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=vo.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function cu(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function wR(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,u=t._logEvent.bindings;rd(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(l){return u.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=om(u)}function om(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function xR(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function _R(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?G2:Y2}function nd(){return{}}function am(t){return t}function Zf(){}function G2(){return!1}function Y2(){return Date.now()}function ER(){return Math.round(Date.now()/1e3)}function SR(){return new Date(Date.now()).toISOString()}function AR(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Qf=ji(ou),PR={level:"info"},el="custom_context",cm=1e3*1024;let MR=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},J2=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new MR(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},X2=class{constructor(e,r=cm){this.level=e??"error",this.levelValue=ou.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new J2(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===ou.levels.values.error?console.error(e):r===ou.levels.values.warn?console.warn(e):r===ou.levels.values.debug?console.debug(e):r===ou.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(mo({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new J2(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(mo({extraMetadata:e})),new Blob(r,{type:"application/json"})}},IR=class{constructor(e,r=cm){this.baseChunkLogger=new X2(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},CR=class{constructor(e,r=cm){this.baseChunkLogger=new X2(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var TR=Object.defineProperty,RR=Object.defineProperties,DR=Object.getOwnPropertyDescriptors,Z2=Object.getOwnPropertySymbols,OR=Object.prototype.hasOwnProperty,NR=Object.prototype.propertyIsEnumerable,Q2=(t,e,r)=>e in t?TR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,id=(t,e)=>{for(var r in e||(e={}))OR.call(e,r)&&Q2(t,r,e[r]);if(Z2)for(var r of Z2(e))NR.call(e,r)&&Q2(t,r,e[r]);return t},sd=(t,e)=>RR(t,DR(e));function od(t){return sd(id({},t),{level:(t==null?void 0:t.level)||PR.level})}function LR(t,e=el){return t[e]||""}function kR(t,e,r=el){return t[r]=e,t}function gi(t,e=el){let r="";return typeof t.bindings>"u"?r=LR(t,e):r=t.bindings().context||"",r}function BR(t,e,r=el){const n=gi(t,r);return n.trim()?`${n}/${e}`:e}function ri(t,e,r=el){const n=BR(t,e,r),i=t.child({context:n});return kR(i,n,r)}function $R(t){var e,r;const n=new IR((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Qf(sd(id({},t.opts),{level:"trace",browser:sd(id({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function FR(t){var e;const r=new CR((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Qf(sd(id({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function jR(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?$R(t):FR(t)}let UR=class extends Ha{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},qR=class extends Ha{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},zR=class{constructor(e,r){this.logger=e,this.core=r}},HR=class extends Ha{constructor(e,r){super(),this.relayer=e,this.logger=r}},WR=class extends Ha{constructor(e){super()}},KR=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},VR=class extends Ha{constructor(e,r){super(),this.relayer=e,this.logger=r}},GR=class extends Ha{constructor(e,r){super(),this.core=e,this.logger=r}},YR=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},JR=class{constructor(e,r){this.projectId=e,this.logger=r}},XR=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}},ZR=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},QR=class{constructor(e){this.client=e}};var um={},ta={},ad={},cd={};Object.defineProperty(cd,"__esModule",{value:!0}),cd.BrowserRandomSource=void 0;const ex=65536;class eD{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=ex)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,ex)));return r}}cd.BrowserRandomSource=eD;function tx(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ud={},Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});function tD(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Mi.wipe=tD;const tl=Jp(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(ud,"__esModule",{value:!0}),ud.NodeRandomSource=void 0;const rD=Mi;class nD{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof tx<"u"){const e=tl;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,rD.wipe)(r),n}}ud.NodeRandomSource=nD,Object.defineProperty(ad,"__esModule",{value:!0}),ad.SystemRandomSource=void 0;const iD=cd,sD=ud;class oD{constructor(){if(this.isAvailable=!1,this.name="",this._source=new iD.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new sD.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ad.SystemRandomSource=oD;var or={},rx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,u){var l=a>>>16&65535,d=a&65535,p=u>>>16&65535,y=u&65535;return d*y+(l*y+d*p<<16>>>0)|0}t.mul=Math.imul||e;function r(a,u){return a+u|0}t.add=r;function n(a,u){return a-u|0}t.sub=n;function i(a,u){return a<<u|a>>>32-u}t.rotl=i;function s(a,u){return a<<32-u|a>>>u}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(rx),Object.defineProperty(or,"__esModule",{value:!0});var nx=rx;function aD(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}or.readInt16BE=aD;function cD(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}or.readUint16BE=cD;function uD(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}or.readInt16LE=uD;function fD(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}or.readUint16LE=fD;function ix(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}or.writeUint16BE=ix,or.writeInt16BE=ix;function sx(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}or.writeUint16LE=sx,or.writeInt16LE=sx;function fm(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}or.readInt32BE=fm;function lm(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}or.readUint32BE=lm;function hm(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}or.readInt32LE=hm;function dm(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}or.readUint32LE=dm;function fd(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}or.writeUint32BE=fd,or.writeInt32BE=fd;function ld(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}or.writeUint32LE=ld,or.writeInt32LE=ld;function lD(t,e){e===void 0&&(e=0);var r=fm(t,e),n=fm(t,e+4);return r*4294967296+n-(n>>31)*4294967296}or.readInt64BE=lD;function hD(t,e){e===void 0&&(e=0);var r=lm(t,e),n=lm(t,e+4);return r*4294967296+n}or.readUint64BE=hD;function dD(t,e){e===void 0&&(e=0);var r=hm(t,e),n=hm(t,e+4);return n*4294967296+r-(r>>31)*4294967296}or.readInt64LE=dD;function pD(t,e){e===void 0&&(e=0);var r=dm(t,e),n=dm(t,e+4);return n*4294967296+r}or.readUint64LE=pD;function ox(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),fd(t/4294967296>>>0,e,r),fd(t>>>0,e,r+4),e}or.writeUint64BE=ox,or.writeInt64BE=ox;function ax(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ld(t>>>0,e,r),ld(t/4294967296>>>0,e,r+4),e}or.writeUint64LE=ax,or.writeInt64LE=ax;function gD(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}or.readUintBE=gD;function mD(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}or.readUintLE=mD;function vD(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!nx.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}or.writeUintBE=vD;function bD(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!nx.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}or.writeUintLE=bD;function yD(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}or.readFloat32BE=yD;function wD(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}or.readFloat32LE=wD;function xD(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}or.readFloat64BE=xD;function _D(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}or.readFloat64LE=_D;function ED(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}or.writeFloat32BE=ED;function SD(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}or.writeFloat32LE=SD;function AD(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}or.writeFloat64BE=AD;function PD(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}or.writeFloat64LE=PD,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=ad,r=or,n=Mi;t.defaultRandomSource=new e.SystemRandomSource;function i(l,d=t.defaultRandomSource){return d.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const d=i(4,l),p=(0,r.readUint32LE)(d);return(0,n.wipe)(d),p}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,d=o,p=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let y="";const A=d.length,P=256-256%A;for(;l>0;){const O=i(Math.ceil(l*256/P),p);for(let D=0;D<O.length&&l>0;D++){const k=O[D];k<P&&(y+=d.charAt(k%A),l--)}(0,n.wipe)(O)}return y}t.randomString=a;function u(l,d=o,p=t.defaultRandomSource){const y=Math.ceil(l/(Math.log(d.length)/Math.LN2));return a(y,d,p)}t.randomStringForEntropy=u}(ta);var cx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=or,r=Mi;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(u,l){if(l===void 0&&(l=u.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=u[d++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,u,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=u[d++],l--;return this},a.prototype.finish=function(u){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,p=l/536870912|0,y=l<<3,A=l%128<112?128:256;this._buffer[d]=128;for(var P=d+1;P<A-8;P++)this._buffer[P]=0;e.writeUint32BE(p,this._buffer,A-8),e.writeUint32BE(y,this._buffer,A-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,A),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)e.writeUint32BE(this._stateHi[P],u,P*8),e.writeUint32BE(this._stateLo[P],u,P*8+4);return this},a.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(u){return this._stateHi.set(u.stateHi),this._stateLo.set(u.stateLo),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(u){r.wipe(u.stateHi),r.wipe(u.stateLo),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,u,l,d,p,y,A){for(var P=l[0],O=l[1],D=l[2],k=l[3],B=l[4],q=l[5],j=l[6],H=l[7],J=d[0],T=d[1],z=d[2],ue=d[3],_e=d[4],G=d[5],E=d[6],m=d[7],f,g,v,x,_,S,b,M;A>=128;){for(var I=0;I<16;I++){var F=8*I+y;a[I]=e.readUint32BE(p,F),u[I]=e.readUint32BE(p,F+4)}for(var I=0;I<80;I++){var ce=P,N=O,se=D,ee=k,X=B,Q=q,R=j,Z=H,te=J,le=T,ie=z,fe=ue,ve=_e,Me=G,Ne=E,Te=m;if(f=H,g=m,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=(B>>>14|_e<<18)^(B>>>18|_e<<14)^(_e>>>9|B<<23),g=(_e>>>14|B<<18)^(_e>>>18|B<<14)^(B>>>9|_e<<23),_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,f=B&q^~B&j,g=_e&G^~_e&E,_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,f=i[I*2],g=i[I*2+1],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,f=a[I%16],g=u[I%16],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,v=b&65535|M<<16,x=_&65535|S<<16,f=v,g=x,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=(P>>>28|J<<4)^(J>>>2|P<<30)^(J>>>7|P<<25),g=(J>>>28|P<<4)^(P>>>2|J<<30)^(P>>>7|J<<25),_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,f=P&O^P&D^O&D,g=J&T^J&z^T&z,_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,Z=b&65535|M<<16,Te=_&65535|S<<16,f=ee,g=fe,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=v,g=x,_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,ee=b&65535|M<<16,fe=_&65535|S<<16,O=ce,D=N,k=se,B=ee,q=X,j=Q,H=R,P=Z,T=te,z=le,ue=ie,_e=fe,G=ve,E=Me,m=Ne,J=Te,I%16===15)for(var F=0;F<16;F++)f=a[F],g=u[F],_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=a[(F+9)%16],g=u[(F+9)%16],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,v=a[(F+1)%16],x=u[(F+1)%16],f=(v>>>1|x<<31)^(v>>>8|x<<24)^v>>>7,g=(x>>>1|v<<31)^(x>>>8|v<<24)^(x>>>7|v<<25),_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,v=a[(F+14)%16],x=u[(F+14)%16],f=(v>>>19|x<<13)^(x>>>29|v<<3)^v>>>6,g=(x>>>19|v<<13)^(v>>>29|x<<3)^(x>>>6|v<<26),_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,a[F]=b&65535|M<<16,u[F]=_&65535|S<<16}f=P,g=J,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[0],g=d[0],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[0]=P=b&65535|M<<16,d[0]=J=_&65535|S<<16,f=O,g=T,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[1],g=d[1],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[1]=O=b&65535|M<<16,d[1]=T=_&65535|S<<16,f=D,g=z,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[2],g=d[2],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[2]=D=b&65535|M<<16,d[2]=z=_&65535|S<<16,f=k,g=ue,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[3],g=d[3],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[3]=k=b&65535|M<<16,d[3]=ue=_&65535|S<<16,f=B,g=_e,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[4],g=d[4],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[4]=B=b&65535|M<<16,d[4]=_e=_&65535|S<<16,f=q,g=G,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[5],g=d[5],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[5]=q=b&65535|M<<16,d[5]=G=_&65535|S<<16,f=j,g=E,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[6],g=d[6],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[6]=j=b&65535|M<<16,d[6]=E=_&65535|S<<16,f=H,g=m,_=g&65535,S=g>>>16,b=f&65535,M=f>>>16,f=l[7],g=d[7],_+=g&65535,S+=g>>>16,b+=f&65535,M+=f>>>16,S+=_>>>16,b+=S>>>16,M+=b>>>16,l[7]=H=b&65535|M<<16,d[7]=m=_&65535|S<<16,y+=128,A-=128}return y}function o(a){var u=new n;u.update(a);var l=u.digest();return u.clean(),l}t.hash=o})(cx),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=ta,r=cx,n=Mi;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(ee){const X=new Float64Array(16);if(ee)for(let Q=0;Q<ee.length;Q++)X[Q]=ee[Q];return X}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function A(ee,X){for(let Q=0;Q<16;Q++)ee[Q]=X[Q]|0}function P(ee){let X=1;for(let Q=0;Q<16;Q++){let R=ee[Q]+X+65535;X=Math.floor(R/65536),ee[Q]=R-X*65536}ee[0]+=X-1+37*(X-1)}function O(ee,X,Q){const R=~(Q-1);for(let Z=0;Z<16;Z++){const te=R&(ee[Z]^X[Z]);ee[Z]^=te,X[Z]^=te}}function D(ee,X){const Q=i(),R=i();for(let Z=0;Z<16;Z++)R[Z]=X[Z];P(R),P(R),P(R);for(let Z=0;Z<2;Z++){Q[0]=R[0]-65517;for(let le=1;le<15;le++)Q[le]=R[le]-65535-(Q[le-1]>>16&1),Q[le-1]&=65535;Q[15]=R[15]-32767-(Q[14]>>16&1);const te=Q[15]>>16&1;Q[14]&=65535,O(R,Q,1-te)}for(let Z=0;Z<16;Z++)ee[2*Z]=R[Z]&255,ee[2*Z+1]=R[Z]>>8}function k(ee,X){let Q=0;for(let R=0;R<32;R++)Q|=ee[R]^X[R];return(1&Q-1>>>8)-1}function B(ee,X){const Q=new Uint8Array(32),R=new Uint8Array(32);return D(Q,ee),D(R,X),k(Q,R)}function q(ee){const X=new Uint8Array(32);return D(X,ee),X[0]&1}function j(ee,X){for(let Q=0;Q<16;Q++)ee[Q]=X[2*Q]+(X[2*Q+1]<<8);ee[15]&=32767}function H(ee,X,Q){for(let R=0;R<16;R++)ee[R]=X[R]+Q[R]}function J(ee,X,Q){for(let R=0;R<16;R++)ee[R]=X[R]-Q[R]}function T(ee,X,Q){let R,Z,te=0,le=0,ie=0,fe=0,ve=0,Me=0,Ne=0,Te=0,$e=0,Ie=0,Le=0,Ve=0,ke=0,ze=0,He=0,Ee=0,Qe=0,ct=0,Be=0,et=0,rt=0,Je=0,pt=0,ht=0,ft=0,Ht=0,Jt=0,St=0,er=0,Xt=0,Ot=0,Bt=Q[0],Tt=Q[1],vt=Q[2],Dt=Q[3],Lt=Q[4],bt=Q[5],$t=Q[6],jt=Q[7],nt=Q[8],Ft=Q[9],$=Q[10],W=Q[11],V=Q[12],C=Q[13],Y=Q[14],U=Q[15];R=X[0],te+=R*Bt,le+=R*Tt,ie+=R*vt,fe+=R*Dt,ve+=R*Lt,Me+=R*bt,Ne+=R*$t,Te+=R*jt,$e+=R*nt,Ie+=R*Ft,Le+=R*$,Ve+=R*W,ke+=R*V,ze+=R*C,He+=R*Y,Ee+=R*U,R=X[1],le+=R*Bt,ie+=R*Tt,fe+=R*vt,ve+=R*Dt,Me+=R*Lt,Ne+=R*bt,Te+=R*$t,$e+=R*jt,Ie+=R*nt,Le+=R*Ft,Ve+=R*$,ke+=R*W,ze+=R*V,He+=R*C,Ee+=R*Y,Qe+=R*U,R=X[2],ie+=R*Bt,fe+=R*Tt,ve+=R*vt,Me+=R*Dt,Ne+=R*Lt,Te+=R*bt,$e+=R*$t,Ie+=R*jt,Le+=R*nt,Ve+=R*Ft,ke+=R*$,ze+=R*W,He+=R*V,Ee+=R*C,Qe+=R*Y,ct+=R*U,R=X[3],fe+=R*Bt,ve+=R*Tt,Me+=R*vt,Ne+=R*Dt,Te+=R*Lt,$e+=R*bt,Ie+=R*$t,Le+=R*jt,Ve+=R*nt,ke+=R*Ft,ze+=R*$,He+=R*W,Ee+=R*V,Qe+=R*C,ct+=R*Y,Be+=R*U,R=X[4],ve+=R*Bt,Me+=R*Tt,Ne+=R*vt,Te+=R*Dt,$e+=R*Lt,Ie+=R*bt,Le+=R*$t,Ve+=R*jt,ke+=R*nt,ze+=R*Ft,He+=R*$,Ee+=R*W,Qe+=R*V,ct+=R*C,Be+=R*Y,et+=R*U,R=X[5],Me+=R*Bt,Ne+=R*Tt,Te+=R*vt,$e+=R*Dt,Ie+=R*Lt,Le+=R*bt,Ve+=R*$t,ke+=R*jt,ze+=R*nt,He+=R*Ft,Ee+=R*$,Qe+=R*W,ct+=R*V,Be+=R*C,et+=R*Y,rt+=R*U,R=X[6],Ne+=R*Bt,Te+=R*Tt,$e+=R*vt,Ie+=R*Dt,Le+=R*Lt,Ve+=R*bt,ke+=R*$t,ze+=R*jt,He+=R*nt,Ee+=R*Ft,Qe+=R*$,ct+=R*W,Be+=R*V,et+=R*C,rt+=R*Y,Je+=R*U,R=X[7],Te+=R*Bt,$e+=R*Tt,Ie+=R*vt,Le+=R*Dt,Ve+=R*Lt,ke+=R*bt,ze+=R*$t,He+=R*jt,Ee+=R*nt,Qe+=R*Ft,ct+=R*$,Be+=R*W,et+=R*V,rt+=R*C,Je+=R*Y,pt+=R*U,R=X[8],$e+=R*Bt,Ie+=R*Tt,Le+=R*vt,Ve+=R*Dt,ke+=R*Lt,ze+=R*bt,He+=R*$t,Ee+=R*jt,Qe+=R*nt,ct+=R*Ft,Be+=R*$,et+=R*W,rt+=R*V,Je+=R*C,pt+=R*Y,ht+=R*U,R=X[9],Ie+=R*Bt,Le+=R*Tt,Ve+=R*vt,ke+=R*Dt,ze+=R*Lt,He+=R*bt,Ee+=R*$t,Qe+=R*jt,ct+=R*nt,Be+=R*Ft,et+=R*$,rt+=R*W,Je+=R*V,pt+=R*C,ht+=R*Y,ft+=R*U,R=X[10],Le+=R*Bt,Ve+=R*Tt,ke+=R*vt,ze+=R*Dt,He+=R*Lt,Ee+=R*bt,Qe+=R*$t,ct+=R*jt,Be+=R*nt,et+=R*Ft,rt+=R*$,Je+=R*W,pt+=R*V,ht+=R*C,ft+=R*Y,Ht+=R*U,R=X[11],Ve+=R*Bt,ke+=R*Tt,ze+=R*vt,He+=R*Dt,Ee+=R*Lt,Qe+=R*bt,ct+=R*$t,Be+=R*jt,et+=R*nt,rt+=R*Ft,Je+=R*$,pt+=R*W,ht+=R*V,ft+=R*C,Ht+=R*Y,Jt+=R*U,R=X[12],ke+=R*Bt,ze+=R*Tt,He+=R*vt,Ee+=R*Dt,Qe+=R*Lt,ct+=R*bt,Be+=R*$t,et+=R*jt,rt+=R*nt,Je+=R*Ft,pt+=R*$,ht+=R*W,ft+=R*V,Ht+=R*C,Jt+=R*Y,St+=R*U,R=X[13],ze+=R*Bt,He+=R*Tt,Ee+=R*vt,Qe+=R*Dt,ct+=R*Lt,Be+=R*bt,et+=R*$t,rt+=R*jt,Je+=R*nt,pt+=R*Ft,ht+=R*$,ft+=R*W,Ht+=R*V,Jt+=R*C,St+=R*Y,er+=R*U,R=X[14],He+=R*Bt,Ee+=R*Tt,Qe+=R*vt,ct+=R*Dt,Be+=R*Lt,et+=R*bt,rt+=R*$t,Je+=R*jt,pt+=R*nt,ht+=R*Ft,ft+=R*$,Ht+=R*W,Jt+=R*V,St+=R*C,er+=R*Y,Xt+=R*U,R=X[15],Ee+=R*Bt,Qe+=R*Tt,ct+=R*vt,Be+=R*Dt,et+=R*Lt,rt+=R*bt,Je+=R*$t,pt+=R*jt,ht+=R*nt,ft+=R*Ft,Ht+=R*$,Jt+=R*W,St+=R*V,er+=R*C,Xt+=R*Y,Ot+=R*U,te+=38*Qe,le+=38*ct,ie+=38*Be,fe+=38*et,ve+=38*rt,Me+=38*Je,Ne+=38*pt,Te+=38*ht,$e+=38*ft,Ie+=38*Ht,Le+=38*Jt,Ve+=38*St,ke+=38*er,ze+=38*Xt,He+=38*Ot,Z=1,R=te+Z+65535,Z=Math.floor(R/65536),te=R-Z*65536,R=le+Z+65535,Z=Math.floor(R/65536),le=R-Z*65536,R=ie+Z+65535,Z=Math.floor(R/65536),ie=R-Z*65536,R=fe+Z+65535,Z=Math.floor(R/65536),fe=R-Z*65536,R=ve+Z+65535,Z=Math.floor(R/65536),ve=R-Z*65536,R=Me+Z+65535,Z=Math.floor(R/65536),Me=R-Z*65536,R=Ne+Z+65535,Z=Math.floor(R/65536),Ne=R-Z*65536,R=Te+Z+65535,Z=Math.floor(R/65536),Te=R-Z*65536,R=$e+Z+65535,Z=Math.floor(R/65536),$e=R-Z*65536,R=Ie+Z+65535,Z=Math.floor(R/65536),Ie=R-Z*65536,R=Le+Z+65535,Z=Math.floor(R/65536),Le=R-Z*65536,R=Ve+Z+65535,Z=Math.floor(R/65536),Ve=R-Z*65536,R=ke+Z+65535,Z=Math.floor(R/65536),ke=R-Z*65536,R=ze+Z+65535,Z=Math.floor(R/65536),ze=R-Z*65536,R=He+Z+65535,Z=Math.floor(R/65536),He=R-Z*65536,R=Ee+Z+65535,Z=Math.floor(R/65536),Ee=R-Z*65536,te+=Z-1+37*(Z-1),Z=1,R=te+Z+65535,Z=Math.floor(R/65536),te=R-Z*65536,R=le+Z+65535,Z=Math.floor(R/65536),le=R-Z*65536,R=ie+Z+65535,Z=Math.floor(R/65536),ie=R-Z*65536,R=fe+Z+65535,Z=Math.floor(R/65536),fe=R-Z*65536,R=ve+Z+65535,Z=Math.floor(R/65536),ve=R-Z*65536,R=Me+Z+65535,Z=Math.floor(R/65536),Me=R-Z*65536,R=Ne+Z+65535,Z=Math.floor(R/65536),Ne=R-Z*65536,R=Te+Z+65535,Z=Math.floor(R/65536),Te=R-Z*65536,R=$e+Z+65535,Z=Math.floor(R/65536),$e=R-Z*65536,R=Ie+Z+65535,Z=Math.floor(R/65536),Ie=R-Z*65536,R=Le+Z+65535,Z=Math.floor(R/65536),Le=R-Z*65536,R=Ve+Z+65535,Z=Math.floor(R/65536),Ve=R-Z*65536,R=ke+Z+65535,Z=Math.floor(R/65536),ke=R-Z*65536,R=ze+Z+65535,Z=Math.floor(R/65536),ze=R-Z*65536,R=He+Z+65535,Z=Math.floor(R/65536),He=R-Z*65536,R=Ee+Z+65535,Z=Math.floor(R/65536),Ee=R-Z*65536,te+=Z-1+37*(Z-1),ee[0]=te,ee[1]=le,ee[2]=ie,ee[3]=fe,ee[4]=ve,ee[5]=Me,ee[6]=Ne,ee[7]=Te,ee[8]=$e,ee[9]=Ie,ee[10]=Le,ee[11]=Ve,ee[12]=ke,ee[13]=ze,ee[14]=He,ee[15]=Ee}function z(ee,X){T(ee,X,X)}function ue(ee,X){const Q=i();let R;for(R=0;R<16;R++)Q[R]=X[R];for(R=253;R>=0;R--)z(Q,Q),R!==2&&R!==4&&T(Q,Q,X);for(R=0;R<16;R++)ee[R]=Q[R]}function _e(ee,X){const Q=i();let R;for(R=0;R<16;R++)Q[R]=X[R];for(R=250;R>=0;R--)z(Q,Q),R!==1&&T(Q,Q,X);for(R=0;R<16;R++)ee[R]=Q[R]}function G(ee,X){const Q=i(),R=i(),Z=i(),te=i(),le=i(),ie=i(),fe=i(),ve=i(),Me=i();J(Q,ee[1],ee[0]),J(Me,X[1],X[0]),T(Q,Q,Me),H(R,ee[0],ee[1]),H(Me,X[0],X[1]),T(R,R,Me),T(Z,ee[3],X[3]),T(Z,Z,l),T(te,ee[2],X[2]),H(te,te,te),J(le,R,Q),J(ie,te,Z),H(fe,te,Z),H(ve,R,Q),T(ee[0],le,ie),T(ee[1],ve,fe),T(ee[2],fe,ie),T(ee[3],le,ve)}function E(ee,X,Q){for(let R=0;R<4;R++)O(ee[R],X[R],Q)}function m(ee,X){const Q=i(),R=i(),Z=i();ue(Z,X[2]),T(Q,X[0],Z),T(R,X[1],Z),D(ee,R),ee[31]^=q(Q)<<7}function f(ee,X,Q){A(ee[0],o),A(ee[1],a),A(ee[2],a),A(ee[3],o);for(let R=255;R>=0;--R){const Z=Q[R/8|0]>>(R&7)&1;E(ee,X,Z),G(X,ee),G(ee,ee),E(ee,X,Z)}}function g(ee,X){const Q=[i(),i(),i(),i()];A(Q[0],d),A(Q[1],p),A(Q[2],a),T(Q[3],d,p),f(ee,Q,X)}function v(ee){if(ee.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const X=(0,r.hash)(ee);X[0]&=248,X[31]&=127,X[31]|=64;const Q=new Uint8Array(32),R=[i(),i(),i(),i()];g(R,X),m(Q,R);const Z=new Uint8Array(64);return Z.set(ee),Z.set(Q,32),{publicKey:Q,secretKey:Z}}t.generateKeyPairFromSeed=v;function x(ee){const X=(0,e.randomBytes)(32,ee),Q=v(X);return(0,n.wipe)(X),Q}t.generateKeyPair=x;function _(ee){if(ee.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(ee.subarray(32))}t.extractPublicKeyFromSecretKey=_;const S=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function b(ee,X){let Q,R,Z,te;for(R=63;R>=32;--R){for(Q=0,Z=R-32,te=R-12;Z<te;++Z)X[Z]+=Q-16*X[R]*S[Z-(R-32)],Q=Math.floor((X[Z]+128)/256),X[Z]-=Q*256;X[Z]+=Q,X[R]=0}for(Q=0,Z=0;Z<32;Z++)X[Z]+=Q-(X[31]>>4)*S[Z],Q=X[Z]>>8,X[Z]&=255;for(Z=0;Z<32;Z++)X[Z]-=Q*S[Z];for(R=0;R<32;R++)X[R+1]+=X[R]>>8,ee[R]=X[R]&255}function M(ee){const X=new Float64Array(64);for(let Q=0;Q<64;Q++)X[Q]=ee[Q];for(let Q=0;Q<64;Q++)ee[Q]=0;b(ee,X)}function I(ee,X){const Q=new Float64Array(64),R=[i(),i(),i(),i()],Z=(0,r.hash)(ee.subarray(0,32));Z[0]&=248,Z[31]&=127,Z[31]|=64;const te=new Uint8Array(64);te.set(Z.subarray(32),32);const le=new r.SHA512;le.update(te.subarray(32)),le.update(X);const ie=le.digest();le.clean(),M(ie),g(R,ie),m(te,R),le.reset(),le.update(te.subarray(0,32)),le.update(ee.subarray(32)),le.update(X);const fe=le.digest();M(fe);for(let ve=0;ve<32;ve++)Q[ve]=ie[ve];for(let ve=0;ve<32;ve++)for(let Me=0;Me<32;Me++)Q[ve+Me]+=fe[ve]*Z[Me];return b(te.subarray(32),Q),te}t.sign=I;function F(ee,X){const Q=i(),R=i(),Z=i(),te=i(),le=i(),ie=i(),fe=i();return A(ee[2],a),j(ee[1],X),z(Z,ee[1]),T(te,Z,u),J(Z,Z,ee[2]),H(te,ee[2],te),z(le,te),z(ie,le),T(fe,ie,le),T(Q,fe,Z),T(Q,Q,te),_e(Q,Q),T(Q,Q,Z),T(Q,Q,te),T(Q,Q,te),T(ee[0],Q,te),z(R,ee[0]),T(R,R,te),B(R,Z)&&T(ee[0],ee[0],y),z(R,ee[0]),T(R,R,te),B(R,Z)?-1:(q(ee[0])===X[31]>>7&&J(ee[0],o,ee[0]),T(ee[3],ee[0],ee[1]),0)}function ce(ee,X,Q){const R=new Uint8Array(32),Z=[i(),i(),i(),i()],te=[i(),i(),i(),i()];if(Q.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(F(te,ee))return!1;const le=new r.SHA512;le.update(Q.subarray(0,32)),le.update(ee),le.update(X);const ie=le.digest();return M(ie),f(Z,te,ie),g(te,Q.subarray(32)),G(Z,te),m(R,Z),!k(Q,R)}t.verify=ce;function N(ee){let X=[i(),i(),i(),i()];if(F(X,ee))throw new Error("Ed25519: invalid public key");let Q=i(),R=i(),Z=X[1];H(Q,a,Z),J(R,a,Z),ue(R,R),T(Q,Q,R);let te=new Uint8Array(32);return D(te,Q),te}t.convertPublicKeyToX25519=N;function se(ee){const X=(0,r.hash)(ee.subarray(0,32));X[0]&=248,X[31]&=127,X[31]|=64;const Q=new Uint8Array(X.subarray(0,32));return(0,n.wipe)(X),Q}t.convertSecretKeyToX25519=se}(um);const MD="EdDSA",ID="JWT",hd=".",dd="base64url",ux="utf8",fx="utf8",CD=":",TD="did",RD="key",lx="base58btc",DD="z",OD="K36",ND=32;function hx(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function pd(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=hx(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function LD(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function p(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var O=0,D=0,k=0,B=P.length;k!==B&&P[k]===0;)k++,O++;for(var q=(B-k)*d+1>>>0,j=new Uint8Array(q);k!==B;){for(var H=P[k],J=0,T=q-1;(H!==0||J<D)&&T!==-1;T--,J++)H+=256*j[T]>>>0,j[T]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");D=J,k++}for(var z=q-D;z!==q&&j[z]===0;)z++;for(var ue=u.repeat(O);z<q;++z)ue+=t.charAt(j[z]);return ue}function y(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var O=0;if(P[O]!==" "){for(var D=0,k=0;P[O]===u;)D++,O++;for(var B=(P.length-O)*l+1>>>0,q=new Uint8Array(B);P[O];){var j=r[P.charCodeAt(O)];if(j===255)return;for(var H=0,J=B-1;(j!==0||H<k)&&J!==-1;J--,H++)j+=a*q[J]>>>0,q[J]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");k=H,O++}if(P[O]!==" "){for(var T=B-k;T!==B&&q[T]===0;)T++;for(var z=new Uint8Array(D+(B-T)),ue=D;T!==B;)z[ue++]=q[T++];return z}}}function A(P){var O=y(P);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:y,decode:A}}var kD=LD,BD=kD;const $D=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},FD=t=>new TextEncoder().encode(t),jD=t=>new TextDecoder().decode(t);class UD{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qD{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return dx(this,e)}}class zD{constructor(e){this.decoders=e}or(e){return dx(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const dx=(t,e)=>new zD({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class HD{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new UD(e,r,n),this.decoder=new qD(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const gd=({name:t,prefix:e,encode:r,decode:n})=>new HD(t,e,r,n),rl=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=BD(r,e);return gd({prefix:t,name:e,encode:n,decode:s=>$D(i(s))})},WD=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,u=0,l=0;for(let d=0;d<s;++d){const p=i[t[d]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},KD=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},jn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>gd({prefix:e,name:t,encode(i){return KD(i,n,r)},decode(i){return WD(i,n,r,t)}}),VD=gd({prefix:"\0",name:"identity",encode:t=>jD(t),decode:t=>FD(t)}),GD=Object.freeze(Object.defineProperty({__proto__:null,identity:VD},Symbol.toStringTag,{value:"Module"})),YD=jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),JD=Object.freeze(Object.defineProperty({__proto__:null,base2:YD},Symbol.toStringTag,{value:"Module"})),XD=jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ZD=Object.freeze(Object.defineProperty({__proto__:null,base8:XD},Symbol.toStringTag,{value:"Module"})),QD=rl({prefix:"9",name:"base10",alphabet:"0123456789"}),eO=Object.freeze(Object.defineProperty({__proto__:null,base10:QD},Symbol.toStringTag,{value:"Module"})),tO=jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rO=jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nO=Object.freeze(Object.defineProperty({__proto__:null,base16:tO,base16upper:rO},Symbol.toStringTag,{value:"Module"})),iO=jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sO=jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oO=jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),aO=jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cO=jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uO=jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fO=jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lO=jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hO=jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dO=Object.freeze(Object.defineProperty({__proto__:null,base32:iO,base32hex:cO,base32hexpad:fO,base32hexpadupper:lO,base32hexupper:uO,base32pad:oO,base32padupper:aO,base32upper:sO,base32z:hO},Symbol.toStringTag,{value:"Module"})),pO=rl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gO=rl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),mO=Object.freeze(Object.defineProperty({__proto__:null,base36:pO,base36upper:gO},Symbol.toStringTag,{value:"Module"})),vO=rl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bO=rl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),yO=Object.freeze(Object.defineProperty({__proto__:null,base58btc:vO,base58flickr:bO},Symbol.toStringTag,{value:"Module"})),wO=jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xO=jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_O=jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EO=jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),SO=Object.freeze(Object.defineProperty({__proto__:null,base64:wO,base64pad:xO,base64url:_O,base64urlpad:EO},Symbol.toStringTag,{value:"Module"})),px=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),AO=px.reduce((t,e,r)=>(t[r]=e,t),[]),PO=px.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function MO(t){return t.reduce((e,r)=>(e+=AO[r],e),"")}function IO(t){const e=[];for(const r of t){const n=PO[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const CO=gd({prefix:"🚀",name:"base256emoji",encode:MO,decode:IO}),TO=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:CO},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const gx={...GD,...JD,...ZD,...eO,...nO,...dO,...mO,...yO,...SO,...TO};function mx(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const vx=mx("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),pm=mx("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=hx(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),bx={utf8:vx,"utf-8":vx,hex:gx.base16,latin1:pm,ascii:pm,binary:pm,...gx};function Rn(t,e="utf8"){const r=bx[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Dn(t,e="utf8"){const r=bx[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function yx(t){return Ka(Rn(Dn(t,dd),ux))}function md(t){return Rn(Dn(mo(t),ux),dd)}function wx(t){const e=Dn(OD,lx),r=DD+Rn(pd([e,t]),lx);return[TD,RD,r].join(CD)}function RO(t){return Rn(t,dd)}function DO(t){return Dn(t,dd)}function OO(t){return Dn([md(t.header),md(t.payload)].join(hd),fx)}function NO(t){return[md(t.header),md(t.payload),RO(t.signature)].join(hd)}function gm(t){const e=t.split(hd),r=yx(e[0]),n=yx(e[1]),i=DO(e[2]),s=Dn(e.slice(0,2).join(hd),fx);return{header:r,payload:n,signature:i,data:s}}function xx(t=ta.randomBytes(ND)){return um.generateKeyPairFromSeed(t)}async function LO(t,e,r,n,i=mt.fromMiliseconds(Date.now())){const s={alg:MD,typ:ID},o=wx(n.publicKey),a=i+r,u={iss:o,sub:t,aud:e,iat:i,exp:a},l=OO({header:s,payload:u}),d=um.sign(n.secretKey,l);return NO({header:s,payload:u,signature:d})}var _x=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},kO=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),BO=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),$O=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),FO=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),jO=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),UO=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,qO=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ex=3,zO=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",UO]],Sx=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function HO(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new jO:typeof navigator<"u"?KO(navigator.userAgent):GO()}function WO(t){return t!==""&&zO.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function KO(t){var e=WO(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new FO;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Ex&&(i=_x(_x([],i,!0),YO(Ex-i.length),!0)):i=[];var s=i.join("."),o=VO(t),a=qO.exec(t);return a&&a[1]?new $O(r,s,o,a[1]):new kO(r,s,o)}function VO(t){for(var e=0,r=Sx.length;e<r;e++){var n=Sx[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function GO(){var t=typeof process<"u"&&process.version;return t?new BO(process.version.slice(1)):null}function YO(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var zr={};Object.defineProperty(zr,"__esModule",{value:!0}),zr.getLocalStorage=zr.getLocalStorageOrThrow=zr.getCrypto=zr.getCryptoOrThrow=Ax=zr.getLocation=zr.getLocationOrThrow=mm=zr.getNavigator=zr.getNavigatorOrThrow=nl=zr.getDocument=zr.getDocumentOrThrow=zr.getFromWindowOrThrow=zr.getFromWindow=void 0;function Va(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}zr.getFromWindow=Va;function uu(t){const e=Va(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}zr.getFromWindowOrThrow=uu;function JO(){return uu("document")}zr.getDocumentOrThrow=JO;function XO(){return Va("document")}var nl=zr.getDocument=XO;function ZO(){return uu("navigator")}zr.getNavigatorOrThrow=ZO;function QO(){return Va("navigator")}var mm=zr.getNavigator=QO;function eN(){return uu("location")}zr.getLocationOrThrow=eN;function tN(){return Va("location")}var Ax=zr.getLocation=tN;function rN(){return uu("crypto")}zr.getCryptoOrThrow=rN;function nN(){return Va("crypto")}zr.getCrypto=nN;function iN(){return uu("localStorage")}zr.getLocalStorageOrThrow=iN;function sN(){return Va("localStorage")}zr.getLocalStorage=sN;var vm={};Object.defineProperty(vm,"__esModule",{value:!0});var Px=vm.getWindowMetadata=void 0;const Mx=zr;function oN(){let t,e;try{t=Mx.getDocumentOrThrow(),e=Mx.getLocationOrThrow()}catch{return null}function r(){const p=t.getElementsByTagName("link"),y=[];for(let A=0;A<p.length;A++){const P=p[A],O=P.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const D=P.getAttribute("href");if(D)if(D.toLowerCase().indexOf("https:")===-1&&D.toLowerCase().indexOf("http:")===-1&&D.indexOf("//")!==0){let k=e.protocol+"//"+e.host;if(D.indexOf("/")===0)k+=D;else{const B=e.pathname.split("/");B.pop();const q=B.join("/");k+=q+"/"+D}y.push(k)}else if(D.indexOf("//")===0){const k=e.protocol+D;y.push(k)}else y.push(D)}}return y}function n(...p){const y=t.getElementsByTagName("meta");for(let A=0;A<y.length;A++){const P=y[A],O=["itemprop","property","name"].map(D=>P.getAttribute(D)).filter(D=>D?p.includes(D):!1);if(O.length&&O){const D=P.getAttribute("content");if(D)return D}}return""}function i(){let p=n("name","og:site_name","og:title","twitter:title");return p||(p=t.title),p}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),u=e.origin,l=r();return{description:a,url:u,icons:l,name:o}}Px=vm.getWindowMetadata=oN;var il={},aN=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Ix="%[a-f0-9]{2}",Cx=new RegExp("("+Ix+")|([^%]+?)","gi"),Tx=new RegExp("("+Ix+")+","gi");function bm(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],bm(r),bm(n))}function cN(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Cx)||[],r=1;r<e.length;r++)t=bm(e,r).join(""),e=t.match(Cx)||[];return t}}function uN(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Tx.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=cN(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Tx.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var fN=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return uN(t)}},lN=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},hN=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=aN,r=fN,n=lN,i=hN,s=B=>B==null,o=Symbol("encodeFragmentIdentifier");function a(B){switch(B.arrayFormat){case"index":return q=>(j,H)=>{const J=j.length;return H===void 0||B.skipNull&&H===null||B.skipEmptyString&&H===""?j:H===null?[...j,[d(q,B),"[",J,"]"].join("")]:[...j,[d(q,B),"[",d(J,B),"]=",d(H,B)].join("")]};case"bracket":return q=>(j,H)=>H===void 0||B.skipNull&&H===null||B.skipEmptyString&&H===""?j:H===null?[...j,[d(q,B),"[]"].join("")]:[...j,[d(q,B),"[]=",d(H,B)].join("")];case"colon-list-separator":return q=>(j,H)=>H===void 0||B.skipNull&&H===null||B.skipEmptyString&&H===""?j:H===null?[...j,[d(q,B),":list="].join("")]:[...j,[d(q,B),":list=",d(H,B)].join("")];case"comma":case"separator":case"bracket-separator":{const q=B.arrayFormat==="bracket-separator"?"[]=":"=";return j=>(H,J)=>J===void 0||B.skipNull&&J===null||B.skipEmptyString&&J===""?H:(J=J===null?"":J,H.length===0?[[d(j,B),q,d(J,B)].join("")]:[[H,d(J,B)].join(B.arrayFormatSeparator)])}default:return q=>(j,H)=>H===void 0||B.skipNull&&H===null||B.skipEmptyString&&H===""?j:H===null?[...j,d(q,B)]:[...j,[d(q,B),"=",d(H,B)].join("")]}}function u(B){let q;switch(B.arrayFormat){case"index":return(j,H,J)=>{if(q=/\[(\d*)\]$/.exec(j),j=j.replace(/\[\d*\]$/,""),!q){J[j]=H;return}J[j]===void 0&&(J[j]={}),J[j][q[1]]=H};case"bracket":return(j,H,J)=>{if(q=/(\[\])$/.exec(j),j=j.replace(/\[\]$/,""),!q){J[j]=H;return}if(J[j]===void 0){J[j]=[H];return}J[j]=[].concat(J[j],H)};case"colon-list-separator":return(j,H,J)=>{if(q=/(:list)$/.exec(j),j=j.replace(/:list$/,""),!q){J[j]=H;return}if(J[j]===void 0){J[j]=[H];return}J[j]=[].concat(J[j],H)};case"comma":case"separator":return(j,H,J)=>{const T=typeof H=="string"&&H.includes(B.arrayFormatSeparator),z=typeof H=="string"&&!T&&p(H,B).includes(B.arrayFormatSeparator);H=z?p(H,B):H;const ue=T||z?H.split(B.arrayFormatSeparator).map(_e=>p(_e,B)):H===null?H:p(H,B);J[j]=ue};case"bracket-separator":return(j,H,J)=>{const T=/(\[\])$/.test(j);if(j=j.replace(/\[\]$/,""),!T){J[j]=H&&p(H,B);return}const z=H===null?[]:H.split(B.arrayFormatSeparator).map(ue=>p(ue,B));if(J[j]===void 0){J[j]=z;return}J[j]=[].concat(J[j],z)};default:return(j,H,J)=>{if(J[j]===void 0){J[j]=H;return}J[j]=[].concat(J[j],H)}}}function l(B){if(typeof B!="string"||B.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(B,q){return q.encode?q.strict?e(B):encodeURIComponent(B):B}function p(B,q){return q.decode?r(B):B}function y(B){return Array.isArray(B)?B.sort():typeof B=="object"?y(Object.keys(B)).sort((q,j)=>Number(q)-Number(j)).map(q=>B[q]):B}function A(B){const q=B.indexOf("#");return q!==-1&&(B=B.slice(0,q)),B}function P(B){let q="";const j=B.indexOf("#");return j!==-1&&(q=B.slice(j)),q}function O(B){B=A(B);const q=B.indexOf("?");return q===-1?"":B.slice(q+1)}function D(B,q){return q.parseNumbers&&!Number.isNaN(Number(B))&&typeof B=="string"&&B.trim()!==""?B=Number(B):q.parseBooleans&&B!==null&&(B.toLowerCase()==="true"||B.toLowerCase()==="false")&&(B=B.toLowerCase()==="true"),B}function k(B,q){q=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},q),l(q.arrayFormatSeparator);const j=u(q),H=Object.create(null);if(typeof B!="string"||(B=B.trim().replace(/^[?#&]/,""),!B))return H;for(const J of B.split("&")){if(J==="")continue;let[T,z]=n(q.decode?J.replace(/\+/g," "):J,"=");z=z===void 0?null:["comma","separator","bracket-separator"].includes(q.arrayFormat)?z:p(z,q),j(p(T,q),z,H)}for(const J of Object.keys(H)){const T=H[J];if(typeof T=="object"&&T!==null)for(const z of Object.keys(T))T[z]=D(T[z],q);else H[J]=D(T,q)}return q.sort===!1?H:(q.sort===!0?Object.keys(H).sort():Object.keys(H).sort(q.sort)).reduce((J,T)=>{const z=H[T];return z&&typeof z=="object"&&!Array.isArray(z)?J[T]=y(z):J[T]=z,J},Object.create(null))}t.extract=O,t.parse=k,t.stringify=(B,q)=>{if(!B)return"";q=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},q),l(q.arrayFormatSeparator);const j=z=>q.skipNull&&s(B[z])||q.skipEmptyString&&B[z]==="",H=a(q),J={};for(const z of Object.keys(B))j(z)||(J[z]=B[z]);const T=Object.keys(J);return q.sort!==!1&&T.sort(q.sort),T.map(z=>{const ue=B[z];return ue===void 0?"":ue===null?d(z,q):Array.isArray(ue)?ue.length===0&&q.arrayFormat==="bracket-separator"?d(z,q)+"[]":ue.reduce(H(z),[]).join("&"):d(z,q)+"="+d(ue,q)}).filter(z=>z.length>0).join("&")},t.parseUrl=(B,q)=>{q=Object.assign({decode:!0},q);const[j,H]=n(B,"#");return Object.assign({url:j.split("?")[0]||"",query:k(O(B),q)},q&&q.parseFragmentIdentifier&&H?{fragmentIdentifier:p(H,q)}:{})},t.stringifyUrl=(B,q)=>{q=Object.assign({encode:!0,strict:!0,[o]:!0},q);const j=A(B.url).split("?")[0]||"",H=t.extract(B.url),J=t.parse(H,{sort:!1}),T=Object.assign(J,B.query);let z=t.stringify(T,q);z&&(z=`?${z}`);let ue=P(B.url);return B.fragmentIdentifier&&(ue=`#${q[o]?d(B.fragmentIdentifier,q):B.fragmentIdentifier}`),`${j}${z}${ue}`},t.pick=(B,q,j)=>{j=Object.assign({parseFragmentIdentifier:!0,[o]:!1},j);const{url:H,query:J,fragmentIdentifier:T}=t.parseUrl(B,j);return t.stringifyUrl({url:H,query:i(J,q),fragmentIdentifier:T},j)},t.exclude=(B,q,j)=>{const H=Array.isArray(q)?J=>!q.includes(J):(J,T)=>!q(J,T);return t.pick(B,H,j)}})(il);var Rx={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=nn:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,u=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),d=[31,7936,2031616,520093696],p=[4,1024,262144,67108864],y=[1,256,65536,16777216],A=[6,1536,393216,100663296],P=[0,8,16,24],O=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],D=[224,256,384,512],k=[128,256],B=["hex","buffer","arrayBuffer","array","digest"],q={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(N){return Object.prototype.toString.call(N)==="[object Array]"}),u&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(N){return typeof N=="object"&&N.buffer&&N.buffer.constructor===ArrayBuffer});for(var j=function(N,se,ee){return function(X){return new I(N,se,N).update(X)[ee]()}},H=function(N,se,ee){return function(X,Q){return new I(N,se,Q).update(X)[ee]()}},J=function(N,se,ee){return function(X,Q,R,Z){return f["cshake"+N].update(X,Q,R,Z)[ee]()}},T=function(N,se,ee){return function(X,Q,R,Z){return f["kmac"+N].update(X,Q,R,Z)[ee]()}},z=function(N,se,ee,X){for(var Q=0;Q<B.length;++Q){var R=B[Q];N[R]=se(ee,X,R)}return N},ue=function(N,se){var ee=j(N,se,"hex");return ee.create=function(){return new I(N,se,N)},ee.update=function(X){return ee.create().update(X)},z(ee,j,N,se)},_e=function(N,se){var ee=H(N,se,"hex");return ee.create=function(X){return new I(N,se,X)},ee.update=function(X,Q){return ee.create(Q).update(X)},z(ee,H,N,se)},G=function(N,se){var ee=q[N],X=J(N,se,"hex");return X.create=function(Q,R,Z){return!R&&!Z?f["shake"+N].create(Q):new I(N,se,Q).bytepad([R,Z],ee)},X.update=function(Q,R,Z,te){return X.create(R,Z,te).update(Q)},z(X,J,N,se)},E=function(N,se){var ee=q[N],X=T(N,se,"hex");return X.create=function(Q,R,Z){return new F(N,se,R).bytepad(["KMAC",Z],ee).bytepad([Q],ee)},X.update=function(Q,R,Z,te){return X.create(Q,Z,te).update(R)},z(X,T,N,se)},m=[{name:"keccak",padding:y,bits:D,createMethod:ue},{name:"sha3",padding:A,bits:D,createMethod:ue},{name:"shake",padding:d,bits:k,createMethod:_e},{name:"cshake",padding:p,bits:k,createMethod:G},{name:"kmac",padding:p,bits:k,createMethod:E}],f={},g=[],v=0;v<m.length;++v)for(var x=m[v],_=x.bits,S=0;S<_.length;++S){var b=x.name+"_"+_[S];if(g.push(b),f[b]=x.createMethod(_[S],x.padding),x.name!=="sha3"){var M=x.name+_[S];g.push(M),f[M]=f[b]}}function I(N,se,ee){this.blocks=[],this.s=[],this.padding=se,this.outputBits=ee,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(N<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ee>>5,this.extraBytes=(ee&31)>>3;for(var X=0;X<50;++X)this.s[X]=0}I.prototype.update=function(N){if(this.finalized)throw new Error(r);var se,ee=typeof N;if(ee!=="string"){if(ee==="object"){if(N===null)throw new Error(e);if(u&&N.constructor===ArrayBuffer)N=new Uint8Array(N);else if(!Array.isArray(N)&&(!u||!ArrayBuffer.isView(N)))throw new Error(e)}else throw new Error(e);se=!0}for(var X=this.blocks,Q=this.byteCount,R=N.length,Z=this.blockCount,te=0,le=this.s,ie,fe;te<R;){if(this.reset)for(this.reset=!1,X[0]=this.block,ie=1;ie<Z+1;++ie)X[ie]=0;if(se)for(ie=this.start;te<R&&ie<Q;++te)X[ie>>2]|=N[te]<<P[ie++&3];else for(ie=this.start;te<R&&ie<Q;++te)fe=N.charCodeAt(te),fe<128?X[ie>>2]|=fe<<P[ie++&3]:fe<2048?(X[ie>>2]|=(192|fe>>6)<<P[ie++&3],X[ie>>2]|=(128|fe&63)<<P[ie++&3]):fe<55296||fe>=57344?(X[ie>>2]|=(224|fe>>12)<<P[ie++&3],X[ie>>2]|=(128|fe>>6&63)<<P[ie++&3],X[ie>>2]|=(128|fe&63)<<P[ie++&3]):(fe=65536+((fe&1023)<<10|N.charCodeAt(++te)&1023),X[ie>>2]|=(240|fe>>18)<<P[ie++&3],X[ie>>2]|=(128|fe>>12&63)<<P[ie++&3],X[ie>>2]|=(128|fe>>6&63)<<P[ie++&3],X[ie>>2]|=(128|fe&63)<<P[ie++&3]);if(this.lastByteIndex=ie,ie>=Q){for(this.start=ie-Q,this.block=X[Z],ie=0;ie<Z;++ie)le[ie]^=X[ie];ce(le),this.reset=!0}else this.start=ie}return this},I.prototype.encode=function(N,se){var ee=N&255,X=1,Q=[ee];for(N=N>>8,ee=N&255;ee>0;)Q.unshift(ee),N=N>>8,ee=N&255,++X;return se?Q.push(X):Q.unshift(X),this.update(Q),Q.length},I.prototype.encodeString=function(N){var se,ee=typeof N;if(ee!=="string"){if(ee==="object"){if(N===null)throw new Error(e);if(u&&N.constructor===ArrayBuffer)N=new Uint8Array(N);else if(!Array.isArray(N)&&(!u||!ArrayBuffer.isView(N)))throw new Error(e)}else throw new Error(e);se=!0}var X=0,Q=N.length;if(se)X=Q;else for(var R=0;R<N.length;++R){var Z=N.charCodeAt(R);Z<128?X+=1:Z<2048?X+=2:Z<55296||Z>=57344?X+=3:(Z=65536+((Z&1023)<<10|N.charCodeAt(++R)&1023),X+=4)}return X+=this.encode(X*8),this.update(N),X},I.prototype.bytepad=function(N,se){for(var ee=this.encode(se),X=0;X<N.length;++X)ee+=this.encodeString(N[X]);var Q=se-ee%se,R=[];return R.length=Q,this.update(R),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var N=this.blocks,se=this.lastByteIndex,ee=this.blockCount,X=this.s;if(N[se>>2]|=this.padding[se&3],this.lastByteIndex===this.byteCount)for(N[0]=N[ee],se=1;se<ee+1;++se)N[se]=0;for(N[ee-1]|=2147483648,se=0;se<ee;++se)X[se]^=N[se];ce(X)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var N=this.blockCount,se=this.s,ee=this.outputBlocks,X=this.extraBytes,Q=0,R=0,Z="",te;R<ee;){for(Q=0;Q<N&&R<ee;++Q,++R)te=se[Q],Z+=l[te>>4&15]+l[te&15]+l[te>>12&15]+l[te>>8&15]+l[te>>20&15]+l[te>>16&15]+l[te>>28&15]+l[te>>24&15];R%N===0&&(ce(se),Q=0)}return X&&(te=se[Q],Z+=l[te>>4&15]+l[te&15],X>1&&(Z+=l[te>>12&15]+l[te>>8&15]),X>2&&(Z+=l[te>>20&15]+l[te>>16&15])),Z},I.prototype.arrayBuffer=function(){this.finalize();var N=this.blockCount,se=this.s,ee=this.outputBlocks,X=this.extraBytes,Q=0,R=0,Z=this.outputBits>>3,te;X?te=new ArrayBuffer(ee+1<<2):te=new ArrayBuffer(Z);for(var le=new Uint32Array(te);R<ee;){for(Q=0;Q<N&&R<ee;++Q,++R)le[R]=se[Q];R%N===0&&ce(se)}return X&&(le[Q]=se[Q],te=te.slice(0,Z)),te},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var N=this.blockCount,se=this.s,ee=this.outputBlocks,X=this.extraBytes,Q=0,R=0,Z=[],te,le;R<ee;){for(Q=0;Q<N&&R<ee;++Q,++R)te=R<<2,le=se[Q],Z[te]=le&255,Z[te+1]=le>>8&255,Z[te+2]=le>>16&255,Z[te+3]=le>>24&255;R%N===0&&ce(se)}return X&&(te=R<<2,le=se[Q],Z[te]=le&255,X>1&&(Z[te+1]=le>>8&255),X>2&&(Z[te+2]=le>>16&255)),Z};function F(N,se,ee){I.call(this,N,se,ee)}F.prototype=new I,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var ce=function(N){var se,ee,X,Q,R,Z,te,le,ie,fe,ve,Me,Ne,Te,$e,Ie,Le,Ve,ke,ze,He,Ee,Qe,ct,Be,et,rt,Je,pt,ht,ft,Ht,Jt,St,er,Xt,Ot,Bt,Tt,vt,Dt,Lt,bt,$t,jt,nt,Ft,$,W,V,C,Y,U,oe,ge,xe,Re,De,it,Ue,gt,st,tt;for(X=0;X<48;X+=2)Q=N[0]^N[10]^N[20]^N[30]^N[40],R=N[1]^N[11]^N[21]^N[31]^N[41],Z=N[2]^N[12]^N[22]^N[32]^N[42],te=N[3]^N[13]^N[23]^N[33]^N[43],le=N[4]^N[14]^N[24]^N[34]^N[44],ie=N[5]^N[15]^N[25]^N[35]^N[45],fe=N[6]^N[16]^N[26]^N[36]^N[46],ve=N[7]^N[17]^N[27]^N[37]^N[47],Me=N[8]^N[18]^N[28]^N[38]^N[48],Ne=N[9]^N[19]^N[29]^N[39]^N[49],se=Me^(Z<<1|te>>>31),ee=Ne^(te<<1|Z>>>31),N[0]^=se,N[1]^=ee,N[10]^=se,N[11]^=ee,N[20]^=se,N[21]^=ee,N[30]^=se,N[31]^=ee,N[40]^=se,N[41]^=ee,se=Q^(le<<1|ie>>>31),ee=R^(ie<<1|le>>>31),N[2]^=se,N[3]^=ee,N[12]^=se,N[13]^=ee,N[22]^=se,N[23]^=ee,N[32]^=se,N[33]^=ee,N[42]^=se,N[43]^=ee,se=Z^(fe<<1|ve>>>31),ee=te^(ve<<1|fe>>>31),N[4]^=se,N[5]^=ee,N[14]^=se,N[15]^=ee,N[24]^=se,N[25]^=ee,N[34]^=se,N[35]^=ee,N[44]^=se,N[45]^=ee,se=le^(Me<<1|Ne>>>31),ee=ie^(Ne<<1|Me>>>31),N[6]^=se,N[7]^=ee,N[16]^=se,N[17]^=ee,N[26]^=se,N[27]^=ee,N[36]^=se,N[37]^=ee,N[46]^=se,N[47]^=ee,se=fe^(Q<<1|R>>>31),ee=ve^(R<<1|Q>>>31),N[8]^=se,N[9]^=ee,N[18]^=se,N[19]^=ee,N[28]^=se,N[29]^=ee,N[38]^=se,N[39]^=ee,N[48]^=se,N[49]^=ee,Te=N[0],$e=N[1],nt=N[11]<<4|N[10]>>>28,Ft=N[10]<<4|N[11]>>>28,Je=N[20]<<3|N[21]>>>29,pt=N[21]<<3|N[20]>>>29,Ue=N[31]<<9|N[30]>>>23,gt=N[30]<<9|N[31]>>>23,Lt=N[40]<<18|N[41]>>>14,bt=N[41]<<18|N[40]>>>14,St=N[2]<<1|N[3]>>>31,er=N[3]<<1|N[2]>>>31,Ie=N[13]<<12|N[12]>>>20,Le=N[12]<<12|N[13]>>>20,$=N[22]<<10|N[23]>>>22,W=N[23]<<10|N[22]>>>22,ht=N[33]<<13|N[32]>>>19,ft=N[32]<<13|N[33]>>>19,st=N[42]<<2|N[43]>>>30,tt=N[43]<<2|N[42]>>>30,oe=N[5]<<30|N[4]>>>2,ge=N[4]<<30|N[5]>>>2,Xt=N[14]<<6|N[15]>>>26,Ot=N[15]<<6|N[14]>>>26,Ve=N[25]<<11|N[24]>>>21,ke=N[24]<<11|N[25]>>>21,V=N[34]<<15|N[35]>>>17,C=N[35]<<15|N[34]>>>17,Ht=N[45]<<29|N[44]>>>3,Jt=N[44]<<29|N[45]>>>3,ct=N[6]<<28|N[7]>>>4,Be=N[7]<<28|N[6]>>>4,xe=N[17]<<23|N[16]>>>9,Re=N[16]<<23|N[17]>>>9,Bt=N[26]<<25|N[27]>>>7,Tt=N[27]<<25|N[26]>>>7,ze=N[36]<<21|N[37]>>>11,He=N[37]<<21|N[36]>>>11,Y=N[47]<<24|N[46]>>>8,U=N[46]<<24|N[47]>>>8,$t=N[8]<<27|N[9]>>>5,jt=N[9]<<27|N[8]>>>5,et=N[18]<<20|N[19]>>>12,rt=N[19]<<20|N[18]>>>12,De=N[29]<<7|N[28]>>>25,it=N[28]<<7|N[29]>>>25,vt=N[38]<<8|N[39]>>>24,Dt=N[39]<<8|N[38]>>>24,Ee=N[48]<<14|N[49]>>>18,Qe=N[49]<<14|N[48]>>>18,N[0]=Te^~Ie&Ve,N[1]=$e^~Le&ke,N[10]=ct^~et&Je,N[11]=Be^~rt&pt,N[20]=St^~Xt&Bt,N[21]=er^~Ot&Tt,N[30]=$t^~nt&$,N[31]=jt^~Ft&W,N[40]=oe^~xe&De,N[41]=ge^~Re&it,N[2]=Ie^~Ve&ze,N[3]=Le^~ke&He,N[12]=et^~Je&ht,N[13]=rt^~pt&ft,N[22]=Xt^~Bt&vt,N[23]=Ot^~Tt&Dt,N[32]=nt^~$&V,N[33]=Ft^~W&C,N[42]=xe^~De&Ue,N[43]=Re^~it&gt,N[4]=Ve^~ze&Ee,N[5]=ke^~He&Qe,N[14]=Je^~ht&Ht,N[15]=pt^~ft&Jt,N[24]=Bt^~vt&Lt,N[25]=Tt^~Dt&bt,N[34]=$^~V&Y,N[35]=W^~C&U,N[44]=De^~Ue&st,N[45]=it^~gt&tt,N[6]=ze^~Ee&Te,N[7]=He^~Qe&$e,N[16]=ht^~Ht&ct,N[17]=ft^~Jt&Be,N[26]=vt^~Lt&St,N[27]=Dt^~bt&er,N[36]=V^~Y&$t,N[37]=C^~U&jt,N[46]=Ue^~st&oe,N[47]=gt^~tt&ge,N[8]=Ee^~Te&Ie,N[9]=Qe^~$e&Le,N[18]=Ht^~ct&et,N[19]=Jt^~Be&rt,N[28]=Lt^~St&Xt,N[29]=bt^~er&Ot,N[38]=Y^~$t&nt,N[39]=U^~jt&Ft,N[48]=st^~oe&xe,N[49]=tt^~ge&Re,N[0]^=O[X],N[1]^=O[X+1]};if(a)t.exports=f;else for(v=0;v<g.length;++v)i[g[v]]=f[g[v]]})()})(Rx);var dN=Rx.exports;const pN=ji(dN),gN="logger/5.7.0";let Dx=!1,Ox=!1;const vd={debug:1,default:2,info:2,warning:3,error:4,off:5};let Nx=vd.default,ym=null;function mN(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(t){return t.message}return null}const Lx=mN();var wm;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(wm||(wm={}));var ps;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ps||(ps={}));const kx="0123456789abcdef";class Kr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();vd[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Nx>vd[n])&&console.log.apply(console,r)}debug(...e){this._log(Kr.levels.DEBUG,e)}info(...e){this._log(Kr.levels.INFO,e)}warn(...e){this._log(Kr.levels.WARNING,e)}makeError(e,r,n){if(Ox)return this.makeError("censored error",r,{});r||(r=Kr.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(u=>{const l=n[u];try{if(l instanceof Uint8Array){let d="";for(let p=0;p<l.length;p++)d+=kx[l[p]>>4],d+=kx[l[p]&15];i.push(u+"=Uint8Array(0x"+d+")")}else i.push(u+"="+JSON.stringify(l))}catch{i.push(u+"="+JSON.stringify(n[u].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case ps.NUMERIC_FAULT:{o="NUMERIC_FAULT";const u=e;switch(u){case"overflow":case"underflow":case"division-by-zero":o+="-"+u;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case ps.CALL_EXCEPTION:case ps.INSUFFICIENT_FUNDS:case ps.MISSING_NEW:case ps.NONCE_EXPIRED:case ps.REPLACEMENT_UNDERPRICED:case ps.TRANSACTION_REPLACED:case ps.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(u){a[u]=n[u]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,Kr.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){Lx&&this.throwError("platform missing String.prototype.normalize",Kr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Lx})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,Kr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,Kr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,Kr.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,Kr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",Kr.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Kr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Kr.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return ym||(ym=new Kr(gN)),ym}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Kr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Dx){if(!e)return;this.globalLogger().throwError("error censorship permanent",Kr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ox=!!e,Dx=!!r}static setLogLevel(e){const r=vd[e.toLowerCase()];if(r==null){Kr.globalLogger().warn("invalid log level - "+e);return}Nx=r}static from(e){return new Kr(e)}}Kr.errors=ps,Kr.levels=wm;const vN="bytes/5.7.0",on=new Kr(vN);function Bx(t){return!!t.toHexString}function fu(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return fu(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function bN(t){return Ns(t)&&!(t.length%2)||xm(t)}function $x(t){return typeof t=="number"&&t==t&&t%1===0}function xm(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!$x(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!$x(r)||r<0||r>=256)return!1}return!0}function bn(t,e){if(e||(e={}),typeof t=="number"){on.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),fu(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Bx(t)&&(t=t.toHexString()),Ns(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":on.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return fu(new Uint8Array(n))}return xm(t)?fu(new Uint8Array(t)):on.throwArgumentError("invalid arrayify value","value",t)}function yN(t){const e=t.map(i=>bn(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),fu(n)}function wN(t,e){t=bn(t),t.length>e&&on.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),fu(r)}function Ns(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const _m="0123456789abcdef";function Ii(t,e){if(e||(e={}),typeof t=="number"){on.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=_m[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Bx(t))return t.toHexString();if(Ns(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":on.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(xm(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=_m[(i&240)>>4]+_m[i&15]}return r}return on.throwArgumentError("invalid hexlify value","value",t)}function xN(t){if(typeof t!="string")t=Ii(t);else if(!Ns(t)||t.length%2)return null;return(t.length-2)/2}function Fx(t,e,r){return typeof t!="string"?t=Ii(t):(!Ns(t)||t.length%2)&&on.throwArgumentError("invalid hexData","value",t),e=2+2*e,"0x"+t.substring(e)}function lu(t,e){for(typeof t!="string"?t=Ii(t):Ns(t)||on.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&on.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function jx(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(bN(t)){let r=bn(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=Ii(r.slice(0,32)),e.s=Ii(r.slice(32,64))):r.length===65?(e.r=Ii(r.slice(0,32)),e.s=Ii(r.slice(32,64)),e.v=r[64]):on.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:on.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=Ii(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=wN(bn(e._vs),32);e._vs=Ii(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&on.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=Ii(i);e.s==null?e.s=o:e.s!==o&&on.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?on.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&on.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Ns(e.r)?on.throwArgumentError("signature missing or invalid r","signature",t):e.r=lu(e.r,32),e.s==null||!Ns(e.s)?on.throwArgumentError("signature missing or invalid s","signature",t):e.s=lu(e.s,32);const r=bn(e.s);r[0]>=128&&on.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=Ii(r);e._vs&&(Ns(e._vs)||on.throwArgumentError("signature invalid _vs","signature",t),e._vs=lu(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&on.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Em(t){return"0x"+pN.keccak_256(bn(t))}var Sm={exports:{}};Sm.exports,function(t){(function(e,r){function n(m,f){if(!m)throw new Error(f||"Assertion failed")}function i(m,f){m.super_=f;var g=function(){};g.prototype=f.prototype,m.prototype=new g,m.prototype.constructor=m}function s(m,f,g){if(s.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((f==="le"||f==="be")&&(g=f,f=10),this._init(m||0,f||10,g||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=tl.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,g){return f.cmp(g)>0?f:g},s.min=function(f,g){return f.cmp(g)<0?f:g},s.prototype._init=function(f,g,v){if(typeof f=="number")return this._initNumber(f,g,v);if(typeof f=="object")return this._initArray(f,g,v);g==="hex"&&(g=16),n(g===(g|0)&&g>=2&&g<=36),f=f.toString().replace(/\s+/g,"");var x=0;f[0]==="-"&&(x++,this.negative=1),x<f.length&&(g===16?this._parseHex(f,x,v):(this._parseBase(f,g,x),v==="le"&&this._initArray(this.toArray(),g,v)))},s.prototype._initNumber=function(f,g,v){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),g,v)},s.prototype._initArray=function(f,g,v){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var _,S,b=0;if(v==="be")for(x=f.length-1,_=0;x>=0;x-=3)S=f[x]|f[x-1]<<8|f[x-2]<<16,this.words[_]|=S<<b&67108863,this.words[_+1]=S>>>26-b&67108863,b+=24,b>=26&&(b-=26,_++);else if(v==="le")for(x=0,_=0;x<f.length;x+=3)S=f[x]|f[x+1]<<8|f[x+2]<<16,this.words[_]|=S<<b&67108863,this.words[_+1]=S>>>26-b&67108863,b+=24,b>=26&&(b-=26,_++);return this._strip()};function a(m,f){var g=m.charCodeAt(f);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;n(!1,"Invalid character in "+m)}function u(m,f,g){var v=a(m,g);return g-1>=f&&(v|=a(m,g-1)<<4),v}s.prototype._parseHex=function(f,g,v){this.length=Math.ceil((f.length-g)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var _=0,S=0,b;if(v==="be")for(x=f.length-1;x>=g;x-=2)b=u(f,g,x)<<_,this.words[S]|=b&67108863,_>=18?(_-=18,S+=1,this.words[S]|=b>>>26):_+=8;else{var M=f.length-g;for(x=M%2===0?g+1:g;x<f.length;x+=2)b=u(f,g,x)<<_,this.words[S]|=b&67108863,_>=18?(_-=18,S+=1,this.words[S]|=b>>>26):_+=8}this._strip()};function l(m,f,g,v){for(var x=0,_=0,S=Math.min(m.length,g),b=f;b<S;b++){var M=m.charCodeAt(b)-48;x*=v,M>=49?_=M-49+10:M>=17?_=M-17+10:_=M,n(M>=0&&_<v,"Invalid character"),x+=_}return x}s.prototype._parseBase=function(f,g,v){this.words=[0],this.length=1;for(var x=0,_=1;_<=67108863;_*=g)x++;x--,_=_/g|0;for(var S=f.length-v,b=S%x,M=Math.min(S,S-b)+v,I=0,F=v;F<M;F+=x)I=l(f,F,F+x,g),this.imuln(_),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(b!==0){var ce=1;for(I=l(f,F,f.length,g),F=0;F<b;F++)ce*=g;this.imuln(ce),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var g=0;g<this.length;g++)f.words[g]=this.words[g];f.length=this.length,f.negative=this.negative,f.red=this.red};function d(m,f){m.words=f.words,m.length=f.length,m.negative=f.negative,m.red=f.red}if(s.prototype._move=function(f){d(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{s.prototype.inspect=p}else s.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,g){f=f||10,g=g|0||1;var v;if(f===16||f==="hex"){v="";for(var x=0,_=0,S=0;S<this.length;S++){var b=this.words[S],M=((b<<x|_)&16777215).toString(16);_=b>>>24-x&16777215,x+=2,x>=26&&(x-=26,S--),_!==0||S!==this.length-1?v=y[6-M.length]+M+v:v=M+v}for(_!==0&&(v=_.toString(16)+v);v.length%g!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(f===(f|0)&&f>=2&&f<=36){var I=A[f],F=P[f];v="";var ce=this.clone();for(ce.negative=0;!ce.isZero();){var N=ce.modrn(F).toString(f);ce=ce.idivn(F),ce.isZero()?v=N+v:v=y[I-N.length]+N+v}for(this.isZero()&&(v="0"+v);v.length%g!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,g){return this.toArrayLike(o,f,g)}),s.prototype.toArray=function(f,g){return this.toArrayLike(Array,f,g)};var O=function(f,g){return f.allocUnsafe?f.allocUnsafe(g):new f(g)};s.prototype.toArrayLike=function(f,g,v){this._strip();var x=this.byteLength(),_=v||Math.max(1,x);n(x<=_,"byte array longer than desired length"),n(_>0,"Requested array length <= 0");var S=O(f,_),b=g==="le"?"LE":"BE";return this["_toArrayLike"+b](S,x),S},s.prototype._toArrayLikeLE=function(f,g){for(var v=0,x=0,_=0,S=0;_<this.length;_++){var b=this.words[_]<<S|x;f[v++]=b&255,v<f.length&&(f[v++]=b>>8&255),v<f.length&&(f[v++]=b>>16&255),S===6?(v<f.length&&(f[v++]=b>>24&255),x=0,S=0):(x=b>>>24,S+=2)}if(v<f.length)for(f[v++]=x;v<f.length;)f[v++]=0},s.prototype._toArrayLikeBE=function(f,g){for(var v=f.length-1,x=0,_=0,S=0;_<this.length;_++){var b=this.words[_]<<S|x;f[v--]=b&255,v>=0&&(f[v--]=b>>8&255),v>=0&&(f[v--]=b>>16&255),S===6?(v>=0&&(f[v--]=b>>24&255),x=0,S=0):(x=b>>>24,S+=2)}if(v>=0)for(f[v--]=x;v>=0;)f[v--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var g=f,v=0;return g>=4096&&(v+=13,g>>>=13),g>=64&&(v+=7,g>>>=7),g>=8&&(v+=4,g>>>=4),g>=2&&(v+=2,g>>>=2),v+g},s.prototype._zeroBits=function(f){if(f===0)return 26;var g=f,v=0;return g&8191||(v+=13,g>>>=13),g&127||(v+=7,g>>>=7),g&15||(v+=4,g>>>=4),g&3||(v+=2,g>>>=2),g&1||v++,v},s.prototype.bitLength=function(){var f=this.words[this.length-1],g=this._countBits(f);return(this.length-1)*26+g};function D(m){for(var f=new Array(m.bitLength()),g=0;g<f.length;g++){var v=g/26|0,x=g%26;f[g]=m.words[v]>>>x&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,g=0;g<this.length;g++){var v=this._zeroBits(this.words[g]);if(f+=v,v!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var g=0;g<f.length;g++)this.words[g]=this.words[g]|f.words[g];return this._strip()},s.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var g;this.length>f.length?g=f:g=this;for(var v=0;v<g.length;v++)this.words[v]=this.words[v]&f.words[v];return this.length=g.length,this._strip()},s.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var g,v;this.length>f.length?(g=this,v=f):(g=f,v=this);for(var x=0;x<v.length;x++)this.words[x]=g.words[x]^v.words[x];if(this!==g)for(;x<g.length;x++)this.words[x]=g.words[x];return this.length=g.length,this._strip()},s.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var g=Math.ceil(f/26)|0,v=f%26;this._expand(g),v>0&&g--;for(var x=0;x<g;x++)this.words[x]=~this.words[x]&67108863;return v>0&&(this.words[x]=~this.words[x]&67108863>>26-v),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,g){n(typeof f=="number"&&f>=0);var v=f/26|0,x=f%26;return this._expand(v+1),g?this.words[v]=this.words[v]|1<<x:this.words[v]=this.words[v]&~(1<<x),this._strip()},s.prototype.iadd=function(f){var g;if(this.negative!==0&&f.negative===0)return this.negative=0,g=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,g=this.isub(f),f.negative=1,g._normSign();var v,x;this.length>f.length?(v=this,x=f):(v=f,x=this);for(var _=0,S=0;S<x.length;S++)g=(v.words[S]|0)+(x.words[S]|0)+_,this.words[S]=g&67108863,_=g>>>26;for(;_!==0&&S<v.length;S++)g=(v.words[S]|0)+_,this.words[S]=g&67108863,_=g>>>26;if(this.length=v.length,_!==0)this.words[this.length]=_,this.length++;else if(v!==this)for(;S<v.length;S++)this.words[S]=v.words[S];return this},s.prototype.add=function(f){var g;return f.negative!==0&&this.negative===0?(f.negative=0,g=this.sub(f),f.negative^=1,g):f.negative===0&&this.negative!==0?(this.negative=0,g=f.sub(this),this.negative=1,g):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var g=this.iadd(f);return f.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var v=this.cmp(f);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,_;v>0?(x=this,_=f):(x=f,_=this);for(var S=0,b=0;b<_.length;b++)g=(x.words[b]|0)-(_.words[b]|0)+S,S=g>>26,this.words[b]=g&67108863;for(;S!==0&&b<x.length;b++)g=(x.words[b]|0)+S,S=g>>26,this.words[b]=g&67108863;if(S===0&&b<x.length&&x!==this)for(;b<x.length;b++)this.words[b]=x.words[b];return this.length=Math.max(this.length,b),x!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function k(m,f,g){g.negative=f.negative^m.negative;var v=m.length+f.length|0;g.length=v,v=v-1|0;var x=m.words[0]|0,_=f.words[0]|0,S=x*_,b=S&67108863,M=S/67108864|0;g.words[0]=b;for(var I=1;I<v;I++){for(var F=M>>>26,ce=M&67108863,N=Math.min(I,f.length-1),se=Math.max(0,I-m.length+1);se<=N;se++){var ee=I-se|0;x=m.words[ee]|0,_=f.words[se]|0,S=x*_+ce,F+=S/67108864|0,ce=S&67108863}g.words[I]=ce|0,M=F|0}return M!==0?g.words[I]=M|0:g.length--,g._strip()}var B=function(f,g,v){var x=f.words,_=g.words,S=v.words,b=0,M,I,F,ce=x[0]|0,N=ce&8191,se=ce>>>13,ee=x[1]|0,X=ee&8191,Q=ee>>>13,R=x[2]|0,Z=R&8191,te=R>>>13,le=x[3]|0,ie=le&8191,fe=le>>>13,ve=x[4]|0,Me=ve&8191,Ne=ve>>>13,Te=x[5]|0,$e=Te&8191,Ie=Te>>>13,Le=x[6]|0,Ve=Le&8191,ke=Le>>>13,ze=x[7]|0,He=ze&8191,Ee=ze>>>13,Qe=x[8]|0,ct=Qe&8191,Be=Qe>>>13,et=x[9]|0,rt=et&8191,Je=et>>>13,pt=_[0]|0,ht=pt&8191,ft=pt>>>13,Ht=_[1]|0,Jt=Ht&8191,St=Ht>>>13,er=_[2]|0,Xt=er&8191,Ot=er>>>13,Bt=_[3]|0,Tt=Bt&8191,vt=Bt>>>13,Dt=_[4]|0,Lt=Dt&8191,bt=Dt>>>13,$t=_[5]|0,jt=$t&8191,nt=$t>>>13,Ft=_[6]|0,$=Ft&8191,W=Ft>>>13,V=_[7]|0,C=V&8191,Y=V>>>13,U=_[8]|0,oe=U&8191,ge=U>>>13,xe=_[9]|0,Re=xe&8191,De=xe>>>13;v.negative=f.negative^g.negative,v.length=19,M=Math.imul(N,ht),I=Math.imul(N,ft),I=I+Math.imul(se,ht)|0,F=Math.imul(se,ft);var it=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(it>>>26)|0,it&=67108863,M=Math.imul(X,ht),I=Math.imul(X,ft),I=I+Math.imul(Q,ht)|0,F=Math.imul(Q,ft),M=M+Math.imul(N,Jt)|0,I=I+Math.imul(N,St)|0,I=I+Math.imul(se,Jt)|0,F=F+Math.imul(se,St)|0;var Ue=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,M=Math.imul(Z,ht),I=Math.imul(Z,ft),I=I+Math.imul(te,ht)|0,F=Math.imul(te,ft),M=M+Math.imul(X,Jt)|0,I=I+Math.imul(X,St)|0,I=I+Math.imul(Q,Jt)|0,F=F+Math.imul(Q,St)|0,M=M+Math.imul(N,Xt)|0,I=I+Math.imul(N,Ot)|0,I=I+Math.imul(se,Xt)|0,F=F+Math.imul(se,Ot)|0;var gt=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(gt>>>26)|0,gt&=67108863,M=Math.imul(ie,ht),I=Math.imul(ie,ft),I=I+Math.imul(fe,ht)|0,F=Math.imul(fe,ft),M=M+Math.imul(Z,Jt)|0,I=I+Math.imul(Z,St)|0,I=I+Math.imul(te,Jt)|0,F=F+Math.imul(te,St)|0,M=M+Math.imul(X,Xt)|0,I=I+Math.imul(X,Ot)|0,I=I+Math.imul(Q,Xt)|0,F=F+Math.imul(Q,Ot)|0,M=M+Math.imul(N,Tt)|0,I=I+Math.imul(N,vt)|0,I=I+Math.imul(se,Tt)|0,F=F+Math.imul(se,vt)|0;var st=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(st>>>26)|0,st&=67108863,M=Math.imul(Me,ht),I=Math.imul(Me,ft),I=I+Math.imul(Ne,ht)|0,F=Math.imul(Ne,ft),M=M+Math.imul(ie,Jt)|0,I=I+Math.imul(ie,St)|0,I=I+Math.imul(fe,Jt)|0,F=F+Math.imul(fe,St)|0,M=M+Math.imul(Z,Xt)|0,I=I+Math.imul(Z,Ot)|0,I=I+Math.imul(te,Xt)|0,F=F+Math.imul(te,Ot)|0,M=M+Math.imul(X,Tt)|0,I=I+Math.imul(X,vt)|0,I=I+Math.imul(Q,Tt)|0,F=F+Math.imul(Q,vt)|0,M=M+Math.imul(N,Lt)|0,I=I+Math.imul(N,bt)|0,I=I+Math.imul(se,Lt)|0,F=F+Math.imul(se,bt)|0;var tt=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(tt>>>26)|0,tt&=67108863,M=Math.imul($e,ht),I=Math.imul($e,ft),I=I+Math.imul(Ie,ht)|0,F=Math.imul(Ie,ft),M=M+Math.imul(Me,Jt)|0,I=I+Math.imul(Me,St)|0,I=I+Math.imul(Ne,Jt)|0,F=F+Math.imul(Ne,St)|0,M=M+Math.imul(ie,Xt)|0,I=I+Math.imul(ie,Ot)|0,I=I+Math.imul(fe,Xt)|0,F=F+Math.imul(fe,Ot)|0,M=M+Math.imul(Z,Tt)|0,I=I+Math.imul(Z,vt)|0,I=I+Math.imul(te,Tt)|0,F=F+Math.imul(te,vt)|0,M=M+Math.imul(X,Lt)|0,I=I+Math.imul(X,bt)|0,I=I+Math.imul(Q,Lt)|0,F=F+Math.imul(Q,bt)|0,M=M+Math.imul(N,jt)|0,I=I+Math.imul(N,nt)|0,I=I+Math.imul(se,jt)|0,F=F+Math.imul(se,nt)|0;var At=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(At>>>26)|0,At&=67108863,M=Math.imul(Ve,ht),I=Math.imul(Ve,ft),I=I+Math.imul(ke,ht)|0,F=Math.imul(ke,ft),M=M+Math.imul($e,Jt)|0,I=I+Math.imul($e,St)|0,I=I+Math.imul(Ie,Jt)|0,F=F+Math.imul(Ie,St)|0,M=M+Math.imul(Me,Xt)|0,I=I+Math.imul(Me,Ot)|0,I=I+Math.imul(Ne,Xt)|0,F=F+Math.imul(Ne,Ot)|0,M=M+Math.imul(ie,Tt)|0,I=I+Math.imul(ie,vt)|0,I=I+Math.imul(fe,Tt)|0,F=F+Math.imul(fe,vt)|0,M=M+Math.imul(Z,Lt)|0,I=I+Math.imul(Z,bt)|0,I=I+Math.imul(te,Lt)|0,F=F+Math.imul(te,bt)|0,M=M+Math.imul(X,jt)|0,I=I+Math.imul(X,nt)|0,I=I+Math.imul(Q,jt)|0,F=F+Math.imul(Q,nt)|0,M=M+Math.imul(N,$)|0,I=I+Math.imul(N,W)|0,I=I+Math.imul(se,$)|0,F=F+Math.imul(se,W)|0;var Rt=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,M=Math.imul(He,ht),I=Math.imul(He,ft),I=I+Math.imul(Ee,ht)|0,F=Math.imul(Ee,ft),M=M+Math.imul(Ve,Jt)|0,I=I+Math.imul(Ve,St)|0,I=I+Math.imul(ke,Jt)|0,F=F+Math.imul(ke,St)|0,M=M+Math.imul($e,Xt)|0,I=I+Math.imul($e,Ot)|0,I=I+Math.imul(Ie,Xt)|0,F=F+Math.imul(Ie,Ot)|0,M=M+Math.imul(Me,Tt)|0,I=I+Math.imul(Me,vt)|0,I=I+Math.imul(Ne,Tt)|0,F=F+Math.imul(Ne,vt)|0,M=M+Math.imul(ie,Lt)|0,I=I+Math.imul(ie,bt)|0,I=I+Math.imul(fe,Lt)|0,F=F+Math.imul(fe,bt)|0,M=M+Math.imul(Z,jt)|0,I=I+Math.imul(Z,nt)|0,I=I+Math.imul(te,jt)|0,F=F+Math.imul(te,nt)|0,M=M+Math.imul(X,$)|0,I=I+Math.imul(X,W)|0,I=I+Math.imul(Q,$)|0,F=F+Math.imul(Q,W)|0,M=M+Math.imul(N,C)|0,I=I+Math.imul(N,Y)|0,I=I+Math.imul(se,C)|0,F=F+Math.imul(se,Y)|0;var Mt=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,M=Math.imul(ct,ht),I=Math.imul(ct,ft),I=I+Math.imul(Be,ht)|0,F=Math.imul(Be,ft),M=M+Math.imul(He,Jt)|0,I=I+Math.imul(He,St)|0,I=I+Math.imul(Ee,Jt)|0,F=F+Math.imul(Ee,St)|0,M=M+Math.imul(Ve,Xt)|0,I=I+Math.imul(Ve,Ot)|0,I=I+Math.imul(ke,Xt)|0,F=F+Math.imul(ke,Ot)|0,M=M+Math.imul($e,Tt)|0,I=I+Math.imul($e,vt)|0,I=I+Math.imul(Ie,Tt)|0,F=F+Math.imul(Ie,vt)|0,M=M+Math.imul(Me,Lt)|0,I=I+Math.imul(Me,bt)|0,I=I+Math.imul(Ne,Lt)|0,F=F+Math.imul(Ne,bt)|0,M=M+Math.imul(ie,jt)|0,I=I+Math.imul(ie,nt)|0,I=I+Math.imul(fe,jt)|0,F=F+Math.imul(fe,nt)|0,M=M+Math.imul(Z,$)|0,I=I+Math.imul(Z,W)|0,I=I+Math.imul(te,$)|0,F=F+Math.imul(te,W)|0,M=M+Math.imul(X,C)|0,I=I+Math.imul(X,Y)|0,I=I+Math.imul(Q,C)|0,F=F+Math.imul(Q,Y)|0,M=M+Math.imul(N,oe)|0,I=I+Math.imul(N,ge)|0,I=I+Math.imul(se,oe)|0,F=F+Math.imul(se,ge)|0;var Et=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Et>>>26)|0,Et&=67108863,M=Math.imul(rt,ht),I=Math.imul(rt,ft),I=I+Math.imul(Je,ht)|0,F=Math.imul(Je,ft),M=M+Math.imul(ct,Jt)|0,I=I+Math.imul(ct,St)|0,I=I+Math.imul(Be,Jt)|0,F=F+Math.imul(Be,St)|0,M=M+Math.imul(He,Xt)|0,I=I+Math.imul(He,Ot)|0,I=I+Math.imul(Ee,Xt)|0,F=F+Math.imul(Ee,Ot)|0,M=M+Math.imul(Ve,Tt)|0,I=I+Math.imul(Ve,vt)|0,I=I+Math.imul(ke,Tt)|0,F=F+Math.imul(ke,vt)|0,M=M+Math.imul($e,Lt)|0,I=I+Math.imul($e,bt)|0,I=I+Math.imul(Ie,Lt)|0,F=F+Math.imul(Ie,bt)|0,M=M+Math.imul(Me,jt)|0,I=I+Math.imul(Me,nt)|0,I=I+Math.imul(Ne,jt)|0,F=F+Math.imul(Ne,nt)|0,M=M+Math.imul(ie,$)|0,I=I+Math.imul(ie,W)|0,I=I+Math.imul(fe,$)|0,F=F+Math.imul(fe,W)|0,M=M+Math.imul(Z,C)|0,I=I+Math.imul(Z,Y)|0,I=I+Math.imul(te,C)|0,F=F+Math.imul(te,Y)|0,M=M+Math.imul(X,oe)|0,I=I+Math.imul(X,ge)|0,I=I+Math.imul(Q,oe)|0,F=F+Math.imul(Q,ge)|0,M=M+Math.imul(N,Re)|0,I=I+Math.imul(N,De)|0,I=I+Math.imul(se,Re)|0,F=F+Math.imul(se,De)|0;var dt=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(dt>>>26)|0,dt&=67108863,M=Math.imul(rt,Jt),I=Math.imul(rt,St),I=I+Math.imul(Je,Jt)|0,F=Math.imul(Je,St),M=M+Math.imul(ct,Xt)|0,I=I+Math.imul(ct,Ot)|0,I=I+Math.imul(Be,Xt)|0,F=F+Math.imul(Be,Ot)|0,M=M+Math.imul(He,Tt)|0,I=I+Math.imul(He,vt)|0,I=I+Math.imul(Ee,Tt)|0,F=F+Math.imul(Ee,vt)|0,M=M+Math.imul(Ve,Lt)|0,I=I+Math.imul(Ve,bt)|0,I=I+Math.imul(ke,Lt)|0,F=F+Math.imul(ke,bt)|0,M=M+Math.imul($e,jt)|0,I=I+Math.imul($e,nt)|0,I=I+Math.imul(Ie,jt)|0,F=F+Math.imul(Ie,nt)|0,M=M+Math.imul(Me,$)|0,I=I+Math.imul(Me,W)|0,I=I+Math.imul(Ne,$)|0,F=F+Math.imul(Ne,W)|0,M=M+Math.imul(ie,C)|0,I=I+Math.imul(ie,Y)|0,I=I+Math.imul(fe,C)|0,F=F+Math.imul(fe,Y)|0,M=M+Math.imul(Z,oe)|0,I=I+Math.imul(Z,ge)|0,I=I+Math.imul(te,oe)|0,F=F+Math.imul(te,ge)|0,M=M+Math.imul(X,Re)|0,I=I+Math.imul(X,De)|0,I=I+Math.imul(Q,Re)|0,F=F+Math.imul(Q,De)|0;var _t=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(_t>>>26)|0,_t&=67108863,M=Math.imul(rt,Xt),I=Math.imul(rt,Ot),I=I+Math.imul(Je,Xt)|0,F=Math.imul(Je,Ot),M=M+Math.imul(ct,Tt)|0,I=I+Math.imul(ct,vt)|0,I=I+Math.imul(Be,Tt)|0,F=F+Math.imul(Be,vt)|0,M=M+Math.imul(He,Lt)|0,I=I+Math.imul(He,bt)|0,I=I+Math.imul(Ee,Lt)|0,F=F+Math.imul(Ee,bt)|0,M=M+Math.imul(Ve,jt)|0,I=I+Math.imul(Ve,nt)|0,I=I+Math.imul(ke,jt)|0,F=F+Math.imul(ke,nt)|0,M=M+Math.imul($e,$)|0,I=I+Math.imul($e,W)|0,I=I+Math.imul(Ie,$)|0,F=F+Math.imul(Ie,W)|0,M=M+Math.imul(Me,C)|0,I=I+Math.imul(Me,Y)|0,I=I+Math.imul(Ne,C)|0,F=F+Math.imul(Ne,Y)|0,M=M+Math.imul(ie,oe)|0,I=I+Math.imul(ie,ge)|0,I=I+Math.imul(fe,oe)|0,F=F+Math.imul(fe,ge)|0,M=M+Math.imul(Z,Re)|0,I=I+Math.imul(Z,De)|0,I=I+Math.imul(te,Re)|0,F=F+Math.imul(te,De)|0;var ot=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(ot>>>26)|0,ot&=67108863,M=Math.imul(rt,Tt),I=Math.imul(rt,vt),I=I+Math.imul(Je,Tt)|0,F=Math.imul(Je,vt),M=M+Math.imul(ct,Lt)|0,I=I+Math.imul(ct,bt)|0,I=I+Math.imul(Be,Lt)|0,F=F+Math.imul(Be,bt)|0,M=M+Math.imul(He,jt)|0,I=I+Math.imul(He,nt)|0,I=I+Math.imul(Ee,jt)|0,F=F+Math.imul(Ee,nt)|0,M=M+Math.imul(Ve,$)|0,I=I+Math.imul(Ve,W)|0,I=I+Math.imul(ke,$)|0,F=F+Math.imul(ke,W)|0,M=M+Math.imul($e,C)|0,I=I+Math.imul($e,Y)|0,I=I+Math.imul(Ie,C)|0,F=F+Math.imul(Ie,Y)|0,M=M+Math.imul(Me,oe)|0,I=I+Math.imul(Me,ge)|0,I=I+Math.imul(Ne,oe)|0,F=F+Math.imul(Ne,ge)|0,M=M+Math.imul(ie,Re)|0,I=I+Math.imul(ie,De)|0,I=I+Math.imul(fe,Re)|0,F=F+Math.imul(fe,De)|0;var wt=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(wt>>>26)|0,wt&=67108863,M=Math.imul(rt,Lt),I=Math.imul(rt,bt),I=I+Math.imul(Je,Lt)|0,F=Math.imul(Je,bt),M=M+Math.imul(ct,jt)|0,I=I+Math.imul(ct,nt)|0,I=I+Math.imul(Be,jt)|0,F=F+Math.imul(Be,nt)|0,M=M+Math.imul(He,$)|0,I=I+Math.imul(He,W)|0,I=I+Math.imul(Ee,$)|0,F=F+Math.imul(Ee,W)|0,M=M+Math.imul(Ve,C)|0,I=I+Math.imul(Ve,Y)|0,I=I+Math.imul(ke,C)|0,F=F+Math.imul(ke,Y)|0,M=M+Math.imul($e,oe)|0,I=I+Math.imul($e,ge)|0,I=I+Math.imul(Ie,oe)|0,F=F+Math.imul(Ie,ge)|0,M=M+Math.imul(Me,Re)|0,I=I+Math.imul(Me,De)|0,I=I+Math.imul(Ne,Re)|0,F=F+Math.imul(Ne,De)|0;var lt=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(lt>>>26)|0,lt&=67108863,M=Math.imul(rt,jt),I=Math.imul(rt,nt),I=I+Math.imul(Je,jt)|0,F=Math.imul(Je,nt),M=M+Math.imul(ct,$)|0,I=I+Math.imul(ct,W)|0,I=I+Math.imul(Be,$)|0,F=F+Math.imul(Be,W)|0,M=M+Math.imul(He,C)|0,I=I+Math.imul(He,Y)|0,I=I+Math.imul(Ee,C)|0,F=F+Math.imul(Ee,Y)|0,M=M+Math.imul(Ve,oe)|0,I=I+Math.imul(Ve,ge)|0,I=I+Math.imul(ke,oe)|0,F=F+Math.imul(ke,ge)|0,M=M+Math.imul($e,Re)|0,I=I+Math.imul($e,De)|0,I=I+Math.imul(Ie,Re)|0,F=F+Math.imul(Ie,De)|0;var at=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(at>>>26)|0,at&=67108863,M=Math.imul(rt,$),I=Math.imul(rt,W),I=I+Math.imul(Je,$)|0,F=Math.imul(Je,W),M=M+Math.imul(ct,C)|0,I=I+Math.imul(ct,Y)|0,I=I+Math.imul(Be,C)|0,F=F+Math.imul(Be,Y)|0,M=M+Math.imul(He,oe)|0,I=I+Math.imul(He,ge)|0,I=I+Math.imul(Ee,oe)|0,F=F+Math.imul(Ee,ge)|0,M=M+Math.imul(Ve,Re)|0,I=I+Math.imul(Ve,De)|0,I=I+Math.imul(ke,Re)|0,F=F+Math.imul(ke,De)|0;var Ae=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,M=Math.imul(rt,C),I=Math.imul(rt,Y),I=I+Math.imul(Je,C)|0,F=Math.imul(Je,Y),M=M+Math.imul(ct,oe)|0,I=I+Math.imul(ct,ge)|0,I=I+Math.imul(Be,oe)|0,F=F+Math.imul(Be,ge)|0,M=M+Math.imul(He,Re)|0,I=I+Math.imul(He,De)|0,I=I+Math.imul(Ee,Re)|0,F=F+Math.imul(Ee,De)|0;var Pe=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,M=Math.imul(rt,oe),I=Math.imul(rt,ge),I=I+Math.imul(Je,oe)|0,F=Math.imul(Je,ge),M=M+Math.imul(ct,Re)|0,I=I+Math.imul(ct,De)|0,I=I+Math.imul(Be,Re)|0,F=F+Math.imul(Be,De)|0;var Ge=(b+M|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,M=Math.imul(rt,Re),I=Math.imul(rt,De),I=I+Math.imul(Je,Re)|0,F=Math.imul(Je,De);var je=(b+M|0)+((I&8191)<<13)|0;return b=(F+(I>>>13)|0)+(je>>>26)|0,je&=67108863,S[0]=it,S[1]=Ue,S[2]=gt,S[3]=st,S[4]=tt,S[5]=At,S[6]=Rt,S[7]=Mt,S[8]=Et,S[9]=dt,S[10]=_t,S[11]=ot,S[12]=wt,S[13]=lt,S[14]=at,S[15]=Ae,S[16]=Pe,S[17]=Ge,S[18]=je,b!==0&&(S[19]=b,v.length++),v};Math.imul||(B=k);function q(m,f,g){g.negative=f.negative^m.negative,g.length=m.length+f.length;for(var v=0,x=0,_=0;_<g.length-1;_++){var S=x;x=0;for(var b=v&67108863,M=Math.min(_,f.length-1),I=Math.max(0,_-m.length+1);I<=M;I++){var F=_-I,ce=m.words[F]|0,N=f.words[I]|0,se=ce*N,ee=se&67108863;S=S+(se/67108864|0)|0,ee=ee+b|0,b=ee&67108863,S=S+(ee>>>26)|0,x+=S>>>26,S&=67108863}g.words[_]=b,v=S,S=x}return v!==0?g.words[_]=v:g.length--,g._strip()}function j(m,f,g){return q(m,f,g)}s.prototype.mulTo=function(f,g){var v,x=this.length+f.length;return this.length===10&&f.length===10?v=B(this,f,g):x<63?v=k(this,f,g):x<1024?v=q(this,f,g):v=j(this,f,g),v},s.prototype.mul=function(f){var g=new s(null);return g.words=new Array(this.length+f.length),this.mulTo(f,g)},s.prototype.mulf=function(f){var g=new s(null);return g.words=new Array(this.length+f.length),j(this,f,g)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var g=f<0;g&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var v=0,x=0;x<this.length;x++){var _=(this.words[x]|0)*f,S=(_&67108863)+(v&67108863);v>>=26,v+=_/67108864|0,v+=S>>>26,this.words[x]=S&67108863}return v!==0&&(this.words[x]=v,this.length++),g?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var g=D(f);if(g.length===0)return new s(1);for(var v=this,x=0;x<g.length&&g[x]===0;x++,v=v.sqr());if(++x<g.length)for(var _=v.sqr();x<g.length;x++,_=_.sqr())g[x]!==0&&(v=v.mul(_));return v},s.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var g=f%26,v=(f-g)/26,x=67108863>>>26-g<<26-g,_;if(g!==0){var S=0;for(_=0;_<this.length;_++){var b=this.words[_]&x,M=(this.words[_]|0)-b<<g;this.words[_]=M|S,S=b>>>26-g}S&&(this.words[_]=S,this.length++)}if(v!==0){for(_=this.length-1;_>=0;_--)this.words[_+v]=this.words[_];for(_=0;_<v;_++)this.words[_]=0;this.length+=v}return this._strip()},s.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,g,v){n(typeof f=="number"&&f>=0);var x;g?x=(g-g%26)/26:x=0;var _=f%26,S=Math.min((f-_)/26,this.length),b=67108863^67108863>>>_<<_,M=v;if(x-=S,x=Math.max(0,x),M){for(var I=0;I<S;I++)M.words[I]=this.words[I];M.length=S}if(S!==0)if(this.length>S)for(this.length-=S,I=0;I<this.length;I++)this.words[I]=this.words[I+S];else this.words[0]=0,this.length=1;var F=0;for(I=this.length-1;I>=0&&(F!==0||I>=x);I--){var ce=this.words[I]|0;this.words[I]=F<<26-_|ce>>>_,F=ce&b}return M&&F!==0&&(M.words[M.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,g,v){return n(this.negative===0),this.iushrn(f,g,v)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var g=f%26,v=(f-g)/26,x=1<<g;if(this.length<=v)return!1;var _=this.words[v];return!!(_&x)},s.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var g=f%26,v=(f-g)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(g!==0&&v++,this.length=Math.min(v,this.length),g!==0){var x=67108863^67108863>>>g<<g;this.words[this.length-1]&=x}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},s.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,g,v){var x=f.length+v,_;this._expand(x);var S,b=0;for(_=0;_<f.length;_++){S=(this.words[_+v]|0)+b;var M=(f.words[_]|0)*g;S-=M&67108863,b=(S>>26)-(M/67108864|0),this.words[_+v]=S&67108863}for(;_<this.length-v;_++)S=(this.words[_+v]|0)+b,b=S>>26,this.words[_+v]=S&67108863;if(b===0)return this._strip();for(n(b===-1),b=0,_=0;_<this.length;_++)S=-(this.words[_]|0)+b,b=S>>26,this.words[_]=S&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,g){var v=this.length-f.length,x=this.clone(),_=f,S=_.words[_.length-1]|0,b=this._countBits(S);v=26-b,v!==0&&(_=_.ushln(v),x.iushln(v),S=_.words[_.length-1]|0);var M=x.length-_.length,I;if(g!=="mod"){I=new s(null),I.length=M+1,I.words=new Array(I.length);for(var F=0;F<I.length;F++)I.words[F]=0}var ce=x.clone()._ishlnsubmul(_,1,M);ce.negative===0&&(x=ce,I&&(I.words[M]=1));for(var N=M-1;N>=0;N--){var se=(x.words[_.length+N]|0)*67108864+(x.words[_.length+N-1]|0);for(se=Math.min(se/S|0,67108863),x._ishlnsubmul(_,se,N);x.negative!==0;)se--,x.negative=0,x._ishlnsubmul(_,1,N),x.isZero()||(x.negative^=1);I&&(I.words[N]=se)}return I&&I._strip(),x._strip(),g!=="div"&&v!==0&&x.iushrn(v),{div:I||null,mod:x}},s.prototype.divmod=function(f,g,v){if(n(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var x,_,S;return this.negative!==0&&f.negative===0?(S=this.neg().divmod(f,g),g!=="mod"&&(x=S.div.neg()),g!=="div"&&(_=S.mod.neg(),v&&_.negative!==0&&_.iadd(f)),{div:x,mod:_}):this.negative===0&&f.negative!==0?(S=this.divmod(f.neg(),g),g!=="mod"&&(x=S.div.neg()),{div:x,mod:S.mod}):this.negative&f.negative?(S=this.neg().divmod(f.neg(),g),g!=="div"&&(_=S.mod.neg(),v&&_.negative!==0&&_.isub(f)),{div:S.div,mod:_}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?g==="div"?{div:this.divn(f.words[0]),mod:null}:g==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,g)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var g=this.divmod(f);if(g.mod.isZero())return g.div;var v=g.div.negative!==0?g.mod.isub(f):g.mod,x=f.ushrn(1),_=f.andln(1),S=v.cmp(x);return S<0||_===1&&S===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},s.prototype.modrn=function(f){var g=f<0;g&&(f=-f),n(f<=67108863);for(var v=(1<<26)%f,x=0,_=this.length-1;_>=0;_--)x=(v*x+(this.words[_]|0))%f;return g?-x:x},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var g=f<0;g&&(f=-f),n(f<=67108863);for(var v=0,x=this.length-1;x>=0;x--){var _=(this.words[x]|0)+v*67108864;this.words[x]=_/f|0,v=_%f}return this._strip(),g?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var g=this,v=f.clone();g.negative!==0?g=g.umod(f):g=g.clone();for(var x=new s(1),_=new s(0),S=new s(0),b=new s(1),M=0;g.isEven()&&v.isEven();)g.iushrn(1),v.iushrn(1),++M;for(var I=v.clone(),F=g.clone();!g.isZero();){for(var ce=0,N=1;!(g.words[0]&N)&&ce<26;++ce,N<<=1);if(ce>0)for(g.iushrn(ce);ce-- >0;)(x.isOdd()||_.isOdd())&&(x.iadd(I),_.isub(F)),x.iushrn(1),_.iushrn(1);for(var se=0,ee=1;!(v.words[0]&ee)&&se<26;++se,ee<<=1);if(se>0)for(v.iushrn(se);se-- >0;)(S.isOdd()||b.isOdd())&&(S.iadd(I),b.isub(F)),S.iushrn(1),b.iushrn(1);g.cmp(v)>=0?(g.isub(v),x.isub(S),_.isub(b)):(v.isub(g),S.isub(x),b.isub(_))}return{a:S,b,gcd:v.iushln(M)}},s.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var g=this,v=f.clone();g.negative!==0?g=g.umod(f):g=g.clone();for(var x=new s(1),_=new s(0),S=v.clone();g.cmpn(1)>0&&v.cmpn(1)>0;){for(var b=0,M=1;!(g.words[0]&M)&&b<26;++b,M<<=1);if(b>0)for(g.iushrn(b);b-- >0;)x.isOdd()&&x.iadd(S),x.iushrn(1);for(var I=0,F=1;!(v.words[0]&F)&&I<26;++I,F<<=1);if(I>0)for(v.iushrn(I);I-- >0;)_.isOdd()&&_.iadd(S),_.iushrn(1);g.cmp(v)>=0?(g.isub(v),x.isub(_)):(v.isub(g),_.isub(x))}var ce;return g.cmpn(1)===0?ce=x:ce=_,ce.cmpn(0)<0&&ce.iadd(f),ce},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var g=this.clone(),v=f.clone();g.negative=0,v.negative=0;for(var x=0;g.isEven()&&v.isEven();x++)g.iushrn(1),v.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;v.isEven();)v.iushrn(1);var _=g.cmp(v);if(_<0){var S=g;g=v,v=S}else if(_===0||v.cmpn(1)===0)break;g.isub(v)}while(!0);return v.iushln(x)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){n(typeof f=="number");var g=f%26,v=(f-g)/26,x=1<<g;if(this.length<=v)return this._expand(v+1),this.words[v]|=x,this;for(var _=x,S=v;_!==0&&S<this.length;S++){var b=this.words[S]|0;b+=_,_=b>>>26,b&=67108863,this.words[S]=b}return _!==0&&(this.words[S]=_,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var g=f<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var v;if(this.length>1)v=1;else{g&&(f=-f),n(f<=67108863,"Number is too big");var x=this.words[0]|0;v=x===f?0:x<f?-1:1}return this.negative!==0?-v|0:v},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var g=this.ucmp(f);return this.negative!==0?-g|0:g},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var g=0,v=this.length-1;v>=0;v--){var x=this.words[v]|0,_=f.words[v]|0;if(x!==_){x<_?g=-1:x>_&&(g=1);break}}return g},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new G(f)},s.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var H={k256:null,p224:null,p192:null,p25519:null};function J(m,f){this.name=m,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}J.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},J.prototype.ireduce=function(f){var g=f,v;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),v=g.bitLength();while(v>this.n);var x=v<this.n?-1:g.ucmp(this.p);return x===0?(g.words[0]=0,g.length=1):x>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},J.prototype.split=function(f,g){f.iushrn(this.n,0,g)},J.prototype.imulK=function(f){return f.imul(this.k)};function T(){J.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(T,J),T.prototype.split=function(f,g){for(var v=4194303,x=Math.min(f.length,9),_=0;_<x;_++)g.words[_]=f.words[_];if(g.length=x,f.length<=9){f.words[0]=0,f.length=1;return}var S=f.words[9];for(g.words[g.length++]=S&v,_=10;_<f.length;_++){var b=f.words[_]|0;f.words[_-10]=(b&v)<<4|S>>>22,S=b}S>>>=22,f.words[_-10]=S,S===0&&f.length>10?f.length-=10:f.length-=9},T.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var g=0,v=0;v<f.length;v++){var x=f.words[v]|0;g+=x*977,f.words[v]=g&67108863,g=x*64+(g/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function z(){J.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,J);function ue(){J.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ue,J);function _e(){J.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(_e,J),_e.prototype.imulK=function(f){for(var g=0,v=0;v<f.length;v++){var x=(f.words[v]|0)*19+g,_=x&67108863;x>>>=26,f.words[v]=_,g=x}return g!==0&&(f.words[f.length++]=g),f},s._prime=function(f){if(H[f])return H[f];var g;if(f==="k256")g=new T;else if(f==="p224")g=new z;else if(f==="p192")g=new ue;else if(f==="p25519")g=new _e;else throw new Error("Unknown prime "+f);return H[f]=g,g};function G(m){if(typeof m=="string"){var f=s._prime(m);this.m=f.p,this.prime=f}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}G.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},G.prototype._verify2=function(f,g){n((f.negative|g.negative)===0,"red works only with positives"),n(f.red&&f.red===g.red,"red works only with red numbers")},G.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(d(f,f.umod(this.m)._forceRed(this)),f)},G.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},G.prototype.add=function(f,g){this._verify2(f,g);var v=f.add(g);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},G.prototype.iadd=function(f,g){this._verify2(f,g);var v=f.iadd(g);return v.cmp(this.m)>=0&&v.isub(this.m),v},G.prototype.sub=function(f,g){this._verify2(f,g);var v=f.sub(g);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},G.prototype.isub=function(f,g){this._verify2(f,g);var v=f.isub(g);return v.cmpn(0)<0&&v.iadd(this.m),v},G.prototype.shl=function(f,g){return this._verify1(f),this.imod(f.ushln(g))},G.prototype.imul=function(f,g){return this._verify2(f,g),this.imod(f.imul(g))},G.prototype.mul=function(f,g){return this._verify2(f,g),this.imod(f.mul(g))},G.prototype.isqr=function(f){return this.imul(f,f.clone())},G.prototype.sqr=function(f){return this.mul(f,f)},G.prototype.sqrt=function(f){if(f.isZero())return f.clone();var g=this.m.andln(3);if(n(g%2===1),g===3){var v=this.m.add(new s(1)).iushrn(2);return this.pow(f,v)}for(var x=this.m.subn(1),_=0;!x.isZero()&&x.andln(1)===0;)_++,x.iushrn(1);n(!x.isZero());var S=new s(1).toRed(this),b=S.redNeg(),M=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,M).cmp(b)!==0;)I.redIAdd(b);for(var F=this.pow(I,x),ce=this.pow(f,x.addn(1).iushrn(1)),N=this.pow(f,x),se=_;N.cmp(S)!==0;){for(var ee=N,X=0;ee.cmp(S)!==0;X++)ee=ee.redSqr();n(X<se);var Q=this.pow(F,new s(1).iushln(se-X-1));ce=ce.redMul(Q),F=Q.redSqr(),N=N.redMul(F),se=X}return ce},G.prototype.invm=function(f){var g=f._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},G.prototype.pow=function(f,g){if(g.isZero())return new s(1).toRed(this);if(g.cmpn(1)===0)return f.clone();var v=4,x=new Array(1<<v);x[0]=new s(1).toRed(this),x[1]=f;for(var _=2;_<x.length;_++)x[_]=this.mul(x[_-1],f);var S=x[0],b=0,M=0,I=g.bitLength()%26;for(I===0&&(I=26),_=g.length-1;_>=0;_--){for(var F=g.words[_],ce=I-1;ce>=0;ce--){var N=F>>ce&1;if(S!==x[0]&&(S=this.sqr(S)),N===0&&b===0){M=0;continue}b<<=1,b|=N,M++,!(M!==v&&(_!==0||ce!==0))&&(S=this.mul(S,x[b]),M=0,b=0)}I=26}return S},G.prototype.convertTo=function(f){var g=f.umod(this.m);return g===f?g.clone():g},G.prototype.convertFrom=function(f){var g=f.clone();return g.red=null,g},s.mont=function(f){return new E(f)};function E(m){G.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(E,G),E.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},E.prototype.convertFrom=function(f){var g=this.imod(f.mul(this.rinv));return g.red=null,g},E.prototype.imul=function(f,g){if(f.isZero()||g.isZero())return f.words[0]=0,f.length=1,f;var v=f.imul(g),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=v.isub(x).iushrn(this.shift),S=_;return _.cmp(this.m)>=0?S=_.isub(this.m):_.cmpn(0)<0&&(S=_.iadd(this.m)),S._forceRed(this)},E.prototype.mul=function(f,g){if(f.isZero()||g.isZero())return new s(0)._forceRed(this);var v=f.mul(g),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=v.isub(x).iushrn(this.shift),S=_;return _.cmp(this.m)>=0?S=_.isub(this.m):_.cmpn(0)<0&&(S=_.iadd(this.m)),S._forceRed(this)},E.prototype.invm=function(f){var g=this.imod(f._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,nn)}(Sm);var _N=Sm.exports;const rr=ji(_N);var EN=rr.BN;function SN(t){return new EN(t,36).toString(16)}const AN="strings/5.7.0",PN=new Kr(AN);var bd;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(bd||(bd={}));var Ux;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Ux||(Ux={}));function Am(t,e=bd.current){e!=bd.current&&(PN.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return bn(r)}const MN=`Ethereum Signed Message:
`;function qx(t){return typeof t=="string"&&(t=Am(t)),Em(yN([Am(MN),Am(String(t.length)),t]))}const IN="address/5.7.0",sl=new Kr(IN);function zx(t){Ns(t,20)||sl.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=bn(Em(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const CN=9007199254740991;function TN(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Pm={};for(let t=0;t<10;t++)Pm[String(t)]=String(t);for(let t=0;t<26;t++)Pm[String.fromCharCode(65+t)]=String(10+t);const Hx=Math.floor(TN(CN));function RN(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Pm[n]).join("");for(;e.length>=Hx;){let n=e.substring(0,Hx);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function DN(t){let e=null;if(typeof t!="string"&&sl.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=zx(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&sl.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==RN(t)&&sl.throwArgumentError("bad icap checksum","address",t),e=SN(t.substring(4));e.length<40;)e="0"+e;e=zx("0x"+e)}else sl.throwArgumentError("invalid address","address",t);return e}function ol(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}var al={},yr={},Ga=Wx;function Wx(t,e){if(!t)throw new Error(e||"Assertion failed")}Wx.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Mm={exports:{}};typeof Object.create=="function"?Mm.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Mm.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var yd=Mm.exports,ON=Ga,NN=yd;yr.inherits=NN;function LN(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function kN(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):LN(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}yr.toArray=kN;function BN(t){for(var e="",r=0;r<t.length;r++)e+=Vx(t[r].toString(16));return e}yr.toHex=BN;function Kx(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}yr.htonl=Kx;function $N(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Kx(i)),r+=Gx(i.toString(16))}return r}yr.toHex32=$N;function Vx(t){return t.length===1?"0"+t:t}yr.zero2=Vx;function Gx(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}yr.zero8=Gx;function FN(t,e,r,n){var i=r-e;ON(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var u;n==="big"?u=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:u=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=u>>>0}return s}yr.join32=FN;function jN(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}yr.split32=jN;function UN(t,e){return t>>>e|t<<32-e}yr.rotr32=UN;function qN(t,e){return t<<e|t>>>32-e}yr.rotl32=qN;function zN(t,e){return t+e>>>0}yr.sum32=zN;function HN(t,e,r){return t+e+r>>>0}yr.sum32_3=HN;function WN(t,e,r,n){return t+e+r+n>>>0}yr.sum32_4=WN;function KN(t,e,r,n,i){return t+e+r+n+i>>>0}yr.sum32_5=KN;function VN(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}yr.sum64=VN;function GN(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}yr.sum64_hi=GN;function YN(t,e,r,n){var i=e+n;return i>>>0}yr.sum64_lo=YN;function JN(t,e,r,n,i,s,o,a){var u=0,l=e;l=l+n>>>0,u+=l<e?1:0,l=l+s>>>0,u+=l<s?1:0,l=l+a>>>0,u+=l<a?1:0;var d=t+r+i+o+u;return d>>>0}yr.sum64_4_hi=JN;function XN(t,e,r,n,i,s,o,a){var u=e+n+s+a;return u>>>0}yr.sum64_4_lo=XN;function ZN(t,e,r,n,i,s,o,a,u,l){var d=0,p=e;p=p+n>>>0,d+=p<e?1:0,p=p+s>>>0,d+=p<s?1:0,p=p+a>>>0,d+=p<a?1:0,p=p+l>>>0,d+=p<l?1:0;var y=t+r+i+o+u+d;return y>>>0}yr.sum64_5_hi=ZN;function QN(t,e,r,n,i,s,o,a,u,l){var d=e+n+s+a+l;return d>>>0}yr.sum64_5_lo=QN;function eL(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}yr.rotr64_hi=eL;function tL(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}yr.rotr64_lo=tL;function rL(t,e,r){return t>>>r}yr.shr64_hi=rL;function nL(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}yr.shr64_lo=nL;var hu={},Yx=yr,iL=Ga;function wd(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}hu.BlockHash=wd,wd.prototype.update=function(e,r){if(e=Yx.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=Yx.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},wd.prototype.digest=function(e){return this.update(this._pad()),iL(this.pending===null),this._digest(e)},wd.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var du={},Ls={},sL=yr,ks=sL.rotr32;function oL(t,e,r,n){if(t===0)return Jx(e,r,n);if(t===1||t===3)return Zx(e,r,n);if(t===2)return Xx(e,r,n)}Ls.ft_1=oL;function Jx(t,e,r){return t&e^~t&r}Ls.ch32=Jx;function Xx(t,e,r){return t&e^t&r^e&r}Ls.maj32=Xx;function Zx(t,e,r){return t^e^r}Ls.p32=Zx;function aL(t){return ks(t,2)^ks(t,13)^ks(t,22)}Ls.s0_256=aL;function cL(t){return ks(t,6)^ks(t,11)^ks(t,25)}Ls.s1_256=cL;function uL(t){return ks(t,7)^ks(t,18)^t>>>3}Ls.g0_256=uL;function fL(t){return ks(t,17)^ks(t,19)^t>>>10}Ls.g1_256=fL;var pu=yr,lL=hu,hL=Ls,Im=pu.rotl32,cl=pu.sum32,dL=pu.sum32_5,pL=hL.ft_1,Qx=lL.BlockHash,gL=[1518500249,1859775393,2400959708,3395469782];function Bs(){if(!(this instanceof Bs))return new Bs;Qx.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}pu.inherits(Bs,Qx);var mL=Bs;Bs.blockSize=512,Bs.outSize=160,Bs.hmacStrength=80,Bs.padLength=64,Bs.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Im(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],u=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var d=~~(i/20),p=dL(Im(s,5),pL(d,o,a,u),l,n[i],gL[d]);l=u,u=a,a=Im(o,30),o=s,s=p}this.h[0]=cl(this.h[0],s),this.h[1]=cl(this.h[1],o),this.h[2]=cl(this.h[2],a),this.h[3]=cl(this.h[3],u),this.h[4]=cl(this.h[4],l)},Bs.prototype._digest=function(e){return e==="hex"?pu.toHex32(this.h,"big"):pu.split32(this.h,"big")};var gu=yr,vL=hu,mu=Ls,bL=Ga,gs=gu.sum32,yL=gu.sum32_4,wL=gu.sum32_5,xL=mu.ch32,_L=mu.maj32,EL=mu.s0_256,SL=mu.s1_256,AL=mu.g0_256,PL=mu.g1_256,e3=vL.BlockHash,ML=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function $s(){if(!(this instanceof $s))return new $s;e3.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ML,this.W=new Array(64)}gu.inherits($s,e3);var t3=$s;$s.blockSize=512,$s.outSize=256,$s.hmacStrength=192,$s.padLength=64,$s.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=yL(PL(n[i-2]),n[i-7],AL(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],u=this.h[3],l=this.h[4],d=this.h[5],p=this.h[6],y=this.h[7];for(bL(this.k.length===n.length),i=0;i<n.length;i++){var A=wL(y,SL(l),xL(l,d,p),this.k[i],n[i]),P=gs(EL(s),_L(s,o,a));y=p,p=d,d=l,l=gs(u,A),u=a,a=o,o=s,s=gs(A,P)}this.h[0]=gs(this.h[0],s),this.h[1]=gs(this.h[1],o),this.h[2]=gs(this.h[2],a),this.h[3]=gs(this.h[3],u),this.h[4]=gs(this.h[4],l),this.h[5]=gs(this.h[5],d),this.h[6]=gs(this.h[6],p),this.h[7]=gs(this.h[7],y)},$s.prototype._digest=function(e){return e==="hex"?gu.toHex32(this.h,"big"):gu.split32(this.h,"big")};var Cm=yr,r3=t3;function bo(){if(!(this instanceof bo))return new bo;r3.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Cm.inherits(bo,r3);var IL=bo;bo.blockSize=512,bo.outSize=224,bo.hmacStrength=192,bo.padLength=64,bo.prototype._digest=function(e){return e==="hex"?Cm.toHex32(this.h.slice(0,7),"big"):Cm.split32(this.h.slice(0,7),"big")};var mi=yr,CL=hu,TL=Ga,Fs=mi.rotr64_hi,js=mi.rotr64_lo,n3=mi.shr64_hi,i3=mi.shr64_lo,ra=mi.sum64,Tm=mi.sum64_hi,Rm=mi.sum64_lo,RL=mi.sum64_4_hi,DL=mi.sum64_4_lo,OL=mi.sum64_5_hi,NL=mi.sum64_5_lo,s3=CL.BlockHash,LL=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ms(){if(!(this instanceof ms))return new ms;s3.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=LL,this.W=new Array(160)}mi.inherits(ms,s3);var o3=ms;ms.blockSize=1024,ms.outSize=512,ms.hmacStrength=192,ms.padLength=128,ms.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=KL(n[i-4],n[i-3]),o=VL(n[i-4],n[i-3]),a=n[i-14],u=n[i-13],l=HL(n[i-30],n[i-29]),d=WL(n[i-30],n[i-29]),p=n[i-32],y=n[i-31];n[i]=RL(s,o,a,u,l,d,p,y),n[i+1]=DL(s,o,a,u,l,d,p,y)}},ms.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4],l=this.h[5],d=this.h[6],p=this.h[7],y=this.h[8],A=this.h[9],P=this.h[10],O=this.h[11],D=this.h[12],k=this.h[13],B=this.h[14],q=this.h[15];TL(this.k.length===n.length);for(var j=0;j<n.length;j+=2){var H=B,J=q,T=qL(y,A),z=zL(y,A),ue=kL(y,A,P,O,D),_e=BL(y,A,P,O,D,k),G=this.k[j],E=this.k[j+1],m=n[j],f=n[j+1],g=OL(H,J,T,z,ue,_e,G,E,m,f),v=NL(H,J,T,z,ue,_e,G,E,m,f);H=jL(i,s),J=UL(i,s),T=$L(i,s,o,a,u),z=FL(i,s,o,a,u,l);var x=Tm(H,J,T,z),_=Rm(H,J,T,z);B=D,q=k,D=P,k=O,P=y,O=A,y=Tm(d,p,g,v),A=Rm(p,p,g,v),d=u,p=l,u=o,l=a,o=i,a=s,i=Tm(g,v,x,_),s=Rm(g,v,x,_)}ra(this.h,0,i,s),ra(this.h,2,o,a),ra(this.h,4,u,l),ra(this.h,6,d,p),ra(this.h,8,y,A),ra(this.h,10,P,O),ra(this.h,12,D,k),ra(this.h,14,B,q)},ms.prototype._digest=function(e){return e==="hex"?mi.toHex32(this.h,"big"):mi.split32(this.h,"big")};function kL(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function BL(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function $L(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function FL(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function jL(t,e){var r=Fs(t,e,28),n=Fs(e,t,2),i=Fs(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function UL(t,e){var r=js(t,e,28),n=js(e,t,2),i=js(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function qL(t,e){var r=Fs(t,e,14),n=Fs(t,e,18),i=Fs(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function zL(t,e){var r=js(t,e,14),n=js(t,e,18),i=js(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function HL(t,e){var r=Fs(t,e,1),n=Fs(t,e,8),i=n3(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function WL(t,e){var r=js(t,e,1),n=js(t,e,8),i=i3(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function KL(t,e){var r=Fs(t,e,19),n=Fs(e,t,29),i=n3(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function VL(t,e){var r=js(t,e,19),n=js(e,t,29),i=i3(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var Dm=yr,a3=o3;function yo(){if(!(this instanceof yo))return new yo;a3.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Dm.inherits(yo,a3);var GL=yo;yo.blockSize=1024,yo.outSize=384,yo.hmacStrength=192,yo.padLength=128,yo.prototype._digest=function(e){return e==="hex"?Dm.toHex32(this.h.slice(0,12),"big"):Dm.split32(this.h.slice(0,12),"big")},du.sha1=mL,du.sha224=IL,du.sha256=t3,du.sha384=GL,du.sha512=o3;var c3={},Ya=yr,YL=hu,xd=Ya.rotl32,u3=Ya.sum32,ul=Ya.sum32_3,f3=Ya.sum32_4,l3=YL.BlockHash;function Us(){if(!(this instanceof Us))return new Us;l3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ya.inherits(Us,l3),c3.ripemd160=Us,Us.blockSize=512,Us.outSize=160,Us.hmacStrength=192,Us.padLength=64,Us.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],u=n,l=i,d=s,p=o,y=a,A=0;A<80;A++){var P=u3(xd(f3(n,h3(A,i,s,o),e[ZL[A]+r],JL(A)),ek[A]),a);n=a,a=o,o=xd(s,10),s=i,i=P,P=u3(xd(f3(u,h3(79-A,l,d,p),e[QL[A]+r],XL(A)),tk[A]),y),u=y,y=p,p=xd(d,10),d=l,l=P}P=ul(this.h[1],s,p),this.h[1]=ul(this.h[2],o,y),this.h[2]=ul(this.h[3],a,u),this.h[3]=ul(this.h[4],n,l),this.h[4]=ul(this.h[0],i,d),this.h[0]=P},Us.prototype._digest=function(e){return e==="hex"?Ya.toHex32(this.h,"little"):Ya.split32(this.h,"little")};function h3(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function JL(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function XL(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var ZL=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],QL=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ek=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],tk=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],rk=yr,nk=Ga;function vu(t,e,r){if(!(this instanceof vu))return new vu(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(rk.toArray(e,r))}var ik=vu;vu.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),nk(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)},vu.prototype.update=function(e,r){return this.inner.update(e,r),this},vu.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(t){var e=t;e.utils=yr,e.common=hu,e.sha=du,e.ripemd=c3,e.hmac=ik,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(al);const wo=ji(al);function bu(t,e,r){return r={path:e,exports:{},require:function(n,i){return sk(n,i??r.path)}},t(r,r.exports),r.exports}function sk(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Om=d3;function d3(t,e){if(!t)throw new Error(e||"Assertion failed")}d3.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var vs=bu(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var u=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)u[l]=o[l]|0;return u}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)u.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var d=o.charCodeAt(l),p=d>>8,y=d&255;p?u.push(p,y):u.push(y)}return u}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",u=0;u<o.length;u++)a+=i(o[u].toString(16));return a}r.toHex=s,r.encode=function(a,u){return u==="hex"?s(a):a}}),Ci=bu(function(t,e){var r=e;r.assert=Om,r.toArray=vs.toArray,r.zero2=vs.zero2,r.toHex=vs.toHex,r.encode=vs.encode;function n(u,l,d){var p=new Array(Math.max(u.bitLength(),d)+1);p.fill(0);for(var y=1<<l+1,A=u.clone(),P=0;P<p.length;P++){var O,D=A.andln(y-1);A.isOdd()?(D>(y>>1)-1?O=(y>>1)-D:O=D,A.isubn(O)):O=0,p[P]=O,A.iushrn(1)}return p}r.getNAF=n;function i(u,l){var d=[[],[]];u=u.clone(),l=l.clone();for(var p=0,y=0,A;u.cmpn(-p)>0||l.cmpn(-y)>0;){var P=u.andln(3)+p&3,O=l.andln(3)+y&3;P===3&&(P=-1),O===3&&(O=-1);var D;P&1?(A=u.andln(7)+p&7,(A===3||A===5)&&O===2?D=-P:D=P):D=0,d[0].push(D);var k;O&1?(A=l.andln(7)+y&7,(A===3||A===5)&&P===2?k=-O:k=O):k=0,d[1].push(k),2*p===D+1&&(p=1-p),2*y===k+1&&(y=1-y),u.iushrn(1),l.iushrn(1)}return d}r.getJSF=i;function s(u,l,d){var p="_"+l;u.prototype[l]=function(){return this[p]!==void 0?this[p]:this[p]=d.call(this)}}r.cachedProperty=s;function o(u){return typeof u=="string"?r.toArray(u,"hex"):u}r.parseBytes=o;function a(u){return new rr(u,"hex","le")}r.intFromLE=a}),_d=Ci.getNAF,ok=Ci.getJSF,Ed=Ci.assert;function na(t,e){this.type=t,this.p=new rr(e.p,16),this.red=e.prime?rr.red(e.prime):rr.mont(this.p),this.zero=new rr(0).toRed(this.red),this.one=new rr(1).toRed(this.red),this.two=new rr(2).toRed(this.red),this.n=e.n&&new rr(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ja=na;na.prototype.point=function(){throw new Error("Not implemented")},na.prototype.validate=function(){throw new Error("Not implemented")},na.prototype._fixedNafMul=function(e,r){Ed(e.precomputed);var n=e._getDoubles(),i=_d(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var l=a+n.step-1;l>=a;l--)u=(u<<1)+i[l];o.push(u)}for(var d=this.jpoint(null,null,null),p=this.jpoint(null,null,null),y=s;y>0;y--){for(a=0;a<o.length;a++)u=o[a],u===y?p=p.mixedAdd(n.points[a]):u===-y&&(p=p.mixedAdd(n.points[a].neg()));d=d.add(p)}return d.toP()},na.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=_d(r,n,this._bitLength),a=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var l=0;u>=0&&o[u]===0;u--)l++;if(u>=0&&l++,a=a.dblp(l),u<0)break;var d=o[u];Ed(d!==0),e.type==="affine"?d>0?a=a.mixedAdd(s[d-1>>1]):a=a.mixedAdd(s[-d-1>>1].neg()):d>0?a=a.add(s[d-1>>1]):a=a.add(s[-d-1>>1].neg())}return e.type==="affine"?a.toP():a},na.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,u=this._wnafT3,l=0,d,p,y;for(d=0;d<i;d++){y=r[d];var A=y._getNAFPoints(e);o[d]=A.wnd,a[d]=A.points}for(d=i-1;d>=1;d-=2){var P=d-1,O=d;if(o[P]!==1||o[O]!==1){u[P]=_d(n[P],o[P],this._bitLength),u[O]=_d(n[O],o[O],this._bitLength),l=Math.max(u[P].length,l),l=Math.max(u[O].length,l);continue}var D=[r[P],null,null,r[O]];r[P].y.cmp(r[O].y)===0?(D[1]=r[P].add(r[O]),D[2]=r[P].toJ().mixedAdd(r[O].neg())):r[P].y.cmp(r[O].y.redNeg())===0?(D[1]=r[P].toJ().mixedAdd(r[O]),D[2]=r[P].add(r[O].neg())):(D[1]=r[P].toJ().mixedAdd(r[O]),D[2]=r[P].toJ().mixedAdd(r[O].neg()));var k=[-3,-1,-5,-7,0,7,5,1,3],B=ok(n[P],n[O]);for(l=Math.max(B[0].length,l),u[P]=new Array(l),u[O]=new Array(l),p=0;p<l;p++){var q=B[0][p]|0,j=B[1][p]|0;u[P][p]=k[(q+1)*3+(j+1)],u[O][p]=0,a[P]=D}}var H=this.jpoint(null,null,null),J=this._wnafT4;for(d=l;d>=0;d--){for(var T=0;d>=0;){var z=!0;for(p=0;p<i;p++)J[p]=u[p][d]|0,J[p]!==0&&(z=!1);if(!z)break;T++,d--}if(d>=0&&T++,H=H.dblp(T),d<0)break;for(p=0;p<i;p++){var ue=J[p];ue!==0&&(ue>0?y=a[p][ue-1>>1]:ue<0&&(y=a[p][-ue-1>>1].neg()),y.type==="affine"?H=H.mixedAdd(y):H=H.add(y))}}for(d=0;d<i;d++)a[d]=null;return s?H:H.toP()};function zi(t,e){this.curve=t,this.type=e,this.precomputed=null}na.BasePoint=zi,zi.prototype.eq=function(){throw new Error("Not implemented")},zi.prototype.validate=function(){return this.curve.validate(this)},na.prototype.decodePoint=function(e,r){e=Ci.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Ed(e[e.length-1]%2===0):e[0]===7&&Ed(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")},zi.prototype.encodeCompressed=function(e){return this.encode(e,!0)},zi.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))},zi.prototype.encode=function(e,r){return Ci.encode(this._encode(r),e)},zi.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},zi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},zi.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}},zi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}},zi.prototype._getBeta=function(){return null},zi.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Nm=bu(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),ak=Ci.assert;function Hi(t){Ja.call(this,"short",t),this.a=new rr(t.a,16).toRed(this.red),this.b=new rr(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Nm(Hi,Ja);var ck=Hi;Hi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new rr(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new rr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],ak(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new rr(a.a,16),b:new rr(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}},Hi.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:rr.mont(e),n=new rr(2).toRed(r).redInvm(),i=n.redNeg(),s=new rr(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]},Hi.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new rr(1),o=new rr(0),a=new rr(0),u=new rr(1),l,d,p,y,A,P,O,D=0,k,B;n.cmpn(0)!==0;){var q=i.div(n);k=i.sub(q.mul(n)),B=a.sub(q.mul(s));var j=u.sub(q.mul(o));if(!p&&k.cmp(r)<0)l=O.neg(),d=s,p=k.neg(),y=B;else if(p&&++D===2)break;O=k,i=n,n=k,a=s,s=B,u=o,o=j}A=k.neg(),P=B;var H=p.sqr().add(y.sqr()),J=A.sqr().add(P.sqr());return J.cmp(H)>=0&&(A=l,P=d),p.negative&&(p=p.neg(),y=y.neg()),A.negative&&(A=A.neg(),P=P.neg()),[{a:p,b:y},{a:A,b:P}]},Hi.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),u=o.mul(i.a),l=s.mul(n.b),d=o.mul(i.b),p=e.sub(a).sub(u),y=l.add(d).neg();return{k1:p,k2:y}},Hi.prototype.pointFromX=function(e,r){e=new rr(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)},Hi.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0},Hi.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),u=e[o],l=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=u,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var d=this._wnafMulAdd(1,i,s,o*2,n),p=0;p<o*2;p++)i[p]=null,s[p]=null;return d};function On(t,e,r,n){Ja.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new rr(e,16),this.y=new rr(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Nm(On,Ja.BasePoint),Hi.prototype.point=function(e,r,n){return new On(this,e,r,n)},Hi.prototype.pointFromJSON=function(e,r){return On.fromJSON(this,e,r)},On.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}},On.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},On.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},On.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},On.prototype.isInfinity=function(){return this.inf},On.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},On.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},On.prototype.getX=function(){return this.x.fromRed()},On.prototype.getY=function(){return this.y.fromRed()},On.prototype.mul=function(e){return e=new rr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},On.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},On.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},On.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},On.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r},On.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Un(t,e,r,n){Ja.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new rr(0)):(this.x=new rr(e,16),this.y=new rr(r,16),this.z=new rr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Nm(Un,Ja.BasePoint),Hi.prototype.jpoint=function(e,r,n){return new Un(this,e,r,n)},Un.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)},Un.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Un.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),u=i.redSub(s),l=o.redSub(a);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=u.redSqr(),p=d.redMul(u),y=i.redMul(d),A=l.redSqr().redIAdd(p).redISub(y).redISub(y),P=l.redMul(y.redISub(A)).redISub(o.redMul(p)),O=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(A,P,O)},Un.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),u=s.redSub(o);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),d=l.redMul(a),p=n.redMul(l),y=u.redSqr().redIAdd(d).redISub(p).redISub(p),A=u.redMul(p.redISub(y)).redISub(s.redMul(d)),P=this.z.redMul(a);return this.curve.jpoint(y,A,P)},Un.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,u=this.z,l=u.redSqr().redSqr(),d=a.redAdd(a);for(r=0;r<e;r++){var p=o.redSqr(),y=d.redSqr(),A=y.redSqr(),P=p.redAdd(p).redIAdd(p).redIAdd(i.redMul(l)),O=o.redMul(y),D=P.redSqr().redISub(O.redAdd(O)),k=O.redISub(D),B=P.redMul(k);B=B.redIAdd(B).redISub(A);var q=d.redMul(u);r+1<e&&(l=l.redMul(A)),o=D,u=q,d=B}return this.curve.jpoint(o,d.redMul(s),u)},Un.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Un.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),l=u.redSqr().redISub(a).redISub(a),d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),e=l,r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),y=this.y.redSqr(),A=y.redSqr(),P=this.x.redAdd(y).redSqr().redISub(p).redISub(A);P=P.redIAdd(P);var O=p.redAdd(p).redIAdd(p),D=O.redSqr(),k=A.redIAdd(A);k=k.redIAdd(k),k=k.redIAdd(k),e=D.redISub(P).redISub(P),r=O.redMul(P.redISub(e)).redISub(k),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)},Un.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=u.redSqr().redISub(a).redISub(a);e=l;var d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),y=this.y.redSqr(),A=this.x.redMul(y),P=this.x.redSub(p).redMul(this.x.redAdd(p));P=P.redAdd(P).redIAdd(P);var O=A.redIAdd(A);O=O.redIAdd(O);var D=O.redAdd(O);e=P.redSqr().redISub(D),n=this.y.redAdd(this.z).redSqr().redISub(y).redISub(p);var k=y.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k),r=P.redMul(O.redISub(e)).redISub(k)}return this.curve.jpoint(e,r,n)},Un.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),u=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var d=l.redMul(a),p=u.redSqr().redISub(d.redAdd(d)),y=d.redISub(p),A=a.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var P=u.redMul(y).redISub(A),O=n.redAdd(n).redMul(i);return this.curve.jpoint(p,P,O)},Un.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var u=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(l),p=r.redMul(d);p=p.redIAdd(p),p=p.redIAdd(p);var y=this.x.redMul(u).redISub(p);y=y.redIAdd(y),y=y.redIAdd(y);var A=this.y.redMul(d.redMul(l.redISub(d)).redISub(a.redMul(u)));A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var P=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(y,A,P)},Un.prototype.mul=function(e,r){return e=new rr(e,r),this.curve._wnafMul(this,e)},Un.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0},Un.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}},Un.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Un.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Sd=bu(function(t,e){var r=e;r.base=Ja,r.short=ck,r.mont=null,r.edwards=null}),Ad=bu(function(t,e){var r=e,n=Ci.assert;function i(a){a.type==="short"?this.curve=new Sd.short(a):a.type==="edwards"?this.curve=new Sd.edwards(a):this.curve=new Sd.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,u){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(u);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:wo.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:wo.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:wo.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:wo.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:wo.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wo.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wo.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:wo.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function ia(t){if(!(this instanceof ia))return new ia(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=vs.toArray(t.entropy,t.entropyEnc||"hex"),r=vs.toArray(t.nonce,t.nonceEnc||"hex"),n=vs.toArray(t.pers,t.persEnc||"hex");Om(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var p3=ia;ia.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},ia.prototype._hmac=function(){return new wo.hmac(this.hash,this.K)},ia.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},ia.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=vs.toArray(e,r),n=vs.toArray(n,i),Om(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},ia.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=vs.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,vs.encode(o,r)};var Lm=Ci.assert;function Gn(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var km=Gn;Gn.fromPublic=function(e,r,n){return r instanceof Gn?r:new Gn(e,{pub:r,pubEnc:n})},Gn.fromPrivate=function(e,r,n){return r instanceof Gn?r:new Gn(e,{priv:r,privEnc:n})},Gn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Gn.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},Gn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Gn.prototype._importPrivate=function(e,r){this.priv=new rr(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},Gn.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Lm(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Lm(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},Gn.prototype.derive=function(e){return e.validate()||Lm(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Gn.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)},Gn.prototype.verify=function(e,r){return this.ec.verify(e,r,this)},Gn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var uk=Ci.assert;function Pd(t,e){if(t instanceof Pd)return t;this._importDER(t,e)||(uk(t.r&&t.s,"Signature without r or s"),this.r=new rr(t.r,16),this.s=new rr(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Md=Pd;function fk(){this.place=0}function Bm(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function g3(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Pd.prototype._importDER=function(e,r){e=Ci.toArray(e,r);var n=new fk;if(e[n.place++]!==48)return!1;var i=Bm(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Bm(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=Bm(e,n);if(a===!1||e.length!==a+n.place)return!1;var u=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new rr(o),this.s=new rr(u),this.recoveryParam=null,!0};function $m(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Pd.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=g3(r),n=g3(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];$m(i,r.length),i=i.concat(r),i.push(2),$m(i,n.length);var s=i.concat(n),o=[48];return $m(o,s.length),o=o.concat(s),Ci.encode(o,e)};var lk=function(){throw new Error("unsupported")},m3=Ci.assert;function Wi(t){if(!(this instanceof Wi))return new Wi(t);typeof t=="string"&&(m3(Object.prototype.hasOwnProperty.call(Ad,t),"Unknown curve "+t),t=Ad[t]),t instanceof Ad.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var hk=Wi;Wi.prototype.keyPair=function(e){return new km(this,e)},Wi.prototype.keyFromPrivate=function(e,r){return km.fromPrivate(this,e,r)},Wi.prototype.keyFromPublic=function(e,r){return km.fromPublic(this,e,r)},Wi.prototype.genKeyPair=function(e){e||(e={});for(var r=new p3({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||lk(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new rr(2));;){var s=new rr(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Wi.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},Wi.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new rr(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),u=new p3({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new rr(1)),d=0;;d++){var p=i.k?i.k(d):new rr(u.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(l)>=0)){var y=this.g.mul(p);if(!y.isInfinity()){var A=y.getX(),P=A.umod(this.n);if(P.cmpn(0)!==0){var O=p.invm(this.n).mul(P.mul(r.getPrivate()).iadd(e));if(O=O.umod(this.n),O.cmpn(0)!==0){var D=(y.getY().isOdd()?1:0)|(A.cmp(P)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),D^=1),new Md({r:P,s:O,recoveryParam:D})}}}}}},Wi.prototype.verify=function(e,r,n,i){e=this._truncateToN(new rr(e,16)),n=this.keyFromPublic(n,i),r=new Md(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),u=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.eqXToP(s)):(d=this.g.mulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.getX().umod(this.n).cmp(s)===0)},Wi.prototype.recoverPubKey=function(t,e,r,n){m3((3&r)===r,"The recovery param is more than two bits"),e=new Md(e,n);var i=this.n,s=new rr(t),o=e.r,a=e.s,u=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var d=e.r.invm(i),p=i.sub(s).mul(d).umod(i),y=a.mul(d).umod(i);return this.g.mulAdd(p,o,y)},Wi.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Md(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var dk=bu(function(t,e){var r=e;r.version="6.5.4",r.utils=Ci,r.rand=function(){throw new Error("unsupported")},r.curve=Sd,r.curves=Ad,r.ec=hk,r.eddsa=null}),pk=dk.ec;const gk="signing-key/5.7.0",Fm=new Kr(gk);let jm=null;function sa(){return jm||(jm=new pk("secp256k1")),jm}class mk{constructor(e){ol(this,"curve","secp256k1"),ol(this,"privateKey",Ii(e)),xN(this.privateKey)!==32&&Fm.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=sa().keyFromPrivate(bn(this.privateKey));ol(this,"publicKey","0x"+r.getPublic(!1,"hex")),ol(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),ol(this,"_isSigningKey",!0)}_addPoint(e){const r=sa().keyFromPublic(bn(this.publicKey)),n=sa().keyFromPublic(bn(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=sa().keyFromPrivate(bn(this.privateKey)),n=bn(e);n.length!==32&&Fm.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return jx({recoveryParam:i.recoveryParam,r:lu("0x"+i.r.toString(16),32),s:lu("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=sa().keyFromPrivate(bn(this.privateKey)),n=sa().keyFromPublic(bn(v3(e)));return lu("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function vk(t,e){const r=jx(e),n={r:bn(r.r),s:bn(r.s)};return"0x"+sa().recoverPubKey(bn(t),n,r.recoveryParam).encode("hex",!1)}function v3(t,e){const r=bn(t);return r.length===32?new mk(r).publicKey:r.length===33?"0x"+sa().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?Ii(r):Fm.throwArgumentError("invalid public or private key","key","[REDACTED]")}var b3;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(b3||(b3={}));function bk(t){const e=v3(t);return DN(Fx(Em(Fx(e,1)),12))}function yk(t,e){return bk(vk(bn(t),e))}var Um={},Id={};Object.defineProperty(Id,"__esModule",{value:!0});var Yn=or,qm=Mi,wk=20;function xk(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],p=r[19]<<24|r[18]<<16|r[17]<<8|r[16],y=r[23]<<24|r[22]<<16|r[21]<<8|r[20],A=r[27]<<24|r[26]<<16|r[25]<<8|r[24],P=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=e[3]<<24|e[2]<<16|e[1]<<8|e[0],D=e[7]<<24|e[6]<<16|e[5]<<8|e[4],k=e[11]<<24|e[10]<<16|e[9]<<8|e[8],B=e[15]<<24|e[14]<<16|e[13]<<8|e[12],q=n,j=i,H=s,J=o,T=a,z=u,ue=l,_e=d,G=p,E=y,m=A,f=P,g=O,v=D,x=k,_=B,S=0;S<wk;S+=2)q=q+T|0,g^=q,g=g>>>16|g<<16,G=G+g|0,T^=G,T=T>>>20|T<<12,j=j+z|0,v^=j,v=v>>>16|v<<16,E=E+v|0,z^=E,z=z>>>20|z<<12,H=H+ue|0,x^=H,x=x>>>16|x<<16,m=m+x|0,ue^=m,ue=ue>>>20|ue<<12,J=J+_e|0,_^=J,_=_>>>16|_<<16,f=f+_|0,_e^=f,_e=_e>>>20|_e<<12,H=H+ue|0,x^=H,x=x>>>24|x<<8,m=m+x|0,ue^=m,ue=ue>>>25|ue<<7,J=J+_e|0,_^=J,_=_>>>24|_<<8,f=f+_|0,_e^=f,_e=_e>>>25|_e<<7,j=j+z|0,v^=j,v=v>>>24|v<<8,E=E+v|0,z^=E,z=z>>>25|z<<7,q=q+T|0,g^=q,g=g>>>24|g<<8,G=G+g|0,T^=G,T=T>>>25|T<<7,q=q+z|0,_^=q,_=_>>>16|_<<16,m=m+_|0,z^=m,z=z>>>20|z<<12,j=j+ue|0,g^=j,g=g>>>16|g<<16,f=f+g|0,ue^=f,ue=ue>>>20|ue<<12,H=H+_e|0,v^=H,v=v>>>16|v<<16,G=G+v|0,_e^=G,_e=_e>>>20|_e<<12,J=J+T|0,x^=J,x=x>>>16|x<<16,E=E+x|0,T^=E,T=T>>>20|T<<12,H=H+_e|0,v^=H,v=v>>>24|v<<8,G=G+v|0,_e^=G,_e=_e>>>25|_e<<7,J=J+T|0,x^=J,x=x>>>24|x<<8,E=E+x|0,T^=E,T=T>>>25|T<<7,j=j+ue|0,g^=j,g=g>>>24|g<<8,f=f+g|0,ue^=f,ue=ue>>>25|ue<<7,q=q+z|0,_^=q,_=_>>>24|_<<8,m=m+_|0,z^=m,z=z>>>25|z<<7;Yn.writeUint32LE(q+n|0,t,0),Yn.writeUint32LE(j+i|0,t,4),Yn.writeUint32LE(H+s|0,t,8),Yn.writeUint32LE(J+o|0,t,12),Yn.writeUint32LE(T+a|0,t,16),Yn.writeUint32LE(z+u|0,t,20),Yn.writeUint32LE(ue+l|0,t,24),Yn.writeUint32LE(_e+d|0,t,28),Yn.writeUint32LE(G+p|0,t,32),Yn.writeUint32LE(E+y|0,t,36),Yn.writeUint32LE(m+A|0,t,40),Yn.writeUint32LE(f+P|0,t,44),Yn.writeUint32LE(g+O|0,t,48),Yn.writeUint32LE(v+D|0,t,52),Yn.writeUint32LE(x+k|0,t,56),Yn.writeUint32LE(_+B|0,t,60)}function y3(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),u=0;u<r.length;u+=64){xk(a,s,t);for(var l=u;l<u+64&&l<r.length;l++)n[l]=r[l]^a[l-u];Ek(s,0,o)}return qm.wipe(a),i===0&&qm.wipe(s),n}Id.streamXOR=y3;function _k(t,e,r,n){return n===void 0&&(n=0),qm.wipe(r),y3(t,e,r,r,n)}Id.stream=_k;function Ek(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var w3={},oa={};Object.defineProperty(oa,"__esModule",{value:!0});function Sk(t,e,r){return~(t-1)&e|t-1&r}oa.select=Sk;function Ak(t,e){return(t|0)-(e|0)-1>>>31&1}oa.lessOrEqual=Ak;function x3(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}oa.compare=x3;function Pk(t,e){return t.length===0||e.length===0?!1:x3(t,e)!==0}oa.equal=Pk,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=oa,r=Mi;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var u=a[0]|a[1]<<8;this._r[0]=u&8191;var l=a[2]|a[3]<<8;this._r[1]=(u>>>13|l<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(l>>>10|d<<6)&7939;var p=a[6]|a[7]<<8;this._r[3]=(d>>>7|p<<9)&8191;var y=a[8]|a[9]<<8;this._r[4]=(p>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var A=a[10]|a[11]<<8;this._r[6]=(y>>>14|A<<2)&8191;var P=a[12]|a[13]<<8;this._r[7]=(A>>>11|P<<5)&8065;var O=a[14]|a[15]<<8;this._r[8]=(P>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,u,l){for(var d=this._fin?0:2048,p=this._h[0],y=this._h[1],A=this._h[2],P=this._h[3],O=this._h[4],D=this._h[5],k=this._h[6],B=this._h[7],q=this._h[8],j=this._h[9],H=this._r[0],J=this._r[1],T=this._r[2],z=this._r[3],ue=this._r[4],_e=this._r[5],G=this._r[6],E=this._r[7],m=this._r[8],f=this._r[9];l>=16;){var g=a[u+0]|a[u+1]<<8;p+=g&8191;var v=a[u+2]|a[u+3]<<8;y+=(g>>>13|v<<3)&8191;var x=a[u+4]|a[u+5]<<8;A+=(v>>>10|x<<6)&8191;var _=a[u+6]|a[u+7]<<8;P+=(x>>>7|_<<9)&8191;var S=a[u+8]|a[u+9]<<8;O+=(_>>>4|S<<12)&8191,D+=S>>>1&8191;var b=a[u+10]|a[u+11]<<8;k+=(S>>>14|b<<2)&8191;var M=a[u+12]|a[u+13]<<8;B+=(b>>>11|M<<5)&8191;var I=a[u+14]|a[u+15]<<8;q+=(M>>>8|I<<8)&8191,j+=I>>>5|d;var F=0,ce=F;ce+=p*H,ce+=y*(5*f),ce+=A*(5*m),ce+=P*(5*E),ce+=O*(5*G),F=ce>>>13,ce&=8191,ce+=D*(5*_e),ce+=k*(5*ue),ce+=B*(5*z),ce+=q*(5*T),ce+=j*(5*J),F+=ce>>>13,ce&=8191;var N=F;N+=p*J,N+=y*H,N+=A*(5*f),N+=P*(5*m),N+=O*(5*E),F=N>>>13,N&=8191,N+=D*(5*G),N+=k*(5*_e),N+=B*(5*ue),N+=q*(5*z),N+=j*(5*T),F+=N>>>13,N&=8191;var se=F;se+=p*T,se+=y*J,se+=A*H,se+=P*(5*f),se+=O*(5*m),F=se>>>13,se&=8191,se+=D*(5*E),se+=k*(5*G),se+=B*(5*_e),se+=q*(5*ue),se+=j*(5*z),F+=se>>>13,se&=8191;var ee=F;ee+=p*z,ee+=y*T,ee+=A*J,ee+=P*H,ee+=O*(5*f),F=ee>>>13,ee&=8191,ee+=D*(5*m),ee+=k*(5*E),ee+=B*(5*G),ee+=q*(5*_e),ee+=j*(5*ue),F+=ee>>>13,ee&=8191;var X=F;X+=p*ue,X+=y*z,X+=A*T,X+=P*J,X+=O*H,F=X>>>13,X&=8191,X+=D*(5*f),X+=k*(5*m),X+=B*(5*E),X+=q*(5*G),X+=j*(5*_e),F+=X>>>13,X&=8191;var Q=F;Q+=p*_e,Q+=y*ue,Q+=A*z,Q+=P*T,Q+=O*J,F=Q>>>13,Q&=8191,Q+=D*H,Q+=k*(5*f),Q+=B*(5*m),Q+=q*(5*E),Q+=j*(5*G),F+=Q>>>13,Q&=8191;var R=F;R+=p*G,R+=y*_e,R+=A*ue,R+=P*z,R+=O*T,F=R>>>13,R&=8191,R+=D*J,R+=k*H,R+=B*(5*f),R+=q*(5*m),R+=j*(5*E),F+=R>>>13,R&=8191;var Z=F;Z+=p*E,Z+=y*G,Z+=A*_e,Z+=P*ue,Z+=O*z,F=Z>>>13,Z&=8191,Z+=D*T,Z+=k*J,Z+=B*H,Z+=q*(5*f),Z+=j*(5*m),F+=Z>>>13,Z&=8191;var te=F;te+=p*m,te+=y*E,te+=A*G,te+=P*_e,te+=O*ue,F=te>>>13,te&=8191,te+=D*z,te+=k*T,te+=B*J,te+=q*H,te+=j*(5*f),F+=te>>>13,te&=8191;var le=F;le+=p*f,le+=y*m,le+=A*E,le+=P*G,le+=O*_e,F=le>>>13,le&=8191,le+=D*ue,le+=k*z,le+=B*T,le+=q*J,le+=j*H,F+=le>>>13,le&=8191,F=(F<<2)+F|0,F=F+ce|0,ce=F&8191,F=F>>>13,N+=F,p=ce,y=N,A=se,P=ee,O=X,D=Q,k=R,B=Z,q=te,j=le,u+=16,l-=16}this._h[0]=p,this._h[1]=y,this._h[2]=A,this._h[3]=P,this._h[4]=O,this._h[5]=D,this._h[6]=k,this._h[7]=B,this._h[8]=q,this._h[9]=j},o.prototype.finish=function(a,u){u===void 0&&(u=0);var l=new Uint16Array(10),d,p,y,A;if(this._leftover){for(A=this._leftover,this._buffer[A++]=1;A<16;A++)this._buffer[A]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,A=2;A<10;A++)this._h[A]+=d,d=this._h[A]>>>13,this._h[A]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,l[0]=this._h[0]+5,d=l[0]>>>13,l[0]&=8191,A=1;A<10;A++)l[A]=this._h[A]+d,d=l[A]>>>13,l[A]&=8191;for(l[9]-=8192,p=(d^1)-1,A=0;A<10;A++)l[A]&=p;for(p=~p,A=0;A<10;A++)this._h[A]=this._h[A]&p|l[A];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,A=1;A<8;A++)y=(this._h[A]+this._pad[A]|0)+(y>>>16)|0,this._h[A]=y&65535;return a[u+0]=this._h[0]>>>0,a[u+1]=this._h[0]>>>8,a[u+2]=this._h[1]>>>0,a[u+3]=this._h[1]>>>8,a[u+4]=this._h[2]>>>0,a[u+5]=this._h[2]>>>8,a[u+6]=this._h[3]>>>0,a[u+7]=this._h[3]>>>8,a[u+8]=this._h[4]>>>0,a[u+9]=this._h[4]>>>8,a[u+10]=this._h[5]>>>0,a[u+11]=this._h[5]>>>8,a[u+12]=this._h[6]>>>0,a[u+13]=this._h[6]>>>8,a[u+14]=this._h[7]>>>0,a[u+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var u=0,l=a.length,d;if(this._leftover){d=16-this._leftover,d>l&&(d=l);for(var p=0;p<d;p++)this._buffer[this._leftover+p]=a[u+p];if(l-=d,u+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(d=l-l%16,this._blocks(a,u,d),u+=d,l-=d),l){for(var p=0;p<l;p++)this._buffer[this._leftover+p]=a[u+p];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var u=new n(o);u.update(a);var l=u.digest();return u.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(w3),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Id,r=w3,n=Mi,i=or,s=oa;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function u(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return u.prototype.seal=function(l,d,p,y){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var A=new Uint8Array(16);A.set(l,A.length-l.length);var P=new Uint8Array(32);e.stream(this._key,A,P,4);var O=d.length+this.tagLength,D;if(y){if(y.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");D=y}else D=new Uint8Array(O);return e.streamXOR(this._key,A,d,D,4),this._authenticate(D.subarray(D.length-this.tagLength,D.length),P,D.subarray(0,D.length-this.tagLength),p),n.wipe(A),D},u.prototype.open=function(l,d,p,y){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var A=new Uint8Array(16);A.set(l,A.length-l.length);var P=new Uint8Array(32);e.stream(this._key,A,P,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,P,d.subarray(0,d.length-this.tagLength),p),!s.equal(O,d.subarray(d.length-this.tagLength,d.length)))return null;var D=d.length-this.tagLength,k;if(y){if(y.length!==D)throw new Error("ChaCha20Poly1305: incorrect destination length");k=y}else k=new Uint8Array(D);return e.streamXOR(this._key,A,d.subarray(0,d.length-this.tagLength),k,4),n.wipe(A),k},u.prototype.clean=function(){return n.wipe(this._key),this},u.prototype._authenticate=function(l,d,p,y){var A=new r.Poly1305(d);y&&(A.update(y),y.length%16>0&&A.update(o.subarray(y.length%16))),A.update(p),p.length%16>0&&A.update(o.subarray(p.length%16));var P=new Uint8Array(8);y&&i.writeUint64LE(y.length,P),A.update(P),i.writeUint64LE(p.length,P),A.update(P);for(var O=A.digest(),D=0;D<O.length;D++)l[D]=O[D];A.clean(),n.wipe(O),n.wipe(P)},u}();t.ChaCha20Poly1305=a}(Um);var _3={},fl={},zm={};Object.defineProperty(zm,"__esModule",{value:!0});function Mk(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}zm.isSerializableHash=Mk,Object.defineProperty(fl,"__esModule",{value:!0});var qs=zm,Ik=oa,Ck=Mi,E3=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),qs.isSerializableHash(this._inner)&&qs.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Ck.wipe(n)}return t.prototype.reset=function(){if(!qs.isSerializableHash(this._inner)||!qs.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){qs.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),qs.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!qs.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!qs.isSerializableHash(this._inner)||!qs.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!qs.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();fl.HMAC=E3;function Tk(t,e,r){var n=new E3(t,e);n.update(r);var i=n.digest();return n.clean(),i}fl.hmac=Tk,fl.equal=Ik.equal,Object.defineProperty(_3,"__esModule",{value:!0});var S3=fl,A3=Mi,Rk=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=S3.hmac(this._hash,n,r);this._hmac=new S3.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),A3.wipe(this._buffer),A3.wipe(this._counter),this._bufpos=0},t}(),Dk=_3.HKDF=Rk,ll={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=or,r=Mi;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(u,l){if(l===void 0&&(l=u.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=u[d++],l--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._temp,this._state,u,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=u[d++],l--;return this},a.prototype.finish=function(u){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,p=l/536870912|0,y=l<<3,A=l%64<56?64:128;this._buffer[d]=128;for(var P=d+1;P<A-8;P++)this._buffer[P]=0;e.writeUint32BE(p,this._buffer,A-8),e.writeUint32BE(y,this._buffer,A-4),s(this._temp,this._state,this._buffer,0,A),this._finished=!0}for(var P=0;P<this.digestLength/4;P++)e.writeUint32BE(this._state[P],u,P*4);return this},a.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(u){return this._state.set(u.state),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(u){r.wipe(u.state),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,u,l,d,p){for(;p>=64;){for(var y=u[0],A=u[1],P=u[2],O=u[3],D=u[4],k=u[5],B=u[6],q=u[7],j=0;j<16;j++){var H=d+j*4;a[j]=e.readUint32BE(l,H)}for(var j=16;j<64;j++){var J=a[j-2],T=(J>>>17|J<<15)^(J>>>19|J<<13)^J>>>10;J=a[j-15];var z=(J>>>7|J<<25)^(J>>>18|J<<14)^J>>>3;a[j]=(T+a[j-7]|0)+(z+a[j-16]|0)}for(var j=0;j<64;j++){var T=(((D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7))+(D&k^~D&B)|0)+(q+(i[j]+a[j]|0)|0)|0,z=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&A^y&P^A&P)|0;q=B,B=k,k=D,D=O+T|0,O=P,P=A,A=y,y=T+z|0}u[0]+=y,u[1]+=A,u[2]+=P,u[3]+=O,u[4]+=D,u[5]+=k,u[6]+=B,u[7]+=q,d+=64,p-=64}return d}function o(a){var u=new n;u.update(a);var l=u.digest();return u.clean(),l}t.hash=o})(ll);var Hm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=ta,r=Mi;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(j){const H=new Float64Array(16);if(j)for(let J=0;J<j.length;J++)H[J]=j[J];return H}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(j){let H=1;for(let J=0;J<16;J++){let T=j[J]+H+65535;H=Math.floor(T/65536),j[J]=T-H*65536}j[0]+=H-1+37*(H-1)}function a(j,H,J){const T=~(J-1);for(let z=0;z<16;z++){const ue=T&(j[z]^H[z]);j[z]^=ue,H[z]^=ue}}function u(j,H){const J=n(),T=n();for(let z=0;z<16;z++)T[z]=H[z];o(T),o(T),o(T);for(let z=0;z<2;z++){J[0]=T[0]-65517;for(let _e=1;_e<15;_e++)J[_e]=T[_e]-65535-(J[_e-1]>>16&1),J[_e-1]&=65535;J[15]=T[15]-32767-(J[14]>>16&1);const ue=J[15]>>16&1;J[14]&=65535,a(T,J,1-ue)}for(let z=0;z<16;z++)j[2*z]=T[z]&255,j[2*z+1]=T[z]>>8}function l(j,H){for(let J=0;J<16;J++)j[J]=H[2*J]+(H[2*J+1]<<8);j[15]&=32767}function d(j,H,J){for(let T=0;T<16;T++)j[T]=H[T]+J[T]}function p(j,H,J){for(let T=0;T<16;T++)j[T]=H[T]-J[T]}function y(j,H,J){let T,z,ue=0,_e=0,G=0,E=0,m=0,f=0,g=0,v=0,x=0,_=0,S=0,b=0,M=0,I=0,F=0,ce=0,N=0,se=0,ee=0,X=0,Q=0,R=0,Z=0,te=0,le=0,ie=0,fe=0,ve=0,Me=0,Ne=0,Te=0,$e=J[0],Ie=J[1],Le=J[2],Ve=J[3],ke=J[4],ze=J[5],He=J[6],Ee=J[7],Qe=J[8],ct=J[9],Be=J[10],et=J[11],rt=J[12],Je=J[13],pt=J[14],ht=J[15];T=H[0],ue+=T*$e,_e+=T*Ie,G+=T*Le,E+=T*Ve,m+=T*ke,f+=T*ze,g+=T*He,v+=T*Ee,x+=T*Qe,_+=T*ct,S+=T*Be,b+=T*et,M+=T*rt,I+=T*Je,F+=T*pt,ce+=T*ht,T=H[1],_e+=T*$e,G+=T*Ie,E+=T*Le,m+=T*Ve,f+=T*ke,g+=T*ze,v+=T*He,x+=T*Ee,_+=T*Qe,S+=T*ct,b+=T*Be,M+=T*et,I+=T*rt,F+=T*Je,ce+=T*pt,N+=T*ht,T=H[2],G+=T*$e,E+=T*Ie,m+=T*Le,f+=T*Ve,g+=T*ke,v+=T*ze,x+=T*He,_+=T*Ee,S+=T*Qe,b+=T*ct,M+=T*Be,I+=T*et,F+=T*rt,ce+=T*Je,N+=T*pt,se+=T*ht,T=H[3],E+=T*$e,m+=T*Ie,f+=T*Le,g+=T*Ve,v+=T*ke,x+=T*ze,_+=T*He,S+=T*Ee,b+=T*Qe,M+=T*ct,I+=T*Be,F+=T*et,ce+=T*rt,N+=T*Je,se+=T*pt,ee+=T*ht,T=H[4],m+=T*$e,f+=T*Ie,g+=T*Le,v+=T*Ve,x+=T*ke,_+=T*ze,S+=T*He,b+=T*Ee,M+=T*Qe,I+=T*ct,F+=T*Be,ce+=T*et,N+=T*rt,se+=T*Je,ee+=T*pt,X+=T*ht,T=H[5],f+=T*$e,g+=T*Ie,v+=T*Le,x+=T*Ve,_+=T*ke,S+=T*ze,b+=T*He,M+=T*Ee,I+=T*Qe,F+=T*ct,ce+=T*Be,N+=T*et,se+=T*rt,ee+=T*Je,X+=T*pt,Q+=T*ht,T=H[6],g+=T*$e,v+=T*Ie,x+=T*Le,_+=T*Ve,S+=T*ke,b+=T*ze,M+=T*He,I+=T*Ee,F+=T*Qe,ce+=T*ct,N+=T*Be,se+=T*et,ee+=T*rt,X+=T*Je,Q+=T*pt,R+=T*ht,T=H[7],v+=T*$e,x+=T*Ie,_+=T*Le,S+=T*Ve,b+=T*ke,M+=T*ze,I+=T*He,F+=T*Ee,ce+=T*Qe,N+=T*ct,se+=T*Be,ee+=T*et,X+=T*rt,Q+=T*Je,R+=T*pt,Z+=T*ht,T=H[8],x+=T*$e,_+=T*Ie,S+=T*Le,b+=T*Ve,M+=T*ke,I+=T*ze,F+=T*He,ce+=T*Ee,N+=T*Qe,se+=T*ct,ee+=T*Be,X+=T*et,Q+=T*rt,R+=T*Je,Z+=T*pt,te+=T*ht,T=H[9],_+=T*$e,S+=T*Ie,b+=T*Le,M+=T*Ve,I+=T*ke,F+=T*ze,ce+=T*He,N+=T*Ee,se+=T*Qe,ee+=T*ct,X+=T*Be,Q+=T*et,R+=T*rt,Z+=T*Je,te+=T*pt,le+=T*ht,T=H[10],S+=T*$e,b+=T*Ie,M+=T*Le,I+=T*Ve,F+=T*ke,ce+=T*ze,N+=T*He,se+=T*Ee,ee+=T*Qe,X+=T*ct,Q+=T*Be,R+=T*et,Z+=T*rt,te+=T*Je,le+=T*pt,ie+=T*ht,T=H[11],b+=T*$e,M+=T*Ie,I+=T*Le,F+=T*Ve,ce+=T*ke,N+=T*ze,se+=T*He,ee+=T*Ee,X+=T*Qe,Q+=T*ct,R+=T*Be,Z+=T*et,te+=T*rt,le+=T*Je,ie+=T*pt,fe+=T*ht,T=H[12],M+=T*$e,I+=T*Ie,F+=T*Le,ce+=T*Ve,N+=T*ke,se+=T*ze,ee+=T*He,X+=T*Ee,Q+=T*Qe,R+=T*ct,Z+=T*Be,te+=T*et,le+=T*rt,ie+=T*Je,fe+=T*pt,ve+=T*ht,T=H[13],I+=T*$e,F+=T*Ie,ce+=T*Le,N+=T*Ve,se+=T*ke,ee+=T*ze,X+=T*He,Q+=T*Ee,R+=T*Qe,Z+=T*ct,te+=T*Be,le+=T*et,ie+=T*rt,fe+=T*Je,ve+=T*pt,Me+=T*ht,T=H[14],F+=T*$e,ce+=T*Ie,N+=T*Le,se+=T*Ve,ee+=T*ke,X+=T*ze,Q+=T*He,R+=T*Ee,Z+=T*Qe,te+=T*ct,le+=T*Be,ie+=T*et,fe+=T*rt,ve+=T*Je,Me+=T*pt,Ne+=T*ht,T=H[15],ce+=T*$e,N+=T*Ie,se+=T*Le,ee+=T*Ve,X+=T*ke,Q+=T*ze,R+=T*He,Z+=T*Ee,te+=T*Qe,le+=T*ct,ie+=T*Be,fe+=T*et,ve+=T*rt,Me+=T*Je,Ne+=T*pt,Te+=T*ht,ue+=38*N,_e+=38*se,G+=38*ee,E+=38*X,m+=38*Q,f+=38*R,g+=38*Z,v+=38*te,x+=38*le,_+=38*ie,S+=38*fe,b+=38*ve,M+=38*Me,I+=38*Ne,F+=38*Te,z=1,T=ue+z+65535,z=Math.floor(T/65536),ue=T-z*65536,T=_e+z+65535,z=Math.floor(T/65536),_e=T-z*65536,T=G+z+65535,z=Math.floor(T/65536),G=T-z*65536,T=E+z+65535,z=Math.floor(T/65536),E=T-z*65536,T=m+z+65535,z=Math.floor(T/65536),m=T-z*65536,T=f+z+65535,z=Math.floor(T/65536),f=T-z*65536,T=g+z+65535,z=Math.floor(T/65536),g=T-z*65536,T=v+z+65535,z=Math.floor(T/65536),v=T-z*65536,T=x+z+65535,z=Math.floor(T/65536),x=T-z*65536,T=_+z+65535,z=Math.floor(T/65536),_=T-z*65536,T=S+z+65535,z=Math.floor(T/65536),S=T-z*65536,T=b+z+65535,z=Math.floor(T/65536),b=T-z*65536,T=M+z+65535,z=Math.floor(T/65536),M=T-z*65536,T=I+z+65535,z=Math.floor(T/65536),I=T-z*65536,T=F+z+65535,z=Math.floor(T/65536),F=T-z*65536,T=ce+z+65535,z=Math.floor(T/65536),ce=T-z*65536,ue+=z-1+37*(z-1),z=1,T=ue+z+65535,z=Math.floor(T/65536),ue=T-z*65536,T=_e+z+65535,z=Math.floor(T/65536),_e=T-z*65536,T=G+z+65535,z=Math.floor(T/65536),G=T-z*65536,T=E+z+65535,z=Math.floor(T/65536),E=T-z*65536,T=m+z+65535,z=Math.floor(T/65536),m=T-z*65536,T=f+z+65535,z=Math.floor(T/65536),f=T-z*65536,T=g+z+65535,z=Math.floor(T/65536),g=T-z*65536,T=v+z+65535,z=Math.floor(T/65536),v=T-z*65536,T=x+z+65535,z=Math.floor(T/65536),x=T-z*65536,T=_+z+65535,z=Math.floor(T/65536),_=T-z*65536,T=S+z+65535,z=Math.floor(T/65536),S=T-z*65536,T=b+z+65535,z=Math.floor(T/65536),b=T-z*65536,T=M+z+65535,z=Math.floor(T/65536),M=T-z*65536,T=I+z+65535,z=Math.floor(T/65536),I=T-z*65536,T=F+z+65535,z=Math.floor(T/65536),F=T-z*65536,T=ce+z+65535,z=Math.floor(T/65536),ce=T-z*65536,ue+=z-1+37*(z-1),j[0]=ue,j[1]=_e,j[2]=G,j[3]=E,j[4]=m,j[5]=f,j[6]=g,j[7]=v,j[8]=x,j[9]=_,j[10]=S,j[11]=b,j[12]=M,j[13]=I,j[14]=F,j[15]=ce}function A(j,H){y(j,H,H)}function P(j,H){const J=n();for(let T=0;T<16;T++)J[T]=H[T];for(let T=253;T>=0;T--)A(J,J),T!==2&&T!==4&&y(J,J,H);for(let T=0;T<16;T++)j[T]=J[T]}function O(j,H){const J=new Uint8Array(32),T=new Float64Array(80),z=n(),ue=n(),_e=n(),G=n(),E=n(),m=n();for(let x=0;x<31;x++)J[x]=j[x];J[31]=j[31]&127|64,J[0]&=248,l(T,H);for(let x=0;x<16;x++)ue[x]=T[x];z[0]=G[0]=1;for(let x=254;x>=0;--x){const _=J[x>>>3]>>>(x&7)&1;a(z,ue,_),a(_e,G,_),d(E,z,_e),p(z,z,_e),d(_e,ue,G),p(ue,ue,G),A(G,E),A(m,z),y(z,_e,z),y(_e,ue,E),d(E,z,_e),p(z,z,_e),A(ue,z),p(_e,G,m),y(z,_e,s),d(z,z,G),y(_e,_e,z),y(z,G,m),y(G,ue,T),A(ue,E),a(z,ue,_),a(_e,G,_)}for(let x=0;x<16;x++)T[x+16]=z[x],T[x+32]=_e[x],T[x+48]=ue[x],T[x+64]=G[x];const f=T.subarray(32),g=T.subarray(16);P(f,f),y(g,g,f);const v=new Uint8Array(32);return u(v,g),v}t.scalarMult=O;function D(j){return O(j,i)}t.scalarMultBase=D;function k(j){if(j.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const H=new Uint8Array(j);return{publicKey:D(H),secretKey:H}}t.generateKeyPairFromSeed=k;function B(j){const H=(0,e.randomBytes)(32,j),J=k(H);return(0,r.wipe)(H),J}t.generateKeyPair=B;function q(j,H,J=!1){if(j.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(H.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const T=O(j,H);if(J){let z=0;for(let ue=0;ue<T.length;ue++)z|=T[ue];if(z===0)throw new Error("X25519: invalid shared key")}return T}t.sharedKey=q})(Hm);var P3={};const Ok={name:"elliptic",version:"6.6.0",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}};var Ti={},Wm={exports:{}};Wm.exports,function(t){(function(e,r){function n(G,E){if(!G)throw new Error(E||"Assertion failed")}function i(G,E){G.super_=E;var m=function(){};m.prototype=E.prototype,G.prototype=new m,G.prototype.constructor=G}function s(G,E,m){if(s.isBN(G))return G;this.negative=0,this.words=null,this.length=0,this.red=null,G!==null&&((E==="le"||E==="be")&&(m=E,E=10),this._init(G||0,E||10,m||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=tl.Buffer}catch{}s.isBN=function(E){return E instanceof s?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===s.wordSize&&Array.isArray(E.words)},s.max=function(E,m){return E.cmp(m)>0?E:m},s.min=function(E,m){return E.cmp(m)<0?E:m},s.prototype._init=function(E,m,f){if(typeof E=="number")return this._initNumber(E,m,f);if(typeof E=="object")return this._initArray(E,m,f);m==="hex"&&(m=16),n(m===(m|0)&&m>=2&&m<=36),E=E.toString().replace(/\s+/g,"");var g=0;E[0]==="-"&&(g++,this.negative=1),g<E.length&&(m===16?this._parseHex(E,g,f):(this._parseBase(E,m,g),f==="le"&&this._initArray(this.toArray(),m,f)))},s.prototype._initNumber=function(E,m,f){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(n(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),m,f)},s.prototype._initArray=function(E,m,f){if(n(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var v,x,_=0;if(f==="be")for(g=E.length-1,v=0;g>=0;g-=3)x=E[g]|E[g-1]<<8|E[g-2]<<16,this.words[v]|=x<<_&67108863,this.words[v+1]=x>>>26-_&67108863,_+=24,_>=26&&(_-=26,v++);else if(f==="le")for(g=0,v=0;g<E.length;g+=3)x=E[g]|E[g+1]<<8|E[g+2]<<16,this.words[v]|=x<<_&67108863,this.words[v+1]=x>>>26-_&67108863,_+=24,_>=26&&(_-=26,v++);return this.strip()};function a(G,E){var m=G.charCodeAt(E);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function u(G,E,m){var f=a(G,m);return m-1>=E&&(f|=a(G,m-1)<<4),f}s.prototype._parseHex=function(E,m,f){this.length=Math.ceil((E.length-m)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var v=0,x=0,_;if(f==="be")for(g=E.length-1;g>=m;g-=2)_=u(E,m,g)<<v,this.words[x]|=_&67108863,v>=18?(v-=18,x+=1,this.words[x]|=_>>>26):v+=8;else{var S=E.length-m;for(g=S%2===0?m+1:m;g<E.length;g+=2)_=u(E,m,g)<<v,this.words[x]|=_&67108863,v>=18?(v-=18,x+=1,this.words[x]|=_>>>26):v+=8}this.strip()};function l(G,E,m,f){for(var g=0,v=Math.min(G.length,m),x=E;x<v;x++){var _=G.charCodeAt(x)-48;g*=f,_>=49?g+=_-49+10:_>=17?g+=_-17+10:g+=_}return g}s.prototype._parseBase=function(E,m,f){this.words=[0],this.length=1;for(var g=0,v=1;v<=67108863;v*=m)g++;g--,v=v/m|0;for(var x=E.length-f,_=x%g,S=Math.min(x,x-_)+f,b=0,M=f;M<S;M+=g)b=l(E,M,M+g,m),this.imuln(v),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(_!==0){var I=1;for(b=l(E,M,E.length,m),M=0;M<_;M++)I*=m;this.imuln(I),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this.strip()},s.prototype.copy=function(E){E.words=new Array(this.length);for(var m=0;m<this.length;m++)E.words[m]=this.words[m];E.length=this.length,E.negative=this.negative,E.red=this.red},s.prototype.clone=function(){var E=new s(null);return this.copy(E),E},s.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(E,m){E=E||10,m=m|0||1;var f;if(E===16||E==="hex"){f="";for(var g=0,v=0,x=0;x<this.length;x++){var _=this.words[x],S=((_<<g|v)&16777215).toString(16);v=_>>>24-g&16777215,g+=2,g>=26&&(g-=26,x--),v!==0||x!==this.length-1?f=d[6-S.length]+S+f:f=S+f}for(v!==0&&(f=v.toString(16)+f);f.length%m!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(E===(E|0)&&E>=2&&E<=36){var b=p[E],M=y[E];f="";var I=this.clone();for(I.negative=0;!I.isZero();){var F=I.modn(M).toString(E);I=I.idivn(M),I.isZero()?f=F+f:f=d[b-F.length]+F+f}for(this.isZero()&&(f="0"+f);f.length%m!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(E,m){return n(typeof o<"u"),this.toArrayLike(o,E,m)},s.prototype.toArray=function(E,m){return this.toArrayLike(Array,E,m)},s.prototype.toArrayLike=function(E,m,f){var g=this.byteLength(),v=f||Math.max(1,g);n(g<=v,"byte array longer than desired length"),n(v>0,"Requested array length <= 0"),this.strip();var x=m==="le",_=new E(v),S,b,M=this.clone();if(x){for(b=0;!M.isZero();b++)S=M.andln(255),M.iushrn(8),_[b]=S;for(;b<v;b++)_[b]=0}else{for(b=0;b<v-g;b++)_[b]=0;for(b=0;!M.isZero();b++)S=M.andln(255),M.iushrn(8),_[v-b-1]=S}return _},Math.clz32?s.prototype._countBits=function(E){return 32-Math.clz32(E)}:s.prototype._countBits=function(E){var m=E,f=0;return m>=4096&&(f+=13,m>>>=13),m>=64&&(f+=7,m>>>=7),m>=8&&(f+=4,m>>>=4),m>=2&&(f+=2,m>>>=2),f+m},s.prototype._zeroBits=function(E){if(E===0)return 26;var m=E,f=0;return m&8191||(f+=13,m>>>=13),m&127||(f+=7,m>>>=7),m&15||(f+=4,m>>>=4),m&3||(f+=2,m>>>=2),m&1||f++,f},s.prototype.bitLength=function(){var E=this.words[this.length-1],m=this._countBits(E);return(this.length-1)*26+m};function A(G){for(var E=new Array(G.bitLength()),m=0;m<E.length;m++){var f=m/26|0,g=m%26;E[m]=(G.words[f]&1<<g)>>>g}return E}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,m=0;m<this.length;m++){var f=this._zeroBits(this.words[m]);if(E+=f,f!==26)break}return E},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},s.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var m=0;m<E.length;m++)this.words[m]=this.words[m]|E.words[m];return this.strip()},s.prototype.ior=function(E){return n((this.negative|E.negative)===0),this.iuor(E)},s.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},s.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},s.prototype.iuand=function(E){var m;this.length>E.length?m=E:m=this;for(var f=0;f<m.length;f++)this.words[f]=this.words[f]&E.words[f];return this.length=m.length,this.strip()},s.prototype.iand=function(E){return n((this.negative|E.negative)===0),this.iuand(E)},s.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},s.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},s.prototype.iuxor=function(E){var m,f;this.length>E.length?(m=this,f=E):(m=E,f=this);for(var g=0;g<f.length;g++)this.words[g]=m.words[g]^f.words[g];if(this!==m)for(;g<m.length;g++)this.words[g]=m.words[g];return this.length=m.length,this.strip()},s.prototype.ixor=function(E){return n((this.negative|E.negative)===0),this.iuxor(E)},s.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},s.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},s.prototype.inotn=function(E){n(typeof E=="number"&&E>=0);var m=Math.ceil(E/26)|0,f=E%26;this._expand(m),f>0&&m--;for(var g=0;g<m;g++)this.words[g]=~this.words[g]&67108863;return f>0&&(this.words[g]=~this.words[g]&67108863>>26-f),this.strip()},s.prototype.notn=function(E){return this.clone().inotn(E)},s.prototype.setn=function(E,m){n(typeof E=="number"&&E>=0);var f=E/26|0,g=E%26;return this._expand(f+1),m?this.words[f]=this.words[f]|1<<g:this.words[f]=this.words[f]&~(1<<g),this.strip()},s.prototype.iadd=function(E){var m;if(this.negative!==0&&E.negative===0)return this.negative=0,m=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,m=this.isub(E),E.negative=1,m._normSign();var f,g;this.length>E.length?(f=this,g=E):(f=E,g=this);for(var v=0,x=0;x<g.length;x++)m=(f.words[x]|0)+(g.words[x]|0)+v,this.words[x]=m&67108863,v=m>>>26;for(;v!==0&&x<f.length;x++)m=(f.words[x]|0)+v,this.words[x]=m&67108863,v=m>>>26;if(this.length=f.length,v!==0)this.words[this.length]=v,this.length++;else if(f!==this)for(;x<f.length;x++)this.words[x]=f.words[x];return this},s.prototype.add=function(E){var m;return E.negative!==0&&this.negative===0?(E.negative=0,m=this.sub(E),E.negative^=1,m):E.negative===0&&this.negative!==0?(this.negative=0,m=E.sub(this),this.negative=1,m):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},s.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var m=this.iadd(E);return E.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var f=this.cmp(E);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,v;f>0?(g=this,v=E):(g=E,v=this);for(var x=0,_=0;_<v.length;_++)m=(g.words[_]|0)-(v.words[_]|0)+x,x=m>>26,this.words[_]=m&67108863;for(;x!==0&&_<g.length;_++)m=(g.words[_]|0)+x,x=m>>26,this.words[_]=m&67108863;if(x===0&&_<g.length&&g!==this)for(;_<g.length;_++)this.words[_]=g.words[_];return this.length=Math.max(this.length,_),g!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(E){return this.clone().isub(E)};function P(G,E,m){m.negative=E.negative^G.negative;var f=G.length+E.length|0;m.length=f,f=f-1|0;var g=G.words[0]|0,v=E.words[0]|0,x=g*v,_=x&67108863,S=x/67108864|0;m.words[0]=_;for(var b=1;b<f;b++){for(var M=S>>>26,I=S&67108863,F=Math.min(b,E.length-1),ce=Math.max(0,b-G.length+1);ce<=F;ce++){var N=b-ce|0;g=G.words[N]|0,v=E.words[ce]|0,x=g*v+I,M+=x/67108864|0,I=x&67108863}m.words[b]=I|0,S=M|0}return S!==0?m.words[b]=S|0:m.length--,m.strip()}var O=function(E,m,f){var g=E.words,v=m.words,x=f.words,_=0,S,b,M,I=g[0]|0,F=I&8191,ce=I>>>13,N=g[1]|0,se=N&8191,ee=N>>>13,X=g[2]|0,Q=X&8191,R=X>>>13,Z=g[3]|0,te=Z&8191,le=Z>>>13,ie=g[4]|0,fe=ie&8191,ve=ie>>>13,Me=g[5]|0,Ne=Me&8191,Te=Me>>>13,$e=g[6]|0,Ie=$e&8191,Le=$e>>>13,Ve=g[7]|0,ke=Ve&8191,ze=Ve>>>13,He=g[8]|0,Ee=He&8191,Qe=He>>>13,ct=g[9]|0,Be=ct&8191,et=ct>>>13,rt=v[0]|0,Je=rt&8191,pt=rt>>>13,ht=v[1]|0,ft=ht&8191,Ht=ht>>>13,Jt=v[2]|0,St=Jt&8191,er=Jt>>>13,Xt=v[3]|0,Ot=Xt&8191,Bt=Xt>>>13,Tt=v[4]|0,vt=Tt&8191,Dt=Tt>>>13,Lt=v[5]|0,bt=Lt&8191,$t=Lt>>>13,jt=v[6]|0,nt=jt&8191,Ft=jt>>>13,$=v[7]|0,W=$&8191,V=$>>>13,C=v[8]|0,Y=C&8191,U=C>>>13,oe=v[9]|0,ge=oe&8191,xe=oe>>>13;f.negative=E.negative^m.negative,f.length=19,S=Math.imul(F,Je),b=Math.imul(F,pt),b=b+Math.imul(ce,Je)|0,M=Math.imul(ce,pt);var Re=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(Re>>>26)|0,Re&=67108863,S=Math.imul(se,Je),b=Math.imul(se,pt),b=b+Math.imul(ee,Je)|0,M=Math.imul(ee,pt),S=S+Math.imul(F,ft)|0,b=b+Math.imul(F,Ht)|0,b=b+Math.imul(ce,ft)|0,M=M+Math.imul(ce,Ht)|0;var De=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(De>>>26)|0,De&=67108863,S=Math.imul(Q,Je),b=Math.imul(Q,pt),b=b+Math.imul(R,Je)|0,M=Math.imul(R,pt),S=S+Math.imul(se,ft)|0,b=b+Math.imul(se,Ht)|0,b=b+Math.imul(ee,ft)|0,M=M+Math.imul(ee,Ht)|0,S=S+Math.imul(F,St)|0,b=b+Math.imul(F,er)|0,b=b+Math.imul(ce,St)|0,M=M+Math.imul(ce,er)|0;var it=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(it>>>26)|0,it&=67108863,S=Math.imul(te,Je),b=Math.imul(te,pt),b=b+Math.imul(le,Je)|0,M=Math.imul(le,pt),S=S+Math.imul(Q,ft)|0,b=b+Math.imul(Q,Ht)|0,b=b+Math.imul(R,ft)|0,M=M+Math.imul(R,Ht)|0,S=S+Math.imul(se,St)|0,b=b+Math.imul(se,er)|0,b=b+Math.imul(ee,St)|0,M=M+Math.imul(ee,er)|0,S=S+Math.imul(F,Ot)|0,b=b+Math.imul(F,Bt)|0,b=b+Math.imul(ce,Ot)|0,M=M+Math.imul(ce,Bt)|0;var Ue=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,S=Math.imul(fe,Je),b=Math.imul(fe,pt),b=b+Math.imul(ve,Je)|0,M=Math.imul(ve,pt),S=S+Math.imul(te,ft)|0,b=b+Math.imul(te,Ht)|0,b=b+Math.imul(le,ft)|0,M=M+Math.imul(le,Ht)|0,S=S+Math.imul(Q,St)|0,b=b+Math.imul(Q,er)|0,b=b+Math.imul(R,St)|0,M=M+Math.imul(R,er)|0,S=S+Math.imul(se,Ot)|0,b=b+Math.imul(se,Bt)|0,b=b+Math.imul(ee,Ot)|0,M=M+Math.imul(ee,Bt)|0,S=S+Math.imul(F,vt)|0,b=b+Math.imul(F,Dt)|0,b=b+Math.imul(ce,vt)|0,M=M+Math.imul(ce,Dt)|0;var gt=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(gt>>>26)|0,gt&=67108863,S=Math.imul(Ne,Je),b=Math.imul(Ne,pt),b=b+Math.imul(Te,Je)|0,M=Math.imul(Te,pt),S=S+Math.imul(fe,ft)|0,b=b+Math.imul(fe,Ht)|0,b=b+Math.imul(ve,ft)|0,M=M+Math.imul(ve,Ht)|0,S=S+Math.imul(te,St)|0,b=b+Math.imul(te,er)|0,b=b+Math.imul(le,St)|0,M=M+Math.imul(le,er)|0,S=S+Math.imul(Q,Ot)|0,b=b+Math.imul(Q,Bt)|0,b=b+Math.imul(R,Ot)|0,M=M+Math.imul(R,Bt)|0,S=S+Math.imul(se,vt)|0,b=b+Math.imul(se,Dt)|0,b=b+Math.imul(ee,vt)|0,M=M+Math.imul(ee,Dt)|0,S=S+Math.imul(F,bt)|0,b=b+Math.imul(F,$t)|0,b=b+Math.imul(ce,bt)|0,M=M+Math.imul(ce,$t)|0;var st=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(st>>>26)|0,st&=67108863,S=Math.imul(Ie,Je),b=Math.imul(Ie,pt),b=b+Math.imul(Le,Je)|0,M=Math.imul(Le,pt),S=S+Math.imul(Ne,ft)|0,b=b+Math.imul(Ne,Ht)|0,b=b+Math.imul(Te,ft)|0,M=M+Math.imul(Te,Ht)|0,S=S+Math.imul(fe,St)|0,b=b+Math.imul(fe,er)|0,b=b+Math.imul(ve,St)|0,M=M+Math.imul(ve,er)|0,S=S+Math.imul(te,Ot)|0,b=b+Math.imul(te,Bt)|0,b=b+Math.imul(le,Ot)|0,M=M+Math.imul(le,Bt)|0,S=S+Math.imul(Q,vt)|0,b=b+Math.imul(Q,Dt)|0,b=b+Math.imul(R,vt)|0,M=M+Math.imul(R,Dt)|0,S=S+Math.imul(se,bt)|0,b=b+Math.imul(se,$t)|0,b=b+Math.imul(ee,bt)|0,M=M+Math.imul(ee,$t)|0,S=S+Math.imul(F,nt)|0,b=b+Math.imul(F,Ft)|0,b=b+Math.imul(ce,nt)|0,M=M+Math.imul(ce,Ft)|0;var tt=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(tt>>>26)|0,tt&=67108863,S=Math.imul(ke,Je),b=Math.imul(ke,pt),b=b+Math.imul(ze,Je)|0,M=Math.imul(ze,pt),S=S+Math.imul(Ie,ft)|0,b=b+Math.imul(Ie,Ht)|0,b=b+Math.imul(Le,ft)|0,M=M+Math.imul(Le,Ht)|0,S=S+Math.imul(Ne,St)|0,b=b+Math.imul(Ne,er)|0,b=b+Math.imul(Te,St)|0,M=M+Math.imul(Te,er)|0,S=S+Math.imul(fe,Ot)|0,b=b+Math.imul(fe,Bt)|0,b=b+Math.imul(ve,Ot)|0,M=M+Math.imul(ve,Bt)|0,S=S+Math.imul(te,vt)|0,b=b+Math.imul(te,Dt)|0,b=b+Math.imul(le,vt)|0,M=M+Math.imul(le,Dt)|0,S=S+Math.imul(Q,bt)|0,b=b+Math.imul(Q,$t)|0,b=b+Math.imul(R,bt)|0,M=M+Math.imul(R,$t)|0,S=S+Math.imul(se,nt)|0,b=b+Math.imul(se,Ft)|0,b=b+Math.imul(ee,nt)|0,M=M+Math.imul(ee,Ft)|0,S=S+Math.imul(F,W)|0,b=b+Math.imul(F,V)|0,b=b+Math.imul(ce,W)|0,M=M+Math.imul(ce,V)|0;var At=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(At>>>26)|0,At&=67108863,S=Math.imul(Ee,Je),b=Math.imul(Ee,pt),b=b+Math.imul(Qe,Je)|0,M=Math.imul(Qe,pt),S=S+Math.imul(ke,ft)|0,b=b+Math.imul(ke,Ht)|0,b=b+Math.imul(ze,ft)|0,M=M+Math.imul(ze,Ht)|0,S=S+Math.imul(Ie,St)|0,b=b+Math.imul(Ie,er)|0,b=b+Math.imul(Le,St)|0,M=M+Math.imul(Le,er)|0,S=S+Math.imul(Ne,Ot)|0,b=b+Math.imul(Ne,Bt)|0,b=b+Math.imul(Te,Ot)|0,M=M+Math.imul(Te,Bt)|0,S=S+Math.imul(fe,vt)|0,b=b+Math.imul(fe,Dt)|0,b=b+Math.imul(ve,vt)|0,M=M+Math.imul(ve,Dt)|0,S=S+Math.imul(te,bt)|0,b=b+Math.imul(te,$t)|0,b=b+Math.imul(le,bt)|0,M=M+Math.imul(le,$t)|0,S=S+Math.imul(Q,nt)|0,b=b+Math.imul(Q,Ft)|0,b=b+Math.imul(R,nt)|0,M=M+Math.imul(R,Ft)|0,S=S+Math.imul(se,W)|0,b=b+Math.imul(se,V)|0,b=b+Math.imul(ee,W)|0,M=M+Math.imul(ee,V)|0,S=S+Math.imul(F,Y)|0,b=b+Math.imul(F,U)|0,b=b+Math.imul(ce,Y)|0,M=M+Math.imul(ce,U)|0;var Rt=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,S=Math.imul(Be,Je),b=Math.imul(Be,pt),b=b+Math.imul(et,Je)|0,M=Math.imul(et,pt),S=S+Math.imul(Ee,ft)|0,b=b+Math.imul(Ee,Ht)|0,b=b+Math.imul(Qe,ft)|0,M=M+Math.imul(Qe,Ht)|0,S=S+Math.imul(ke,St)|0,b=b+Math.imul(ke,er)|0,b=b+Math.imul(ze,St)|0,M=M+Math.imul(ze,er)|0,S=S+Math.imul(Ie,Ot)|0,b=b+Math.imul(Ie,Bt)|0,b=b+Math.imul(Le,Ot)|0,M=M+Math.imul(Le,Bt)|0,S=S+Math.imul(Ne,vt)|0,b=b+Math.imul(Ne,Dt)|0,b=b+Math.imul(Te,vt)|0,M=M+Math.imul(Te,Dt)|0,S=S+Math.imul(fe,bt)|0,b=b+Math.imul(fe,$t)|0,b=b+Math.imul(ve,bt)|0,M=M+Math.imul(ve,$t)|0,S=S+Math.imul(te,nt)|0,b=b+Math.imul(te,Ft)|0,b=b+Math.imul(le,nt)|0,M=M+Math.imul(le,Ft)|0,S=S+Math.imul(Q,W)|0,b=b+Math.imul(Q,V)|0,b=b+Math.imul(R,W)|0,M=M+Math.imul(R,V)|0,S=S+Math.imul(se,Y)|0,b=b+Math.imul(se,U)|0,b=b+Math.imul(ee,Y)|0,M=M+Math.imul(ee,U)|0,S=S+Math.imul(F,ge)|0,b=b+Math.imul(F,xe)|0,b=b+Math.imul(ce,ge)|0,M=M+Math.imul(ce,xe)|0;var Mt=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,S=Math.imul(Be,ft),b=Math.imul(Be,Ht),b=b+Math.imul(et,ft)|0,M=Math.imul(et,Ht),S=S+Math.imul(Ee,St)|0,b=b+Math.imul(Ee,er)|0,b=b+Math.imul(Qe,St)|0,M=M+Math.imul(Qe,er)|0,S=S+Math.imul(ke,Ot)|0,b=b+Math.imul(ke,Bt)|0,b=b+Math.imul(ze,Ot)|0,M=M+Math.imul(ze,Bt)|0,S=S+Math.imul(Ie,vt)|0,b=b+Math.imul(Ie,Dt)|0,b=b+Math.imul(Le,vt)|0,M=M+Math.imul(Le,Dt)|0,S=S+Math.imul(Ne,bt)|0,b=b+Math.imul(Ne,$t)|0,b=b+Math.imul(Te,bt)|0,M=M+Math.imul(Te,$t)|0,S=S+Math.imul(fe,nt)|0,b=b+Math.imul(fe,Ft)|0,b=b+Math.imul(ve,nt)|0,M=M+Math.imul(ve,Ft)|0,S=S+Math.imul(te,W)|0,b=b+Math.imul(te,V)|0,b=b+Math.imul(le,W)|0,M=M+Math.imul(le,V)|0,S=S+Math.imul(Q,Y)|0,b=b+Math.imul(Q,U)|0,b=b+Math.imul(R,Y)|0,M=M+Math.imul(R,U)|0,S=S+Math.imul(se,ge)|0,b=b+Math.imul(se,xe)|0,b=b+Math.imul(ee,ge)|0,M=M+Math.imul(ee,xe)|0;var Et=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(Et>>>26)|0,Et&=67108863,S=Math.imul(Be,St),b=Math.imul(Be,er),b=b+Math.imul(et,St)|0,M=Math.imul(et,er),S=S+Math.imul(Ee,Ot)|0,b=b+Math.imul(Ee,Bt)|0,b=b+Math.imul(Qe,Ot)|0,M=M+Math.imul(Qe,Bt)|0,S=S+Math.imul(ke,vt)|0,b=b+Math.imul(ke,Dt)|0,b=b+Math.imul(ze,vt)|0,M=M+Math.imul(ze,Dt)|0,S=S+Math.imul(Ie,bt)|0,b=b+Math.imul(Ie,$t)|0,b=b+Math.imul(Le,bt)|0,M=M+Math.imul(Le,$t)|0,S=S+Math.imul(Ne,nt)|0,b=b+Math.imul(Ne,Ft)|0,b=b+Math.imul(Te,nt)|0,M=M+Math.imul(Te,Ft)|0,S=S+Math.imul(fe,W)|0,b=b+Math.imul(fe,V)|0,b=b+Math.imul(ve,W)|0,M=M+Math.imul(ve,V)|0,S=S+Math.imul(te,Y)|0,b=b+Math.imul(te,U)|0,b=b+Math.imul(le,Y)|0,M=M+Math.imul(le,U)|0,S=S+Math.imul(Q,ge)|0,b=b+Math.imul(Q,xe)|0,b=b+Math.imul(R,ge)|0,M=M+Math.imul(R,xe)|0;var dt=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(dt>>>26)|0,dt&=67108863,S=Math.imul(Be,Ot),b=Math.imul(Be,Bt),b=b+Math.imul(et,Ot)|0,M=Math.imul(et,Bt),S=S+Math.imul(Ee,vt)|0,b=b+Math.imul(Ee,Dt)|0,b=b+Math.imul(Qe,vt)|0,M=M+Math.imul(Qe,Dt)|0,S=S+Math.imul(ke,bt)|0,b=b+Math.imul(ke,$t)|0,b=b+Math.imul(ze,bt)|0,M=M+Math.imul(ze,$t)|0,S=S+Math.imul(Ie,nt)|0,b=b+Math.imul(Ie,Ft)|0,b=b+Math.imul(Le,nt)|0,M=M+Math.imul(Le,Ft)|0,S=S+Math.imul(Ne,W)|0,b=b+Math.imul(Ne,V)|0,b=b+Math.imul(Te,W)|0,M=M+Math.imul(Te,V)|0,S=S+Math.imul(fe,Y)|0,b=b+Math.imul(fe,U)|0,b=b+Math.imul(ve,Y)|0,M=M+Math.imul(ve,U)|0,S=S+Math.imul(te,ge)|0,b=b+Math.imul(te,xe)|0,b=b+Math.imul(le,ge)|0,M=M+Math.imul(le,xe)|0;var _t=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(_t>>>26)|0,_t&=67108863,S=Math.imul(Be,vt),b=Math.imul(Be,Dt),b=b+Math.imul(et,vt)|0,M=Math.imul(et,Dt),S=S+Math.imul(Ee,bt)|0,b=b+Math.imul(Ee,$t)|0,b=b+Math.imul(Qe,bt)|0,M=M+Math.imul(Qe,$t)|0,S=S+Math.imul(ke,nt)|0,b=b+Math.imul(ke,Ft)|0,b=b+Math.imul(ze,nt)|0,M=M+Math.imul(ze,Ft)|0,S=S+Math.imul(Ie,W)|0,b=b+Math.imul(Ie,V)|0,b=b+Math.imul(Le,W)|0,M=M+Math.imul(Le,V)|0,S=S+Math.imul(Ne,Y)|0,b=b+Math.imul(Ne,U)|0,b=b+Math.imul(Te,Y)|0,M=M+Math.imul(Te,U)|0,S=S+Math.imul(fe,ge)|0,b=b+Math.imul(fe,xe)|0,b=b+Math.imul(ve,ge)|0,M=M+Math.imul(ve,xe)|0;var ot=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(ot>>>26)|0,ot&=67108863,S=Math.imul(Be,bt),b=Math.imul(Be,$t),b=b+Math.imul(et,bt)|0,M=Math.imul(et,$t),S=S+Math.imul(Ee,nt)|0,b=b+Math.imul(Ee,Ft)|0,b=b+Math.imul(Qe,nt)|0,M=M+Math.imul(Qe,Ft)|0,S=S+Math.imul(ke,W)|0,b=b+Math.imul(ke,V)|0,b=b+Math.imul(ze,W)|0,M=M+Math.imul(ze,V)|0,S=S+Math.imul(Ie,Y)|0,b=b+Math.imul(Ie,U)|0,b=b+Math.imul(Le,Y)|0,M=M+Math.imul(Le,U)|0,S=S+Math.imul(Ne,ge)|0,b=b+Math.imul(Ne,xe)|0,b=b+Math.imul(Te,ge)|0,M=M+Math.imul(Te,xe)|0;var wt=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(wt>>>26)|0,wt&=67108863,S=Math.imul(Be,nt),b=Math.imul(Be,Ft),b=b+Math.imul(et,nt)|0,M=Math.imul(et,Ft),S=S+Math.imul(Ee,W)|0,b=b+Math.imul(Ee,V)|0,b=b+Math.imul(Qe,W)|0,M=M+Math.imul(Qe,V)|0,S=S+Math.imul(ke,Y)|0,b=b+Math.imul(ke,U)|0,b=b+Math.imul(ze,Y)|0,M=M+Math.imul(ze,U)|0,S=S+Math.imul(Ie,ge)|0,b=b+Math.imul(Ie,xe)|0,b=b+Math.imul(Le,ge)|0,M=M+Math.imul(Le,xe)|0;var lt=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(lt>>>26)|0,lt&=67108863,S=Math.imul(Be,W),b=Math.imul(Be,V),b=b+Math.imul(et,W)|0,M=Math.imul(et,V),S=S+Math.imul(Ee,Y)|0,b=b+Math.imul(Ee,U)|0,b=b+Math.imul(Qe,Y)|0,M=M+Math.imul(Qe,U)|0,S=S+Math.imul(ke,ge)|0,b=b+Math.imul(ke,xe)|0,b=b+Math.imul(ze,ge)|0,M=M+Math.imul(ze,xe)|0;var at=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(at>>>26)|0,at&=67108863,S=Math.imul(Be,Y),b=Math.imul(Be,U),b=b+Math.imul(et,Y)|0,M=Math.imul(et,U),S=S+Math.imul(Ee,ge)|0,b=b+Math.imul(Ee,xe)|0,b=b+Math.imul(Qe,ge)|0,M=M+Math.imul(Qe,xe)|0;var Ae=(_+S|0)+((b&8191)<<13)|0;_=(M+(b>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,S=Math.imul(Be,ge),b=Math.imul(Be,xe),b=b+Math.imul(et,ge)|0,M=Math.imul(et,xe);var Pe=(_+S|0)+((b&8191)<<13)|0;return _=(M+(b>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,x[0]=Re,x[1]=De,x[2]=it,x[3]=Ue,x[4]=gt,x[5]=st,x[6]=tt,x[7]=At,x[8]=Rt,x[9]=Mt,x[10]=Et,x[11]=dt,x[12]=_t,x[13]=ot,x[14]=wt,x[15]=lt,x[16]=at,x[17]=Ae,x[18]=Pe,_!==0&&(x[19]=_,f.length++),f};Math.imul||(O=P);function D(G,E,m){m.negative=E.negative^G.negative,m.length=G.length+E.length;for(var f=0,g=0,v=0;v<m.length-1;v++){var x=g;g=0;for(var _=f&67108863,S=Math.min(v,E.length-1),b=Math.max(0,v-G.length+1);b<=S;b++){var M=v-b,I=G.words[M]|0,F=E.words[b]|0,ce=I*F,N=ce&67108863;x=x+(ce/67108864|0)|0,N=N+_|0,_=N&67108863,x=x+(N>>>26)|0,g+=x>>>26,x&=67108863}m.words[v]=_,f=x,x=g}return f!==0?m.words[v]=f:m.length--,m.strip()}function k(G,E,m){var f=new B;return f.mulp(G,E,m)}s.prototype.mulTo=function(E,m){var f,g=this.length+E.length;return this.length===10&&E.length===10?f=O(this,E,m):g<63?f=P(this,E,m):g<1024?f=D(this,E,m):f=k(this,E,m),f};function B(G,E){this.x=G,this.y=E}B.prototype.makeRBT=function(E){for(var m=new Array(E),f=s.prototype._countBits(E)-1,g=0;g<E;g++)m[g]=this.revBin(g,f,E);return m},B.prototype.revBin=function(E,m,f){if(E===0||E===f-1)return E;for(var g=0,v=0;v<m;v++)g|=(E&1)<<m-v-1,E>>=1;return g},B.prototype.permute=function(E,m,f,g,v,x){for(var _=0;_<x;_++)g[_]=m[E[_]],v[_]=f[E[_]]},B.prototype.transform=function(E,m,f,g,v,x){this.permute(x,E,m,f,g,v);for(var _=1;_<v;_<<=1)for(var S=_<<1,b=Math.cos(2*Math.PI/S),M=Math.sin(2*Math.PI/S),I=0;I<v;I+=S)for(var F=b,ce=M,N=0;N<_;N++){var se=f[I+N],ee=g[I+N],X=f[I+N+_],Q=g[I+N+_],R=F*X-ce*Q;Q=F*Q+ce*X,X=R,f[I+N]=se+X,g[I+N]=ee+Q,f[I+N+_]=se-X,g[I+N+_]=ee-Q,N!==S&&(R=b*F-M*ce,ce=b*ce+M*F,F=R)}},B.prototype.guessLen13b=function(E,m){var f=Math.max(m,E)|1,g=f&1,v=0;for(f=f/2|0;f;f=f>>>1)v++;return 1<<v+1+g},B.prototype.conjugate=function(E,m,f){if(!(f<=1))for(var g=0;g<f/2;g++){var v=E[g];E[g]=E[f-g-1],E[f-g-1]=v,v=m[g],m[g]=-m[f-g-1],m[f-g-1]=-v}},B.prototype.normalize13b=function(E,m){for(var f=0,g=0;g<m/2;g++){var v=Math.round(E[2*g+1]/m)*8192+Math.round(E[2*g]/m)+f;E[g]=v&67108863,v<67108864?f=0:f=v/67108864|0}return E},B.prototype.convert13b=function(E,m,f,g){for(var v=0,x=0;x<m;x++)v=v+(E[x]|0),f[2*x]=v&8191,v=v>>>13,f[2*x+1]=v&8191,v=v>>>13;for(x=2*m;x<g;++x)f[x]=0;n(v===0),n((v&-8192)===0)},B.prototype.stub=function(E){for(var m=new Array(E),f=0;f<E;f++)m[f]=0;return m},B.prototype.mulp=function(E,m,f){var g=2*this.guessLen13b(E.length,m.length),v=this.makeRBT(g),x=this.stub(g),_=new Array(g),S=new Array(g),b=new Array(g),M=new Array(g),I=new Array(g),F=new Array(g),ce=f.words;ce.length=g,this.convert13b(E.words,E.length,_,g),this.convert13b(m.words,m.length,M,g),this.transform(_,x,S,b,g,v),this.transform(M,x,I,F,g,v);for(var N=0;N<g;N++){var se=S[N]*I[N]-b[N]*F[N];b[N]=S[N]*F[N]+b[N]*I[N],S[N]=se}return this.conjugate(S,b,g),this.transform(S,b,ce,x,g,v),this.conjugate(ce,x,g),this.normalize13b(ce,g),f.negative=E.negative^m.negative,f.length=E.length+m.length,f.strip()},s.prototype.mul=function(E){var m=new s(null);return m.words=new Array(this.length+E.length),this.mulTo(E,m)},s.prototype.mulf=function(E){var m=new s(null);return m.words=new Array(this.length+E.length),k(this,E,m)},s.prototype.imul=function(E){return this.clone().mulTo(E,this)},s.prototype.imuln=function(E){n(typeof E=="number"),n(E<67108864);for(var m=0,f=0;f<this.length;f++){var g=(this.words[f]|0)*E,v=(g&67108863)+(m&67108863);m>>=26,m+=g/67108864|0,m+=v>>>26,this.words[f]=v&67108863}return m!==0&&(this.words[f]=m,this.length++),this},s.prototype.muln=function(E){return this.clone().imuln(E)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(E){var m=A(E);if(m.length===0)return new s(1);for(var f=this,g=0;g<m.length&&m[g]===0;g++,f=f.sqr());if(++g<m.length)for(var v=f.sqr();g<m.length;g++,v=v.sqr())m[g]!==0&&(f=f.mul(v));return f},s.prototype.iushln=function(E){n(typeof E=="number"&&E>=0);var m=E%26,f=(E-m)/26,g=67108863>>>26-m<<26-m,v;if(m!==0){var x=0;for(v=0;v<this.length;v++){var _=this.words[v]&g,S=(this.words[v]|0)-_<<m;this.words[v]=S|x,x=_>>>26-m}x&&(this.words[v]=x,this.length++)}if(f!==0){for(v=this.length-1;v>=0;v--)this.words[v+f]=this.words[v];for(v=0;v<f;v++)this.words[v]=0;this.length+=f}return this.strip()},s.prototype.ishln=function(E){return n(this.negative===0),this.iushln(E)},s.prototype.iushrn=function(E,m,f){n(typeof E=="number"&&E>=0);var g;m?g=(m-m%26)/26:g=0;var v=E%26,x=Math.min((E-v)/26,this.length),_=67108863^67108863>>>v<<v,S=f;if(g-=x,g=Math.max(0,g),S){for(var b=0;b<x;b++)S.words[b]=this.words[b];S.length=x}if(x!==0)if(this.length>x)for(this.length-=x,b=0;b<this.length;b++)this.words[b]=this.words[b+x];else this.words[0]=0,this.length=1;var M=0;for(b=this.length-1;b>=0&&(M!==0||b>=g);b--){var I=this.words[b]|0;this.words[b]=M<<26-v|I>>>v,M=I&_}return S&&M!==0&&(S.words[S.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(E,m,f){return n(this.negative===0),this.iushrn(E,m,f)},s.prototype.shln=function(E){return this.clone().ishln(E)},s.prototype.ushln=function(E){return this.clone().iushln(E)},s.prototype.shrn=function(E){return this.clone().ishrn(E)},s.prototype.ushrn=function(E){return this.clone().iushrn(E)},s.prototype.testn=function(E){n(typeof E=="number"&&E>=0);var m=E%26,f=(E-m)/26,g=1<<m;if(this.length<=f)return!1;var v=this.words[f];return!!(v&g)},s.prototype.imaskn=function(E){n(typeof E=="number"&&E>=0);var m=E%26,f=(E-m)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(m!==0&&f++,this.length=Math.min(f,this.length),m!==0){var g=67108863^67108863>>>m<<m;this.words[this.length-1]&=g}return this.strip()},s.prototype.maskn=function(E){return this.clone().imaskn(E)},s.prototype.iaddn=function(E){return n(typeof E=="number"),n(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},s.prototype._iaddn=function(E){this.words[0]+=E;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},s.prototype.isubn=function(E){if(n(typeof E=="number"),n(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},s.prototype.addn=function(E){return this.clone().iaddn(E)},s.prototype.subn=function(E){return this.clone().isubn(E)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(E,m,f){var g=E.length+f,v;this._expand(g);var x,_=0;for(v=0;v<E.length;v++){x=(this.words[v+f]|0)+_;var S=(E.words[v]|0)*m;x-=S&67108863,_=(x>>26)-(S/67108864|0),this.words[v+f]=x&67108863}for(;v<this.length-f;v++)x=(this.words[v+f]|0)+_,_=x>>26,this.words[v+f]=x&67108863;if(_===0)return this.strip();for(n(_===-1),_=0,v=0;v<this.length;v++)x=-(this.words[v]|0)+_,_=x>>26,this.words[v]=x&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(E,m){var f=this.length-E.length,g=this.clone(),v=E,x=v.words[v.length-1]|0,_=this._countBits(x);f=26-_,f!==0&&(v=v.ushln(f),g.iushln(f),x=v.words[v.length-1]|0);var S=g.length-v.length,b;if(m!=="mod"){b=new s(null),b.length=S+1,b.words=new Array(b.length);for(var M=0;M<b.length;M++)b.words[M]=0}var I=g.clone()._ishlnsubmul(v,1,S);I.negative===0&&(g=I,b&&(b.words[S]=1));for(var F=S-1;F>=0;F--){var ce=(g.words[v.length+F]|0)*67108864+(g.words[v.length+F-1]|0);for(ce=Math.min(ce/x|0,67108863),g._ishlnsubmul(v,ce,F);g.negative!==0;)ce--,g.negative=0,g._ishlnsubmul(v,1,F),g.isZero()||(g.negative^=1);b&&(b.words[F]=ce)}return b&&b.strip(),g.strip(),m!=="div"&&f!==0&&g.iushrn(f),{div:b||null,mod:g}},s.prototype.divmod=function(E,m,f){if(n(!E.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,v,x;return this.negative!==0&&E.negative===0?(x=this.neg().divmod(E,m),m!=="mod"&&(g=x.div.neg()),m!=="div"&&(v=x.mod.neg(),f&&v.negative!==0&&v.iadd(E)),{div:g,mod:v}):this.negative===0&&E.negative!==0?(x=this.divmod(E.neg(),m),m!=="mod"&&(g=x.div.neg()),{div:g,mod:x.mod}):this.negative&E.negative?(x=this.neg().divmod(E.neg(),m),m!=="div"&&(v=x.mod.neg(),f&&v.negative!==0&&v.isub(E)),{div:x.div,mod:v}):E.length>this.length||this.cmp(E)<0?{div:new s(0),mod:this}:E.length===1?m==="div"?{div:this.divn(E.words[0]),mod:null}:m==="mod"?{div:null,mod:new s(this.modn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new s(this.modn(E.words[0]))}:this._wordDiv(E,m)},s.prototype.div=function(E){return this.divmod(E,"div",!1).div},s.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},s.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},s.prototype.divRound=function(E){var m=this.divmod(E);if(m.mod.isZero())return m.div;var f=m.div.negative!==0?m.mod.isub(E):m.mod,g=E.ushrn(1),v=E.andln(1),x=f.cmp(g);return x<0||v===1&&x===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},s.prototype.modn=function(E){n(E<=67108863);for(var m=(1<<26)%E,f=0,g=this.length-1;g>=0;g--)f=(m*f+(this.words[g]|0))%E;return f},s.prototype.idivn=function(E){n(E<=67108863);for(var m=0,f=this.length-1;f>=0;f--){var g=(this.words[f]|0)+m*67108864;this.words[f]=g/E|0,m=g%E}return this.strip()},s.prototype.divn=function(E){return this.clone().idivn(E)},s.prototype.egcd=function(E){n(E.negative===0),n(!E.isZero());var m=this,f=E.clone();m.negative!==0?m=m.umod(E):m=m.clone();for(var g=new s(1),v=new s(0),x=new s(0),_=new s(1),S=0;m.isEven()&&f.isEven();)m.iushrn(1),f.iushrn(1),++S;for(var b=f.clone(),M=m.clone();!m.isZero();){for(var I=0,F=1;!(m.words[0]&F)&&I<26;++I,F<<=1);if(I>0)for(m.iushrn(I);I-- >0;)(g.isOdd()||v.isOdd())&&(g.iadd(b),v.isub(M)),g.iushrn(1),v.iushrn(1);for(var ce=0,N=1;!(f.words[0]&N)&&ce<26;++ce,N<<=1);if(ce>0)for(f.iushrn(ce);ce-- >0;)(x.isOdd()||_.isOdd())&&(x.iadd(b),_.isub(M)),x.iushrn(1),_.iushrn(1);m.cmp(f)>=0?(m.isub(f),g.isub(x),v.isub(_)):(f.isub(m),x.isub(g),_.isub(v))}return{a:x,b:_,gcd:f.iushln(S)}},s.prototype._invmp=function(E){n(E.negative===0),n(!E.isZero());var m=this,f=E.clone();m.negative!==0?m=m.umod(E):m=m.clone();for(var g=new s(1),v=new s(0),x=f.clone();m.cmpn(1)>0&&f.cmpn(1)>0;){for(var _=0,S=1;!(m.words[0]&S)&&_<26;++_,S<<=1);if(_>0)for(m.iushrn(_);_-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);for(var b=0,M=1;!(f.words[0]&M)&&b<26;++b,M<<=1);if(b>0)for(f.iushrn(b);b-- >0;)v.isOdd()&&v.iadd(x),v.iushrn(1);m.cmp(f)>=0?(m.isub(f),g.isub(v)):(f.isub(m),v.isub(g))}var I;return m.cmpn(1)===0?I=g:I=v,I.cmpn(0)<0&&I.iadd(E),I},s.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var m=this.clone(),f=E.clone();m.negative=0,f.negative=0;for(var g=0;m.isEven()&&f.isEven();g++)m.iushrn(1),f.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;f.isEven();)f.iushrn(1);var v=m.cmp(f);if(v<0){var x=m;m=f,f=x}else if(v===0||f.cmpn(1)===0)break;m.isub(f)}while(!0);return f.iushln(g)},s.prototype.invm=function(E){return this.egcd(E).a.umod(E)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(E){return this.words[0]&E},s.prototype.bincn=function(E){n(typeof E=="number");var m=E%26,f=(E-m)/26,g=1<<m;if(this.length<=f)return this._expand(f+1),this.words[f]|=g,this;for(var v=g,x=f;v!==0&&x<this.length;x++){var _=this.words[x]|0;_+=v,v=_>>>26,_&=67108863,this.words[x]=_}return v!==0&&(this.words[x]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(E){var m=E<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var f;if(this.length>1)f=1;else{m&&(E=-E),n(E<=67108863,"Number is too big");var g=this.words[0]|0;f=g===E?0:g<E?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var m=this.ucmp(E);return this.negative!==0?-m|0:m},s.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var m=0,f=this.length-1;f>=0;f--){var g=this.words[f]|0,v=E.words[f]|0;if(g!==v){g<v?m=-1:g>v&&(m=1);break}}return m},s.prototype.gtn=function(E){return this.cmpn(E)===1},s.prototype.gt=function(E){return this.cmp(E)===1},s.prototype.gten=function(E){return this.cmpn(E)>=0},s.prototype.gte=function(E){return this.cmp(E)>=0},s.prototype.ltn=function(E){return this.cmpn(E)===-1},s.prototype.lt=function(E){return this.cmp(E)===-1},s.prototype.lten=function(E){return this.cmpn(E)<=0},s.prototype.lte=function(E){return this.cmp(E)<=0},s.prototype.eqn=function(E){return this.cmpn(E)===0},s.prototype.eq=function(E){return this.cmp(E)===0},s.red=function(E){return new ue(E)},s.prototype.toRed=function(E){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(E){return this.red=E,this},s.prototype.forceRed=function(E){return n(!this.red,"Already a number in reduction context"),this._forceRed(E)},s.prototype.redAdd=function(E){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},s.prototype.redIAdd=function(E){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},s.prototype.redSub=function(E){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},s.prototype.redISub=function(E){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},s.prototype.redShl=function(E){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},s.prototype.redMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},s.prototype.redIMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(E){return n(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var q={k256:null,p224:null,p192:null,p25519:null};function j(G,E){this.name=G,this.p=new s(E,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var E=new s(null);return E.words=new Array(Math.ceil(this.n/13)),E},j.prototype.ireduce=function(E){var m=E,f;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),f=m.bitLength();while(f>this.n);var g=f<this.n?-1:m.ucmp(this.p);return g===0?(m.words[0]=0,m.length=1):g>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},j.prototype.split=function(E,m){E.iushrn(this.n,0,m)},j.prototype.imulK=function(E){return E.imul(this.k)};function H(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(H,j),H.prototype.split=function(E,m){for(var f=4194303,g=Math.min(E.length,9),v=0;v<g;v++)m.words[v]=E.words[v];if(m.length=g,E.length<=9){E.words[0]=0,E.length=1;return}var x=E.words[9];for(m.words[m.length++]=x&f,v=10;v<E.length;v++){var _=E.words[v]|0;E.words[v-10]=(_&f)<<4|x>>>22,x=_}x>>>=22,E.words[v-10]=x,x===0&&E.length>10?E.length-=10:E.length-=9},H.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var m=0,f=0;f<E.length;f++){var g=E.words[f]|0;m+=g*977,E.words[f]=m&67108863,m=g*64+(m/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function J(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(J,j);function T(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(T,j);function z(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,j),z.prototype.imulK=function(E){for(var m=0,f=0;f<E.length;f++){var g=(E.words[f]|0)*19+m,v=g&67108863;g>>>=26,E.words[f]=v,m=g}return m!==0&&(E.words[E.length++]=m),E},s._prime=function(E){if(q[E])return q[E];var m;if(E==="k256")m=new H;else if(E==="p224")m=new J;else if(E==="p192")m=new T;else if(E==="p25519")m=new z;else throw new Error("Unknown prime "+E);return q[E]=m,m};function ue(G){if(typeof G=="string"){var E=s._prime(G);this.m=E.p,this.prime=E}else n(G.gtn(1),"modulus must be greater than 1"),this.m=G,this.prime=null}ue.prototype._verify1=function(E){n(E.negative===0,"red works only with positives"),n(E.red,"red works only with red numbers")},ue.prototype._verify2=function(E,m){n((E.negative|m.negative)===0,"red works only with positives"),n(E.red&&E.red===m.red,"red works only with red numbers")},ue.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):E.umod(this.m)._forceRed(this)},ue.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},ue.prototype.add=function(E,m){this._verify2(E,m);var f=E.add(m);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},ue.prototype.iadd=function(E,m){this._verify2(E,m);var f=E.iadd(m);return f.cmp(this.m)>=0&&f.isub(this.m),f},ue.prototype.sub=function(E,m){this._verify2(E,m);var f=E.sub(m);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},ue.prototype.isub=function(E,m){this._verify2(E,m);var f=E.isub(m);return f.cmpn(0)<0&&f.iadd(this.m),f},ue.prototype.shl=function(E,m){return this._verify1(E),this.imod(E.ushln(m))},ue.prototype.imul=function(E,m){return this._verify2(E,m),this.imod(E.imul(m))},ue.prototype.mul=function(E,m){return this._verify2(E,m),this.imod(E.mul(m))},ue.prototype.isqr=function(E){return this.imul(E,E.clone())},ue.prototype.sqr=function(E){return this.mul(E,E)},ue.prototype.sqrt=function(E){if(E.isZero())return E.clone();var m=this.m.andln(3);if(n(m%2===1),m===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(E,f)}for(var g=this.m.subn(1),v=0;!g.isZero()&&g.andln(1)===0;)v++,g.iushrn(1);n(!g.isZero());var x=new s(1).toRed(this),_=x.redNeg(),S=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new s(2*b*b).toRed(this);this.pow(b,S).cmp(_)!==0;)b.redIAdd(_);for(var M=this.pow(b,g),I=this.pow(E,g.addn(1).iushrn(1)),F=this.pow(E,g),ce=v;F.cmp(x)!==0;){for(var N=F,se=0;N.cmp(x)!==0;se++)N=N.redSqr();n(se<ce);var ee=this.pow(M,new s(1).iushln(ce-se-1));I=I.redMul(ee),M=ee.redSqr(),F=F.redMul(M),ce=se}return I},ue.prototype.invm=function(E){var m=E._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},ue.prototype.pow=function(E,m){if(m.isZero())return new s(1).toRed(this);if(m.cmpn(1)===0)return E.clone();var f=4,g=new Array(1<<f);g[0]=new s(1).toRed(this),g[1]=E;for(var v=2;v<g.length;v++)g[v]=this.mul(g[v-1],E);var x=g[0],_=0,S=0,b=m.bitLength()%26;for(b===0&&(b=26),v=m.length-1;v>=0;v--){for(var M=m.words[v],I=b-1;I>=0;I--){var F=M>>I&1;if(x!==g[0]&&(x=this.sqr(x)),F===0&&_===0){S=0;continue}_<<=1,_|=F,S++,!(S!==f&&(v!==0||I!==0))&&(x=this.mul(x,g[_]),S=0,_=0)}b=26}return x},ue.prototype.convertTo=function(E){var m=E.umod(this.m);return m===E?m.clone():m},ue.prototype.convertFrom=function(E){var m=E.clone();return m.red=null,m},s.mont=function(E){return new _e(E)};function _e(G){ue.call(this,G),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(_e,ue),_e.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},_e.prototype.convertFrom=function(E){var m=this.imod(E.mul(this.rinv));return m.red=null,m},_e.prototype.imul=function(E,m){if(E.isZero()||m.isZero())return E.words[0]=0,E.length=1,E;var f=E.imul(m),g=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(g).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},_e.prototype.mul=function(E,m){if(E.isZero()||m.isZero())return new s(0)._forceRed(this);var f=E.mul(m),g=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(g).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},_e.prototype.invm=function(E){var m=this.imod(E._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(t,nn)}(Wm);var xo=Wm.exports,Km={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)a[u]=s[u]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)a.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var l=s.charCodeAt(u),d=l>>8,p=l&255;d?a.push(d,p):a.push(p)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(Km),function(t){var e=t,r=xo,n=Ga,i=Km;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(d,p,y){var A=new Array(Math.max(d.bitLength(),y)+1),P;for(P=0;P<A.length;P+=1)A[P]=0;var O=1<<p+1,D=d.clone();for(P=0;P<A.length;P++){var k,B=D.andln(O-1);D.isOdd()?(B>(O>>1)-1?k=(O>>1)-B:k=B,D.isubn(k)):k=0,A[P]=k,D.iushrn(1)}return A}e.getNAF=s;function o(d,p){var y=[[],[]];d=d.clone(),p=p.clone();for(var A=0,P=0,O;d.cmpn(-A)>0||p.cmpn(-P)>0;){var D=d.andln(3)+A&3,k=p.andln(3)+P&3;D===3&&(D=-1),k===3&&(k=-1);var B;D&1?(O=d.andln(7)+A&7,(O===3||O===5)&&k===2?B=-D:B=D):B=0,y[0].push(B);var q;k&1?(O=p.andln(7)+P&7,(O===3||O===5)&&D===2?q=-k:q=k):q=0,y[1].push(q),2*A===B+1&&(A=1-A),2*P===q+1&&(P=1-P),d.iushrn(1),p.iushrn(1)}return y}e.getJSF=o;function a(d,p,y){var A="_"+p;d.prototype[p]=function(){return this[A]!==void 0?this[A]:this[A]=y.call(this)}}e.cachedProperty=a;function u(d){return typeof d=="string"?e.toArray(d,"hex"):d}e.parseBytes=u;function l(d){return new r(d,"hex","le")}e.intFromLE=l}(Ti);var Vm={exports:{}},Gm;Vm.exports=function(e){return Gm||(Gm=new aa(null)),Gm.generate(e)};function aa(t){this.rand=t}if(Vm.exports.Rand=aa,aa.prototype.generate=function(e){return this._rand(e)},aa.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r},typeof self=="object")self.crypto&&self.crypto.getRandomValues?aa.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?aa.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(aa.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var M3=tl;if(typeof M3.randomBytes!="function")throw new Error("Not supported");aa.prototype._rand=function(e){return M3.randomBytes(e)}}catch{}var I3=Vm.exports,Ym={},Xa=xo,hl=Ti,Cd=hl.getNAF,Nk=hl.getJSF,Td=hl.assert;function ca(t,e){this.type=t,this.p=new Xa(e.p,16),this.red=e.prime?Xa.red(e.prime):Xa.mont(this.p),this.zero=new Xa(0).toRed(this.red),this.one=new Xa(1).toRed(this.red),this.two=new Xa(2).toRed(this.red),this.n=e.n&&new Xa(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Rd=ca;ca.prototype.point=function(){throw new Error("Not implemented")},ca.prototype.validate=function(){throw new Error("Not implemented")},ca.prototype._fixedNafMul=function(e,r){Td(e.precomputed);var n=e._getDoubles(),i=Cd(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var l=a+n.step-1;l>=a;l--)u=(u<<1)+i[l];o.push(u)}for(var d=this.jpoint(null,null,null),p=this.jpoint(null,null,null),y=s;y>0;y--){for(a=0;a<o.length;a++)u=o[a],u===y?p=p.mixedAdd(n.points[a]):u===-y&&(p=p.mixedAdd(n.points[a].neg()));d=d.add(p)}return d.toP()},ca.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Cd(r,n,this._bitLength),a=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var l=0;u>=0&&o[u]===0;u--)l++;if(u>=0&&l++,a=a.dblp(l),u<0)break;var d=o[u];Td(d!==0),e.type==="affine"?d>0?a=a.mixedAdd(s[d-1>>1]):a=a.mixedAdd(s[-d-1>>1].neg()):d>0?a=a.add(s[d-1>>1]):a=a.add(s[-d-1>>1].neg())}return e.type==="affine"?a.toP():a},ca.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,u=this._wnafT3,l=0,d,p,y;for(d=0;d<i;d++){y=r[d];var A=y._getNAFPoints(e);o[d]=A.wnd,a[d]=A.points}for(d=i-1;d>=1;d-=2){var P=d-1,O=d;if(o[P]!==1||o[O]!==1){u[P]=Cd(n[P],o[P],this._bitLength),u[O]=Cd(n[O],o[O],this._bitLength),l=Math.max(u[P].length,l),l=Math.max(u[O].length,l);continue}var D=[r[P],null,null,r[O]];r[P].y.cmp(r[O].y)===0?(D[1]=r[P].add(r[O]),D[2]=r[P].toJ().mixedAdd(r[O].neg())):r[P].y.cmp(r[O].y.redNeg())===0?(D[1]=r[P].toJ().mixedAdd(r[O]),D[2]=r[P].add(r[O].neg())):(D[1]=r[P].toJ().mixedAdd(r[O]),D[2]=r[P].toJ().mixedAdd(r[O].neg()));var k=[-3,-1,-5,-7,0,7,5,1,3],B=Nk(n[P],n[O]);for(l=Math.max(B[0].length,l),u[P]=new Array(l),u[O]=new Array(l),p=0;p<l;p++){var q=B[0][p]|0,j=B[1][p]|0;u[P][p]=k[(q+1)*3+(j+1)],u[O][p]=0,a[P]=D}}var H=this.jpoint(null,null,null),J=this._wnafT4;for(d=l;d>=0;d--){for(var T=0;d>=0;){var z=!0;for(p=0;p<i;p++)J[p]=u[p][d]|0,J[p]!==0&&(z=!1);if(!z)break;T++,d--}if(d>=0&&T++,H=H.dblp(T),d<0)break;for(p=0;p<i;p++){var ue=J[p];ue!==0&&(ue>0?y=a[p][ue-1>>1]:ue<0&&(y=a[p][-ue-1>>1].neg()),y.type==="affine"?H=H.mixedAdd(y):H=H.add(y))}}for(d=0;d<i;d++)a[d]=null;return s?H:H.toP()};function Ki(t,e){this.curve=t,this.type=e,this.precomputed=null}ca.BasePoint=Ki,Ki.prototype.eq=function(){throw new Error("Not implemented")},Ki.prototype.validate=function(){return this.curve.validate(this)},ca.prototype.decodePoint=function(e,r){e=hl.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Td(e[e.length-1]%2===0):e[0]===7&&Td(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")},Ki.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Ki.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))},Ki.prototype.encode=function(e,r){return hl.encode(this._encode(r),e)},Ki.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},Ki.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},Ki.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}},Ki.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}},Ki.prototype._getBeta=function(){return null},Ki.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Lk=Ti,en=xo,Jm=yd,yu=Rd,kk=Lk.assert;function Vi(t){yu.call(this,"short",t),this.a=new en(t.a,16).toRed(this.red),this.b=new en(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Jm(Vi,yu);var Bk=Vi;Vi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new en(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new en(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],kk(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new en(a.a,16),b:new en(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}},Vi.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:en.mont(e),n=new en(2).toRed(r).redInvm(),i=n.redNeg(),s=new en(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]},Vi.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new en(1),o=new en(0),a=new en(0),u=new en(1),l,d,p,y,A,P,O,D=0,k,B;n.cmpn(0)!==0;){var q=i.div(n);k=i.sub(q.mul(n)),B=a.sub(q.mul(s));var j=u.sub(q.mul(o));if(!p&&k.cmp(r)<0)l=O.neg(),d=s,p=k.neg(),y=B;else if(p&&++D===2)break;O=k,i=n,n=k,a=s,s=B,u=o,o=j}A=k.neg(),P=B;var H=p.sqr().add(y.sqr()),J=A.sqr().add(P.sqr());return J.cmp(H)>=0&&(A=l,P=d),p.negative&&(p=p.neg(),y=y.neg()),A.negative&&(A=A.neg(),P=P.neg()),[{a:p,b:y},{a:A,b:P}]},Vi.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),u=o.mul(i.a),l=s.mul(n.b),d=o.mul(i.b),p=e.sub(a).sub(u),y=l.add(d).neg();return{k1:p,k2:y}},Vi.prototype.pointFromX=function(e,r){e=new en(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)},Vi.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0},Vi.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),u=e[o],l=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=u,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var d=this._wnafMulAdd(1,i,s,o*2,n),p=0;p<o*2;p++)i[p]=null,s[p]=null;return d};function Nn(t,e,r,n){yu.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new en(e,16),this.y=new en(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Jm(Nn,yu.BasePoint),Vi.prototype.point=function(e,r,n){return new Nn(this,e,r,n)},Vi.prototype.pointFromJSON=function(e,r){return Nn.fromJSON(this,e,r)},Nn.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}},Nn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Nn.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},Nn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Nn.prototype.isInfinity=function(){return this.inf},Nn.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},Nn.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},Nn.prototype.getX=function(){return this.x.fromRed()},Nn.prototype.getY=function(){return this.y.fromRed()},Nn.prototype.mul=function(e){return e=new en(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Nn.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},Nn.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},Nn.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},Nn.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r},Nn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function qn(t,e,r,n){yu.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new en(0)):(this.x=new en(e,16),this.y=new en(r,16),this.z=new en(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Jm(qn,yu.BasePoint),Vi.prototype.jpoint=function(e,r,n){return new qn(this,e,r,n)},qn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)},qn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},qn.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),u=i.redSub(s),l=o.redSub(a);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=u.redSqr(),p=d.redMul(u),y=i.redMul(d),A=l.redSqr().redIAdd(p).redISub(y).redISub(y),P=l.redMul(y.redISub(A)).redISub(o.redMul(p)),O=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(A,P,O)},qn.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),u=s.redSub(o);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),d=l.redMul(a),p=n.redMul(l),y=u.redSqr().redIAdd(d).redISub(p).redISub(p),A=u.redMul(p.redISub(y)).redISub(s.redMul(d)),P=this.z.redMul(a);return this.curve.jpoint(y,A,P)},qn.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,u=this.z,l=u.redSqr().redSqr(),d=a.redAdd(a);for(r=0;r<e;r++){var p=o.redSqr(),y=d.redSqr(),A=y.redSqr(),P=p.redAdd(p).redIAdd(p).redIAdd(i.redMul(l)),O=o.redMul(y),D=P.redSqr().redISub(O.redAdd(O)),k=O.redISub(D),B=P.redMul(k);B=B.redIAdd(B).redISub(A);var q=d.redMul(u);r+1<e&&(l=l.redMul(A)),o=D,u=q,d=B}return this.curve.jpoint(o,d.redMul(s),u)},qn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},qn.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),l=u.redSqr().redISub(a).redISub(a),d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),e=l,r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),y=this.y.redSqr(),A=y.redSqr(),P=this.x.redAdd(y).redSqr().redISub(p).redISub(A);P=P.redIAdd(P);var O=p.redAdd(p).redIAdd(p),D=O.redSqr(),k=A.redIAdd(A);k=k.redIAdd(k),k=k.redIAdd(k),e=D.redISub(P).redISub(P),r=O.redMul(P.redISub(e)).redISub(k),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)},qn.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=u.redSqr().redISub(a).redISub(a);e=l;var d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),y=this.y.redSqr(),A=this.x.redMul(y),P=this.x.redSub(p).redMul(this.x.redAdd(p));P=P.redAdd(P).redIAdd(P);var O=A.redIAdd(A);O=O.redIAdd(O);var D=O.redAdd(O);e=P.redSqr().redISub(D),n=this.y.redAdd(this.z).redSqr().redISub(y).redISub(p);var k=y.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k),r=P.redMul(O.redISub(e)).redISub(k)}return this.curve.jpoint(e,r,n)},qn.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),u=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var d=l.redMul(a),p=u.redSqr().redISub(d.redAdd(d)),y=d.redISub(p),A=a.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var P=u.redMul(y).redISub(A),O=n.redAdd(n).redMul(i);return this.curve.jpoint(p,P,O)},qn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var u=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(l),p=r.redMul(d);p=p.redIAdd(p),p=p.redIAdd(p);var y=this.x.redMul(u).redISub(p);y=y.redIAdd(y),y=y.redIAdd(y);var A=this.y.redMul(d.redMul(l.redISub(d)).redISub(a.redMul(u)));A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var P=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(y,A,P)},qn.prototype.mul=function(e,r){return e=new en(e,r),this.curve._wnafMul(this,e)},qn.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0},qn.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}},qn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},qn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var wu=xo,C3=yd,Dd=Rd,$k=Ti;function xu(t){Dd.call(this,"mont",t),this.a=new wu(t.a,16).toRed(this.red),this.b=new wu(t.b,16).toRed(this.red),this.i4=new wu(4).toRed(this.red).redInvm(),this.two=new wu(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}C3(xu,Dd);var Fk=xu;xu.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function Ln(t,e,r){Dd.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new wu(e,16),this.z=new wu(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}C3(Ln,Dd.BasePoint),xu.prototype.decodePoint=function(e,r){return this.point($k.toArray(e,r),1)},xu.prototype.point=function(e,r){return new Ln(this,e,r)},xu.prototype.pointFromJSON=function(e){return Ln.fromJSON(this,e)},Ln.prototype.precompute=function(){},Ln.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Ln.fromJSON=function(e,r){return new Ln(e,r[0],r[1]||e.one)},Ln.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Ln.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Ln.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)},Ln.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Ln.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),u=s.redMul(i),l=r.z.redMul(a.redAdd(u).redSqr()),d=r.x.redMul(a.redISub(u).redSqr());return this.curve.point(l,d)},Ln.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i},Ln.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Ln.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Ln.prototype.eq=function(e){return this.getX().cmp(e.getX())===0},Ln.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Ln.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var jk=Ti,_o=xo,T3=yd,Od=Rd,Uk=jk.assert;function zs(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Od.call(this,"edwards",t),this.a=new _o(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new _o(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new _o(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Uk(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}T3(zs,Od);var qk=zs;zs.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},zs.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},zs.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)},zs.prototype.pointFromX=function(e,r){e=new _o(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var u=a.fromRed().isOdd();return(r&&!u||!r&&u)&&(a=a.redNeg()),this.point(e,a)},zs.prototype.pointFromY=function(e,r){e=new _o(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)},zs.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function Hr(t,e,r,n,i){Od.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new _o(e,16),this.y=new _o(r,16),this.z=n?new _o(n,16):this.curve.one,this.t=i&&new _o(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}T3(Hr,Od.BasePoint),zs.prototype.pointFromJSON=function(e){return Hr.fromJSON(this,e)},zs.prototype.point=function(e,r,n,i){return new Hr(this,e,r,n,i)},Hr.fromJSON=function(e,r){return new Hr(e,r[0],r[1],r[2])},Hr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Hr.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Hr.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),u=i.redSub(r),l=s.redMul(a),d=o.redMul(u),p=s.redMul(u),y=a.redMul(o);return this.curve.point(l,d,y,p)},Hr.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,u,l;if(this.curve.twisted){a=this.curve._mulA(r);var d=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(d.redSub(this.curve.two)),s=d.redMul(a.redSub(n)),o=d.redSqr().redSub(d).redSub(d)):(u=this.z.redSqr(),l=d.redSub(u).redISub(u),i=e.redSub(r).redISub(n).redMul(l),s=d.redMul(a.redSub(n)),o=d.redMul(l))}else a=r.redAdd(n),u=this.curve._mulC(this.z).redSqr(),l=a.redSub(u).redSub(u),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)},Hr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Hr.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),u=s.redAdd(i),l=n.redAdd(r),d=o.redMul(a),p=u.redMul(l),y=o.redMul(l),A=a.redMul(u);return this.curve.point(d,p,A,y)},Hr.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),u=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),d=r.redMul(a).redMul(l),p,y;return this.curve.twisted?(p=r.redMul(u).redMul(s.redSub(this.curve._mulA(i))),y=a.redMul(u)):(p=r.redMul(u).redMul(s.redSub(i)),y=this.curve._mulC(a).redMul(u)),this.curve.point(d,p,y)},Hr.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Hr.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Hr.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)},Hr.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)},Hr.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Hr.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Hr.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Hr.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Hr.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0},Hr.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}},Hr.prototype.toP=Hr.prototype.normalize,Hr.prototype.mixedAdd=Hr.prototype.add,function(t){var e=t;e.base=Rd,e.short=Bk,e.mont=Fk,e.edwards=qk}(Ym);var Nd={},Xm,R3;function zk(){return R3||(R3=1,Xm={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Xm}(function(t){var e=t,r=al,n=Ym,i=Ti,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,d){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var p=new o(d);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:p}),p}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=zk()}catch{u=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})})(Nd);var Hk=al,Za=Km,D3=Ga;function ua(t){if(!(this instanceof ua))return new ua(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Za.toArray(t.entropy,t.entropyEnc||"hex"),r=Za.toArray(t.nonce,t.nonceEnc||"hex"),n=Za.toArray(t.pers,t.persEnc||"hex");D3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Wk=ua;ua.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},ua.prototype._hmac=function(){return new Hk.hmac(this.hash,this.K)},ua.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},ua.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Za.toArray(e,r),n=Za.toArray(n,i),D3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},ua.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Za.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Za.encode(o,r)};var Kk=xo,Vk=Ti,Zm=Vk.assert;function Jn(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Gk=Jn;Jn.fromPublic=function(e,r,n){return r instanceof Jn?r:new Jn(e,{pub:r,pubEnc:n})},Jn.fromPrivate=function(e,r,n){return r instanceof Jn?r:new Jn(e,{priv:r,privEnc:n})},Jn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Jn.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},Jn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Jn.prototype._importPrivate=function(e,r){this.priv=new Kk(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},Jn.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Zm(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Zm(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},Jn.prototype.derive=function(e){return e.validate()||Zm(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Jn.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)},Jn.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)},Jn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ld=xo,Qm=Ti,Yk=Qm.assert;function kd(t,e){if(t instanceof kd)return t;this._importDER(t,e)||(Yk(t.r&&t.s,"Signature without r or s"),this.r=new Ld(t.r,16),this.s=new Ld(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Jk=kd;function Xk(){this.place=0}function e1(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function O3(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}kd.prototype._importDER=function(e,r){e=Qm.toArray(e,r);var n=new Xk;if(e[n.place++]!==48)return!1;var i=e1(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=e1(e,n);if(s===!1||e[n.place]&128)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=e1(e,n);if(a===!1||e.length!==a+n.place||e[n.place]&128)return!1;var u=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new Ld(o),this.s=new Ld(u),this.recoveryParam=null,!0};function t1(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}kd.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=O3(r),n=O3(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];t1(i,r.length),i=i.concat(r),i.push(2),t1(i,n.length);var s=i.concat(n),o=[48];return t1(o,s.length),o=o.concat(s),Qm.encode(o,e)};var Eo=xo,N3=Wk,Zk=Ti,r1=Nd,Qk=I3,L3=Zk.assert,n1=Gk,Bd=Jk;function Gi(t){if(!(this instanceof Gi))return new Gi(t);typeof t=="string"&&(L3(Object.prototype.hasOwnProperty.call(r1,t),"Unknown curve "+t),t=r1[t]),t instanceof r1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var eB=Gi;Gi.prototype.keyPair=function(e){return new n1(this,e)},Gi.prototype.keyFromPrivate=function(e,r){return n1.fromPrivate(this,e,r)},Gi.prototype.keyFromPublic=function(e,r){return n1.fromPublic(this,e,r)},Gi.prototype.genKeyPair=function(e){e||(e={});for(var r=new N3({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Qk(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Eo(2));;){var s=new Eo(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Gi.prototype._truncateToN=function(e,r,n){var i;if(Eo.isBN(e)||typeof e=="number")e=new Eo(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Eo(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Eo(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},Gi.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength);for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),u=new N3({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new Eo(1)),d=0;;d++){var p=i.k?i.k(d):new Eo(u.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(l)>=0)){var y=this.g.mul(p);if(!y.isInfinity()){var A=y.getX(),P=A.umod(this.n);if(P.cmpn(0)!==0){var O=p.invm(this.n).mul(P.mul(r.getPrivate()).iadd(e));if(O=O.umod(this.n),O.cmpn(0)!==0){var D=(y.getY().isOdd()?1:0)|(A.cmp(P)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),D^=1),new Bd({r:P,s:O,recoveryParam:D})}}}}}},Gi.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new Bd(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var u=a.invm(this.n),l=u.mul(e).umod(this.n),d=u.mul(o).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(l,n.getPublic(),d),p.isInfinity()?!1:p.eqXToP(o)):(p=this.g.mulAdd(l,n.getPublic(),d),p.isInfinity()?!1:p.getX().umod(this.n).cmp(o)===0)},Gi.prototype.recoverPubKey=function(t,e,r,n){L3((3&r)===r,"The recovery param is more than two bits"),e=new Bd(e,n);var i=this.n,s=new Eo(t),o=e.r,a=e.s,u=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var d=e.r.invm(i),p=i.sub(s).mul(d).umod(i),y=a.mul(d).umod(i);return this.g.mulAdd(p,o,y)},Gi.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Bd(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var dl=Ti,k3=dl.assert,B3=dl.parseBytes,_u=dl.cachedProperty;function kn(t,e){this.eddsa=t,this._secret=B3(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=B3(e.pub)}kn.fromPublic=function(e,r){return r instanceof kn?r:new kn(e,{pub:r})},kn.fromSecret=function(e,r){return r instanceof kn?r:new kn(e,{secret:r})},kn.prototype.secret=function(){return this._secret},_u(kn,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),_u(kn,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),_u(kn,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i}),_u(kn,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),_u(kn,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),_u(kn,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),kn.prototype.sign=function(e){return k3(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},kn.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)},kn.prototype.getSecret=function(e){return k3(this._secret,"KeyPair is public only"),dl.encode(this.secret(),e)},kn.prototype.getPublic=function(e){return dl.encode(this.pubBytes(),e)};var tB=kn,rB=xo,$d=Ti,$3=$d.assert,Fd=$d.cachedProperty,nB=$d.parseBytes;function Qa(t,e){this.eddsa=t,typeof e!="object"&&(e=nB(e)),Array.isArray(e)&&($3(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),$3(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof rB&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Fd(Qa,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),Fd(Qa,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),Fd(Qa,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),Fd(Qa,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Qa.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Qa.prototype.toHex=function(){return $d.encode(this.toBytes(),"hex").toUpperCase()};var iB=Qa,sB=al,oB=Nd,Eu=Ti,aB=Eu.assert,F3=Eu.parseBytes,j3=tB,U3=iB;function vi(t){if(aB(t==="ed25519","only tested with ed25519 so far"),!(this instanceof vi))return new vi(t);t=oB[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=sB.sha512}var cB=vi;vi.prototype.sign=function(e,r){e=F3(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),u=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:u,Rencoded:o})},vi.prototype.verify=function(e,r,n){if(e=F3(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)},vi.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Eu.intFromLE(e.digest()).umod(this.curve.n)},vi.prototype.keyFromPublic=function(e){return j3.fromPublic(this,e)},vi.prototype.keyFromSecret=function(e){return j3.fromSecret(this,e)},vi.prototype.makeSignature=function(e){return e instanceof U3?e:new U3(this,e)},vi.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r},vi.prototype.decodePoint=function(e){e=Eu.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Eu.intFromLE(n);return this.curve.pointFromY(s,i)},vi.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},vi.prototype.decodeInt=function(e){return Eu.intFromLE(e)},vi.prototype.isPoint=function(e){return e instanceof this.pointClass},function(t){var e=t;e.version=Ok.version,e.utils=Ti,e.rand=I3,e.curve=Ym,e.curves=Nd,e.ec=eB,e.eddsa=cB}(P3);const uB={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},fB=":";function Su(t){const[e,r]=t.split(fB);return{namespace:e,reference:r}}function q3(t,e){return t.includes(":")?[t]:e.chains||[]}var lB=Object.defineProperty,z3=Object.getOwnPropertySymbols,hB=Object.prototype.hasOwnProperty,dB=Object.prototype.propertyIsEnumerable,H3=(t,e,r)=>e in t?lB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,W3=(t,e)=>{for(var r in e||(e={}))hB.call(e,r)&&H3(t,r,e[r]);if(z3)for(var r of z3(e))dB.call(e,r)&&H3(t,r,e[r]);return t};const pB="ReactNative",Ri={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},gB="js";function jd(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Au(){return!nl()&&!!mm()&&navigator.product===pB}function pl(){return!jd()&&!!mm()&&!!nl()}function gl(){return Au()?Ri.reactNative:jd()?Ri.node:pl()?Ri.browser:Ri.unknown}function mB(){var t;try{return Au()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function vB(t,e){let r=il.parse(t);return r=W3(W3({},r),e),t=il.stringify(r),t}function K3(){return Px()||{name:"",description:"",url:"",icons:[""]}}function bB(){if(gl()===Ri.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=HO();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function yB(){var t;const e=gl();return e===Ri.browser?[e,((t=Ax())==null?void 0:t.host)||"unknown"].join(":"):e}function V3(t,e,r){const n=bB(),i=yB();return[[t,e].join("-"),[gB,r].join("-"),n,i].join("/")}function wB({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a}){const u=r.split("?"),l=V3(t,e,n),d={auth:i,ua:l,projectId:s,useOnCloseEvent:o,origin:a||void 0},p=vB(u[1]||"",d);return u[0]+"?"+p}function ec(t,e){return t.filter(r=>e.includes(r)).length===t.length}function G3(t){return Object.fromEntries(t.entries())}function Y3(t){return new Map(Object.entries(t))}function tc(t=mt.FIVE_MINUTES,e){const r=mt.toMiliseconds(t||mt.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function Pu(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function J3(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function xB(t){return J3("topic",t)}function _B(t){return J3("id",t)}function X3(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function En(t,e){return mt.fromMiliseconds(Date.now()+mt.toMiliseconds(t))}function fa(t){return Date.now()>=mt.toMiliseconds(t)}function vr(t,e){return`${t}${e?`:${e}`:""}`}function Ud(t=[],e=[]){return[...new Set([...t,...e])]}async function EB({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=SB(s,t,e),a=gl();if(a===Ri.browser){if(!((n=nl())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}o.startsWith("https://")||o.startsWith("http://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,PB()?"_blank":"_self","noreferrer noopener")}else a===Ri.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function SB(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${MB(n,!0)}`}else i=`${i}/wc?${n}`;return i}async function AB(t,e){let r="";try{if(pl()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function Z3(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function Q3(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function i1(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function PB(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function MB(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function e_(t){return Buffer.from(t,"base64").toString("utf-8")}const IB="https://rpc.walletconnect.org/v1";async function CB(t,e,r,n,i,s){switch(r.t){case"eip191":return TB(t,e,r.s);case"eip1271":return await RB(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function TB(t,e,r){return yk(qx(e),r).toLowerCase()===t.toLowerCase()}async function RB(t,e,r,n,i,s){const o=Su(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",d=r.substring(2),p=qx(e).substring(2),y=a+p+u+l+d,A=await fetch(`${s||IB}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:DB(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:y},"latest"]})}),{result:P}=await A.json();return P?P.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function DB(){return Date.now()+Math.floor(Math.random()*1e3)}var OB=Object.defineProperty,NB=Object.defineProperties,LB=Object.getOwnPropertyDescriptors,t_=Object.getOwnPropertySymbols,kB=Object.prototype.hasOwnProperty,BB=Object.prototype.propertyIsEnumerable,r_=(t,e,r)=>e in t?OB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$B=(t,e)=>{for(var r in e||(e={}))kB.call(e,r)&&r_(t,r,e[r]);if(t_)for(var r of t_(e))BB.call(e,r)&&r_(t,r,e[r]);return t},FB=(t,e)=>NB(t,LB(e));const jB="did:pkh:",s1=t=>t==null?void 0:t.split(":"),UB=t=>{const e=t&&s1(t);if(e)return t.includes(jB)?e[3]:e[1]},o1=t=>{const e=t&&s1(t);if(e)return e[2]+":"+e[3]},qd=t=>{const e=t&&s1(t);if(e)return e.pop()};async function n_(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=i_(i,i.iss),o=qd(i.iss);return await CB(o,s,n,o1(i.iss),r)}const i_=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=qd(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${UB(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,p=t.nbf?`Not Before: ${t.nbf}`:void 0,y=t.requestId?`Request ID: ${t.requestId}`:void 0,A=t.resources?`Resources:${t.resources.map(O=>`
- ${O}`).join("")}`:void 0,P=zd(t.resources);if(P){const O=ml(P);i=JB(i,O)}return[r,n,"",i,"",s,o,a,u,l,d,p,y,A].filter(O=>O!=null).join(`
`)};function qB(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function zB(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function rc(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function HB(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:WB(e,r,n)}}}function WB(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function s_(t){return rc(t),`urn:recap:${qB(t).replace(/=/g,"")}`}function ml(t){const e=zB(t.replace("urn:recap:",""));return rc(e),e}function KB(t,e,r){const n=HB(t,e,r);return s_(n)}function VB(t){return t&&t.includes("urn:recap:")}function GB(t,e){const r=ml(t),n=ml(e),i=YB(r,n);return s_(i)}function YB(t,e){rc(t),rc(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,u)=>a.localeCompare(u)).forEach(a=>{var u,l;n.att[i]=FB($B({},n.att[i]),{[a]:((u=t.att[i])==null?void 0:u[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function JB(t="",e){rc(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const u=Object.keys(e.att[a]).map(p=>({ability:p.split("/")[0],action:p.split("/")[1]}));u.sort((p,y)=>p.action.localeCompare(y.action));const l={};u.forEach(p=>{l[p.ability]||(l[p.ability]=[]),l[p.ability].push(p.action)});const d=Object.keys(l).map(p=>(i++,`(${i}) '${p}': '${l[p].join("', '")}' for '${a}'.`));n.push(d.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function o_(t){var e;const r=ml(t);rc(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function a_(t){const e=ml(t);rc(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function zd(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return VB(e)?e:void 0}const c_="base10",ni="base16",la="base64pad",vl="base64url",bl="utf8",u_=0,So=1,yl=2,XB=0,f_=1,wl=12,a1=32;function ZB(){const t=Hm.generateKeyPair();return{privateKey:Rn(t.secretKey,ni),publicKey:Rn(t.publicKey,ni)}}function c1(){const t=ta.randomBytes(a1);return Rn(t,ni)}function QB(t,e){const r=Hm.sharedKey(Dn(t,ni),Dn(e,ni),!0),n=new Dk(ll.SHA256,r).expand(a1);return Rn(n,ni)}function Hd(t){const e=ll.hash(Dn(t,ni));return Rn(e,ni)}function Ao(t){const e=ll.hash(Dn(t,bl));return Rn(e,ni)}function l_(t){return Dn(`${t}`,c_)}function nc(t){return Number(Rn(t,c_))}function e$(t){const e=l_(typeof t.type<"u"?t.type:u_);if(nc(e)===So&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Dn(t.senderPublicKey,ni):void 0,n=typeof t.iv<"u"?Dn(t.iv,ni):ta.randomBytes(wl),i=new Um.ChaCha20Poly1305(Dn(t.symKey,ni)).seal(n,Dn(t.message,bl));return h_({type:e,sealed:i,iv:n,senderPublicKey:r,encoding:t.encoding})}function t$(t,e){const r=l_(yl),n=ta.randomBytes(wl),i=Dn(t,bl);return h_({type:r,sealed:i,iv:n,encoding:e})}function r$(t){const e=new Um.ChaCha20Poly1305(Dn(t.symKey,ni)),{sealed:r,iv:n}=xl({encoded:t.encoded,encoding:t==null?void 0:t.encoding}),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Rn(i,bl)}function n$(t,e){const{sealed:r}=xl({encoded:t,encoding:e});return Rn(r,bl)}function h_(t){const{encoding:e=la}=t;if(nc(t.type)===yl)return Rn(pd([t.type,t.sealed]),e);if(nc(t.type)===So){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Rn(pd([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Rn(pd([t.type,t.iv,t.sealed]),e)}function xl(t){const{encoded:e,encoding:r=la}=t,n=Dn(e,r),i=n.slice(XB,f_),s=f_;if(nc(i)===So){const l=s+a1,d=l+wl,p=n.slice(s,l),y=n.slice(l,d),A=n.slice(d);return{type:i,sealed:A,iv:y,senderPublicKey:p}}if(nc(i)===yl){const l=n.slice(s),d=ta.randomBytes(wl);return{type:i,sealed:l,iv:d}}const o=s+wl,a=n.slice(s,o),u=n.slice(o);return{type:i,sealed:u,iv:a}}function i$(t,e){const r=xl({encoded:t,encoding:e==null?void 0:e.encoding});return d_({type:nc(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Rn(r.senderPublicKey,ni):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function d_(t){const e=(t==null?void 0:t.type)||u_;if(e===So){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function p_(t){return t.type===So&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function g_(t){return t.type===yl}function s$(t){return new P3.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function o$(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function a$(t){return Buffer.from(o$(t),"base64")}function c$(t,e){const[r,n,i]=t.split("."),s=a$(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),u=`${r}.${n}`,l=new ll.SHA256().update(Buffer.from(u)).digest(),d=s$(e),p=Buffer.from(l).toString("hex");if(!d.verify(p,{r:o,s:a}))throw new Error("Invalid signature");return gm(t).payload}const u$="irn";function u1(t){return(t==null?void 0:t.relay)||{protocol:u$}}function _l(t){const e=uB[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var f$=Object.defineProperty,l$=Object.defineProperties,h$=Object.getOwnPropertyDescriptors,m_=Object.getOwnPropertySymbols,d$=Object.prototype.hasOwnProperty,p$=Object.prototype.propertyIsEnumerable,v_=(t,e,r)=>e in t?f$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b_=(t,e)=>{for(var r in e||(e={}))d$.call(e,r)&&v_(t,r,e[r]);if(m_)for(var r of m_(e))p$.call(e,r)&&v_(t,r,e[r]);return t},g$=(t,e)=>l$(t,h$(e));function m$(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function y_(t){if(!t.includes("wc:")){const u=e_(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=il.parse(s),a=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:n,topic:v$(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:m$(o),methods:a,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function v$(t){return t.startsWith("//")?t.substring(2):t}function b$(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function w_(t){return`${t.protocol}:${t.topic}@${t.version}?`+il.stringify(b_(g$(b_({symKey:t.symKey},b$(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}function Wd(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Mu(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function y$(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Mu(r.accounts))}),e}function w$(t,e){const r=[];return Object.values(t).forEach(n=>{Mu(n.accounts).includes(e)&&r.push(...n.methods)}),r}function x$(t,e){const r=[];return Object.values(t).forEach(n=>{Mu(n.accounts).includes(e)&&r.push(...n.events)}),r}function f1(t){return t.includes(":")}function El(t){return f1(t)?t.split(":")[0]:t}function _$(t){const e={};return t==null||t.forEach(r=>{const[n,i]=r.split(":");e[n]||(e[n]={accounts:[],chains:[],events:[]}),e[n].accounts.push(r),e[n].chains.push(`${n}:${i}`)}),e}function x_(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=_$(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=Ud(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const E$={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},S$={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ut(t,e){const{message:r,code:n}=S$[t];return{message:e?`${r} ${e}`:r,code:n}}function Dr(t,e){const{message:r,code:n}=E$[t];return{message:e?`${r} ${e}`:r,code:n}}function ic(t,e){return!!Array.isArray(t)}function Sl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function bi(t){return typeof t>"u"}function an(t,e){return e&&bi(t)?!0:typeof t=="string"&&!!t.trim().length}function l1(t,e){return typeof t=="number"&&!isNaN(t)}function A$(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return ec(i,n)?(n.forEach(o=>{const{accounts:a,methods:u,events:l}=t.namespaces[o],d=Mu(a),p=r[o];(!ec(q3(o,p),d)||!ec(p.methods,u)||!ec(p.events,l))&&(s=!1)}),s):!1}function Kd(t){return an(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function P$(t){if(an(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Kd(r)}}return!1}function M$(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(an(t,!1)){if(e(t))return!0;const r=e_(t);return e(r)}}catch{}return!1}function I$(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function C$(t){return t==null?void 0:t.topic}function T$(t,e){let r=null;return an(t==null?void 0:t.publicKey,!1)||(r=ut("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function __(t){let e=!0;return ic(t)?t.length&&(e=t.every(r=>an(r,!1))):e=!1,e}function R$(t,e,r){let n=null;return ic(e)&&e.length?e.forEach(i=>{n||Kd(i)||(n=Dr("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Kd(t)||(n=Dr("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function D$(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=R$(i,q3(i,s),`${e} ${r}`);o&&(n=o)}),n}function O$(t,e){let r=null;return ic(t)?t.forEach(n=>{r||P$(n)||(r=Dr("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Dr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function N$(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=O$(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function L$(t,e){let r=null;return __(t==null?void 0:t.methods)?__(t==null?void 0:t.events)||(r=Dr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Dr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function E_(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=L$(n,`${e}, namespace`);i&&(r=i)}),r}function k$(t,e,r){let n=null;if(t&&Sl(t)){const i=E_(t,e);i&&(n=i);const s=D$(t,e,r);s&&(n=s)}else n=ut("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function h1(t,e){let r=null;if(t&&Sl(t)){const n=E_(t,e);n&&(r=n);const i=N$(t,e);i&&(r=i)}else r=ut("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function S_(t){return an(t.protocol,!0)}function B$(t,e){let r=!1;return t?t&&ic(t)&&t.length&&t.forEach(n=>{r=S_(n)}):r=!0,r}function $$(t){return typeof t=="number"}function yi(t){return typeof t<"u"&&typeof t!==null}function F$(t){return!(!t||typeof t!="object"||!t.code||!l1(t.code)||!t.message||!an(t.message,!1))}function j$(t){return!(bi(t)||!an(t.method,!1))}function U$(t){return!(bi(t)||bi(t.result)&&bi(t.error)||!l1(t.id)||!an(t.jsonrpc,!1))}function q$(t){return!(bi(t)||!an(t.name,!1))}function A_(t,e){return!(!Kd(e)||!y$(t).includes(e))}function z$(t,e,r){return an(r,!1)?w$(t,e).includes(r):!1}function H$(t,e,r){return an(r,!1)?x$(t,e).includes(r):!1}function P_(t,e,r){let n=null;const i=W$(t),s=K$(e),o=Object.keys(i),a=Object.keys(s),u=M_(Object.keys(t)),l=M_(Object.keys(e)),d=u.filter(p=>!l.includes(p));return d.length&&(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),ec(o,a)||(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(p=>{if(!p.includes(":")||n)return;const y=Mu(e[p].accounts);y.includes(p)||(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${p}
        Required: ${p}
        Approved: ${y.toString()}`))}),o.forEach(p=>{n||(ec(i[p].methods,s[p].methods)?ec(i[p].events,s[p].events)||(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${p}`)):n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${p}`))}),n}function W$(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function M_(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function K$(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Mu(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function V$(t,e){return l1(t)&&t<=e.max&&t>=e.min}function I_(){const t=gl();return new Promise(e=>{switch(t){case Ri.browser:e(G$());break;case Ri.reactNative:e(Y$());break;case Ri.node:e(J$());break;default:e(!0)}})}function G$(){return pl()&&(navigator==null?void 0:navigator.onLine)}async function Y$(){if(Au()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function J$(){return!0}function X$(t){switch(gl()){case Ri.browser:Z$(t);break;case Ri.reactNative:Q$(t);break}}function Z$(t){!Au()&&pl()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Q$(t){Au()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const d1={};class Al{static get(e){return d1[e]}static set(e,r){d1[e]=r}static delete(e){delete d1[e]}}const eF="PARSE_ERROR",tF="INVALID_REQUEST",rF="METHOD_NOT_FOUND",nF="INVALID_PARAMS",C_="INTERNAL_ERROR",p1="SERVER_ERROR",iF=[-32700,-32600,-32601,-32602,-32603],Pl={[eF]:{code:-32700,message:"Parse error"},[tF]:{code:-32600,message:"Invalid Request"},[rF]:{code:-32601,message:"Method not found"},[nF]:{code:-32602,message:"Invalid params"},[C_]:{code:-32603,message:"Internal error"},[p1]:{code:-32e3,message:"Server error"}},T_=p1;function sF(t){return iF.includes(t)}function R_(t){return Object.keys(Pl).includes(t)?Pl[t]:Pl[T_]}function oF(t){const e=Object.values(Pl).find(r=>r.code===t);return e||Pl[T_]}function D_(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var O_={},Po={},N_;function aF(){if(N_)return Po;N_=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.isBrowserCryptoAvailable=Po.getSubtleCrypto=Po.getBrowerCrypto=void 0;function t(){return(nn==null?void 0:nn.crypto)||(nn==null?void 0:nn.msCrypto)||{}}Po.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Po.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Po.isBrowserCryptoAvailable=r,Po}var Mo={},L_;function cF(){if(L_)return Mo;L_=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.isBrowser=Mo.isNode=Mo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Mo.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Mo.isNode=e;function r(){return!t()&&!e()}return Mo.isBrowser=r,Mo}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vf;e.__exportStar(aF(),t),e.__exportStar(cF(),t)})(O_);function ha(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function sc(t=6){return BigInt(ha(t))}function da(t,e,r){return{id:r||ha(),jsonrpc:"2.0",method:t,params:e}}function Vd(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Gd(t,e,r){return{id:t,jsonrpc:"2.0",error:uF(e)}}function uF(t,e){return typeof t>"u"?R_(C_):(typeof t=="string"&&(t=Object.assign(Object.assign({},R_(p1)),{message:t})),sF(t.code)&&(t=oF(t.code)),t)}let fF=class{},lF=class extends fF{constructor(){super()}},hF=class extends lF{constructor(e){super()}};const dF="^https?:",pF="^wss?:";function gF(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function k_(t,e){const r=gF(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function B_(t){return k_(t,dF)}function $_(t){return k_(t,pF)}function mF(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function F_(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function g1(t){return F_(t)&&"method"in t}function Yd(t){return F_(t)&&(Hs(t)||Yi(t))}function Hs(t){return"result"in t}function Yi(t){return"error"in t}let Ji=class extends hF{constructor(e){super(e),this.events=new qi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(da(e.method,e.params||[],e.id||sc().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Yi(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Yd(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const vF=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),bF=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",j_=t=>t.split("?")[0],U_=10,yF=vF();let wF=class{constructor(e){if(this.url=e,this.events=new qi.EventEmitter,this.registering=!1,!$_(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(mo(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!$_(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=new URLSearchParams(e).get("origin"),s=O_.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!mF(e)},o=new yF(e,[],s);bF()?o.onerror=a=>{const u=a;n(this.emitError(u.error))}:o.on("error",a=>{n(this.emitError(a))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ka(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Gd(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return D_(e,j_(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>U_&&this.events.setMaxListeners(U_)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${j_(this.url)}`));return this.events.emit("register_error",r),r}};var Jd={exports:{}};Jd.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",y="[object Error]",A="[object Function]",P="[object GeneratorFunction]",O="[object Map]",D="[object Number]",k="[object Null]",B="[object Object]",q="[object Promise]",j="[object Proxy]",H="[object RegExp]",J="[object Set]",T="[object String]",z="[object Symbol]",ue="[object Undefined]",_e="[object WeakMap]",G="[object ArrayBuffer]",E="[object DataView]",m="[object Float32Array]",f="[object Float64Array]",g="[object Int8Array]",v="[object Int16Array]",x="[object Int32Array]",_="[object Uint8Array]",S="[object Uint8ClampedArray]",b="[object Uint16Array]",M="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,N={};N[m]=N[f]=N[g]=N[v]=N[x]=N[_]=N[S]=N[b]=N[M]=!0,N[a]=N[u]=N[G]=N[d]=N[E]=N[p]=N[y]=N[A]=N[O]=N[D]=N[B]=N[H]=N[J]=N[T]=N[_e]=!1;var se=typeof nn=="object"&&nn&&nn.Object===Object&&nn,ee=typeof self=="object"&&self&&self.Object===Object&&self,X=se||ee||Function("return this")(),Q=e&&!e.nodeType&&e,R=Q&&!0&&t&&!t.nodeType&&t,Z=R&&R.exports===Q,te=Z&&se.process,le=function(){try{return te&&te.binding&&te.binding("util")}catch{}}(),ie=le&&le.isTypedArray;function fe(ae,ye){for(var Ye=-1,It=ae==null?0:ae.length,jr=0,ir=[];++Ye<It;){var Yr=ae[Ye];ye(Yr,Ye,ae)&&(ir[jr++]=Yr)}return ir}function ve(ae,ye){for(var Ye=-1,It=ye.length,jr=ae.length;++Ye<It;)ae[jr+Ye]=ye[Ye];return ae}function Me(ae,ye){for(var Ye=-1,It=ae==null?0:ae.length;++Ye<It;)if(ye(ae[Ye],Ye,ae))return!0;return!1}function Ne(ae,ye){for(var Ye=-1,It=Array(ae);++Ye<ae;)It[Ye]=ye(Ye);return It}function Te(ae){return function(ye){return ae(ye)}}function $e(ae,ye){return ae.has(ye)}function Ie(ae,ye){return ae==null?void 0:ae[ye]}function Le(ae){var ye=-1,Ye=Array(ae.size);return ae.forEach(function(It,jr){Ye[++ye]=[jr,It]}),Ye}function Ve(ae,ye){return function(Ye){return ae(ye(Ye))}}function ke(ae){var ye=-1,Ye=Array(ae.size);return ae.forEach(function(It){Ye[++ye]=It}),Ye}var ze=Array.prototype,He=Function.prototype,Ee=Object.prototype,Qe=X["__core-js_shared__"],ct=He.toString,Be=Ee.hasOwnProperty,et=function(){var ae=/[^.]+$/.exec(Qe&&Qe.keys&&Qe.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""}(),rt=Ee.toString,Je=RegExp("^"+ct.call(Be).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=Z?X.Buffer:void 0,ht=X.Symbol,ft=X.Uint8Array,Ht=Ee.propertyIsEnumerable,Jt=ze.splice,St=ht?ht.toStringTag:void 0,er=Object.getOwnPropertySymbols,Xt=pt?pt.isBuffer:void 0,Ot=Ve(Object.keys,Object),Bt=wr(X,"DataView"),Tt=wr(X,"Map"),vt=wr(X,"Promise"),Dt=wr(X,"Set"),Lt=wr(X,"WeakMap"),bt=wr(Object,"create"),$t=jo(Bt),jt=jo(Tt),nt=jo(vt),Ft=jo(Dt),$=jo(Lt),W=ht?ht.prototype:void 0,V=W?W.valueOf:void 0;function C(ae){var ye=-1,Ye=ae==null?0:ae.length;for(this.clear();++ye<Ye;){var It=ae[ye];this.set(It[0],It[1])}}function Y(){this.__data__=bt?bt(null):{},this.size=0}function U(ae){var ye=this.has(ae)&&delete this.__data__[ae];return this.size-=ye?1:0,ye}function oe(ae){var ye=this.__data__;if(bt){var Ye=ye[ae];return Ye===n?void 0:Ye}return Be.call(ye,ae)?ye[ae]:void 0}function ge(ae){var ye=this.__data__;return bt?ye[ae]!==void 0:Be.call(ye,ae)}function xe(ae,ye){var Ye=this.__data__;return this.size+=this.has(ae)?0:1,Ye[ae]=bt&&ye===void 0?n:ye,this}C.prototype.clear=Y,C.prototype.delete=U,C.prototype.get=oe,C.prototype.has=ge,C.prototype.set=xe;function Re(ae){var ye=-1,Ye=ae==null?0:ae.length;for(this.clear();++ye<Ye;){var It=ae[ye];this.set(It[0],It[1])}}function De(){this.__data__=[],this.size=0}function it(ae){var ye=this.__data__,Ye=Xe(ye,ae);if(Ye<0)return!1;var It=ye.length-1;return Ye==It?ye.pop():Jt.call(ye,Ye,1),--this.size,!0}function Ue(ae){var ye=this.__data__,Ye=Xe(ye,ae);return Ye<0?void 0:ye[Ye][1]}function gt(ae){return Xe(this.__data__,ae)>-1}function st(ae,ye){var Ye=this.__data__,It=Xe(Ye,ae);return It<0?(++this.size,Ye.push([ae,ye])):Ye[It][1]=ye,this}Re.prototype.clear=De,Re.prototype.delete=it,Re.prototype.get=Ue,Re.prototype.has=gt,Re.prototype.set=st;function tt(ae){var ye=-1,Ye=ae==null?0:ae.length;for(this.clear();++ye<Ye;){var It=ae[ye];this.set(It[0],It[1])}}function At(){this.size=0,this.__data__={hash:new C,map:new(Tt||Re),string:new C}}function Rt(ae){var ye=mr(this,ae).delete(ae);return this.size-=ye?1:0,ye}function Mt(ae){return mr(this,ae).get(ae)}function Et(ae){return mr(this,ae).has(ae)}function dt(ae,ye){var Ye=mr(this,ae),It=Ye.size;return Ye.set(ae,ye),this.size+=Ye.size==It?0:1,this}tt.prototype.clear=At,tt.prototype.delete=Rt,tt.prototype.get=Mt,tt.prototype.has=Et,tt.prototype.set=dt;function _t(ae){var ye=-1,Ye=ae==null?0:ae.length;for(this.__data__=new tt;++ye<Ye;)this.add(ae[ye])}function ot(ae){return this.__data__.set(ae,n),this}function wt(ae){return this.__data__.has(ae)}_t.prototype.add=_t.prototype.push=ot,_t.prototype.has=wt;function lt(ae){var ye=this.__data__=new Re(ae);this.size=ye.size}function at(){this.__data__=new Re,this.size=0}function Ae(ae){var ye=this.__data__,Ye=ye.delete(ae);return this.size=ye.size,Ye}function Pe(ae){return this.__data__.get(ae)}function Ge(ae){return this.__data__.has(ae)}function je(ae,ye){var Ye=this.__data__;if(Ye instanceof Re){var It=Ye.__data__;if(!Tt||It.length<r-1)return It.push([ae,ye]),this.size=++Ye.size,this;Ye=this.__data__=new tt(It)}return Ye.set(ae,ye),this.size=Ye.size,this}lt.prototype.clear=at,lt.prototype.delete=Ae,lt.prototype.get=Pe,lt.prototype.has=Ge,lt.prototype.set=je;function qe(ae,ye){var Ye=ef(ae),It=!Ye&&ap(ae),jr=!Ye&&!It&&gh(ae),ir=!Ye&&!It&&!jr&&fp(ae),Yr=Ye||It||jr||ir,wn=Yr?Ne(ae.length,String):[],_r=wn.length;for(var Ur in ae)Be.call(ae,Ur)&&!(Yr&&(Ur=="length"||jr&&(Ur=="offset"||Ur=="parent")||ir&&(Ur=="buffer"||Ur=="byteLength"||Ur=="byteOffset")||hn(Ur,_r)))&&wn.push(Ur);return wn}function Xe(ae,ye){for(var Ye=ae.length;Ye--;)if(op(ae[Ye][0],ye))return Ye;return-1}function kt(ae,ye,Ye){var It=ye(ae);return ef(ae)?It:ve(It,Ye(ae))}function Wt(ae){return ae==null?ae===void 0?ue:k:St&&St in Object(ae)?Br(ae):Fb(ae)}function Zt(ae){return Pc(ae)&&Wt(ae)==a}function Kt(ae,ye,Ye,It,jr){return ae===ye?!0:ae==null||ye==null||!Pc(ae)&&!Pc(ye)?ae!==ae&&ye!==ye:pe(ae,ye,Ye,It,Kt,jr)}function pe(ae,ye,Ye,It,jr,ir){var Yr=ef(ae),wn=ef(ye),_r=Yr?u:Ir(ae),Ur=wn?u:Ir(ye);_r=_r==a?B:_r,Ur=Ur==a?B:Ur;var gn=_r==B,_i=Ur==B,xn=_r==Ur;if(xn&&gh(ae)){if(!gh(ye))return!1;Yr=!0,gn=!1}if(xn&&!gn)return ir||(ir=new lt),Yr||fp(ae)?Qt(ae,ye,Ye,It,jr,ir):gr(ae,ye,_r,Ye,It,jr,ir);if(!(Ye&i)){var Jr=gn&&Be.call(ae,"__wrapped__"),oi=_i&&Be.call(ye,"__wrapped__");if(Jr||oi){var Ps=Jr?ae.value():ae,is=oi?ye.value():ye;return ir||(ir=new lt),jr(Ps,is,Ye,It,ir)}}return xn?(ir||(ir=new lt),lr(ae,ye,Ye,It,jr,ir)):!1}function nr(ae){if(!up(ae)||pn(ae))return!1;var ye=tf(ae)?Je:F;return ye.test(jo(ae))}function dr(ae){return Pc(ae)&&cp(ae.length)&&!!N[Wt(ae)]}function pr(ae){if(!sp(ae))return Ot(ae);var ye=[];for(var Ye in Object(ae))Be.call(ae,Ye)&&Ye!="constructor"&&ye.push(Ye);return ye}function Qt(ae,ye,Ye,It,jr,ir){var Yr=Ye&i,wn=ae.length,_r=ye.length;if(wn!=_r&&!(Yr&&_r>wn))return!1;var Ur=ir.get(ae);if(Ur&&ir.get(ye))return Ur==ye;var gn=-1,_i=!0,xn=Ye&s?new _t:void 0;for(ir.set(ae,ye),ir.set(ye,ae);++gn<wn;){var Jr=ae[gn],oi=ye[gn];if(It)var Ps=Yr?It(oi,Jr,gn,ye,ae,ir):It(Jr,oi,gn,ae,ye,ir);if(Ps!==void 0){if(Ps)continue;_i=!1;break}if(xn){if(!Me(ye,function(is,ro){if(!$e(xn,ro)&&(Jr===is||jr(Jr,is,Ye,It,ir)))return xn.push(ro)})){_i=!1;break}}else if(!(Jr===oi||jr(Jr,oi,Ye,It,ir))){_i=!1;break}}return ir.delete(ae),ir.delete(ye),_i}function gr(ae,ye,Ye,It,jr,ir,Yr){switch(Ye){case E:if(ae.byteLength!=ye.byteLength||ae.byteOffset!=ye.byteOffset)return!1;ae=ae.buffer,ye=ye.buffer;case G:return!(ae.byteLength!=ye.byteLength||!ir(new ft(ae),new ft(ye)));case d:case p:case D:return op(+ae,+ye);case y:return ae.name==ye.name&&ae.message==ye.message;case H:case T:return ae==ye+"";case O:var wn=Le;case J:var _r=It&i;if(wn||(wn=ke),ae.size!=ye.size&&!_r)return!1;var Ur=Yr.get(ae);if(Ur)return Ur==ye;It|=s,Yr.set(ae,ye);var gn=Qt(wn(ae),wn(ye),It,jr,ir,Yr);return Yr.delete(ae),gn;case z:if(V)return V.call(ae)==V.call(ye)}return!1}function lr(ae,ye,Ye,It,jr,ir){var Yr=Ye&i,wn=Lr(ae),_r=wn.length,Ur=Lr(ye),gn=Ur.length;if(_r!=gn&&!Yr)return!1;for(var _i=_r;_i--;){var xn=wn[_i];if(!(Yr?xn in ye:Be.call(ye,xn)))return!1}var Jr=ir.get(ae);if(Jr&&ir.get(ye))return Jr==ye;var oi=!0;ir.set(ae,ye),ir.set(ye,ae);for(var Ps=Yr;++_i<_r;){xn=wn[_i];var is=ae[xn],ro=ye[xn];if(It)var mh=Yr?It(ro,is,xn,ye,ae,ir):It(is,ro,xn,ae,ye,ir);if(!(mh===void 0?is===ro||jr(is,ro,Ye,It,ir):mh)){oi=!1;break}Ps||(Ps=xn=="constructor")}if(oi&&!Ps){var Mc=ae.constructor,$n=ye.constructor;Mc!=$n&&"constructor"in ae&&"constructor"in ye&&!(typeof Mc=="function"&&Mc instanceof Mc&&typeof $n=="function"&&$n instanceof $n)&&(oi=!1)}return ir.delete(ae),ir.delete(ye),oi}function Lr(ae){return kt(ae,qb,$r)}function mr(ae,ye){var Ye=ae.__data__;return dn(ye)?Ye[typeof ye=="string"?"string":"hash"]:Ye.map}function wr(ae,ye){var Ye=Ie(ae,ye);return nr(Ye)?Ye:void 0}function Br(ae){var ye=Be.call(ae,St),Ye=ae[St];try{ae[St]=void 0;var It=!0}catch{}var jr=rt.call(ae);return It&&(ye?ae[St]=Ye:delete ae[St]),jr}var $r=er?function(ae){return ae==null?[]:(ae=Object(ae),fe(er(ae),function(ye){return Ht.call(ae,ye)}))}:Fr,Ir=Wt;(Bt&&Ir(new Bt(new ArrayBuffer(1)))!=E||Tt&&Ir(new Tt)!=O||vt&&Ir(vt.resolve())!=q||Dt&&Ir(new Dt)!=J||Lt&&Ir(new Lt)!=_e)&&(Ir=function(ae){var ye=Wt(ae),Ye=ye==B?ae.constructor:void 0,It=Ye?jo(Ye):"";if(It)switch(It){case $t:return E;case jt:return O;case nt:return q;case Ft:return J;case $:return _e}return ye});function hn(ae,ye){return ye=ye??o,!!ye&&(typeof ae=="number"||ce.test(ae))&&ae>-1&&ae%1==0&&ae<ye}function dn(ae){var ye=typeof ae;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?ae!=="__proto__":ae===null}function pn(ae){return!!et&&et in ae}function sp(ae){var ye=ae&&ae.constructor,Ye=typeof ye=="function"&&ye.prototype||Ee;return ae===Ye}function Fb(ae){return rt.call(ae)}function jo(ae){if(ae!=null){try{return ct.call(ae)}catch{}try{return ae+""}catch{}}return""}function op(ae,ye){return ae===ye||ae!==ae&&ye!==ye}var ap=Zt(function(){return arguments}())?Zt:function(ae){return Pc(ae)&&Be.call(ae,"callee")&&!Ht.call(ae,"callee")},ef=Array.isArray;function jb(ae){return ae!=null&&cp(ae.length)&&!tf(ae)}var gh=Xt||kr;function Ub(ae,ye){return Kt(ae,ye)}function tf(ae){if(!up(ae))return!1;var ye=Wt(ae);return ye==A||ye==P||ye==l||ye==j}function cp(ae){return typeof ae=="number"&&ae>-1&&ae%1==0&&ae<=o}function up(ae){var ye=typeof ae;return ae!=null&&(ye=="object"||ye=="function")}function Pc(ae){return ae!=null&&typeof ae=="object"}var fp=ie?Te(ie):dr;function qb(ae){return jb(ae)?qe(ae):pr(ae)}function Fr(){return[]}function kr(){return!1}t.exports=Ub}(Jd,Jd.exports);var xF=Jd.exports;const _F=ji(xF),q_="wc",z_=2,H_="core",Ws=`${q_}@2:${H_}:`,EF={logger:"error"},SF={database:":memory:"},AF="crypto",W_="client_ed25519_seed",PF=mt.ONE_DAY,MF="keychain",IF="0.3",CF="messages",TF="0.3",RF=mt.SIX_HOURS,DF="publisher",K_="irn",OF="error",V_="wss://relay.walletconnect.org",NF="relayer",ii={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},LF="_subscription",Xi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},kF=.1,m1="2.17.2",Wr={link_mode:"link_mode",relay:"relay"},BF="0.3",$F="WALLETCONNECT_CLIENT_ID",G_="WALLETCONNECT_LINK_MODE_APPS",Ks={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},FF="subscription",jF="0.3",UF=mt.FIVE_SECONDS*1e3,qF="pairing",zF="0.3",Ml={wc_pairingDelete:{req:{ttl:mt.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:mt.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:mt.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:mt.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:mt.ONE_DAY,prompt:!1,tag:0},res:{ttl:mt.ONE_DAY,prompt:!1,tag:0}}},oc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},bs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},HF="history",WF="0.3",KF="expirer",Zi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},VF="0.3",GF="verify-api",YF="https://verify.walletconnect.com",Y_="https://verify.walletconnect.org",Il=Y_,JF=`${Il}/v3`,XF=[YF,Y_],ZF="echo",QF="https://echo.walletconnect.com",Vs={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},Io={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},ys={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ac={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},cc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Cl={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},ej=.1,tj="event-client",rj=86400,nj="https://pulse.walletconnect.org/batch";function ij(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function p(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var O=0,D=0,k=0,B=P.length;k!==B&&P[k]===0;)k++,O++;for(var q=(B-k)*d+1>>>0,j=new Uint8Array(q);k!==B;){for(var H=P[k],J=0,T=q-1;(H!==0||J<D)&&T!==-1;T--,J++)H+=256*j[T]>>>0,j[T]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");D=J,k++}for(var z=q-D;z!==q&&j[z]===0;)z++;for(var ue=u.repeat(O);z<q;++z)ue+=t.charAt(j[z]);return ue}function y(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var O=0;if(P[O]!==" "){for(var D=0,k=0;P[O]===u;)D++,O++;for(var B=(P.length-O)*l+1>>>0,q=new Uint8Array(B);P[O];){var j=r[P.charCodeAt(O)];if(j===255)return;for(var H=0,J=B-1;(j!==0||H<k)&&J!==-1;J--,H++)j+=a*q[J]>>>0,q[J]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");k=H,O++}if(P[O]!==" "){for(var T=B-k;T!==B&&q[T]===0;)T++;for(var z=new Uint8Array(D+(B-T)),ue=D;T!==B;)z[ue++]=q[T++];return z}}}function A(P){var O=y(P);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:y,decode:A}}var sj=ij,oj=sj;const J_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},aj=t=>new TextEncoder().encode(t),cj=t=>new TextDecoder().decode(t);class uj{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class fj{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return X_(this,e)}}class lj{constructor(e){this.decoders=e}or(e){return X_(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const X_=(t,e)=>new lj({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class hj{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new uj(e,r,n),this.decoder=new fj(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xd=({name:t,prefix:e,encode:r,decode:n})=>new hj(t,e,r,n),Tl=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=oj(r,e);return Xd({prefix:t,name:e,encode:n,decode:s=>J_(i(s))})},dj=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,u=0,l=0;for(let d=0;d<s;++d){const p=i[t[d]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},pj=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},zn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Xd({prefix:e,name:t,encode(i){return pj(i,n,r)},decode(i){return dj(i,n,r,t)}}),gj=Xd({prefix:"\0",name:"identity",encode:t=>cj(t),decode:t=>aj(t)});var mj=Object.freeze({__proto__:null,identity:gj});const vj=zn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var bj=Object.freeze({__proto__:null,base2:vj});const yj=zn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wj=Object.freeze({__proto__:null,base8:yj});const xj=Tl({prefix:"9",name:"base10",alphabet:"0123456789"});var _j=Object.freeze({__proto__:null,base10:xj});const Ej=zn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sj=zn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Aj=Object.freeze({__proto__:null,base16:Ej,base16upper:Sj});const Pj=zn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Mj=zn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ij=zn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Cj=zn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Tj=zn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rj=zn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dj=zn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Oj=zn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nj=zn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Lj=Object.freeze({__proto__:null,base32:Pj,base32upper:Mj,base32pad:Ij,base32padupper:Cj,base32hex:Tj,base32hexupper:Rj,base32hexpad:Dj,base32hexpadupper:Oj,base32z:Nj});const kj=Tl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bj=Tl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $j=Object.freeze({__proto__:null,base36:kj,base36upper:Bj});const Fj=Tl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jj=Tl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Uj=Object.freeze({__proto__:null,base58btc:Fj,base58flickr:jj});const qj=zn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zj=zn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hj=zn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Wj=zn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Kj=Object.freeze({__proto__:null,base64:qj,base64pad:zj,base64url:Hj,base64urlpad:Wj});const Z_=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Vj=Z_.reduce((t,e,r)=>(t[r]=e,t),[]),Gj=Z_.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Yj(t){return t.reduce((e,r)=>(e+=Vj[r],e),"")}function Jj(t){const e=[];for(const r of t){const n=Gj[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Xj=Xd({prefix:"🚀",name:"base256emoji",encode:Yj,decode:Jj});var Zj=Object.freeze({__proto__:null,base256emoji:Xj}),Qj=e6,Q_=128,eU=127,tU=~eU,rU=Math.pow(2,31);function e6(t,e,r){e=e||[],r=r||0;for(var n=r;t>=rU;)e[r++]=t&255|Q_,t/=128;for(;t&tU;)e[r++]=t&255|Q_,t>>>=7;return e[r]=t|0,e6.bytes=r-n+1,e}var nU=v1,iU=128,t6=127;function v1(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw v1.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&t6)<<i:(o&t6)*Math.pow(2,i),i+=7}while(o>=iU);return v1.bytes=s-n,r}var sU=Math.pow(2,7),oU=Math.pow(2,14),aU=Math.pow(2,21),cU=Math.pow(2,28),uU=Math.pow(2,35),fU=Math.pow(2,42),lU=Math.pow(2,49),hU=Math.pow(2,56),dU=Math.pow(2,63),pU=function(t){return t<sU?1:t<oU?2:t<aU?3:t<cU?4:t<uU?5:t<fU?6:t<lU?7:t<hU?8:t<dU?9:10},gU={encode:Qj,decode:nU,encodingLength:pU},r6=gU;const n6=(t,e,r=0)=>(r6.encode(t,e,r),e),i6=t=>r6.encodingLength(t),b1=(t,e)=>{const r=e.byteLength,n=i6(t),i=n+i6(r),s=new Uint8Array(i+r);return n6(t,s,0),n6(r,s,n),s.set(e,i),new mU(t,r,e,s)};class mU{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const s6=({name:t,code:e,encode:r})=>new vU(t,e,r);class vU{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?b1(this.code,r):r.then(n=>b1(this.code,n))}else throw Error("Unknown type, must be binary type")}}const o6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),bU=s6({name:"sha2-256",code:18,encode:o6("SHA-256")}),yU=s6({name:"sha2-512",code:19,encode:o6("SHA-512")});var wU=Object.freeze({__proto__:null,sha256:bU,sha512:yU});const a6=0,xU="identity",c6=J_;var _U=Object.freeze({__proto__:null,identity:{code:a6,name:xU,encode:c6,digest:t=>b1(a6,c6(t))}});new TextEncoder,new TextDecoder;const u6={...mj,...bj,...wj,..._j,...Aj,...Lj,...$j,...Uj,...Kj,...Zj};({...wU,..._U});function EU(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function f6(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const l6=f6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),y1=f6("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=EU(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),SU={utf8:l6,"utf-8":l6,hex:u6.base16,latin1:y1,ascii:y1,binary:y1,...u6};function AU(t,e="utf8"){const r=SU[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}let PU=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=MF,this.version=IF,this.initialized=!1,this.storagePrefix=Ws,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ut("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=ri(r,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,G3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Y3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}},MU=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=AF,this.randomSessionIdentifier=c1(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=xx(i);return wx(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=ZB();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=xx(s),a=this.randomSessionIdentifier;return await LO(a,i,PF,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),u=QB(a,s);return this.setSymKey(u,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||Hd(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=d_(o),u=mo(s);if(g_(a))return t$(u,o==null?void 0:o.encoding);if(p_(a)){const y=a.senderPublicKey,A=a.receiverPublicKey;i=await this.generateSharedKey(y,A)}const l=this.getSymKey(i),{type:d,senderPublicKey:p}=a;return e$({type:d,symKey:l,message:u,senderPublicKey:p,encoding:o==null?void 0:o.encoding})},this.decode=async(i,s,o)=>{this.isInitialized();const a=i$(s,o);if(g_(a)){const u=n$(s,o==null?void 0:o.encoding);return Ka(u)}if(p_(a)){const u=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(u,l)}try{const u=this.getSymKey(i),l=r$({symKey:u,encoded:s,encoding:o==null?void 0:o.encoding});return Ka(l)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}},this.getPayloadType=(i,s=la)=>{const o=xl({encoded:i,encoding:s});return nc(o.type)},this.getPayloadSenderPublicKey=(i,s=la)=>{const o=xl({encoded:i,encoding:s});return o.senderPublicKey?Rn(o.senderPublicKey,ni):void 0},this.core=e,this.logger=ri(r,this.name),this.keychain=n||new PU(this.core,this.logger)}get context(){return gi(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(W_)}catch{e=c1(),await this.keychain.set(W_,e)}return AU(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}};class IU extends zR{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=CF,this.version=TF,this.initialized=!1,this.storagePrefix=Ws,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Ao(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Ao(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=ri(e,this.name),this.core=r}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,G3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Y3(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class CU extends HR{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new qi.EventEmitter,this.name=DF,this.queue=new Map,this.publishTimeout=mt.toMiliseconds(mt.ONE_MINUTE),this.failedPublishTimeout=mt.toMiliseconds(mt.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||RF,u=u1(s),l=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,p=(s==null?void 0:s.id)||sc().toString(),y={topic:n,message:i,opts:{ttl:a,relay:u,prompt:l,tag:d,id:p,attestation:s==null?void 0:s.attestation}},A=`Failed to publish payload, please try again. id:${p} tag:${d}`,P=Date.now();let O,D=1;try{for(;O===void 0;){if(Date.now()-P>this.publishTimeout)throw new Error(A);this.logger.trace({id:p,attempts:D},`publisher.publish - attempt ${D}`),O=await await Pu(this.rpcPublish(n,i,a,u,l,d,p,s==null?void 0:s.attestation).catch(k=>this.logger.warn(k)),this.publishTimeout,A),D++,O||await new Promise(k=>setTimeout(k,this.failedPublishTimeout))}this.relayer.events.emit(ii.publish,y),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:p,topic:n,message:i,opts:s}})}catch(k){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(k),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw k;this.queue.set(p,y)}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=ri(r,this.name),this.registerEventListeners()}get context(){return gi(this.logger)}rpcPublish(e,r,n,i,s,o,a,u){var l,d,p,y;const A={method:_l(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o,attestation:u},id:a};return bi((l=A.params)==null?void 0:l.prompt)&&((d=A.params)==null||delete d.prompt),bi((p=A.params)==null?void 0:p.tag)&&((y=A.params)==null||delete y.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A}),this.relayer.request(A)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(su.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ii.connection_stalled);return}this.checkQueue()}),this.relayer.on(ii.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class TU{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var RU=Object.defineProperty,DU=Object.defineProperties,OU=Object.getOwnPropertyDescriptors,h6=Object.getOwnPropertySymbols,NU=Object.prototype.hasOwnProperty,LU=Object.prototype.propertyIsEnumerable,d6=(t,e,r)=>e in t?RU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rl=(t,e)=>{for(var r in e||(e={}))NU.call(e,r)&&d6(t,r,e[r]);if(h6)for(var r of h6(e))LU.call(e,r)&&d6(t,r,e[r]);return t},w1=(t,e)=>DU(t,OU(e));class kU extends VR{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new TU,this.events=new qi.EventEmitter,this.name=FF,this.version=jF,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ws,this.subscribeTimeout=mt.toMiliseconds(mt.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=u1(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{const a=new mt.Watch;a.start(i);const u=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(u),a.stop(i),s(!0)),a.elapsed(i)>=UF&&(clearInterval(u),a.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=ri(r,this.name),this.clientId=""}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=u1(n);await this.rpcUnsubscribe(e,r,i);const s=Dr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(n==null?void 0:n.transportType)===Wr.relay&&await this.restartToComplete();const s={method:_l(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=Ao(e+this.clientId);if((n==null?void 0:n.transportType)===Wr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(l=>this.logger.warn(l))},mt.toMiliseconds(mt.ONE_SECOND)),a;const u=await Pu(this.relayer.request(s).catch(l=>this.logger.warn(l)),this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ii.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:_l(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Pu(this.relayer.request(n).catch(i=>this.logger.warn(i)),this.subscribeTimeout)}catch{this.relayer.events.emit(ii.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:_l(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Pu(this.relayer.request(n).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(ii.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:_l(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,w1(Rl({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Rl({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Rl({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ks.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ks.deleted,w1(Rl({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ks.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(n),await this.batchSubscribe(n)}}this.events.emit(Ks.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);ic(r)&&this.onBatchSubscribe(r.map((n,i)=>w1(Rl({},e[i]),{id:n})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(r.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(su.pulse,async()=>{await this.checkPending()}),this.events.on(Ks.created,async e=>{const r=Ks.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Ks.deleted,async e=>{const r=Ks.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var BU=Object.defineProperty,p6=Object.getOwnPropertySymbols,$U=Object.prototype.hasOwnProperty,FU=Object.prototype.propertyIsEnumerable,g6=(t,e,r)=>e in t?BU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,m6=(t,e)=>{for(var r in e||(e={}))$U.call(e,r)&&g6(t,r,e[r]);if(p6)for(var r of p6(e))FU.call(e,r)&&g6(t,r,e[r]);return t};class jU extends WR{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new qi.EventEmitter,this.name=NF,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=mt.toMiliseconds(mt.THIRTY_SECONDS+mt.ONE_SECOND),this.request=async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||sc().toString();await this.toEstablishConnection();try{const o=this.provider.request(r);this.requestsInFlight.set(s,{promise:o,request:r}),this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - attempt to publish...");const a=await new Promise(async(u,l)=>{const d=()=>{l(new Error(`relayer.request - publish interrupted, id: ${s}`))};this.provider.on(Xi.disconnect,d);const p=await o;this.provider.off(Xi.disconnect,d),u(p)});return this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - published"),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}finally{this.requestsInFlight.delete(s)}},this.resetPingTimeout=()=>{if(jd())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(ii.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(ii.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Xi.payload,this.onPayloadHandler),this.provider.on(Xi.connect,this.onConnectHandler),this.provider.on(Xi.disconnect,this.onDisconnectHandler),this.provider.on(Xi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ri(e.logger,this.name):Qf(od({level:e.logger||OF})),this.messages=new IU(this.logger,e.core),this.subscriber=new kU(this,this.logger),this.publisher=new CU(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||V_,this.projectId=e.projectId,this.bundleId=mB(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return gi(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Wr.relay})}async subscribe(e,r){var n,i,s;this.isInitialized(),(r==null?void 0:r.transportType)==="relay"&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",u;const l=d=>{d.topic===e&&(this.subscriber.off(Ks.created,l),u())};return await Promise.all([new Promise(d=>{u=d,this.subscriber.on(Ks.created,l)}),new Promise(async(d,p)=>{a=await this.subscriber.subscribe(e,m6({internal:{throwOnFailedPublish:o}},r)).catch(y=>{o&&p(y)})||a,d()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Pu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(r,n)=>{const i=()=>{this.provider.off(Xi.disconnect,i),n(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Xi.disconnect,i),await Pu(this.provider.connect(),mt.toMiliseconds(mt.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>{n(s)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(s=>{this.logger.error(s),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){this.logger.error(r);const n=r;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(n.message))throw r}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await I_())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.trace(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=En(mt.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(ii.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,r,n,i,s;if(jd())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o)}}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ji(new wF(wB({sdkVersion:m1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),g1(e)){if(!e.method.endsWith(LF))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:Wr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(m6({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Yd(e)&&this.events.emit(ii.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(ii.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Vd(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Xi.payload,this.onPayloadHandler),this.provider.off(Xi.connect,this.onConnectHandler),this.provider.off(Xi.disconnect,this.onDisconnectHandler),this.provider.off(Xi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await I_();X$(async r=>{e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(ii.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},mt.toMiliseconds(kF))))}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var UU=Object.defineProperty,v6=Object.getOwnPropertySymbols,qU=Object.prototype.hasOwnProperty,zU=Object.prototype.propertyIsEnumerable,b6=(t,e,r)=>e in t?UU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,y6=(t,e)=>{for(var r in e||(e={}))qU.call(e,r)&&b6(t,r,e[r]);if(v6)for(var r of v6(e))zU.call(e,r)&&b6(t,r,e[r]);return t};class uc extends KR{constructor(e,r,n,i=Ws,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=BF,this.cached=[],this.initialized=!1,this.storagePrefix=Ws,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!bi(o)?this.map.set(this.getKey(o),o):I$(o)?this.map.set(o.id,o):C$(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(u=>_F(a[u],o[u]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const u=y6(y6({},this.getData(o)),a);this.map.set(o,u),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=ri(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=ut("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class HU{constructor(e,r){this.core=e,this.logger=r,this.name=qF,this.version=zF,this.events=new Yg,this.initialized=!1,this.storagePrefix=Ws,this.ignoredPayloadTypes=[So],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async n=>{this.isInitialized();const i=c1(),s=await this.core.crypto.setSymKey(i),o=En(mt.FIVE_MINUTES),a={protocol:K_},u={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=w_({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(oc.create,u),this.core.expirer.set(s,o),await this.pairings.set(s,u),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:l}},this.pair=async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Vs.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:u,methods:l}=y_(n.uri);i.props.properties.topic=s,i.addTrace(Vs.pairing_uri_validation_success),i.addTrace(Vs.pairing_uri_not_expired);let d;if(this.pairings.keys.includes(s)){if(d=this.pairings.get(s),i.addTrace(Vs.existing_pairing),d.active)throw i.setError(Io.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Vs.pairing_not_expired)}const p=u||En(mt.FIVE_MINUTES),y={topic:s,relay:a,expiry:p,active:!1,methods:l};this.core.expirer.set(s,p),await this.pairings.set(s,y),i.addTrace(Vs.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(oc.create,y),i.addTrace(Vs.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Vs.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Io.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(A){throw i.setError(Io.subscribe_pairing_topic_failure),A}return i.addTrace(Vs.subscribe_pairing_topic_success),y},this.activate=async({topic:n})=>{this.isInitialized();const i=En(mt.THIRTY_DAYS);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:u}=tc();this.events.once(vr("pairing_ping",s),({error:l})=>{l?u(l):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Dr("USER_DISCONNECTED")),await this.deletePairing(i))},this.formatUriFromPairing=n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,u=this.core.crypto.keychain.get(i);return w_({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:u,relay:s,expiryTimestamp:o,methods:a})},this.sendRequest=async(n,i,s)=>{const o=da(i,s),a=await this.core.crypto.encode(n,o),u=Ml[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,u),o.id},this.sendResult=async(n,i,s)=>{const o=Vd(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),l=Ml[u.request.method].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=Gd(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),l=Ml[u.request.method]?Ml[u.request.method].res:Ml.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Dr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>fa(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(oc.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Hs(i)?this.events.emit(vr("pairing_ping",s),{}):Yi(i)&&this.events.emit(vr("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(oc.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Dr("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Dr("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=(n,i)=>{var s;if(!yi(n)){const{message:a}=ut("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Io.malformed_pairing_uri),new Error(a)}if(!M$(n.uri)){const{message:a}=ut("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Io.malformed_pairing_uri),new Error(a)}const o=y_(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=ut("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Io.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ut("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Io.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&mt.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Io.pairing_expired);const{message:a}=ut("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}},this.isValidPing=async n=>{if(!yi(n)){const{message:s}=ut("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!yi(n)){const{message:s}=ut("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!an(n,!1)){const{message:i}=ut("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ut("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(fa(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ut("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=ri(r,this.name),this.pairings=new uc(this.core,this.logger,this.name,this.storagePrefix)}get context(){return gi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ii.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(!this.pairings.keys.includes(r)||i===Wr.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{g1(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):Yd(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(Zi.expired,async e=>{const{topic:r}=X3(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(oc.expire,{topic:r}))})}}class WU extends qR{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new qi.EventEmitter,this.name=HF,this.version=WF,this.cached=[],this.initialized=!1,this.storagePrefix=Ws,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:En(mt.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(bs.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Yi(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(bs.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(bs.deleted,s)}}),this.persist()},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=ri(r,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:da(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(bs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(bs.created,e=>{const r=bs.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(bs.updated,e=>{const r=bs.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(bs.deleted,e=>{const r=bs.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(su.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{mt.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(bs.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class KU extends GR{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new qi.EventEmitter,this.name=KF,this.version=VF,this.cached=[],this.initialized=!1,this.storagePrefix=Ws,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Zi.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Zi.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=ri(r,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return xB(e);if(typeof e=="number")return _B(e);const{message:r}=ut("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Zi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;mt.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Zi.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(su.pulse,()=>this.checkExpirations()),this.events.on(Zi.created,e=>{const r=Zi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Zi.expired,e=>{const r=Zi.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Zi.deleted,e=>{const r=Zi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class VU extends YR{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,this.name=GF,this.verifyUrlV3=JF,this.storagePrefix=Ws,this.version=z_,this.init=async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&mt.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async i=>{if(!pl()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=nl(),d=this.startAbortTimer(mt.ONE_SECOND*5),p=await new Promise((y,A)=>{const P=()=>{window.removeEventListener("message",D),l.body.removeChild(O),A("attestation aborted")};this.abortController.signal.addEventListener("abort",P);const O=l.createElement("iframe");O.src=u,O.style.display="none",O.addEventListener("error",P,{signal:this.abortController.signal});const D=k=>{if(k.data&&typeof k.data=="string")try{const B=JSON.parse(k.data);if(B.type==="verify_attestation"){if(gm(B.attestation).payload.id!==o)return;clearInterval(d),l.body.removeChild(O),this.abortController.signal.removeEventListener("abort",P),window.removeEventListener("message",D),y(B.attestation===null?"":B.attestation)}}catch(B){this.logger.warn(B)}};l.body.appendChild(O),window.addEventListener("message",D,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",p),p}catch(l){this.logger.warn(l)}return""},this.resolve=async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(gm(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const u=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,u)},this.fetchAttestation=async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(mt.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0},this.getVerifyUrl=i=>{let s=i||Il;return XF.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Il}`),s=Il),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(mt.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}},this.persistPublicKey=async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i},this.validateAttestation=(i,s)=>{const o=c$(i,s.publicKey),a={hasExpired:mt.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}},this.logger=ri(r,this.name),this.abortController=new AbortController,this.isDevEnv=i1(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return gi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),mt.toMiliseconds(e))}}class GU extends JR{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=ZF,this.registerDeviceToken=async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,u=`${QF}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})},this.logger=ri(r,this.context)}}var YU=Object.defineProperty,w6=Object.getOwnPropertySymbols,JU=Object.prototype.hasOwnProperty,XU=Object.prototype.propertyIsEnumerable,x6=(t,e,r)=>e in t?YU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dl=(t,e)=>{for(var r in e||(e={}))JU.call(e,r)&&x6(t,r,e[r]);if(w6)for(var r of w6(e))XU.call(e,r)&&x6(t,r,e[r]);return t};class ZU extends XR{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,this.context=tj,this.storagePrefix=Ws,this.storageVersion=ej,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!i1())try{const i={eventId:Q3(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:V3(this.core.relayer.protocol,this.core.relayer.version,m1)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}},this.createEvent=i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:u}}=i,l=Q3(),d=this.core.projectId||"",p=Date.now(),y=Dl({eventId:l,timestamp:p,props:{event:s,type:o,properties:{topic:a,trace:u}},bundleId:d,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,y),this.shouldPersist=!0),y},this.getEvent=i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(a)return Dl(Dl({},a),this.setMethods(a.eventId))},this.deleteEvent=i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(su.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{mt.fromMiliseconds(Date.now())-mt.fromMiliseconds(i.timestamp)>rj&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})},this.setMethods=i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)}),this.addTrace=(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)},this.setError=(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Dl(Dl({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${nj}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${m1}${s}`,{method:"POST",body:JSON.stringify(i)})},this.getAppDomain=()=>K3().url,this.logger=ri(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var QU=Object.defineProperty,_6=Object.getOwnPropertySymbols,eq=Object.prototype.hasOwnProperty,tq=Object.prototype.propertyIsEnumerable,E6=(t,e,r)=>e in t?QU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S6=(t,e)=>{for(var r in e||(e={}))eq.call(e,r)&&E6(t,r,e[r]);if(_6)for(var r of _6(e))tq.call(e,r)&&E6(t,r,e[r]);return t};class x1 extends UR{constructor(e){var r;super(e),this.protocol=q_,this.version=z_,this.name=H_,this.events=new qi.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.dispatchEnvelope=({topic:o,message:a,sessionExists:u})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:Wr.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})},this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||V_,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=od({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:EF.logger}),{logger:i,chunkLoggerController:s}=jR({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ri(i,this.name),this.heartbeat=new NT,this.crypto=new MU(this,this.logger,e==null?void 0:e.keychain),this.history=new WU(this,this.logger),this.expirer=new KU(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new hR(S6(S6({},SF),e==null?void 0:e.storageOptions)),this.relayer=new jU({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new HU(this,this.logger),this.verify=new VU(this,this.logger,this.storage),this.echoClient=new GU(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ZU(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new x1(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem($F,n),r}get context(){return gi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(G_,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(G_)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const rq=x1,A6="wc",P6=2,M6="client",_1=`${A6}@${P6}:${M6}:`,E1={name:M6,logger:"error"},I6="WALLETCONNECT_DEEPLINK_CHOICE",nq="proposal",C6="Proposal expired",iq="session",Iu=mt.SEVEN_DAYS,sq="engine",Bn={wc_sessionPropose:{req:{ttl:mt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:mt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:mt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:mt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:mt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:mt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:mt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:mt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:mt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:mt.ONE_DAY,prompt:!1,tag:1114},res:{ttl:mt.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:mt.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:mt.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:mt.FIVE_MINUTES,prompt:!1,tag:1119}}},S1={min:mt.FIVE_MINUTES,max:mt.SEVEN_DAYS},Gs={idle:"IDLE",active:"ACTIVE"},oq="request",aq=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],cq="wc",uq="auth",fq="authKeys",lq="pairingTopics",hq="requests",Zd=`${cq}@${1.5}:${uq}:`,Qd=`${Zd}:PUB_KEY`;var dq=Object.defineProperty,pq=Object.defineProperties,gq=Object.getOwnPropertyDescriptors,T6=Object.getOwnPropertySymbols,mq=Object.prototype.hasOwnProperty,vq=Object.prototype.propertyIsEnumerable,R6=(t,e,r)=>e in t?dq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tn=(t,e)=>{for(var r in e||(e={}))mq.call(e,r)&&R6(t,r,e[r]);if(T6)for(var r of T6(e))vq.call(e,r)&&R6(t,r,e[r]);return t},ws=(t,e)=>pq(t,gq(e));class bq extends QR{constructor(e){super(e),this.name=sq,this.events=new Yg,this.initialized=!1,this.requestQueue={state:Gs.idle,queue:[]},this.sessionRequestQueue={state:Gs.idle,queue:[]},this.requestQueueDelay=mt.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Bn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},mt.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=ws(tn({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:u}=n;let l=i,d,p=!1;try{l&&(p=this.client.core.pairing.pairings.get(l).active)}catch(j){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),j}if(!l||!p){const{topic:j,uri:H}=await this.client.core.pairing.create();l=j,d=H}if(!l){const{message:j}=ut("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(j)}const y=await this.client.core.crypto.generateKeyPair(),A=Bn.wc_sessionPropose.req.ttl||mt.FIVE_MINUTES,P=En(A),O=tn({requiredNamespaces:s,optionalNamespaces:o,relays:u??[{protocol:K_}],proposer:{publicKey:y,metadata:this.client.metadata},expiryTimestamp:P,pairingTopic:l},a&&{sessionProperties:a}),{reject:D,resolve:k,done:B}=tc(A,C6);this.events.once(vr("session_connect"),async({error:j,session:H})=>{if(j)D(j);else if(H){H.self.publicKey=y;const J=ws(tn({},H),{pairingTopic:O.pairingTopic,requiredNamespaces:O.requiredNamespaces,optionalNamespaces:O.optionalNamespaces,transportType:Wr.relay});await this.client.session.set(H.topic,J),await this.setExpiry(H.topic,H.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:H.peer.metadata}),this.cleanupDuplicatePairings(J),k(J)}});const q=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:O,throwOnFailedPublish:!0});return await this.setProposal(q,tn({id:q},O)),{uri:d,approval:B}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}},this.approve=async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[ys.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(z){throw o.setError(ac.no_internet_connection),z}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(z){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(ac.proposal_not_found),z}try{await this.isValidApprove(r)}catch(z){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ac.session_approve_namespace_validation_failure),z}const{id:a,relayProtocol:u,namespaces:l,sessionProperties:d,sessionConfig:p}=r,y=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:A,proposer:P,requiredNamespaces:O,optionalNamespaces:D}=y;let k=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:A});k||(k=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ys.session_approve_started,properties:{topic:A,trace:[ys.session_approve_started,ys.session_namespaces_validation_success]}}));const B=await this.client.core.crypto.generateKeyPair(),q=P.publicKey,j=await this.client.core.crypto.generateSharedKey(B,q),H=tn(tn({relay:{protocol:u??"irn"},namespaces:l,controller:{publicKey:B,metadata:this.client.metadata},expiry:En(Iu)},d&&{sessionProperties:d}),p&&{sessionConfig:p}),J=Wr.relay;k.addTrace(ys.subscribing_session_topic);try{await this.client.core.relayer.subscribe(j,{transportType:J})}catch(z){throw k.setError(ac.subscribe_session_topic_failure),z}k.addTrace(ys.subscribe_session_topic_success);const T=ws(tn({},H),{topic:j,requiredNamespaces:O,optionalNamespaces:D,pairingTopic:A,acknowledged:!1,self:H.controller,peer:{publicKey:P.publicKey,metadata:P.metadata},controller:B,transportType:Wr.relay});await this.client.session.set(j,T),k.addTrace(ys.store_session);try{k.addTrace(ys.publishing_session_settle),await this.sendRequest({topic:j,method:"wc_sessionSettle",params:H,throwOnFailedPublish:!0}).catch(z=>{throw k==null||k.setError(ac.session_settle_publish_failure),z}),k.addTrace(ys.session_settle_publish_success),k.addTrace(ys.publishing_session_approve),await this.sendResult({id:a,topic:A,result:{relay:{protocol:u??"irn"},responderPublicKey:B},throwOnFailedPublish:!0}).catch(z=>{throw k==null||k.setError(ac.session_approve_publish_failure),z}),k.addTrace(ys.session_approve_publish_success)}catch(z){throw this.client.logger.error(z),this.client.session.delete(j,Dr("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(j),z}return this.client.core.eventClient.deleteEvent({eventId:k.eventId}),await this.client.core.pairing.updateMetadata({topic:A,metadata:P.metadata}),await this.client.proposal.delete(a,Dr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:A}),await this.setExpiry(j,En(Iu)),{topic:j,acknowledged:()=>Promise.resolve(this.client.session.get(j))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:Bn.wc_sessionPropose.reject}),await this.client.proposal.delete(n,Dr("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(p){throw this.client.logger.error("update() -> isValidUpdate() failed"),p}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=tc(),u=ha(),l=sc().toString(),d=this.client.session.get(n).namespaces;return this.events.once(vr("session_update",u),({error:p})=>{p?a(p):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:l}).catch(p=>{this.client.logger.error(p),this.client.session.update(n,{namespaces:d}),a(p)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:n}=r,i=ha(),{done:s,resolve:o,reject:a}=tc();return this.events.once(vr("session_extend",i),({error:u})=>{u?a(u):o()}),await this.setExpiry(n,En(Iu)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(u=>{a(u)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(P){throw this.client.logger.error("request() -> isValidRequest() failed"),P}const{chainId:n,request:i,topic:s,expiry:o=Bn.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Wr.relay&&await this.confirmOnlineStateOrThrow();const u=ha(),l=sc().toString(),{done:d,resolve:p,reject:y}=tc(o,"Request expired. Please try again.");this.events.once(vr("session_request",u),({error:P,result:O})=>{P?y(P):p(O)});const A=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);return A?(await this.sendRequest({clientRpcId:u,relayRpcId:l,topic:s,method:"wc_sessionRequest",params:{request:ws(tn({},i),{expiryTimestamp:En(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:A}).catch(P=>y(P)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),await d()):await Promise.all([new Promise(async P=>{await this.sendRequest({clientRpcId:u,relayRpcId:l,topic:s,method:"wc_sessionRequest",params:{request:ws(tn({},i),{expiryTimestamp:En(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(O=>y(O)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),P()}),new Promise(async P=>{var O;if(!((O=a.sessionConfig)!=null&&O.disableDeepLink)){const D=await AB(this.client.core.storage,I6);await EB({id:u,topic:s,wcDeepLink:D})}P()}),d()]).then(P=>P[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Wr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Hs(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):Yi(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=ha(),s=sc().toString(),{done:o,resolve:a,reject:u}=tc();this.events.once(vr("session_ping",i),({error:l})=>{l?u(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=sc().toString();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Dr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=ut("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>A$(n,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Wr.link_mode:Wr.relay;o===Wr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:u="",uri:l,domain:d,nonce:p,type:y,exp:A,nbf:P,methods:O=[],expiry:D}=r,k=[...r.resources||[]],{topic:B,uri:q}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:B,uri:q}});const j=await this.client.core.crypto.generateKeyPair(),H=Hd(j);if(await Promise.all([this.client.auth.authKeys.set(Qd,{responseTopic:H,publicKey:j}),this.client.auth.pairingTopics.set(H,{topic:H,pairingTopic:B})]),await this.client.core.relayer.subscribe(H,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${B}`),O.length>0){const{namespace:_}=Su(a[0]);let S=KB(_,"request",O);zd(k)&&(S=GB(S,k.pop())),k.push(S)}const J=D&&D>Bn.wc_sessionAuthenticate.req.ttl?D:Bn.wc_sessionAuthenticate.req.ttl,T={authPayload:{type:y??"caip122",chains:a,statement:u,aud:l,domain:d,version:"1",nonce:p,iat:new Date().toISOString(),exp:A,nbf:P,resources:k},requester:{publicKey:j,metadata:this.client.metadata},expiryTimestamp:En(J)},z={eip155:{chains:a,methods:[...new Set(["personal_sign",...O])],events:["chainChanged","accountsChanged"]}},ue={requiredNamespaces:{},optionalNamespaces:z,relays:[{protocol:"irn"}],pairingTopic:B,proposer:{publicKey:j,metadata:this.client.metadata},expiryTimestamp:En(Bn.wc_sessionPropose.req.ttl)},{done:_e,resolve:G,reject:E}=tc(J,"Request expired"),m=async({error:_,session:S})=>{if(this.events.off(vr("session_request",g),f),_)E(_);else if(S){S.self.publicKey=j,await this.client.session.set(S.topic,S),await this.setExpiry(S.topic,S.expiry),B&&await this.client.core.pairing.updateMetadata({topic:B,metadata:S.peer.metadata});const b=this.client.session.get(S.topic);await this.deleteProposal(v),G({session:b})}},f=async _=>{var S,b,M;if(await this.deletePendingAuthRequest(g,{message:"fulfilled",code:0}),_.error){const X=Dr("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return _.error.code===X.code?void 0:(this.events.off(vr("session_connect"),m),E(_.error.message))}await this.deleteProposal(v),this.events.off(vr("session_connect"),m);const{cacaos:I,responder:F}=_.result,ce=[],N=[];for(const X of I){await n_({cacao:X,projectId:this.client.core.projectId})||(this.client.logger.error(X,"Signature verification failed"),E(Dr("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Q}=X,R=zd(Q.resources),Z=[o1(Q.iss)],te=qd(Q.iss);if(R){const le=o_(R),ie=a_(R);ce.push(...le),Z.push(...ie)}for(const le of Z)N.push(`${le}:${te}`)}const se=await this.client.core.crypto.generateSharedKey(j,F.publicKey);let ee;ce.length>0&&(ee={topic:se,acknowledged:!0,self:{publicKey:j,metadata:this.client.metadata},peer:F,controller:F.publicKey,expiry:En(Iu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:B,namespaces:x_([...new Set(ce)],[...new Set(N)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,ee),B&&await this.client.core.pairing.updateMetadata({topic:B,metadata:F.metadata}),ee=this.client.session.get(se)),(S=this.client.metadata.redirect)!=null&&S.linkMode&&(b=F.metadata.redirect)!=null&&b.linkMode&&(M=F.metadata.redirect)!=null&&M.universal&&n&&(this.client.core.addLinkModeSupportedApp(F.metadata.redirect.universal),this.client.session.update(se,{transportType:Wr.link_mode})),G({auths:I,session:ee})},g=ha(),v=ha();this.events.once(vr("session_connect"),m),this.events.once(vr("session_request",g),f);let x;try{if(s){const _=da("wc_sessionAuthenticate",T,g);this.client.core.history.set(B,_);const S=await this.client.core.crypto.encode("",_,{type:yl,encoding:vl});x=Wd(n,B,S)}else await Promise.all([this.sendRequest({topic:B,method:"wc_sessionAuthenticate",params:T,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:g}),this.sendRequest({topic:B,method:"wc_sessionPropose",params:ue,expiry:Bn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:v})])}catch(_){throw this.events.off(vr("session_connect"),m),this.events.off(vr("session_request",g),f),_}return await this.setProposal(v,tn({id:v},ue)),await this.setAuthRequest(g,{request:ws(tn({},T),{verifyContext:{}}),pairingTopic:B,transportType:o}),{uri:x??q,response:_e}},this.approveSessionAuthenticate=async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[cc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(D){throw s.setError(Cl.no_internet_connection),D}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(Cl.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Wr.relay;a===Wr.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),d=Hd(u),p={type:So,receiverPublicKey:u,senderPublicKey:l},y=[],A=[];for(const D of i){if(!await n_({cacao:D,projectId:this.client.core.projectId})){s.setError(Cl.invalid_cacao);const H=Dr("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:d,error:H,encodeOpts:p}),new Error(H.message)}s.addTrace(cc.cacaos_verified);const{p:k}=D,B=zd(k.resources),q=[o1(k.iss)],j=qd(k.iss);if(B){const H=o_(B),J=a_(B);y.push(...H),q.push(...J)}for(const H of q)A.push(`${H}:${j}`)}const P=await this.client.core.crypto.generateSharedKey(l,u);s.addTrace(cc.create_authenticated_session_topic);let O;if((y==null?void 0:y.length)>0){O={topic:P,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:En(Iu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:x_([...new Set(y)],[...new Set(A)]),transportType:a},s.addTrace(cc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:a})}catch(D){throw s.setError(Cl.subscribe_authenticated_session_topic_failure),D}s.addTrace(cc.subscribe_authenticated_session_topic_success),await this.client.session.set(P,O),s.addTrace(cc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(cc.publishing_authenticated_session_approve);try{await this.sendResult({topic:d,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:p,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(D){throw s.setError(Cl.authenticated_session_approve_publish_failure),D}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:O}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Wr.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),u=Hd(o),l={type:So,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:u,error:i,encodeOpts:l,rpcOpts:Bn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,Dr("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:n,iss:i}=r;return i_(n,i)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:u}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Dr("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(I6).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,Dr("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Gs.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})},this.deleteProposal=async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(ac.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Dr("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Gs.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))},this.setProposal=async(r,n)=>{this.client.core.expirer.set(r,En(Bn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)},this.setAuthRequest=async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Wr.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})},this.setPendingSessionRequest=async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||En(Bn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:u,throwOnFailedPublish:l,appLink:d}=r,p=da(i,s,u);let y;const A=!!d;try{const D=A?vl:la;y=await this.client.core.crypto.encode(n,p,{encoding:D})}catch(D){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),D}let P;if(aq.includes(i)){const D=Ao(JSON.stringify(p)),k=Ao(y);P=await this.client.core.verify.register({id:k,decryptedId:D})}const O=Bn[i].req;if(O.attestation=P,o&&(O.ttl=o),a&&(O.id=a),this.client.core.history.set(n,p),A){const D=Wd(d,n,y);await global.Linking.openURL(D,this.client.name)}else{const D=Bn[i].req;o&&(D.ttl=o),a&&(D.id=a),l?(D.internal=ws(tn({},D.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,y,D)):this.client.core.relayer.publish(n,y,D).catch(k=>this.client.logger.error(k))}return p.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:u}=r,l=Vd(n,s);let d;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const A=p?vl:la;d=await this.client.core.crypto.encode(i,l,ws(tn({},a||{}),{encoding:A}))}catch(A){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),A}let y;try{y=await this.client.core.history.get(i,n)}catch(A){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),A}if(p){const A=Wd(u,i,d);await global.Linking.openURL(A,this.client.name)}else{const A=Bn[y.request.method].res;o?(A.internal=ws(tn({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,d,A)):this.client.core.relayer.publish(i,d,A).catch(P=>this.client.logger.error(P))}await this.client.core.history.resolve(l)},this.sendError=async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:u}=r,l=Gd(n,s);let d;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const A=p?vl:la;d=await this.client.core.crypto.encode(i,l,ws(tn({},o||{}),{encoding:A}))}catch(A){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),A}let y;try{y=await this.client.core.history.get(i,n)}catch(A){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),A}if(p){const A=Wd(u,i,d);await global.Linking.openURL(A,this.client.name)}else{const A=a||Bn[y.request.method].res;this.client.core.relayer.publish(i,d,A)}await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;fa(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{fa(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Gs.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Gs.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Gs.idle},this.processRequest=async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,u=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=ut("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.shouldIgnorePairingRequest=r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:u}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.isValidConnect(tn({},i.params));const d=a.expiryTimestamp||En(Bn.wc_sessionPropose.req.ttl),p=tn({id:u,pairingTopic:n,expiryTimestamp:d},a);await this.setProposal(u,p);const y=await this.getVerifyContext({attestationId:s,hash:Ao(JSON.stringify(i)),encryptedId:o,metadata:p.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Io.proposal_listener_not_found)),l==null||l.addTrace(Vs.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:p,verifyContext:y})}catch(l){await this.sendError({id:u,topic:n,error:l,rpcOpts:Bn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}},this.onSessionProposeResponse=async(r,n,i)=>{const{id:s}=n;if(Hs(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const u=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const d=await this.client.core.crypto.generateSharedKey(u,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:d});const p=await this.client.core.relayer.subscribe(d,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:p}),await this.client.core.pairing.activate({topic:r})}else if(Yi(n)){await this.client.proposal.delete(s,Dr("USER_DISCONNECTED"));const o=vr("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(vr("session_connect"),{error:n.error})}},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:u,namespaces:l,sessionProperties:d,sessionConfig:p}=n.params,y=ws(tn(tn({topic:r,relay:o,expiry:u,namespaces:l,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},d&&{sessionProperties:d}),p&&{sessionConfig:p}),{transportType:Wr.relay}),A=vr("session_connect");if(this.events.listenerCount(A)===0)throw new Error(`emitting ${A} without any listeners 997`);this.events.emit(vr("session_connect"),{session:y}),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Hs(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(vr("session_approve",i),{})):Yi(n)&&(await this.client.session.delete(r,Dr("USER_DISCONNECTED")),this.events.emit(vr("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Al.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:Dr("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(tn({topic:r},i));try{Al.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(u){throw Al.delete(o),u}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n,s=vr("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Hs(n)?this.events.emit(vr("session_update",i),{}):Yi(n)&&this.events.emit(vr("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,En(Iu)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n,s=vr("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Hs(n)?this.events.emit(vr("session_extend",i),{}):Yi(n)&&this.events.emit(vr("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n,s=vr("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Hs(n)?this.events.emit(vr("session_ping",i),{}):Yi(n)&&this.events.emit(vr("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(ii.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Dr("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var n,i,s;const{topic:o,payload:a,attestation:u,encryptedId:l,transportType:d}=r,{id:p,params:y}=a;try{await this.isValidRequest(tn({topic:o},y));const A=this.client.session.get(o),P=await this.getVerifyContext({attestationId:u,hash:Ao(JSON.stringify(da("wc_sessionRequest",y,p))),encryptedId:l,metadata:A.peer.metadata,transportType:d}),O={id:p,topic:o,params:y,verifyContext:P};await this.setPendingSessionRequest(O),d===Wr.link_mode&&(n=A.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=A.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(O):(this.addSessionRequestToSessionRequestQueue(O),this.processSessionRequestQueue())}catch(A){await this.sendError({id:p,topic:o,error:A}),this.client.logger.error(A)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n,s=vr("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Hs(n)?this.events.emit(vr("session_request",i),{result:n.result}):Yi(n)&&this.events.emit(vr("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Al.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(tn({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Al.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Hs(n)?this.events.emit(vr("session_request",i),{result:n.result}):Yi(n)&&this.events.emit(vr("session_request",i),{error:n.error})},this.onSessionAuthenticateRequest=async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:u}=r;try{const{requester:l,authPayload:d,expiryTimestamp:p}=s.params,y=await this.getVerifyContext({attestationId:o,hash:Ao(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:u}),A={requester:l,pairingTopic:i,id:s.id,authPayload:d,verifyContext:y,expiryTimestamp:p};await this.setAuthRequest(s.id,{request:A,pairingTopic:i,transportType:u}),u===Wr.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:y})}catch(l){this.client.logger.error(l);const d=s.params.requester.publicKey,p=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(s.params.requester.metadata,u),A={type:So,receiverPublicKey:d,senderPublicKey:p};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:A,rpcOpts:Bn.wc_sessionAuthenticate.autoReject,appLink:y})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Gs.idle,this.processSessionRequestQueue()},mt.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=vr("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(vr("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Gs.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Gs.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:da("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})},this.isValidConnect=async r=>{if(!yi(r)){const{message:u}=ut("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(bi(n)||await this.isValidPairingTopic(n),!B$(a)){const{message:u}=ut("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(u)}!bi(i)&&Sl(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!bi(s)&&Sl(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),bi(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=k$(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!yi(r))throw new Error(ut("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const a=this.client.proposal.get(n),u=h1(i,"approve()");if(u)throw new Error(u.message);const l=P_(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!an(s,!0)){const{message:d}=ut("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}bi(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!yi(r)){const{message:s}=ut("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!F$(i)){const{message:s}=ut("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!yi(r)){const{message:l}=ut("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!S_(n)){const{message:l}=ut("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=T$(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const u=h1(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(fa(o)){const{message:l}=ut("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!yi(r)){const{message:u}=ut("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=h1(i,"update()");if(o)throw new Error(o.message);const a=P_(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!yi(r)){const{message:i}=ut("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!yi(r)){const{message:u}=ut("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!A_(a,s)){const{message:u}=ut("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!j$(i)){const{message:u}=ut("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!z$(a,s,i.method)){const{message:u}=ut("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!V$(o,S1)){const{message:u}=ut("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${S1.min} and ${S1.max}`);throw new Error(u)}},this.isValidRespond=async r=>{var n;if(!yi(r)){const{message:o}=ut("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!U$(s)){const{message:o}=ut("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!yi(r)){const{message:i}=ut("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!yi(r)){const{message:a}=ut("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!A_(o,s)){const{message:a}=ut("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!q$(i)){const{message:a}=ut("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!H$(o,s,i.name)){const{message:a}=ut("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!yi(r)){const{message:i}=ut("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidAuthenticate=r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!an(i,!1))throw new Error("uri is required parameter");if(!an(s,!1))throw new Error("domain is required parameter");if(!an(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(u=>Su(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Su(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,u={verified:{verifyUrl:o.verifyUrl||Il,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Wr.link_mode){const d=this.getAppLinkIfEnabled(o,a);return u.verified.validation=d&&new URL(d).origin===new URL(o.url).origin?"VALID":"INVALID",u}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(u.verified.origin=l.origin,u.verified.isScam=l.isScam,u.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!an(i,!1)){const{message:s}=ut("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0},this.addToRecentlyDeleted=(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=ut("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}},this.isLinkModeEnabled=(r,n)=>{var i,s,o,a,u,l,d,p,y;return!r||n!==Wr.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:l.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.universal)!==void 0&&((p=r==null?void 0:r.redirect)==null?void 0:p.universal)!==""&&((y=r==null?void 0:r.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=Z3(r,"topic")||"",i=decodeURIComponent(Z3(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Wr.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if(i1()||Au()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ii.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Qd)?this.client.auth.authKeys.get(Qd):{publicKey:void 0},a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Wr.link_mode?vl:la});try{g1(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Ao(n)})):Yd(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(Zi.expired,async e=>{const{topic:r,id:n}=X3(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ut("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ut("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(oc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(oc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!an(e,!1)){const{message:r}=ut("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ut("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(fa(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ut("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!an(e,!1)){const{message:r}=ut("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ut("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(fa(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ut("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ut("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(an(e,!1)){const{message:r}=ut("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ut("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!$$(e)){const{message:r}=ut("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ut("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(fa(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ut("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class yq extends uc{constructor(e,r){super(e,r,nq,_1),this.core=e,this.logger=r}}let wq=class extends uc{constructor(e,r){super(e,r,iq,_1),this.core=e,this.logger=r}};class xq extends uc{constructor(e,r){super(e,r,oq,_1,n=>n.id),this.core=e,this.logger=r}}class _q extends uc{constructor(e,r){super(e,r,fq,Zd,()=>Qd),this.core=e,this.logger=r}}class Eq extends uc{constructor(e,r){super(e,r,lq,Zd),this.core=e,this.logger=r}}class Sq extends uc{constructor(e,r){super(e,r,hq,Zd,n=>n.id),this.core=e,this.logger=r}}class Aq{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new _q(this.core,this.logger),this.pairingTopics=new Eq(this.core,this.logger),this.requests=new Sq(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class A1 extends ZR{constructor(e){super(e),this.protocol=A6,this.version=P6,this.name=E1.name,this.events=new qi.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.authenticate=async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}},this.approveSessionAuthenticate=async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.rejectSessionAuthenticate=async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||E1.name,this.metadata=(e==null?void 0:e.metadata)||K3(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qf(od({level:(e==null?void 0:e.logger)||E1.logger}));this.core=(e==null?void 0:e.core)||new rq(e),this.logger=ri(r,this.name),this.session=new wq(this.core,this.logger),this.proposal=new yq(this.core,this.logger),this.pendingRequest=new xq(this.core,this.logger),this.engine=new bq(this),this.auth=new Aq(this.core,this.logger)}static async init(e){const r=new A1(e);return await r.initialize(),r}get context(){return gi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var e0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */e0.exports,function(t,e){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,d="__lodash_placeholder__",p=1,y=2,A=4,P=1,O=2,D=1,k=2,B=4,q=8,j=16,H=32,J=64,T=128,z=256,ue=512,_e=30,G="...",E=800,m=16,f=1,g=2,v=3,x=1/0,_=9007199254740991,S=17976931348623157e292,b=NaN,M=4294967295,I=M-1,F=M>>>1,ce=[["ary",T],["bind",D],["bindKey",k],["curry",q],["curryRight",j],["flip",ue],["partial",H],["partialRight",J],["rearg",z]],N="[object Arguments]",se="[object Array]",ee="[object AsyncFunction]",X="[object Boolean]",Q="[object Date]",R="[object DOMException]",Z="[object Error]",te="[object Function]",le="[object GeneratorFunction]",ie="[object Map]",fe="[object Number]",ve="[object Null]",Me="[object Object]",Ne="[object Promise]",Te="[object Proxy]",$e="[object RegExp]",Ie="[object Set]",Le="[object String]",Ve="[object Symbol]",ke="[object Undefined]",ze="[object WeakMap]",He="[object WeakSet]",Ee="[object ArrayBuffer]",Qe="[object DataView]",ct="[object Float32Array]",Be="[object Float64Array]",et="[object Int8Array]",rt="[object Int16Array]",Je="[object Int32Array]",pt="[object Uint8Array]",ht="[object Uint8ClampedArray]",ft="[object Uint16Array]",Ht="[object Uint32Array]",Jt=/\b__p \+= '';/g,St=/\b(__p \+=) '' \+/g,er=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xt=/&(?:amp|lt|gt|quot|#39);/g,Ot=/[&<>"']/g,Bt=RegExp(Xt.source),Tt=RegExp(Ot.source),vt=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(nt.source),$=/^\s+/,W=/\s/,V=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,C=/\{\n\/\* \[wrapped with (.+)\] \*/,Y=/,? & /,U=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oe=/[()=,{}\[\]\/\s]/,ge=/\\(\\)?/g,xe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Re=/\w*$/,De=/^[-+]0x[0-9a-f]+$/i,it=/^0b[01]+$/i,Ue=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,tt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,At=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,Mt="\\ud800-\\udfff",Et="\\u0300-\\u036f",dt="\\ufe20-\\ufe2f",_t="\\u20d0-\\u20ff",ot=Et+dt+_t,wt="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",at="\\xac\\xb1\\xd7\\xf7",Ae="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pe="\\u2000-\\u206f",Ge=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",je="A-Z\\xc0-\\xd6\\xd8-\\xde",qe="\\ufe0e\\ufe0f",Xe=at+Ae+Pe+Ge,kt="['’]",Wt="["+Mt+"]",Zt="["+Xe+"]",Kt="["+ot+"]",pe="\\d+",nr="["+wt+"]",dr="["+lt+"]",pr="[^"+Mt+Xe+pe+wt+lt+je+"]",Qt="\\ud83c[\\udffb-\\udfff]",gr="(?:"+Kt+"|"+Qt+")",lr="[^"+Mt+"]",Lr="(?:\\ud83c[\\udde6-\\uddff]){2}",mr="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+je+"]",Br="\\u200d",$r="(?:"+dr+"|"+pr+")",Ir="(?:"+wr+"|"+pr+")",hn="(?:"+kt+"(?:d|ll|m|re|s|t|ve))?",dn="(?:"+kt+"(?:D|LL|M|RE|S|T|VE))?",pn=gr+"?",sp="["+qe+"]?",Fb="(?:"+Br+"(?:"+[lr,Lr,mr].join("|")+")"+sp+pn+")*",jo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",op="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ap=sp+pn+Fb,ef="(?:"+[nr,Lr,mr].join("|")+")"+ap,jb="(?:"+[lr+Kt+"?",Kt,Lr,mr,Wt].join("|")+")",gh=RegExp(kt,"g"),Ub=RegExp(Kt,"g"),tf=RegExp(Qt+"(?="+Qt+")|"+jb+ap,"g"),cp=RegExp([wr+"?"+dr+"+"+hn+"(?="+[Zt,wr,"$"].join("|")+")",Ir+"+"+dn+"(?="+[Zt,wr+$r,"$"].join("|")+")",wr+"?"+$r+"+"+hn,wr+"+"+dn,op,jo,pe,ef].join("|"),"g"),up=RegExp("["+Br+Mt+ot+qe+"]"),Pc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qb=-1,Fr={};Fr[ct]=Fr[Be]=Fr[et]=Fr[rt]=Fr[Je]=Fr[pt]=Fr[ht]=Fr[ft]=Fr[Ht]=!0,Fr[N]=Fr[se]=Fr[Ee]=Fr[X]=Fr[Qe]=Fr[Q]=Fr[Z]=Fr[te]=Fr[ie]=Fr[fe]=Fr[Me]=Fr[$e]=Fr[Ie]=Fr[Le]=Fr[ze]=!1;var kr={};kr[N]=kr[se]=kr[Ee]=kr[Qe]=kr[X]=kr[Q]=kr[ct]=kr[Be]=kr[et]=kr[rt]=kr[Je]=kr[ie]=kr[fe]=kr[Me]=kr[$e]=kr[Ie]=kr[Le]=kr[Ve]=kr[pt]=kr[ht]=kr[ft]=kr[Ht]=!0,kr[Z]=kr[te]=kr[ze]=!1;var ae={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},It={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jr=parseFloat,ir=parseInt,Yr=typeof nn=="object"&&nn&&nn.Object===Object&&nn,wn=typeof self=="object"&&self&&self.Object===Object&&self,_r=Yr||wn||Function("return this")(),Ur=e&&!e.nodeType&&e,gn=Ur&&!0&&t&&!t.nodeType&&t,_i=gn&&gn.exports===Ur,xn=_i&&Yr.process,Jr=function(){try{var be=gn&&gn.require&&gn.require("util").types;return be||xn&&xn.binding&&xn.binding("util")}catch{}}(),oi=Jr&&Jr.isArrayBuffer,Ps=Jr&&Jr.isDate,is=Jr&&Jr.isMap,ro=Jr&&Jr.isRegExp,mh=Jr&&Jr.isSet,Mc=Jr&&Jr.isTypedArray;function $n(be,Fe,Ce){switch(Ce.length){case 0:return be.call(Fe);case 1:return be.call(Fe,Ce[0]);case 2:return be.call(Fe,Ce[0],Ce[1]);case 3:return be.call(Fe,Ce[0],Ce[1],Ce[2])}return be.apply(Fe,Ce)}function NQ(be,Fe,Ce,Ct){for(var tr=-1,Mr=be==null?0:be.length;++tr<Mr;){var An=be[tr];Fe(Ct,An,Ce(An),be)}return Ct}function ss(be,Fe){for(var Ce=-1,Ct=be==null?0:be.length;++Ce<Ct&&Fe(be[Ce],Ce,be)!==!1;);return be}function LQ(be,Fe){for(var Ce=be==null?0:be.length;Ce--&&Fe(be[Ce],Ce,be)!==!1;);return be}function Y7(be,Fe){for(var Ce=-1,Ct=be==null?0:be.length;++Ce<Ct;)if(!Fe(be[Ce],Ce,be))return!1;return!0}function Ia(be,Fe){for(var Ce=-1,Ct=be==null?0:be.length,tr=0,Mr=[];++Ce<Ct;){var An=be[Ce];Fe(An,Ce,be)&&(Mr[tr++]=An)}return Mr}function lp(be,Fe){var Ce=be==null?0:be.length;return!!Ce&&rf(be,Fe,0)>-1}function zb(be,Fe,Ce){for(var Ct=-1,tr=be==null?0:be.length;++Ct<tr;)if(Ce(Fe,be[Ct]))return!0;return!1}function Xr(be,Fe){for(var Ce=-1,Ct=be==null?0:be.length,tr=Array(Ct);++Ce<Ct;)tr[Ce]=Fe(be[Ce],Ce,be);return tr}function Ca(be,Fe){for(var Ce=-1,Ct=Fe.length,tr=be.length;++Ce<Ct;)be[tr+Ce]=Fe[Ce];return be}function Hb(be,Fe,Ce,Ct){var tr=-1,Mr=be==null?0:be.length;for(Ct&&Mr&&(Ce=be[++tr]);++tr<Mr;)Ce=Fe(Ce,be[tr],tr,be);return Ce}function kQ(be,Fe,Ce,Ct){var tr=be==null?0:be.length;for(Ct&&tr&&(Ce=be[--tr]);tr--;)Ce=Fe(Ce,be[tr],tr,be);return Ce}function Wb(be,Fe){for(var Ce=-1,Ct=be==null?0:be.length;++Ce<Ct;)if(Fe(be[Ce],Ce,be))return!0;return!1}var BQ=Kb("length");function $Q(be){return be.split("")}function FQ(be){return be.match(U)||[]}function J7(be,Fe,Ce){var Ct;return Ce(be,function(tr,Mr,An){if(Fe(tr,Mr,An))return Ct=Mr,!1}),Ct}function hp(be,Fe,Ce,Ct){for(var tr=be.length,Mr=Ce+(Ct?1:-1);Ct?Mr--:++Mr<tr;)if(Fe(be[Mr],Mr,be))return Mr;return-1}function rf(be,Fe,Ce){return Fe===Fe?XQ(be,Fe,Ce):hp(be,X7,Ce)}function jQ(be,Fe,Ce,Ct){for(var tr=Ce-1,Mr=be.length;++tr<Mr;)if(Ct(be[tr],Fe))return tr;return-1}function X7(be){return be!==be}function Z7(be,Fe){var Ce=be==null?0:be.length;return Ce?Gb(be,Fe)/Ce:b}function Kb(be){return function(Fe){return Fe==null?r:Fe[be]}}function Vb(be){return function(Fe){return be==null?r:be[Fe]}}function Q7(be,Fe,Ce,Ct,tr){return tr(be,function(Mr,An,qr){Ce=Ct?(Ct=!1,Mr):Fe(Ce,Mr,An,qr)}),Ce}function UQ(be,Fe){var Ce=be.length;for(be.sort(Fe);Ce--;)be[Ce]=be[Ce].value;return be}function Gb(be,Fe){for(var Ce,Ct=-1,tr=be.length;++Ct<tr;){var Mr=Fe(be[Ct]);Mr!==r&&(Ce=Ce===r?Mr:Ce+Mr)}return Ce}function Yb(be,Fe){for(var Ce=-1,Ct=Array(be);++Ce<be;)Ct[Ce]=Fe(Ce);return Ct}function qQ(be,Fe){return Xr(Fe,function(Ce){return[Ce,be[Ce]]})}function e9(be){return be&&be.slice(0,i9(be)+1).replace($,"")}function Li(be){return function(Fe){return be(Fe)}}function Jb(be,Fe){return Xr(Fe,function(Ce){return be[Ce]})}function vh(be,Fe){return be.has(Fe)}function t9(be,Fe){for(var Ce=-1,Ct=be.length;++Ce<Ct&&rf(Fe,be[Ce],0)>-1;);return Ce}function r9(be,Fe){for(var Ce=be.length;Ce--&&rf(Fe,be[Ce],0)>-1;);return Ce}function zQ(be,Fe){for(var Ce=be.length,Ct=0;Ce--;)be[Ce]===Fe&&++Ct;return Ct}var HQ=Vb(ae),WQ=Vb(ye);function KQ(be){return"\\"+It[be]}function VQ(be,Fe){return be==null?r:be[Fe]}function nf(be){return up.test(be)}function GQ(be){return Pc.test(be)}function YQ(be){for(var Fe,Ce=[];!(Fe=be.next()).done;)Ce.push(Fe.value);return Ce}function Xb(be){var Fe=-1,Ce=Array(be.size);return be.forEach(function(Ct,tr){Ce[++Fe]=[tr,Ct]}),Ce}function n9(be,Fe){return function(Ce){return be(Fe(Ce))}}function Ta(be,Fe){for(var Ce=-1,Ct=be.length,tr=0,Mr=[];++Ce<Ct;){var An=be[Ce];(An===Fe||An===d)&&(be[Ce]=d,Mr[tr++]=Ce)}return Mr}function dp(be){var Fe=-1,Ce=Array(be.size);return be.forEach(function(Ct){Ce[++Fe]=Ct}),Ce}function JQ(be){var Fe=-1,Ce=Array(be.size);return be.forEach(function(Ct){Ce[++Fe]=[Ct,Ct]}),Ce}function XQ(be,Fe,Ce){for(var Ct=Ce-1,tr=be.length;++Ct<tr;)if(be[Ct]===Fe)return Ct;return-1}function ZQ(be,Fe,Ce){for(var Ct=Ce+1;Ct--;)if(be[Ct]===Fe)return Ct;return Ct}function sf(be){return nf(be)?eee(be):BQ(be)}function Ms(be){return nf(be)?tee(be):$Q(be)}function i9(be){for(var Fe=be.length;Fe--&&W.test(be.charAt(Fe)););return Fe}var QQ=Vb(Ye);function eee(be){for(var Fe=tf.lastIndex=0;tf.test(be);)++Fe;return Fe}function tee(be){return be.match(tf)||[]}function ree(be){return be.match(cp)||[]}var nee=function be(Fe){Fe=Fe==null?_r:of.defaults(_r.Object(),Fe,of.pick(_r,fp));var Ce=Fe.Array,Ct=Fe.Date,tr=Fe.Error,Mr=Fe.Function,An=Fe.Math,qr=Fe.Object,Zb=Fe.RegExp,iee=Fe.String,os=Fe.TypeError,pp=Ce.prototype,see=Mr.prototype,af=qr.prototype,gp=Fe["__core-js_shared__"],mp=see.toString,Tr=af.hasOwnProperty,oee=0,s9=function(){var c=/[^.]+$/.exec(gp&&gp.keys&&gp.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),vp=af.toString,aee=mp.call(qr),cee=_r._,uee=Zb("^"+mp.call(Tr).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bp=_i?Fe.Buffer:r,Ra=Fe.Symbol,yp=Fe.Uint8Array,o9=bp?bp.allocUnsafe:r,wp=n9(qr.getPrototypeOf,qr),a9=qr.create,c9=af.propertyIsEnumerable,xp=pp.splice,u9=Ra?Ra.isConcatSpreadable:r,bh=Ra?Ra.iterator:r,Ic=Ra?Ra.toStringTag:r,_p=function(){try{var c=Oc(qr,"defineProperty");return c({},"",{}),c}catch{}}(),fee=Fe.clearTimeout!==_r.clearTimeout&&Fe.clearTimeout,lee=Ct&&Ct.now!==_r.Date.now&&Ct.now,hee=Fe.setTimeout!==_r.setTimeout&&Fe.setTimeout,Ep=An.ceil,Sp=An.floor,Qb=qr.getOwnPropertySymbols,dee=bp?bp.isBuffer:r,f9=Fe.isFinite,pee=pp.join,gee=n9(qr.keys,qr),Pn=An.max,ei=An.min,mee=Ct.now,vee=Fe.parseInt,l9=An.random,bee=pp.reverse,ey=Oc(Fe,"DataView"),yh=Oc(Fe,"Map"),ty=Oc(Fe,"Promise"),cf=Oc(Fe,"Set"),wh=Oc(Fe,"WeakMap"),xh=Oc(qr,"create"),Ap=wh&&new wh,uf={},yee=Nc(ey),wee=Nc(yh),xee=Nc(ty),_ee=Nc(cf),Eee=Nc(wh),Pp=Ra?Ra.prototype:r,_h=Pp?Pp.valueOf:r,h9=Pp?Pp.toString:r;function re(c){if(rn(c)&&!sr(c)&&!(c instanceof xr)){if(c instanceof as)return c;if(Tr.call(c,"__wrapped__"))return dA(c)}return new as(c)}var ff=function(){function c(){}return function(h){if(!Qr(h))return{};if(a9)return a9(h);c.prototype=h;var w=new c;return c.prototype=r,w}}();function Mp(){}function as(c,h){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=r}re.templateSettings={escape:vt,evaluate:Dt,interpolate:Lt,variable:"",imports:{_:re}},re.prototype=Mp.prototype,re.prototype.constructor=re,as.prototype=ff(Mp.prototype),as.prototype.constructor=as;function xr(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function See(){var c=new xr(this.__wrapped__);return c.__actions__=Ei(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Ei(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Ei(this.__views__),c}function Aee(){if(this.__filtered__){var c=new xr(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Pee(){var c=this.__wrapped__.value(),h=this.__dir__,w=sr(c),L=h<0,K=w?c.length:0,ne=$te(0,K,this.__views__),he=ne.start,me=ne.end,we=me-he,We=L?me:he-1,Ke=this.__iteratees__,Ze=Ke.length,xt=0,Nt=ei(we,this.__takeCount__);if(!w||!L&&K==we&&Nt==we)return k9(c,this.__actions__);var Vt=[];e:for(;we--&&xt<Nt;){We+=h;for(var fr=-1,Gt=c[We];++fr<Ze;){var br=Ke[fr],Er=br.iteratee,$i=br.type,ui=Er(Gt);if($i==g)Gt=ui;else if(!ui){if($i==f)continue e;break e}}Vt[xt++]=Gt}return Vt}xr.prototype=ff(Mp.prototype),xr.prototype.constructor=xr;function Cc(c){var h=-1,w=c==null?0:c.length;for(this.clear();++h<w;){var L=c[h];this.set(L[0],L[1])}}function Mee(){this.__data__=xh?xh(null):{},this.size=0}function Iee(c){var h=this.has(c)&&delete this.__data__[c];return this.size-=h?1:0,h}function Cee(c){var h=this.__data__;if(xh){var w=h[c];return w===u?r:w}return Tr.call(h,c)?h[c]:r}function Tee(c){var h=this.__data__;return xh?h[c]!==r:Tr.call(h,c)}function Ree(c,h){var w=this.__data__;return this.size+=this.has(c)?0:1,w[c]=xh&&h===r?u:h,this}Cc.prototype.clear=Mee,Cc.prototype.delete=Iee,Cc.prototype.get=Cee,Cc.prototype.has=Tee,Cc.prototype.set=Ree;function Uo(c){var h=-1,w=c==null?0:c.length;for(this.clear();++h<w;){var L=c[h];this.set(L[0],L[1])}}function Dee(){this.__data__=[],this.size=0}function Oee(c){var h=this.__data__,w=Ip(h,c);if(w<0)return!1;var L=h.length-1;return w==L?h.pop():xp.call(h,w,1),--this.size,!0}function Nee(c){var h=this.__data__,w=Ip(h,c);return w<0?r:h[w][1]}function Lee(c){return Ip(this.__data__,c)>-1}function kee(c,h){var w=this.__data__,L=Ip(w,c);return L<0?(++this.size,w.push([c,h])):w[L][1]=h,this}Uo.prototype.clear=Dee,Uo.prototype.delete=Oee,Uo.prototype.get=Nee,Uo.prototype.has=Lee,Uo.prototype.set=kee;function qo(c){var h=-1,w=c==null?0:c.length;for(this.clear();++h<w;){var L=c[h];this.set(L[0],L[1])}}function Bee(){this.size=0,this.__data__={hash:new Cc,map:new(yh||Uo),string:new Cc}}function $ee(c){var h=jp(this,c).delete(c);return this.size-=h?1:0,h}function Fee(c){return jp(this,c).get(c)}function jee(c){return jp(this,c).has(c)}function Uee(c,h){var w=jp(this,c),L=w.size;return w.set(c,h),this.size+=w.size==L?0:1,this}qo.prototype.clear=Bee,qo.prototype.delete=$ee,qo.prototype.get=Fee,qo.prototype.has=jee,qo.prototype.set=Uee;function Tc(c){var h=-1,w=c==null?0:c.length;for(this.__data__=new qo;++h<w;)this.add(c[h])}function qee(c){return this.__data__.set(c,u),this}function zee(c){return this.__data__.has(c)}Tc.prototype.add=Tc.prototype.push=qee,Tc.prototype.has=zee;function Is(c){var h=this.__data__=new Uo(c);this.size=h.size}function Hee(){this.__data__=new Uo,this.size=0}function Wee(c){var h=this.__data__,w=h.delete(c);return this.size=h.size,w}function Kee(c){return this.__data__.get(c)}function Vee(c){return this.__data__.has(c)}function Gee(c,h){var w=this.__data__;if(w instanceof Uo){var L=w.__data__;if(!yh||L.length<i-1)return L.push([c,h]),this.size=++w.size,this;w=this.__data__=new qo(L)}return w.set(c,h),this.size=w.size,this}Is.prototype.clear=Hee,Is.prototype.delete=Wee,Is.prototype.get=Kee,Is.prototype.has=Vee,Is.prototype.set=Gee;function d9(c,h){var w=sr(c),L=!w&&Lc(c),K=!w&&!L&&ka(c),ne=!w&&!L&&!K&&pf(c),he=w||L||K||ne,me=he?Yb(c.length,iee):[],we=me.length;for(var We in c)(h||Tr.call(c,We))&&!(he&&(We=="length"||K&&(We=="offset"||We=="parent")||ne&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Ko(We,we)))&&me.push(We);return me}function p9(c){var h=c.length;return h?c[hy(0,h-1)]:r}function Yee(c,h){return Up(Ei(c),Rc(h,0,c.length))}function Jee(c){return Up(Ei(c))}function ry(c,h,w){(w!==r&&!Cs(c[h],w)||w===r&&!(h in c))&&zo(c,h,w)}function Eh(c,h,w){var L=c[h];(!(Tr.call(c,h)&&Cs(L,w))||w===r&&!(h in c))&&zo(c,h,w)}function Ip(c,h){for(var w=c.length;w--;)if(Cs(c[w][0],h))return w;return-1}function Xee(c,h,w,L){return Da(c,function(K,ne,he){h(L,K,w(K),he)}),L}function g9(c,h){return c&&io(h,Fn(h),c)}function Zee(c,h){return c&&io(h,Ai(h),c)}function zo(c,h,w){h=="__proto__"&&_p?_p(c,h,{configurable:!0,enumerable:!0,value:w,writable:!0}):c[h]=w}function ny(c,h){for(var w=-1,L=h.length,K=Ce(L),ne=c==null;++w<L;)K[w]=ne?r:By(c,h[w]);return K}function Rc(c,h,w){return c===c&&(w!==r&&(c=c<=w?c:w),h!==r&&(c=c>=h?c:h)),c}function cs(c,h,w,L,K,ne){var he,me=h&p,we=h&y,We=h&A;if(w&&(he=K?w(c,L,K,ne):w(c)),he!==r)return he;if(!Qr(c))return c;var Ke=sr(c);if(Ke){if(he=jte(c),!me)return Ei(c,he)}else{var Ze=ti(c),xt=Ze==te||Ze==le;if(ka(c))return F9(c,me);if(Ze==Me||Ze==N||xt&&!K){if(he=we||xt?{}:iA(c),!me)return we?Cte(c,Zee(he,c)):Ite(c,g9(he,c))}else{if(!kr[Ze])return K?c:{};he=Ute(c,Ze,me)}}ne||(ne=new Is);var Nt=ne.get(c);if(Nt)return Nt;ne.set(c,he),OA(c)?c.forEach(function(Gt){he.add(cs(Gt,h,w,Gt,c,ne))}):RA(c)&&c.forEach(function(Gt,br){he.set(br,cs(Gt,h,w,br,c,ne))});var Vt=We?we?Ey:_y:we?Ai:Fn,fr=Ke?r:Vt(c);return ss(fr||c,function(Gt,br){fr&&(br=Gt,Gt=c[br]),Eh(he,br,cs(Gt,h,w,br,c,ne))}),he}function Qee(c){var h=Fn(c);return function(w){return m9(w,c,h)}}function m9(c,h,w){var L=w.length;if(c==null)return!L;for(c=qr(c);L--;){var K=w[L],ne=h[K],he=c[K];if(he===r&&!(K in c)||!ne(he))return!1}return!0}function v9(c,h,w){if(typeof c!="function")throw new os(o);return Th(function(){c.apply(r,w)},h)}function Sh(c,h,w,L){var K=-1,ne=lp,he=!0,me=c.length,we=[],We=h.length;if(!me)return we;w&&(h=Xr(h,Li(w))),L?(ne=zb,he=!1):h.length>=i&&(ne=vh,he=!1,h=new Tc(h));e:for(;++K<me;){var Ke=c[K],Ze=w==null?Ke:w(Ke);if(Ke=L||Ke!==0?Ke:0,he&&Ze===Ze){for(var xt=We;xt--;)if(h[xt]===Ze)continue e;we.push(Ke)}else ne(h,Ze,L)||we.push(Ke)}return we}var Da=H9(no),b9=H9(sy,!0);function ete(c,h){var w=!0;return Da(c,function(L,K,ne){return w=!!h(L,K,ne),w}),w}function Cp(c,h,w){for(var L=-1,K=c.length;++L<K;){var ne=c[L],he=h(ne);if(he!=null&&(me===r?he===he&&!Bi(he):w(he,me)))var me=he,we=ne}return we}function tte(c,h,w,L){var K=c.length;for(w=ur(w),w<0&&(w=-w>K?0:K+w),L=L===r||L>K?K:ur(L),L<0&&(L+=K),L=w>L?0:LA(L);w<L;)c[w++]=h;return c}function y9(c,h){var w=[];return Da(c,function(L,K,ne){h(L,K,ne)&&w.push(L)}),w}function Vn(c,h,w,L,K){var ne=-1,he=c.length;for(w||(w=zte),K||(K=[]);++ne<he;){var me=c[ne];h>0&&w(me)?h>1?Vn(me,h-1,w,L,K):Ca(K,me):L||(K[K.length]=me)}return K}var iy=W9(),w9=W9(!0);function no(c,h){return c&&iy(c,h,Fn)}function sy(c,h){return c&&w9(c,h,Fn)}function Tp(c,h){return Ia(h,function(w){return Vo(c[w])})}function Dc(c,h){h=Na(h,c);for(var w=0,L=h.length;c!=null&&w<L;)c=c[so(h[w++])];return w&&w==L?c:r}function x9(c,h,w){var L=h(c);return sr(c)?L:Ca(L,w(c))}function ai(c){return c==null?c===r?ke:ve:Ic&&Ic in qr(c)?Bte(c):Jte(c)}function oy(c,h){return c>h}function rte(c,h){return c!=null&&Tr.call(c,h)}function nte(c,h){return c!=null&&h in qr(c)}function ite(c,h,w){return c>=ei(h,w)&&c<Pn(h,w)}function ay(c,h,w){for(var L=w?zb:lp,K=c[0].length,ne=c.length,he=ne,me=Ce(ne),we=1/0,We=[];he--;){var Ke=c[he];he&&h&&(Ke=Xr(Ke,Li(h))),we=ei(Ke.length,we),me[he]=!w&&(h||K>=120&&Ke.length>=120)?new Tc(he&&Ke):r}Ke=c[0];var Ze=-1,xt=me[0];e:for(;++Ze<K&&We.length<we;){var Nt=Ke[Ze],Vt=h?h(Nt):Nt;if(Nt=w||Nt!==0?Nt:0,!(xt?vh(xt,Vt):L(We,Vt,w))){for(he=ne;--he;){var fr=me[he];if(!(fr?vh(fr,Vt):L(c[he],Vt,w)))continue e}xt&&xt.push(Vt),We.push(Nt)}}return We}function ste(c,h,w,L){return no(c,function(K,ne,he){h(L,w(K),ne,he)}),L}function Ah(c,h,w){h=Na(h,c),c=cA(c,h);var L=c==null?c:c[so(fs(h))];return L==null?r:$n(L,c,w)}function _9(c){return rn(c)&&ai(c)==N}function ote(c){return rn(c)&&ai(c)==Ee}function ate(c){return rn(c)&&ai(c)==Q}function Ph(c,h,w,L,K){return c===h?!0:c==null||h==null||!rn(c)&&!rn(h)?c!==c&&h!==h:cte(c,h,w,L,Ph,K)}function cte(c,h,w,L,K,ne){var he=sr(c),me=sr(h),we=he?se:ti(c),We=me?se:ti(h);we=we==N?Me:we,We=We==N?Me:We;var Ke=we==Me,Ze=We==Me,xt=we==We;if(xt&&ka(c)){if(!ka(h))return!1;he=!0,Ke=!1}if(xt&&!Ke)return ne||(ne=new Is),he||pf(c)?tA(c,h,w,L,K,ne):Lte(c,h,we,w,L,K,ne);if(!(w&P)){var Nt=Ke&&Tr.call(c,"__wrapped__"),Vt=Ze&&Tr.call(h,"__wrapped__");if(Nt||Vt){var fr=Nt?c.value():c,Gt=Vt?h.value():h;return ne||(ne=new Is),K(fr,Gt,w,L,ne)}}return xt?(ne||(ne=new Is),kte(c,h,w,L,K,ne)):!1}function ute(c){return rn(c)&&ti(c)==ie}function cy(c,h,w,L){var K=w.length,ne=K,he=!L;if(c==null)return!ne;for(c=qr(c);K--;){var me=w[K];if(he&&me[2]?me[1]!==c[me[0]]:!(me[0]in c))return!1}for(;++K<ne;){me=w[K];var we=me[0],We=c[we],Ke=me[1];if(he&&me[2]){if(We===r&&!(we in c))return!1}else{var Ze=new Is;if(L)var xt=L(We,Ke,we,c,h,Ze);if(!(xt===r?Ph(Ke,We,P|O,L,Ze):xt))return!1}}return!0}function E9(c){if(!Qr(c)||Wte(c))return!1;var h=Vo(c)?uee:Ue;return h.test(Nc(c))}function fte(c){return rn(c)&&ai(c)==$e}function lte(c){return rn(c)&&ti(c)==Ie}function hte(c){return rn(c)&&Vp(c.length)&&!!Fr[ai(c)]}function S9(c){return typeof c=="function"?c:c==null?Pi:typeof c=="object"?sr(c)?M9(c[0],c[1]):P9(c):KA(c)}function uy(c){if(!Ch(c))return gee(c);var h=[];for(var w in qr(c))Tr.call(c,w)&&w!="constructor"&&h.push(w);return h}function dte(c){if(!Qr(c))return Yte(c);var h=Ch(c),w=[];for(var L in c)L=="constructor"&&(h||!Tr.call(c,L))||w.push(L);return w}function fy(c,h){return c<h}function A9(c,h){var w=-1,L=Si(c)?Ce(c.length):[];return Da(c,function(K,ne,he){L[++w]=h(K,ne,he)}),L}function P9(c){var h=Ay(c);return h.length==1&&h[0][2]?oA(h[0][0],h[0][1]):function(w){return w===c||cy(w,c,h)}}function M9(c,h){return My(c)&&sA(h)?oA(so(c),h):function(w){var L=By(w,c);return L===r&&L===h?$y(w,c):Ph(h,L,P|O)}}function Rp(c,h,w,L,K){c!==h&&iy(h,function(ne,he){if(K||(K=new Is),Qr(ne))pte(c,h,he,w,Rp,L,K);else{var me=L?L(Cy(c,he),ne,he+"",c,h,K):r;me===r&&(me=ne),ry(c,he,me)}},Ai)}function pte(c,h,w,L,K,ne,he){var me=Cy(c,w),we=Cy(h,w),We=he.get(we);if(We){ry(c,w,We);return}var Ke=ne?ne(me,we,w+"",c,h,he):r,Ze=Ke===r;if(Ze){var xt=sr(we),Nt=!xt&&ka(we),Vt=!xt&&!Nt&&pf(we);Ke=we,xt||Nt||Vt?sr(me)?Ke=me:mn(me)?Ke=Ei(me):Nt?(Ze=!1,Ke=F9(we,!0)):Vt?(Ze=!1,Ke=j9(we,!0)):Ke=[]:Rh(we)||Lc(we)?(Ke=me,Lc(me)?Ke=kA(me):(!Qr(me)||Vo(me))&&(Ke=iA(we))):Ze=!1}Ze&&(he.set(we,Ke),K(Ke,we,L,ne,he),he.delete(we)),ry(c,w,Ke)}function I9(c,h){var w=c.length;if(w)return h+=h<0?w:0,Ko(h,w)?c[h]:r}function C9(c,h,w){h.length?h=Xr(h,function(ne){return sr(ne)?function(he){return Dc(he,ne.length===1?ne[0]:ne)}:ne}):h=[Pi];var L=-1;h=Xr(h,Li(qt()));var K=A9(c,function(ne,he,me){var we=Xr(h,function(We){return We(ne)});return{criteria:we,index:++L,value:ne}});return UQ(K,function(ne,he){return Mte(ne,he,w)})}function gte(c,h){return T9(c,h,function(w,L){return $y(c,L)})}function T9(c,h,w){for(var L=-1,K=h.length,ne={};++L<K;){var he=h[L],me=Dc(c,he);w(me,he)&&Mh(ne,Na(he,c),me)}return ne}function mte(c){return function(h){return Dc(h,c)}}function ly(c,h,w,L){var K=L?jQ:rf,ne=-1,he=h.length,me=c;for(c===h&&(h=Ei(h)),w&&(me=Xr(c,Li(w)));++ne<he;)for(var we=0,We=h[ne],Ke=w?w(We):We;(we=K(me,Ke,we,L))>-1;)me!==c&&xp.call(me,we,1),xp.call(c,we,1);return c}function R9(c,h){for(var w=c?h.length:0,L=w-1;w--;){var K=h[w];if(w==L||K!==ne){var ne=K;Ko(K)?xp.call(c,K,1):gy(c,K)}}return c}function hy(c,h){return c+Sp(l9()*(h-c+1))}function vte(c,h,w,L){for(var K=-1,ne=Pn(Ep((h-c)/(w||1)),0),he=Ce(ne);ne--;)he[L?ne:++K]=c,c+=w;return he}function dy(c,h){var w="";if(!c||h<1||h>_)return w;do h%2&&(w+=c),h=Sp(h/2),h&&(c+=c);while(h);return w}function hr(c,h){return Ty(aA(c,h,Pi),c+"")}function bte(c){return p9(gf(c))}function yte(c,h){var w=gf(c);return Up(w,Rc(h,0,w.length))}function Mh(c,h,w,L){if(!Qr(c))return c;h=Na(h,c);for(var K=-1,ne=h.length,he=ne-1,me=c;me!=null&&++K<ne;){var we=so(h[K]),We=w;if(we==="__proto__"||we==="constructor"||we==="prototype")return c;if(K!=he){var Ke=me[we];We=L?L(Ke,we,me):r,We===r&&(We=Qr(Ke)?Ke:Ko(h[K+1])?[]:{})}Eh(me,we,We),me=me[we]}return c}var D9=Ap?function(c,h){return Ap.set(c,h),c}:Pi,wte=_p?function(c,h){return _p(c,"toString",{configurable:!0,enumerable:!1,value:jy(h),writable:!0})}:Pi;function xte(c){return Up(gf(c))}function us(c,h,w){var L=-1,K=c.length;h<0&&(h=-h>K?0:K+h),w=w>K?K:w,w<0&&(w+=K),K=h>w?0:w-h>>>0,h>>>=0;for(var ne=Ce(K);++L<K;)ne[L]=c[L+h];return ne}function _te(c,h){var w;return Da(c,function(L,K,ne){return w=h(L,K,ne),!w}),!!w}function Dp(c,h,w){var L=0,K=c==null?L:c.length;if(typeof h=="number"&&h===h&&K<=F){for(;L<K;){var ne=L+K>>>1,he=c[ne];he!==null&&!Bi(he)&&(w?he<=h:he<h)?L=ne+1:K=ne}return K}return py(c,h,Pi,w)}function py(c,h,w,L){var K=0,ne=c==null?0:c.length;if(ne===0)return 0;h=w(h);for(var he=h!==h,me=h===null,we=Bi(h),We=h===r;K<ne;){var Ke=Sp((K+ne)/2),Ze=w(c[Ke]),xt=Ze!==r,Nt=Ze===null,Vt=Ze===Ze,fr=Bi(Ze);if(he)var Gt=L||Vt;else We?Gt=Vt&&(L||xt):me?Gt=Vt&&xt&&(L||!Nt):we?Gt=Vt&&xt&&!Nt&&(L||!fr):Nt||fr?Gt=!1:Gt=L?Ze<=h:Ze<h;Gt?K=Ke+1:ne=Ke}return ei(ne,I)}function O9(c,h){for(var w=-1,L=c.length,K=0,ne=[];++w<L;){var he=c[w],me=h?h(he):he;if(!w||!Cs(me,we)){var we=me;ne[K++]=he===0?0:he}}return ne}function N9(c){return typeof c=="number"?c:Bi(c)?b:+c}function ki(c){if(typeof c=="string")return c;if(sr(c))return Xr(c,ki)+"";if(Bi(c))return h9?h9.call(c):"";var h=c+"";return h=="0"&&1/c==-x?"-0":h}function Oa(c,h,w){var L=-1,K=lp,ne=c.length,he=!0,me=[],we=me;if(w)he=!1,K=zb;else if(ne>=i){var We=h?null:Ote(c);if(We)return dp(We);he=!1,K=vh,we=new Tc}else we=h?[]:me;e:for(;++L<ne;){var Ke=c[L],Ze=h?h(Ke):Ke;if(Ke=w||Ke!==0?Ke:0,he&&Ze===Ze){for(var xt=we.length;xt--;)if(we[xt]===Ze)continue e;h&&we.push(Ze),me.push(Ke)}else K(we,Ze,w)||(we!==me&&we.push(Ze),me.push(Ke))}return me}function gy(c,h){return h=Na(h,c),c=cA(c,h),c==null||delete c[so(fs(h))]}function L9(c,h,w,L){return Mh(c,h,w(Dc(c,h)),L)}function Op(c,h,w,L){for(var K=c.length,ne=L?K:-1;(L?ne--:++ne<K)&&h(c[ne],ne,c););return w?us(c,L?0:ne,L?ne+1:K):us(c,L?ne+1:0,L?K:ne)}function k9(c,h){var w=c;return w instanceof xr&&(w=w.value()),Hb(h,function(L,K){return K.func.apply(K.thisArg,Ca([L],K.args))},w)}function my(c,h,w){var L=c.length;if(L<2)return L?Oa(c[0]):[];for(var K=-1,ne=Ce(L);++K<L;)for(var he=c[K],me=-1;++me<L;)me!=K&&(ne[K]=Sh(ne[K]||he,c[me],h,w));return Oa(Vn(ne,1),h,w)}function B9(c,h,w){for(var L=-1,K=c.length,ne=h.length,he={};++L<K;){var me=L<ne?h[L]:r;w(he,c[L],me)}return he}function vy(c){return mn(c)?c:[]}function by(c){return typeof c=="function"?c:Pi}function Na(c,h){return sr(c)?c:My(c,h)?[c]:hA(Cr(c))}var Ete=hr;function La(c,h,w){var L=c.length;return w=w===r?L:w,!h&&w>=L?c:us(c,h,w)}var $9=fee||function(c){return _r.clearTimeout(c)};function F9(c,h){if(h)return c.slice();var w=c.length,L=o9?o9(w):new c.constructor(w);return c.copy(L),L}function yy(c){var h=new c.constructor(c.byteLength);return new yp(h).set(new yp(c)),h}function Ste(c,h){var w=h?yy(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.byteLength)}function Ate(c){var h=new c.constructor(c.source,Re.exec(c));return h.lastIndex=c.lastIndex,h}function Pte(c){return _h?qr(_h.call(c)):{}}function j9(c,h){var w=h?yy(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.length)}function U9(c,h){if(c!==h){var w=c!==r,L=c===null,K=c===c,ne=Bi(c),he=h!==r,me=h===null,we=h===h,We=Bi(h);if(!me&&!We&&!ne&&c>h||ne&&he&&we&&!me&&!We||L&&he&&we||!w&&we||!K)return 1;if(!L&&!ne&&!We&&c<h||We&&w&&K&&!L&&!ne||me&&w&&K||!he&&K||!we)return-1}return 0}function Mte(c,h,w){for(var L=-1,K=c.criteria,ne=h.criteria,he=K.length,me=w.length;++L<he;){var we=U9(K[L],ne[L]);if(we){if(L>=me)return we;var We=w[L];return we*(We=="desc"?-1:1)}}return c.index-h.index}function q9(c,h,w,L){for(var K=-1,ne=c.length,he=w.length,me=-1,we=h.length,We=Pn(ne-he,0),Ke=Ce(we+We),Ze=!L;++me<we;)Ke[me]=h[me];for(;++K<he;)(Ze||K<ne)&&(Ke[w[K]]=c[K]);for(;We--;)Ke[me++]=c[K++];return Ke}function z9(c,h,w,L){for(var K=-1,ne=c.length,he=-1,me=w.length,we=-1,We=h.length,Ke=Pn(ne-me,0),Ze=Ce(Ke+We),xt=!L;++K<Ke;)Ze[K]=c[K];for(var Nt=K;++we<We;)Ze[Nt+we]=h[we];for(;++he<me;)(xt||K<ne)&&(Ze[Nt+w[he]]=c[K++]);return Ze}function Ei(c,h){var w=-1,L=c.length;for(h||(h=Ce(L));++w<L;)h[w]=c[w];return h}function io(c,h,w,L){var K=!w;w||(w={});for(var ne=-1,he=h.length;++ne<he;){var me=h[ne],we=L?L(w[me],c[me],me,w,c):r;we===r&&(we=c[me]),K?zo(w,me,we):Eh(w,me,we)}return w}function Ite(c,h){return io(c,Py(c),h)}function Cte(c,h){return io(c,rA(c),h)}function Np(c,h){return function(w,L){var K=sr(w)?NQ:Xee,ne=h?h():{};return K(w,c,qt(L,2),ne)}}function lf(c){return hr(function(h,w){var L=-1,K=w.length,ne=K>1?w[K-1]:r,he=K>2?w[2]:r;for(ne=c.length>3&&typeof ne=="function"?(K--,ne):r,he&&ci(w[0],w[1],he)&&(ne=K<3?r:ne,K=1),h=qr(h);++L<K;){var me=w[L];me&&c(h,me,L,ne)}return h})}function H9(c,h){return function(w,L){if(w==null)return w;if(!Si(w))return c(w,L);for(var K=w.length,ne=h?K:-1,he=qr(w);(h?ne--:++ne<K)&&L(he[ne],ne,he)!==!1;);return w}}function W9(c){return function(h,w,L){for(var K=-1,ne=qr(h),he=L(h),me=he.length;me--;){var we=he[c?me:++K];if(w(ne[we],we,ne)===!1)break}return h}}function Tte(c,h,w){var L=h&D,K=Ih(c);function ne(){var he=this&&this!==_r&&this instanceof ne?K:c;return he.apply(L?w:this,arguments)}return ne}function K9(c){return function(h){h=Cr(h);var w=nf(h)?Ms(h):r,L=w?w[0]:h.charAt(0),K=w?La(w,1).join(""):h.slice(1);return L[c]()+K}}function hf(c){return function(h){return Hb(HA(zA(h).replace(gh,"")),c,"")}}function Ih(c){return function(){var h=arguments;switch(h.length){case 0:return new c;case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var w=ff(c.prototype),L=c.apply(w,h);return Qr(L)?L:w}}function Rte(c,h,w){var L=Ih(c);function K(){for(var ne=arguments.length,he=Ce(ne),me=ne,we=df(K);me--;)he[me]=arguments[me];var We=ne<3&&he[0]!==we&&he[ne-1]!==we?[]:Ta(he,we);if(ne-=We.length,ne<w)return X9(c,h,Lp,K.placeholder,r,he,We,r,r,w-ne);var Ke=this&&this!==_r&&this instanceof K?L:c;return $n(Ke,this,he)}return K}function V9(c){return function(h,w,L){var K=qr(h);if(!Si(h)){var ne=qt(w,3);h=Fn(h),w=function(me){return ne(K[me],me,K)}}var he=c(h,w,L);return he>-1?K[ne?h[he]:he]:r}}function G9(c){return Wo(function(h){var w=h.length,L=w,K=as.prototype.thru;for(c&&h.reverse();L--;){var ne=h[L];if(typeof ne!="function")throw new os(o);if(K&&!he&&Fp(ne)=="wrapper")var he=new as([],!0)}for(L=he?L:w;++L<w;){ne=h[L];var me=Fp(ne),we=me=="wrapper"?Sy(ne):r;we&&Iy(we[0])&&we[1]==(T|q|H|z)&&!we[4].length&&we[9]==1?he=he[Fp(we[0])].apply(he,we[3]):he=ne.length==1&&Iy(ne)?he[me]():he.thru(ne)}return function(){var We=arguments,Ke=We[0];if(he&&We.length==1&&sr(Ke))return he.plant(Ke).value();for(var Ze=0,xt=w?h[Ze].apply(this,We):Ke;++Ze<w;)xt=h[Ze].call(this,xt);return xt}})}function Lp(c,h,w,L,K,ne,he,me,we,We){var Ke=h&T,Ze=h&D,xt=h&k,Nt=h&(q|j),Vt=h&ue,fr=xt?r:Ih(c);function Gt(){for(var br=arguments.length,Er=Ce(br),$i=br;$i--;)Er[$i]=arguments[$i];if(Nt)var ui=df(Gt),Fi=zQ(Er,ui);if(L&&(Er=q9(Er,L,K,Nt)),ne&&(Er=z9(Er,ne,he,Nt)),br-=Fi,Nt&&br<We){var vn=Ta(Er,ui);return X9(c,h,Lp,Gt.placeholder,w,Er,vn,me,we,We-br)}var Ts=Ze?w:this,Yo=xt?Ts[c]:c;return br=Er.length,me?Er=Xte(Er,me):Vt&&br>1&&Er.reverse(),Ke&&we<br&&(Er.length=we),this&&this!==_r&&this instanceof Gt&&(Yo=fr||Ih(Yo)),Yo.apply(Ts,Er)}return Gt}function Y9(c,h){return function(w,L){return ste(w,c,h(L),{})}}function kp(c,h){return function(w,L){var K;if(w===r&&L===r)return h;if(w!==r&&(K=w),L!==r){if(K===r)return L;typeof w=="string"||typeof L=="string"?(w=ki(w),L=ki(L)):(w=N9(w),L=N9(L)),K=c(w,L)}return K}}function wy(c){return Wo(function(h){return h=Xr(h,Li(qt())),hr(function(w){var L=this;return c(h,function(K){return $n(K,L,w)})})})}function Bp(c,h){h=h===r?" ":ki(h);var w=h.length;if(w<2)return w?dy(h,c):h;var L=dy(h,Ep(c/sf(h)));return nf(h)?La(Ms(L),0,c).join(""):L.slice(0,c)}function Dte(c,h,w,L){var K=h&D,ne=Ih(c);function he(){for(var me=-1,we=arguments.length,We=-1,Ke=L.length,Ze=Ce(Ke+we),xt=this&&this!==_r&&this instanceof he?ne:c;++We<Ke;)Ze[We]=L[We];for(;we--;)Ze[We++]=arguments[++me];return $n(xt,K?w:this,Ze)}return he}function J9(c){return function(h,w,L){return L&&typeof L!="number"&&ci(h,w,L)&&(w=L=r),h=Go(h),w===r?(w=h,h=0):w=Go(w),L=L===r?h<w?1:-1:Go(L),vte(h,w,L,c)}}function $p(c){return function(h,w){return typeof h=="string"&&typeof w=="string"||(h=ls(h),w=ls(w)),c(h,w)}}function X9(c,h,w,L,K,ne,he,me,we,We){var Ke=h&q,Ze=Ke?he:r,xt=Ke?r:he,Nt=Ke?ne:r,Vt=Ke?r:ne;h|=Ke?H:J,h&=~(Ke?J:H),h&B||(h&=~(D|k));var fr=[c,h,K,Nt,Ze,Vt,xt,me,we,We],Gt=w.apply(r,fr);return Iy(c)&&uA(Gt,fr),Gt.placeholder=L,fA(Gt,c,h)}function xy(c){var h=An[c];return function(w,L){if(w=ls(w),L=L==null?0:ei(ur(L),292),L&&f9(w)){var K=(Cr(w)+"e").split("e"),ne=h(K[0]+"e"+(+K[1]+L));return K=(Cr(ne)+"e").split("e"),+(K[0]+"e"+(+K[1]-L))}return h(w)}}var Ote=cf&&1/dp(new cf([,-0]))[1]==x?function(c){return new cf(c)}:zy;function Z9(c){return function(h){var w=ti(h);return w==ie?Xb(h):w==Ie?JQ(h):qQ(h,c(h))}}function Ho(c,h,w,L,K,ne,he,me){var we=h&k;if(!we&&typeof c!="function")throw new os(o);var We=L?L.length:0;if(We||(h&=~(H|J),L=K=r),he=he===r?he:Pn(ur(he),0),me=me===r?me:ur(me),We-=K?K.length:0,h&J){var Ke=L,Ze=K;L=K=r}var xt=we?r:Sy(c),Nt=[c,h,w,L,K,Ke,Ze,ne,he,me];if(xt&&Gte(Nt,xt),c=Nt[0],h=Nt[1],w=Nt[2],L=Nt[3],K=Nt[4],me=Nt[9]=Nt[9]===r?we?0:c.length:Pn(Nt[9]-We,0),!me&&h&(q|j)&&(h&=~(q|j)),!h||h==D)var Vt=Tte(c,h,w);else h==q||h==j?Vt=Rte(c,h,me):(h==H||h==(D|H))&&!K.length?Vt=Dte(c,h,w,L):Vt=Lp.apply(r,Nt);var fr=xt?D9:uA;return fA(fr(Vt,Nt),c,h)}function Q9(c,h,w,L){return c===r||Cs(c,af[w])&&!Tr.call(L,w)?h:c}function eA(c,h,w,L,K,ne){return Qr(c)&&Qr(h)&&(ne.set(h,c),Rp(c,h,r,eA,ne),ne.delete(h)),c}function Nte(c){return Rh(c)?r:c}function tA(c,h,w,L,K,ne){var he=w&P,me=c.length,we=h.length;if(me!=we&&!(he&&we>me))return!1;var We=ne.get(c),Ke=ne.get(h);if(We&&Ke)return We==h&&Ke==c;var Ze=-1,xt=!0,Nt=w&O?new Tc:r;for(ne.set(c,h),ne.set(h,c);++Ze<me;){var Vt=c[Ze],fr=h[Ze];if(L)var Gt=he?L(fr,Vt,Ze,h,c,ne):L(Vt,fr,Ze,c,h,ne);if(Gt!==r){if(Gt)continue;xt=!1;break}if(Nt){if(!Wb(h,function(br,Er){if(!vh(Nt,Er)&&(Vt===br||K(Vt,br,w,L,ne)))return Nt.push(Er)})){xt=!1;break}}else if(!(Vt===fr||K(Vt,fr,w,L,ne))){xt=!1;break}}return ne.delete(c),ne.delete(h),xt}function Lte(c,h,w,L,K,ne,he){switch(w){case Qe:if(c.byteLength!=h.byteLength||c.byteOffset!=h.byteOffset)return!1;c=c.buffer,h=h.buffer;case Ee:return!(c.byteLength!=h.byteLength||!ne(new yp(c),new yp(h)));case X:case Q:case fe:return Cs(+c,+h);case Z:return c.name==h.name&&c.message==h.message;case $e:case Le:return c==h+"";case ie:var me=Xb;case Ie:var we=L&P;if(me||(me=dp),c.size!=h.size&&!we)return!1;var We=he.get(c);if(We)return We==h;L|=O,he.set(c,h);var Ke=tA(me(c),me(h),L,K,ne,he);return he.delete(c),Ke;case Ve:if(_h)return _h.call(c)==_h.call(h)}return!1}function kte(c,h,w,L,K,ne){var he=w&P,me=_y(c),we=me.length,We=_y(h),Ke=We.length;if(we!=Ke&&!he)return!1;for(var Ze=we;Ze--;){var xt=me[Ze];if(!(he?xt in h:Tr.call(h,xt)))return!1}var Nt=ne.get(c),Vt=ne.get(h);if(Nt&&Vt)return Nt==h&&Vt==c;var fr=!0;ne.set(c,h),ne.set(h,c);for(var Gt=he;++Ze<we;){xt=me[Ze];var br=c[xt],Er=h[xt];if(L)var $i=he?L(Er,br,xt,h,c,ne):L(br,Er,xt,c,h,ne);if(!($i===r?br===Er||K(br,Er,w,L,ne):$i)){fr=!1;break}Gt||(Gt=xt=="constructor")}if(fr&&!Gt){var ui=c.constructor,Fi=h.constructor;ui!=Fi&&"constructor"in c&&"constructor"in h&&!(typeof ui=="function"&&ui instanceof ui&&typeof Fi=="function"&&Fi instanceof Fi)&&(fr=!1)}return ne.delete(c),ne.delete(h),fr}function Wo(c){return Ty(aA(c,r,mA),c+"")}function _y(c){return x9(c,Fn,Py)}function Ey(c){return x9(c,Ai,rA)}var Sy=Ap?function(c){return Ap.get(c)}:zy;function Fp(c){for(var h=c.name+"",w=uf[h],L=Tr.call(uf,h)?w.length:0;L--;){var K=w[L],ne=K.func;if(ne==null||ne==c)return K.name}return h}function df(c){var h=Tr.call(re,"placeholder")?re:c;return h.placeholder}function qt(){var c=re.iteratee||Uy;return c=c===Uy?S9:c,arguments.length?c(arguments[0],arguments[1]):c}function jp(c,h){var w=c.__data__;return Hte(h)?w[typeof h=="string"?"string":"hash"]:w.map}function Ay(c){for(var h=Fn(c),w=h.length;w--;){var L=h[w],K=c[L];h[w]=[L,K,sA(K)]}return h}function Oc(c,h){var w=VQ(c,h);return E9(w)?w:r}function Bte(c){var h=Tr.call(c,Ic),w=c[Ic];try{c[Ic]=r;var L=!0}catch{}var K=vp.call(c);return L&&(h?c[Ic]=w:delete c[Ic]),K}var Py=Qb?function(c){return c==null?[]:(c=qr(c),Ia(Qb(c),function(h){return c9.call(c,h)}))}:Hy,rA=Qb?function(c){for(var h=[];c;)Ca(h,Py(c)),c=wp(c);return h}:Hy,ti=ai;(ey&&ti(new ey(new ArrayBuffer(1)))!=Qe||yh&&ti(new yh)!=ie||ty&&ti(ty.resolve())!=Ne||cf&&ti(new cf)!=Ie||wh&&ti(new wh)!=ze)&&(ti=function(c){var h=ai(c),w=h==Me?c.constructor:r,L=w?Nc(w):"";if(L)switch(L){case yee:return Qe;case wee:return ie;case xee:return Ne;case _ee:return Ie;case Eee:return ze}return h});function $te(c,h,w){for(var L=-1,K=w.length;++L<K;){var ne=w[L],he=ne.size;switch(ne.type){case"drop":c+=he;break;case"dropRight":h-=he;break;case"take":h=ei(h,c+he);break;case"takeRight":c=Pn(c,h-he);break}}return{start:c,end:h}}function Fte(c){var h=c.match(C);return h?h[1].split(Y):[]}function nA(c,h,w){h=Na(h,c);for(var L=-1,K=h.length,ne=!1;++L<K;){var he=so(h[L]);if(!(ne=c!=null&&w(c,he)))break;c=c[he]}return ne||++L!=K?ne:(K=c==null?0:c.length,!!K&&Vp(K)&&Ko(he,K)&&(sr(c)||Lc(c)))}function jte(c){var h=c.length,w=new c.constructor(h);return h&&typeof c[0]=="string"&&Tr.call(c,"index")&&(w.index=c.index,w.input=c.input),w}function iA(c){return typeof c.constructor=="function"&&!Ch(c)?ff(wp(c)):{}}function Ute(c,h,w){var L=c.constructor;switch(h){case Ee:return yy(c);case X:case Q:return new L(+c);case Qe:return Ste(c,w);case ct:case Be:case et:case rt:case Je:case pt:case ht:case ft:case Ht:return j9(c,w);case ie:return new L;case fe:case Le:return new L(c);case $e:return Ate(c);case Ie:return new L;case Ve:return Pte(c)}}function qte(c,h){var w=h.length;if(!w)return c;var L=w-1;return h[L]=(w>1?"& ":"")+h[L],h=h.join(w>2?", ":" "),c.replace(V,`{
/* [wrapped with `+h+`] */
`)}function zte(c){return sr(c)||Lc(c)||!!(u9&&c&&c[u9])}function Ko(c,h){var w=typeof c;return h=h??_,!!h&&(w=="number"||w!="symbol"&&st.test(c))&&c>-1&&c%1==0&&c<h}function ci(c,h,w){if(!Qr(w))return!1;var L=typeof h;return(L=="number"?Si(w)&&Ko(h,w.length):L=="string"&&h in w)?Cs(w[h],c):!1}function My(c,h){if(sr(c))return!1;var w=typeof c;return w=="number"||w=="symbol"||w=="boolean"||c==null||Bi(c)?!0:$t.test(c)||!bt.test(c)||h!=null&&c in qr(h)}function Hte(c){var h=typeof c;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?c!=="__proto__":c===null}function Iy(c){var h=Fp(c),w=re[h];if(typeof w!="function"||!(h in xr.prototype))return!1;if(c===w)return!0;var L=Sy(w);return!!L&&c===L[0]}function Wte(c){return!!s9&&s9 in c}var Kte=gp?Vo:Wy;function Ch(c){var h=c&&c.constructor,w=typeof h=="function"&&h.prototype||af;return c===w}function sA(c){return c===c&&!Qr(c)}function oA(c,h){return function(w){return w==null?!1:w[c]===h&&(h!==r||c in qr(w))}}function Vte(c){var h=Wp(c,function(L){return w.size===l&&w.clear(),L}),w=h.cache;return h}function Gte(c,h){var w=c[1],L=h[1],K=w|L,ne=K<(D|k|T),he=L==T&&w==q||L==T&&w==z&&c[7].length<=h[8]||L==(T|z)&&h[7].length<=h[8]&&w==q;if(!(ne||he))return c;L&D&&(c[2]=h[2],K|=w&D?0:B);var me=h[3];if(me){var we=c[3];c[3]=we?q9(we,me,h[4]):me,c[4]=we?Ta(c[3],d):h[4]}return me=h[5],me&&(we=c[5],c[5]=we?z9(we,me,h[6]):me,c[6]=we?Ta(c[5],d):h[6]),me=h[7],me&&(c[7]=me),L&T&&(c[8]=c[8]==null?h[8]:ei(c[8],h[8])),c[9]==null&&(c[9]=h[9]),c[0]=h[0],c[1]=K,c}function Yte(c){var h=[];if(c!=null)for(var w in qr(c))h.push(w);return h}function Jte(c){return vp.call(c)}function aA(c,h,w){return h=Pn(h===r?c.length-1:h,0),function(){for(var L=arguments,K=-1,ne=Pn(L.length-h,0),he=Ce(ne);++K<ne;)he[K]=L[h+K];K=-1;for(var me=Ce(h+1);++K<h;)me[K]=L[K];return me[h]=w(he),$n(c,this,me)}}function cA(c,h){return h.length<2?c:Dc(c,us(h,0,-1))}function Xte(c,h){for(var w=c.length,L=ei(h.length,w),K=Ei(c);L--;){var ne=h[L];c[L]=Ko(ne,w)?K[ne]:r}return c}function Cy(c,h){if(!(h==="constructor"&&typeof c[h]=="function")&&h!="__proto__")return c[h]}var uA=lA(D9),Th=hee||function(c,h){return _r.setTimeout(c,h)},Ty=lA(wte);function fA(c,h,w){var L=h+"";return Ty(c,qte(L,Zte(Fte(L),w)))}function lA(c){var h=0,w=0;return function(){var L=mee(),K=m-(L-w);if(w=L,K>0){if(++h>=E)return arguments[0]}else h=0;return c.apply(r,arguments)}}function Up(c,h){var w=-1,L=c.length,K=L-1;for(h=h===r?L:h;++w<h;){var ne=hy(w,K),he=c[ne];c[ne]=c[w],c[w]=he}return c.length=h,c}var hA=Vte(function(c){var h=[];return c.charCodeAt(0)===46&&h.push(""),c.replace(jt,function(w,L,K,ne){h.push(K?ne.replace(ge,"$1"):L||w)}),h});function so(c){if(typeof c=="string"||Bi(c))return c;var h=c+"";return h=="0"&&1/c==-x?"-0":h}function Nc(c){if(c!=null){try{return mp.call(c)}catch{}try{return c+""}catch{}}return""}function Zte(c,h){return ss(ce,function(w){var L="_."+w[0];h&w[1]&&!lp(c,L)&&c.push(L)}),c.sort()}function dA(c){if(c instanceof xr)return c.clone();var h=new as(c.__wrapped__,c.__chain__);return h.__actions__=Ei(c.__actions__),h.__index__=c.__index__,h.__values__=c.__values__,h}function Qte(c,h,w){(w?ci(c,h,w):h===r)?h=1:h=Pn(ur(h),0);var L=c==null?0:c.length;if(!L||h<1)return[];for(var K=0,ne=0,he=Ce(Ep(L/h));K<L;)he[ne++]=us(c,K,K+=h);return he}function ere(c){for(var h=-1,w=c==null?0:c.length,L=0,K=[];++h<w;){var ne=c[h];ne&&(K[L++]=ne)}return K}function tre(){var c=arguments.length;if(!c)return[];for(var h=Ce(c-1),w=arguments[0],L=c;L--;)h[L-1]=arguments[L];return Ca(sr(w)?Ei(w):[w],Vn(h,1))}var rre=hr(function(c,h){return mn(c)?Sh(c,Vn(h,1,mn,!0)):[]}),nre=hr(function(c,h){var w=fs(h);return mn(w)&&(w=r),mn(c)?Sh(c,Vn(h,1,mn,!0),qt(w,2)):[]}),ire=hr(function(c,h){var w=fs(h);return mn(w)&&(w=r),mn(c)?Sh(c,Vn(h,1,mn,!0),r,w):[]});function sre(c,h,w){var L=c==null?0:c.length;return L?(h=w||h===r?1:ur(h),us(c,h<0?0:h,L)):[]}function ore(c,h,w){var L=c==null?0:c.length;return L?(h=w||h===r?1:ur(h),h=L-h,us(c,0,h<0?0:h)):[]}function are(c,h){return c&&c.length?Op(c,qt(h,3),!0,!0):[]}function cre(c,h){return c&&c.length?Op(c,qt(h,3),!0):[]}function ure(c,h,w,L){var K=c==null?0:c.length;return K?(w&&typeof w!="number"&&ci(c,h,w)&&(w=0,L=K),tte(c,h,w,L)):[]}function pA(c,h,w){var L=c==null?0:c.length;if(!L)return-1;var K=w==null?0:ur(w);return K<0&&(K=Pn(L+K,0)),hp(c,qt(h,3),K)}function gA(c,h,w){var L=c==null?0:c.length;if(!L)return-1;var K=L-1;return w!==r&&(K=ur(w),K=w<0?Pn(L+K,0):ei(K,L-1)),hp(c,qt(h,3),K,!0)}function mA(c){var h=c==null?0:c.length;return h?Vn(c,1):[]}function fre(c){var h=c==null?0:c.length;return h?Vn(c,x):[]}function lre(c,h){var w=c==null?0:c.length;return w?(h=h===r?1:ur(h),Vn(c,h)):[]}function hre(c){for(var h=-1,w=c==null?0:c.length,L={};++h<w;){var K=c[h];L[K[0]]=K[1]}return L}function vA(c){return c&&c.length?c[0]:r}function dre(c,h,w){var L=c==null?0:c.length;if(!L)return-1;var K=w==null?0:ur(w);return K<0&&(K=Pn(L+K,0)),rf(c,h,K)}function pre(c){var h=c==null?0:c.length;return h?us(c,0,-1):[]}var gre=hr(function(c){var h=Xr(c,vy);return h.length&&h[0]===c[0]?ay(h):[]}),mre=hr(function(c){var h=fs(c),w=Xr(c,vy);return h===fs(w)?h=r:w.pop(),w.length&&w[0]===c[0]?ay(w,qt(h,2)):[]}),vre=hr(function(c){var h=fs(c),w=Xr(c,vy);return h=typeof h=="function"?h:r,h&&w.pop(),w.length&&w[0]===c[0]?ay(w,r,h):[]});function bre(c,h){return c==null?"":pee.call(c,h)}function fs(c){var h=c==null?0:c.length;return h?c[h-1]:r}function yre(c,h,w){var L=c==null?0:c.length;if(!L)return-1;var K=L;return w!==r&&(K=ur(w),K=K<0?Pn(L+K,0):ei(K,L-1)),h===h?ZQ(c,h,K):hp(c,X7,K,!0)}function wre(c,h){return c&&c.length?I9(c,ur(h)):r}var xre=hr(bA);function bA(c,h){return c&&c.length&&h&&h.length?ly(c,h):c}function _re(c,h,w){return c&&c.length&&h&&h.length?ly(c,h,qt(w,2)):c}function Ere(c,h,w){return c&&c.length&&h&&h.length?ly(c,h,r,w):c}var Sre=Wo(function(c,h){var w=c==null?0:c.length,L=ny(c,h);return R9(c,Xr(h,function(K){return Ko(K,w)?+K:K}).sort(U9)),L});function Are(c,h){var w=[];if(!(c&&c.length))return w;var L=-1,K=[],ne=c.length;for(h=qt(h,3);++L<ne;){var he=c[L];h(he,L,c)&&(w.push(he),K.push(L))}return R9(c,K),w}function Ry(c){return c==null?c:bee.call(c)}function Pre(c,h,w){var L=c==null?0:c.length;return L?(w&&typeof w!="number"&&ci(c,h,w)?(h=0,w=L):(h=h==null?0:ur(h),w=w===r?L:ur(w)),us(c,h,w)):[]}function Mre(c,h){return Dp(c,h)}function Ire(c,h,w){return py(c,h,qt(w,2))}function Cre(c,h){var w=c==null?0:c.length;if(w){var L=Dp(c,h);if(L<w&&Cs(c[L],h))return L}return-1}function Tre(c,h){return Dp(c,h,!0)}function Rre(c,h,w){return py(c,h,qt(w,2),!0)}function Dre(c,h){var w=c==null?0:c.length;if(w){var L=Dp(c,h,!0)-1;if(Cs(c[L],h))return L}return-1}function Ore(c){return c&&c.length?O9(c):[]}function Nre(c,h){return c&&c.length?O9(c,qt(h,2)):[]}function Lre(c){var h=c==null?0:c.length;return h?us(c,1,h):[]}function kre(c,h,w){return c&&c.length?(h=w||h===r?1:ur(h),us(c,0,h<0?0:h)):[]}function Bre(c,h,w){var L=c==null?0:c.length;return L?(h=w||h===r?1:ur(h),h=L-h,us(c,h<0?0:h,L)):[]}function $re(c,h){return c&&c.length?Op(c,qt(h,3),!1,!0):[]}function Fre(c,h){return c&&c.length?Op(c,qt(h,3)):[]}var jre=hr(function(c){return Oa(Vn(c,1,mn,!0))}),Ure=hr(function(c){var h=fs(c);return mn(h)&&(h=r),Oa(Vn(c,1,mn,!0),qt(h,2))}),qre=hr(function(c){var h=fs(c);return h=typeof h=="function"?h:r,Oa(Vn(c,1,mn,!0),r,h)});function zre(c){return c&&c.length?Oa(c):[]}function Hre(c,h){return c&&c.length?Oa(c,qt(h,2)):[]}function Wre(c,h){return h=typeof h=="function"?h:r,c&&c.length?Oa(c,r,h):[]}function Dy(c){if(!(c&&c.length))return[];var h=0;return c=Ia(c,function(w){if(mn(w))return h=Pn(w.length,h),!0}),Yb(h,function(w){return Xr(c,Kb(w))})}function yA(c,h){if(!(c&&c.length))return[];var w=Dy(c);return h==null?w:Xr(w,function(L){return $n(h,r,L)})}var Kre=hr(function(c,h){return mn(c)?Sh(c,h):[]}),Vre=hr(function(c){return my(Ia(c,mn))}),Gre=hr(function(c){var h=fs(c);return mn(h)&&(h=r),my(Ia(c,mn),qt(h,2))}),Yre=hr(function(c){var h=fs(c);return h=typeof h=="function"?h:r,my(Ia(c,mn),r,h)}),Jre=hr(Dy);function Xre(c,h){return B9(c||[],h||[],Eh)}function Zre(c,h){return B9(c||[],h||[],Mh)}var Qre=hr(function(c){var h=c.length,w=h>1?c[h-1]:r;return w=typeof w=="function"?(c.pop(),w):r,yA(c,w)});function wA(c){var h=re(c);return h.__chain__=!0,h}function ene(c,h){return h(c),c}function qp(c,h){return h(c)}var tne=Wo(function(c){var h=c.length,w=h?c[0]:0,L=this.__wrapped__,K=function(ne){return ny(ne,c)};return h>1||this.__actions__.length||!(L instanceof xr)||!Ko(w)?this.thru(K):(L=L.slice(w,+w+(h?1:0)),L.__actions__.push({func:qp,args:[K],thisArg:r}),new as(L,this.__chain__).thru(function(ne){return h&&!ne.length&&ne.push(r),ne}))});function rne(){return wA(this)}function nne(){return new as(this.value(),this.__chain__)}function ine(){this.__values__===r&&(this.__values__=NA(this.value()));var c=this.__index__>=this.__values__.length,h=c?r:this.__values__[this.__index__++];return{done:c,value:h}}function sne(){return this}function one(c){for(var h,w=this;w instanceof Mp;){var L=dA(w);L.__index__=0,L.__values__=r,h?K.__wrapped__=L:h=L;var K=L;w=w.__wrapped__}return K.__wrapped__=c,h}function ane(){var c=this.__wrapped__;if(c instanceof xr){var h=c;return this.__actions__.length&&(h=new xr(this)),h=h.reverse(),h.__actions__.push({func:qp,args:[Ry],thisArg:r}),new as(h,this.__chain__)}return this.thru(Ry)}function cne(){return k9(this.__wrapped__,this.__actions__)}var une=Np(function(c,h,w){Tr.call(c,w)?++c[w]:zo(c,w,1)});function fne(c,h,w){var L=sr(c)?Y7:ete;return w&&ci(c,h,w)&&(h=r),L(c,qt(h,3))}function lne(c,h){var w=sr(c)?Ia:y9;return w(c,qt(h,3))}var hne=V9(pA),dne=V9(gA);function pne(c,h){return Vn(zp(c,h),1)}function gne(c,h){return Vn(zp(c,h),x)}function mne(c,h,w){return w=w===r?1:ur(w),Vn(zp(c,h),w)}function xA(c,h){var w=sr(c)?ss:Da;return w(c,qt(h,3))}function _A(c,h){var w=sr(c)?LQ:b9;return w(c,qt(h,3))}var vne=Np(function(c,h,w){Tr.call(c,w)?c[w].push(h):zo(c,w,[h])});function bne(c,h,w,L){c=Si(c)?c:gf(c),w=w&&!L?ur(w):0;var K=c.length;return w<0&&(w=Pn(K+w,0)),Gp(c)?w<=K&&c.indexOf(h,w)>-1:!!K&&rf(c,h,w)>-1}var yne=hr(function(c,h,w){var L=-1,K=typeof h=="function",ne=Si(c)?Ce(c.length):[];return Da(c,function(he){ne[++L]=K?$n(h,he,w):Ah(he,h,w)}),ne}),wne=Np(function(c,h,w){zo(c,w,h)});function zp(c,h){var w=sr(c)?Xr:A9;return w(c,qt(h,3))}function xne(c,h,w,L){return c==null?[]:(sr(h)||(h=h==null?[]:[h]),w=L?r:w,sr(w)||(w=w==null?[]:[w]),C9(c,h,w))}var _ne=Np(function(c,h,w){c[w?0:1].push(h)},function(){return[[],[]]});function Ene(c,h,w){var L=sr(c)?Hb:Q7,K=arguments.length<3;return L(c,qt(h,4),w,K,Da)}function Sne(c,h,w){var L=sr(c)?kQ:Q7,K=arguments.length<3;return L(c,qt(h,4),w,K,b9)}function Ane(c,h){var w=sr(c)?Ia:y9;return w(c,Kp(qt(h,3)))}function Pne(c){var h=sr(c)?p9:bte;return h(c)}function Mne(c,h,w){(w?ci(c,h,w):h===r)?h=1:h=ur(h);var L=sr(c)?Yee:yte;return L(c,h)}function Ine(c){var h=sr(c)?Jee:xte;return h(c)}function Cne(c){if(c==null)return 0;if(Si(c))return Gp(c)?sf(c):c.length;var h=ti(c);return h==ie||h==Ie?c.size:uy(c).length}function Tne(c,h,w){var L=sr(c)?Wb:_te;return w&&ci(c,h,w)&&(h=r),L(c,qt(h,3))}var Rne=hr(function(c,h){if(c==null)return[];var w=h.length;return w>1&&ci(c,h[0],h[1])?h=[]:w>2&&ci(h[0],h[1],h[2])&&(h=[h[0]]),C9(c,Vn(h,1),[])}),Hp=lee||function(){return _r.Date.now()};function Dne(c,h){if(typeof h!="function")throw new os(o);return c=ur(c),function(){if(--c<1)return h.apply(this,arguments)}}function EA(c,h,w){return h=w?r:h,h=c&&h==null?c.length:h,Ho(c,T,r,r,r,r,h)}function SA(c,h){var w;if(typeof h!="function")throw new os(o);return c=ur(c),function(){return--c>0&&(w=h.apply(this,arguments)),c<=1&&(h=r),w}}var Oy=hr(function(c,h,w){var L=D;if(w.length){var K=Ta(w,df(Oy));L|=H}return Ho(c,L,h,w,K)}),AA=hr(function(c,h,w){var L=D|k;if(w.length){var K=Ta(w,df(AA));L|=H}return Ho(h,L,c,w,K)});function PA(c,h,w){h=w?r:h;var L=Ho(c,q,r,r,r,r,r,h);return L.placeholder=PA.placeholder,L}function MA(c,h,w){h=w?r:h;var L=Ho(c,j,r,r,r,r,r,h);return L.placeholder=MA.placeholder,L}function IA(c,h,w){var L,K,ne,he,me,we,We=0,Ke=!1,Ze=!1,xt=!0;if(typeof c!="function")throw new os(o);h=ls(h)||0,Qr(w)&&(Ke=!!w.leading,Ze="maxWait"in w,ne=Ze?Pn(ls(w.maxWait)||0,h):ne,xt="trailing"in w?!!w.trailing:xt);function Nt(vn){var Ts=L,Yo=K;return L=K=r,We=vn,he=c.apply(Yo,Ts),he}function Vt(vn){return We=vn,me=Th(br,h),Ke?Nt(vn):he}function fr(vn){var Ts=vn-we,Yo=vn-We,VA=h-Ts;return Ze?ei(VA,ne-Yo):VA}function Gt(vn){var Ts=vn-we,Yo=vn-We;return we===r||Ts>=h||Ts<0||Ze&&Yo>=ne}function br(){var vn=Hp();if(Gt(vn))return Er(vn);me=Th(br,fr(vn))}function Er(vn){return me=r,xt&&L?Nt(vn):(L=K=r,he)}function $i(){me!==r&&$9(me),We=0,L=we=K=me=r}function ui(){return me===r?he:Er(Hp())}function Fi(){var vn=Hp(),Ts=Gt(vn);if(L=arguments,K=this,we=vn,Ts){if(me===r)return Vt(we);if(Ze)return $9(me),me=Th(br,h),Nt(we)}return me===r&&(me=Th(br,h)),he}return Fi.cancel=$i,Fi.flush=ui,Fi}var One=hr(function(c,h){return v9(c,1,h)}),Nne=hr(function(c,h,w){return v9(c,ls(h)||0,w)});function Lne(c){return Ho(c,ue)}function Wp(c,h){if(typeof c!="function"||h!=null&&typeof h!="function")throw new os(o);var w=function(){var L=arguments,K=h?h.apply(this,L):L[0],ne=w.cache;if(ne.has(K))return ne.get(K);var he=c.apply(this,L);return w.cache=ne.set(K,he)||ne,he};return w.cache=new(Wp.Cache||qo),w}Wp.Cache=qo;function Kp(c){if(typeof c!="function")throw new os(o);return function(){var h=arguments;switch(h.length){case 0:return!c.call(this);case 1:return!c.call(this,h[0]);case 2:return!c.call(this,h[0],h[1]);case 3:return!c.call(this,h[0],h[1],h[2])}return!c.apply(this,h)}}function kne(c){return SA(2,c)}var Bne=Ete(function(c,h){h=h.length==1&&sr(h[0])?Xr(h[0],Li(qt())):Xr(Vn(h,1),Li(qt()));var w=h.length;return hr(function(L){for(var K=-1,ne=ei(L.length,w);++K<ne;)L[K]=h[K].call(this,L[K]);return $n(c,this,L)})}),Ny=hr(function(c,h){var w=Ta(h,df(Ny));return Ho(c,H,r,h,w)}),CA=hr(function(c,h){var w=Ta(h,df(CA));return Ho(c,J,r,h,w)}),$ne=Wo(function(c,h){return Ho(c,z,r,r,r,h)});function Fne(c,h){if(typeof c!="function")throw new os(o);return h=h===r?h:ur(h),hr(c,h)}function jne(c,h){if(typeof c!="function")throw new os(o);return h=h==null?0:Pn(ur(h),0),hr(function(w){var L=w[h],K=La(w,0,h);return L&&Ca(K,L),$n(c,this,K)})}function Une(c,h,w){var L=!0,K=!0;if(typeof c!="function")throw new os(o);return Qr(w)&&(L="leading"in w?!!w.leading:L,K="trailing"in w?!!w.trailing:K),IA(c,h,{leading:L,maxWait:h,trailing:K})}function qne(c){return EA(c,1)}function zne(c,h){return Ny(by(h),c)}function Hne(){if(!arguments.length)return[];var c=arguments[0];return sr(c)?c:[c]}function Wne(c){return cs(c,A)}function Kne(c,h){return h=typeof h=="function"?h:r,cs(c,A,h)}function Vne(c){return cs(c,p|A)}function Gne(c,h){return h=typeof h=="function"?h:r,cs(c,p|A,h)}function Yne(c,h){return h==null||m9(c,h,Fn(h))}function Cs(c,h){return c===h||c!==c&&h!==h}var Jne=$p(oy),Xne=$p(function(c,h){return c>=h}),Lc=_9(function(){return arguments}())?_9:function(c){return rn(c)&&Tr.call(c,"callee")&&!c9.call(c,"callee")},sr=Ce.isArray,Zne=oi?Li(oi):ote;function Si(c){return c!=null&&Vp(c.length)&&!Vo(c)}function mn(c){return rn(c)&&Si(c)}function Qne(c){return c===!0||c===!1||rn(c)&&ai(c)==X}var ka=dee||Wy,eie=Ps?Li(Ps):ate;function tie(c){return rn(c)&&c.nodeType===1&&!Rh(c)}function rie(c){if(c==null)return!0;if(Si(c)&&(sr(c)||typeof c=="string"||typeof c.splice=="function"||ka(c)||pf(c)||Lc(c)))return!c.length;var h=ti(c);if(h==ie||h==Ie)return!c.size;if(Ch(c))return!uy(c).length;for(var w in c)if(Tr.call(c,w))return!1;return!0}function nie(c,h){return Ph(c,h)}function iie(c,h,w){w=typeof w=="function"?w:r;var L=w?w(c,h):r;return L===r?Ph(c,h,r,w):!!L}function Ly(c){if(!rn(c))return!1;var h=ai(c);return h==Z||h==R||typeof c.message=="string"&&typeof c.name=="string"&&!Rh(c)}function sie(c){return typeof c=="number"&&f9(c)}function Vo(c){if(!Qr(c))return!1;var h=ai(c);return h==te||h==le||h==ee||h==Te}function TA(c){return typeof c=="number"&&c==ur(c)}function Vp(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=_}function Qr(c){var h=typeof c;return c!=null&&(h=="object"||h=="function")}function rn(c){return c!=null&&typeof c=="object"}var RA=is?Li(is):ute;function oie(c,h){return c===h||cy(c,h,Ay(h))}function aie(c,h,w){return w=typeof w=="function"?w:r,cy(c,h,Ay(h),w)}function cie(c){return DA(c)&&c!=+c}function uie(c){if(Kte(c))throw new tr(s);return E9(c)}function fie(c){return c===null}function lie(c){return c==null}function DA(c){return typeof c=="number"||rn(c)&&ai(c)==fe}function Rh(c){if(!rn(c)||ai(c)!=Me)return!1;var h=wp(c);if(h===null)return!0;var w=Tr.call(h,"constructor")&&h.constructor;return typeof w=="function"&&w instanceof w&&mp.call(w)==aee}var ky=ro?Li(ro):fte;function hie(c){return TA(c)&&c>=-_&&c<=_}var OA=mh?Li(mh):lte;function Gp(c){return typeof c=="string"||!sr(c)&&rn(c)&&ai(c)==Le}function Bi(c){return typeof c=="symbol"||rn(c)&&ai(c)==Ve}var pf=Mc?Li(Mc):hte;function die(c){return c===r}function pie(c){return rn(c)&&ti(c)==ze}function gie(c){return rn(c)&&ai(c)==He}var mie=$p(fy),vie=$p(function(c,h){return c<=h});function NA(c){if(!c)return[];if(Si(c))return Gp(c)?Ms(c):Ei(c);if(bh&&c[bh])return YQ(c[bh]());var h=ti(c),w=h==ie?Xb:h==Ie?dp:gf;return w(c)}function Go(c){if(!c)return c===0?c:0;if(c=ls(c),c===x||c===-x){var h=c<0?-1:1;return h*S}return c===c?c:0}function ur(c){var h=Go(c),w=h%1;return h===h?w?h-w:h:0}function LA(c){return c?Rc(ur(c),0,M):0}function ls(c){if(typeof c=="number")return c;if(Bi(c))return b;if(Qr(c)){var h=typeof c.valueOf=="function"?c.valueOf():c;c=Qr(h)?h+"":h}if(typeof c!="string")return c===0?c:+c;c=e9(c);var w=it.test(c);return w||gt.test(c)?ir(c.slice(2),w?2:8):De.test(c)?b:+c}function kA(c){return io(c,Ai(c))}function bie(c){return c?Rc(ur(c),-_,_):c===0?c:0}function Cr(c){return c==null?"":ki(c)}var yie=lf(function(c,h){if(Ch(h)||Si(h)){io(h,Fn(h),c);return}for(var w in h)Tr.call(h,w)&&Eh(c,w,h[w])}),BA=lf(function(c,h){io(h,Ai(h),c)}),Yp=lf(function(c,h,w,L){io(h,Ai(h),c,L)}),wie=lf(function(c,h,w,L){io(h,Fn(h),c,L)}),xie=Wo(ny);function _ie(c,h){var w=ff(c);return h==null?w:g9(w,h)}var Eie=hr(function(c,h){c=qr(c);var w=-1,L=h.length,K=L>2?h[2]:r;for(K&&ci(h[0],h[1],K)&&(L=1);++w<L;)for(var ne=h[w],he=Ai(ne),me=-1,we=he.length;++me<we;){var We=he[me],Ke=c[We];(Ke===r||Cs(Ke,af[We])&&!Tr.call(c,We))&&(c[We]=ne[We])}return c}),Sie=hr(function(c){return c.push(r,eA),$n($A,r,c)});function Aie(c,h){return J7(c,qt(h,3),no)}function Pie(c,h){return J7(c,qt(h,3),sy)}function Mie(c,h){return c==null?c:iy(c,qt(h,3),Ai)}function Iie(c,h){return c==null?c:w9(c,qt(h,3),Ai)}function Cie(c,h){return c&&no(c,qt(h,3))}function Tie(c,h){return c&&sy(c,qt(h,3))}function Rie(c){return c==null?[]:Tp(c,Fn(c))}function Die(c){return c==null?[]:Tp(c,Ai(c))}function By(c,h,w){var L=c==null?r:Dc(c,h);return L===r?w:L}function Oie(c,h){return c!=null&&nA(c,h,rte)}function $y(c,h){return c!=null&&nA(c,h,nte)}var Nie=Y9(function(c,h,w){h!=null&&typeof h.toString!="function"&&(h=vp.call(h)),c[h]=w},jy(Pi)),Lie=Y9(function(c,h,w){h!=null&&typeof h.toString!="function"&&(h=vp.call(h)),Tr.call(c,h)?c[h].push(w):c[h]=[w]},qt),kie=hr(Ah);function Fn(c){return Si(c)?d9(c):uy(c)}function Ai(c){return Si(c)?d9(c,!0):dte(c)}function Bie(c,h){var w={};return h=qt(h,3),no(c,function(L,K,ne){zo(w,h(L,K,ne),L)}),w}function $ie(c,h){var w={};return h=qt(h,3),no(c,function(L,K,ne){zo(w,K,h(L,K,ne))}),w}var Fie=lf(function(c,h,w){Rp(c,h,w)}),$A=lf(function(c,h,w,L){Rp(c,h,w,L)}),jie=Wo(function(c,h){var w={};if(c==null)return w;var L=!1;h=Xr(h,function(ne){return ne=Na(ne,c),L||(L=ne.length>1),ne}),io(c,Ey(c),w),L&&(w=cs(w,p|y|A,Nte));for(var K=h.length;K--;)gy(w,h[K]);return w});function Uie(c,h){return FA(c,Kp(qt(h)))}var qie=Wo(function(c,h){return c==null?{}:gte(c,h)});function FA(c,h){if(c==null)return{};var w=Xr(Ey(c),function(L){return[L]});return h=qt(h),T9(c,w,function(L,K){return h(L,K[0])})}function zie(c,h,w){h=Na(h,c);var L=-1,K=h.length;for(K||(K=1,c=r);++L<K;){var ne=c==null?r:c[so(h[L])];ne===r&&(L=K,ne=w),c=Vo(ne)?ne.call(c):ne}return c}function Hie(c,h,w){return c==null?c:Mh(c,h,w)}function Wie(c,h,w,L){return L=typeof L=="function"?L:r,c==null?c:Mh(c,h,w,L)}var jA=Z9(Fn),UA=Z9(Ai);function Kie(c,h,w){var L=sr(c),K=L||ka(c)||pf(c);if(h=qt(h,4),w==null){var ne=c&&c.constructor;K?w=L?new ne:[]:Qr(c)?w=Vo(ne)?ff(wp(c)):{}:w={}}return(K?ss:no)(c,function(he,me,we){return h(w,he,me,we)}),w}function Vie(c,h){return c==null?!0:gy(c,h)}function Gie(c,h,w){return c==null?c:L9(c,h,by(w))}function Yie(c,h,w,L){return L=typeof L=="function"?L:r,c==null?c:L9(c,h,by(w),L)}function gf(c){return c==null?[]:Jb(c,Fn(c))}function Jie(c){return c==null?[]:Jb(c,Ai(c))}function Xie(c,h,w){return w===r&&(w=h,h=r),w!==r&&(w=ls(w),w=w===w?w:0),h!==r&&(h=ls(h),h=h===h?h:0),Rc(ls(c),h,w)}function Zie(c,h,w){return h=Go(h),w===r?(w=h,h=0):w=Go(w),c=ls(c),ite(c,h,w)}function Qie(c,h,w){if(w&&typeof w!="boolean"&&ci(c,h,w)&&(h=w=r),w===r&&(typeof h=="boolean"?(w=h,h=r):typeof c=="boolean"&&(w=c,c=r)),c===r&&h===r?(c=0,h=1):(c=Go(c),h===r?(h=c,c=0):h=Go(h)),c>h){var L=c;c=h,h=L}if(w||c%1||h%1){var K=l9();return ei(c+K*(h-c+jr("1e-"+((K+"").length-1))),h)}return hy(c,h)}var ese=hf(function(c,h,w){return h=h.toLowerCase(),c+(w?qA(h):h)});function qA(c){return Fy(Cr(c).toLowerCase())}function zA(c){return c=Cr(c),c&&c.replace(tt,HQ).replace(Ub,"")}function tse(c,h,w){c=Cr(c),h=ki(h);var L=c.length;w=w===r?L:Rc(ur(w),0,L);var K=w;return w-=h.length,w>=0&&c.slice(w,K)==h}function rse(c){return c=Cr(c),c&&Tt.test(c)?c.replace(Ot,WQ):c}function nse(c){return c=Cr(c),c&&Ft.test(c)?c.replace(nt,"\\$&"):c}var ise=hf(function(c,h,w){return c+(w?"-":"")+h.toLowerCase()}),sse=hf(function(c,h,w){return c+(w?" ":"")+h.toLowerCase()}),ose=K9("toLowerCase");function ase(c,h,w){c=Cr(c),h=ur(h);var L=h?sf(c):0;if(!h||L>=h)return c;var K=(h-L)/2;return Bp(Sp(K),w)+c+Bp(Ep(K),w)}function cse(c,h,w){c=Cr(c),h=ur(h);var L=h?sf(c):0;return h&&L<h?c+Bp(h-L,w):c}function use(c,h,w){c=Cr(c),h=ur(h);var L=h?sf(c):0;return h&&L<h?Bp(h-L,w)+c:c}function fse(c,h,w){return w||h==null?h=0:h&&(h=+h),vee(Cr(c).replace($,""),h||0)}function lse(c,h,w){return(w?ci(c,h,w):h===r)?h=1:h=ur(h),dy(Cr(c),h)}function hse(){var c=arguments,h=Cr(c[0]);return c.length<3?h:h.replace(c[1],c[2])}var dse=hf(function(c,h,w){return c+(w?"_":"")+h.toLowerCase()});function pse(c,h,w){return w&&typeof w!="number"&&ci(c,h,w)&&(h=w=r),w=w===r?M:w>>>0,w?(c=Cr(c),c&&(typeof h=="string"||h!=null&&!ky(h))&&(h=ki(h),!h&&nf(c))?La(Ms(c),0,w):c.split(h,w)):[]}var gse=hf(function(c,h,w){return c+(w?" ":"")+Fy(h)});function mse(c,h,w){return c=Cr(c),w=w==null?0:Rc(ur(w),0,c.length),h=ki(h),c.slice(w,w+h.length)==h}function vse(c,h,w){var L=re.templateSettings;w&&ci(c,h,w)&&(h=r),c=Cr(c),h=Yp({},h,L,Q9);var K=Yp({},h.imports,L.imports,Q9),ne=Fn(K),he=Jb(K,ne),me,we,We=0,Ke=h.interpolate||At,Ze="__p += '",xt=Zb((h.escape||At).source+"|"+Ke.source+"|"+(Ke===Lt?xe:At).source+"|"+(h.evaluate||At).source+"|$","g"),Nt="//# sourceURL="+(Tr.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qb+"]")+`
`;c.replace(xt,function(Gt,br,Er,$i,ui,Fi){return Er||(Er=$i),Ze+=c.slice(We,Fi).replace(Rt,KQ),br&&(me=!0,Ze+=`' +
__e(`+br+`) +
'`),ui&&(we=!0,Ze+=`';
`+ui+`;
__p += '`),Er&&(Ze+=`' +
((__t = (`+Er+`)) == null ? '' : __t) +
'`),We=Fi+Gt.length,Gt}),Ze+=`';
`;var Vt=Tr.call(h,"variable")&&h.variable;if(!Vt)Ze=`with (obj) {
`+Ze+`
}
`;else if(oe.test(Vt))throw new tr(a);Ze=(we?Ze.replace(Jt,""):Ze).replace(St,"$1").replace(er,"$1;"),Ze="function("+(Vt||"obj")+`) {
`+(Vt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(me?", __e = _.escape":"")+(we?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ze+`return __p
}`;var fr=WA(function(){return Mr(ne,Nt+"return "+Ze).apply(r,he)});if(fr.source=Ze,Ly(fr))throw fr;return fr}function bse(c){return Cr(c).toLowerCase()}function yse(c){return Cr(c).toUpperCase()}function wse(c,h,w){if(c=Cr(c),c&&(w||h===r))return e9(c);if(!c||!(h=ki(h)))return c;var L=Ms(c),K=Ms(h),ne=t9(L,K),he=r9(L,K)+1;return La(L,ne,he).join("")}function xse(c,h,w){if(c=Cr(c),c&&(w||h===r))return c.slice(0,i9(c)+1);if(!c||!(h=ki(h)))return c;var L=Ms(c),K=r9(L,Ms(h))+1;return La(L,0,K).join("")}function _se(c,h,w){if(c=Cr(c),c&&(w||h===r))return c.replace($,"");if(!c||!(h=ki(h)))return c;var L=Ms(c),K=t9(L,Ms(h));return La(L,K).join("")}function Ese(c,h){var w=_e,L=G;if(Qr(h)){var K="separator"in h?h.separator:K;w="length"in h?ur(h.length):w,L="omission"in h?ki(h.omission):L}c=Cr(c);var ne=c.length;if(nf(c)){var he=Ms(c);ne=he.length}if(w>=ne)return c;var me=w-sf(L);if(me<1)return L;var we=he?La(he,0,me).join(""):c.slice(0,me);if(K===r)return we+L;if(he&&(me+=we.length-me),ky(K)){if(c.slice(me).search(K)){var We,Ke=we;for(K.global||(K=Zb(K.source,Cr(Re.exec(K))+"g")),K.lastIndex=0;We=K.exec(Ke);)var Ze=We.index;we=we.slice(0,Ze===r?me:Ze)}}else if(c.indexOf(ki(K),me)!=me){var xt=we.lastIndexOf(K);xt>-1&&(we=we.slice(0,xt))}return we+L}function Sse(c){return c=Cr(c),c&&Bt.test(c)?c.replace(Xt,QQ):c}var Ase=hf(function(c,h,w){return c+(w?" ":"")+h.toUpperCase()}),Fy=K9("toUpperCase");function HA(c,h,w){return c=Cr(c),h=w?r:h,h===r?GQ(c)?ree(c):FQ(c):c.match(h)||[]}var WA=hr(function(c,h){try{return $n(c,r,h)}catch(w){return Ly(w)?w:new tr(w)}}),Pse=Wo(function(c,h){return ss(h,function(w){w=so(w),zo(c,w,Oy(c[w],c))}),c});function Mse(c){var h=c==null?0:c.length,w=qt();return c=h?Xr(c,function(L){if(typeof L[1]!="function")throw new os(o);return[w(L[0]),L[1]]}):[],hr(function(L){for(var K=-1;++K<h;){var ne=c[K];if($n(ne[0],this,L))return $n(ne[1],this,L)}})}function Ise(c){return Qee(cs(c,p))}function jy(c){return function(){return c}}function Cse(c,h){return c==null||c!==c?h:c}var Tse=G9(),Rse=G9(!0);function Pi(c){return c}function Uy(c){return S9(typeof c=="function"?c:cs(c,p))}function Dse(c){return P9(cs(c,p))}function Ose(c,h){return M9(c,cs(h,p))}var Nse=hr(function(c,h){return function(w){return Ah(w,c,h)}}),Lse=hr(function(c,h){return function(w){return Ah(c,w,h)}});function qy(c,h,w){var L=Fn(h),K=Tp(h,L);w==null&&!(Qr(h)&&(K.length||!L.length))&&(w=h,h=c,c=this,K=Tp(h,Fn(h)));var ne=!(Qr(w)&&"chain"in w)||!!w.chain,he=Vo(c);return ss(K,function(me){var we=h[me];c[me]=we,he&&(c.prototype[me]=function(){var We=this.__chain__;if(ne||We){var Ke=c(this.__wrapped__),Ze=Ke.__actions__=Ei(this.__actions__);return Ze.push({func:we,args:arguments,thisArg:c}),Ke.__chain__=We,Ke}return we.apply(c,Ca([this.value()],arguments))})}),c}function kse(){return _r._===this&&(_r._=cee),this}function zy(){}function Bse(c){return c=ur(c),hr(function(h){return I9(h,c)})}var $se=wy(Xr),Fse=wy(Y7),jse=wy(Wb);function KA(c){return My(c)?Kb(so(c)):mte(c)}function Use(c){return function(h){return c==null?r:Dc(c,h)}}var qse=J9(),zse=J9(!0);function Hy(){return[]}function Wy(){return!1}function Hse(){return{}}function Wse(){return""}function Kse(){return!0}function Vse(c,h){if(c=ur(c),c<1||c>_)return[];var w=M,L=ei(c,M);h=qt(h),c-=M;for(var K=Yb(L,h);++w<c;)h(w);return K}function Gse(c){return sr(c)?Xr(c,so):Bi(c)?[c]:Ei(hA(Cr(c)))}function Yse(c){var h=++oee;return Cr(c)+h}var Jse=kp(function(c,h){return c+h},0),Xse=xy("ceil"),Zse=kp(function(c,h){return c/h},1),Qse=xy("floor");function eoe(c){return c&&c.length?Cp(c,Pi,oy):r}function toe(c,h){return c&&c.length?Cp(c,qt(h,2),oy):r}function roe(c){return Z7(c,Pi)}function noe(c,h){return Z7(c,qt(h,2))}function ioe(c){return c&&c.length?Cp(c,Pi,fy):r}function soe(c,h){return c&&c.length?Cp(c,qt(h,2),fy):r}var ooe=kp(function(c,h){return c*h},1),aoe=xy("round"),coe=kp(function(c,h){return c-h},0);function uoe(c){return c&&c.length?Gb(c,Pi):0}function foe(c,h){return c&&c.length?Gb(c,qt(h,2)):0}return re.after=Dne,re.ary=EA,re.assign=yie,re.assignIn=BA,re.assignInWith=Yp,re.assignWith=wie,re.at=xie,re.before=SA,re.bind=Oy,re.bindAll=Pse,re.bindKey=AA,re.castArray=Hne,re.chain=wA,re.chunk=Qte,re.compact=ere,re.concat=tre,re.cond=Mse,re.conforms=Ise,re.constant=jy,re.countBy=une,re.create=_ie,re.curry=PA,re.curryRight=MA,re.debounce=IA,re.defaults=Eie,re.defaultsDeep=Sie,re.defer=One,re.delay=Nne,re.difference=rre,re.differenceBy=nre,re.differenceWith=ire,re.drop=sre,re.dropRight=ore,re.dropRightWhile=are,re.dropWhile=cre,re.fill=ure,re.filter=lne,re.flatMap=pne,re.flatMapDeep=gne,re.flatMapDepth=mne,re.flatten=mA,re.flattenDeep=fre,re.flattenDepth=lre,re.flip=Lne,re.flow=Tse,re.flowRight=Rse,re.fromPairs=hre,re.functions=Rie,re.functionsIn=Die,re.groupBy=vne,re.initial=pre,re.intersection=gre,re.intersectionBy=mre,re.intersectionWith=vre,re.invert=Nie,re.invertBy=Lie,re.invokeMap=yne,re.iteratee=Uy,re.keyBy=wne,re.keys=Fn,re.keysIn=Ai,re.map=zp,re.mapKeys=Bie,re.mapValues=$ie,re.matches=Dse,re.matchesProperty=Ose,re.memoize=Wp,re.merge=Fie,re.mergeWith=$A,re.method=Nse,re.methodOf=Lse,re.mixin=qy,re.negate=Kp,re.nthArg=Bse,re.omit=jie,re.omitBy=Uie,re.once=kne,re.orderBy=xne,re.over=$se,re.overArgs=Bne,re.overEvery=Fse,re.overSome=jse,re.partial=Ny,re.partialRight=CA,re.partition=_ne,re.pick=qie,re.pickBy=FA,re.property=KA,re.propertyOf=Use,re.pull=xre,re.pullAll=bA,re.pullAllBy=_re,re.pullAllWith=Ere,re.pullAt=Sre,re.range=qse,re.rangeRight=zse,re.rearg=$ne,re.reject=Ane,re.remove=Are,re.rest=Fne,re.reverse=Ry,re.sampleSize=Mne,re.set=Hie,re.setWith=Wie,re.shuffle=Ine,re.slice=Pre,re.sortBy=Rne,re.sortedUniq=Ore,re.sortedUniqBy=Nre,re.split=pse,re.spread=jne,re.tail=Lre,re.take=kre,re.takeRight=Bre,re.takeRightWhile=$re,re.takeWhile=Fre,re.tap=ene,re.throttle=Une,re.thru=qp,re.toArray=NA,re.toPairs=jA,re.toPairsIn=UA,re.toPath=Gse,re.toPlainObject=kA,re.transform=Kie,re.unary=qne,re.union=jre,re.unionBy=Ure,re.unionWith=qre,re.uniq=zre,re.uniqBy=Hre,re.uniqWith=Wre,re.unset=Vie,re.unzip=Dy,re.unzipWith=yA,re.update=Gie,re.updateWith=Yie,re.values=gf,re.valuesIn=Jie,re.without=Kre,re.words=HA,re.wrap=zne,re.xor=Vre,re.xorBy=Gre,re.xorWith=Yre,re.zip=Jre,re.zipObject=Xre,re.zipObjectDeep=Zre,re.zipWith=Qre,re.entries=jA,re.entriesIn=UA,re.extend=BA,re.extendWith=Yp,qy(re,re),re.add=Jse,re.attempt=WA,re.camelCase=ese,re.capitalize=qA,re.ceil=Xse,re.clamp=Xie,re.clone=Wne,re.cloneDeep=Vne,re.cloneDeepWith=Gne,re.cloneWith=Kne,re.conformsTo=Yne,re.deburr=zA,re.defaultTo=Cse,re.divide=Zse,re.endsWith=tse,re.eq=Cs,re.escape=rse,re.escapeRegExp=nse,re.every=fne,re.find=hne,re.findIndex=pA,re.findKey=Aie,re.findLast=dne,re.findLastIndex=gA,re.findLastKey=Pie,re.floor=Qse,re.forEach=xA,re.forEachRight=_A,re.forIn=Mie,re.forInRight=Iie,re.forOwn=Cie,re.forOwnRight=Tie,re.get=By,re.gt=Jne,re.gte=Xne,re.has=Oie,re.hasIn=$y,re.head=vA,re.identity=Pi,re.includes=bne,re.indexOf=dre,re.inRange=Zie,re.invoke=kie,re.isArguments=Lc,re.isArray=sr,re.isArrayBuffer=Zne,re.isArrayLike=Si,re.isArrayLikeObject=mn,re.isBoolean=Qne,re.isBuffer=ka,re.isDate=eie,re.isElement=tie,re.isEmpty=rie,re.isEqual=nie,re.isEqualWith=iie,re.isError=Ly,re.isFinite=sie,re.isFunction=Vo,re.isInteger=TA,re.isLength=Vp,re.isMap=RA,re.isMatch=oie,re.isMatchWith=aie,re.isNaN=cie,re.isNative=uie,re.isNil=lie,re.isNull=fie,re.isNumber=DA,re.isObject=Qr,re.isObjectLike=rn,re.isPlainObject=Rh,re.isRegExp=ky,re.isSafeInteger=hie,re.isSet=OA,re.isString=Gp,re.isSymbol=Bi,re.isTypedArray=pf,re.isUndefined=die,re.isWeakMap=pie,re.isWeakSet=gie,re.join=bre,re.kebabCase=ise,re.last=fs,re.lastIndexOf=yre,re.lowerCase=sse,re.lowerFirst=ose,re.lt=mie,re.lte=vie,re.max=eoe,re.maxBy=toe,re.mean=roe,re.meanBy=noe,re.min=ioe,re.minBy=soe,re.stubArray=Hy,re.stubFalse=Wy,re.stubObject=Hse,re.stubString=Wse,re.stubTrue=Kse,re.multiply=ooe,re.nth=wre,re.noConflict=kse,re.noop=zy,re.now=Hp,re.pad=ase,re.padEnd=cse,re.padStart=use,re.parseInt=fse,re.random=Qie,re.reduce=Ene,re.reduceRight=Sne,re.repeat=lse,re.replace=hse,re.result=zie,re.round=aoe,re.runInContext=be,re.sample=Pne,re.size=Cne,re.snakeCase=dse,re.some=Tne,re.sortedIndex=Mre,re.sortedIndexBy=Ire,re.sortedIndexOf=Cre,re.sortedLastIndex=Tre,re.sortedLastIndexBy=Rre,re.sortedLastIndexOf=Dre,re.startCase=gse,re.startsWith=mse,re.subtract=coe,re.sum=uoe,re.sumBy=foe,re.template=vse,re.times=Vse,re.toFinite=Go,re.toInteger=ur,re.toLength=LA,re.toLower=bse,re.toNumber=ls,re.toSafeInteger=bie,re.toString=Cr,re.toUpper=yse,re.trim=wse,re.trimEnd=xse,re.trimStart=_se,re.truncate=Ese,re.unescape=Sse,re.uniqueId=Yse,re.upperCase=Ase,re.upperFirst=Fy,re.each=xA,re.eachRight=_A,re.first=vA,qy(re,function(){var c={};return no(re,function(h,w){Tr.call(re.prototype,w)||(c[w]=h)}),c}(),{chain:!1}),re.VERSION=n,ss(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){re[c].placeholder=re}),ss(["drop","take"],function(c,h){xr.prototype[c]=function(w){w=w===r?1:Pn(ur(w),0);var L=this.__filtered__&&!h?new xr(this):this.clone();return L.__filtered__?L.__takeCount__=ei(w,L.__takeCount__):L.__views__.push({size:ei(w,M),type:c+(L.__dir__<0?"Right":"")}),L},xr.prototype[c+"Right"]=function(w){return this.reverse()[c](w).reverse()}}),ss(["filter","map","takeWhile"],function(c,h){var w=h+1,L=w==f||w==v;xr.prototype[c]=function(K){var ne=this.clone();return ne.__iteratees__.push({iteratee:qt(K,3),type:w}),ne.__filtered__=ne.__filtered__||L,ne}}),ss(["head","last"],function(c,h){var w="take"+(h?"Right":"");xr.prototype[c]=function(){return this[w](1).value()[0]}}),ss(["initial","tail"],function(c,h){var w="drop"+(h?"":"Right");xr.prototype[c]=function(){return this.__filtered__?new xr(this):this[w](1)}}),xr.prototype.compact=function(){return this.filter(Pi)},xr.prototype.find=function(c){return this.filter(c).head()},xr.prototype.findLast=function(c){return this.reverse().find(c)},xr.prototype.invokeMap=hr(function(c,h){return typeof c=="function"?new xr(this):this.map(function(w){return Ah(w,c,h)})}),xr.prototype.reject=function(c){return this.filter(Kp(qt(c)))},xr.prototype.slice=function(c,h){c=ur(c);var w=this;return w.__filtered__&&(c>0||h<0)?new xr(w):(c<0?w=w.takeRight(-c):c&&(w=w.drop(c)),h!==r&&(h=ur(h),w=h<0?w.dropRight(-h):w.take(h-c)),w)},xr.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},xr.prototype.toArray=function(){return this.take(M)},no(xr.prototype,function(c,h){var w=/^(?:filter|find|map|reject)|While$/.test(h),L=/^(?:head|last)$/.test(h),K=re[L?"take"+(h=="last"?"Right":""):h],ne=L||/^find/.test(h);K&&(re.prototype[h]=function(){var he=this.__wrapped__,me=L?[1]:arguments,we=he instanceof xr,We=me[0],Ke=we||sr(he),Ze=function(br){var Er=K.apply(re,Ca([br],me));return L&&xt?Er[0]:Er};Ke&&w&&typeof We=="function"&&We.length!=1&&(we=Ke=!1);var xt=this.__chain__,Nt=!!this.__actions__.length,Vt=ne&&!xt,fr=we&&!Nt;if(!ne&&Ke){he=fr?he:new xr(this);var Gt=c.apply(he,me);return Gt.__actions__.push({func:qp,args:[Ze],thisArg:r}),new as(Gt,xt)}return Vt&&fr?c.apply(this,me):(Gt=this.thru(Ze),Vt?L?Gt.value()[0]:Gt.value():Gt)})}),ss(["pop","push","shift","sort","splice","unshift"],function(c){var h=pp[c],w=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",L=/^(?:pop|shift)$/.test(c);re.prototype[c]=function(){var K=arguments;if(L&&!this.__chain__){var ne=this.value();return h.apply(sr(ne)?ne:[],K)}return this[w](function(he){return h.apply(sr(he)?he:[],K)})}}),no(xr.prototype,function(c,h){var w=re[h];if(w){var L=w.name+"";Tr.call(uf,L)||(uf[L]=[]),uf[L].push({name:h,func:w})}}),uf[Lp(r,k).name]=[{name:"wrapper",func:r}],xr.prototype.clone=See,xr.prototype.reverse=Aee,xr.prototype.value=Pee,re.prototype.at=tne,re.prototype.chain=rne,re.prototype.commit=nne,re.prototype.next=ine,re.prototype.plant=one,re.prototype.reverse=ane,re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=cne,re.prototype.first=re.prototype.head,bh&&(re.prototype[bh]=sne),re},of=nee();gn?((gn.exports=of)._=of,Ur._=of):_r._=of}).call(nn)}(e0,e0.exports);var Pq=e0.exports,P1={exports:{}};(function(t,e){var r=typeof self<"u"?self:nn,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(f){return f&&DataView.prototype.isPrototypeOf(f)}if(a.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(f){return f&&l.indexOf(Object.prototype.toString.call(f))>-1};function p(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function y(f){return typeof f!="string"&&(f=String(f)),f}function A(f){var g={next:function(){var v=f.shift();return{done:v===void 0,value:v}}};return a.iterable&&(g[Symbol.iterator]=function(){return g}),g}function P(f){this.map={},f instanceof P?f.forEach(function(g,v){this.append(v,g)},this):Array.isArray(f)?f.forEach(function(g){this.append(g[0],g[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(g){this.append(g,f[g])},this)}P.prototype.append=function(f,g){f=p(f),g=y(g);var v=this.map[f];this.map[f]=v?v+", "+g:g},P.prototype.delete=function(f){delete this.map[p(f)]},P.prototype.get=function(f){return f=p(f),this.has(f)?this.map[f]:null},P.prototype.has=function(f){return this.map.hasOwnProperty(p(f))},P.prototype.set=function(f,g){this.map[p(f)]=y(g)},P.prototype.forEach=function(f,g){for(var v in this.map)this.map.hasOwnProperty(v)&&f.call(g,this.map[v],v,this)},P.prototype.keys=function(){var f=[];return this.forEach(function(g,v){f.push(v)}),A(f)},P.prototype.values=function(){var f=[];return this.forEach(function(g){f.push(g)}),A(f)},P.prototype.entries=function(){var f=[];return this.forEach(function(g,v){f.push([v,g])}),A(f)},a.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function O(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function D(f){return new Promise(function(g,v){f.onload=function(){g(f.result)},f.onerror=function(){v(f.error)}})}function k(f){var g=new FileReader,v=D(g);return g.readAsArrayBuffer(f),v}function B(f){var g=new FileReader,v=D(g);return g.readAsText(f),v}function q(f){for(var g=new Uint8Array(f),v=new Array(g.length),x=0;x<g.length;x++)v[x]=String.fromCharCode(g[x]);return v.join("")}function j(f){if(f.slice)return f.slice(0);var g=new Uint8Array(f.byteLength);return g.set(new Uint8Array(f)),g.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:a.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:a.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():a.arrayBuffer&&a.blob&&u(f)?(this._bodyArrayBuffer=j(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||d(f))?this._bodyArrayBuffer=j(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var f=O(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?O(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var f=O(this);if(f)return f;if(this._bodyBlob)return B(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(q(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(ue)}),this.json=function(){return this.text().then(JSON.parse)},this}var J=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(f){var g=f.toUpperCase();return J.indexOf(g)>-1?g:f}function z(f,g){g=g||{};var v=g.body;if(f instanceof z){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,g.headers||(this.headers=new P(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!v&&f._bodyInit!=null&&(v=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=g.credentials||this.credentials||"same-origin",(g.headers||!this.headers)&&(this.headers=new P(g.headers)),this.method=T(g.method||this.method||"GET"),this.mode=g.mode||this.mode||null,this.signal=g.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&v)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(v)}z.prototype.clone=function(){return new z(this,{body:this._bodyInit})};function ue(f){var g=new FormData;return f.trim().split("&").forEach(function(v){if(v){var x=v.split("="),_=x.shift().replace(/\+/g," "),S=x.join("=").replace(/\+/g," ");g.append(decodeURIComponent(_),decodeURIComponent(S))}}),g}function _e(f){var g=new P,v=f.replace(/\r?\n[\t ]+/g," ");return v.split(/\r?\n/).forEach(function(x){var _=x.split(":"),S=_.shift().trim();if(S){var b=_.join(":").trim();g.append(S,b)}}),g}H.call(z.prototype);function G(f,g){g||(g={}),this.type="default",this.status=g.status===void 0?200:g.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in g?g.statusText:"OK",this.headers=new P(g.headers),this.url=g.url||"",this._initBody(f)}H.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},G.error=function(){var f=new G(null,{status:0,statusText:""});return f.type="error",f};var E=[301,302,303,307,308];G.redirect=function(f,g){if(E.indexOf(g)===-1)throw new RangeError("Invalid status code");return new G(null,{status:g,headers:{location:f}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(g,v){this.message=g,this.name=v;var x=Error(g);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function m(f,g){return new Promise(function(v,x){var _=new z(f,g);if(_.signal&&_.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var S=new XMLHttpRequest;function b(){S.abort()}S.onload=function(){var M={status:S.status,statusText:S.statusText,headers:_e(S.getAllResponseHeaders()||"")};M.url="responseURL"in S?S.responseURL:M.headers.get("X-Request-URL");var I="response"in S?S.response:S.responseText;v(new G(I,M))},S.onerror=function(){x(new TypeError("Network request failed"))},S.ontimeout=function(){x(new TypeError("Network request failed"))},S.onabort=function(){x(new o.DOMException("Aborted","AbortError"))},S.open(_.method,_.url,!0),_.credentials==="include"?S.withCredentials=!0:_.credentials==="omit"&&(S.withCredentials=!1),"responseType"in S&&a.blob&&(S.responseType="blob"),_.headers.forEach(function(M,I){S.setRequestHeader(I,M)}),_.signal&&(_.signal.addEventListener("abort",b),S.onreadystatechange=function(){S.readyState===4&&_.signal.removeEventListener("abort",b)}),S.send(typeof _._bodyInit>"u"?null:_._bodyInit)})}return m.polyfill=!0,s.fetch||(s.fetch=m,s.Headers=P,s.Request=z,s.Response=G),o.Headers=P,o.Request=z,o.Response=G,o.fetch=m,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(P1,P1.exports);var Mq=P1.exports;const D6=ji(Mq);var Iq=Object.defineProperty,Cq=Object.defineProperties,Tq=Object.getOwnPropertyDescriptors,O6=Object.getOwnPropertySymbols,Rq=Object.prototype.hasOwnProperty,Dq=Object.prototype.propertyIsEnumerable,N6=(t,e,r)=>e in t?Iq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,L6=(t,e)=>{for(var r in e||(e={}))Rq.call(e,r)&&N6(t,r,e[r]);if(O6)for(var r of O6(e))Dq.call(e,r)&&N6(t,r,e[r]);return t},k6=(t,e)=>Cq(t,Tq(e));const Oq={Accept:"application/json","Content-Type":"application/json"},Nq="POST",B6={headers:Oq,method:Nq},$6=10;let xs=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new qi.EventEmitter,this.isAvailable=!1,this.registering=!1,!B_(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=mo(e),n=await(await D6(this.url,k6(L6({},B6),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!B_(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=mo({id:1,jsonrpc:"2.0",method:"test",params:[]});await D6(e,k6(L6({},B6),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ka(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Gd(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return D_(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>$6&&this.events.setMaxListeners($6)}};const F6="error",Lq="wss://relay.walletconnect.org",kq="wc",Bq="universal_provider",j6=`${kq}@2:${Bq}:`,U6="https://rpc.walletconnect.org/v1/",Cu="generic",$q=`${U6}bundler`,Qi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Fq=Object.defineProperty,jq=Object.defineProperties,Uq=Object.getOwnPropertyDescriptors,q6=Object.getOwnPropertySymbols,qq=Object.prototype.hasOwnProperty,zq=Object.prototype.propertyIsEnumerable,z6=(t,e,r)=>e in t?Fq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,t0=(t,e)=>{for(var r in e||(e={}))qq.call(e,r)&&z6(t,r,e[r]);if(q6)for(var r of q6(e))zq.call(e,r)&&z6(t,r,e[r]);return t},Hq=(t,e)=>jq(t,Uq(e));function Di(t,e,r){var n;const i=Su(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${U6}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function fc(t){return t.includes(":")?t.split(":")[1]:t}function H6(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Wq(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function M1(t={},e={}){const r=W6(t),n=W6(e);return Pq.merge(r,n)}function W6(t){var e,r,n,i;const s={};if(!Sl(t))return s;for(const[o,a]of Object.entries(t)){const u=f1(o)?[o]:a.chains,l=a.methods||[],d=a.events||[],p=a.rpcMap||{},y=El(o);s[y]=Hq(t0(t0({},s[y]),a),{chains:Ud(u,(e=s[y])==null?void 0:e.chains),methods:Ud(l,(r=s[y])==null?void 0:r.methods),events:Ud(d,(n=s[y])==null?void 0:n.events),rpcMap:t0(t0({},p),(i=s[y])==null?void 0:i.rpcMap)})}return s}function Kq(t){return t.includes(":")?t.split(":")[2]:t}function K6(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=f1(r)?[r]:n.chains?n.chains:H6(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function I1(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const V6={},Ar=t=>V6[t],C1=(t,e)=>{V6[t]=e};class Vq{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=fc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}}var Gq=Object.defineProperty,Yq=Object.defineProperties,Jq=Object.getOwnPropertyDescriptors,G6=Object.getOwnPropertySymbols,Xq=Object.prototype.hasOwnProperty,Zq=Object.prototype.propertyIsEnumerable,Y6=(t,e,r)=>e in t?Gq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,J6=(t,e)=>{for(var r in e||(e={}))Xq.call(e,r)&&Y6(t,r,e[r]);if(G6)for(var r of G6(e))Zq.call(e,r)&&Y6(t,r,e[r]);return t},X6=(t,e)=>Yq(t,Jq(e));class Qq{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Di(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(fc(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a==null?void 0:a[s];const u=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:X6(J6({},o.sessionProperties||{}),{capabilities:X6(J6({},a||{}),{[s]:u})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return u}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(da("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${$q}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}class ez{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=fc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}}let tz=class{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=fc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}},rz=class{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Di(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Ji(new xs(n,Ar("disableProviderPing")))}},nz=class{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=fc(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}},iz=class{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=fc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}};class sz{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=fc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}}let oz=class{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Di(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace);return typeof n>"u"?void 0:new Ji(new xs(n,Ar("disableProviderPing")))}};class az{constructor(e){this.name="tezos",this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Di(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace);return typeof n>"u"?void 0:new Ji(new xs(n))}}class cz{constructor(e){this.name=Cu,this.namespace=e.namespace,this.events=Ar("events"),this.client=Ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Qi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=Su(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ji(new xs(n,Ar("disableProviderPing")))}}var uz=Object.defineProperty,fz=Object.defineProperties,lz=Object.getOwnPropertyDescriptors,Z6=Object.getOwnPropertySymbols,hz=Object.prototype.hasOwnProperty,dz=Object.prototype.propertyIsEnumerable,Q6=(t,e,r)=>e in t?uz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,r0=(t,e)=>{for(var r in e||(e={}))hz.call(e,r)&&Q6(t,r,e[r]);if(Z6)for(var r of Z6(e))dz.call(e,r)&&Q6(t,r,e[r]);return t},T1=(t,e)=>fz(t,lz(e));let R1=class YA{constructor(e){this.events=new Yg,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qf(od({level:(e==null?void 0:e.logger)||F6})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new YA(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:r0({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,Vd(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Dr("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=K6(this.session.namespaces);this.namespaces=M1(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await i().then(s=>{this.session=s;const o=K6(s.namespaces);this.namespaces=M1(this.namespaces,o),this.persist("namespaces",this.namespaces)}).catch(s=>{if(s.message!==C6)throw s;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===Cu?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ic(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await A1.init({core:this.providerOpts.core,logger:this.providerOpts.logger||F6,relayUrl:this.providerOpts.relayUrl||Lq,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>El(r)))];C1("client",this.client),C1("events",this.events),C1("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=Wq(r,this.session),i=H6(n),s=M1(this.namespaces,this.optionalNamespaces),o=T1(r0({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new Qq({namespace:o});break;case"algorand":this.rpcProviders[r]=new rz({namespace:o});break;case"solana":this.rpcProviders[r]=new ez({namespace:o});break;case"cosmos":this.rpcProviders[r]=new tz({namespace:o});break;case"polkadot":this.rpcProviders[r]=new Vq({namespace:o});break;case"cip34":this.rpcProviders[r]=new nz({namespace:o});break;case"elrond":this.rpcProviders[r]=new iz({namespace:o});break;case"multiversx":this.rpcProviders[r]=new sz({namespace:o});break;case"near":this.rpcProviders[r]=new oz({namespace:o});break;case"tezos":this.rpcProviders[r]=new az({namespace:o});break;default:this.rpcProviders[Cu]?this.rpcProviders[Cu].updateNamespace(o):this.rpcProviders[Cu]=new cz({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;if(n.name==="accountsChanged"){const i=n.data;i&&ic(i)&&this.events.emit("accountsChanged",i.map(Kq))}else if(n.name==="chainChanged"){const i=r.chainId,s=r.event.data,o=El(i),a=I1(i)!==I1(s)?`${o}:${I1(s)}`:i;this.onChainChanged(a)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=T1(r0({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",T1(r0({},Dr("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Qi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Cu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>El(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=El(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${j6}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${j6}/${e}`)}};const pz=R1;function gz(){return new Promise(t=>{const e=[];let r;window.addEventListener("eip6963:announceProvider",n=>{const{detail:i}=n;r&&clearTimeout(r),e.push(i),r=setTimeout(()=>t(e),200)}),r=setTimeout(()=>t(e),200),window.dispatchEvent(new Event("eip6963:requestProvider"))})}class Ys{constructor(e,r){this.scope=e,this.module=r}storeObject(e,r){this.setItem(e,JSON.stringify(r))}loadObject(e){const r=this.getItem(e);return r?JSON.parse(r):void 0}setItem(e,r){localStorage.setItem(this.scopedKey(e),r)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);typeof i=="string"&&i.startsWith(e)&&r.push(i)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new Ys("CBWSDK").clear(),new Ys("walletlink").clear()}}const cn={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},D1={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},e5="Unspecified error message.",mz="Unspecified server error.";function O1(t,e=e5){if(t&&Number.isInteger(t)){const r=t.toString();if(N1(D1,r))return D1[r].message;if(t5(t))return mz}return e}function vz(t){if(!Number.isInteger(t))return!1;const e=t.toString();return!!(D1[e]||t5(t))}function bz(t,{shouldIncludeStack:e=!1}={}){const r={};if(t&&typeof t=="object"&&!Array.isArray(t)&&N1(t,"code")&&vz(t.code)){const n=t;r.code=n.code,n.message&&typeof n.message=="string"?(r.message=n.message,N1(n,"data")&&(r.data=n.data)):(r.message=O1(r.code),r.data={originalError:r5(t)})}else r.code=cn.rpc.internal,r.message=n5(t,"message")?t.message:e5,r.data={originalError:r5(t)};return e&&(r.stack=n5(t,"stack")?t.stack:void 0),r}function t5(t){return t>=-32099&&t<=-32e3}function r5(t){return t&&typeof t=="object"&&!Array.isArray(t)?Object.assign({},t):t}function N1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n5(t,e){return typeof t=="object"&&t!==null&&e in t&&typeof t[e]=="string"}const Sr={rpc:{parse:t=>es(cn.rpc.parse,t),invalidRequest:t=>es(cn.rpc.invalidRequest,t),invalidParams:t=>es(cn.rpc.invalidParams,t),methodNotFound:t=>es(cn.rpc.methodNotFound,t),internal:t=>es(cn.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return es(e,t)},invalidInput:t=>es(cn.rpc.invalidInput,t),resourceNotFound:t=>es(cn.rpc.resourceNotFound,t),resourceUnavailable:t=>es(cn.rpc.resourceUnavailable,t),transactionRejected:t=>es(cn.rpc.transactionRejected,t),methodNotSupported:t=>es(cn.rpc.methodNotSupported,t),limitExceeded:t=>es(cn.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Tu(cn.provider.userRejectedRequest,t),unauthorized:t=>Tu(cn.provider.unauthorized,t),unsupportedMethod:t=>Tu(cn.provider.unsupportedMethod,t),disconnected:t=>Tu(cn.provider.disconnected,t),chainDisconnected:t=>Tu(cn.provider.chainDisconnected,t),unsupportedChain:t=>Tu(cn.provider.unsupportedChain,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new o5(e,r,n)}}};function es(t,e){const[r,n]=i5(e);return new s5(t,r||O1(t),n)}function Tu(t,e){const[r,n]=i5(e);return new o5(t,r||O1(t),n)}function i5(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}class s5 extends Error{constructor(e,r,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=e,n!==void 0&&(this.data=n)}}class o5 extends s5{constructor(e,r,n){if(!yz(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,r,n)}}function yz(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function L1(){return t=>t}const Ol=L1(),wz=L1(),xz=L1();function Co(t){return Math.floor(t)}const a5=/^[0-9]*$/,c5=/^[a-f0-9]*$/;function lc(t){return k1(crypto.getRandomValues(new Uint8Array(t)))}function k1(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}function n0(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>Number.parseInt(e,16)))}function Nl(t,e=!1){const r=t.toString("hex");return Ol(e?`0x${r}`:r)}function B1(t){return Nl(j1(t),!0)}function Js(t){return xz(t.toString(10))}function pa(t){return Ol(`0x${BigInt(t).toString(16)}`)}function u5(t){return t.startsWith("0x")||t.startsWith("0X")}function $1(t){return u5(t)?t.slice(2):t}function f5(t){return u5(t)?`0x${t.slice(2)}`:`0x${t}`}function i0(t){if(typeof t!="string")return!1;const e=$1(t).toLowerCase();return c5.test(e)}function _z(t,e=!1){if(typeof t=="string"){const r=$1(t).toLowerCase();if(c5.test(r))return Ol(e?`0x${r}`:r)}throw Sr.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}function F1(t,e=!1){let r=_z(t,!1);return r.length%2===1&&(r=Ol(`0${r}`)),e?Ol(`0x${r}`):r}function ga(t){if(typeof t=="string"){const e=$1(t).toLowerCase();if(i0(e)&&e.length===40)return wz(f5(e))}throw Sr.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`)}function j1(t){if(Buffer.isBuffer(t))return t;if(typeof t=="string"){if(i0(t)){const e=F1(t,!1);return Buffer.from(e,"hex")}return Buffer.from(t,"utf8")}throw Sr.rpc.invalidParams(`Not binary data: ${String(t)}`)}function Ll(t){if(typeof t=="number"&&Number.isInteger(t))return Co(t);if(typeof t=="string"){if(a5.test(t))return Co(Number(t));if(i0(t))return Co(Number(BigInt(F1(t,!0))))}throw Sr.rpc.invalidParams(`Not an integer: ${String(t)}`)}function kl(t){if(t!==null&&(typeof t=="bigint"||Sz(t)))return BigInt(t.toString(10));if(typeof t=="number")return BigInt(Ll(t));if(typeof t=="string"){if(a5.test(t))return BigInt(t);if(i0(t))return BigInt(F1(t,!0))}throw Sr.rpc.invalidParams(`Not an integer: ${String(t)}`)}function Ez(t){if(typeof t=="string")return JSON.parse(t);if(typeof t=="object")return t;throw Sr.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`)}function Sz(t){if(t==null||typeof t.constructor!="function")return!1;const{constructor:e}=t;return typeof e.config=="function"&&typeof e.EUCLID=="number"}async function Az(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function Pz(t,e){return crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function Mz(t,e){const r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,new TextEncoder().encode(e));return{iv:r,cipherText:n}}async function Iz(t,{iv:e,cipherText:r}){const n=await crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,r);return new TextDecoder().decode(n)}function l5(t){switch(t){case"public":return"spki";case"private":return"pkcs8"}}async function h5(t,e){const r=l5(t),n=await crypto.subtle.exportKey(r,e);return k1(new Uint8Array(n))}async function d5(t,e){const r=l5(t),n=n0(e).buffer;return await crypto.subtle.importKey(r,new Uint8Array(n),{name:"ECDH",namedCurve:"P-256"},!0,t==="private"?["deriveKey"]:[])}async function Cz(t,e){const r=JSON.stringify(t,(n,i)=>{if(!(i instanceof Error))return i;const s=i;return Object.assign(Object.assign({},s.code?{code:s.code}:{}),{message:s.message})});return Mz(e,r)}async function Tz(t,e){return JSON.parse(await Iz(e,t))}const U1={storageKey:"ownPrivateKey",keyType:"private"},q1={storageKey:"ownPublicKey",keyType:"public"},z1={storageKey:"peerPublicKey",keyType:"public"};class Rz{constructor(){this.storage=new Ys("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(z1,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(q1.storageKey),this.storage.removeItem(U1.storageKey),this.storage.removeItem(z1.storageKey)}async generateKeyPair(){const e=await Az();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(U1,e.privateKey),await this.storeKey(q1,e.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(U1)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(q1)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(z1)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await Pz(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(e){const r=this.storage.getItem(e.storageKey);return r?d5(e.keyType,r):null}async storeKey(e,r){const n=await h5(e.keyType,r);this.storage.setItem(e.storageKey,n)}}const Bl="4.2.4",p5="@coinbase/wallet-sdk";async function g5(t,e){const r=Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:crypto.randomUUID()}),n=await window.fetch(e,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":Bl,"X-Cbw-Sdk-Platform":p5}}),{result:i,error:s}=await n.json();if(s)throw s;return i}function Dz(){return globalThis.coinbaseWalletExtension}function Oz(){var t,e;try{const r=globalThis;return(t=r.ethereum)!==null&&t!==void 0?t:(e=r.top)===null||e===void 0?void 0:e.ethereum}catch{return}}function Nz({metadata:t,preference:e}){var r,n;const{appName:i,appLogoUrl:s,appChainIds:o}=t;if(e.options!=="smartWalletOnly"){const u=Dz();if(u)return(r=u.setAppInfo)===null||r===void 0||r.call(u,i,s,o,e),u}const a=Oz();if(a!=null&&a.isCoinbaseBrowser)return(n=a.setAppInfo)===null||n===void 0||n.call(a,i,s,o,e),a}function Lz(t){if(!t||typeof t!="object"||Array.isArray(t))throw Sr.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:t});const{method:e,params:r}=t;if(typeof e!="string"||e.length===0)throw Sr.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:t});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw Sr.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:t});switch(e){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw Sr.provider.unsupportedMethod()}}const m5="accounts",v5="activeChain",b5="availableChains",y5="walletCapabilities";class kz{constructor(e){var r,n,i;this.metadata=e.metadata,this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new Rz,this.storage=new Ys("CBWSDK","SCWStateManager"),this.accounts=(r=this.storage.loadObject(m5))!==null&&r!==void 0?r:[],this.chain=this.storage.loadObject(v5)||{id:(i=(n=e.metadata.appChainIds)===null||n===void 0?void 0:n[0])!==null&&i!==void 0?i:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(e){var r,n;const i=await this.createRequestMessage({handshake:{method:e.method,params:Object.assign({},this.metadata,(r=e.params)!==null&&r!==void 0?r:{})}}),s=await this.communicator.postRequestAndWaitForResponse(i);if("failure"in s.content)throw s.content.failure;const o=await d5("public",s.sender);await this.keyManager.setPeerPublicKey(o);const u=(await this.decryptResponseMessage(s)).result;if("error"in u)throw u.error;const l=u.value;this.accounts=l,this.storage.storeObject(m5,l),(n=this.callback)===null||n===void 0||n.call(this,"accountsChanged",l)}async request(e){var r;if(this.accounts.length===0)throw Sr.provider.unauthorized();switch(e.method){case"eth_requestAccounts":return(r=this.callback)===null||r===void 0||r.call(this,"connect",{chainId:pa(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return pa(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject(y5);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);default:if(!this.chain.rpcUrl)throw Sr.rpc.internal("No RPC URL set for chain");return g5(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var r,n;await((n=(r=this.communicator).waitForPopupLoaded)===null||n===void 0?void 0:n.call(r));const i=await this.sendEncryptedRequest(e),o=(await this.decryptResponseMessage(i)).result;if("error"in o)throw o.error;return o.value}async cleanup(){var e,r;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:(r=(e=this.metadata.appChainIds)===null||e===void 0?void 0:e[0])!==null&&r!==void 0?r:1}}async handleSwitchChainRequest(e){var r;const n=e.params;if(!n||!(!((r=n[0])===null||r===void 0)&&r.chainId))throw Sr.rpc.invalidParams();const i=Ll(n[0].chainId);if(this.updateChain(i))return null;const o=await this.sendRequestToPopup(e);return o===null&&this.updateChain(i),o}async sendEncryptedRequest(e){const r=await this.keyManager.getSharedSecret();if(!r)throw Sr.provider.unauthorized("No valid session found, try requestAccounts before other methods");const n=await Cz({action:e,chainId:this.chain.id},r),i=await this.createRequestMessage({encrypted:n});return this.communicator.postRequestAndWaitForResponse(i)}async createRequestMessage(e){const r=await h5("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:r,content:e,timestamp:new Date}}async decryptResponseMessage(e){var r,n;const i=e.content;if("failure"in i)throw i.failure;const s=await this.keyManager.getSharedSecret();if(!s)throw Sr.provider.unauthorized("Invalid session");const o=await Tz(i.encrypted,s),a=(r=o.data)===null||r===void 0?void 0:r.chains;if(a){const l=Object.entries(a).map(([d,p])=>({id:Number(d),rpcUrl:p}));this.storage.storeObject(b5,l),this.updateChain(this.chain.id,l)}const u=(n=o.data)===null||n===void 0?void 0:n.capabilities;return u&&this.storage.storeObject(y5,u),o}updateChain(e,r){var n;const i=r??this.storage.loadObject(b5),s=i==null?void 0:i.find(o=>o.id===e);return s?(s!==this.chain&&(this.chain=s,this.storage.storeObject(v5,s),(n=this.callback)===null||n===void 0||n.call(this,"chainChanged",pa(s.id))),!0):!1}}const Bz=Jp(tM),{keccak_256:$z}=Bz;function w5(t){return Buffer.allocUnsafe(t).fill(0)}function Fz(t){return t.toString(2).length}function x5(t,e){let r=t.toString(16);r.length%2!==0&&(r="0"+r);const n=r.match(/.{1,2}/g).map(i=>parseInt(i,16));for(;n.length<e;)n.unshift(0);return Buffer.from(n)}function jz(t,e){const r=t<0n;let n;if(r){const i=(1n<<BigInt(e))-1n;n=(~t&i)+1n}else n=t;return n&=(1n<<BigInt(e))-1n,n}function _5(t,e,r){const n=w5(e);return t=s0(t),r?t.length<e?(t.copy(n),n):t.slice(0,e):t.length<e?(t.copy(n,e-t.length),n):t.slice(-e)}function Uz(t,e){return _5(t,e,!0)}function s0(t){if(!Buffer.isBuffer(t))if(Array.isArray(t))t=Buffer.from(t);else if(typeof t=="string")E5(t)?t=Buffer.from(Hz(S5(t)),"hex"):t=Buffer.from(t);else if(typeof t=="number")t=intToBuffer(t);else if(t==null)t=Buffer.allocUnsafe(0);else if(typeof t=="bigint")t=x5(t);else if(t.toArray)t=Buffer.from(t.toArray());else throw new Error("invalid type");return t}function qz(t){return t=s0(t),"0x"+t.toString("hex")}function zz(t,e){if(t=s0(t),e||(e=256),e!==256)throw new Error("unsupported");return Buffer.from($z(new Uint8Array(t)))}function Hz(t){return t.length%2?"0"+t:t}function E5(t){return typeof t=="string"&&t.match(/^0x[0-9A-Fa-f]*$/)}function S5(t){return typeof t=="string"&&t.startsWith("0x")?t.slice(2):t}var A5={zeros:w5,setLength:_5,setLengthRight:Uz,isHexString:E5,stripHexPrefix:S5,toBuffer:s0,bufferToHex:qz,keccak:zz,bitLengthFromBigInt:Fz,bufferBEFromBigInt:x5,twosFromBigInt:jz};const si=A5;function P5(t){return t.startsWith("int[")?"int256"+t.slice(3):t==="int"?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):t==="uint"?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):t==="fixed"?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):t==="ufixed"?"ufixed128x128":t}function Ru(t){return Number.parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function M5(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);return[Number.parseInt(e[1],10),Number.parseInt(e[2],10)]}function I5(t){var e=t.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":Number.parseInt(e[2],10):null}function hc(t){var e=typeof t;if(e==="string"||e==="number")return BigInt(t);if(e==="bigint")return t;throw new Error("Argument is not a number")}function Xs(t,e){var r,n,i,s;if(t==="address")return Xs("uint160",hc(e));if(t==="bool")return Xs("uint8",e?1:0);if(t==="string")return Xs("bytes",new Buffer(e,"utf8"));if(Kz(t)){if(typeof e.length>"u")throw new Error("Not an array?");if(r=I5(t),r!=="dynamic"&&r!==0&&e.length>r)throw new Error("Elements exceed array size: "+r);i=[],t=t.slice(0,t.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(s in e)i.push(Xs(t,e[s]));if(r==="dynamic"){var o=Xs("uint256",e.length);i.unshift(o)}return Buffer.concat(i)}else{if(t==="bytes")return e=new Buffer(e),i=Buffer.concat([Xs("uint256",e.length),e]),e.length%32!==0&&(i=Buffer.concat([i,si.zeros(32-e.length%32)])),i;if(t.startsWith("bytes")){if(r=Ru(t),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return si.setLengthRight(e,32)}else if(t.startsWith("uint")){if(r=Ru(t),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);n=hc(e);const a=si.bitLengthFromBigInt(n);if(a>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+a);if(n<0)throw new Error("Supplied uint is negative");return si.bufferBEFromBigInt(n,32)}else if(t.startsWith("int")){if(r=Ru(t),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);n=hc(e);const a=si.bitLengthFromBigInt(n);if(a>r)throw new Error("Supplied int exceeds width: "+r+" vs "+a);const u=si.twosFromBigInt(n,256);return si.bufferBEFromBigInt(u,32)}else if(t.startsWith("ufixed")){if(r=M5(t),n=hc(e),n<0)throw new Error("Supplied ufixed is negative");return Xs("uint256",n*BigInt(2)**BigInt(r[1]))}else if(t.startsWith("fixed"))return r=M5(t),Xs("int256",hc(e)*BigInt(2)**BigInt(r[1]))}throw new Error("Unsupported or invalid type: "+t)}function Wz(t){return t==="string"||t==="bytes"||I5(t)==="dynamic"}function Kz(t){return t.lastIndexOf("]")===t.length-1}function Vz(t,e){var r=[],n=[],i=32*t.length;for(var s in t){var o=P5(t[s]),a=e[s],u=Xs(o,a);Wz(o)?(r.push(Xs("uint256",i)),n.push(u),i+=u.length):r.push(u)}return Buffer.concat(r.concat(n))}function C5(t,e){if(t.length!==e.length)throw new Error("Number of types are not matching the values");for(var r,n,i=[],s=0;s<t.length;s++){var o=P5(t[s]),a=e[s];if(o==="bytes")i.push(a);else if(o==="string")i.push(new Buffer(a,"utf8"));else if(o==="bool")i.push(new Buffer(a?"01":"00","hex"));else if(o==="address")i.push(si.setLength(a,20));else if(o.startsWith("bytes")){if(r=Ru(o),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);i.push(si.setLengthRight(a,r))}else if(o.startsWith("uint")){if(r=Ru(o),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);n=hc(a);const u=si.bitLengthFromBigInt(n);if(u>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+u);i.push(si.bufferBEFromBigInt(n,r/8))}else if(o.startsWith("int")){if(r=Ru(o),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);n=hc(a);const u=si.bitLengthFromBigInt(n);if(u>r)throw new Error("Supplied int exceeds width: "+r+" vs "+u);const l=si.twosFromBigInt(n,r);i.push(si.bufferBEFromBigInt(l,r/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(i)}function Gz(t,e){return si.keccak(C5(t,e))}var Yz={rawEncode:Vz,solidityPack:C5,soliditySHA3:Gz};const _s=A5,$l=Yz,T5={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},H1={encodeData(t,e,r,n=!0){const i=["bytes32"],s=[this.hashType(t,r)];if(n){const o=(a,u,l)=>{if(r[u]!==void 0)return["bytes32",l==null?"0x0000000000000000000000000000000000000000000000000000000000000000":_s.keccak(this.encodeData(u,l,r,n))];if(l===void 0)throw new Error(`missing value for field ${a} of type ${u}`);if(u==="bytes")return["bytes32",_s.keccak(l)];if(u==="string")return typeof l=="string"&&(l=Buffer.from(l,"utf8")),["bytes32",_s.keccak(l)];if(u.lastIndexOf("]")===u.length-1){const d=u.slice(0,u.lastIndexOf("[")),p=l.map(y=>o(a,d,y));return["bytes32",_s.keccak($l.rawEncode(p.map(([y])=>y),p.map(([,y])=>y)))]}return[u,l]};for(const a of r[t]){const[u,l]=o(a.name,a.type,e[a.name]);i.push(u),s.push(l)}}else for(const o of r[t]){let a=e[o.name];if(a!==void 0)if(o.type==="bytes")i.push("bytes32"),a=_s.keccak(a),s.push(a);else if(o.type==="string")i.push("bytes32"),typeof a=="string"&&(a=Buffer.from(a,"utf8")),a=_s.keccak(a),s.push(a);else if(r[o.type]!==void 0)i.push("bytes32"),a=_s.keccak(this.encodeData(o.type,a,r,n)),s.push(a);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(o.type),s.push(a)}}return $l.rawEncode(i,s)},encodeType(t,e){let r="",n=this.findTypeDependencies(t,e).filter(i=>i!==t);n=[t].concat(n.sort());for(const i of n){if(!e[i])throw new Error("No type definition specified: "+i);r+=i+"("+e[i].map(({name:o,type:a})=>a+" "+o).join(",")+")"}return r},findTypeDependencies(t,e,r=[]){if(t=t.match(/^\w*/)[0],r.includes(t)||e[t]===void 0)return r;r.push(t);for(const n of e[t])for(const i of this.findTypeDependencies(n.type,e,r))!r.includes(i)&&r.push(i);return r},hashStruct(t,e,r,n=!0){return _s.keccak(this.encodeData(t,e,r,n))},hashType(t,e){return _s.keccak(this.encodeType(t,e))},sanitizeData(t){const e={};for(const r in T5.properties)t[r]&&(e[r]=t[r]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(t,e=!0){const r=this.sanitizeData(t),n=[Buffer.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,e)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,e)),_s.keccak(Buffer.concat(n))}};var Jz={TYPED_MESSAGE_SCHEMA:T5,TypedDataUtils:H1,hashForSignTypedDataLegacy:function(t){return Xz(t.data)},hashForSignTypedData_v3:function(t){return H1.hash(t.data,!1)},hashForSignTypedData_v4:function(t){return H1.hash(t.data)}};function Xz(t){const e=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!t.length)throw e;const r=t.map(function(s){return s.type==="bytes"?_s.toBuffer(s.value):s.value}),n=t.map(function(s){return s.type}),i=t.map(function(s){if(!s.name)throw e;return s.type+" "+s.name});return $l.soliditySHA3(["bytes32","bytes32"],[$l.soliditySHA3(new Array(t.length).fill("string"),i),$l.soliditySHA3(n,r)])}const o0=ji(Jz),Zz="walletUsername",W1="Addresses",Qz="AppVersion";function Hn(t){return t.errorMessage!==void 0}class eH{constructor(e){this.secret=e}async encrypt(e){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",n0(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=new TextEncoder,o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,s.encode(e)),a=16,u=o.slice(o.byteLength-a),l=o.slice(0,o.byteLength-a),d=new Uint8Array(u),p=new Uint8Array(l),y=new Uint8Array([...n,...d,...p]);return k1(y)}async decrypt(e){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");return new Promise((n,i)=>{(async function(){const s=await crypto.subtle.importKey("raw",n0(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),o=n0(e),a=o.slice(0,12),u=o.slice(12,28),l=o.slice(28),d=new Uint8Array([...l,...u]),p={name:"AES-GCM",iv:new Uint8Array(a)};try{const y=await window.crypto.subtle.decrypt(p,s,d),A=new TextDecoder;n(A.decode(y))}catch(y){i(y)}})()})}}class tH{constructor(e,r,n){this.linkAPIUrl=e,this.sessionId=r;const i=`${r}:${n}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(r=>fetch(`${this.linkAPIUrl}/events/${r.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(r=>console.error("Unabled to mark event as failed:",r))}async fetchUnseenEvents(){var e;const r=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(r.ok){const{events:n,error:i}=await r.json();if(i)throw new Error(`Check unseen events failed: ${i}`);const s=(e=n==null?void 0:n.filter(o=>o.event==="Web3Response").map(o=>({type:"Event",sessionId:this.sessionId,eventId:o.id,event:o.event,data:o.data})))!==null&&e!==void 0?e:[];return this.markUnseenEventsAsSeen(s),s}throw new Error(`Check unseen events failed: ${r.status}`)}}var To;(function(t){t[t.DISCONNECTED=0]="DISCONNECTED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED"})(To||(To={}));class rH{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,r=WebSocket){this.WebSocketClass=r,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((e,r)=>{var n;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(s){r(s);return}(n=this.connectionStateListener)===null||n===void 0||n.call(this,To.CONNECTING),i.onclose=s=>{var o;this.clearWebSocket(),r(new Error(`websocket error ${s.code}: ${s.reason}`)),(o=this.connectionStateListener)===null||o===void 0||o.call(this,To.DISCONNECTED)},i.onopen=s=>{var o;e(),(o=this.connectionStateListener)===null||o===void 0||o.call(this,To.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(u=>this.sendData(u)),this.pendingData=[])},i.onmessage=s=>{var o,a;if(s.data==="h")(o=this.incomingDataListener)===null||o===void 0||o.call(this,{type:"Heartbeat"});else try{const u=JSON.parse(s.data);(a=this.incomingDataListener)===null||a===void 0||a.call(this,u)}catch{}}})}disconnect(){var e;const{webSocket:r}=this;if(r){this.clearWebSocket(),(e=this.connectionStateListener)===null||e===void 0||e.call(this,To.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{r.close()}catch{}}}sendData(e){const{webSocket:r}=this;if(!r){this.pendingData.push(e),this.connect();return}r.send(e)}clearWebSocket(){const{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}const R5=1e4,nH=6e4;class iH{constructor({session:e,linkAPIUrl:r,listener:n}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=Co(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=s=>{if(!s)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",a=>s.JsonRpcUrl&&this.handleChainUpdated(a,s.JsonRpcUrl)]]).forEach((a,u)=>{const l=s[u];l!==void 0&&a(l)})},this.handleDestroyed=s=>{var o;s==="1"&&((o=this.listener)===null||o===void 0||o.resetAndReload())},this.handleAccountUpdated=async s=>{var o;const a=await this.cipher.decrypt(s);(o=this.listener)===null||o===void 0||o.accountUpdated(a)},this.handleMetadataUpdated=async(s,o)=>{var a;const u=await this.cipher.decrypt(o);(a=this.listener)===null||a===void 0||a.metadataUpdated(s,u)},this.handleWalletUsernameUpdated=async s=>{this.handleMetadataUpdated(Zz,s)},this.handleAppVersionUpdated=async s=>{this.handleMetadataUpdated(Qz,s)},this.handleChainUpdated=async(s,o)=>{var a;const u=await this.cipher.decrypt(s),l=await this.cipher.decrypt(o);(a=this.listener)===null||a===void 0||a.chainUpdated(u,l)},this.session=e,this.cipher=new eH(e.secret),this.listener=n;const i=new rH(`${r}/rpc`,WebSocket);i.setConnectionStateListener(async s=>{let o=!1;switch(s){case To.DISCONNECTED:if(!this.destroyed){const a=async()=>{await new Promise(u=>setTimeout(u,5e3)),this.destroyed||i.connect().catch(()=>{a()})};a()}break;case To.CONNECTED:o=await this.handleConnected(),this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},R5),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case To.CONNECTING:break}this.connected!==o&&(this.connected=o)}),i.setIncomingDataListener(s=>{var o;switch(s.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const a=s.type==="IsLinkedOK"?s.linked:void 0;this.linked=a||s.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(s.metadata);break}case"Event":{this.handleIncomingEvent(s);break}}s.id!==void 0&&((o=this.requestResolutions.get(s.id))===null||o===void 0||o(s))}),this.ws=i,this.http=new tH(r,e.id,e.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:Co(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.ws.disconnect(),this.listener=void 0)}get connected(){return this._connected}set connected(e){this._connected=e}get linked(){return this._linked}set linked(e){var r,n;this._linked=e,e&&((r=this.onceLinked)===null||r===void 0||r.call(this)),(n=this.listener)===null||n===void 0||n.linkedUpdated(e)}setOnceLinked(e){return new Promise(r=>{this.linked?e().then(r):this.onceLinked=()=>{e().then(r),this.onceLinked=void 0}})}async handleIncomingEvent(e){var r;if(e.type!=="Event"||e.event!=="Web3Response")return;const n=await this.cipher.decrypt(e.data),i=JSON.parse(n);if(i.type!=="WEB3_RESPONSE")return;const{id:s,response:o}=i;(r=this.listener)===null||r===void 0||r.handleWeb3ResponseMessage(s,o)}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(r=>this.handleIncomingEvent(r))}async publishEvent(e,r,n=!1){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),s={type:"PublishEvent",id:Co(this.nextReqId++),sessionId:this.session.id,event:e,data:i,callWebhook:n};return this.setOnceLinked(async()=>{const o=await this.makeRequest(s);if(o.type==="Fail")throw new Error(o.error||"failed to publish event");return o.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>R5*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(e,r={timeout:nH}){const n=e.id;this.sendData(e);let i;return Promise.race([new Promise((s,o)=>{i=window.setTimeout(()=>{o(new Error(`request ${n} timed out`))},r.timeout)}),new Promise(s=>{this.requestResolutions.set(n,o=>{clearTimeout(i),s(o),this.requestResolutions.delete(n)})})])}async handleConnected(){return(await this.makeRequest({type:"HostSession",id:Co(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type==="Fail"?!1:(this.sendData({type:"IsLinked",id:Co(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:Co(this.nextReqId++),sessionId:this.session.id}),!0)}}class sH{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,r=f5(e.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),e}}const D5="session:id",O5="session:secret",N5="session:linked";class Du{constructor(e,r,n,i=!1){this.storage=e,this.id=r,this.secret=n,this.key=NP(Pg(`${r}, ${n} WalletLink`)),this._linked=!!i}static create(e){const r=lc(16),n=lc(32);return new Du(e,r,n).save()}static load(e){const r=e.getItem(D5),n=e.getItem(N5),i=e.getItem(O5);return r&&i?new Du(e,r,i,n==="1"):null}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this.storage.setItem(D5,this.id),this.storage.setItem(O5,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(N5,this._linked?"1":"0")}}function oH(){try{return window.frameElement!==null}catch{return!1}}function aH(){try{return oH()&&window.top?window.top.location:window.location}catch{return window.location}}function cH(){var t;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((t=window==null?void 0:window.navigator)===null||t===void 0?void 0:t.userAgent)}function L5(){var t,e;return(e=(t=window==null?void 0:window.matchMedia)===null||t===void 0?void 0:t.call(window,"(prefers-color-scheme: dark)").matches)!==null&&e!==void 0?e:!1}const uH='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';function k5(){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(uH)),document.documentElement.appendChild(t)}function B5(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=B5(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function Fl(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=B5(t))&&(n&&(n+=" "),n+=e);return n}var a0,Vr,$5,dc,F5,j5,K1,U5,V1,G1,Y1,jl={},q5=[],fH=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J1=Array.isArray;function ma(t,e){for(var r in e)t[r]=e[r];return t}function X1(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Or(t,e,r){var n,i,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?a0.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return c0(t,o,n,i,null)}function c0(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++$5,__i:-1,__u:0};return i==null&&Vr.vnode!=null&&Vr.vnode(s),s}function Ul(t){return t.children}function u0(t,e){this.props=t,this.context=e}function Ou(t,e){if(e==null)return t.__?Ou(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?Ou(t):null}function z5(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return z5(t)}}function H5(t){(!t.__d&&(t.__d=!0)&&dc.push(t)&&!f0.__r++||F5!==Vr.debounceRendering)&&((F5=Vr.debounceRendering)||j5)(f0)}function f0(){var t,e,r,n,i,s,o,a;for(dc.sort(K1);t=dc.shift();)t.__d&&(e=dc.length,n=void 0,s=(i=(r=t).__v).__e,o=[],a=[],r.__P&&((n=ma({},i)).__v=i.__v+1,Vr.vnode&&Vr.vnode(n),Z1(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,o,s??Ou(i),!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,Y5(o,n,a),n.__e!=s&&z5(n)),dc.length>e&&dc.sort(K1));f0.__r=0}function W5(t,e,r,n,i,s,o,a,u,l,d){var p,y,A,P,O,D,k=n&&n.__k||q5,B=e.length;for(u=lH(r,e,k,u),p=0;p<B;p++)(A=r.__k[p])!=null&&(y=A.__i===-1?jl:k[A.__i]||jl,A.__i=p,D=Z1(t,A,y,i,s,o,a,u,l,d),P=A.__e,A.ref&&y.ref!=A.ref&&(y.ref&&Q1(y.ref,null,A),d.push(A.ref,A.__c||P,A)),O==null&&P!=null&&(O=P),4&A.__u||y.__k===A.__k?u=K5(A,u,t):typeof A.type=="function"&&D!==void 0?u=D:P&&(u=P.nextSibling),A.__u&=-7);return r.__e=O,u}function lH(t,e,r,n){var i,s,o,a,u,l=e.length,d=r.length,p=d,y=0;for(t.__k=[],i=0;i<l;i++)(s=e[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(a=i+y,(s=t.__k[i]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?c0(null,s,null,null,null):J1(s)?c0(Ul,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?c0(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,o=null,(u=s.__i=hH(s,r,a,p))!==-1&&(p--,(o=r[u])&&(o.__u|=2)),o==null||o.__v===null?(u==-1&&y--,typeof s.type!="function"&&(s.__u|=4)):u!==a&&(u==a-1?y--:u==a+1?y++:(u>a?y--:y++,s.__u|=4))):s=t.__k[i]=null;if(p)for(i=0;i<d;i++)(o=r[i])!=null&&!(2&o.__u)&&(o.__e==n&&(n=Ou(o)),J5(o,o));return n}function K5(t,e,r){var n,i;if(typeof t.type=="function"){for(n=t.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=t,e=K5(n[i],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=Ou(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function hH(t,e,r,n){var i=t.key,s=t.type,o=r-1,a=r+1,u=e[r];if(u===null||u&&i==u.key&&s===u.type&&!(2&u.__u))return r;if((typeof s!="function"||s===Ul||i)&&n>(u!=null&&!(2&u.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((u=e[o])&&!(2&u.__u)&&i==u.key&&s===u.type)return o;o--}if(a<e.length){if((u=e[a])&&!(2&u.__u)&&i==u.key&&s===u.type)return a;a++}}return-1}function V5(t,e,r){e[0]==="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||fH.test(e)?r:r+"px"}function l0(t,e,r,n,i){var s;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||V5(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||V5(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(U5,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=r,r?n?r.u=n.u:(r.u=V1,t.addEventListener(e,s?Y1:G1,s)):t.removeEventListener(e,s?Y1:G1,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function G5(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=V1++;else if(e.t<r.u)return;return r(Vr.event?Vr.event(e):e)}}}function Z1(t,e,r,n,i,s,o,a,u,l){var d,p,y,A,P,O,D,k,B,q,j,H,J,T,z,ue,_e,G=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),s=[a=e.__e=r.__e]),(d=Vr.__b)&&d(e);e:if(typeof G=="function")try{if(k=e.props,B="prototype"in G&&G.prototype.render,q=(d=G.contextType)&&n[d.__c],j=d?q?q.props.value:d.__:n,r.__c?D=(p=e.__c=r.__c).__=p.__E:(B?e.__c=p=new G(k,j):(e.__c=p=new u0(k,j),p.constructor=G,p.render=pH),q&&q.sub(p),p.props=k,p.state||(p.state={}),p.context=j,p.__n=n,y=p.__d=!0,p.__h=[],p._sb=[]),B&&p.__s==null&&(p.__s=p.state),B&&G.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ma({},p.__s)),ma(p.__s,G.getDerivedStateFromProps(k,p.__s))),A=p.props,P=p.state,p.__v=e,y)B&&G.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),B&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(B&&G.getDerivedStateFromProps==null&&k!==A&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(k,j),!p.__e&&(p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(k,p.__s,j)===!1||e.__v===r.__v)){for(e.__v!==r.__v&&(p.props=k,p.state=p.__s,p.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(E){E&&(E.__=e)}),H=0;H<p._sb.length;H++)p.__h.push(p._sb[H]);p._sb=[],p.__h.length&&o.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(k,p.__s,j),B&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(A,P,O)})}if(p.context=j,p.props=k,p.__P=t,p.__e=!1,J=Vr.__r,T=0,B){for(p.state=p.__s,p.__d=!1,J&&J(e),d=p.render(p.props,p.state,p.context),z=0;z<p._sb.length;z++)p.__h.push(p._sb[z]);p._sb=[]}else do p.__d=!1,J&&J(e),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++T<25);p.state=p.__s,p.getChildContext!=null&&(n=ma(ma({},n),p.getChildContext())),B&&!y&&p.getSnapshotBeforeUpdate!=null&&(O=p.getSnapshotBeforeUpdate(A,P)),a=W5(t,J1(ue=d!=null&&d.type===Ul&&d.key==null?d.props.children:d)?ue:[ue],e,r,n,i,s,o,a,u,l),p.base=e.__e,e.__u&=-161,p.__h.length&&o.push(p),D&&(p.__E=p.__=null)}catch(E){if(e.__v=null,u||s!=null)if(E.then){for(e.__u|=u?160:128;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(_e=s.length;_e--;)X1(s[_e]);else e.__e=r.__e,e.__k=r.__k;Vr.__e(E,e,r)}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=dH(r.__e,e,r,n,i,s,o,u,l);return(d=Vr.diffed)&&d(e),128&e.__u?void 0:a}function Y5(t,e,r){for(var n=0;n<r.length;n++)Q1(r[n],r[++n],r[++n]);Vr.__c&&Vr.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){Vr.__e(s,i.__v)}})}function dH(t,e,r,n,i,s,o,a,u){var l,d,p,y,A,P,O,D=r.props,k=e.props,B=e.type;if(B==="svg"?i="http://www.w3.org/2000/svg":B==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((A=s[l])&&"setAttribute"in A==!!B&&(B?A.localName===B:A.nodeType===3)){t=A,s[l]=null;break}}if(t==null){if(B===null)return document.createTextNode(k);t=document.createElementNS(i,B,k.is&&k),a&&(Vr.__m&&Vr.__m(e,s),a=!1),s=null}if(B===null)D===k||a&&t.data===k||(t.data=k);else{if(s=s&&a0.call(t.childNodes),D=r.props||jl,!a&&s!=null)for(D={},l=0;l<t.attributes.length;l++)D[(A=t.attributes[l]).name]=A.value;for(l in D)if(A=D[l],l!="children"){if(l=="dangerouslySetInnerHTML")p=A;else if(!(l in k)){if(l=="value"&&"defaultValue"in k||l=="checked"&&"defaultChecked"in k)continue;l0(t,l,null,A,i)}}for(l in k)A=k[l],l=="children"?y=A:l=="dangerouslySetInnerHTML"?d=A:l=="value"?P=A:l=="checked"?O=A:a&&typeof A!="function"||D[l]===A||l0(t,l,A,D[l],i);if(d)a||p&&(d.__html===p.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(p&&(t.innerHTML=""),W5(t,J1(y)?y:[y],e,r,n,B==="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:r.__k&&Ou(r,0),a,u),s!=null)for(l=s.length;l--;)X1(s[l]);a||(l="value",B==="progress"&&P==null?t.removeAttribute("value"):P!==void 0&&(P!==t[l]||B==="progress"&&!P||B==="option"&&P!==D[l])&&l0(t,l,P,D[l],i),l="checked",O!==void 0&&O!==t[l]&&l0(t,l,O,D[l],i))}return t}function Q1(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(i){Vr.__e(i,r)}}function J5(t,e,r){var n,i;if(Vr.unmount&&Vr.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||Q1(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){Vr.__e(s,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&J5(n[i],e,r||typeof t.type!="function");r||X1(t.__e),t.__c=t.__=t.__e=void 0}function pH(t,e,r){return this.constructor(t,r)}function ev(t,e,r){var n,i,s,o;e===document&&(e=document.documentElement),Vr.__&&Vr.__(t,e),i=(n=typeof r=="function")?null:e.__k,s=[],o=[],Z1(e,t=(!n&&r||e).__k=Or(Ul,null,[t]),i||jl,jl,e.namespaceURI,!n&&r?[r]:i?null:e.firstChild?a0.call(e.childNodes):null,s,!n&&r?r:i?i.__e:e.firstChild,n,o),Y5(s,t,o)}a0=q5.slice,Vr={__e:function(t,e,r,n){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},$5=0,u0.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ma({},this.state),typeof t=="function"&&(t=t(ma({},r),this.props)),t&&ma(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),H5(this))},u0.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),H5(this))},u0.prototype.render=Ul,dc=[],j5=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,K1=function(t,e){return t.__v.__b-e.__v.__b},f0.__r=0,U5=/(PointerCapture)$|Capture$/i,V1=0,G1=G5(!1),Y1=G5(!0);var h0,un,tv,X5,rv=0,Z5=[],yn=Vr,Q5=yn.__b,e4=yn.__r,t4=yn.diffed,r4=yn.__c,n4=yn.unmount,i4=yn.__;function s4(t,e){yn.__h&&yn.__h(un,t,rv||e),rv=0;var r=un.__H||(un.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function o4(t){return rv=1,gH(c4,t)}function gH(t,e,r){var n=s4(h0++,2);if(n.t=t,!n.__c&&(n.__=[c4(void 0,e),function(a){var u=n.__N?n.__N[0]:n.__[0],l=n.t(u,a);u!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=un,!un.u)){var i=function(a,u,l){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(y){return!!y.__c});if(d.every(function(y){return!y.__N}))return!s||s.call(this,a,u,l);var p=n.__c.props!==a;return d.forEach(function(y){if(y.__N){var A=y.__[0];y.__=y.__N,y.__N=void 0,A!==y.__[0]&&(p=!0)}}),s&&s.call(this,a,u,l)||p};un.u=!0;var s=un.shouldComponentUpdate,o=un.componentWillUpdate;un.componentWillUpdate=function(a,u,l){if(this.__e){var d=s;s=void 0,i(a,u,l),s=d}o&&o.call(this,a,u,l)},un.shouldComponentUpdate=i}return n.__N||n.__}function mH(t,e){var r=s4(h0++,3);!yn.__s&&yH(r.__H,e)&&(r.__=t,r.i=e,un.__H.__h.push(r))}function vH(){for(var t;t=Z5.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(d0),t.__H.__h.forEach(nv),t.__H.__h=[]}catch(e){t.__H.__h=[],yn.__e(e,t.__v)}}yn.__b=function(t){un=null,Q5&&Q5(t)},yn.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),i4&&i4(t,e)},yn.__r=function(t){e4&&e4(t),h0=0;var e=(un=t.__c).__H;e&&(tv===un?(e.__h=[],un.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.i=r.__N=void 0})):(e.__h.forEach(d0),e.__h.forEach(nv),e.__h=[],h0=0)),tv=un},yn.diffed=function(t){t4&&t4(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Z5.push(e)!==1&&X5===yn.requestAnimationFrame||((X5=yn.requestAnimationFrame)||bH)(vH)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.i=void 0})),tv=un=null},yn.__c=function(t,e){e.some(function(r){try{r.__h.forEach(d0),r.__h=r.__h.filter(function(n){return!n.__||nv(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],yn.__e(n,r.__v)}}),r4&&r4(t,e)},yn.unmount=function(t){n4&&n4(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{d0(n)}catch(i){e=i}}),r.__H=void 0,e&&yn.__e(e,r.__v))};var a4=typeof requestAnimationFrame=="function";function bH(t){var e,r=function(){clearTimeout(n),a4&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);a4&&(e=requestAnimationFrame(r))}function d0(t){var e=un,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),un=e}function nv(t){var e=un;t.__c=t.__(),un=e}function yH(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function c4(t,e){return typeof e=="function"?e(t):e}const wH=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}",xH="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",_H="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class EH{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=L5()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){const r=this.nextItemKey++;return this.items.set(r,e),this.render(),()=>{this.items.delete(r),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&ev(Or("div",null,Or(u4,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,r])=>Or(SH,Object.assign({},r,{key:e}))))),this.root)}}const u4=t=>Or("div",{class:Fl("-cbwsdk-snackbar-container")},Or("style",null,wH),Or("div",{class:"-cbwsdk-snackbar"},t.children)),SH=({autoExpand:t,message:e,menuItems:r})=>{const[n,i]=o4(!0),[s,o]=o4(t??!1);mH(()=>{const u=[window.setTimeout(()=>{i(!1)},1),window.setTimeout(()=>{o(!0)},1e4)];return()=>{u.forEach(window.clearTimeout)}});const a=()=>{o(!s)};return Or("div",{class:Fl("-cbwsdk-snackbar-instance",n&&"-cbwsdk-snackbar-instance-hidden",s&&"-cbwsdk-snackbar-instance-expanded")},Or("div",{class:"-cbwsdk-snackbar-instance-header",onClick:a},Or("img",{src:xH,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",Or("div",{class:"-cbwsdk-snackbar-instance-header-message"},e),Or("div",{class:"-gear-container"},!s&&Or("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Or("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),Or("img",{src:_H,class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&Or("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map((u,l)=>Or("div",{class:Fl("-cbwsdk-snackbar-instance-menu-item",u.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:u.onClick,key:l},Or("svg",{width:u.svgWidth,height:u.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Or("path",{"fill-rule":u.defaultFillRule,"clip-rule":u.defaultClipRule,d:u.path,fill:"#AAAAAA"})),Or("span",{class:Fl("-cbwsdk-snackbar-instance-menu-item-info",u.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},u.info)))))};class AH{constructor(){this.attached=!1,this.snackbar=new EH}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",e.appendChild(r),this.snackbar.attach(r),this.attached=!0,k5()}showConnecting(e){let r;return e.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:r={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(r)}}const PH=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";class MH{constructor(){this.root=null,this.darkMode=L5()}attach(){const e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),k5()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&(ev(null,this.root),e&&ev(Or(IH,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}const IH=({title:t,buttonText:e,darkMode:r,onButtonClick:n,onDismiss:i})=>{const s=r?"dark":"light";return Or(u4,{darkMode:r},Or("div",{class:"-cbwsdk-redirect-dialog"},Or("style",null,PH),Or("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),Or("div",{class:Fl("-cbwsdk-redirect-dialog-box",s)},Or("p",null,t),Or("button",{onClick:n},e))))},CH="https://keys.coinbase.com/connect",f4="https://www.walletlink.org",TH="https://go.cb-w.com/walletlink";class l4{constructor(){this.attached=!1,this.redirectDialog=new MH}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){const r=new URL(TH);r.searchParams.append("redirect_url",aH().href),e&&r.searchParams.append("wl_url",e);const n=document.createElement("a");n.target="cbw-opener",n.href=r.href,n.rel="noreferrer noopener",n.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}}class Ro{constructor(e){this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=cH(),this.linkedUpdated=s=>{this.isLinked=s;const o=this.storage.getItem(W1);if(s&&(this._session.linked=s),this.isUnlinkedErrorState=!1,o){const a=o.split(" "),u=this.storage.getItem("IsStandaloneSigning")==="true";a[0]!==""&&!s&&this._session.linked&&!u&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(s,o)=>{this.storage.setItem(s,o)},this.chainUpdated=(s,o)=>{this.chainCallbackParams.chainId===s&&this.chainCallbackParams.jsonRpcUrl===o||(this.chainCallbackParams={chainId:s,jsonRpcUrl:o},this.chainCallback&&this.chainCallback(o,Number.parseInt(s,10)))},this.accountUpdated=s=>{this.accountsCallback&&this.accountsCallback([s]),Ro.accountRequestCallbackIds.size>0&&(Array.from(Ro.accountRequestCallbackIds.values()).forEach(o=>{this.invokeCallback(o,{method:"requestEthereumAccounts",result:[s]})}),Ro.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.metadata=e.metadata,this.accountsCallback=e.accountsCallback,this.chainCallback=e.chainCallback;const{session:r,ui:n,connection:i}=this.subscribe();this._session=r,this.connection=i,this.relayEventManager=new sH,this.ui=n,this.ui.attach()}subscribe(){const e=Du.load(this.storage)||Du.create(this.storage),{linkAPIUrl:r}=this,n=new iH({session:e,linkAPIUrl:r,listener:this}),i=this.isMobileWeb?new l4:new AH;return n.connect(),{session:e,ui:i,connection:n}}resetAndReload(){this.connection.destroy().then(()=>{const e=Du.load(this.storage);(e==null?void 0:e.id)===this._session.id&&Ys.clearAll(),document.location.reload()}).catch(e=>{})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:Js(e.weiValue),data:Nl(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?Js(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?Js(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?Js(e.gasPriceInWei):null,gasLimit:e.gasLimit?Js(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:Js(e.weiValue),data:Nl(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?Js(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?Js(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?Js(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?Js(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,r){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:Nl(e,!0),chainId:r}})}getWalletLinkSession(){return this._session}sendRequest(e){let r=null;const n=lc(8),i=s=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,e.method,s),r==null||r()};return new Promise((s,o)=>{r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(n,a=>{if(r==null||r(),Hn(a))return o(new Error(a.errorMessage));s(a)}),this.publishWeb3RequestEvent(n,e)})}publishWeb3RequestEvent(e,r){const n={type:"WEB3_REQUEST",id:e,request:r};this.publishEvent("Web3Request",n,!0).then(i=>{}).catch(i=>{this.handleWeb3ResponseMessage(n.id,{method:r.method,errorMessage:i.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(r.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof l4)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(e){const r={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",r,!1).then()}publishEvent(e,r,n){return this.connection.publishEvent(e,r,n)}handleWeb3ResponseMessage(e,r){if(r.method==="requestEthereumAccounts"){Ro.accountRequestCallbackIds.forEach(n=>this.invokeCallback(n,r)),Ro.accountRequestCallbackIds.clear();return}this.invokeCallback(e,r)}handleErrorResponse(e,r,n){var i;const s=(i=n==null?void 0:n.message)!==null&&i!==void 0?i:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:r,errorMessage:s})}invokeCallback(e,r){const n=this.relayEventManager.callbacks.get(e);n&&(n(r),this.relayEventManager.callbacks.delete(e))}requestEthereumAccounts(){const{appName:e,appLogoUrl:r}=this.metadata,n={method:"requestEthereumAccounts",params:{appName:e,appLogoUrl:r}},i=lc(8);return new Promise((s,o)=>{this.relayEventManager.callbacks.set(i,a=>{if(Hn(a))return o(new Error(a.errorMessage));s(a)}),Ro.accountRequestCallbackIds.add(i),this.publishWeb3RequestEvent(i,n)})}watchAsset(e,r,n,i,s,o){const a={method:"watchAsset",params:{type:e,options:{address:r,symbol:n,decimals:i,image:s},chainId:o}};let u=null;const l=lc(8),d=p=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,p),u==null||u()};return u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}),new Promise((p,y)=>{this.relayEventManager.callbacks.set(l,A=>{if(u==null||u(),Hn(A))return y(new Error(A.errorMessage));p(A)}),this.publishWeb3RequestEvent(l,a)})}addEthereumChain(e,r,n,i,s,o){const a={method:"addEthereumChain",params:{chainId:e,rpcUrls:r,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:o}};let u=null;const l=lc(8),d=p=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,p),u==null||u()};return u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}),new Promise((p,y)=>{this.relayEventManager.callbacks.set(l,A=>{if(u==null||u(),Hn(A))return y(new Error(A.errorMessage));p(A)}),this.publishWeb3RequestEvent(l,a)})}switchEthereumChain(e,r){const n={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:r})};let i=null;const s=lc(8),o=a=>{this.publishWeb3RequestCanceledEvent(s),this.handleErrorResponse(s,n.method,a),i==null||i()};return i=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:o,onResetConnection:this.resetAndReload}),new Promise((a,u)=>{this.relayEventManager.callbacks.set(s,l=>{if(i==null||i(),Hn(l)&&l.errorCode)return u(Sr.provider.custom({code:l.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(Hn(l))return u(new Error(l.errorMessage));a(l)}),this.publishWeb3RequestEvent(s,n)})}}Ro.accountRequestCallbackIds=new Set;const h4="DefaultChainId",d4="DefaultJsonRpcUrl";class p4{constructor(e){this._relay=null,this._addresses=[],this.metadata=e.metadata,this._storage=new Ys("walletlink",f4),this.callback=e.callback||null;const r=this._storage.getItem(W1);if(r){const n=r.split(" ");n[0]!==""&&(this._addresses=n.map(i=>ga(i)))}this.initializeRelay()}getSession(){const e=this.initializeRelay(),{id:r,secret:n}=e.getWalletLinkSession();return{id:r,secret:n}}async handshake(){await this._eth_requestAccounts()}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(d4))!==null&&e!==void 0?e:void 0}set jsonRpcUrl(e){this._storage.setItem(d4,e)}updateProviderInfo(e,r){var n;this.jsonRpcUrl=e;const i=this.getChainId();this._storage.setItem(h4,r.toString(10)),Ll(r)!==i&&((n=this.callback)===null||n===void 0||n.call(this,"chainChanged",pa(r)))}async watchAsset(e){const r=Array.isArray(e)?e[0]:e;if(!r.type)throw Sr.rpc.invalidParams("Type is required");if((r==null?void 0:r.type)!=="ERC20")throw Sr.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);if(!(r!=null&&r.options))throw Sr.rpc.invalidParams("Options are required");if(!(r!=null&&r.options.address))throw Sr.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:i,symbol:s,image:o,decimals:a}=r.options,l=await this.initializeRelay().watchAsset(r.type,i,s,a,o,n==null?void 0:n.toString());return Hn(l)?!1:!!l.result}async addEthereumChain(e){var r,n;const i=e[0];if(((r=i.rpcUrls)===null||r===void 0?void 0:r.length)===0)throw Sr.rpc.invalidParams("please pass in at least 1 rpcUrl");if(!i.chainName||i.chainName.trim()==="")throw Sr.rpc.invalidParams("chainName is a required field");if(!i.nativeCurrency)throw Sr.rpc.invalidParams("nativeCurrency is a required field");const s=Number.parseInt(i.chainId,16);if(s===this.getChainId())return!1;const o=this.initializeRelay(),{rpcUrls:a=[],blockExplorerUrls:u=[],chainName:l,iconUrls:d=[],nativeCurrency:p}=i,y=await o.addEthereumChain(s.toString(),a,d,u,l,p);if(Hn(y))return!1;if(((n=y.result)===null||n===void 0?void 0:n.isApproved)===!0)return this.updateProviderInfo(a[0],s),null;throw Sr.rpc.internal("unable to add ethereum chain")}async switchEthereumChain(e){const r=e[0],n=Number.parseInt(r.chainId,16),s=await this.initializeRelay().switchEthereumChain(n.toString(10),this.selectedAddress||void 0);if(Hn(s))throw s;const o=s.result;return o.isApproved&&o.rpcUrl.length>0&&this.updateProviderInfo(o.rpcUrl,n),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(e,r){var n;if(!Array.isArray(e))throw new Error("addresses is not an array");const i=e.map(s=>ga(s));JSON.stringify(i)!==JSON.stringify(this._addresses)&&(this._addresses=i,(n=this.callback)===null||n===void 0||n.call(this,"accountsChanged",i),this._storage.setItem(W1,i.join(" ")))}async request(e){const r=e.params||[];switch(e.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return pa(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(e);case"personal_sign":return this.personalSign(e);case"eth_signTransaction":return this._eth_signTransaction(r);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(r);case"eth_sendTransaction":return this._eth_sendTransaction(r);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(e);case"wallet_addEthereumChain":return this.addEthereumChain(r);case"wallet_switchEthereumChain":return this.switchEthereumChain(r);case"wallet_watchAsset":return this.watchAsset(r);default:if(!this.jsonRpcUrl)throw Sr.rpc.internal("No RPC URL set for chain");return g5(e,this.jsonRpcUrl)}}_ensureKnownAddress(e){const r=ga(e);if(!this._addresses.map(i=>ga(i)).includes(r))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const r=e.from?ga(e.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=e.to?ga(e.to):null,i=e.value!=null?kl(e.value):BigInt(0),s=e.data?j1(e.data):Buffer.alloc(0),o=e.nonce!=null?Ll(e.nonce):null,a=e.gasPrice!=null?kl(e.gasPrice):null,u=e.maxFeePerGas!=null?kl(e.maxFeePerGas):null,l=e.maxPriorityFeePerGas!=null?kl(e.maxPriorityFeePerGas):null,d=e.gas!=null?kl(e.gas):null,p=e.chainId?Ll(e.chainId):this.getChainId();return{fromAddress:r,toAddress:n,weiValue:i,data:s,nonce:o,gasPriceInWei:a,maxFeePerGas:u,maxPriorityFeePerGas:l,gasLimit:d,chainId:p}}async ecRecover(e){const{method:r,params:n}=e;if(!Array.isArray(n))throw Sr.rpc.invalidParams();const s=await this.initializeRelay().sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:B1(n[0]),signature:B1(n[1]),addPrefix:r==="personal_ecRecover"}});if(Hn(s))throw s;return s.result}getChainId(){var e;return Number.parseInt((e=this._storage.getItem(h4))!==null&&e!==void 0?e:"1",10)}async _eth_requestAccounts(){var e,r;if(this._addresses.length>0)return(e=this.callback)===null||e===void 0||e.call(this,"connect",{chainId:pa(this.getChainId())}),this._addresses;const i=await this.initializeRelay().requestEthereumAccounts();if(Hn(i))throw i;if(!i.result)throw new Error("accounts received is empty");return this._setAddresses(i.result),(r=this.callback)===null||r===void 0||r.call(this,"connect",{chainId:pa(this.getChainId())}),this._addresses}async personalSign({params:e}){if(!Array.isArray(e))throw Sr.rpc.invalidParams();const r=e[1],n=e[0];this._ensureKnownAddress(r);const s=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:ga(r),message:B1(n),addPrefix:!0,typedDataJson:null}});if(Hn(s))throw s;return s.result}async _eth_signTransaction(e){const r=this._prepareTransactionParams(e[0]||{}),i=await this.initializeRelay().signEthereumTransaction(r);if(Hn(i))throw i;return i.result}async _eth_sendRawTransaction(e){const r=j1(e[0]),i=await this.initializeRelay().submitEthereumTransaction(r,this.getChainId());if(Hn(i))throw i;return i.result}async _eth_sendTransaction(e){const r=this._prepareTransactionParams(e[0]||{}),i=await this.initializeRelay().signAndSubmitEthereumTransaction(r);if(Hn(i))throw i;return i.result}async signTypedData(e){const{method:r,params:n}=e;if(!Array.isArray(n))throw Sr.rpc.invalidParams();const i=l=>{const d={eth_signTypedData_v1:o0.hashForSignTypedDataLegacy,eth_signTypedData_v3:o0.hashForSignTypedData_v3,eth_signTypedData_v4:o0.hashForSignTypedData_v4,eth_signTypedData:o0.hashForSignTypedData_v4};return Nl(d[r]({data:Ez(l)}),!0)},s=n[r==="eth_signTypedData_v1"?1:0],o=n[r==="eth_signTypedData_v1"?0:1];this._ensureKnownAddress(s);const u=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:ga(s),message:i(o),typedDataJson:JSON.stringify(o,null,2),addPrefix:!1}});if(Hn(u))throw u;return u.result}initializeRelay(){return this._relay||(this._relay=new Ro({linkAPIUrl:f4,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}const g4="SignerType",m4=new Ys("CBWSDK","SignerConfigurator");function RH(){return m4.getItem(g4)}function DH(t){m4.setItem(g4,t)}async function OH(t){const{communicator:e,metadata:r,handshakeRequest:n,callback:i}=t;LH(e,r,i).catch(()=>{});const s={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},t.preference),{handshakeRequest:n})},{data:o}=await e.postRequestAndWaitForResponse(s);return o}function NH(t){const{signerType:e,metadata:r,communicator:n,callback:i}=t;switch(e){case"scw":return new kz({metadata:r,callback:i,communicator:n});case"walletlink":return new p4({metadata:r,callback:i})}}async function LH(t,e,r){await t.onMessage(({event:i})=>i==="WalletLinkSessionRequest");const n=new p4({metadata:e,callback:r});t.postMessage({event:"WalletLinkUpdate",data:{session:n.getSession()}}),await n.handshake(),t.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}const kH=`Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`,BH=()=>{let t;return{getCrossOriginOpenerPolicy:()=>t===void 0?"undefined":t,checkCrossOriginOpenerPolicy:async()=>{if(typeof window>"u"){t="non-browser-env";return}try{const e=`${window.location.origin}${window.location.pathname}`,r=await fetch(e,{method:"HEAD"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=r.headers.get("Cross-Origin-Opener-Policy");t=n??"null",t==="same-origin"&&console.error(kH)}catch(e){console.error("Error checking Cross-Origin-Opener-Policy:",e.message),t="error"}}}},{checkCrossOriginOpenerPolicy:$H,getCrossOriginOpenerPolicy:FH}=BH(),v4=420,b4=540;function jH(t){const e=(window.innerWidth-v4)/2+window.screenX,r=(window.innerHeight-b4)/2+window.screenY;qH(t);const n=window.open(t,"Smart Wallet",`width=${v4}, height=${b4}, left=${e}, top=${r}`);if(n==null||n.focus(),!n)throw Sr.rpc.internal("Pop up window failed to open");return n}function UH(t){t&&!t.closed&&t.close()}function qH(t){const e={sdkName:p5,sdkVersion:Bl,origin:window.location.origin,coop:FH()};for(const[r,n]of Object.entries(e))t.searchParams.append(r,n.toString())}class zH{constructor({url:e=CH,metadata:r,preference:n}){this.popup=null,this.listeners=new Map,this.postMessage=async i=>{(await this.waitForPopupLoaded()).postMessage(i,this.url.origin)},this.postRequestAndWaitForResponse=async i=>{const s=this.onMessage(({requestId:o})=>o===i.id);return this.postMessage(i),await s},this.onMessage=async i=>new Promise((s,o)=>{const a=u=>{if(u.origin!==this.url.origin)return;const l=u.data;i(l)&&(s(l),window.removeEventListener("message",a),this.listeners.delete(a))};window.addEventListener("message",a),this.listeners.set(a,{reject:o})}),this.disconnect=()=>{UH(this.popup),this.popup=null,this.listeners.forEach(({reject:i},s)=>{i(Sr.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",s)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=jH(this.url),this.onMessage(({event:i})=>i==="PopupUnload").then(this.disconnect).catch(()=>{}),this.onMessage(({event:i})=>i==="PopupLoaded").then(i=>{this.postMessage({requestId:i.id,data:{version:Bl,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw Sr.rpc.internal();return this.popup})),this.url=new URL(e),this.metadata=r,this.preference=n}}function HH(t){const e=bz(WH(t),{shouldIncludeStack:!0}),r=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return r.searchParams.set("version",Bl),r.searchParams.set("code",e.code.toString()),r.searchParams.set("message",e.message),Object.assign(Object.assign({},e),{docUrl:r.href})}function WH(t){var e;if(typeof t=="string")return{message:t,code:cn.rpc.internal};if(Hn(t)){const r=t.errorMessage,n=(e=t.errorCode)!==null&&e!==void 0?e:r.match(/(denied|rejected)/i)?cn.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},t),{message:r,code:n,data:{method:t.method}})}return t}var y4={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,d){this.fn=u,this.context=l,this.once=d||!1}function s(u,l,d,p,y){if(typeof d!="function")throw new TypeError("The listener must be a function");var A=new i(d,p||u,y),P=r?r+l:l;return u._events[P]?u._events[P].fn?u._events[P]=[u._events[P],A]:u._events[P].push(A):(u._events[P]=A,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],d,p;if(this._eventsCount===0)return l;for(p in d=this._events)e.call(d,p)&&l.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},a.prototype.listeners=function(l){var d=r?r+l:l,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,A=p.length,P=new Array(A);y<A;y++)P[y]=p[y].fn;return P},a.prototype.listenerCount=function(l){var d=r?r+l:l,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(l,d,p,y,A,P){var O=r?r+l:l;if(!this._events[O])return!1;var D=this._events[O],k=arguments.length,B,q;if(D.fn){switch(D.once&&this.removeListener(l,D.fn,void 0,!0),k){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,d),!0;case 3:return D.fn.call(D.context,d,p),!0;case 4:return D.fn.call(D.context,d,p,y),!0;case 5:return D.fn.call(D.context,d,p,y,A),!0;case 6:return D.fn.call(D.context,d,p,y,A,P),!0}for(q=1,B=new Array(k-1);q<k;q++)B[q-1]=arguments[q];D.fn.apply(D.context,B)}else{var j=D.length,H;for(q=0;q<j;q++)switch(D[q].once&&this.removeListener(l,D[q].fn,void 0,!0),k){case 1:D[q].fn.call(D[q].context);break;case 2:D[q].fn.call(D[q].context,d);break;case 3:D[q].fn.call(D[q].context,d,p);break;case 4:D[q].fn.call(D[q].context,d,p,y);break;default:if(!B)for(H=1,B=new Array(k-1);H<k;H++)B[H-1]=arguments[H];D[q].fn.apply(D[q].context,B)}}return!0},a.prototype.on=function(l,d,p){return s(this,l,d,p,!1)},a.prototype.once=function(l,d,p){return s(this,l,d,p,!0)},a.prototype.removeListener=function(l,d,p,y){var A=r?r+l:l;if(!this._events[A])return this;if(!d)return o(this,A),this;var P=this._events[A];if(P.fn)P.fn===d&&(!y||P.once)&&(!p||P.context===p)&&o(this,A);else{for(var O=0,D=[],k=P.length;O<k;O++)(P[O].fn!==d||y&&!P[O].once||p&&P[O].context!==p)&&D.push(P[O]);D.length?this._events[A]=D.length===1?D[0]:D:o(this,A)}return this},a.prototype.removeAllListeners=function(l){var d;return l?(d=r?r+l:l,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(y4);var KH=y4.exports;const VH=ji(KH);class GH extends VH{}var YH=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class JH extends GH{constructor(e){var{metadata:r}=e,n=e.preference,{keysUrl:i}=n,s=YH(n,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=r,this.preference=s,this.communicator=new zH({url:i,metadata:r,preference:s});const o=RH();o&&(this.signer=this.initSigner(o))}async request(e){try{if(Lz(e),!this.signer)switch(e.method){case"eth_requestAccounts":{const r=await this.requestSignerSelection(e),n=this.initSigner(r);await n.handshake(e),this.signer=n,DH(r);break}case"net_version":return 1;case"eth_chainId":return pa(1);default:throw Sr.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return this.signer.request(e)}catch(r){const{code:n}=r;return n===cn.provider.unauthorized&&this.disconnect(),Promise.reject(HH(r))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){var e;await((e=this.signer)===null||e===void 0?void 0:e.cleanup()),this.signer=null,Ys.clearAll(),this.emit("disconnect",Sr.provider.disconnected("User initiated disconnection"))}requestSignerSelection(e){return OH({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:e,callback:this.emit.bind(this)})}initSigner(e){return NH({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}function XH(t){if(t){if(!["all","smartWalletOnly","eoaOnly"].includes(t.options))throw new Error(`Invalid options: ${t.options}`);if(t.attribution&&t.attribution.auto!==void 0&&t.attribution.dataSuffix!==void 0)throw new Error("Attribution cannot contain both auto and dataSuffix properties")}}function ZH(t){var e;const r={metadata:t.metadata,preference:t.preference};return(e=Nz(r))!==null&&e!==void 0?e:new JH(r)}const QH={options:"all"};function eW(t){var e;new Ys("CBWSDK").setItem("VERSION",Bl),$H();const n={metadata:{appName:t.appName||"Dapp",appLogoUrl:t.appLogoUrl||"",appChainIds:t.appChainIds||[]},preference:Object.assign(QH,(e=t.preference)!==null&&e!==void 0?e:{})};XH(n.preference);let i=null;return{getProvider:()=>(i||(i=ZH(n)),i)}}function w4(t,e){return function(){return t.apply(e,arguments)}}const{toString:tW}=Object.prototype,{getPrototypeOf:iv}=Object,p0=(t=>e=>{const r=tW.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Es=t=>(t=t.toLowerCase(),e=>p0(e)===t),g0=t=>e=>typeof e===t,{isArray:Nu}=Array,ql=g0("undefined");function rW(t){return t!==null&&!ql(t)&&t.constructor!==null&&!ql(t.constructor)&&Oi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const x4=Es("ArrayBuffer");function nW(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&x4(t.buffer),e}const iW=g0("string"),Oi=g0("function"),_4=g0("number"),m0=t=>t!==null&&typeof t=="object",sW=t=>t===!0||t===!1,v0=t=>{if(p0(t)!=="object")return!1;const e=iv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},oW=Es("Date"),aW=Es("File"),cW=Es("Blob"),uW=Es("FileList"),fW=t=>m0(t)&&Oi(t.pipe),lW=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Oi(t.append)&&((e=p0(t))==="formdata"||e==="object"&&Oi(t.toString)&&t.toString()==="[object FormData]"))},hW=Es("URLSearchParams"),[dW,pW,gW,mW]=["ReadableStream","Request","Response","Headers"].map(Es),vW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zl(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Nu(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function E4(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const pc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,S4=t=>!ql(t)&&t!==pc;function sv(){const{caseless:t}=S4(this)&&this||{},e={},r=(n,i)=>{const s=t&&E4(e,i)||i;v0(e[s])&&v0(n)?e[s]=sv(e[s],n):v0(n)?e[s]=sv({},n):Nu(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&zl(arguments[n],r);return e}const bW=(t,e,r,{allOwnKeys:n}={})=>(zl(e,(i,s)=>{r&&Oi(i)?t[s]=w4(i,r):t[s]=i},{allOwnKeys:n}),t),yW=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),wW=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},xW=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&iv(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},_W=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},EW=t=>{if(!t)return null;if(Nu(t))return t;let e=t.length;if(!_4(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},SW=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&iv(Uint8Array)),AW=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},PW=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},MW=Es("HTMLFormElement"),IW=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),A4=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),CW=Es("RegExp"),P4=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};zl(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},TW=t=>{P4(t,(e,r)=>{if(Oi(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Oi(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},RW=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Nu(t)?n(t):n(String(t).split(e)),r},DW=()=>{},OW=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,ov="abcdefghijklmnopqrstuvwxyz",M4="0123456789",I4={DIGIT:M4,ALPHA:ov,ALPHA_DIGIT:ov+ov.toUpperCase()+M4},NW=(t=16,e=I4.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function LW(t){return!!(t&&Oi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const kW=t=>{const e=new Array(10),r=(n,i)=>{if(m0(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Nu(n)?[]:{};return zl(n,(o,a)=>{const u=r(o,i+1);!ql(u)&&(s[a]=u)}),e[i]=void 0,s}}return n};return r(t,0)},BW=Es("AsyncFunction"),$W=t=>t&&(m0(t)||Oi(t))&&Oi(t.then)&&Oi(t.catch),C4=((t,e)=>t?setImmediate:e?((r,n)=>(pc.addEventListener("message",({source:i,data:s})=>{i===pc&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),pc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Oi(pc.postMessage)),FW=typeof queueMicrotask<"u"?queueMicrotask.bind(pc):typeof process<"u"&&process.nextTick||C4,Oe={isArray:Nu,isArrayBuffer:x4,isBuffer:rW,isFormData:lW,isArrayBufferView:nW,isString:iW,isNumber:_4,isBoolean:sW,isObject:m0,isPlainObject:v0,isReadableStream:dW,isRequest:pW,isResponse:gW,isHeaders:mW,isUndefined:ql,isDate:oW,isFile:aW,isBlob:cW,isRegExp:CW,isFunction:Oi,isStream:fW,isURLSearchParams:hW,isTypedArray:SW,isFileList:uW,forEach:zl,merge:sv,extend:bW,trim:vW,stripBOM:yW,inherits:wW,toFlatObject:xW,kindOf:p0,kindOfTest:Es,endsWith:_W,toArray:EW,forEachEntry:AW,matchAll:PW,isHTMLForm:MW,hasOwnProperty:A4,hasOwnProp:A4,reduceDescriptors:P4,freezeMethods:TW,toObjectSet:RW,toCamelCase:IW,noop:DW,toFiniteNumber:OW,findKey:E4,global:pc,isContextDefined:S4,ALPHABET:I4,generateString:NW,isSpecCompliantForm:LW,toJSONObject:kW,isAsyncFn:BW,isThenable:$W,setImmediate:C4,asap:FW};function ar(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Oe.inherits(ar,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oe.toJSONObject(this.config),code:this.code,status:this.status}}});const T4=ar.prototype,R4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{R4[t]={value:t}}),Object.defineProperties(ar,R4),Object.defineProperty(T4,"isAxiosError",{value:!0}),ar.from=(t,e,r,n,i,s)=>{const o=Object.create(T4);return Oe.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),ar.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const jW=null;function av(t){return Oe.isPlainObject(t)||Oe.isArray(t)}function D4(t){return Oe.endsWith(t,"[]")?t.slice(0,-2):t}function O4(t,e,r){return t?t.concat(e).map(function(i,s){return i=D4(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function UW(t){return Oe.isArray(t)&&!t.some(av)}const qW=Oe.toFlatObject(Oe,{},null,function(e){return/^is[A-Z]/.test(e)});function b0(t,e,r){if(!Oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Oe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,D){return!Oe.isUndefined(D[O])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&Oe.isSpecCompliantForm(e);if(!Oe.isFunction(i))throw new TypeError("visitor must be a function");function l(P){if(P===null)return"";if(Oe.isDate(P))return P.toISOString();if(!u&&Oe.isBlob(P))throw new ar("Blob is not supported. Use a Buffer instead.");return Oe.isArrayBuffer(P)||Oe.isTypedArray(P)?u&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function d(P,O,D){let k=P;if(P&&!D&&typeof P=="object"){if(Oe.endsWith(O,"{}"))O=n?O:O.slice(0,-2),P=JSON.stringify(P);else if(Oe.isArray(P)&&UW(P)||(Oe.isFileList(P)||Oe.endsWith(O,"[]"))&&(k=Oe.toArray(P)))return O=D4(O),k.forEach(function(q,j){!(Oe.isUndefined(q)||q===null)&&e.append(o===!0?O4([O],j,s):o===null?O:O+"[]",l(q))}),!1}return av(P)?!0:(e.append(O4(D,O,s),l(P)),!1)}const p=[],y=Object.assign(qW,{defaultVisitor:d,convertValue:l,isVisitable:av});function A(P,O){if(!Oe.isUndefined(P)){if(p.indexOf(P)!==-1)throw Error("Circular reference detected in "+O.join("."));p.push(P),Oe.forEach(P,function(k,B){(!(Oe.isUndefined(k)||k===null)&&i.call(e,k,Oe.isString(B)?B.trim():B,O,y))===!0&&A(k,O?O.concat(B):[B])}),p.pop()}}if(!Oe.isObject(t))throw new TypeError("data must be an object");return A(t),e}function N4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function cv(t,e){this._pairs=[],t&&b0(t,this,e)}const L4=cv.prototype;L4.append=function(e,r){this._pairs.push([e,r])},L4.toString=function(e){const r=e?function(n){return e.call(this,n,N4)}:N4;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function zW(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function k4(t,e,r){if(!e)return t;const n=r&&r.encode||zW;Oe.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=Oe.isURLSearchParams(e)?e.toString():new cv(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class B4{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Oe.forEach(this.handlers,function(n){n!==null&&e(n)})}}const $4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},HW={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:cv,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},uv=typeof window<"u"&&typeof document<"u",fv=typeof navigator=="object"&&navigator||void 0,WW=uv&&(!fv||["ReactNative","NativeScript","NS"].indexOf(fv.product)<0),KW=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",VW=uv&&window.location.href||"http://localhost",Xn={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:uv,hasStandardBrowserEnv:WW,hasStandardBrowserWebWorkerEnv:KW,navigator:fv,origin:VW},Symbol.toStringTag,{value:"Module"})),...HW};function GW(t,e){return b0(t,new Xn.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return Xn.isNode&&Oe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function YW(t){return Oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function JW(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function F4(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=r.length;return o=!o&&Oe.isArray(i)?i.length:o,u?(Oe.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!Oe.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&Oe.isArray(i[o])&&(i[o]=JW(i[o])),!a)}if(Oe.isFormData(t)&&Oe.isFunction(t.entries)){const r={};return Oe.forEachEntry(t,(n,i)=>{e(YW(n),i,r,0)}),r}return null}function XW(t,e,r){if(Oe.isString(t))try{return(e||JSON.parse)(t),Oe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Hl={transitional:$4,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=Oe.isObject(e);if(s&&Oe.isHTMLForm(e)&&(e=new FormData(e)),Oe.isFormData(e))return i?JSON.stringify(F4(e)):e;if(Oe.isArrayBuffer(e)||Oe.isBuffer(e)||Oe.isStream(e)||Oe.isFile(e)||Oe.isBlob(e)||Oe.isReadableStream(e))return e;if(Oe.isArrayBufferView(e))return e.buffer;if(Oe.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return GW(e,this.formSerializer).toString();if((a=Oe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return b0(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),XW(e)):e}],transformResponse:[function(e){const r=this.transitional||Hl.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Oe.isResponse(e)||Oe.isReadableStream(e))return e;if(e&&Oe.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ar.from(a,ar.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xn.classes.FormData,Blob:Xn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Oe.forEach(["delete","get","head","post","put","patch"],t=>{Hl.headers[t]={}});const ZW=Oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),QW=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&ZW[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},j4=Symbol("internals");function Wl(t){return t&&String(t).trim().toLowerCase()}function y0(t){return t===!1||t==null?t:Oe.isArray(t)?t.map(y0):String(t)}function eK(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const tK=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lv(t,e,r,n,i){if(Oe.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!Oe.isString(e)){if(Oe.isString(n))return e.indexOf(n)!==-1;if(Oe.isRegExp(n))return n.test(e)}}function rK(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function nK(t,e){const r=Oe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let wi=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,u,l){const d=Wl(u);if(!d)throw new Error("header name must be a non-empty string");const p=Oe.findKey(i,d);(!p||i[p]===void 0||l===!0||l===void 0&&i[p]!==!1)&&(i[p||u]=y0(a))}const o=(a,u)=>Oe.forEach(a,(l,d)=>s(l,d,u));if(Oe.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(Oe.isString(e)&&(e=e.trim())&&!tK(e))o(QW(e),r);else if(Oe.isHeaders(e))for(const[a,u]of e.entries())s(u,a,n);else e!=null&&s(r,e,n);return this}get(e,r){if(e=Wl(e),e){const n=Oe.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return eK(i);if(Oe.isFunction(r))return r.call(this,i,n);if(Oe.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Wl(e),e){const n=Oe.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||lv(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Wl(o),o){const a=Oe.findKey(n,o);a&&(!r||lv(n,n[a],a,r))&&(delete n[a],i=!0)}}return Oe.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||lv(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return Oe.forEach(this,(i,s)=>{const o=Oe.findKey(n,s);if(o){r[o]=y0(i),delete r[s];return}const a=e?rK(s):String(s).trim();a!==s&&delete r[s],r[a]=y0(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Oe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&Oe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[j4]=this[j4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Wl(o);n[a]||(nK(i,o),n[a]=!0)}return Oe.isArray(e)?e.forEach(s):s(e),this}};wi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Oe.reduceDescriptors(wi.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}}),Oe.freezeMethods(wi);function hv(t,e){const r=this||Hl,n=e||r,i=wi.from(n.headers);let s=n.data;return Oe.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function U4(t){return!!(t&&t.__CANCEL__)}function Lu(t,e,r){ar.call(this,t??"canceled",ar.ERR_CANCELED,e,r),this.name="CanceledError"}Oe.inherits(Lu,ar,{__CANCEL__:!0});function q4(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ar("Request failed with status code "+r.status,[ar.ERR_BAD_REQUEST,ar.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function iK(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function sK(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),d=n[s];o||(o=l),r[i]=u,n[i]=l;let p=s,y=0;for(;p!==i;)y+=r[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-o<e)return;const A=d&&l-d;return A?Math.round(y*1e3/A):void 0}}function oK(t,e){let r=0,n=1e3/e,i,s;const o=(l,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,l)};return[(...l)=>{const d=Date.now(),p=d-r;p>=n?o(l,d):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},n-p)))},()=>i&&o(i)]}const w0=(t,e,r=3)=>{let n=0;const i=sK(50,250);return oK(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-n,l=i(u),d=o<=a;n=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:l||void 0,estimated:l&&a&&d?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},r)},z4=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},H4=t=>(...e)=>Oe.asap(()=>t(...e)),aK=Xn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Xn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Xn.origin),Xn.navigator&&/(msie|trident)/i.test(Xn.navigator.userAgent)):()=>!0,cK=Xn.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const o=[t+"="+encodeURIComponent(e)];Oe.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Oe.isString(n)&&o.push("path="+n),Oe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function uK(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function fK(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function W4(t,e){return t&&!uK(e)?fK(t,e):e}const K4=t=>t instanceof wi?{...t}:t;function gc(t,e){e=e||{};const r={};function n(l,d,p,y){return Oe.isPlainObject(l)&&Oe.isPlainObject(d)?Oe.merge.call({caseless:y},l,d):Oe.isPlainObject(d)?Oe.merge({},d):Oe.isArray(d)?d.slice():d}function i(l,d,p,y){if(Oe.isUndefined(d)){if(!Oe.isUndefined(l))return n(void 0,l,p,y)}else return n(l,d,p,y)}function s(l,d){if(!Oe.isUndefined(d))return n(void 0,d)}function o(l,d){if(Oe.isUndefined(d)){if(!Oe.isUndefined(l))return n(void 0,l)}else return n(void 0,d)}function a(l,d,p){if(p in e)return n(l,d);if(p in t)return n(void 0,l)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,d,p)=>i(K4(l),K4(d),p,!0)};return Oe.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=u[d]||i,y=p(t[d],e[d],d);Oe.isUndefined(y)&&p!==a||(r[d]=y)}),r}const V4=t=>{const e=gc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=wi.from(o),e.url=k4(W4(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(Oe.isFormData(r)){if(Xn.hasStandardBrowserEnv||Xn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[l,...d]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...d].join("; "))}}if(Xn.hasStandardBrowserEnv&&(n&&Oe.isFunction(n)&&(n=n(e)),n||n!==!1&&aK(e.url))){const l=i&&s&&cK.read(s);l&&o.set(i,l)}return e},lK=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,n){const i=V4(t);let s=i.data;const o=wi.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:l}=i,d,p,y,A,P;function O(){A&&A(),P&&P(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let D=new XMLHttpRequest;D.open(i.method.toUpperCase(),i.url,!0),D.timeout=i.timeout;function k(){if(!D)return;const q=wi.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),H={data:!a||a==="text"||a==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:q,config:t,request:D};q4(function(T){r(T),O()},function(T){n(T),O()},H),D=null}"onloadend"in D?D.onloadend=k:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(k)},D.onabort=function(){D&&(n(new ar("Request aborted",ar.ECONNABORTED,t,D)),D=null)},D.onerror=function(){n(new ar("Network Error",ar.ERR_NETWORK,t,D)),D=null},D.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const H=i.transitional||$4;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),n(new ar(j,H.clarifyTimeoutError?ar.ETIMEDOUT:ar.ECONNABORTED,t,D)),D=null},s===void 0&&o.setContentType(null),"setRequestHeader"in D&&Oe.forEach(o.toJSON(),function(j,H){D.setRequestHeader(H,j)}),Oe.isUndefined(i.withCredentials)||(D.withCredentials=!!i.withCredentials),a&&a!=="json"&&(D.responseType=i.responseType),l&&([y,P]=w0(l,!0),D.addEventListener("progress",y)),u&&D.upload&&([p,A]=w0(u),D.upload.addEventListener("progress",p),D.upload.addEventListener("loadend",A)),(i.cancelToken||i.signal)&&(d=q=>{D&&(n(!q||q.type?new Lu(null,t,D):q),D.abort(),D=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const B=iK(i.url);if(B&&Xn.protocols.indexOf(B)===-1){n(new ar("Unsupported protocol "+B+":",ar.ERR_BAD_REQUEST,t));return}D.send(s||null)})},hK=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(l){if(!i){i=!0,a();const d=l instanceof Error?l:this.reason;n.abort(d instanceof ar?d:new Lu(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new ar(`timeout ${e} of ms exceeded`,ar.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),t=null)};t.forEach(l=>l.addEventListener("abort",s));const{signal:u}=n;return u.unsubscribe=()=>Oe.asap(a),u}},dK=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},pK=async function*(t,e){for await(const r of gK(t))yield*dK(r,e)},gK=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},G4=(t,e,r,n)=>{const i=pK(t,e);let s=0,o,a=u=>{o||(o=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:l,value:d}=await i.next();if(l){a(),u.close();return}let p=d.byteLength;if(r){let y=s+=p;r(y)}u.enqueue(new Uint8Array(d))}catch(l){throw a(l),l}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},x0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Y4=x0&&typeof ReadableStream=="function",mK=x0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),J4=(t,...e)=>{try{return!!t(...e)}catch{return!1}},vK=Y4&&J4(()=>{let t=!1;const e=new Request(Xn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),X4=64*1024,dv=Y4&&J4(()=>Oe.isReadableStream(new Response("").body)),_0={stream:dv&&(t=>t.body)};x0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!_0[e]&&(_0[e]=Oe.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new ar(`Response type '${e}' is not supported`,ar.ERR_NOT_SUPPORT,n)})})})(new Response);const bK=async t=>{if(t==null)return 0;if(Oe.isBlob(t))return t.size;if(Oe.isSpecCompliantForm(t))return(await new Request(Xn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Oe.isArrayBufferView(t)||Oe.isArrayBuffer(t))return t.byteLength;if(Oe.isURLSearchParams(t)&&(t=t+""),Oe.isString(t))return(await mK(t)).byteLength},yK=async(t,e)=>{const r=Oe.toFiniteNumber(t.getContentLength());return r??bK(e)},pv={http:jW,xhr:lK,fetch:x0&&(async t=>{let{url:e,method:r,data:n,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:l,headers:d,withCredentials:p="same-origin",fetchOptions:y}=V4(t);l=l?(l+"").toLowerCase():"text";let A=hK([i,s&&s.toAbortSignal()],o),P;const O=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let D;try{if(u&&vK&&r!=="get"&&r!=="head"&&(D=await yK(d,n))!==0){let H=new Request(e,{method:"POST",body:n,duplex:"half"}),J;if(Oe.isFormData(n)&&(J=H.headers.get("content-type"))&&d.setContentType(J),H.body){const[T,z]=z4(D,w0(H4(u)));n=G4(H.body,X4,T,z)}}Oe.isString(p)||(p=p?"include":"omit");const k="credentials"in Request.prototype;P=new Request(e,{...y,signal:A,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:k?p:void 0});let B=await fetch(P);const q=dv&&(l==="stream"||l==="response");if(dv&&(a||q&&O)){const H={};["status","statusText","headers"].forEach(ue=>{H[ue]=B[ue]});const J=Oe.toFiniteNumber(B.headers.get("content-length")),[T,z]=a&&z4(J,w0(H4(a),!0))||[];B=new Response(G4(B.body,X4,T,()=>{z&&z(),O&&O()}),H)}l=l||"text";let j=await _0[Oe.findKey(_0,l)||"text"](B,t);return!q&&O&&O(),await new Promise((H,J)=>{q4(H,J,{data:j,headers:wi.from(B.headers),status:B.status,statusText:B.statusText,config:t,request:P})})}catch(k){throw O&&O(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new ar("Network Error",ar.ERR_NETWORK,t,P),{cause:k.cause||k}):ar.from(k,k&&k.code,t,P)}})};Oe.forEach(pv,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Z4=t=>`- ${t}`,wK=t=>Oe.isFunction(t)||t===null||t===!1,Q4={getAdapter:t=>{t=Oe.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let o;if(n=r,!wK(r)&&(n=pv[(o=String(r)).toLowerCase()],n===void 0))throw new ar(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){const s=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Z4).join(`
`):" "+Z4(s[0]):"as no adapter specified";throw new ar("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:pv};function gv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Lu(null,t)}function e8(t){return gv(t),t.headers=wi.from(t.headers),t.data=hv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Q4.getAdapter(t.adapter||Hl.adapter)(t).then(function(n){return gv(t),n.data=hv.call(t,t.transformResponse,n),n.headers=wi.from(n.headers),n},function(n){return U4(n)||(gv(t),n&&n.response&&(n.response.data=hv.call(t,t.transformResponse,n.response),n.response.headers=wi.from(n.response.headers))),Promise.reject(n)})}const t8="1.7.8",E0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{E0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const r8={};E0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+t8+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new ar(i(o," has been removed"+(r?" in "+r:"")),ar.ERR_DEPRECATED);return r&&!r8[o]&&(r8[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}},E0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function xK(t,e,r){if(typeof t!="object")throw new ar("options must be an object",ar.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new ar("option "+s+" must be "+u,ar.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ar("Unknown option "+s,ar.ERR_BAD_OPTION)}}const S0={assertOptions:xK,validators:E0},Zs=S0.validators;let mc=class{constructor(e){this.defaults=e,this.interceptors={request:new B4,response:new B4}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=gc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&S0.assertOptions(n,{silentJSONParsing:Zs.transitional(Zs.boolean),forcedJSONParsing:Zs.transitional(Zs.boolean),clarifyTimeoutError:Zs.transitional(Zs.boolean)},!1),i!=null&&(Oe.isFunction(i)?r.paramsSerializer={serialize:i}:S0.assertOptions(i,{encode:Zs.function,serialize:Zs.function},!0)),S0.assertOptions(r,{baseUrl:Zs.spelling("baseURL"),withXsrfToken:Zs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&Oe.merge(s.common,s[r.method]);s&&Oe.forEach(["delete","get","head","post","put","patch","common"],P=>{delete s[P]}),r.headers=wi.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(r)===!1||(u=u&&O.synchronous,a.unshift(O.fulfilled,O.rejected))});const l=[];this.interceptors.response.forEach(function(O){l.push(O.fulfilled,O.rejected)});let d,p=0,y;if(!u){const P=[e8.bind(this),void 0];for(P.unshift.apply(P,a),P.push.apply(P,l),y=P.length,d=Promise.resolve(r);p<y;)d=d.then(P[p++],P[p++]);return d}y=a.length;let A=r;for(p=0;p<y;){const P=a[p++],O=a[p++];try{A=P(A)}catch(D){O.call(this,D);break}}try{d=e8.call(this,A)}catch(P){return Promise.reject(P)}for(p=0,y=l.length;p<y;)d=d.then(l[p++],l[p++]);return d}getUri(e){e=gc(this.defaults,e);const r=W4(e.baseURL,e.url);return k4(r,e.params,e.paramsSerializer)}};Oe.forEach(["delete","get","head","options"],function(e){mc.prototype[e]=function(r,n){return this.request(gc(n||{},{method:e,url:r,data:(n||{}).data}))}}),Oe.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(gc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}mc.prototype[e]=r(),mc.prototype[e+"Form"]=r(!0)});let _K=class JA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Lu(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new JA(function(i){e=i}),cancel:e}}};function EK(t){return function(r){return t.apply(null,r)}}function SK(t){return Oe.isObject(t)&&t.isAxiosError===!0}const mv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mv).forEach(([t,e])=>{mv[e]=t});function n8(t){const e=new mc(t),r=w4(mc.prototype.request,e);return Oe.extend(r,mc.prototype,e,{allOwnKeys:!0}),Oe.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return n8(gc(t,i))},r}const fn=n8(Hl);fn.Axios=mc,fn.CanceledError=Lu,fn.CancelToken=_K,fn.isCancel=U4,fn.VERSION=t8,fn.toFormData=b0,fn.AxiosError=ar,fn.Cancel=fn.CanceledError,fn.all=function(e){return Promise.all(e)},fn.spread=EK,fn.isAxiosError=SK,fn.mergeConfig=gc,fn.AxiosHeaders=wi,fn.formToJSON=t=>F4(Oe.isHTMLForm(t)?new FormData(t):t),fn.getAdapter=Q4.getAdapter,fn.HttpStatusCode=mv,fn.default=fn;const{Axios:Foe,AxiosError:i8,CanceledError:joe,isCancel:Uoe,CancelToken:qoe,VERSION:zoe,all:Hoe,Cancel:Woe,isAxiosError:Koe,spread:Voe,toFormData:Goe,AxiosHeaders:Yoe,HttpStatusCode:Joe,formToJSON:Xoe,getAdapter:Zoe,mergeConfig:Qoe}=fn,s8=fn.create({timeout:6e4,headers:{"Content-Type":"application/json",token:localStorage.getItem("auth")}});function AK(t){var e,r,n;if(((e=t.data)==null?void 0:e.success)!==!0){const i=new i8((r=t.data)==null?void 0:r.errorMessage,(n=t.data)==null?void 0:n.errorCode,t.config,t.request,t);return Promise.reject(i)}else return t}function PK(t){var r;console.log(t);const e=(r=t.response)==null?void 0:r.data;if(e){console.log(e,"responseData");const n=new i8(e.errorMessage,t.code,t.config,t.request,t.response);return Promise.reject(n)}else return Promise.reject(t)}s8.interceptors.response.use(AK,PK);class MK{constructor(e){oo(this,"_apiBase","");this.request=e}setApiBase(e){this._apiBase=e||""}async getNonce(e){const{data:r}=await this.request.post(`${this._apiBase}/api/v2/user/nonce`,e);return r.data}async getEmailCode(e,r){const{data:n}=await this.request.post(`${this._apiBase}/api/v2/user/get_code`,e,{headers:{"Captcha-Param":r}});return n.data}async emailLogin(e){return(await this.request.post(`${this._apiBase}/api/v2/user/login`,e)).data}async walletLogin(e){return e.account_enum==="C"?(await this.request.post(`${this._apiBase}/api/v2/user/login`,e)).data:(await this.request.post(`${this._apiBase}/api/v2/business/login`,e)).data}async tonLogin(e){return(await this.request.post(`${this._apiBase}/api/v2/user/login`,e)).data}async bindEmail(e){return(await this.request.post("/api/v2/user/account/bind",e)).data}async bindTonWallet(e){return(await this.request.post("/api/v2/user/account/bind",e)).data}async bindEvmWallet(e){return(await this.request.post("/api/v2/user/account/bind",e)).data}}const va=new MK(s8),IK={projectId:"7a4434fefbcc9af474fb5c995e47d286",metadata:{name:"codatta",description:"codatta",url:"https://codatta.io/",icons:["https://avatars.githubusercontent.com/u/171659315"]}},o8=eW({appName:"codatta",appLogoUrl:"https://avatars.githubusercontent.com/u/171659315"}),a8=Se.createContext({saveLastUsedWallet:()=>{},lastUsedWallet:null,wallets:[],initialized:!1,featuredWallets:[]});function Kl(){return Se.useContext(a8)}function CK(t){const{apiBaseUrl:e}=t,[r,n]=Se.useState([]),[i,s]=Se.useState([]),[o,a]=Se.useState(null),[u,l]=Se.useState(!1),d=A=>{a(A);const O={provider:A.provider instanceof R1?"UniversalProvider":"EIP1193Provider",key:A.key,timestamp:Date.now()};localStorage.setItem("xn-last-used-info",JSON.stringify(O))};function p(A){const P=A.find(O=>{var D;return((D=O.config)==null?void 0:D.name)===t.singleWalletName});if(P)s([P]);else{const O=A.filter(B=>B.featured||B.installed),D=A.filter(B=>!B.featured&&!B.installed),k=[...O,...D];n(k),s(O)}}async function y(){const A=[],P=new Map;QA.forEach(D=>{const k=new ru(D);D.name==="Coinbase Wallet"&&k.EIP6963Detected({info:{name:"Coinbase Wallet",uuid:"coinbase",icon:D.image,rdns:"coinbase"},provider:o8.getProvider()}),P.set(k.key,k),A.push(k)}),(await gz()).forEach(D=>{const k=P.get(D.info.name);if(k)k.EIP6963Detected(D);else{const B=new ru(D);P.set(B.key,B),A.push(B)}});try{const D=JSON.parse(localStorage.getItem("xn-last-used-info")||"{}"),k=P.get(D.key);if(k){if(k.lastUsed=!0,D.provider==="UniversalProvider"){const B=await R1.init(IK);B.session&&(k.setUniversalProvider(B),console.log("Restored UniversalProvider for wallet:",k.key))}else D.provider==="EIP1193Provider"&&k.installed&&console.log("Using detected EIP1193Provider for wallet:",k.key);a(k)}}catch(D){console.log(D)}p(A),l(!0)}return Se.useEffect(()=>{y(),va.setApiBase(e)},[]),de.jsx(a8.Provider,{value:{saveLastUsedWallet:d,wallets:r,initialized:u,lastUsedWallet:o,featuredWallets:i},children:t.children})}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c8=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=Se.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...a},u)=>Se.createElement("svg",{ref:u,...RK,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:c8("lucide",i),...a},[...o.map(([l,d])=>Se.createElement(l,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=(t,e)=>{const r=Se.forwardRef(({className:n,...i},s)=>Se.createElement(DK,{ref:s,iconNode:e,className:c8(`lucide-${TK(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=ts("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=ts("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=ts("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=ts("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=ts("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=ts("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=ts("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=ts("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ts("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=ts("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=ts("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=ts("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]),h8=new Set;function A0(t,e,r){t||h8.has(e)||(console.warn(e),h8.add(e))}function UK(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>(process.env.NODE_ENV!=="production"&&A0(!1,"motion() is deprecated. Use motion.create() instead."),t(...n));return new Proxy(r,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function P0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const vv=t=>Array.isArray(t);function d8(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Vl(t){return typeof t=="string"||Array.isArray(t)}function p8(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function bv(t,e,r,n){if(typeof e=="function"){const[i,s]=p8(n);e=e(r!==void 0?r:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=p8(n);e=e(r!==void 0?r:t.custom,i,s)}return e}function M0(t,e,r){const n=t.getProps();return bv(n,e,r!==void 0?r:n.custom,t)}const yv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wv=["initial",...yv],Gl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bc=new Set(Gl),Qs=t=>t*1e3,Do=t=>t/1e3,qK={type:"spring",stiffness:500,damping:25,restSpeed:10},zK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),HK={type:"keyframes",duration:.8},WK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},KK=(t,{keyframes:e})=>e.length>2?HK:bc.has(t)?t.startsWith("scale")?zK(e[1]):qK:WK;function xv(t,e){return t?t[e]||t.default||t:void 0}const VK={useManualTiming:!1},GK=t=>t!==null;function I0(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(GK),s=e&&r!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const Wn=t=>t;function YK(t){let e=new Set,r=new Set,n=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(l){s.has(l)&&(u.schedule(l),t()),l(o)}const u={schedule:(l,d=!1,p=!1)=>{const A=p&&n?e:r;return d&&s.add(l),A.has(l)||A.add(l),l},cancel:l=>{r.delete(l),s.delete(l)},process:l=>{if(o=l,n){i=!0;return}n=!0,[e,r]=[r,e],r.clear(),e.forEach(a),n=!1,i&&(i=!1,u.process(l))}};return u}const C0=["read","resolveKeyframes","update","preRender","render","postRender"],JK=40;function g8(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=C0.reduce((k,B)=>(k[B]=YK(s),k),{}),{read:a,resolveKeyframes:u,update:l,preRender:d,render:p,postRender:y}=o,A=()=>{const k=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(k-i.timestamp,JK),1),i.timestamp=k,i.isProcessing=!0,a.process(i),u.process(i),l.process(i),d.process(i),p.process(i),y.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(A))},P=()=>{r=!0,n=!0,i.isProcessing||t(A)};return{schedule:C0.reduce((k,B)=>{const q=o[B];return k[B]=(j,H=!1,J=!1)=>(r||P(),q.schedule(j,H,J)),k},{}),cancel:k=>{for(let B=0;B<C0.length;B++)o[C0[B]].cancel(k)},state:i,steps:o}}const{schedule:Nr,cancel:ba,state:Kn,steps:_v}=g8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wn,!0),m8=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,XK=1e-7,ZK=12;function QK(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=m8(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>XK&&++a<ZK);return o}function Yl(t,e,r,n){if(t===e&&r===n)return Wn;const i=s=>QK(s,0,1,t,r);return s=>s===0||s===1?s:m8(i(s),e,n)}const v8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,b8=t=>e=>1-t(1-e),y8=Yl(.33,1.53,.69,.99),Ev=b8(y8),w8=v8(Ev),x8=t=>(t*=2)<1?.5*Ev(t):.5*(2-Math.pow(2,-10*(t-1))),Sv=t=>1-Math.sin(Math.acos(t)),_8=b8(Sv),E8=v8(Sv),S8=t=>/^0[^.\s]+$/u.test(t);function eV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||S8(t):!0}let ku=Wn,Oo=Wn;process.env.NODE_ENV!=="production"&&(ku=(t,e)=>{!t&&typeof console<"u"&&console.warn(e)},Oo=(t,e)=>{if(!t)throw new Error(e)});const A8=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),P8=t=>e=>typeof e=="string"&&e.startsWith(t),M8=P8("--"),tV=P8("var(--"),Av=t=>tV(t)?rV.test(t.split("/*")[0].trim()):!1,rV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function iV(t){const e=nV.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}const sV=4;function I8(t,e,r=1){Oo(r<=sV,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);const[n,i]=iV(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return A8(o)?parseFloat(o):o}return Av(i)?I8(i,e,r+1):i}const ya=(t,e,r)=>r>e?e:r<t?t:r,Bu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jl={...Bu,transform:t=>ya(0,1,t)},T0={...Bu,default:1},Xl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wa=Xl("deg"),eo=Xl("%"),zt=Xl("px"),oV=Xl("vh"),aV=Xl("vw"),C8={...eo,parse:t=>eo.parse(t)/100,transform:t=>eo.transform(t*100)},cV=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),T8=t=>t===Bu||t===zt,R8=(t,e)=>parseFloat(t.split(", ")[e]),D8=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return R8(i[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?R8(s[1],t):0}},uV=new Set(["x","y","z"]),fV=Gl.filter(t=>!uV.has(t));function lV(t){const e=[];return fV.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const $u={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:D8(4,13),y:D8(5,14)};$u.translateX=$u.x,$u.translateY=$u.y;const O8=t=>e=>e.test(t),N8=[Bu,zt,eo,wa,aV,oV,{test:t=>t==="auto",parse:t=>t}],L8=t=>N8.find(O8(t)),yc=new Set;let Pv=!1,Mv=!1;function k8(){if(Mv){const t=Array.from(yc).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=lV(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,o])=>{var a;(a=n.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Mv=!1,Pv=!1,yc.forEach(t=>t.complete()),yc.clear()}function B8(){yc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Mv=!0)})}function hV(){B8(),k8()}class Iv{constructor(e,r,n,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(yc.add(this),Pv||(Pv=!0,Nr.read(B8),Nr.resolveKeyframes(k8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const u=n.readValue(r,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),yc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,yc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Zl=t=>Math.round(t*1e5)/1e5,Cv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dV(t){return t==null}const pV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tv=(t,e)=>r=>!!(typeof r=="string"&&pV.test(r)&&r.startsWith(t)||e&&!dV(r)&&Object.prototype.hasOwnProperty.call(r,e)),$8=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,s,o,a]=n.match(Cv);return{[t]:parseFloat(i),[e]:parseFloat(s),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},gV=t=>ya(0,255,t),Rv={...Bu,transform:t=>Math.round(gV(t))},wc={test:Tv("rgb","red"),parse:$8("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Rv.transform(t)+", "+Rv.transform(e)+", "+Rv.transform(r)+", "+Zl(Jl.transform(n))+")"};function mV(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Dv={test:Tv("#"),parse:mV,transform:wc.transform},Fu={test:Tv("hsl","hue"),parse:$8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+eo.transform(Zl(e))+", "+eo.transform(Zl(r))+", "+Zl(Jl.transform(n))+")"},Zn={test:t=>wc.test(t)||Dv.test(t)||Fu.test(t),parse:t=>wc.test(t)?wc.parse(t):Fu.test(t)?Fu.parse(t):Dv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wc.transform(t):Fu.transform(t)},vV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bV(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cv))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(vV))===null||r===void 0?void 0:r.length)||0)>0}const F8="number",j8="color",yV="var",wV="var(",U8="${}",xV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ql(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(xV,u=>(Zn.test(u)?(n.color.push(s),i.push(j8),r.push(Zn.parse(u))):u.startsWith(wV)?(n.var.push(s),i.push(yV),r.push(u)):(n.number.push(s),i.push(F8),r.push(parseFloat(u))),++s,U8)).split(U8);return{values:r,split:a,indexes:n,types:i}}function q8(t){return Ql(t).values}function z8(t){const{split:e,types:r}=Ql(t),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const a=r[o];a===F8?s+=Zl(i[o]):a===j8?s+=Zn.transform(i[o]):s+=i[o]}return s}}const _V=t=>typeof t=="number"?0:t;function EV(t){const e=q8(t);return z8(t)(e.map(_V))}const xa={test:bV,parse:q8,createTransformer:z8,getAnimatableNone:EV},SV=new Set(["brightness","contrast","saturate","opacity"]);function AV(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(Cv)||[];if(!n)return t;const i=r.replace(n,"");let s=SV.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+i+")"}const PV=/\b([a-z-]*)\(.*?\)/gu,Ov={...xa,getAnimatableNone:t=>{const e=t.match(PV);return e?e.map(AV).join(" "):t}},MV={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,backgroundPositionX:zt,backgroundPositionY:zt},IV={rotate:wa,rotateX:wa,rotateY:wa,rotateZ:wa,scale:T0,scaleX:T0,scaleY:T0,scaleZ:T0,skew:wa,skewX:wa,skewY:wa,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:Jl,originX:C8,originY:C8,originZ:zt},H8={...Bu,transform:Math.round},Nv={...MV,...IV,zIndex:H8,size:zt,fillOpacity:Jl,strokeOpacity:Jl,numOctaves:H8},CV={...Nv,color:Zn,backgroundColor:Zn,outlineColor:Zn,fill:Zn,stroke:Zn,borderColor:Zn,borderTopColor:Zn,borderRightColor:Zn,borderBottomColor:Zn,borderLeftColor:Zn,filter:Ov,WebkitFilter:Ov},Lv=t=>CV[t];function W8(t,e){let r=Lv(t);return r!==Ov&&(r=xa),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const TV=new Set(["auto","none","0"]);function RV(t,e,r){let n=0,i;for(;n<t.length&&!i;){const s=t[n];typeof s=="string"&&!TV.has(s)&&Ql(s).values.length&&(i=t[n]),n++}if(i&&r)for(const s of e)t[s]=W8(r,i)}class K8 extends Iv{constructor(e,r,n,i,s){super(e,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let l=e[u];if(typeof l=="string"&&(l=l.trim(),Av(l))){const d=I8(l,r.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!cV.has(n)||e.length!==2)return;const[i,s]=e,o=L8(i),a=L8(s);if(o!==a)if(T8(o)&&T8(a))for(let u=0;u<e.length;u++){const l=e[u];typeof l=="string"&&(e[u]=parseFloat(l))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)eV(e[i])&&n.push(i);n.length&&RV(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$u[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=$u[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,l])=>{r.getValue(u).set(l)}),this.resolveNoneKeyframes()}}function kv(t){return typeof t=="function"}let R0;function DV(){R0=void 0}const to={now:()=>(R0===void 0&&to.set(Kn.isProcessing||VK.useManualTiming?Kn.timestamp:performance.now()),R0),set:t=>{R0=t,queueMicrotask(DV)}},V8=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xa.test(t)||t==="0")&&!t.startsWith("url("));function OV(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function NV(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=V8(i,e),a=V8(s,e);return ku(o===a,`You are trying to animate ${e} from "${i}" to "${s}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${s} via the \`style\` property.`),!o||!a?!1:OV(t)||(r==="spring"||kv(r))&&n}const LV=40;class G8{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=to.now(),this.options={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>LV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&hV(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=to.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:o,onComplete:a,onUpdate:u,isGenerator:l}=this.options;if(!l&&!NV(e,n,i,s))if(o)this.options.duration=0;else{u==null||u(I0(e,this.options,r)),a==null||a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,r);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...d},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function Y8(t,e){return e?t*(1e3/e):0}const kV=5;function J8(t,e,r){const n=Math.max(e-kV,0);return Y8(r-t(n),e-n)}const Bv=.001,BV=.01,X8=10,$V=.05,FV=1;function jV({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,s;ku(t<=Qs(X8),"Spring duration must be 10 seconds or less");let o=1-e;o=ya($V,FV,o),t=ya(BV,X8,Do(t)),o<1?(i=l=>{const d=l*o,p=d*t,y=d-r,A=$v(l,o),P=Math.exp(-p);return Bv-y/A*P},s=l=>{const p=l*o*t,y=p*r+r,A=Math.pow(o,2)*Math.pow(l,2)*t,P=Math.exp(-p),O=$v(Math.pow(l,2),o);return(-i(l)+Bv>0?-1:1)*((y-A)*P)/O}):(i=l=>{const d=Math.exp(-l*t),p=(l-r)*t+1;return-Bv+d*p},s=l=>{const d=Math.exp(-l*t),p=(r-l)*(t*t);return d*p});const a=5/t,u=qV(i,s,a);if(t=Qs(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const UV=12;function qV(t,e,r){let n=r;for(let i=1;i<UV;i++)n=n-t(n)/e(n);return n}function $v(t,e){return t*Math.sqrt(1-e*e)}const zV=["duration","bounce"],HV=["stiffness","damping","mass"];function Z8(t,e){return e.some(r=>t[r]!==void 0)}function WV(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Z8(t,HV)&&Z8(t,zV)){const r=jV(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function Q8({keyframes:t,restDelta:e,restSpeed:r,...n}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:u,mass:l,duration:d,velocity:p,isResolvedFromDuration:y}=WV({...n,velocity:-Do(n.velocity||0)}),A=p||0,P=u/(2*Math.sqrt(a*l)),O=s-i,D=Do(Math.sqrt(a/l)),k=Math.abs(O)<5;r||(r=k?.01:2),e||(e=k?.005:.5);let B;if(P<1){const q=$v(D,P);B=j=>{const H=Math.exp(-P*D*j);return s-H*((A+P*D*O)/q*Math.sin(q*j)+O*Math.cos(q*j))}}else if(P===1)B=q=>s-Math.exp(-D*q)*(O+(A+D*O)*q);else{const q=D*Math.sqrt(P*P-1);B=j=>{const H=Math.exp(-P*D*j),J=Math.min(q*j,300);return s-H*((A+P*D*O)*Math.sinh(J)+q*O*Math.cosh(J))/q}}return{calculatedDuration:y&&d||null,next:q=>{const j=B(q);if(y)o.done=q>=d;else{let H=0;P<1&&(H=q===0?Qs(A):J8(B,q,j));const J=Math.abs(H)<=r,T=Math.abs(s-j)<=e;o.done=J&&T}return o.value=o.done?s:j,o}}}function eE({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:l=.5,restSpeed:d}){const p=t[0],y={done:!1,value:p},A=z=>a!==void 0&&z<a||u!==void 0&&z>u,P=z=>a===void 0?u:u===void 0||Math.abs(a-z)<Math.abs(u-z)?a:u;let O=r*e;const D=p+O,k=o===void 0?D:o(D);k!==D&&(O=k-p);const B=z=>-O*Math.exp(-z/n),q=z=>k+B(z),j=z=>{const ue=B(z),_e=q(z);y.done=Math.abs(ue)<=l,y.value=y.done?k:_e};let H,J;const T=z=>{A(y.value)&&(H=z,J=Q8({keyframes:[y.value,P(y.value)],velocity:J8(q,z,y.value),damping:i,stiffness:s,restDelta:l,restSpeed:d}))};return T(0),{calculatedDuration:null,next:z=>{let ue=!1;return!J&&H===void 0&&(ue=!0,j(z),T(z)),H!==void 0&&z>=H?J.next(z-H):(!ue&&j(z),y)}}}const KV=Yl(.42,0,1,1),VV=Yl(0,0,.58,1),tE=Yl(.42,0,.58,1),GV=t=>Array.isArray(t)&&typeof t[0]!="number",Fv=t=>Array.isArray(t)&&typeof t[0]=="number",rE={linear:Wn,easeIn:KV,easeInOut:tE,easeOut:VV,circIn:Sv,circInOut:E8,circOut:_8,backIn:Ev,backInOut:w8,backOut:y8,anticipate:x8},nE=t=>{if(Fv(t)){Oo(t.length===4,"Cubic bezier arrays must contain four numerical values.");const[e,r,n,i]=t;return Yl(e,r,n,i)}else if(typeof t=="string")return Oo(rE[t]!==void 0,`Invalid easing type '${t}'`),rE[t];return t},YV=(t,e)=>r=>e(t(r)),No=(...t)=>t.reduce(YV),ju=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},Zr=(t,e,r)=>t+(e-t)*r;function jv(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function JV({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,s=0,o=0;if(!e)i=s=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,u=2*r-a;i=jv(u,a,t+1/3),s=jv(u,a,t),o=jv(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function D0(t,e){return r=>r>0?e:t}const Uv=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},XV=[Dv,wc,Fu],ZV=t=>XV.find(e=>e.test(t));function iE(t){const e=ZV(t);if(ku(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`),!e)return!1;let r=e.parse(t);return e===Fu&&(r=JV(r)),r}const sE=(t,e)=>{const r=iE(t),n=iE(e);if(!r||!n)return D0(t,e);const i={...r};return s=>(i.red=Uv(r.red,n.red,s),i.green=Uv(r.green,n.green,s),i.blue=Uv(r.blue,n.blue,s),i.alpha=Zr(r.alpha,n.alpha,s),wc.transform(i))},qv=new Set(["none","hidden"]);function QV(t,e){return qv.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function eG(t,e){return r=>Zr(t,e,r)}function zv(t){return typeof t=="number"?eG:typeof t=="string"?Av(t)?D0:Zn.test(t)?sE:nG:Array.isArray(t)?oE:typeof t=="object"?Zn.test(t)?sE:tG:D0}function oE(t,e){const r=[...t],n=r.length,i=t.map((s,o)=>zv(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)r[o]=i[o](s);return r}}function tG(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=zv(t[i])(t[i],e[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function rG(t,e){var r;const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],u=(r=t.values[a])!==null&&r!==void 0?r:0;n[s]=u,i[o]++}return n}const nG=(t,e)=>{const r=xa.createTransformer(e),n=Ql(t),i=Ql(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?qv.has(t)&&!i.values.length||qv.has(e)&&!n.values.length?QV(t,e):No(oE(rG(n,i),i.values),r):(ku(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),D0(t,e))};function aE(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Zr(t,e,r):zv(t)(t,e)}function iG(t,e,r){const n=[],i=r||aE,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Wn:e;a=No(u,a)}n.push(a)}return n}function sG(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const s=t.length;if(Oo(s===e.length,"Both input and output ranges must be the same length"),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=iG(e,n,i),a=o.length,u=l=>{let d=0;if(a>1)for(;d<t.length-2&&!(l<t[d+1]);d++);const p=ju(t[d],t[d+1],l);return o[d](p)};return r?l=>u(ya(t[0],t[s-1],l)):u}function oG(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=ju(0,e,n);t.push(Zr(r,1,i))}}function aG(t){const e=[0];return oG(e,t.length-1),e}function cG(t,e){return t.map(r=>r*e)}function uG(t,e){return t.map(()=>e||tE).splice(0,t.length-1)}function O0({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=GV(n)?n.map(nE):nE(n),s={done:!1,value:e[0]},o=cG(r&&r.length===e.length?r:aG(e),t),a=sG(o,e,{ease:Array.isArray(i)?i:uG(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const cE=2e4;function fG(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<cE;)e+=r,n=t.next(e);return e>=cE?1/0:e}const lG=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Nr.update(e,!0),stop:()=>ba(e),now:()=>Kn.isProcessing?Kn.timestamp:to.now()}},hG={decay:eE,inertia:eE,tween:O0,keyframes:O0,spring:Q8},dG=t=>t/100;class Hv extends G8{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:r,motionValue:n,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Iv,a=(u,l)=>this.onKeyframesResolved(u,l);this.resolver=new o(s,a,r,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=kv(r)?r:hG[r]||O0;let u,l;a!==O0&&typeof e[0]!="number"&&(process.env.NODE_ENV!=="production"&&Oo(e.length===2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${e}`),u=No(dG,aE(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});s==="mirror"&&(l=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=fG(d));const{calculatedDuration:p}=d,y=p+i,A=y*(n+1)-i;return{generator:d,mirroredGenerator:l,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:y,totalDuration:A}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:z}=this.options;return{done:!0,value:z[z.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:l,totalDuration:d,resolvedDuration:p}=n;if(this.startTime===null)return s.next(0);const{delay:y,repeat:A,repeatType:P,repeatDelay:O,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const k=this.currentTime-y*(this.speed>=0?1:-1),B=this.speed>=0?k<0:k>d;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let q=this.currentTime,j=s;if(A){const z=Math.min(this.currentTime,d)/p;let ue=Math.floor(z),_e=z%1;!_e&&z>=1&&(_e=1),_e===1&&ue--,ue=Math.min(ue,A+1),!!(ue%2)&&(P==="reverse"?(_e=1-_e,O&&(_e-=O/p)):P==="mirror"&&(j=o)),q=ya(0,1,_e)*p}const H=B?{done:!1,value:u[0]}:j.next(q);a&&(H.value=a(H.value));let{done:J}=H;!B&&l!==null&&(J=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return T&&i!==void 0&&(H.value=I0(u,this.options,i)),D&&D(H.value),T&&this.finish(),H}get duration(){const{resolved:e}=this;return e?Do(e.calculatedDuration):0}get time(){return Do(this.currentTime)}set time(e){e=Qs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Do(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=lG,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const pG=new Set(["opacity","clipPath","filter","transform"]),gG=10,mG=(t,e)=>{let r="";const n=Math.max(Math.round(e/gG),2);for(let i=0;i<n;i++)r+=t(ju(0,n-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function Wv(t){let e;return()=>(e===void 0&&(e=t()),e)}const vG={linearEasing:void 0};function bG(t,e){const r=Wv(t);return()=>{var n;return(n=vG[e])!==null&&n!==void 0?n:r()}}const N0=bG(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function uE(t){return!!(typeof t=="function"&&N0()||!t||typeof t=="string"&&(t in Kv||N0())||Fv(t)||Array.isArray(t)&&t.every(uE))}const eh=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Kv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eh([0,.65,.55,1]),circOut:eh([.55,0,1,.45]),backIn:eh([.31,.01,.66,-.59]),backOut:eh([.33,1.53,.69,.99])};function fE(t,e){if(t)return typeof t=="function"&&N0()?mG(t,e):Fv(t)?eh(t):Array.isArray(t)?t.map(r=>fE(r,e)||Kv.easeOut):Kv[t]}function yG(t,e,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:u}={}){const l={[e]:r};u&&(l.offset=u);const d=fE(a,i);return Array.isArray(d)&&(l.easing=d),t.animate(l,{delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function lE(t,e){t.timeline=e,t.onfinish=null}const wG=Wv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),L0=10,xG=2e4;function _G(t){return kv(t.type)||t.type==="spring"||!uE(t.ease)}function EG(t,e){const r=new Hv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const i=[];let s=0;for(;!n.done&&s<xG;)n=r.sample(s),i.push(n.value),s+=L0;return{times:void 0,keyframes:i,duration:s-L0,ease:"linear"}}const hE={anticipate:x8,backInOut:w8,circInOut:E8};function SG(t){return t in hE}class dE extends G8{constructor(e){super(e);const{name:r,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new K8(s,(o,a)=>this.onKeyframesResolved(o,a),r,n,i),this.resolver.scheduleResolve()}initPlayback(e,r){var n;let{duration:i=300,times:s,ease:o,type:a,motionValue:u,name:l,startTime:d}=this.options;if(!(!((n=u.owner)===null||n===void 0)&&n.current))return!1;if(typeof o=="string"&&N0()&&SG(o)&&(o=hE[o]),_G(this.options)){const{onComplete:y,onUpdate:A,motionValue:P,element:O,...D}=this.options,k=EG(e,D);e=k.keyframes,e.length===1&&(e[1]=e[0]),i=k.duration,s=k.times,o=k.ease,a="keyframes"}const p=yG(u.owner.current,l,e,{...this.options,duration:i,times:s,ease:o});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(lE(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:y}=this.options;u.set(I0(e,this.options,r)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return Do(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return Do(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Qs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return Wn;const{animation:n}=r;lE(n,e)}return Wn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:i,type:s,ease:o,times:a}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:l,onUpdate:d,onComplete:p,element:y,...A}=this.options,P=new Hv({...A,keyframes:n,duration:i,type:s,ease:o,times:a,isGenerator:!0}),O=Qs(this.time);l.setWithVelocity(P.sample(O-L0).value,P.sample(O).value,L0)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return wG()&&n&&pG.has(n)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const AG=Wv(()=>window.ScrollTimeline!==void 0);class PG{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,r){return Promise.all(this.animations).then(e).catch(r)}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(i=>AG()&&i.attachTimeline?i.attachTimeline(e):r(i));return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function MG({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:l,...d}){return!!Object.keys(d).length}const Vv=(t,e,r,n={},i,s)=>o=>{const a=xv(n,t)||{},u=a.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Qs(u);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:y=>{e.set(y),a.onUpdate&&a.onUpdate(y)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};MG(a)||(d={...d,...KK(t,d)}),d.duration&&(d.duration=Qs(d.duration)),d.repeatDelay&&(d.repeatDelay=Qs(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const y=I0(d.keyframes,a);if(y!==void 0)return Nr.update(()=>{d.onUpdate(y),d.onComplete()}),new PG([])}return!s&&dE.supports(d)?new dE(d):new Hv(d)},IG=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),CG=t=>vv(t)?t[t.length-1]||0:t;function Gv(t,e){t.indexOf(e)===-1&&t.push(e)}function Yv(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Jv{constructor(){this.subscriptions=[]}add(e){return Gv(this.subscriptions,e),()=>Yv(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pE=30,TG=t=>!isNaN(parseFloat(t));class RG{constructor(e,r={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=to.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=to.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=TG(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return process.env.NODE_ENV!=="production"&&A0(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Jv);const n=this.events[e].add(r);return e==="change"?()=>{n(),Nr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=to.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>pE)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,pE);return Y8(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function th(t,e){return new RG(t,e)}function DG(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,th(r))}function OG(t,e){const r=M0(t,e);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const o in s){const a=CG(s[o]);DG(t,o,a)}}const Xv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gE="data-"+Xv("framerAppearId");function mE(t){return t.props[gE]}const Qn=t=>!!(t&&t.getVelocity);function NG(t){return!!(Qn(t)&&t.add)}function Zv(t,e){const r=t.getValue("willChange");if(NG(r))return r.add(e)}function LG({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function vE(t,e,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=e;n&&(o=n);const l=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const p in u){const y=t.getValue(p,(s=t.latestValues[p])!==null&&s!==void 0?s:null),A=u[p];if(A===void 0||d&&LG(d,p))continue;const P={delay:r,...xv(o||{},p)};let O=!1;if(window.MotionHandoffAnimation){const k=mE(t);if(k){const B=window.MotionHandoffAnimation(k,p,Nr);B!==null&&(P.startTime=B,O=!0)}}Zv(t,p),y.start(Vv(p,y,A,t.shouldReduceMotion&&bc.has(p)?{type:!1}:P,t,O));const D=y.animation;D&&l.push(D)}return a&&Promise.all(l).then(()=>{Nr.update(()=>{a&&OG(t,a)})}),l}function Qv(t,e,r={}){var n;const i=M0(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const o=i?()=>Promise.all(vE(t,i,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:y}=s;return kG(t,e,d+l,p,y,r)}:()=>Promise.resolve(),{when:u}=s;if(u){const[l,d]=u==="beforeChildren"?[o,a]:[a,o];return l().then(()=>d())}else return Promise.all([o(),a(r.delay)])}function kG(t,e,r=0,n=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*n,u=i===1?(l=0)=>l*n:(l=0)=>a-l*n;return Array.from(t.variantChildren).sort(BG).forEach((l,d)=>{l.notify("AnimationStart",e),o.push(Qv(l,e,{...s,delay:r+u(d)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(o)}function BG(t,e){return t.sortNodePosition(e)}function $G(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>Qv(t,s,r));n=Promise.all(i)}else if(typeof e=="string")n=Qv(t,e,r);else{const i=typeof e=="function"?M0(t,e,r.custom):e;n=Promise.all(vE(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const FG=wv.length;function bE(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?bE(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<FG;r++){const n=wv[r],i=t.props[n];(Vl(i)||i===!1)&&(e[n]=i)}return e}const jG=[...yv].reverse(),UG=yv.length;function qG(t){return e=>Promise.all(e.map(({animation:r,options:n})=>$G(t,r,n)))}function zG(t){let e=qG(t),r=yE(),n=!0;const i=u=>(l,d)=>{var p;const y=M0(t,d,u==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(y){const{transition:A,transitionEnd:P,...O}=y;l={...l,...O,...P}}return l};function s(u){e=u(t)}function o(u){const{props:l}=t,d=bE(t.parent)||{},p=[],y=new Set;let A={},P=1/0;for(let D=0;D<UG;D++){const k=jG[D],B=r[k],q=l[k]!==void 0?l[k]:d[k],j=Vl(q),H=k===u?B.isActive:null;H===!1&&(P=D);let J=q===d[k]&&q!==l[k]&&j;if(J&&n&&t.manuallyAnimateOnMount&&(J=!1),B.protectedKeys={...A},!B.isActive&&H===null||!q&&!B.prevProp||P0(q)||typeof q=="boolean")continue;const T=HG(B.prevProp,q);let z=T||k===u&&B.isActive&&!J&&j||D>P&&j,ue=!1;const _e=Array.isArray(q)?q:[q];let G=_e.reduce(i(k),{});H===!1&&(G={});const{prevResolvedValues:E={}}=B,m={...E,...G},f=x=>{z=!0,y.has(x)&&(ue=!0,y.delete(x)),B.needsAnimating[x]=!0;const _=t.getValue(x);_&&(_.liveStyle=!1)};for(const x in m){const _=G[x],S=E[x];if(A.hasOwnProperty(x))continue;let b=!1;vv(_)&&vv(S)?b=!d8(_,S):b=_!==S,b?_!=null?f(x):y.add(x):_!==void 0&&y.has(x)?f(x):B.protectedKeys[x]=!0}B.prevProp=q,B.prevResolvedValues=G,B.isActive&&(A={...A,...G}),n&&t.blockInitialAnimation&&(z=!1),z&&(!(J&&T)||ue)&&p.push(..._e.map(x=>({animation:x,options:{type:k}})))}if(y.size){const D={};y.forEach(k=>{const B=t.getBaseTarget(k),q=t.getValue(k);q&&(q.liveStyle=!0),D[k]=B??null}),p.push({animation:D})}let O=!!p.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(O=!1),n=!1,O?e(p):Promise.resolve()}function a(u,l){var d;if(r[u].isActive===l)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(y=>{var A;return(A=y.animationState)===null||A===void 0?void 0:A.setActive(u,l)}),r[u].isActive=l;const p=o(u);for(const y in r)r[y].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>r,reset:()=>{r=yE(),n=!0}}}function HG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!d8(e,t):!1}function xc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yE(){return{animate:xc(!0),whileInView:xc(),whileHover:xc(),whileTap:xc(),whileDrag:xc(),whileFocus:xc(),exit:xc()}}class _a{constructor(e){this.isMounted=!1,this.node=e}update(){}}class WG extends _a{constructor(e){super(e),e.animationState||(e.animationState=zG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();P0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let KG=0;class VG extends _a{constructor(){super(...arguments),this.id=KG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const GG={animation:{Feature:WG},exit:{Feature:VG}},wE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function k0(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const YG=t=>e=>wE(e)&&t(e,k0(e));function Lo(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function ko(t,e,r,n){return Lo(t,e,YG(r),n)}const xE=(t,e)=>Math.abs(t-e);function JG(t,e){const r=xE(t.x,e.x),n=xE(t.y,e.y);return Math.sqrt(r**2+n**2)}class _E{constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=tb(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,A=JG(p.offset,{x:0,y:0})>=3;if(!y&&!A)return;const{point:P}=p,{timestamp:O}=Kn;this.history.push({...P,timestamp:O});const{onStart:D,onMove:k}=this.handlers;y||(D&&D(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,p)},this.handlePointerMove=(p,y)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=eb(y,this.transformPagePoint),Nr.update(this.updatePoint,!0)},this.handlePointerUp=(p,y)=>{this.end();const{onEnd:A,onSessionEnd:P,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=tb(p.type==="pointercancel"?this.lastMoveEventInfo:eb(y,this.transformPagePoint),this.history);this.startEvent&&A&&A(p,D),P&&P(p,D)},!wE(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const o=k0(e),a=eb(o,this.transformPagePoint),{point:u}=a,{timestamp:l}=Kn;this.history=[{...u,timestamp:l}];const{onSessionStart:d}=r;d&&d(e,tb(a,this.history)),this.removeListeners=No(ko(this.contextWindow,"pointermove",this.handlePointerMove),ko(this.contextWindow,"pointerup",this.handlePointerUp),ko(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ba(this.updatePoint)}}function eb(t,e){return e?{point:e(t.point)}:t}function EE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tb({point:t},e){return{point:t,delta:EE(t,SE(e)),offset:EE(t,XG(e)),velocity:ZG(e,.1)}}function XG(t){return t[0]}function SE(t){return t[t.length-1]}function ZG(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=SE(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>Qs(e)));)r--;if(!n)return{x:0,y:0};const s=Do(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function AE(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const PE=AE("dragHorizontal"),ME=AE("dragVertical");function IE(t){let e=!1;if(t==="y")e=ME();else if(t==="x")e=PE();else{const r=PE(),n=ME();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function CE(){const t=IE(!0);return t?(t(),!1):!0}function Uu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const TE=1e-4,QG=1-TE,eY=1+TE,RE=.01,tY=0-RE,rY=0+RE;function Ni(t){return t.max-t.min}function nY(t,e,r){return Math.abs(t-e)<=r}function DE(t,e,r,n=.5){t.origin=n,t.originPoint=Zr(e.min,e.max,t.origin),t.scale=Ni(r)/Ni(e),t.translate=Zr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=QG&&t.scale<=eY||isNaN(t.scale))&&(t.scale=1),(t.translate>=tY&&t.translate<=rY||isNaN(t.translate))&&(t.translate=0)}function rh(t,e,r,n){DE(t.x,e.x,r.x,n?n.originX:void 0),DE(t.y,e.y,r.y,n?n.originY:void 0)}function OE(t,e,r){t.min=r.min+e.min,t.max=t.min+Ni(e)}function iY(t,e,r){OE(t.x,e.x,r.x),OE(t.y,e.y,r.y)}function NE(t,e,r){t.min=e.min-r.min,t.max=t.min+Ni(e)}function nh(t,e,r){NE(t.x,e.x,r.x),NE(t.y,e.y,r.y)}function sY(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Zr(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Zr(r,t,n.max):Math.min(t,r)),t}function LE(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function oY(t,{top:e,left:r,bottom:n,right:i}){return{x:LE(t.x,r,i),y:LE(t.y,e,n)}}function kE(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function aY(t,e){return{x:kE(t.x,e.x),y:kE(t.y,e.y)}}function cY(t,e){let r=.5;const n=Ni(t),i=Ni(e);return i>n?r=ju(e.min,e.max-n,t.min):n>i&&(r=ju(t.min,t.max-i,e.min)),ya(0,1,r)}function uY(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const rb=.35;function fY(t=rb){return t===!1?t=0:t===!0&&(t=rb),{x:BE(t,"left","right"),y:BE(t,"top","bottom")}}function BE(t,e,r){return{min:$E(t,e),max:$E(t,r)}}function $E(t,e){return typeof t=="number"?t:t[e]||0}const FE=()=>({translate:0,scale:1,origin:0,originPoint:0}),qu=()=>({x:FE(),y:FE()}),jE=()=>({min:0,max:0}),ln=()=>({x:jE(),y:jE()});function rs(t){return[t("x"),t("y")]}function UE({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function lY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function hY(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function nb(t){return t===void 0||t===1}function ib({scale:t,scaleX:e,scaleY:r}){return!nb(t)||!nb(e)||!nb(r)}function _c(t){return ib(t)||qE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function qE(t){return zE(t.x)||zE(t.y)}function zE(t){return t&&t!=="0%"}function B0(t,e,r){const n=t-r,i=e*n;return r+i}function HE(t,e,r,n,i){return i!==void 0&&(t=B0(t,i,n)),B0(t,r,n)+e}function sb(t,e=0,r=1,n,i){t.min=HE(t.min,e,r,n,i),t.max=HE(t.max,e,r,n,i)}function WE(t,{x:e,y:r}){sb(t.x,e.translate,e.scale,e.originPoint),sb(t.y,r.translate,r.scale,r.originPoint)}const KE=.999999999999,VE=1.0000000000001;function dY(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=r[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Hu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,WE(t,o)),n&&_c(s.latestValues)&&Hu(t,s.latestValues))}e.x<VE&&e.x>KE&&(e.x=1),e.y<VE&&e.y>KE&&(e.y=1)}function zu(t,e){t.min=t.min+e,t.max=t.max+e}function GE(t,e,r,n,i=.5){const s=Zr(t.min,t.max,i);sb(t,e,r,s,n)}function Hu(t,e){GE(t.x,e.x,e.scaleX,e.scale,e.originX),GE(t.y,e.y,e.scaleY,e.scale,e.originY)}function YE(t,e){return UE(hY(t.getBoundingClientRect(),e))}function pY(t,e,r){const n=YE(t,r),{scroll:i}=e;return i&&(zu(n.x,i.offset.x),zu(n.y,i.offset.y)),n}const JE=({current:t})=>t?t.ownerDocument.defaultView:null,gY=new WeakMap;class mY{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(k0(d,"page").point)},s=(d,p)=>{const{drag:y,dragPropagation:A,onDragStart:P}=this.getProps();if(y&&!A&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=IE(y),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rs(D=>{let k=this.getAxisMotionValue(D).get()||0;if(eo.test(k)){const{projection:B}=this.visualElement;if(B&&B.layout){const q=B.layout.layoutBox[D];q&&(k=Ni(q)*(parseFloat(k)/100))}}this.originPoint[D]=k}),P&&Nr.postRender(()=>P(d,p)),Zv(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},o=(d,p)=>{const{dragPropagation:y,dragDirectionLock:A,onDirectionLock:P,onDrag:O}=this.getProps();if(!y&&!this.openGlobalLock)return;const{offset:D}=p;if(A&&this.currentDirection===null){this.currentDirection=vY(D),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",p.point,D),this.updateAxis("y",p.point,D),this.visualElement.render(),O&&O(d,p)},a=(d,p)=>this.stop(d,p),u=()=>rs(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new _E(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:JE(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Nr.postRender(()=>s(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!$0(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=sY(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;r&&Uu(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=oY(i.layoutBox,r):this.constraints=!1,this.elastic=fY(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&rs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=uY(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Uu(e))return!1;const n=e.current;Oo(n!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=pY(n,i.root,this.visualElement.getTransformPagePoint());let o=aY(i.layout.layoutBox,s);if(r){const a=r(lY(o));this.hasMutatedConstraints=!!a,a&&(o=UE(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},l=rs(d=>{if(!$0(d,r,this.currentDirection))return;let p=u&&u[d]||{};o&&(p={min:0,max:0});const y=i?200:1e6,A=i?40:1e7,P={type:"inertia",velocity:n?e[d]:0,bounceStiffness:y,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(d,P)});return Promise.all(l).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return Zv(this.visualElement,e),n.start(Vv(e,n,0,r,this.visualElement,!1))}stopAnimation(){rs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rs(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){rs(r=>{const{drag:n}=this.getProps();if(!$0(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[r];s.set(e[r]-Zr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Uu(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};rs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=cY({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),rs(o=>{if(!$0(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:l}=this.constraints[o];a.set(Zr(u,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;gY.set(this.visualElement,this);const e=this.visualElement.current,r=ko(e,"pointerdown",u=>{const{drag:l,dragListener:d=!0}=this.getProps();l&&d&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Uu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Nr.read(n);const o=Lo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(rs(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=u[d].translate,p.set(p.get()+u[d].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=rb,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function $0(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function vY(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class bY extends _a{constructor(e){super(e),this.removeGroupControls=Wn,this.removeListeners=Wn,this.controls=new mY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const XE=t=>(e,r)=>{t&&Nr.postRender(()=>t(e,r))};class yY extends _a{constructor(){super(...arguments),this.removePointerDownListener=Wn}onPointerDown(e){this.session=new _E(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:XE(e),onStart:XE(r),onMove:n,onEnd:(s,o)=>{delete this.session,i&&Nr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ko(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const F0=Se.createContext(null);function wY(){const t=Se.useContext(F0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,i=Se.useId();Se.useEffect(()=>n(i),[]);const s=Se.useCallback(()=>r&&r(i),[i,r]);return!e&&r?[!1,s]:[!0]}const ob=Se.createContext({}),ZE=Se.createContext({}),j0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ih={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(zt.test(t))t=parseFloat(t);else return t;const r=QE(t,e.target.x),n=QE(t,e.target.y);return`${r}% ${n}%`}},xY={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=xa.parse(t);if(i.length>5)return n;const s=xa.createTransformer(t),o=typeof i[0]!="number"?1:0,a=r.x.scale*e.x,u=r.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const l=Zr(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),s(i)}},U0={};function _Y(t){Object.assign(U0,t)}const{schedule:ab}=g8(queueMicrotask,!1);class EY extends Se.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;_Y(SY),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),j0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Nr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ab.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eS(t){const[e,r]=wY(),n=Se.useContext(ob);return de.jsx(EY,{...t,layoutGroup:n,switchLayoutGroup:Se.useContext(ZE),isPresent:e,safeToRemove:r})}const SY={borderRadius:{...ih,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ih,borderTopRightRadius:ih,borderBottomLeftRadius:ih,borderBottomRightRadius:ih,boxShadow:xY},tS=["TopLeft","TopRight","BottomLeft","BottomRight"],AY=tS.length,rS=t=>typeof t=="string"?parseFloat(t):t,nS=t=>typeof t=="number"||zt.test(t);function PY(t,e,r,n,i,s){i?(t.opacity=Zr(0,r.opacity!==void 0?r.opacity:1,MY(n)),t.opacityExit=Zr(e.opacity!==void 0?e.opacity:1,0,IY(n))):s&&(t.opacity=Zr(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<AY;o++){const a=`border${tS[o]}Radius`;let u=iS(e,a),l=iS(r,a);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||nS(u)===nS(l)?(t[a]=Math.max(Zr(rS(u),rS(l),n),0),(eo.test(l)||eo.test(u))&&(t[a]+="%")):t[a]=l}(e.rotate||r.rotate)&&(t.rotate=Zr(e.rotate||0,r.rotate||0,n))}function iS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const MY=sS(0,.5,_8),IY=sS(.5,.95,Wn);function sS(t,e,r){return n=>n<t?0:n>e?1:r(ju(t,e,n))}function oS(t,e){t.min=e.min,t.max=e.max}function ns(t,e){oS(t.x,e.x),oS(t.y,e.y)}function aS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function cS(t,e,r,n,i){return t-=e,t=B0(t,1/r,n),i!==void 0&&(t=B0(t,1/i,n)),t}function CY(t,e=0,r=1,n=.5,i,s=t,o=t){if(eo.test(e)&&(e=parseFloat(e),e=Zr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Zr(s.min,s.max,n);t===s&&(a-=e),t.min=cS(t.min,e,r,a,i),t.max=cS(t.max,e,r,a,i)}function uS(t,e,[r,n,i],s,o){CY(t,e[r],e[n],e[i],e.scale,s,o)}const TY=["x","scaleX","originX"],RY=["y","scaleY","originY"];function fS(t,e,r,n){uS(t.x,e,TY,r?r.x:void 0,n?n.x:void 0),uS(t.y,e,RY,r?r.y:void 0,n?n.y:void 0)}function lS(t){return t.translate===0&&t.scale===1}function hS(t){return lS(t.x)&&lS(t.y)}function dS(t,e){return t.min===e.min&&t.max===e.max}function DY(t,e){return dS(t.x,e.x)&&dS(t.y,e.y)}function pS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function gS(t,e){return pS(t.x,e.x)&&pS(t.y,e.y)}function mS(t){return Ni(t.x)/Ni(t.y)}function vS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class OY{constructor(){this.members=[]}add(e){Gv(this.members,e),e.scheduleRender()}remove(e){if(Yv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NY(t,e,r){let n="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:l,rotate:d,rotateX:p,rotateY:y,skewX:A,skewY:P}=r;l&&(n=`perspective(${l}px) ${n}`),d&&(n+=`rotate(${d}deg) `),p&&(n+=`rotateX(${p}deg) `),y&&(n+=`rotateY(${y}deg) `),A&&(n+=`skewX(${A}deg) `),P&&(n+=`skewY(${P}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(n+=`scale(${a}, ${u})`),n||"none"}const LY=(t,e)=>t.depth-e.depth;class kY{constructor(){this.children=[],this.isDirty=!1}add(e){Gv(this.children,e),this.isDirty=!0}remove(e){Yv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(LY),this.isDirty=!1,this.children.forEach(e)}}function q0(t){const e=Qn(t)?t.get():t;return IG(e)?e.toValue():e}function BY(t,e){const r=to.now(),n=({timestamp:i})=>{const s=i-r;s>=e&&(ba(n),t(s-e))};return Nr.read(n,!0),()=>ba(n)}function $Y(t){return t instanceof SVGElement&&t.tagName!=="svg"}function FY(t,e,r){const n=Qn(t)?t:th(t);return n.start(Vv("",n,e,r)),n.animation}const Ec={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sh=typeof window<"u"&&window.MotionDebug!==void 0,cb=["","X","Y","Z"],jY={visibility:"hidden"},bS=1e3;let UY=0;function ub(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function yS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=mE(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Nr,!(i||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&yS(n)}function wS({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=UY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sh&&(Ec.totalNodes=Ec.resolvedTargetDeltas=Ec.recalculatedProjection=0),this.nodes.forEach(HY),this.nodes.forEach(YY),this.nodes.forEach(JY),this.nodes.forEach(WY),sh&&window.MotionDebug.record(Ec)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new kY)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$Y(o),this.instance=o;const{layoutId:u,layout:l,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||u)&&(this.isLayoutDirty=!0),t){let p;const y=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=BY(y,250),j0.hasAnimatedSinceResize&&(j0.hasAnimatedSinceResize=!1,this.nodes.forEach(_S))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||l)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeTargetChanged:A,layout:P})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||d.getDefaultTransition()||tJ,{onLayoutAnimationStart:D,onLayoutAnimationComplete:k}=d.getProps(),B=!this.targetLayout||!gS(this.targetLayout,P)||A,q=!y&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||q||y&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,q);const j={...xv(O,"layout"),onPlay:D,onComplete:k};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else y||_S(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=P})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ba(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XY),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xS);return}this.isUpdating||this.nodes.forEach(VY),this.isUpdating=!1,this.nodes.forEach(GY),this.nodes.forEach(qY),this.nodes.forEach(zY),this.clearAllSnapshots();const a=to.now();Kn.delta=ya(0,1e3/60,a-Kn.timestamp),Kn.timestamp=a,Kn.isProcessing=!0,_v.update.process(Kn),_v.preRender.process(Kn),_v.render.process(Kn),Kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ab.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KY),this.sharedNodes.forEach(ZY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!hS(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,d=l!==this.prevTransformTemplateValue;o&&(a||_c(this.latestValues)||d)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),rJ(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ln();const u=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(nJ))){const{scroll:d}=this.root;d&&(zu(u.x,d.offset.x),zu(u.y,d.offset.y))}return u}removeElementScroll(o){var a;const u=ln();if(ns(u,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let l=0;l<this.path.length;l++){const d=this.path[l],{scroll:p,options:y}=d;d!==this.root&&p&&y.layoutScroll&&(p.wasRoot&&ns(u,o),zu(u.x,p.offset.x),zu(u.y,p.offset.y))}return u}applyTransform(o,a=!1){const u=ln();ns(u,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Hu(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),_c(d.latestValues)&&Hu(u,d.latestValues)}return _c(this.latestValues)&&Hu(u,this.latestValues),u}removeTransform(o){const a=ln();ns(a,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!_c(l.latestValues))continue;ib(l.latestValues)&&l.updateSnapshot();const d=ln(),p=l.measurePageBox();ns(d,p),fS(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,d)}return _c(this.latestValues)&&fS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=Kn.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),nh(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ns(this.target,this.layout.layoutBox),WE(this.target,this.targetDelta)):ns(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),nh(this.relativeTargetOrigin,this.target,A.target),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sh&&Ec.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ib(this.parent.latestValues)||qE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Kn.timestamp&&(l=!1),l)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;ns(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,A=this.treeScale.y;dY(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ln());const{target:P}=a;if(!P){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aS(this.prevProjectionDelta.x,this.projectionDelta.x),aS(this.prevProjectionDelta.y,this.projectionDelta.y)),rh(this.projectionDelta,this.layoutCorrected,P,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==A||!vS(this.projectionDelta.x,this.prevProjectionDelta.x)||!vS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",P)),sh&&Ec.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qu(),this.projectionDelta=qu(),this.projectionDeltaWithTransform=qu()}setAnimationOrigin(o,a=!1){const u=this.snapshot,l=u?u.latestValues:{},d={...this.latestValues},p=qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const y=ln(),A=u?u.source:void 0,P=this.layout?this.layout.source:void 0,O=A!==P,D=this.getStack(),k=!D||D.members.length<=1,B=!!(O&&!k&&this.options.crossfade===!0&&!this.path.some(eJ));this.animationProgress=0;let q;this.mixTargetDelta=j=>{const H=j/1e3;ES(p.x,o.x,H),ES(p.y,o.y,H),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nh(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QY(this.relativeTarget,this.relativeTargetOrigin,y,H),q&&DY(this.relativeTarget,q)&&(this.isProjectionDirty=!1),q||(q=ln()),ns(q,this.relativeTarget)),O&&(this.animationValues=d,PY(d,l,this.latestValues,H,B,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ba(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nr.update(()=>{j0.hasAnimatedSinceResize=!0,this.currentAnimation=FY(0,bS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:l,latestValues:d}=o;if(!(!a||!u||!l)){if(this!==o&&this.layout&&l&&IS(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||ln();const p=Ni(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const y=Ni(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+y}ns(a,u),Hu(a,d),rh(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new OY),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const l={};u.z&&ub("z",o,l,this.animationValues);for(let d=0;d<cb.length;d++)ub(`rotate${cb[d]}`,o,l,this.animationValues),ub(`skew${cb[d]}`,o,l,this.animationValues);o.render();for(const d in l)o.setStaticValue(d,l[d]),this.animationValues&&(this.animationValues[d]=l[d]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return jY;const l={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=q0(o==null?void 0:o.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none",l;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=q0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!_c(this.latestValues)&&(O.transform=d?d({},""):"none",this.hasProjected=!1),O}const y=p.animationValues||p.latestValues;this.applyTransformsToTarget(),l.transform=NY(this.projectionDeltaWithTransform,this.treeScale,y),d&&(l.transform=d(y,l.transform));const{x:A,y:P}=this.projectionDelta;l.transformOrigin=`${A.origin*100}% ${P.origin*100}% 0`,p.animationValues?l.opacity=p===this?(u=(a=y.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:l.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const O in U0){if(y[O]===void 0)continue;const{correct:D,applyTo:k}=U0[O],B=l.transform==="none"?y[O]:D(y[O],p);if(k){const q=k.length;for(let j=0;j<q;j++)l[k[j]]=B}else l[O]=B}return this.options.layoutId&&(l.pointerEvents=p===this?q0(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(xS),this.root.sharedNodes.clear()}}}function qY(t){t.updateLayout()}function zY(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,o=r.source!==t.layout.source;s==="size"?rs(p=>{const y=o?r.measuredBox[p]:r.layoutBox[p],A=Ni(y);y.min=n[p].min,y.max=y.min+A}):IS(s,r.layoutBox,n)&&rs(p=>{const y=o?r.measuredBox[p]:r.layoutBox[p],A=Ni(n[p]);y.max=y.min+A,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+A)});const a=qu();rh(a,n,r.layoutBox);const u=qu();o?rh(u,t.applyTransform(i,!0),r.measuredBox):rh(u,n,r.layoutBox);const l=!hS(a);let d=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:y,layout:A}=p;if(y&&A){const P=ln();nh(P,r.layoutBox,y.layoutBox);const O=ln();nh(O,n,A.layoutBox),gS(P,O)||(d=!0),p.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=P,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:u,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function HY(t){sh&&Ec.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function WY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function KY(t){t.clearSnapshot()}function xS(t){t.clearMeasurements()}function VY(t){t.isLayoutDirty=!1}function GY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _S(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function YY(t){t.resolveTargetDelta()}function JY(t){t.calcProjection()}function XY(t){t.resetSkewAndRotation()}function ZY(t){t.removeLeadSnapshot()}function ES(t,e,r){t.translate=Zr(e.translate,0,r),t.scale=Zr(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function SS(t,e,r,n){t.min=Zr(e.min,r.min,n),t.max=Zr(e.max,r.max,n)}function QY(t,e,r,n){SS(t.x,e.x,r.x,n),SS(t.y,e.y,r.y,n)}function eJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const tJ={duration:.45,ease:[.4,0,.1,1]},AS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),PS=AS("applewebkit/")&&!AS("chrome/")?Math.round:Wn;function MS(t){t.min=PS(t.min),t.max=PS(t.max)}function rJ(t){MS(t.x),MS(t.y)}function IS(t,e,r){return t==="position"||t==="preserve-aspect"&&!nY(mS(e),mS(r),.2)}function nJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const iJ=wS({attachResizeListener:(t,e)=>Lo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fb={current:void 0},CS=wS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fb.current){const t=new iJ({});t.mount(window),t.setOptions({layoutScroll:!0}),fb.current=t}return fb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sJ={pan:{Feature:yY},drag:{Feature:bY,ProjectionNode:CS,MeasureLayout:eS}};function TS(t,e){const r=e?"pointerenter":"pointerleave",n=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||CE())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const u=a[n];u&&Nr.postRender(()=>u(s,o))};return ko(t.current,r,i,{passive:!t.getProps()[n]})}class oJ extends _a{mount(){this.unmount=No(TS(this.node,!0),TS(this.node,!1))}unmount(){}}class aJ extends _a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=No(Lo(this.node.current,"focus",()=>this.onFocus()),Lo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const RS=(t,e)=>e?t===e?!0:RS(t,e.parentElement):!1;function lb(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,k0(r))}class cJ extends _a{constructor(){super(...arguments),this.removeStartListeners=Wn,this.removeEndListeners=Wn,this.removeAccessibleListeners=Wn,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=ko(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:d,globalTapTarget:p}=this.node.getProps(),y=!p&&!RS(this.node.current,a.target)?d:l;y&&Nr.update(()=>y(a,u))},{passive:!(n.onTap||n.onPointerUp)}),o=ko(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=No(s,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||lb("up",(u,l)=>{const{onTap:d}=this.node.getProps();d&&Nr.postRender(()=>d(u,l))})};this.removeEndListeners(),this.removeEndListeners=Lo(this.node.current,"keyup",o),lb("down",(a,u)=>{this.startPress(a,u)})},r=Lo(this.node.current,"keydown",e),n=()=>{this.isPressing&&lb("cancel",(s,o)=>this.cancelPress(s,o))},i=Lo(this.node.current,"blur",n);this.removeAccessibleListeners=No(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Nr.postRender(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!CE()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Nr.postRender(()=>n(e,r))}mount(){const e=this.node.getProps(),r=ko(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Lo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=No(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const hb=new WeakMap,db=new WeakMap,uJ=t=>{const e=hb.get(t.target);e&&e(t)},fJ=t=>{t.forEach(uJ)};function lJ({root:t,...e}){const r=t||document;db.has(r)||db.set(r,{});const n=db.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(fJ,{root:t,...e})),n[i]}function hJ(t,e,r){const n=lJ(e);return hb.set(t,r),n.observe(t),()=>{hb.delete(t),n.unobserve(t)}}const dJ={some:0,all:1};class pJ extends _a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:dJ[i]},a=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),y=l?d:p;y&&y(u)};return hJ(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(gJ(e,r))&&this.startObserver()}unmount(){}}function gJ({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const mJ={inView:{Feature:pJ},tap:{Feature:cJ},focus:{Feature:aJ},hover:{Feature:oJ}},vJ={layout:{ProjectionNode:CS,MeasureLayout:eS}},pb=Se.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),z0=Se.createContext({}),gb=typeof window<"u",DS=gb?Se.useLayoutEffect:Se.useEffect,OS=Se.createContext({strict:!1});function bJ(t,e,r,n,i){var s,o;const{visualElement:a}=Se.useContext(z0),u=Se.useContext(OS),l=Se.useContext(F0),d=Se.useContext(pb).reducedMotion,p=Se.useRef();n=n||u.renderer,!p.current&&n&&(p.current=n(t,{visualState:e,parent:a,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const y=p.current,A=Se.useContext(ZE);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&yJ(p.current,r,i,A);const P=Se.useRef(!1);Se.useInsertionEffect(()=>{y&&P.current&&y.update(r,l)});const O=r[gE],D=Se.useRef(!!O&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,O))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,O)));return DS(()=>{y&&(P.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),ab.render(y.render),D.current&&y.animationState&&y.animationState.animateChanges())}),Se.useEffect(()=>{y&&(!D.current&&y.animationState&&y.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,O)}),D.current=!1))}),y}function yJ(t,e,r,n){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:l}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:NS(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Uu(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:u,layoutRoot:l})}function NS(t){if(t)return t.options.allowProjection!==!1?t.projection:NS(t.parent)}function wJ(t,e,r){return Se.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Uu(r)&&(r.current=n))},[e])}function H0(t){return P0(t.animate)||wv.some(e=>Vl(t[e]))}function LS(t){return!!(H0(t)||t.variants)}function xJ(t,e){if(H0(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Vl(r)?r:void 0,animate:Vl(n)?n:void 0}}return t.inherit!==!1?e:{}}function _J(t){const{initial:e,animate:r}=xJ(t,Se.useContext(z0));return Se.useMemo(()=>({initial:e,animate:r}),[kS(e),kS(r)])}function kS(t){return Array.isArray(t)?t.join(" "):t}const BS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wu={};for(const t in BS)Wu[t]={isEnabled:e=>BS[t].some(r=>!!e[r])};function EJ(t){for(const e in t)Wu[e]={...Wu[e],...t[e]}}const SJ=Symbol.for("motionComponentSymbol");function AJ({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){t&&EJ(t);function s(a,u){let l;const d={...Se.useContext(pb),...a,layoutId:PJ(a)},{isStatic:p}=d,y=_J(a),A=n(a,p);if(!p&&gb){MJ(d,t);const P=IJ(d);l=P.MeasureLayout,y.visualElement=bJ(i,A,d,e,P.ProjectionNode)}return de.jsxs(z0.Provider,{value:y,children:[l&&y.visualElement?de.jsx(l,{visualElement:y.visualElement,...d}):null,r(i,a,wJ(A,y.visualElement,u),A,p,y.visualElement)]})}const o=Se.forwardRef(s);return o[SJ]=i,o}function PJ({layoutId:t}){const e=Se.useContext(ob).id;return e&&t!==void 0?e+"-"+t:t}function MJ(t,e){const r=Se.useContext(OS).strict;if(process.env.NODE_ENV!=="production"&&e&&r){const n="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";t.ignoreStrict?ku(!1,n):Oo(!1,n)}}function IJ(t){const{drag:e,layout:r}=Wu;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const CJ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mb(t){return typeof t!="string"||t.includes("-")?!1:!!(CJ.indexOf(t)>-1||/[A-Z]/u.test(t))}function $S(t,{style:e,vars:r},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const s in r)t.style.setProperty(s,r[s])}const FS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jS(t,e,r,n){$S(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(FS.has(i)?i:Xv(i),e.attrs[i])}function US(t,{layout:e,layoutId:r}){return bc.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!U0[t]||t==="opacity")}function vb(t,e,r){var n;const{style:i}=t,s={};for(const o in i)(Qn(i[o])||e.style&&Qn(e.style[o])||US(o,t)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function qS(t,e,r){const n=vb(t,e,r);for(const i in t)if(Qn(t[i])||Qn(e[i])){const s=Gl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=t[i]}return n}function bb(t){const e=Se.useRef(null);return e.current===null&&(e.current=t()),e.current}function TJ({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,i,s){const o={latestValues:RJ(n,i,s,t),renderState:e()};return r&&(o.mount=a=>r(n,a,o)),o}const zS=t=>(e,r)=>{const n=Se.useContext(z0),i=Se.useContext(F0),s=()=>TJ(t,e,n,i);return r?s():bb(s)};function RJ(t,e,r,n){const i={},s=n(t,{});for(const y in s)i[y]=q0(s[y]);let{initial:o,animate:a}=t;const u=H0(t),l=LS(t);e&&l&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const p=d?a:o;if(p&&typeof p!="boolean"&&!P0(p)){const y=Array.isArray(p)?p:[p];for(let A=0;A<y.length;A++){const P=bv(t,y[A]);if(P){const{transitionEnd:O,transition:D,...k}=P;for(const B in k){let q=k[B];if(Array.isArray(q)){const j=d?q.length-1:0;q=q[j]}q!==null&&(i[B]=q)}for(const B in O)i[B]=O[B]}}}return i}const yb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),HS=()=>({...yb(),attrs:{}}),WS=(t,e)=>e&&typeof t=="number"?e.transform(t):t,DJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OJ=Gl.length;function NJ(t,e,r){let n="",i=!0;for(let s=0;s<OJ;s++){const o=Gl[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||r){const l=WS(a,Nv[o]);if(!u){i=!1;const d=DJ[o]||o;n+=`${d}(${l}) `}r&&(e[o]=l)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function wb(t,e,r){const{style:n,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const l=e[u];if(bc.has(u)){o=!0;continue}else if(M8(u)){i[u]=l;continue}else{const d=WS(l,Nv[u]);u.startsWith("origin")?(a=!0,s[u]=d):n[u]=d}}if(e.transform||(o||r?n.transform=NJ(e,t.transform,r):n.transform&&(n.transform="none")),a){const{originX:u="50%",originY:l="50%",originZ:d=0}=s;n.transformOrigin=`${u} ${l} ${d}`}}function KS(t,e,r){return typeof t=="string"?t:zt.transform(e+r*t)}function LJ(t,e,r){const n=KS(e,t.x,t.width),i=KS(r,t.y,t.height);return`${n} ${i}`}const kJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},BJ={offset:"strokeDashoffset",array:"strokeDasharray"};function $J(t,e,r=1,n=0,i=!0){t.pathLength=1;const s=i?kJ:BJ;t[s.offset]=zt.transform(-n);const o=zt.transform(e),a=zt.transform(r);t[s.array]=`${o} ${a}`}function xb(t,{attrX:e,attrY:r,attrScale:n,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...l},d,p){if(wb(t,l,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:A,dimensions:P}=t;y.transform&&(P&&(A.transform=y.transform),delete y.transform),P&&(i!==void 0||s!==void 0||A.transform)&&(A.transformOrigin=LJ(P,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),r!==void 0&&(y.y=r),n!==void 0&&(y.scale=n),o!==void 0&&$J(y,o,a,u,!1)}const _b=t=>typeof t=="string"&&t.toLowerCase()==="svg",FJ={useVisualState:zS({scrapeMotionValuesFromProps:qS,createRenderState:HS,onMount:(t,e,{renderState:r,latestValues:n})=>{Nr.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Nr.render(()=>{xb(r,n,_b(e.tagName),t.transformTemplate),jS(e,r)})}})},jJ={useVisualState:zS({scrapeMotionValuesFromProps:vb,createRenderState:yb})};function VS(t,e,r){for(const n in e)!Qn(e[n])&&!US(n,r)&&(t[n]=e[n])}function UJ({transformTemplate:t},e){return Se.useMemo(()=>{const r=yb();return wb(r,e,t),Object.assign({},r.vars,r.style)},[e])}function qJ(t,e){const r=t.style||{},n={};return VS(n,r,t),Object.assign(n,UJ(t,e)),n}function zJ(t,e){const r={},n=qJ(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const HJ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function W0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||HJ.has(t)}let GS=t=>!W0(t);function WJ(t){t&&(GS=e=>e.startsWith("on")?!W0(e):t(e))}try{WJ(require("@emotion/is-prop-valid").default)}catch{}function KJ(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(GS(i)||r===!0&&W0(i)||!e&&!W0(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function VJ(t,e,r,n){const i=Se.useMemo(()=>{const s=HS();return xb(s,e,_b(n),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};VS(s,t.style,t),i.style={...s,...i.style}}return i}function GJ(t=!1){return(r,n,i,{latestValues:s},o)=>{const u=(mb(r)?VJ:zJ)(n,s,o,r),l=KJ(n,typeof r=="string",t),d=r!==Se.Fragment?{...l,...u,ref:i}:{},{children:p}=n,y=Se.useMemo(()=>Qn(p)?p.get():p,[p]);return Se.createElement(r,{...d,children:y})}}function YJ(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...mb(n)?FJ:jJ,preloadedFeatures:t,useRender:GJ(i),createVisualElement:e,Component:n};return AJ(o)}}const Eb={current:null},YS={current:!1};function JJ(){if(YS.current=!0,!!gb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Eb.current=t.matches;t.addListener(e),e()}else Eb.current=!1}function XJ(t,e,r){for(const n in e){const i=e[n],s=r[n];if(Qn(i))t.addValue(n,i),process.env.NODE_ENV==="development"&&A0(i.version==="11.11.17",`Attempting to mix Motion versions ${i.version} with 11.11.17 may not work as expected.`);else if(Qn(s))t.addValue(n,th(i,{owner:t}));else if(s!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,th(o!==void 0?o:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const JS=new WeakMap,ZJ=[...N8,Zn,xa],QJ=t=>ZJ.find(O8(t)),XS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class eX{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Iv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=to.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Nr.render(this.render,!1,!0))};const{latestValues:u,renderState:l}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=H0(r),this.isVariantNode=LS(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(r,{},this);for(const y in p){const A=p[y];u[y]!==void 0&&Qn(A)&&A.set(u[y],!1)}}mount(e){this.current=e,JS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),YS.current||JJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Eb.current,process.env.NODE_ENV!=="production"&&A0(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected."),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){JS.delete(this.current),this.projection&&this.projection.unmount(),ba(this.notifyUpdate),ba(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=bc.has(e),i=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Nr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Wu){const r=Wu[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<XS.length;n++){const i=XS[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=XJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=th(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(A8(i)||S8(i))?i=parseFloat(i):!QJ(i)&&xa.test(r)&&(i=W8(e,r)),this.setBaseTarget(e,Qn(i)?i.get():i)),Qn(i)?i.get():i}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=bv(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Qn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Jv),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class ZS extends eX{constructor(){super(...arguments),this.KeyframeResolver=K8}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}}function tX(t){return window.getComputedStyle(t)}class rX extends ZS{constructor(){super(...arguments),this.type="html",this.renderInstance=$S}readValueFromInstance(e,r){if(bc.has(r)){const n=Lv(r);return n&&n.default||0}else{const n=tX(e),i=(M8(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return YE(e,r)}build(e,r,n){wb(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return vb(e,r,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class nX extends ZS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(bc.has(r)){const n=Lv(r);return n&&n.default||0}return r=FS.has(r)?r:Xv(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return qS(e,r,n)}build(e,r,n){xb(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,i){jS(e,r,n,i)}mount(e){this.isSVGTag=_b(e.tagName),super.mount(e)}}const iX=(t,e)=>mb(t)?new nX(e):new rX(e,{allowProjection:t!==Se.Fragment}),sX=YJ({...GG,...mJ,...sJ,...vJ},iX),oX=UK(sX);class aX extends Yt.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function cX({children:t,isPresent:e}){const r=Se.useId(),n=Se.useRef(null),i=Se.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Se.useContext(pb);return Se.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:l}=i.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),de.jsx(aX,{isPresent:e,childRef:n,sizeRef:i,children:Yt.cloneElement(t,{ref:n})})}const uX=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=bb(fX),u=Se.useId(),l=Se.useCallback(p=>{a.set(p,!0);for(const y of a.values())if(!y)return;n&&n()},[a,n]),d=Se.useMemo(()=>({id:u,initial:e,isPresent:r,custom:i,onExitComplete:l,register:p=>(a.set(p,!1),()=>a.delete(p))}),s?[Math.random(),l]:[r,l]);return Se.useMemo(()=>{a.forEach((p,y)=>a.set(y,!1))},[r]),Yt.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(t=de.jsx(cX,{isPresent:r,children:t})),de.jsx(F0.Provider,{value:d,children:t})};function fX(){return new Map}const K0=t=>t.key||"";function QS(t){const e=[];return Se.Children.forEach(t,r=>{Se.isValidElement(r)&&e.push(r)}),e}const lX=({children:t,exitBeforeEnter:e,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{Oo(!e,"Replace exitBeforeEnter with mode='wait'");const a=Se.useMemo(()=>QS(t),[t]),u=a.map(K0),l=Se.useRef(!0),d=Se.useRef(a),p=bb(()=>new Map),[y,A]=Se.useState(a),[P,O]=Se.useState(a);DS(()=>{l.current=!1,d.current=a;for(let B=0;B<P.length;B++){const q=K0(P[B]);u.includes(q)?p.delete(q):p.get(q)!==!0&&p.set(q,!1)}},[P,u.length,u.join("-")]);const D=[];if(a!==y){let B=[...a];for(let q=0;q<P.length;q++){const j=P[q],H=K0(j);u.includes(H)||(B.splice(q,0,j),D.push(j))}o==="wait"&&D.length&&(B=D),O(QS(B)),A(a);return}process.env.NODE_ENV!=="production"&&o==="wait"&&P.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:k}=Se.useContext(ob);return de.jsx(de.Fragment,{children:P.map(B=>{const q=K0(B),j=a===P||u.includes(q),H=()=>{if(p.has(q))p.set(q,!0);else return;let J=!0;p.forEach(T=>{T||(J=!1)}),J&&(k==null||k(),O(d.current),i&&i())};return de.jsx(uX,{isPresent:j,initial:!l.current||n?void 0:!1,custom:j?void 0:r,presenceAffectsLayout:s,mode:o,onExitComplete:j?void 0:H,children:B},q)})})},Ss=t=>de.jsx(lX,{children:de.jsx(oX.div,{initial:{x:0,opacity:0},animate:{x:0,opacity:1},exit:{x:30,opacity:0},transition:{duration:.3},className:t.className,children:t.children})});function Sb(t){const{icon:e,title:r,extra:n,onClick:i}=t;function s(){i&&i()}return de.jsxs("div",{className:"xc-rounded-lg xc-group xc-flex xc-cursor-pointer xc-items-center xc-gap-2 xc-border xc-border-white xc-border-opacity-15 xc-px-4 xc-py-2 xc-transition-all hover:xc-shadow-lg",onClick:s,children:[e,r,de.jsxs("div",{className:"xc-relative xc-ml-auto xc-h-6",children:[de.jsx("div",{className:"xc-relative xc-left-0 xc-opacity-100 xc-transition-all group-hover:xc-left-2 group-hover:xc-opacity-0",children:n}),de.jsx("div",{className:"xc-absolute xc-right-2 xc-top-0 xc-text-gray-400 xc-opacity-0 xc-transition-all group-hover:xc-right-0 group-hover:xc-opacity-100",children:de.jsx(NK,{})})]})]})}function hX(t){return t.lastUsed?de.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2 xc-rounded-full xc-py-1 xc-text-xs xc-text-gray-500",children:[de.jsx("div",{className:"xc-h-1 xc-w-1 xc-rounded-full xc-bg-[#009E8C]"}),"Last Used"]}):t.installed?de.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2 xc-rounded-full xc-py-1 xc-text-xs xc-text-gray-500",children:[de.jsx("div",{className:"xc-h-1 xc-w-1 xc-rounded-full xc-bg-[#2596FF]"}),"Installed"]}):null}function e7(t){var o,a;const{wallet:e,onClick:r}=t,n=de.jsx("img",{className:"xc-rounded-md xc-h-5 xc-w-5",src:(o=e.config)==null?void 0:o.image}),i=((a=e.config)==null?void 0:a.name)||"",s=Se.useMemo(()=>hX(e),[e]);return de.jsx(Sb,{icon:n,title:i,extra:s,onClick:()=>r(e)})}function t7(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=t7(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function dX(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=t7(t))&&(n&&(n+=" "),n+=e);return n}const pX=dX,Ab="-",gX=t=>{const e=vX(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const a=o.split(Ab);return a[0]===""&&a.length!==1&&a.shift(),r7(a,e)||mX(o)},getConflictingClassGroupIds:(o,a)=>{const u=r[o]||[];return a&&n[o]?[...u,...n[o]]:u}}},r7=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?r7(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Ab);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},n7=/^\[(.+)\]$/,mX=t=>{if(n7.test(t)){const e=n7.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},vX=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return yX(Object.entries(t.classGroups),r).forEach(([s,o])=>{Pb(o,n,s,e)}),n},Pb=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:i7(e,i);s.classGroupId=r;return}if(typeof i=="function"){if(bX(i)){Pb(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,o])=>{Pb(o,i7(e,s),r,n)})})},i7=(t,e)=>{let r=t;return e.split(Ab).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},bX=t=>t.isThemeGetter,yX=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[r,i]}):t,wX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,o)=>{r.set(s,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){r.has(s)?r.set(s,o):i(s,o)}}},s7="!",xX=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,o=a=>{const u=[];let l=0,d=0,p;for(let D=0;D<a.length;D++){let k=a[D];if(l===0){if(k===i&&(n||a.slice(D,D+s)===e)){u.push(a.slice(d,D)),d=D+s;continue}if(k==="/"){p=D;continue}}k==="["?l++:k==="]"&&l--}const y=u.length===0?a:a.substring(d),A=y.startsWith(s7),P=A?y.substring(1):y,O=p&&p>d?p-d:void 0;return{modifiers:u,hasImportantModifier:A,baseClassName:P,maybePostfixModifierPosition:O}};return r?a=>r({className:a,parseClassName:o}):o},_X=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},EX=t=>({cache:wX(t.cacheSize),parseClassName:xX(t),...gX(t)}),SX=/\s+/,AX=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(SX);let a="";for(let u=o.length-1;u>=0;u-=1){const l=o[u],{modifiers:d,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:A}=r(l);let P=!!A,O=n(P?y.substring(0,A):y);if(!O){if(!P){a=l+(a.length>0?" "+a:a);continue}if(O=n(y),!O){a=l+(a.length>0?" "+a:a);continue}P=!1}const D=_X(d).join(":"),k=p?D+s7:D,B=k+O;if(s.includes(B))continue;s.push(B);const q=i(O,P);for(let j=0;j<q.length;++j){const H=q[j];s.push(k+H)}a=l+(a.length>0?" "+a:a)}return a};function PX(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=o7(e))&&(n&&(n+=" "),n+=r);return n}const o7=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=o7(t[n]))&&(r&&(r+=" "),r+=e);return r};function MX(t,...e){let r,n,i,s=o;function o(u){const l=e.reduce((d,p)=>p(d),t());return r=EX(l),n=r.cache.get,i=r.cache.set,s=a,a(u)}function a(u){const l=n(u);if(l)return l;const d=AX(u,r);return i(u,d),d}return function(){return s(PX.apply(null,arguments))}}const Gr=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},a7=/^\[(?:([a-z-]+):)?(.+)\]$/i,IX=/^\d+\/\d+$/,CX=new Set(["px","full","screen"]),TX=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RX=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DX=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,OX=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NX=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bo=t=>Ku(t)||CX.has(t)||IX.test(t),Ea=t=>Vu(t,"length",qX),Ku=t=>!!t&&!Number.isNaN(Number(t)),Mb=t=>Vu(t,"number",Ku),oh=t=>!!t&&Number.isInteger(Number(t)),LX=t=>t.endsWith("%")&&Ku(t.slice(0,-1)),cr=t=>a7.test(t),Sa=t=>TX.test(t),kX=new Set(["length","size","percentage"]),BX=t=>Vu(t,kX,c7),$X=t=>Vu(t,"position",c7),FX=new Set(["image","url"]),jX=t=>Vu(t,FX,HX),UX=t=>Vu(t,"",zX),ah=()=>!0,Vu=(t,e,r)=>{const n=a7.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},qX=t=>RX.test(t)&&!DX.test(t),c7=()=>!1,zX=t=>OX.test(t),HX=t=>NX.test(t),WX=MX(()=>{const t=Gr("colors"),e=Gr("spacing"),r=Gr("blur"),n=Gr("brightness"),i=Gr("borderColor"),s=Gr("borderRadius"),o=Gr("borderSpacing"),a=Gr("borderWidth"),u=Gr("contrast"),l=Gr("grayscale"),d=Gr("hueRotate"),p=Gr("invert"),y=Gr("gap"),A=Gr("gradientColorStops"),P=Gr("gradientColorStopPositions"),O=Gr("inset"),D=Gr("margin"),k=Gr("opacity"),B=Gr("padding"),q=Gr("saturate"),j=Gr("scale"),H=Gr("sepia"),J=Gr("skew"),T=Gr("space"),z=Gr("translate"),ue=()=>["auto","contain","none"],_e=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",cr,e],E=()=>[cr,e],m=()=>["",Bo,Ea],f=()=>["auto",Ku,cr],g=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],v=()=>["solid","dashed","dotted","double","none"],x=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_=()=>["start","end","center","between","around","evenly","stretch"],S=()=>["","0",cr],b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[Ku,cr];return{cacheSize:500,separator:":",theme:{colors:[ah],spacing:[Bo,Ea],blur:["none","",Sa,cr],brightness:M(),borderColor:[t],borderRadius:["none","","full",Sa,cr],borderSpacing:E(),borderWidth:m(),contrast:M(),grayscale:S(),hueRotate:M(),invert:S(),gap:E(),gradientColorStops:[t],gradientColorStopPositions:[LX,Ea],inset:G(),margin:G(),opacity:M(),padding:E(),saturate:M(),scale:M(),sepia:S(),skew:M(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",cr]}],container:["container"],columns:[{columns:[Sa]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...g(),cr]}],overflow:[{overflow:_e()}],"overflow-x":[{"overflow-x":_e()}],"overflow-y":[{"overflow-y":_e()}],overscroll:[{overscroll:ue()}],"overscroll-x":[{"overscroll-x":ue()}],"overscroll-y":[{"overscroll-y":ue()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[O]}],"inset-x":[{"inset-x":[O]}],"inset-y":[{"inset-y":[O]}],start:[{start:[O]}],end:[{end:[O]}],top:[{top:[O]}],right:[{right:[O]}],bottom:[{bottom:[O]}],left:[{left:[O]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",oh,cr]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",cr]}],grow:[{grow:S()}],shrink:[{shrink:S()}],order:[{order:["first","last","none",oh,cr]}],"grid-cols":[{"grid-cols":[ah]}],"col-start-end":[{col:["auto",{span:["full",oh,cr]},cr]}],"col-start":[{"col-start":f()}],"col-end":[{"col-end":f()}],"grid-rows":[{"grid-rows":[ah]}],"row-start-end":[{row:["auto",{span:[oh,cr]},cr]}],"row-start":[{"row-start":f()}],"row-end":[{"row-end":f()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",cr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",cr]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",..._()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[B]}],px:[{px:[B]}],py:[{py:[B]}],ps:[{ps:[B]}],pe:[{pe:[B]}],pt:[{pt:[B]}],pr:[{pr:[B]}],pb:[{pb:[B]}],pl:[{pl:[B]}],m:[{m:[D]}],mx:[{mx:[D]}],my:[{my:[D]}],ms:[{ms:[D]}],me:[{me:[D]}],mt:[{mt:[D]}],mr:[{mr:[D]}],mb:[{mb:[D]}],ml:[{ml:[D]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",cr,e]}],"min-w":[{"min-w":[cr,e,"min","max","fit"]}],"max-w":[{"max-w":[cr,e,"none","full","min","max","fit","prose",{screen:[Sa]},Sa]}],h:[{h:[cr,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[cr,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[cr,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[cr,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Sa,Ea]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Mb]}],"font-family":[{font:[ah]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",cr]}],"line-clamp":[{"line-clamp":["none",Ku,Mb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Bo,cr]}],"list-image":[{"list-image":["none",cr]}],"list-style-type":[{list:["none","disc","decimal",cr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...v(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Bo,Ea]}],"underline-offset":[{"underline-offset":["auto",Bo,cr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",cr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",cr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...g(),$X]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",BX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jX]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[P]}],"gradient-via-pos":[{via:[P]}],"gradient-to-pos":[{to:[P]}],"gradient-from":[{from:[A]}],"gradient-via":[{via:[A]}],"gradient-to":[{to:[A]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...v(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:v()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...v()]}],"outline-offset":[{"outline-offset":[Bo,cr]}],"outline-w":[{outline:[Bo,Ea]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:m()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Bo,Ea]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Sa,UX]}],"shadow-color":[{shadow:[ah]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...x(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":x()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Sa,cr]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[q]}],sepia:[{sepia:[H]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[q]}],"backdrop-sepia":[{"backdrop-sepia":[H]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",cr]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",cr]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",cr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[oh,cr]}],"translate-x":[{"translate-x":[z]}],"translate-y":[{"translate-y":[z]}],"skew-x":[{"skew-x":[J]}],"skew-y":[{"skew-y":[J]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",cr]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",cr]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",cr]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Bo,Ea,Mb]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function $o(...t){return WX(pX(t))}function u7(t){const{className:e}=t;return de.jsxs("div",{className:$o("xc-flex xc-items-center xc-gap-2"),children:[de.jsx("hr",{className:$o("xc-flex-1 xc-border-gray-200",e)}),de.jsx("div",{className:"xc-shrink-0",children:t.children}),de.jsx("hr",{className:$o("xc-flex-1 xc-border-gray-200",e)})]})}function KX(t){var n;const{wallet:e,onClick:r}=t;return de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-gap-4",children:[de.jsx("img",{className:"xc-rounded-md xc-h-16 xc-w-16",src:(n=e.config)==null?void 0:n.image,alt:""}),de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[de.jsx("p",{className:"xc-text-danger xc-mb-2 xc-text-center",children:"Connect to Binance Wallet"}),de.jsx("div",{className:"xc-flex xc-gap-2",children:de.jsx("button",{className:"xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1",onClick:()=>r(e),children:"Connect"})})]})]})}const VX="https://static.codatta.io/codatta-connect/wallet-icons.svg?v=2#ton";function GX(t){const{onClick:e}=t;function r(){e&&e()}return de.jsx(u7,{className:"xc-opacity-20",children:de.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2 xc-cursor-pointer",onClick:r,children:[de.jsx("span",{className:"xc-text-sm",children:"View more wallets"}),de.jsx(u8,{size:16})]})})}function f7(t){const[e,r]=Se.useState(""),{featuredWallets:n,initialized:i}=Kl(),{onEmailConfirm:s,onSelectWallet:o,onSelectMoreWallets:a,onSelectTonConnect:u,config:l}=t,d=Se.useMemo(()=>{const O=/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\u{20000}-\u{2a6df}]|[\u{2a700}-\u{2b73f}]|[\u{2b740}-\u{2b81f}]|[\u{2b820}-\u{2ceaf}]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]/gu,D=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!O.test(e)&&D.test(e)},[e]);function p(O){o(O)}function y(O){r(O.target.value)}async function A(){s(e)}function P(O){O.key==="Enter"&&d&&A()}return de.jsx(Ss,{children:i&&de.jsxs(de.Fragment,{children:[t.header||de.jsx("div",{className:"xc-mb-6 xc-text-xl xc-font-bold",children:"Log in or sign up"}),n.length===1&&de.jsx("div",{className:"xc-mb-4 xc-flex xc-max-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:n.map(O=>de.jsx(KX,{wallet:O,onClick:p},`feature-${O.key}`))}),n.length>1&&de.jsxs(de.Fragment,{children:[de.jsxs("div",{children:[de.jsxs("div",{className:"xc-mb-4 xc-flex xc-max-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:[l.showFeaturedWallets&&n&&n.map(O=>de.jsx(e7,{wallet:O,onClick:p},`feature-${O.key}`)),l.showTonConnect&&de.jsx(Sb,{icon:de.jsx("img",{className:"xc-h-5 xc-w-5",src:VX}),title:"TON Connect",onClick:u})]}),l.showMoreWallets&&de.jsx(GX,{onClick:a})]}),l.showEmailSignIn&&(l.showFeaturedWallets||l.showTonConnect)&&de.jsx("div",{className:"xc-mb-4 xc-mt-4",children:de.jsxs(u7,{className:"xc-opacity-20",children:[" ",de.jsx("span",{className:"xc-text-sm xc-opacity-20",children:"OR"})]})}),l.showEmailSignIn&&de.jsxs("div",{className:"xc-mb-4",children:[de.jsx("input",{className:"xc-w-full xc-bg-transparent xc-border-white xc-border xc-border-opacity-15 xc-h-10 xc-rounded-lg xc-px-3 xc-mb-3",placeholder:"Enter your email",type:"email",onChange:y,onKeyDown:P}),de.jsx("button",{disabled:!d,className:"xc-bg-[rgb(135,93,255)] xc-text-white xc-w-full xc-rounded-lg xc-py-2 disabled:xc-bg-opacity-10 disabled:xc-text-opacity-50 disabled:xc-bg-white xc-transition-all",onClick:A,children:"Continue"})]})]})]})})}function Sc(t){const{title:e}=t;return de.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2",children:[de.jsx(OK,{onClick:t.onBack,size:20,className:"xc-cursor-pointer"}),de.jsx("span",{children:e})]})}const l7=Se.createContext({channel:"",device:"WEB",app:"",inviterCode:"",role:"C"});function Ib(){return Se.useContext(l7)}function YX(t){const{config:e}=t,[r,n]=Se.useState(e.channel),[i,s]=Se.useState(e.device),[o,a]=Se.useState(e.app),[u,l]=Se.useState(e.role||"C"),[d,p]=Se.useState(e.inviterCode);return Se.useEffect(()=>{n(e.channel),s(e.device),a(e.app),p(e.inviterCode),l(e.role||"C")},[e]),de.jsx(l7.Provider,{value:{channel:r,device:i,app:o,inviterCode:d,role:u},children:t.children})}var JX=Object.defineProperty,XX=Object.defineProperties,ZX=Object.getOwnPropertyDescriptors,V0=Object.getOwnPropertySymbols,h7=Object.prototype.hasOwnProperty,d7=Object.prototype.propertyIsEnumerable,p7=(t,e,r)=>e in t?JX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,QX=(t,e)=>{for(var r in e||(e={}))h7.call(e,r)&&p7(t,r,e[r]);if(V0)for(var r of V0(e))d7.call(e,r)&&p7(t,r,e[r]);return t},eZ=(t,e)=>XX(t,ZX(e)),tZ=(t,e)=>{var r={};for(var n in t)h7.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&V0)for(var n of V0(t))e.indexOf(n)<0&&d7.call(t,n)&&(r[n]=t[n]);return r};function rZ(t){let e=setTimeout(t,0),r=setTimeout(t,10),n=setTimeout(t,50);return[e,r,n]}function nZ(t){let e=Yt.useRef();return Yt.useEffect(()=>{e.current=t}),e.current}var iZ=18,g7=40,sZ=`${g7}px`,oZ=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function aZ({containerRef:t,inputRef:e,pushPasswordManagerStrategy:r,isFocused:n}){let[i,s]=Yt.useState(!1),[o,a]=Yt.useState(!1),[u,l]=Yt.useState(!1),d=Yt.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&i&&o,[i,o,r]),p=Yt.useCallback(()=>{let y=t.current,A=e.current;if(!y||!A||u||r==="none")return;let P=y,O=P.getBoundingClientRect().left+P.offsetWidth,D=P.getBoundingClientRect().top+P.offsetHeight/2,k=O-iZ,B=D;document.querySelectorAll(oZ).length===0&&document.elementFromPoint(k,B)===y||(s(!0),l(!0))},[t,e,u,r]);return Yt.useEffect(()=>{let y=t.current;if(!y||r==="none")return;function A(){let O=window.innerWidth-y.getBoundingClientRect().right;a(O>=g7)}A();let P=setInterval(A,1e3);return()=>{clearInterval(P)}},[t,r]),Yt.useEffect(()=>{let y=n||document.activeElement===e.current;if(r==="none"||!y)return;let A=setTimeout(p,0),P=setTimeout(p,2e3),O=setTimeout(p,5e3),D=setTimeout(()=>{l(!0)},6e3);return()=>{clearTimeout(A),clearTimeout(P),clearTimeout(O),clearTimeout(D)}},[e,n,r,p]),{hasPWMBadge:i,willPushPWMBadge:d,PWM_BADGE_SPACE_WIDTH:sZ}}var m7=Yt.createContext({}),v7=Yt.forwardRef((t,e)=>{var r=t,{value:n,onChange:i,maxLength:s,textAlign:o="left",pattern:a,placeholder:u,inputMode:l="numeric",onComplete:d,pushPasswordManagerStrategy:p="increase-width",pasteTransformer:y,containerClassName:A,noScriptCSSFallback:P=cZ,render:O,children:D}=r,k=tZ(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),B,q,j,H,J;let[T,z]=Yt.useState(typeof k.defaultValue=="string"?k.defaultValue:""),ue=n??T,_e=nZ(ue),G=Yt.useCallback(ie=>{i==null||i(ie),z(ie)},[i]),E=Yt.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),m=Yt.useRef(null),f=Yt.useRef(null),g=Yt.useRef({value:ue,onChange:G,isIOS:typeof window<"u"&&((q=(B=window==null?void 0:window.CSS)==null?void 0:B.supports)==null?void 0:q.call(B,"-webkit-touch-callout","none"))}),v=Yt.useRef({prev:[(j=m.current)==null?void 0:j.selectionStart,(H=m.current)==null?void 0:H.selectionEnd,(J=m.current)==null?void 0:J.selectionDirection]});Yt.useImperativeHandle(e,()=>m.current,[]),Yt.useEffect(()=>{let ie=m.current,fe=f.current;if(!ie||!fe)return;g.current.value!==ie.value&&g.current.onChange(ie.value),v.current.prev=[ie.selectionStart,ie.selectionEnd,ie.selectionDirection];function ve(){if(document.activeElement!==ie){I(null),ce(null);return}let Te=ie.selectionStart,$e=ie.selectionEnd,Ie=ie.selectionDirection,Le=ie.maxLength,Ve=ie.value,ke=v.current.prev,ze=-1,He=-1,Ee;if(Ve.length!==0&&Te!==null&&$e!==null){let et=Te===$e,rt=Te===Ve.length&&Ve.length<Le;if(et&&!rt){let Je=Te;if(Je===0)ze=0,He=1,Ee="forward";else if(Je===Le)ze=Je-1,He=Je,Ee="backward";else if(Le>1&&Ve.length>1){let pt=0;if(ke[0]!==null&&ke[1]!==null){Ee=Je<ke[1]?"backward":"forward";let ht=ke[0]===ke[1]&&ke[0]<Le;Ee==="backward"&&!ht&&(pt=-1)}ze=pt+Je,He=pt+Je+1}}ze!==-1&&He!==-1&&ze!==He&&m.current.setSelectionRange(ze,He,Ee)}let Qe=ze!==-1?ze:Te,ct=He!==-1?He:$e,Be=Ee??Ie;I(Qe),ce(ct),v.current.prev=[Qe,ct,Be]}if(document.addEventListener("selectionchange",ve,{capture:!0}),ve(),document.activeElement===ie&&b(!0),!document.getElementById("input-otp-style")){let Te=document.createElement("style");if(Te.id="input-otp-style",document.head.appendChild(Te),Te.sheet){let $e="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";ch(Te.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),ch(Te.sheet,`[data-input-otp]:autofill { ${$e} }`),ch(Te.sheet,`[data-input-otp]:-webkit-autofill { ${$e} }`),ch(Te.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),ch(Te.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Me=()=>{fe&&fe.style.setProperty("--root-height",`${ie.clientHeight}px`)};Me();let Ne=new ResizeObserver(Me);return Ne.observe(ie),()=>{document.removeEventListener("selectionchange",ve,{capture:!0}),Ne.disconnect()}},[]);let[x,_]=Yt.useState(!1),[S,b]=Yt.useState(!1),[M,I]=Yt.useState(null),[F,ce]=Yt.useState(null);Yt.useEffect(()=>{rZ(()=>{var ie,fe,ve,Me;(ie=m.current)==null||ie.dispatchEvent(new Event("input"));let Ne=(fe=m.current)==null?void 0:fe.selectionStart,Te=(ve=m.current)==null?void 0:ve.selectionEnd,$e=(Me=m.current)==null?void 0:Me.selectionDirection;Ne!==null&&Te!==null&&(I(Ne),ce(Te),v.current.prev=[Ne,Te,$e])})},[ue,S]),Yt.useEffect(()=>{_e!==void 0&&ue!==_e&&_e.length<s&&ue.length===s&&(d==null||d(ue))},[s,d,_e,ue]);let N=aZ({containerRef:f,inputRef:m,pushPasswordManagerStrategy:p,isFocused:S}),se=Yt.useCallback(ie=>{let fe=ie.currentTarget.value.slice(0,s);if(fe.length>0&&E&&!E.test(fe)){ie.preventDefault();return}typeof _e=="string"&&fe.length<_e.length&&document.dispatchEvent(new Event("selectionchange")),G(fe)},[s,G,_e,E]),ee=Yt.useCallback(()=>{var ie;if(m.current){let fe=Math.min(m.current.value.length,s-1),ve=m.current.value.length;(ie=m.current)==null||ie.setSelectionRange(fe,ve),I(fe),ce(ve)}b(!0)},[s]),X=Yt.useCallback(ie=>{var fe,ve;let Me=m.current;if(!y&&(!g.current.isIOS||!ie.clipboardData||!Me))return;let Ne=ie.clipboardData.getData("text/plain"),Te=y?y(Ne):Ne;console.log({_content:Ne,content:Te}),ie.preventDefault();let $e=(fe=m.current)==null?void 0:fe.selectionStart,Ie=(ve=m.current)==null?void 0:ve.selectionEnd,Le=($e!==Ie?ue.slice(0,$e)+Te+ue.slice(Ie):ue.slice(0,$e)+Te+ue.slice($e)).slice(0,s);if(Le.length>0&&E&&!E.test(Le))return;Me.value=Le,G(Le);let Ve=Math.min(Le.length,s-1),ke=Le.length;Me.setSelectionRange(Ve,ke),I(Ve),ce(ke)},[s,G,E,ue]),Q=Yt.useMemo(()=>({position:"relative",cursor:k.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[k.disabled]),R=Yt.useMemo(()=>({position:"absolute",inset:0,width:N.willPushPWMBadge?`calc(100% + ${N.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:N.willPushPWMBadge?`inset(0 ${N.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[N.PWM_BADGE_SPACE_WIDTH,N.willPushPWMBadge,o]),Z=Yt.useMemo(()=>Yt.createElement("input",eZ(QX({autoComplete:k.autoComplete||"one-time-code"},k),{"data-input-otp":!0,"data-input-otp-placeholder-shown":ue.length===0||void 0,"data-input-otp-mss":M,"data-input-otp-mse":F,inputMode:l,pattern:E==null?void 0:E.source,"aria-placeholder":u,style:R,maxLength:s,value:ue,ref:m,onPaste:ie=>{var fe;X(ie),(fe=k.onPaste)==null||fe.call(k,ie)},onChange:se,onMouseOver:ie=>{var fe;_(!0),(fe=k.onMouseOver)==null||fe.call(k,ie)},onMouseLeave:ie=>{var fe;_(!1),(fe=k.onMouseLeave)==null||fe.call(k,ie)},onFocus:ie=>{var fe;ee(),(fe=k.onFocus)==null||fe.call(k,ie)},onBlur:ie=>{var fe;b(!1),(fe=k.onBlur)==null||fe.call(k,ie)}})),[se,ee,X,l,R,s,F,M,k,E==null?void 0:E.source,ue]),te=Yt.useMemo(()=>({slots:Array.from({length:s}).map((ie,fe)=>{var ve;let Me=S&&M!==null&&F!==null&&(M===F&&fe===M||fe>=M&&fe<F),Ne=ue[fe]!==void 0?ue[fe]:null,Te=ue[0]!==void 0?null:(ve=u==null?void 0:u[fe])!=null?ve:null;return{char:Ne,placeholderChar:Te,isActive:Me,hasFakeCaret:Me&&Ne===null}}),isFocused:S,isHovering:!k.disabled&&x}),[S,x,s,F,M,k.disabled,ue]),le=Yt.useMemo(()=>O?O(te):Yt.createElement(m7.Provider,{value:te},D),[D,te,O]);return Yt.createElement(Yt.Fragment,null,P!==null&&Yt.createElement("noscript",null,Yt.createElement("style",null,P)),Yt.createElement("div",{ref:f,"data-input-otp-container":!0,style:Q,className:A},le,Yt.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Z)))});v7.displayName="Input";function ch(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var cZ=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const b7=Yt.forwardRef(({className:t,containerClassName:e,...r},n)=>de.jsx(v7,{ref:n,containerClassName:$o("xc-flex xc-items-center xc-gap-2 xc-has-[:disabled]:opacity-50",e),className:$o("disabled:xc-cursor-not-allowed",t),...r}));b7.displayName="InputOTP";const y7=Yt.forwardRef(({className:t,...e},r)=>de.jsx("div",{ref:r,className:$o("xc-flex xc-items-center",t),...e}));y7.displayName="InputOTPGroup";const Ac=Yt.forwardRef(({index:t,className:e,...r},n)=>{const i=Yt.useContext(m7),{char:s,hasFakeCaret:o,isActive:a}=i.slots[t];return de.jsxs("div",{ref:n,className:$o("xc-relative xc-rounded-xl xc-text-2xl xc-flex xc-h-12 xc-w-12 xc-items-center xc-justify-center xc-border xc-border-white xc-border-opacity-20 xc-transition-all",a&&"xc-z-10 xc-ring-2 xc-ring-ring xc-ring-[rgb(135,93,255)] xc-ring-offset-background",e),...r,children:[s,o&&de.jsx("div",{className:"xc-pointer-events-none xc-absolute xc-inset-0 xc-flex xc-items-center xc-justify-center",children:de.jsx("div",{className:"xc-h-4 xc-w-px xc-animate-caret-blink xc-bg-foreground xc-duration-1000"})})]})});Ac.displayName="InputOTPSlot";function uZ(t){const{spinning:e,children:r,className:n}=t;return de.jsxs("div",{className:"xc-inline-block xc-relative",children:[r,e&&de.jsx("div",{className:$o("xc-absolute xc-top-0 xc-left-0 xc-w-full xc-h-full xc-bg-black xc-bg-opacity-10 xc-flex xc-items-center xc-justify-center",n),children:de.jsx(vc,{className:"xc-animate-spin"})})]})}function w7(t){const{email:e}=t,[r,n]=Se.useState(0),[i,s]=Se.useState(!1),[o,a]=Se.useState("");async function u(){n(60);const d=setInterval(()=>{n(p=>p===0?(clearInterval(d),0):p-1)},1e3)}async function l(d){if(a(""),!(d.length<6)){s(!0);try{await t.onInputCode(e,d)}catch(p){a(p.message)}s(!1)}}return Se.useEffect(()=>{u()},[]),de.jsxs(Ss,{children:[de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-12",children:[de.jsx(FK,{className:"xc-mb-4",size:60}),de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-8 xc-h-16",children:[de.jsx("p",{className:"xc-text-lg xc-mb-1",children:"We’ve sent a verification code to"}),de.jsx("p",{className:"xc-font-bold xc-text-center",children:e})]}),de.jsx("div",{className:"xc-mb-2 xc-h-12",children:de.jsx(uZ,{spinning:i,className:"xc-rounded-xl",children:de.jsx(b7,{maxLength:6,onChange:l,disabled:i,className:"disabled:xc-opacity-20",children:de.jsx(y7,{children:de.jsxs("div",{className:$o("xc-flex xc-gap-2",i?"xc-opacity-20":""),children:[de.jsx(Ac,{index:0}),de.jsx(Ac,{index:1}),de.jsx(Ac,{index:2}),de.jsx(Ac,{index:3}),de.jsx(Ac,{index:4}),de.jsx(Ac,{index:5})]})})})})}),o&&de.jsx("div",{className:"xc-text-[#ff0000] xc-text-center",children:de.jsx("p",{children:o})})]}),de.jsxs("div",{className:"xc-text-center xc-text-sm xc-text-gray-400",children:["Not get it? ",r?`Resend in ${r}s`:de.jsx("button",{id:"sendCodeButton",onClick:t.onResendCode,children:"Send again"})]}),de.jsx("div",{id:"captcha-element"})]})}function x7(t){const{email:e}=t,[r,n]=Se.useState(!1),[i,s]=Se.useState(""),o=Se.useMemo(()=>`xn-btn-${new Date().getTime()}`,[e]);async function a(y,A){n(!0),s(""),await va.getEmailCode({account_type:"email",email:y},A),n(!1)}async function u(y){try{return await a(e,JSON.stringify(y)),{captchaResult:!0,bizResult:!0}}catch(A){return s(A.message),{captchaResult:!1,bizResult:!1}}}async function l(y){y&&t.onCodeSend()}const d=Se.useRef();function p(y){d.current=y}return Se.useEffect(()=>{if(e)return window.initAliyunCaptcha({SceneId:"tqyu8129d",prefix:"1mfsn5f",mode:"popup",element:"#captcha-element",button:`#${o}`,captchaVerifyCallback:u,onBizResultCallback:l,getInstance:p,slideStyle:{width:360,height:40},language:"en",region:"cn"}),()=>{var y,A;(y=document.getElementById("aliyunCaptcha-mask"))==null||y.remove(),(A=document.getElementById("aliyunCaptcha-window-popup"))==null||A.remove()}},[e]),de.jsxs(Ss,{children:[de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-12",children:[de.jsx(jK,{className:"xc-mb-4",size:60}),de.jsx("button",{className:"xc-border xc-rounded-full xc-bg-white xc-text-black xc-px-8 xc-py-2",id:o,children:r?de.jsx(vc,{className:"xc-animate-spin"}):"I'm not a robot"})]}),i&&de.jsx("div",{className:"xc-text-[#ff0000] xc-text-center",children:de.jsx("p",{children:i})})]})}function fZ(t){const{email:e}=t,r=Ib(),[n,i]=Se.useState("captcha");async function s(o,a){const u=await va.emailLogin({account_type:"email",connector:"codatta_email",account_enum:"C",email_code:a,email:o,inviter_code:r.inviterCode,source:{device:r.device,channel:r.channel,app:r.app}});t.onLogin(u.data)}return de.jsxs(Ss,{children:[de.jsx("div",{className:"xc-mb-12",children:de.jsx(Sc,{title:"Sign in with email",onBack:t.onBack})}),n==="captcha"&&de.jsx(x7,{email:e,onCodeSend:()=>i("verify-email")}),n==="verify-email"&&de.jsx(w7,{email:e,onInputCode:s,onResendCode:()=>i("captcha")})]})}var _7={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(nn,()=>(()=>{var r={873:(o,a)=>{var u,l,d=function(){var p=function(f,g){var v=f,x=k[g],_=null,S=0,b=null,M=[],I={},F=function(te,le){_=function(ie){for(var fe=new Array(ie),ve=0;ve<ie;ve+=1){fe[ve]=new Array(ie);for(var Me=0;Me<ie;Me+=1)fe[ve][Me]=null}return fe}(S=4*v+17),ce(0,0),ce(S-7,0),ce(0,S-7),se(),N(),X(te,le),v>=7&&ee(te),b==null&&(b=R(v,x,M)),Q(b,le)},ce=function(te,le){for(var ie=-1;ie<=7;ie+=1)if(!(te+ie<=-1||S<=te+ie))for(var fe=-1;fe<=7;fe+=1)le+fe<=-1||S<=le+fe||(_[te+ie][le+fe]=0<=ie&&ie<=6&&(fe==0||fe==6)||0<=fe&&fe<=6&&(ie==0||ie==6)||2<=ie&&ie<=4&&2<=fe&&fe<=4)},N=function(){for(var te=8;te<S-8;te+=1)_[te][6]==null&&(_[te][6]=te%2==0);for(var le=8;le<S-8;le+=1)_[6][le]==null&&(_[6][le]=le%2==0)},se=function(){for(var te=B.getPatternPosition(v),le=0;le<te.length;le+=1)for(var ie=0;ie<te.length;ie+=1){var fe=te[le],ve=te[ie];if(_[fe][ve]==null)for(var Me=-2;Me<=2;Me+=1)for(var Ne=-2;Ne<=2;Ne+=1)_[fe+Me][ve+Ne]=Me==-2||Me==2||Ne==-2||Ne==2||Me==0&&Ne==0}},ee=function(te){for(var le=B.getBCHTypeNumber(v),ie=0;ie<18;ie+=1){var fe=!te&&(le>>ie&1)==1;_[Math.floor(ie/3)][ie%3+S-8-3]=fe}for(ie=0;ie<18;ie+=1)fe=!te&&(le>>ie&1)==1,_[ie%3+S-8-3][Math.floor(ie/3)]=fe},X=function(te,le){for(var ie=x<<3|le,fe=B.getBCHTypeInfo(ie),ve=0;ve<15;ve+=1){var Me=!te&&(fe>>ve&1)==1;ve<6?_[ve][8]=Me:ve<8?_[ve+1][8]=Me:_[S-15+ve][8]=Me}for(ve=0;ve<15;ve+=1)Me=!te&&(fe>>ve&1)==1,ve<8?_[8][S-ve-1]=Me:ve<9?_[8][15-ve-1+1]=Me:_[8][15-ve-1]=Me;_[S-8][8]=!te},Q=function(te,le){for(var ie=-1,fe=S-1,ve=7,Me=0,Ne=B.getMaskFunction(le),Te=S-1;Te>0;Te-=2)for(Te==6&&(Te-=1);;){for(var $e=0;$e<2;$e+=1)if(_[fe][Te-$e]==null){var Ie=!1;Me<te.length&&(Ie=(te[Me]>>>ve&1)==1),Ne(fe,Te-$e)&&(Ie=!Ie),_[fe][Te-$e]=Ie,(ve-=1)==-1&&(Me+=1,ve=7)}if((fe+=ie)<0||S<=fe){fe-=ie,ie=-ie;break}}},R=function(te,le,ie){for(var fe=H.getRSBlocks(te,le),ve=J(),Me=0;Me<ie.length;Me+=1){var Ne=ie[Me];ve.put(Ne.getMode(),4),ve.put(Ne.getLength(),B.getLengthInBits(Ne.getMode(),te)),Ne.write(ve)}var Te=0;for(Me=0;Me<fe.length;Me+=1)Te+=fe[Me].dataCount;if(ve.getLengthInBits()>8*Te)throw"code length overflow. ("+ve.getLengthInBits()+">"+8*Te+")";for(ve.getLengthInBits()+4<=8*Te&&ve.put(0,4);ve.getLengthInBits()%8!=0;)ve.putBit(!1);for(;!(ve.getLengthInBits()>=8*Te||(ve.put(236,8),ve.getLengthInBits()>=8*Te));)ve.put(17,8);return function($e,Ie){for(var Le=0,Ve=0,ke=0,ze=new Array(Ie.length),He=new Array(Ie.length),Ee=0;Ee<Ie.length;Ee+=1){var Qe=Ie[Ee].dataCount,ct=Ie[Ee].totalCount-Qe;Ve=Math.max(Ve,Qe),ke=Math.max(ke,ct),ze[Ee]=new Array(Qe);for(var Be=0;Be<ze[Ee].length;Be+=1)ze[Ee][Be]=255&$e.getBuffer()[Be+Le];Le+=Qe;var et=B.getErrorCorrectPolynomial(ct),rt=j(ze[Ee],et.getLength()-1).mod(et);for(He[Ee]=new Array(et.getLength()-1),Be=0;Be<He[Ee].length;Be+=1){var Je=Be+rt.getLength()-He[Ee].length;He[Ee][Be]=Je>=0?rt.getAt(Je):0}}var pt=0;for(Be=0;Be<Ie.length;Be+=1)pt+=Ie[Be].totalCount;var ht=new Array(pt),ft=0;for(Be=0;Be<Ve;Be+=1)for(Ee=0;Ee<Ie.length;Ee+=1)Be<ze[Ee].length&&(ht[ft]=ze[Ee][Be],ft+=1);for(Be=0;Be<ke;Be+=1)for(Ee=0;Ee<Ie.length;Ee+=1)Be<He[Ee].length&&(ht[ft]=He[Ee][Be],ft+=1);return ht}(ve,fe)};I.addData=function(te,le){var ie=null;switch(le=le||"Byte"){case"Numeric":ie=T(te);break;case"Alphanumeric":ie=z(te);break;case"Byte":ie=ue(te);break;case"Kanji":ie=_e(te);break;default:throw"mode:"+le}M.push(ie),b=null},I.isDark=function(te,le){if(te<0||S<=te||le<0||S<=le)throw te+","+le;return _[te][le]},I.getModuleCount=function(){return S},I.make=function(){if(v<1){for(var te=1;te<40;te++){for(var le=H.getRSBlocks(te,x),ie=J(),fe=0;fe<M.length;fe++){var ve=M[fe];ie.put(ve.getMode(),4),ie.put(ve.getLength(),B.getLengthInBits(ve.getMode(),te)),ve.write(ie)}var Me=0;for(fe=0;fe<le.length;fe++)Me+=le[fe].dataCount;if(ie.getLengthInBits()<=8*Me)break}v=te}F(!1,function(){for(var Ne=0,Te=0,$e=0;$e<8;$e+=1){F(!0,$e);var Ie=B.getLostPoint(I);($e==0||Ne>Ie)&&(Ne=Ie,Te=$e)}return Te}())},I.createTableTag=function(te,le){te=te||2;var ie="";ie+='<table style="',ie+=" border-width: 0px; border-style: none;",ie+=" border-collapse: collapse;",ie+=" padding: 0px; margin: "+(le=le===void 0?4*te:le)+"px;",ie+='">',ie+="<tbody>";for(var fe=0;fe<I.getModuleCount();fe+=1){ie+="<tr>";for(var ve=0;ve<I.getModuleCount();ve+=1)ie+='<td style="',ie+=" border-width: 0px; border-style: none;",ie+=" border-collapse: collapse;",ie+=" padding: 0px; margin: 0px;",ie+=" width: "+te+"px;",ie+=" height: "+te+"px;",ie+=" background-color: ",ie+=I.isDark(fe,ve)?"#000000":"#ffffff",ie+=";",ie+='"/>';ie+="</tr>"}return(ie+="</tbody>")+"</table>"},I.createSvgTag=function(te,le,ie,fe){var ve={};typeof arguments[0]=="object"&&(te=(ve=arguments[0]).cellSize,le=ve.margin,ie=ve.alt,fe=ve.title),te=te||2,le=le===void 0?4*te:le,(ie=typeof ie=="string"?{text:ie}:ie||{}).text=ie.text||null,ie.id=ie.text?ie.id||"qrcode-description":null,(fe=typeof fe=="string"?{text:fe}:fe||{}).text=fe.text||null,fe.id=fe.text?fe.id||"qrcode-title":null;var Me,Ne,Te,$e,Ie=I.getModuleCount()*te+2*le,Le="";for($e="l"+te+",0 0,"+te+" -"+te+",0 0,-"+te+"z ",Le+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Le+=ve.scalable?"":' width="'+Ie+'px" height="'+Ie+'px"',Le+=' viewBox="0 0 '+Ie+" "+Ie+'" ',Le+=' preserveAspectRatio="xMinYMin meet"',Le+=fe.text||ie.text?' role="img" aria-labelledby="'+Z([fe.id,ie.id].join(" ").trim())+'"':"",Le+=">",Le+=fe.text?'<title id="'+Z(fe.id)+'">'+Z(fe.text)+"</title>":"",Le+=ie.text?'<description id="'+Z(ie.id)+'">'+Z(ie.text)+"</description>":"",Le+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Le+='<path d="',Ne=0;Ne<I.getModuleCount();Ne+=1)for(Te=Ne*te+le,Me=0;Me<I.getModuleCount();Me+=1)I.isDark(Ne,Me)&&(Le+="M"+(Me*te+le)+","+Te+$e);return(Le+='" stroke="transparent" fill="black"/>')+"</svg>"},I.createDataURL=function(te,le){te=te||2,le=le===void 0?4*te:le;var ie=I.getModuleCount()*te+2*le,fe=le,ve=ie-le;return m(ie,ie,function(Me,Ne){if(fe<=Me&&Me<ve&&fe<=Ne&&Ne<ve){var Te=Math.floor((Me-fe)/te),$e=Math.floor((Ne-fe)/te);return I.isDark($e,Te)?0:1}return 1})},I.createImgTag=function(te,le,ie){te=te||2,le=le===void 0?4*te:le;var fe=I.getModuleCount()*te+2*le,ve="";return ve+="<img",ve+=' src="',ve+=I.createDataURL(te,le),ve+='"',ve+=' width="',ve+=fe,ve+='"',ve+=' height="',ve+=fe,ve+='"',ie&&(ve+=' alt="',ve+=Z(ie),ve+='"'),ve+"/>"};var Z=function(te){for(var le="",ie=0;ie<te.length;ie+=1){var fe=te.charAt(ie);switch(fe){case"<":le+="&lt;";break;case">":le+="&gt;";break;case"&":le+="&amp;";break;case'"':le+="&quot;";break;default:le+=fe}}return le};return I.createASCII=function(te,le){if((te=te||1)<2)return function(ze){ze=ze===void 0?2:ze;var He,Ee,Qe,ct,Be,et=1*I.getModuleCount()+2*ze,rt=ze,Je=et-ze,pt={"██":"█","█ ":"▀"," █":"▄","  ":" "},ht={"██":"▀","█ ":"▀"," █":" ","  ":" "},ft="";for(He=0;He<et;He+=2){for(Qe=Math.floor((He-rt)/1),ct=Math.floor((He+1-rt)/1),Ee=0;Ee<et;Ee+=1)Be="█",rt<=Ee&&Ee<Je&&rt<=He&&He<Je&&I.isDark(Qe,Math.floor((Ee-rt)/1))&&(Be=" "),rt<=Ee&&Ee<Je&&rt<=He+1&&He+1<Je&&I.isDark(ct,Math.floor((Ee-rt)/1))?Be+=" ":Be+="█",ft+=ze<1&&He+1>=Je?ht[Be]:pt[Be];ft+=`
`}return et%2&&ze>0?ft.substring(0,ft.length-et-1)+Array(et+1).join("▀"):ft.substring(0,ft.length-1)}(le);te-=1,le=le===void 0?2*te:le;var ie,fe,ve,Me,Ne=I.getModuleCount()*te+2*le,Te=le,$e=Ne-le,Ie=Array(te+1).join("██"),Le=Array(te+1).join("  "),Ve="",ke="";for(ie=0;ie<Ne;ie+=1){for(ve=Math.floor((ie-Te)/te),ke="",fe=0;fe<Ne;fe+=1)Me=1,Te<=fe&&fe<$e&&Te<=ie&&ie<$e&&I.isDark(ve,Math.floor((fe-Te)/te))&&(Me=0),ke+=Me?Ie:Le;for(ve=0;ve<te;ve+=1)Ve+=ke+`
`}return Ve.substring(0,Ve.length-1)},I.renderTo2dContext=function(te,le){le=le||2;for(var ie=I.getModuleCount(),fe=0;fe<ie;fe++)for(var ve=0;ve<ie;ve++)te.fillStyle=I.isDark(fe,ve)?"black":"white",te.fillRect(fe*le,ve*le,le,le)},I};p.stringToBytes=(p.stringToBytesFuncs={default:function(f){for(var g=[],v=0;v<f.length;v+=1){var x=f.charCodeAt(v);g.push(255&x)}return g}}).default,p.createStringToBytes=function(f,g){var v=function(){for(var _=E(f),S=function(){var N=_.read();if(N==-1)throw"eof";return N},b=0,M={};;){var I=_.read();if(I==-1)break;var F=S(),ce=S()<<8|S();M[String.fromCharCode(I<<8|F)]=ce,b+=1}if(b!=g)throw b+" != "+g;return M}(),x=63;return function(_){for(var S=[],b=0;b<_.length;b+=1){var M=_.charCodeAt(b);if(M<128)S.push(M);else{var I=v[_.charAt(b)];typeof I=="number"?(255&I)==I?S.push(I):(S.push(I>>>8),S.push(255&I)):S.push(x)}}return S}};var y,A,P,O,D,k={L:1,M:0,Q:3,H:2},B=(y=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],A=1335,P=7973,D=function(f){for(var g=0;f!=0;)g+=1,f>>>=1;return g},(O={}).getBCHTypeInfo=function(f){for(var g=f<<10;D(g)-D(A)>=0;)g^=A<<D(g)-D(A);return 21522^(f<<10|g)},O.getBCHTypeNumber=function(f){for(var g=f<<12;D(g)-D(P)>=0;)g^=P<<D(g)-D(P);return f<<12|g},O.getPatternPosition=function(f){return y[f-1]},O.getMaskFunction=function(f){switch(f){case 0:return function(g,v){return(g+v)%2==0};case 1:return function(g,v){return g%2==0};case 2:return function(g,v){return v%3==0};case 3:return function(g,v){return(g+v)%3==0};case 4:return function(g,v){return(Math.floor(g/2)+Math.floor(v/3))%2==0};case 5:return function(g,v){return g*v%2+g*v%3==0};case 6:return function(g,v){return(g*v%2+g*v%3)%2==0};case 7:return function(g,v){return(g*v%3+(g+v)%2)%2==0};default:throw"bad maskPattern:"+f}},O.getErrorCorrectPolynomial=function(f){for(var g=j([1],0),v=0;v<f;v+=1)g=g.multiply(j([1,q.gexp(v)],0));return g},O.getLengthInBits=function(f,g){if(1<=g&&g<10)switch(f){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+f}else if(g<27)switch(f){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+f}else{if(!(g<41))throw"type:"+g;switch(f){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+f}}},O.getLostPoint=function(f){for(var g=f.getModuleCount(),v=0,x=0;x<g;x+=1)for(var _=0;_<g;_+=1){for(var S=0,b=f.isDark(x,_),M=-1;M<=1;M+=1)if(!(x+M<0||g<=x+M))for(var I=-1;I<=1;I+=1)_+I<0||g<=_+I||M==0&&I==0||b==f.isDark(x+M,_+I)&&(S+=1);S>5&&(v+=3+S-5)}for(x=0;x<g-1;x+=1)for(_=0;_<g-1;_+=1){var F=0;f.isDark(x,_)&&(F+=1),f.isDark(x+1,_)&&(F+=1),f.isDark(x,_+1)&&(F+=1),f.isDark(x+1,_+1)&&(F+=1),F!=0&&F!=4||(v+=3)}for(x=0;x<g;x+=1)for(_=0;_<g-6;_+=1)f.isDark(x,_)&&!f.isDark(x,_+1)&&f.isDark(x,_+2)&&f.isDark(x,_+3)&&f.isDark(x,_+4)&&!f.isDark(x,_+5)&&f.isDark(x,_+6)&&(v+=40);for(_=0;_<g;_+=1)for(x=0;x<g-6;x+=1)f.isDark(x,_)&&!f.isDark(x+1,_)&&f.isDark(x+2,_)&&f.isDark(x+3,_)&&f.isDark(x+4,_)&&!f.isDark(x+5,_)&&f.isDark(x+6,_)&&(v+=40);var ce=0;for(_=0;_<g;_+=1)for(x=0;x<g;x+=1)f.isDark(x,_)&&(ce+=1);return v+Math.abs(100*ce/g/g-50)/5*10},O),q=function(){for(var f=new Array(256),g=new Array(256),v=0;v<8;v+=1)f[v]=1<<v;for(v=8;v<256;v+=1)f[v]=f[v-4]^f[v-5]^f[v-6]^f[v-8];for(v=0;v<255;v+=1)g[f[v]]=v;return{glog:function(x){if(x<1)throw"glog("+x+")";return g[x]},gexp:function(x){for(;x<0;)x+=255;for(;x>=256;)x-=255;return f[x]}}}();function j(f,g){if(f.length===void 0)throw f.length+"/"+g;var v=function(){for(var _=0;_<f.length&&f[_]==0;)_+=1;for(var S=new Array(f.length-_+g),b=0;b<f.length-_;b+=1)S[b]=f[b+_];return S}(),x={getAt:function(_){return v[_]},getLength:function(){return v.length},multiply:function(_){for(var S=new Array(x.getLength()+_.getLength()-1),b=0;b<x.getLength();b+=1)for(var M=0;M<_.getLength();M+=1)S[b+M]^=q.gexp(q.glog(x.getAt(b))+q.glog(_.getAt(M)));return j(S,0)},mod:function(_){if(x.getLength()-_.getLength()<0)return x;for(var S=q.glog(x.getAt(0))-q.glog(_.getAt(0)),b=new Array(x.getLength()),M=0;M<x.getLength();M+=1)b[M]=x.getAt(M);for(M=0;M<_.getLength();M+=1)b[M]^=q.gexp(q.glog(_.getAt(M))+S);return j(b,0).mod(_)}};return x}var H=function(){var f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],g=function(x,_){var S={};return S.totalCount=x,S.dataCount=_,S},v={getRSBlocks:function(x,_){var S=function(ee,X){switch(X){case k.L:return f[4*(ee-1)+0];case k.M:return f[4*(ee-1)+1];case k.Q:return f[4*(ee-1)+2];case k.H:return f[4*(ee-1)+3];default:return}}(x,_);if(S===void 0)throw"bad rs block @ typeNumber:"+x+"/errorCorrectionLevel:"+_;for(var b=S.length/3,M=[],I=0;I<b;I+=1)for(var F=S[3*I+0],ce=S[3*I+1],N=S[3*I+2],se=0;se<F;se+=1)M.push(g(ce,N));return M}};return v}(),J=function(){var f=[],g=0,v={getBuffer:function(){return f},getAt:function(x){var _=Math.floor(x/8);return(f[_]>>>7-x%8&1)==1},put:function(x,_){for(var S=0;S<_;S+=1)v.putBit((x>>>_-S-1&1)==1)},getLengthInBits:function(){return g},putBit:function(x){var _=Math.floor(g/8);f.length<=_&&f.push(0),x&&(f[_]|=128>>>g%8),g+=1}};return v},T=function(f){var g=f,v={getMode:function(){return 1},getLength:function(S){return g.length},write:function(S){for(var b=g,M=0;M+2<b.length;)S.put(x(b.substring(M,M+3)),10),M+=3;M<b.length&&(b.length-M==1?S.put(x(b.substring(M,M+1)),4):b.length-M==2&&S.put(x(b.substring(M,M+2)),7))}},x=function(S){for(var b=0,M=0;M<S.length;M+=1)b=10*b+_(S.charAt(M));return b},_=function(S){if("0"<=S&&S<="9")return S.charCodeAt(0)-48;throw"illegal char :"+S};return v},z=function(f){var g=f,v={getMode:function(){return 2},getLength:function(_){return g.length},write:function(_){for(var S=g,b=0;b+1<S.length;)_.put(45*x(S.charAt(b))+x(S.charAt(b+1)),11),b+=2;b<S.length&&_.put(x(S.charAt(b)),6)}},x=function(_){if("0"<=_&&_<="9")return _.charCodeAt(0)-48;if("A"<=_&&_<="Z")return _.charCodeAt(0)-65+10;switch(_){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+_}};return v},ue=function(f){var g=p.stringToBytes(f);return{getMode:function(){return 4},getLength:function(v){return g.length},write:function(v){for(var x=0;x<g.length;x+=1)v.put(g[x],8)}}},_e=function(f){var g=p.stringToBytesFuncs.SJIS;if(!g)throw"sjis not supported.";(function(){var _=g("友");if(_.length!=2||(_[0]<<8|_[1])!=38726)throw"sjis not supported."})();var v=g(f),x={getMode:function(){return 8},getLength:function(_){return~~(v.length/2)},write:function(_){for(var S=v,b=0;b+1<S.length;){var M=(255&S[b])<<8|255&S[b+1];if(33088<=M&&M<=40956)M-=33088;else{if(!(57408<=M&&M<=60351))throw"illegal char at "+(b+1)+"/"+M;M-=49472}M=192*(M>>>8&255)+(255&M),_.put(M,13),b+=2}if(b<S.length)throw"illegal char at "+(b+1)}};return x},G=function(){var f=[],g={writeByte:function(v){f.push(255&v)},writeShort:function(v){g.writeByte(v),g.writeByte(v>>>8)},writeBytes:function(v,x,_){x=x||0,_=_||v.length;for(var S=0;S<_;S+=1)g.writeByte(v[S+x])},writeString:function(v){for(var x=0;x<v.length;x+=1)g.writeByte(v.charCodeAt(x))},toByteArray:function(){return f},toString:function(){var v="";v+="[";for(var x=0;x<f.length;x+=1)x>0&&(v+=","),v+=f[x];return v+"]"}};return g},E=function(f){var g=f,v=0,x=0,_=0,S={read:function(){for(;_<8;){if(v>=g.length){if(_==0)return-1;throw"unexpected end of file./"+_}var M=g.charAt(v);if(v+=1,M=="=")return _=0,-1;M.match(/^\s$/)||(x=x<<6|b(M.charCodeAt(0)),_+=6)}var I=x>>>_-8&255;return _-=8,I}},b=function(M){if(65<=M&&M<=90)return M-65;if(97<=M&&M<=122)return M-97+26;if(48<=M&&M<=57)return M-48+52;if(M==43)return 62;if(M==47)return 63;throw"c:"+M};return S},m=function(f,g,v){for(var x=function(ce,N){var se=ce,ee=N,X=new Array(ce*N),Q={setPixel:function(te,le,ie){X[le*se+te]=ie},write:function(te){te.writeString("GIF87a"),te.writeShort(se),te.writeShort(ee),te.writeByte(128),te.writeByte(0),te.writeByte(0),te.writeByte(0),te.writeByte(0),te.writeByte(0),te.writeByte(255),te.writeByte(255),te.writeByte(255),te.writeString(","),te.writeShort(0),te.writeShort(0),te.writeShort(se),te.writeShort(ee),te.writeByte(0);var le=R(2);te.writeByte(2);for(var ie=0;le.length-ie>255;)te.writeByte(255),te.writeBytes(le,ie,255),ie+=255;te.writeByte(le.length-ie),te.writeBytes(le,ie,le.length-ie),te.writeByte(0),te.writeString(";")}},R=function(te){for(var le=1<<te,ie=1+(1<<te),fe=te+1,ve=Z(),Me=0;Me<le;Me+=1)ve.add(String.fromCharCode(Me));ve.add(String.fromCharCode(le)),ve.add(String.fromCharCode(ie));var Ne,Te,$e,Ie=G(),Le=(Ne=Ie,Te=0,$e=0,{write:function(He,Ee){if(He>>>Ee)throw"length over";for(;Te+Ee>=8;)Ne.writeByte(255&(He<<Te|$e)),Ee-=8-Te,He>>>=8-Te,$e=0,Te=0;$e|=He<<Te,Te+=Ee},flush:function(){Te>0&&Ne.writeByte($e)}});Le.write(le,fe);var Ve=0,ke=String.fromCharCode(X[Ve]);for(Ve+=1;Ve<X.length;){var ze=String.fromCharCode(X[Ve]);Ve+=1,ve.contains(ke+ze)?ke+=ze:(Le.write(ve.indexOf(ke),fe),ve.size()<4095&&(ve.size()==1<<fe&&(fe+=1),ve.add(ke+ze)),ke=ze)}return Le.write(ve.indexOf(ke),fe),Le.write(ie,fe),Le.flush(),Ie.toByteArray()},Z=function(){var te={},le=0,ie={add:function(fe){if(ie.contains(fe))throw"dup key:"+fe;te[fe]=le,le+=1},size:function(){return le},indexOf:function(fe){return te[fe]},contains:function(fe){return te[fe]!==void 0}};return ie};return Q}(f,g),_=0;_<g;_+=1)for(var S=0;S<f;S+=1)x.setPixel(S,_,v(S,_));var b=G();x.write(b);for(var M=function(){var ce=0,N=0,se=0,ee="",X={},Q=function(Z){ee+=String.fromCharCode(R(63&Z))},R=function(Z){if(!(Z<0)){if(Z<26)return 65+Z;if(Z<52)return Z-26+97;if(Z<62)return Z-52+48;if(Z==62)return 43;if(Z==63)return 47}throw"n:"+Z};return X.writeByte=function(Z){for(ce=ce<<8|255&Z,N+=8,se+=1;N>=6;)Q(ce>>>N-6),N-=6},X.flush=function(){if(N>0&&(Q(ce<<6-N),ce=0,N=0),se%3!=0)for(var Z=3-se%3,te=0;te<Z;te+=1)ee+="="},X.toString=function(){return ee},X}(),I=b.toByteArray(),F=0;F<I.length;F+=1)M.writeByte(I[F]);return M.flush(),"data:image/gif;base64,"+M};return p}();d.stringToBytesFuncs["UTF-8"]=function(p){return function(y){for(var A=[],P=0;P<y.length;P++){var O=y.charCodeAt(P);O<128?A.push(O):O<2048?A.push(192|O>>6,128|63&O):O<55296||O>=57344?A.push(224|O>>12,128|O>>6&63,128|63&O):(P++,O=65536+((1023&O)<<10|1023&y.charCodeAt(P)),A.push(240|O>>18,128|O>>12&63,128|O>>6&63,128|63&O))}return A}(p)},(l=typeof(u=function(){return d})=="function"?u.apply(a,[]):u)===void 0||(o.exports=l)}},n={};function i(o){var a=n[o];if(a!==void 0)return a.exports;var u=n[o]={exports:{}};return r[o](u,u.exports,i),u.exports}i.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return i.d(a,{a}),a},i.d=(o,a)=>{for(var u in a)i.o(a,u)&&!i.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:a[u]})},i.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a);var s={};return(()=>{i.d(s,{default:()=>G});const o=E=>!!E&&typeof E=="object"&&!Array.isArray(E);function a(E,...m){if(!m.length)return E;const f=m.shift();return f!==void 0&&o(E)&&o(f)?(E=Object.assign({},E),Object.keys(f).forEach(g=>{const v=E[g],x=f[g];Array.isArray(v)&&Array.isArray(x)?E[g]=x:o(v)&&o(x)?E[g]=a(Object.assign({},v),x):E[g]=x}),a(E,...m)):E}function u(E,m){const f=document.createElement("a");f.download=m,f.href=E,document.body.appendChild(f),f.click(),document.body.removeChild(f)}const l={L:.07,M:.15,Q:.25,H:.3};class d{constructor({svg:m,type:f,window:g}){this._svg=m,this._type=f,this._window=g}draw(m,f,g,v){let x;switch(this._type){case"dots":x=this._drawDot;break;case"classy":x=this._drawClassy;break;case"classy-rounded":x=this._drawClassyRounded;break;case"rounded":x=this._drawRounded;break;case"extra-rounded":x=this._drawExtraRounded;break;default:x=this._drawSquare}x.call(this,{x:m,y:f,size:g,getNeighbor:v})}_rotateFigure({x:m,y:f,size:g,rotation:v=0,draw:x}){var _;const S=m+g/2,b=f+g/2;x(),(_=this._element)===null||_===void 0||_.setAttribute("transform",`rotate(${180*v/Math.PI},${S},${b})`)}_basicDot(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(g+f/2)),this._element.setAttribute("cy",String(v+f/2)),this._element.setAttribute("r",String(f/2))}}))}_basicSquare(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(g)),this._element.setAttribute("y",String(v)),this._element.setAttribute("width",String(f)),this._element.setAttribute("height",String(f))}}))}_basicSideRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h `+f/2+`a ${f/2} ${f/2}, 0, 0, 0, 0 ${-f}`)}}))}_basicCornerRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h ${f}v `+-f/2+`a ${f/2} ${f/2}, 0, 0, 0, ${-f/2} ${-f/2}`)}}))}_basicCornerExtraRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h ${f}a ${f} ${f}, 0, 0, 0, ${-f} ${-f}`)}}))}_basicCornersRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v `+f/2+`a ${f/2} ${f/2}, 0, 0, 0, ${f/2} ${f/2}h `+f/2+"v "+-f/2+`a ${f/2} ${f/2}, 0, 0, 0, ${-f/2} ${-f/2}`)}}))}_drawDot({x:m,y:f,size:g}){this._basicDot({x:m,y:f,size:g,rotation:0})}_drawSquare({x:m,y:f,size:g}){this._basicSquare({x:m,y:f,size:g,rotation:0})}_drawRounded({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,_=v?+v(1,0):0,S=v?+v(0,-1):0,b=v?+v(0,1):0,M=x+_+S+b;if(M!==0)if(M>2||x&&_||S&&b)this._basicSquare({x:m,y:f,size:g,rotation:0});else{if(M===2){let I=0;return x&&S?I=Math.PI/2:S&&_?I=Math.PI:_&&b&&(I=-Math.PI/2),void this._basicCornerRounded({x:m,y:f,size:g,rotation:I})}if(M===1){let I=0;return S?I=Math.PI/2:_?I=Math.PI:b&&(I=-Math.PI/2),void this._basicSideRounded({x:m,y:f,size:g,rotation:I})}}else this._basicDot({x:m,y:f,size:g,rotation:0})}_drawExtraRounded({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,_=v?+v(1,0):0,S=v?+v(0,-1):0,b=v?+v(0,1):0,M=x+_+S+b;if(M!==0)if(M>2||x&&_||S&&b)this._basicSquare({x:m,y:f,size:g,rotation:0});else{if(M===2){let I=0;return x&&S?I=Math.PI/2:S&&_?I=Math.PI:_&&b&&(I=-Math.PI/2),void this._basicCornerExtraRounded({x:m,y:f,size:g,rotation:I})}if(M===1){let I=0;return S?I=Math.PI/2:_?I=Math.PI:b&&(I=-Math.PI/2),void this._basicSideRounded({x:m,y:f,size:g,rotation:I})}}else this._basicDot({x:m,y:f,size:g,rotation:0})}_drawClassy({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,_=v?+v(1,0):0,S=v?+v(0,-1):0,b=v?+v(0,1):0;x+_+S+b!==0?x||S?_||b?this._basicSquare({x:m,y:f,size:g,rotation:0}):this._basicCornerRounded({x:m,y:f,size:g,rotation:Math.PI/2}):this._basicCornerRounded({x:m,y:f,size:g,rotation:-Math.PI/2}):this._basicCornersRounded({x:m,y:f,size:g,rotation:Math.PI/2})}_drawClassyRounded({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,_=v?+v(1,0):0,S=v?+v(0,-1):0,b=v?+v(0,1):0;x+_+S+b!==0?x||S?_||b?this._basicSquare({x:m,y:f,size:g,rotation:0}):this._basicCornerExtraRounded({x:m,y:f,size:g,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:m,y:f,size:g,rotation:-Math.PI/2}):this._basicCornersRounded({x:m,y:f,size:g,rotation:Math.PI/2})}}class p{constructor({svg:m,type:f,window:g}){this._svg=m,this._type=f,this._window=g}draw(m,f,g,v){let x;switch(this._type){case"square":x=this._drawSquare;break;case"extra-rounded":x=this._drawExtraRounded;break;default:x=this._drawDot}x.call(this,{x:m,y:f,size:g,rotation:v})}_rotateFigure({x:m,y:f,size:g,rotation:v=0,draw:x}){var _;const S=m+g/2,b=f+g/2;x(),(_=this._element)===null||_===void 0||_.setAttribute("transform",`rotate(${180*v/Math.PI},${S},${b})`)}_basicDot(m){const{size:f,x:g,y:v}=m,x=f/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${g+f/2} ${v}a ${f/2} ${f/2} 0 1 0 0.1 0zm 0 ${x}a ${f/2-x} ${f/2-x} 0 1 1 -0.1 0Z`)}}))}_basicSquare(m){const{size:f,x:g,y:v}=m,x=f/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h ${f}v `+-f+`zM ${g+x} ${v+x}h `+(f-2*x)+"v "+(f-2*x)+"h "+(2*x-f)+"z")}}))}_basicExtraRounded(m){const{size:f,x:g,y:v}=m,x=f/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${g} ${v+2.5*x}v `+2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*x} ${2.5*x}h `+2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*x} ${2.5*-x}v `+-2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*-x} ${2.5*-x}h `+-2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*-x} ${2.5*x}M ${g+2.5*x} ${v+x}h `+2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*x} ${1.5*x}v `+2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*-x} ${1.5*x}h `+-2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*-x} ${1.5*-x}v `+-2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*x} ${1.5*-x}`)}}))}_drawDot({x:m,y:f,size:g,rotation:v}){this._basicDot({x:m,y:f,size:g,rotation:v})}_drawSquare({x:m,y:f,size:g,rotation:v}){this._basicSquare({x:m,y:f,size:g,rotation:v})}_drawExtraRounded({x:m,y:f,size:g,rotation:v}){this._basicExtraRounded({x:m,y:f,size:g,rotation:v})}}class y{constructor({svg:m,type:f,window:g}){this._svg=m,this._type=f,this._window=g}draw(m,f,g,v){let x;x=this._type==="square"?this._drawSquare:this._drawDot,x.call(this,{x:m,y:f,size:g,rotation:v})}_rotateFigure({x:m,y:f,size:g,rotation:v=0,draw:x}){var _;const S=m+g/2,b=f+g/2;x(),(_=this._element)===null||_===void 0||_.setAttribute("transform",`rotate(${180*v/Math.PI},${S},${b})`)}_basicDot(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(g+f/2)),this._element.setAttribute("cy",String(v+f/2)),this._element.setAttribute("r",String(f/2))}}))}_basicSquare(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(g)),this._element.setAttribute("y",String(v)),this._element.setAttribute("width",String(f)),this._element.setAttribute("height",String(f))}}))}_drawDot({x:m,y:f,size:g,rotation:v}){this._basicDot({x:m,y:f,size:g,rotation:v})}_drawSquare({x:m,y:f,size:g,rotation:v}){this._basicSquare({x:m,y:f,size:g,rotation:v})}}const A="circle",P=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],O=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class D{constructor(m,f){this._roundSize=g=>this._options.dotsOptions.roundSize?Math.floor(g):g,this._window=f,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(m.width)),this._element.setAttribute("height",String(m.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),m.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${m.width} ${m.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=m.image,this._instanceId=D.instanceCount++,this._options=m}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(m){const f=m.getModuleCount(),g=Math.min(this._options.width,this._options.height)-2*this._options.margin,v=this._options.shape===A?g/Math.sqrt(2):g,x=this._roundSize(v/f);let _={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=m,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:S,qrOptions:b}=this._options,M=S.imageSize*l[b.errorCorrectionLevel],I=Math.floor(M*f*f);_=function({originalHeight:F,originalWidth:ce,maxHiddenDots:N,maxHiddenAxisDots:se,dotSize:ee}){const X={x:0,y:0},Q={x:0,y:0};if(F<=0||ce<=0||N<=0||ee<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const R=F/ce;return X.x=Math.floor(Math.sqrt(N/R)),X.x<=0&&(X.x=1),se&&se<X.x&&(X.x=se),X.x%2==0&&X.x--,Q.x=X.x*ee,X.y=1+2*Math.ceil((X.x*R-1)/2),Q.y=Math.round(Q.x*R),(X.y*X.x>N||se&&se<X.y)&&(se&&se<X.y?(X.y=se,X.y%2==0&&X.x--):X.y-=2,Q.y=X.y*ee,X.x=1+2*Math.ceil((X.y/R-1)/2),Q.x=Math.round(Q.y/R)),{height:Q.y,width:Q.x,hideYDots:X.y,hideXDots:X.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:I,maxHiddenAxisDots:f-14,dotSize:x})}this.drawBackground(),this.drawDots((S,b)=>{var M,I,F,ce,N,se;return!(this._options.imageOptions.hideBackgroundDots&&S>=(f-_.hideYDots)/2&&S<(f+_.hideYDots)/2&&b>=(f-_.hideXDots)/2&&b<(f+_.hideXDots)/2||!((M=P[S])===null||M===void 0)&&M[b]||!((I=P[S-f+7])===null||I===void 0)&&I[b]||!((F=P[S])===null||F===void 0)&&F[b-f+7]||!((ce=O[S])===null||ce===void 0)&&ce[b]||!((N=O[S-f+7])===null||N===void 0)&&N[b]||!((se=O[S])===null||se===void 0)&&se[b-f+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:_.width,height:_.height,count:f,dotSize:x})}drawBackground(){var m,f,g;const v=this._element,x=this._options;if(v){const _=(m=x.backgroundOptions)===null||m===void 0?void 0:m.gradient,S=(f=x.backgroundOptions)===null||f===void 0?void 0:f.color;let b=x.height,M=x.width;if(_||S){const I=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((g=x.backgroundOptions)===null||g===void 0)&&g.round&&(b=M=Math.min(x.width,x.height),I.setAttribute("rx",String(b/2*x.backgroundOptions.round))),I.setAttribute("x",String(this._roundSize((x.width-M)/2))),I.setAttribute("y",String(this._roundSize((x.height-b)/2))),I.setAttribute("width",String(M)),I.setAttribute("height",String(b)),this._backgroundClipPath.appendChild(I),this._createColor({options:_,color:S,additionalRotation:0,x:0,y:0,height:x.height,width:x.width,name:`background-color-${this._instanceId}`})}}}drawDots(m){var f,g;if(!this._qr)throw"QR code is not defined";const v=this._options,x=this._qr.getModuleCount();if(x>v.width||x>v.height)throw"The canvas is too small.";const _=Math.min(v.width,v.height)-2*v.margin,S=v.shape===A?_/Math.sqrt(2):_,b=this._roundSize(S/x),M=this._roundSize((v.width-x*b)/2),I=this._roundSize((v.height-x*b)/2),F=new d({svg:this._element,type:v.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(f=v.dotsOptions)===null||f===void 0?void 0:f.gradient,color:v.dotsOptions.color,additionalRotation:0,x:0,y:0,height:v.height,width:v.width,name:`dot-color-${this._instanceId}`});for(let ce=0;ce<x;ce++)for(let N=0;N<x;N++)m&&!m(ce,N)||!((g=this._qr)===null||g===void 0)&&g.isDark(ce,N)&&(F.draw(M+N*b,I+ce*b,b,(se,ee)=>!(N+se<0||ce+ee<0||N+se>=x||ce+ee>=x)&&!(m&&!m(ce+ee,N+se))&&!!this._qr&&this._qr.isDark(ce+ee,N+se)),F._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(F._element));if(v.shape===A){const ce=this._roundSize((_/b-x)/2),N=x+2*ce,se=M-ce*b,ee=I-ce*b,X=[],Q=this._roundSize(N/2);for(let R=0;R<N;R++){X[R]=[];for(let Z=0;Z<N;Z++)R>=ce-1&&R<=N-ce&&Z>=ce-1&&Z<=N-ce||Math.sqrt((R-Q)*(R-Q)+(Z-Q)*(Z-Q))>Q?X[R][Z]=0:X[R][Z]=this._qr.isDark(Z-2*ce<0?Z:Z>=x?Z-2*ce:Z-ce,R-2*ce<0?R:R>=x?R-2*ce:R-ce)?1:0}for(let R=0;R<N;R++)for(let Z=0;Z<N;Z++)X[R][Z]&&(F.draw(se+Z*b,ee+R*b,b,(te,le)=>{var ie;return!!(!((ie=X[R+le])===null||ie===void 0)&&ie[Z+te])}),F._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(F._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const m=this._element,f=this._options;if(!m)throw"Element code is not defined";const g=this._qr.getModuleCount(),v=Math.min(f.width,f.height)-2*f.margin,x=f.shape===A?v/Math.sqrt(2):v,_=this._roundSize(x/g),S=7*_,b=3*_,M=this._roundSize((f.width-g*_)/2),I=this._roundSize((f.height-g*_)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([F,ce,N])=>{var se,ee,X,Q,R,Z,te,le,ie,fe,ve,Me;const Ne=M+F*_*(g-7),Te=I+ce*_*(g-7);let $e=this._dotsClipPath,Ie=this._dotsClipPath;if((!((se=f.cornersSquareOptions)===null||se===void 0)&&se.gradient||!((ee=f.cornersSquareOptions)===null||ee===void 0)&&ee.color)&&($e=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),$e.setAttribute("id",`clip-path-corners-square-color-${F}-${ce}-${this._instanceId}`),this._defs.appendChild($e),this._cornersSquareClipPath=this._cornersDotClipPath=Ie=$e,this._createColor({options:(X=f.cornersSquareOptions)===null||X===void 0?void 0:X.gradient,color:(Q=f.cornersSquareOptions)===null||Q===void 0?void 0:Q.color,additionalRotation:N,x:Ne,y:Te,height:S,width:S,name:`corners-square-color-${F}-${ce}-${this._instanceId}`})),(R=f.cornersSquareOptions)===null||R===void 0?void 0:R.type){const Le=new p({svg:this._element,type:f.cornersSquareOptions.type,window:this._window});Le.draw(Ne,Te,S,N),Le._element&&$e&&$e.appendChild(Le._element)}else{const Le=new d({svg:this._element,type:f.dotsOptions.type,window:this._window});for(let Ve=0;Ve<P.length;Ve++)for(let ke=0;ke<P[Ve].length;ke++)!((Z=P[Ve])===null||Z===void 0)&&Z[ke]&&(Le.draw(Ne+ke*_,Te+Ve*_,_,(ze,He)=>{var Ee;return!!(!((Ee=P[Ve+He])===null||Ee===void 0)&&Ee[ke+ze])}),Le._element&&$e&&$e.appendChild(Le._element))}if((!((te=f.cornersDotOptions)===null||te===void 0)&&te.gradient||!((le=f.cornersDotOptions)===null||le===void 0)&&le.color)&&(Ie=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Ie.setAttribute("id",`clip-path-corners-dot-color-${F}-${ce}-${this._instanceId}`),this._defs.appendChild(Ie),this._cornersDotClipPath=Ie,this._createColor({options:(ie=f.cornersDotOptions)===null||ie===void 0?void 0:ie.gradient,color:(fe=f.cornersDotOptions)===null||fe===void 0?void 0:fe.color,additionalRotation:N,x:Ne+2*_,y:Te+2*_,height:b,width:b,name:`corners-dot-color-${F}-${ce}-${this._instanceId}`})),(ve=f.cornersDotOptions)===null||ve===void 0?void 0:ve.type){const Le=new y({svg:this._element,type:f.cornersDotOptions.type,window:this._window});Le.draw(Ne+2*_,Te+2*_,b,N),Le._element&&Ie&&Ie.appendChild(Le._element)}else{const Le=new d({svg:this._element,type:f.dotsOptions.type,window:this._window});for(let Ve=0;Ve<O.length;Ve++)for(let ke=0;ke<O[Ve].length;ke++)!((Me=O[Ve])===null||Me===void 0)&&Me[ke]&&(Le.draw(Ne+ke*_,Te+Ve*_,_,(ze,He)=>{var Ee;return!!(!((Ee=O[Ve+He])===null||Ee===void 0)&&Ee[ke+ze])}),Le._element&&Ie&&Ie.appendChild(Le._element))}})}loadImage(){return new Promise((m,f)=>{var g;const v=this._options;if(!v.image)return f("Image is not defined");if(!((g=v.nodeCanvas)===null||g===void 0)&&g.loadImage)v.nodeCanvas.loadImage(v.image).then(x=>{var _,S;if(this._image=x,this._options.imageOptions.saveAsBlob){const b=(_=v.nodeCanvas)===null||_===void 0?void 0:_.createCanvas(this._image.width,this._image.height);(S=b==null?void 0:b.getContext("2d"))===null||S===void 0||S.drawImage(x,0,0),this._imageUri=b==null?void 0:b.toDataURL()}m()}).catch(f);else{const x=new this._window.Image;typeof v.imageOptions.crossOrigin=="string"&&(x.crossOrigin=v.imageOptions.crossOrigin),this._image=x,x.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await async function(_,S){return new Promise(b=>{const M=new S.XMLHttpRequest;M.onload=function(){const I=new S.FileReader;I.onloadend=function(){b(I.result)},I.readAsDataURL(M.response)},M.open("GET",_),M.responseType="blob",M.send()})}(v.image||"",this._window)),m()},x.src=v.image}})}async drawImage({width:m,height:f,count:g,dotSize:v}){const x=this._options,_=this._roundSize((x.width-g*v)/2),S=this._roundSize((x.height-g*v)/2),b=_+this._roundSize(x.imageOptions.margin+(g*v-m)/2),M=S+this._roundSize(x.imageOptions.margin+(g*v-f)/2),I=m-2*x.imageOptions.margin,F=f-2*x.imageOptions.margin,ce=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");ce.setAttribute("href",this._imageUri||""),ce.setAttribute("x",String(b)),ce.setAttribute("y",String(M)),ce.setAttribute("width",`${I}px`),ce.setAttribute("height",`${F}px`),this._element.appendChild(ce)}_createColor({options:m,color:f,additionalRotation:g,x:v,y:x,height:_,width:S,name:b}){const M=S>_?S:_,I=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(I.setAttribute("x",String(v)),I.setAttribute("y",String(x)),I.setAttribute("height",String(_)),I.setAttribute("width",String(S)),I.setAttribute("clip-path",`url('#clip-path-${b}')`),m){let F;if(m.type==="radial")F=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),F.setAttribute("id",b),F.setAttribute("gradientUnits","userSpaceOnUse"),F.setAttribute("fx",String(v+S/2)),F.setAttribute("fy",String(x+_/2)),F.setAttribute("cx",String(v+S/2)),F.setAttribute("cy",String(x+_/2)),F.setAttribute("r",String(M/2));else{const ce=((m.rotation||0)+g)%(2*Math.PI),N=(ce+2*Math.PI)%(2*Math.PI);let se=v+S/2,ee=x+_/2,X=v+S/2,Q=x+_/2;N>=0&&N<=.25*Math.PI||N>1.75*Math.PI&&N<=2*Math.PI?(se-=S/2,ee-=_/2*Math.tan(ce),X+=S/2,Q+=_/2*Math.tan(ce)):N>.25*Math.PI&&N<=.75*Math.PI?(ee-=_/2,se-=S/2/Math.tan(ce),Q+=_/2,X+=S/2/Math.tan(ce)):N>.75*Math.PI&&N<=1.25*Math.PI?(se+=S/2,ee+=_/2*Math.tan(ce),X-=S/2,Q-=_/2*Math.tan(ce)):N>1.25*Math.PI&&N<=1.75*Math.PI&&(ee+=_/2,se+=S/2/Math.tan(ce),Q-=_/2,X-=S/2/Math.tan(ce)),F=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),F.setAttribute("id",b),F.setAttribute("gradientUnits","userSpaceOnUse"),F.setAttribute("x1",String(Math.round(se))),F.setAttribute("y1",String(Math.round(ee))),F.setAttribute("x2",String(Math.round(X))),F.setAttribute("y2",String(Math.round(Q)))}m.colorStops.forEach(({offset:ce,color:N})=>{const se=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");se.setAttribute("offset",100*ce+"%"),se.setAttribute("stop-color",N),F.appendChild(se)}),I.setAttribute("fill",`url('#${b}')`),this._defs.appendChild(F)}else f&&I.setAttribute("fill",f);this._element.appendChild(I)}}D.instanceCount=0;const k=D,B="canvas",q={};for(let E=0;E<=40;E++)q[E]=E;const j={type:B,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:q[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function H(E){const m=Object.assign({},E);if(!m.colorStops||!m.colorStops.length)throw"Field 'colorStops' is required in gradient";return m.rotation?m.rotation=Number(m.rotation):m.rotation=0,m.colorStops=m.colorStops.map(f=>Object.assign(Object.assign({},f),{offset:Number(f.offset)})),m}function J(E){const m=Object.assign({},E);return m.width=Number(m.width),m.height=Number(m.height),m.margin=Number(m.margin),m.imageOptions=Object.assign(Object.assign({},m.imageOptions),{hideBackgroundDots:!!m.imageOptions.hideBackgroundDots,imageSize:Number(m.imageOptions.imageSize),margin:Number(m.imageOptions.margin)}),m.margin>Math.min(m.width,m.height)&&(m.margin=Math.min(m.width,m.height)),m.dotsOptions=Object.assign({},m.dotsOptions),m.dotsOptions.gradient&&(m.dotsOptions.gradient=H(m.dotsOptions.gradient)),m.cornersSquareOptions&&(m.cornersSquareOptions=Object.assign({},m.cornersSquareOptions),m.cornersSquareOptions.gradient&&(m.cornersSquareOptions.gradient=H(m.cornersSquareOptions.gradient))),m.cornersDotOptions&&(m.cornersDotOptions=Object.assign({},m.cornersDotOptions),m.cornersDotOptions.gradient&&(m.cornersDotOptions.gradient=H(m.cornersDotOptions.gradient))),m.backgroundOptions&&(m.backgroundOptions=Object.assign({},m.backgroundOptions),m.backgroundOptions.gradient&&(m.backgroundOptions.gradient=H(m.backgroundOptions.gradient))),m}var T=i(873),z=i.n(T);function ue(E){if(!E)throw new Error("Extension must be defined");E[0]==="."&&(E=E.substring(1));const m={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[E.toLowerCase()];if(!m)throw new Error(`Extension "${E}" is not supported`);return m}class _e{constructor(m){m!=null&&m.jsdom?this._window=new m.jsdom("",{resources:"usable"}).window:this._window=window,this._options=m?J(a(j,m)):j,this.update()}static _clearContainer(m){m&&(m.innerHTML="")}_setupSvg(){if(!this._qr)return;const m=new k(this._options,this._window);this._svg=m.getElement(),this._svgDrawingPromise=m.drawQR(this._qr).then(()=>{var f;this._svg&&((f=this._extension)===null||f===void 0||f.call(this,m.getElement(),this._options))})}_setupCanvas(){var m,f;this._qr&&(!((m=this._options.nodeCanvas)===null||m===void 0)&&m.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(f=this._svgDrawingPromise)===null||f===void 0?void 0:f.then(()=>{var g;if(!this._svg)return;const v=this._svg,x=new this._window.XMLSerializer().serializeToString(v),_=btoa(x),S=`data:${ue("svg")};base64,${_}`;if(!((g=this._options.nodeCanvas)===null||g===void 0)&&g.loadImage)return this._options.nodeCanvas.loadImage(S).then(b=>{var M,I;b.width=this._options.width,b.height=this._options.height,(I=(M=this._nodeCanvas)===null||M===void 0?void 0:M.getContext("2d"))===null||I===void 0||I.drawImage(b,0,0)});{const b=new this._window.Image;return new Promise(M=>{b.onload=()=>{var I,F;(F=(I=this._domCanvas)===null||I===void 0?void 0:I.getContext("2d"))===null||F===void 0||F.drawImage(b,0,0),M()},b.src=S})}}))}async _getElement(m="png"){if(!this._qr)throw"QR code is empty";return m.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(m){_e._clearContainer(this._container),this._options=m?J(a(this._options,m)):this._options,this._options.data&&(this._qr=z()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(f){switch(!0){case/^[0-9]*$/.test(f):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(f):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===B?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(m){if(m){if(typeof m.appendChild!="function")throw"Container should be a single DOM node";this._options.type===B?this._domCanvas&&m.appendChild(this._domCanvas):this._svg&&m.appendChild(this._svg),this._container=m}}applyExtension(m){if(!m)throw"Extension function should be defined.";this._extension=m,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(m="png"){if(!this._qr)throw"QR code is empty";const f=await this._getElement(m),g=ue(m);if(!f)return null;if(m.toLowerCase()==="svg"){const v=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(f)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(v):new Blob([v],{type:g})}return new Promise(v=>{const x=f;if("toBuffer"in x)if(g==="image/png")v(x.toBuffer(g));else if(g==="image/jpeg")v(x.toBuffer(g));else{if(g!=="application/pdf")throw Error("Unsupported extension");v(x.toBuffer(g))}else"toBlob"in x&&x.toBlob(v,g,1)})}async download(m){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let f="png",g="qr";typeof m=="string"?(f=m,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof m=="object"&&m!==null&&(m.name&&(g=m.name),m.extension&&(f=m.extension));const v=await this._getElement(f);if(v)if(f.toLowerCase()==="svg"){let x=new XMLSerializer().serializeToString(v);x=`<?xml version="1.0" standalone="no"?>\r
`+x,u(`data:${ue(f)};charset=utf-8,${encodeURIComponent(x)}`,`${g}.svg`)}else u(v.toDataURL(ue(f)),`${g}.${f}`)}}const G=_e})(),s.default})())})(_7);var lZ=_7.exports;const E7=ji(lZ);class Aa extends yt{constructor(e){const{docsPath:r,field:n,metaMessages:i}=e;super(`Invalid Sign-In with Ethereum message field "${n}".`,{docsPath:r,metaMessages:i,name:"SiweInvalidMessageFieldError"})}}function S7(t){if(/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(t)||/%[^0-9a-f]/i.test(t)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(t))return!1;const e=hZ(t),r=e[1],n=e[2],i=e[3],s=e[4],o=e[5];if(!(r!=null&&r.length&&i.length>=0))return!1;if(n!=null&&n.length){if(!(i.length===0||/^\//.test(i)))return!1}else if(/^\/\//.test(i))return!1;if(!/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase()))return!1;let a="";return a+=`${r}:`,n!=null&&n.length&&(a+=`//${n}`),a+=i,s!=null&&s.length&&(a+=`?${s}`),o!=null&&o.length&&(a+=`#${o}`),a}function hZ(t){return t.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}function A7(t){const{chainId:e,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:a,resources:u,scheme:l,uri:d,version:p}=t;{if(e!==Math.floor(e))throw new Aa({field:"chainId",metaMessages:["- Chain ID must be a EIP-155 chain ID.","- See https://eips.ethereum.org/EIPS/eip-155","",`Provided value: ${e}`]});if(!(dZ.test(r)||pZ.test(r)||gZ.test(r)))throw new Aa({field:"domain",metaMessages:["- Domain must be an RFC 3986 authority.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${r}`]});if(!mZ.test(s))throw new Aa({field:"nonce",metaMessages:["- Nonce must be at least 8 characters.","- Nonce must be alphanumeric.","",`Provided value: ${s}`]});if(!S7(d))throw new Aa({field:"uri",metaMessages:["- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${d}`]});if(p!=="1")throw new Aa({field:"version",metaMessages:["- Version must be '1'.","",`Provided value: ${p}`]});if(l&&!vZ.test(l))throw new Aa({field:"scheme",metaMessages:["- Scheme must be an RFC 3986 URI scheme.","- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1","",`Provided value: ${l}`]});const k=t.statement;if(k!=null&&k.includes(`
`))throw new Aa({field:"statement",metaMessages:["- Statement must not include '\\n'.","",`Provided value: ${k}`]})}const y=og(t.address),A=l?`${l}://${r}`:r,P=t.statement?`${t.statement}
`:"",O=`${A} wants you to sign in with your Ethereum account:
${y}

${P}`;let D=`URI: ${d}
Version: ${p}
Chain ID: ${e}
Nonce: ${s}
Issued At: ${i.toISOString()}`;if(n&&(D+=`
Expiration Time: ${n.toISOString()}`),o&&(D+=`
Not Before: ${o.toISOString()}`),a&&(D+=`
Request ID: ${a}`),u){let k=`
Resources:`;for(const B of u){if(!S7(B))throw new Aa({field:"resources",metaMessages:["- Every resource must be a RFC 3986 URI.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${B}`]});k+=`
- ${B}`}D+=k}return`${O}
${D}`}const dZ=/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,pZ=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,gZ=/^localhost(:[0-9]{1,5})?$/,mZ=/^[a-zA-Z0-9]{8,}$/,vZ=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/,P7="7a4434fefbcc9af474fb5c995e47d286",bZ={projectId:P7,metadata:{name:"codatta",description:"codatta",url:"https://codatta.io/",icons:["https://avatars.githubusercontent.com/u/171659315"]}},yZ={namespaces:{eip155:{methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData"],chains:["eip155:1"],events:["chainChanged","accountsChanged","disconnect"],rpcMap:{1:`https://rpc.walletconnect.com?chainId=eip155:1&projectId=${P7}`}}},skipPairing:!1};function wZ(t,e){const r=window.location.host,n=window.location.href;return A7({address:t,chainId:1,domain:r,nonce:e,uri:n,version:"1"})}function M7(t){var ue,_e,G;const e=Se.useRef(null),{wallet:r,onGetExtension:n,onSignFinish:i}=t,[s,o]=Se.useState(""),[a,u]=Se.useState(!1),[l,d]=Se.useState(""),[p,y]=Se.useState("scan"),A=Se.useRef(),[P,O]=Se.useState((ue=r.config)==null?void 0:ue.image),[D,k]=Se.useState(!1),{saveLastUsedWallet:B}=Kl();async function q(E){var f,g,v,x;u(!0);const m=await pz.init(bZ);m.session&&await m.disconnect();try{if(y("scan"),m.on("display_uri",ce=>{o(ce),u(!1),y("scan")}),m.on("error",ce=>{console.log(ce)}),m.on("session_update",ce=>{console.log("session_update",ce)}),!await m.connect(yZ))throw new Error("Walletconnect init failed");const S=new ru(m);O(((f=S.config)==null?void 0:f.image)||((g=E.config)==null?void 0:g.image));const b=await S.getAddress(),M=await va.getNonce({account_type:"block_chain"});console.log("get nonce",M);const I=wZ(b,M);y("sign");const F=await S.signMessage(I,b);y("waiting"),await i(S,{message:I,nonce:M,signature:F,address:b,wallet_name:((v=S.config)==null?void 0:v.name)||((x=E.config)==null?void 0:x.name)||""}),B(S)}catch(_){console.log("err",_),d(_.details||_.message)}}function j(){A.current=new E7({width:264,height:264,margin:0,type:"svg",qrOptions:{errorCorrectionLevel:"M"},dotsOptions:{color:"black",type:"rounded"},backgroundOptions:{color:"transparent"}}),A.current.append(e.current)}function H(E){var m;console.log(A.current),(m=A.current)==null||m.update({data:E})}Se.useEffect(()=>{s&&H(s)},[s]),Se.useEffect(()=>{q(r)},[r]),Se.useEffect(()=>{j()},[]);function J(){d(""),H(""),q(r)}function T(){k(!0),navigator.clipboard.writeText(s),setTimeout(()=>{k(!1)},2500)}function z(){var f;const E=(f=r.config)==null?void 0:f.desktop_link;if(!E)return;const m=`${E}?uri=${encodeURIComponent(s)}`;window.open(m,"_blank")}return de.jsxs("div",{children:[de.jsx("div",{className:"xc-text-center",children:de.jsxs("div",{className:"xc-relative xc-mx-auto xc-mb-6 xc-block xc-max-h-[272px] xc-max-w-[272px] xc-rounded-xl xc-bg-white xc-p-1",children:[de.jsx("div",{className:"xc-aspect-[1/1] xc-flex xc-h-full xc-w-full xc-justify-center",ref:e}),de.jsx("div",{className:"xc-absolute xc-left-0 xc-top-0 xc-flex xc-h-full xc-w-full xc-items-center xc-justify-center",children:a?de.jsx(vc,{className:"xc-h-6 xc-w-6 xc-animate-spin xc-text-black",size:20}):de.jsx("img",{className:"xc-h-10 xc-w-10",src:P})})]})}),de.jsxs("div",{className:"xc-m-auto xc-mb-6 xc-flex xc-max-w-[400px] xc-flex-wrap xc-items-center xc-justify-between xc-gap-3",children:[de.jsx("button",{disabled:!s,onClick:T,className:"xc-disabled:hover-text-white xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black xc-disabled:cursor-not-allowed xc-disabled:opacity-40 xc-disabled:hover:bg-transparent",children:D?de.jsxs(de.Fragment,{children:[" ",de.jsx(LK,{})," Copied!"]}):de.jsxs(de.Fragment,{children:[de.jsx($K,{}),"Copy QR URL"]})}),((_e=r.config)==null?void 0:_e.getWallet)&&de.jsxs("button",{className:"xc-rounded-2 xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black",onClick:n,children:[de.jsx(kK,{}),"Get Extension"]}),((G=r.config)==null?void 0:G.desktop_link)&&de.jsxs("button",{disabled:!s,className:"xc-rounded-2 xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black",onClick:z,children:[de.jsx(f8,{}),"Desktop"]})]}),de.jsx("div",{className:"xc-text-center",children:l?de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[de.jsx("p",{className:"xc-text-danger xc-mb-2 xc-text-center",children:l}),de.jsx("button",{className:"xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1",onClick:J,children:"Retry"})]}):de.jsxs(de.Fragment,{children:[p==="scan"&&de.jsx("p",{children:"Scan this QR code from your mobile wallet or phone's camera to connect."}),p==="connect"&&de.jsx("p",{children:"Click connect in your wallet app"}),p==="sign"&&de.jsx("p",{children:"Click sign-in in your wallet to confirm you own this wallet."}),p==="waiting"&&de.jsx("div",{className:"xc-text-center",children:de.jsx(vc,{className:"xc-inline-block xc-animate-spin"})})]})})]})}const xZ="Accept connection request in the wallet",_Z="Accept sign-in request in your wallet";function EZ(t,e){const r=window.location.host,n=window.location.href;return A7({address:t,chainId:1,domain:r,nonce:e,uri:n,version:"1"})}function I7(t){var p;const[e,r]=Se.useState(),{wallet:n,onSignFinish:i}=t,s=Se.useRef(),[o,a]=Se.useState("connect"),{saveLastUsedWallet:u}=Kl();async function l(y){var A;try{a("connect");const P=await n.connect();if(!P||P.length===0)throw new Error("Wallet connect error");const O=og(P[0]),D=EZ(O,y);a("sign");const k=await n.signMessage(D,O);if(!k||k.length===0)throw new Error("user sign error");a("waiting"),await i(n,{address:O,signature:k,message:D,nonce:y,wallet_name:((A=n.config)==null?void 0:A.name)||""}),u(n)}catch(P){console.log(P.details),r(P.details||P.message)}}async function d(){try{r("");const y=await va.getNonce({account_type:"block_chain"});s.current=y,l(s.current)}catch(y){console.log(y.details),r(y.message)}}return Se.useEffect(()=>{d()},[]),de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-gap-4",children:[de.jsx("img",{className:"xc-rounded-md xc-h-16 xc-w-16",src:(p=n.config)==null?void 0:p.image,alt:""}),e&&de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[de.jsx("p",{className:"xc-text-danger xc-mb-2 xc-text-center",children:e}),de.jsx("div",{className:"xc-flex xc-gap-2",children:de.jsx("button",{className:"xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1",onClick:d,children:"Retry"})})]}),!e&&de.jsxs(de.Fragment,{children:[o==="connect"&&de.jsx("span",{className:"xc-text-center",children:xZ}),o==="sign"&&de.jsx("span",{className:"xc-text-center",children:_Z}),o==="waiting"&&de.jsx("span",{className:"xc-text-center",children:de.jsx(vc,{className:"xc-animate-spin"})})]})]})}const Gu="https://static.codatta.io/codatta-connect/wallet-icons.svg",SZ="https://itunes.apple.com/app/",AZ="https://play.google.com/store/apps/details?id=",PZ="https://chromewebstore.google.com/detail/",MZ="https://chromewebstore.google.com/detail/",IZ="https://addons.mozilla.org/en-US/firefox/addon/",CZ="https://microsoftedge.microsoft.com/addons/detail/";function Yu(t){const{icon:e,title:r,link:n}=t;return de.jsxs("a",{href:n,target:"_blank",className:"xc-flex xc-w-full xc-cursor-pointer xc-items-center xc-gap-2 xc-rounded-full xc-border xc-border-white xc-border-opacity-15 xc-px-6 xc-py-3 xc-transition-all xc-hover:bg-white xc-hover:bg-opacity-5",children:[de.jsx("img",{className:"xc-rounded-1 xc-h-6 xc-w-6",src:e,alt:""}),r,de.jsx(u8,{className:"xc-ml-auto xc-text-gray-400"})]})}function TZ(t){const e={appStoreLink:"",playStoreLink:"",chromeStoreLink:"",braveStoreLink:"",firefoxStoreLink:"",edgeStoreLink:""};return t!=null&&t.app_store_id&&(e.appStoreLink=`${SZ}${t.app_store_id}`),t!=null&&t.play_store_id&&(e.playStoreLink=`${AZ}${t.play_store_id}`),t!=null&&t.chrome_store_id&&(e.chromeStoreLink=`${PZ}${t.chrome_store_id}`),t!=null&&t.brave_store_id&&(e.braveStoreLink=`${MZ}${t.brave_store_id}`),t!=null&&t.firefox_addon_id&&(e.firefoxStoreLink=`${IZ}${t.firefox_addon_id}`),t!=null&&t.edge_addon_id&&(e.edgeStoreLink=`${CZ}${t.edge_addon_id}`),e}function C7(t){var i,s,o;const{wallet:e}=t,r=(i=e.config)==null?void 0:i.getWallet,n=TZ(r);return de.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[de.jsx("img",{className:"xc-rounded-md xc-mb-2 xc-h-12 xc-w-12",src:(s=e.config)==null?void 0:s.image,alt:""}),de.jsxs("p",{className:"xc-text-lg xc-font-bold",children:["Install ",(o=e.config)==null?void 0:o.name," to connect"]}),de.jsx("p",{className:"xc-mb-6 xc-text-sm xc-text-gray-500",children:"Select from your preferred options below:"}),de.jsxs("div",{className:"xc-grid xc-w-full xc-grid-cols-1 xc-gap-3",children:[(r==null?void 0:r.chrome_store_id)&&de.jsx(Yu,{link:n.chromeStoreLink,icon:`${Gu}#chrome`,title:"Google Play Store"}),(r==null?void 0:r.app_store_id)&&de.jsx(Yu,{link:n.appStoreLink,icon:`${Gu}#apple-dark`,title:"Apple App Store"}),(r==null?void 0:r.play_store_id)&&de.jsx(Yu,{link:n.playStoreLink,icon:`${Gu}#android`,title:"Google Play Store"}),(r==null?void 0:r.edge_addon_id)&&de.jsx(Yu,{link:n.edgeStoreLink,icon:`${Gu}#edge`,title:"Microsoft Edge"}),(r==null?void 0:r.brave_store_id)&&de.jsx(Yu,{link:n.braveStoreLink,icon:`${Gu}#brave`,title:"Brave extension"}),(r==null?void 0:r.firefox_addon_id)&&de.jsx(Yu,{link:n.firefoxStoreLink,icon:`${Gu}#firefox`,title:"Mozilla Firefox"})]})]})}function RZ(t){const{wallet:e}=t,[r,n]=Se.useState(e.installed?"connect":"qr"),i=Ib();async function s(o,a){var l;const u=await va.walletLogin({account_type:"block_chain",account_enum:i.role,connector:"codatta_wallet",inviter_code:i.inviterCode,wallet_name:((l=o.config)==null?void 0:l.name)||o.key,address:await o.getAddress(),chain:(await o.getChain()).toString(),nonce:a.nonce,signature:a.signature,message:a.message,source:{device:i.device,channel:i.channel,app:i.app}});await t.onLogin(u.data)}return de.jsxs(Ss,{children:[de.jsx("div",{className:"xc-mb-6",children:de.jsx(Sc,{title:"Connect wallet",onBack:t.onBack})}),r==="qr"&&de.jsx(M7,{wallet:e,onGetExtension:()=>n("get-extension"),onSignFinish:s}),r==="connect"&&de.jsx(I7,{onShowQrCode:()=>n("qr"),wallet:e,onSignFinish:s}),r==="get-extension"&&de.jsx(C7,{wallet:e})]})}function DZ(t){const{wallet:e,onClick:r}=t,n=de.jsx("img",{className:"xc-rounded-md xc-h-5 xc-w-5",src:e.imageUrl}),i=e.name||"";return de.jsx(Sb,{icon:n,title:i,onClick:()=>r(e)})}function T7(t){const{connector:e}=t,[r,n]=Se.useState(),[i,s]=Se.useState([]),o=Se.useMemo(()=>r?i.filter(d=>d.name.toLowerCase().includes(r.toLowerCase())):i,[r,i]);function a(d){n(d.target.value)}async function u(){const d=await e.getWallets();s(d)}Se.useEffect(()=>{u()},[]);function l(d){t.onSelect(d)}return de.jsxs(Ss,{children:[de.jsx("div",{className:"xc-mb-6",children:de.jsx(Sc,{title:"Select wallet",onBack:t.onBack})}),de.jsxs("div",{className:"xc-mb-6 xc-flex xc-gap-3 xc-px-4 xc-py-2 xc-border xc-rounded-xl xc-w-full xc-overflow-hidden xc-items-center xc-border-opacity-15 xc-border-white focus-within:xc-border-opacity-40",children:[de.jsx(l8,{className:"xc-shrink-0 xc-opacity-50"}),de.jsx("input",{type:"text",className:"xc-flex-1 xc-bg-transparent xc-appearance-none xc-outline-none",placeholder:"Search wallet",onInput:a})]}),de.jsx("div",{className:"xc-mb-4 xc-flex xc-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:o==null?void 0:o.map(d=>de.jsx(DZ,{wallet:d,onClick:l},d.name))})]})}var R7={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():(e.nacl||(e.nacl={}),e.nacl.util=r())})(nn,function(){var e={};function r(n){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(n){if(typeof n!="string")throw new TypeError("expected string");var i,s=unescape(encodeURIComponent(n)),o=new Uint8Array(s.length);for(i=0;i<s.length;i++)o[i]=s.charCodeAt(i);return o},e.encodeUTF8=function(n){var i,s=[];for(i=0;i<n.length;i++)s.push(String.fromCharCode(n[i]));return decodeURIComponent(escape(s.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(n){return Buffer.from(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(Buffer.from(n,"base64"),0))}):(e.encodeBase64=function(n){return new Buffer(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(new Buffer(n,"base64"),0))}):(e.encodeBase64=function(n){var i,s=[],o=n.length;for(i=0;i<o;i++)s.push(String.fromCharCode(n[i]));return btoa(s.join(""))},e.decodeBase64=function(n){r(n);var i,s=atob(n),o=new Uint8Array(s.length);for(i=0;i<s.length;i++)o[i]=s.charCodeAt(i);return o}),e})})(R7);var OZ=R7.exports;const uh=ji(OZ);var D7={exports:{}};(function(t){(function(e){var r=function($){var W,V=new Float64Array(16);if($)for(W=0;W<$.length;W++)V[W]=$[W];return V},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=r(),a=r([1]),u=r([56129,1]),l=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P($,W,V,C){$[W]=V>>24&255,$[W+1]=V>>16&255,$[W+2]=V>>8&255,$[W+3]=V&255,$[W+4]=C>>24&255,$[W+5]=C>>16&255,$[W+6]=C>>8&255,$[W+7]=C&255}function O($,W,V,C,Y){var U,oe=0;for(U=0;U<Y;U++)oe|=$[W+U]^V[C+U];return(1&oe-1>>>8)-1}function D($,W,V,C){return O($,W,V,C,16)}function k($,W,V,C){return O($,W,V,C,32)}function B($,W,V,C){for(var Y=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,U=V[0]&255|(V[1]&255)<<8|(V[2]&255)<<16|(V[3]&255)<<24,oe=V[4]&255|(V[5]&255)<<8|(V[6]&255)<<16|(V[7]&255)<<24,ge=V[8]&255|(V[9]&255)<<8|(V[10]&255)<<16|(V[11]&255)<<24,xe=V[12]&255|(V[13]&255)<<8|(V[14]&255)<<16|(V[15]&255)<<24,Re=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,De=W[0]&255|(W[1]&255)<<8|(W[2]&255)<<16|(W[3]&255)<<24,it=W[4]&255|(W[5]&255)<<8|(W[6]&255)<<16|(W[7]&255)<<24,Ue=W[8]&255|(W[9]&255)<<8|(W[10]&255)<<16|(W[11]&255)<<24,gt=W[12]&255|(W[13]&255)<<8|(W[14]&255)<<16|(W[15]&255)<<24,st=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,tt=V[16]&255|(V[17]&255)<<8|(V[18]&255)<<16|(V[19]&255)<<24,At=V[20]&255|(V[21]&255)<<8|(V[22]&255)<<16|(V[23]&255)<<24,Rt=V[24]&255|(V[25]&255)<<8|(V[26]&255)<<16|(V[27]&255)<<24,Mt=V[28]&255|(V[29]&255)<<8|(V[30]&255)<<16|(V[31]&255)<<24,Et=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,dt=Y,_t=U,ot=oe,wt=ge,lt=xe,at=Re,Ae=De,Pe=it,Ge=Ue,je=gt,qe=st,Xe=tt,kt=At,Wt=Rt,Zt=Mt,Kt=Et,pe,nr=0;nr<20;nr+=2)pe=dt+kt|0,lt^=pe<<7|pe>>>25,pe=lt+dt|0,Ge^=pe<<9|pe>>>23,pe=Ge+lt|0,kt^=pe<<13|pe>>>19,pe=kt+Ge|0,dt^=pe<<18|pe>>>14,pe=at+_t|0,je^=pe<<7|pe>>>25,pe=je+at|0,Wt^=pe<<9|pe>>>23,pe=Wt+je|0,_t^=pe<<13|pe>>>19,pe=_t+Wt|0,at^=pe<<18|pe>>>14,pe=qe+Ae|0,Zt^=pe<<7|pe>>>25,pe=Zt+qe|0,ot^=pe<<9|pe>>>23,pe=ot+Zt|0,Ae^=pe<<13|pe>>>19,pe=Ae+ot|0,qe^=pe<<18|pe>>>14,pe=Kt+Xe|0,wt^=pe<<7|pe>>>25,pe=wt+Kt|0,Pe^=pe<<9|pe>>>23,pe=Pe+wt|0,Xe^=pe<<13|pe>>>19,pe=Xe+Pe|0,Kt^=pe<<18|pe>>>14,pe=dt+wt|0,_t^=pe<<7|pe>>>25,pe=_t+dt|0,ot^=pe<<9|pe>>>23,pe=ot+_t|0,wt^=pe<<13|pe>>>19,pe=wt+ot|0,dt^=pe<<18|pe>>>14,pe=at+lt|0,Ae^=pe<<7|pe>>>25,pe=Ae+at|0,Pe^=pe<<9|pe>>>23,pe=Pe+Ae|0,lt^=pe<<13|pe>>>19,pe=lt+Pe|0,at^=pe<<18|pe>>>14,pe=qe+je|0,Xe^=pe<<7|pe>>>25,pe=Xe+qe|0,Ge^=pe<<9|pe>>>23,pe=Ge+Xe|0,je^=pe<<13|pe>>>19,pe=je+Ge|0,qe^=pe<<18|pe>>>14,pe=Kt+Zt|0,kt^=pe<<7|pe>>>25,pe=kt+Kt|0,Wt^=pe<<9|pe>>>23,pe=Wt+kt|0,Zt^=pe<<13|pe>>>19,pe=Zt+Wt|0,Kt^=pe<<18|pe>>>14;dt=dt+Y|0,_t=_t+U|0,ot=ot+oe|0,wt=wt+ge|0,lt=lt+xe|0,at=at+Re|0,Ae=Ae+De|0,Pe=Pe+it|0,Ge=Ge+Ue|0,je=je+gt|0,qe=qe+st|0,Xe=Xe+tt|0,kt=kt+At|0,Wt=Wt+Rt|0,Zt=Zt+Mt|0,Kt=Kt+Et|0,$[0]=dt>>>0&255,$[1]=dt>>>8&255,$[2]=dt>>>16&255,$[3]=dt>>>24&255,$[4]=_t>>>0&255,$[5]=_t>>>8&255,$[6]=_t>>>16&255,$[7]=_t>>>24&255,$[8]=ot>>>0&255,$[9]=ot>>>8&255,$[10]=ot>>>16&255,$[11]=ot>>>24&255,$[12]=wt>>>0&255,$[13]=wt>>>8&255,$[14]=wt>>>16&255,$[15]=wt>>>24&255,$[16]=lt>>>0&255,$[17]=lt>>>8&255,$[18]=lt>>>16&255,$[19]=lt>>>24&255,$[20]=at>>>0&255,$[21]=at>>>8&255,$[22]=at>>>16&255,$[23]=at>>>24&255,$[24]=Ae>>>0&255,$[25]=Ae>>>8&255,$[26]=Ae>>>16&255,$[27]=Ae>>>24&255,$[28]=Pe>>>0&255,$[29]=Pe>>>8&255,$[30]=Pe>>>16&255,$[31]=Pe>>>24&255,$[32]=Ge>>>0&255,$[33]=Ge>>>8&255,$[34]=Ge>>>16&255,$[35]=Ge>>>24&255,$[36]=je>>>0&255,$[37]=je>>>8&255,$[38]=je>>>16&255,$[39]=je>>>24&255,$[40]=qe>>>0&255,$[41]=qe>>>8&255,$[42]=qe>>>16&255,$[43]=qe>>>24&255,$[44]=Xe>>>0&255,$[45]=Xe>>>8&255,$[46]=Xe>>>16&255,$[47]=Xe>>>24&255,$[48]=kt>>>0&255,$[49]=kt>>>8&255,$[50]=kt>>>16&255,$[51]=kt>>>24&255,$[52]=Wt>>>0&255,$[53]=Wt>>>8&255,$[54]=Wt>>>16&255,$[55]=Wt>>>24&255,$[56]=Zt>>>0&255,$[57]=Zt>>>8&255,$[58]=Zt>>>16&255,$[59]=Zt>>>24&255,$[60]=Kt>>>0&255,$[61]=Kt>>>8&255,$[62]=Kt>>>16&255,$[63]=Kt>>>24&255}function q($,W,V,C){for(var Y=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,U=V[0]&255|(V[1]&255)<<8|(V[2]&255)<<16|(V[3]&255)<<24,oe=V[4]&255|(V[5]&255)<<8|(V[6]&255)<<16|(V[7]&255)<<24,ge=V[8]&255|(V[9]&255)<<8|(V[10]&255)<<16|(V[11]&255)<<24,xe=V[12]&255|(V[13]&255)<<8|(V[14]&255)<<16|(V[15]&255)<<24,Re=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,De=W[0]&255|(W[1]&255)<<8|(W[2]&255)<<16|(W[3]&255)<<24,it=W[4]&255|(W[5]&255)<<8|(W[6]&255)<<16|(W[7]&255)<<24,Ue=W[8]&255|(W[9]&255)<<8|(W[10]&255)<<16|(W[11]&255)<<24,gt=W[12]&255|(W[13]&255)<<8|(W[14]&255)<<16|(W[15]&255)<<24,st=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,tt=V[16]&255|(V[17]&255)<<8|(V[18]&255)<<16|(V[19]&255)<<24,At=V[20]&255|(V[21]&255)<<8|(V[22]&255)<<16|(V[23]&255)<<24,Rt=V[24]&255|(V[25]&255)<<8|(V[26]&255)<<16|(V[27]&255)<<24,Mt=V[28]&255|(V[29]&255)<<8|(V[30]&255)<<16|(V[31]&255)<<24,Et=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,dt=Y,_t=U,ot=oe,wt=ge,lt=xe,at=Re,Ae=De,Pe=it,Ge=Ue,je=gt,qe=st,Xe=tt,kt=At,Wt=Rt,Zt=Mt,Kt=Et,pe,nr=0;nr<20;nr+=2)pe=dt+kt|0,lt^=pe<<7|pe>>>25,pe=lt+dt|0,Ge^=pe<<9|pe>>>23,pe=Ge+lt|0,kt^=pe<<13|pe>>>19,pe=kt+Ge|0,dt^=pe<<18|pe>>>14,pe=at+_t|0,je^=pe<<7|pe>>>25,pe=je+at|0,Wt^=pe<<9|pe>>>23,pe=Wt+je|0,_t^=pe<<13|pe>>>19,pe=_t+Wt|0,at^=pe<<18|pe>>>14,pe=qe+Ae|0,Zt^=pe<<7|pe>>>25,pe=Zt+qe|0,ot^=pe<<9|pe>>>23,pe=ot+Zt|0,Ae^=pe<<13|pe>>>19,pe=Ae+ot|0,qe^=pe<<18|pe>>>14,pe=Kt+Xe|0,wt^=pe<<7|pe>>>25,pe=wt+Kt|0,Pe^=pe<<9|pe>>>23,pe=Pe+wt|0,Xe^=pe<<13|pe>>>19,pe=Xe+Pe|0,Kt^=pe<<18|pe>>>14,pe=dt+wt|0,_t^=pe<<7|pe>>>25,pe=_t+dt|0,ot^=pe<<9|pe>>>23,pe=ot+_t|0,wt^=pe<<13|pe>>>19,pe=wt+ot|0,dt^=pe<<18|pe>>>14,pe=at+lt|0,Ae^=pe<<7|pe>>>25,pe=Ae+at|0,Pe^=pe<<9|pe>>>23,pe=Pe+Ae|0,lt^=pe<<13|pe>>>19,pe=lt+Pe|0,at^=pe<<18|pe>>>14,pe=qe+je|0,Xe^=pe<<7|pe>>>25,pe=Xe+qe|0,Ge^=pe<<9|pe>>>23,pe=Ge+Xe|0,je^=pe<<13|pe>>>19,pe=je+Ge|0,qe^=pe<<18|pe>>>14,pe=Kt+Zt|0,kt^=pe<<7|pe>>>25,pe=kt+Kt|0,Wt^=pe<<9|pe>>>23,pe=Wt+kt|0,Zt^=pe<<13|pe>>>19,pe=Zt+Wt|0,Kt^=pe<<18|pe>>>14;$[0]=dt>>>0&255,$[1]=dt>>>8&255,$[2]=dt>>>16&255,$[3]=dt>>>24&255,$[4]=at>>>0&255,$[5]=at>>>8&255,$[6]=at>>>16&255,$[7]=at>>>24&255,$[8]=qe>>>0&255,$[9]=qe>>>8&255,$[10]=qe>>>16&255,$[11]=qe>>>24&255,$[12]=Kt>>>0&255,$[13]=Kt>>>8&255,$[14]=Kt>>>16&255,$[15]=Kt>>>24&255,$[16]=Ae>>>0&255,$[17]=Ae>>>8&255,$[18]=Ae>>>16&255,$[19]=Ae>>>24&255,$[20]=Pe>>>0&255,$[21]=Pe>>>8&255,$[22]=Pe>>>16&255,$[23]=Pe>>>24&255,$[24]=Ge>>>0&255,$[25]=Ge>>>8&255,$[26]=Ge>>>16&255,$[27]=Ge>>>24&255,$[28]=je>>>0&255,$[29]=je>>>8&255,$[30]=je>>>16&255,$[31]=je>>>24&255}function j($,W,V,C){B($,W,V,C)}function H($,W,V,C){q($,W,V,C)}var J=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function T($,W,V,C,Y,U,oe){var ge=new Uint8Array(16),xe=new Uint8Array(64),Re,De;for(De=0;De<16;De++)ge[De]=0;for(De=0;De<8;De++)ge[De]=U[De];for(;Y>=64;){for(j(xe,ge,oe,J),De=0;De<64;De++)$[W+De]=V[C+De]^xe[De];for(Re=1,De=8;De<16;De++)Re=Re+(ge[De]&255)|0,ge[De]=Re&255,Re>>>=8;Y-=64,W+=64,C+=64}if(Y>0)for(j(xe,ge,oe,J),De=0;De<Y;De++)$[W+De]=V[C+De]^xe[De];return 0}function z($,W,V,C,Y){var U=new Uint8Array(16),oe=new Uint8Array(64),ge,xe;for(xe=0;xe<16;xe++)U[xe]=0;for(xe=0;xe<8;xe++)U[xe]=C[xe];for(;V>=64;){for(j(oe,U,Y,J),xe=0;xe<64;xe++)$[W+xe]=oe[xe];for(ge=1,xe=8;xe<16;xe++)ge=ge+(U[xe]&255)|0,U[xe]=ge&255,ge>>>=8;V-=64,W+=64}if(V>0)for(j(oe,U,Y,J),xe=0;xe<V;xe++)$[W+xe]=oe[xe];return 0}function ue($,W,V,C,Y){var U=new Uint8Array(32);H(U,C,Y,J);for(var oe=new Uint8Array(8),ge=0;ge<8;ge++)oe[ge]=C[ge+16];return z($,W,V,oe,U)}function _e($,W,V,C,Y,U,oe){var ge=new Uint8Array(32);H(ge,U,oe,J);for(var xe=new Uint8Array(8),Re=0;Re<8;Re++)xe[Re]=U[Re+16];return T($,W,V,C,Y,xe,ge)}var G=function($){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var W,V,C,Y,U,oe,ge,xe;W=$[0]&255|($[1]&255)<<8,this.r[0]=W&8191,V=$[2]&255|($[3]&255)<<8,this.r[1]=(W>>>13|V<<3)&8191,C=$[4]&255|($[5]&255)<<8,this.r[2]=(V>>>10|C<<6)&7939,Y=$[6]&255|($[7]&255)<<8,this.r[3]=(C>>>7|Y<<9)&8191,U=$[8]&255|($[9]&255)<<8,this.r[4]=(Y>>>4|U<<12)&255,this.r[5]=U>>>1&8190,oe=$[10]&255|($[11]&255)<<8,this.r[6]=(U>>>14|oe<<2)&8191,ge=$[12]&255|($[13]&255)<<8,this.r[7]=(oe>>>11|ge<<5)&8065,xe=$[14]&255|($[15]&255)<<8,this.r[8]=(ge>>>8|xe<<8)&8191,this.r[9]=xe>>>5&127,this.pad[0]=$[16]&255|($[17]&255)<<8,this.pad[1]=$[18]&255|($[19]&255)<<8,this.pad[2]=$[20]&255|($[21]&255)<<8,this.pad[3]=$[22]&255|($[23]&255)<<8,this.pad[4]=$[24]&255|($[25]&255)<<8,this.pad[5]=$[26]&255|($[27]&255)<<8,this.pad[6]=$[28]&255|($[29]&255)<<8,this.pad[7]=$[30]&255|($[31]&255)<<8};G.prototype.blocks=function($,W,V){for(var C=this.fin?0:2048,Y,U,oe,ge,xe,Re,De,it,Ue,gt,st,tt,At,Rt,Mt,Et,dt,_t,ot,wt=this.h[0],lt=this.h[1],at=this.h[2],Ae=this.h[3],Pe=this.h[4],Ge=this.h[5],je=this.h[6],qe=this.h[7],Xe=this.h[8],kt=this.h[9],Wt=this.r[0],Zt=this.r[1],Kt=this.r[2],pe=this.r[3],nr=this.r[4],dr=this.r[5],pr=this.r[6],Qt=this.r[7],gr=this.r[8],lr=this.r[9];V>=16;)Y=$[W+0]&255|($[W+1]&255)<<8,wt+=Y&8191,U=$[W+2]&255|($[W+3]&255)<<8,lt+=(Y>>>13|U<<3)&8191,oe=$[W+4]&255|($[W+5]&255)<<8,at+=(U>>>10|oe<<6)&8191,ge=$[W+6]&255|($[W+7]&255)<<8,Ae+=(oe>>>7|ge<<9)&8191,xe=$[W+8]&255|($[W+9]&255)<<8,Pe+=(ge>>>4|xe<<12)&8191,Ge+=xe>>>1&8191,Re=$[W+10]&255|($[W+11]&255)<<8,je+=(xe>>>14|Re<<2)&8191,De=$[W+12]&255|($[W+13]&255)<<8,qe+=(Re>>>11|De<<5)&8191,it=$[W+14]&255|($[W+15]&255)<<8,Xe+=(De>>>8|it<<8)&8191,kt+=it>>>5|C,Ue=0,gt=Ue,gt+=wt*Wt,gt+=lt*(5*lr),gt+=at*(5*gr),gt+=Ae*(5*Qt),gt+=Pe*(5*pr),Ue=gt>>>13,gt&=8191,gt+=Ge*(5*dr),gt+=je*(5*nr),gt+=qe*(5*pe),gt+=Xe*(5*Kt),gt+=kt*(5*Zt),Ue+=gt>>>13,gt&=8191,st=Ue,st+=wt*Zt,st+=lt*Wt,st+=at*(5*lr),st+=Ae*(5*gr),st+=Pe*(5*Qt),Ue=st>>>13,st&=8191,st+=Ge*(5*pr),st+=je*(5*dr),st+=qe*(5*nr),st+=Xe*(5*pe),st+=kt*(5*Kt),Ue+=st>>>13,st&=8191,tt=Ue,tt+=wt*Kt,tt+=lt*Zt,tt+=at*Wt,tt+=Ae*(5*lr),tt+=Pe*(5*gr),Ue=tt>>>13,tt&=8191,tt+=Ge*(5*Qt),tt+=je*(5*pr),tt+=qe*(5*dr),tt+=Xe*(5*nr),tt+=kt*(5*pe),Ue+=tt>>>13,tt&=8191,At=Ue,At+=wt*pe,At+=lt*Kt,At+=at*Zt,At+=Ae*Wt,At+=Pe*(5*lr),Ue=At>>>13,At&=8191,At+=Ge*(5*gr),At+=je*(5*Qt),At+=qe*(5*pr),At+=Xe*(5*dr),At+=kt*(5*nr),Ue+=At>>>13,At&=8191,Rt=Ue,Rt+=wt*nr,Rt+=lt*pe,Rt+=at*Kt,Rt+=Ae*Zt,Rt+=Pe*Wt,Ue=Rt>>>13,Rt&=8191,Rt+=Ge*(5*lr),Rt+=je*(5*gr),Rt+=qe*(5*Qt),Rt+=Xe*(5*pr),Rt+=kt*(5*dr),Ue+=Rt>>>13,Rt&=8191,Mt=Ue,Mt+=wt*dr,Mt+=lt*nr,Mt+=at*pe,Mt+=Ae*Kt,Mt+=Pe*Zt,Ue=Mt>>>13,Mt&=8191,Mt+=Ge*Wt,Mt+=je*(5*lr),Mt+=qe*(5*gr),Mt+=Xe*(5*Qt),Mt+=kt*(5*pr),Ue+=Mt>>>13,Mt&=8191,Et=Ue,Et+=wt*pr,Et+=lt*dr,Et+=at*nr,Et+=Ae*pe,Et+=Pe*Kt,Ue=Et>>>13,Et&=8191,Et+=Ge*Zt,Et+=je*Wt,Et+=qe*(5*lr),Et+=Xe*(5*gr),Et+=kt*(5*Qt),Ue+=Et>>>13,Et&=8191,dt=Ue,dt+=wt*Qt,dt+=lt*pr,dt+=at*dr,dt+=Ae*nr,dt+=Pe*pe,Ue=dt>>>13,dt&=8191,dt+=Ge*Kt,dt+=je*Zt,dt+=qe*Wt,dt+=Xe*(5*lr),dt+=kt*(5*gr),Ue+=dt>>>13,dt&=8191,_t=Ue,_t+=wt*gr,_t+=lt*Qt,_t+=at*pr,_t+=Ae*dr,_t+=Pe*nr,Ue=_t>>>13,_t&=8191,_t+=Ge*pe,_t+=je*Kt,_t+=qe*Zt,_t+=Xe*Wt,_t+=kt*(5*lr),Ue+=_t>>>13,_t&=8191,ot=Ue,ot+=wt*lr,ot+=lt*gr,ot+=at*Qt,ot+=Ae*pr,ot+=Pe*dr,Ue=ot>>>13,ot&=8191,ot+=Ge*nr,ot+=je*pe,ot+=qe*Kt,ot+=Xe*Zt,ot+=kt*Wt,Ue+=ot>>>13,ot&=8191,Ue=(Ue<<2)+Ue|0,Ue=Ue+gt|0,gt=Ue&8191,Ue=Ue>>>13,st+=Ue,wt=gt,lt=st,at=tt,Ae=At,Pe=Rt,Ge=Mt,je=Et,qe=dt,Xe=_t,kt=ot,W+=16,V-=16;this.h[0]=wt,this.h[1]=lt,this.h[2]=at,this.h[3]=Ae,this.h[4]=Pe,this.h[5]=Ge,this.h[6]=je,this.h[7]=qe,this.h[8]=Xe,this.h[9]=kt},G.prototype.finish=function($,W){var V=new Uint16Array(10),C,Y,U,oe;if(this.leftover){for(oe=this.leftover,this.buffer[oe++]=1;oe<16;oe++)this.buffer[oe]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(C=this.h[1]>>>13,this.h[1]&=8191,oe=2;oe<10;oe++)this.h[oe]+=C,C=this.h[oe]>>>13,this.h[oe]&=8191;for(this.h[0]+=C*5,C=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=C,C=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=C,V[0]=this.h[0]+5,C=V[0]>>>13,V[0]&=8191,oe=1;oe<10;oe++)V[oe]=this.h[oe]+C,C=V[oe]>>>13,V[oe]&=8191;for(V[9]-=8192,Y=(C^1)-1,oe=0;oe<10;oe++)V[oe]&=Y;for(Y=~Y,oe=0;oe<10;oe++)this.h[oe]=this.h[oe]&Y|V[oe];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,U=this.h[0]+this.pad[0],this.h[0]=U&65535,oe=1;oe<8;oe++)U=(this.h[oe]+this.pad[oe]|0)+(U>>>16)|0,this.h[oe]=U&65535;$[W+0]=this.h[0]>>>0&255,$[W+1]=this.h[0]>>>8&255,$[W+2]=this.h[1]>>>0&255,$[W+3]=this.h[1]>>>8&255,$[W+4]=this.h[2]>>>0&255,$[W+5]=this.h[2]>>>8&255,$[W+6]=this.h[3]>>>0&255,$[W+7]=this.h[3]>>>8&255,$[W+8]=this.h[4]>>>0&255,$[W+9]=this.h[4]>>>8&255,$[W+10]=this.h[5]>>>0&255,$[W+11]=this.h[5]>>>8&255,$[W+12]=this.h[6]>>>0&255,$[W+13]=this.h[6]>>>8&255,$[W+14]=this.h[7]>>>0&255,$[W+15]=this.h[7]>>>8&255},G.prototype.update=function($,W,V){var C,Y;if(this.leftover){for(Y=16-this.leftover,Y>V&&(Y=V),C=0;C<Y;C++)this.buffer[this.leftover+C]=$[W+C];if(V-=Y,W+=Y,this.leftover+=Y,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(V>=16&&(Y=V-V%16,this.blocks($,W,Y),W+=Y,V-=Y),V){for(C=0;C<V;C++)this.buffer[this.leftover+C]=$[W+C];this.leftover+=V}};function E($,W,V,C,Y,U){var oe=new G(U);return oe.update(V,C,Y),oe.finish($,W),0}function m($,W,V,C,Y,U){var oe=new Uint8Array(16);return E(oe,0,V,C,Y,U),D($,W,oe,0)}function f($,W,V,C,Y){var U;if(V<32)return-1;for(_e($,0,W,0,V,C,Y),E($,16,$,32,V-32,$),U=0;U<16;U++)$[U]=0;return 0}function g($,W,V,C,Y){var U,oe=new Uint8Array(32);if(V<32||(ue(oe,0,32,C,Y),m(W,16,W,32,V-32,oe)!==0))return-1;for(_e($,0,W,0,V,C,Y),U=0;U<32;U++)$[U]=0;return 0}function v($,W){var V;for(V=0;V<16;V++)$[V]=W[V]|0}function x($){var W,V,C=1;for(W=0;W<16;W++)V=$[W]+C+65535,C=Math.floor(V/65536),$[W]=V-C*65536;$[0]+=C-1+37*(C-1)}function _($,W,V){for(var C,Y=~(V-1),U=0;U<16;U++)C=Y&($[U]^W[U]),$[U]^=C,W[U]^=C}function S($,W){var V,C,Y,U=r(),oe=r();for(V=0;V<16;V++)oe[V]=W[V];for(x(oe),x(oe),x(oe),C=0;C<2;C++){for(U[0]=oe[0]-65517,V=1;V<15;V++)U[V]=oe[V]-65535-(U[V-1]>>16&1),U[V-1]&=65535;U[15]=oe[15]-32767-(U[14]>>16&1),Y=U[15]>>16&1,U[14]&=65535,_(oe,U,1-Y)}for(V=0;V<16;V++)$[2*V]=oe[V]&255,$[2*V+1]=oe[V]>>8}function b($,W){var V=new Uint8Array(32),C=new Uint8Array(32);return S(V,$),S(C,W),k(V,0,C,0)}function M($){var W=new Uint8Array(32);return S(W,$),W[0]&1}function I($,W){var V;for(V=0;V<16;V++)$[V]=W[2*V]+(W[2*V+1]<<8);$[15]&=32767}function F($,W,V){for(var C=0;C<16;C++)$[C]=W[C]+V[C]}function ce($,W,V){for(var C=0;C<16;C++)$[C]=W[C]-V[C]}function N($,W,V){var C,Y,U=0,oe=0,ge=0,xe=0,Re=0,De=0,it=0,Ue=0,gt=0,st=0,tt=0,At=0,Rt=0,Mt=0,Et=0,dt=0,_t=0,ot=0,wt=0,lt=0,at=0,Ae=0,Pe=0,Ge=0,je=0,qe=0,Xe=0,kt=0,Wt=0,Zt=0,Kt=0,pe=V[0],nr=V[1],dr=V[2],pr=V[3],Qt=V[4],gr=V[5],lr=V[6],Lr=V[7],mr=V[8],wr=V[9],Br=V[10],$r=V[11],Ir=V[12],hn=V[13],dn=V[14],pn=V[15];C=W[0],U+=C*pe,oe+=C*nr,ge+=C*dr,xe+=C*pr,Re+=C*Qt,De+=C*gr,it+=C*lr,Ue+=C*Lr,gt+=C*mr,st+=C*wr,tt+=C*Br,At+=C*$r,Rt+=C*Ir,Mt+=C*hn,Et+=C*dn,dt+=C*pn,C=W[1],oe+=C*pe,ge+=C*nr,xe+=C*dr,Re+=C*pr,De+=C*Qt,it+=C*gr,Ue+=C*lr,gt+=C*Lr,st+=C*mr,tt+=C*wr,At+=C*Br,Rt+=C*$r,Mt+=C*Ir,Et+=C*hn,dt+=C*dn,_t+=C*pn,C=W[2],ge+=C*pe,xe+=C*nr,Re+=C*dr,De+=C*pr,it+=C*Qt,Ue+=C*gr,gt+=C*lr,st+=C*Lr,tt+=C*mr,At+=C*wr,Rt+=C*Br,Mt+=C*$r,Et+=C*Ir,dt+=C*hn,_t+=C*dn,ot+=C*pn,C=W[3],xe+=C*pe,Re+=C*nr,De+=C*dr,it+=C*pr,Ue+=C*Qt,gt+=C*gr,st+=C*lr,tt+=C*Lr,At+=C*mr,Rt+=C*wr,Mt+=C*Br,Et+=C*$r,dt+=C*Ir,_t+=C*hn,ot+=C*dn,wt+=C*pn,C=W[4],Re+=C*pe,De+=C*nr,it+=C*dr,Ue+=C*pr,gt+=C*Qt,st+=C*gr,tt+=C*lr,At+=C*Lr,Rt+=C*mr,Mt+=C*wr,Et+=C*Br,dt+=C*$r,_t+=C*Ir,ot+=C*hn,wt+=C*dn,lt+=C*pn,C=W[5],De+=C*pe,it+=C*nr,Ue+=C*dr,gt+=C*pr,st+=C*Qt,tt+=C*gr,At+=C*lr,Rt+=C*Lr,Mt+=C*mr,Et+=C*wr,dt+=C*Br,_t+=C*$r,ot+=C*Ir,wt+=C*hn,lt+=C*dn,at+=C*pn,C=W[6],it+=C*pe,Ue+=C*nr,gt+=C*dr,st+=C*pr,tt+=C*Qt,At+=C*gr,Rt+=C*lr,Mt+=C*Lr,Et+=C*mr,dt+=C*wr,_t+=C*Br,ot+=C*$r,wt+=C*Ir,lt+=C*hn,at+=C*dn,Ae+=C*pn,C=W[7],Ue+=C*pe,gt+=C*nr,st+=C*dr,tt+=C*pr,At+=C*Qt,Rt+=C*gr,Mt+=C*lr,Et+=C*Lr,dt+=C*mr,_t+=C*wr,ot+=C*Br,wt+=C*$r,lt+=C*Ir,at+=C*hn,Ae+=C*dn,Pe+=C*pn,C=W[8],gt+=C*pe,st+=C*nr,tt+=C*dr,At+=C*pr,Rt+=C*Qt,Mt+=C*gr,Et+=C*lr,dt+=C*Lr,_t+=C*mr,ot+=C*wr,wt+=C*Br,lt+=C*$r,at+=C*Ir,Ae+=C*hn,Pe+=C*dn,Ge+=C*pn,C=W[9],st+=C*pe,tt+=C*nr,At+=C*dr,Rt+=C*pr,Mt+=C*Qt,Et+=C*gr,dt+=C*lr,_t+=C*Lr,ot+=C*mr,wt+=C*wr,lt+=C*Br,at+=C*$r,Ae+=C*Ir,Pe+=C*hn,Ge+=C*dn,je+=C*pn,C=W[10],tt+=C*pe,At+=C*nr,Rt+=C*dr,Mt+=C*pr,Et+=C*Qt,dt+=C*gr,_t+=C*lr,ot+=C*Lr,wt+=C*mr,lt+=C*wr,at+=C*Br,Ae+=C*$r,Pe+=C*Ir,Ge+=C*hn,je+=C*dn,qe+=C*pn,C=W[11],At+=C*pe,Rt+=C*nr,Mt+=C*dr,Et+=C*pr,dt+=C*Qt,_t+=C*gr,ot+=C*lr,wt+=C*Lr,lt+=C*mr,at+=C*wr,Ae+=C*Br,Pe+=C*$r,Ge+=C*Ir,je+=C*hn,qe+=C*dn,Xe+=C*pn,C=W[12],Rt+=C*pe,Mt+=C*nr,Et+=C*dr,dt+=C*pr,_t+=C*Qt,ot+=C*gr,wt+=C*lr,lt+=C*Lr,at+=C*mr,Ae+=C*wr,Pe+=C*Br,Ge+=C*$r,je+=C*Ir,qe+=C*hn,Xe+=C*dn,kt+=C*pn,C=W[13],Mt+=C*pe,Et+=C*nr,dt+=C*dr,_t+=C*pr,ot+=C*Qt,wt+=C*gr,lt+=C*lr,at+=C*Lr,Ae+=C*mr,Pe+=C*wr,Ge+=C*Br,je+=C*$r,qe+=C*Ir,Xe+=C*hn,kt+=C*dn,Wt+=C*pn,C=W[14],Et+=C*pe,dt+=C*nr,_t+=C*dr,ot+=C*pr,wt+=C*Qt,lt+=C*gr,at+=C*lr,Ae+=C*Lr,Pe+=C*mr,Ge+=C*wr,je+=C*Br,qe+=C*$r,Xe+=C*Ir,kt+=C*hn,Wt+=C*dn,Zt+=C*pn,C=W[15],dt+=C*pe,_t+=C*nr,ot+=C*dr,wt+=C*pr,lt+=C*Qt,at+=C*gr,Ae+=C*lr,Pe+=C*Lr,Ge+=C*mr,je+=C*wr,qe+=C*Br,Xe+=C*$r,kt+=C*Ir,Wt+=C*hn,Zt+=C*dn,Kt+=C*pn,U+=38*_t,oe+=38*ot,ge+=38*wt,xe+=38*lt,Re+=38*at,De+=38*Ae,it+=38*Pe,Ue+=38*Ge,gt+=38*je,st+=38*qe,tt+=38*Xe,At+=38*kt,Rt+=38*Wt,Mt+=38*Zt,Et+=38*Kt,Y=1,C=U+Y+65535,Y=Math.floor(C/65536),U=C-Y*65536,C=oe+Y+65535,Y=Math.floor(C/65536),oe=C-Y*65536,C=ge+Y+65535,Y=Math.floor(C/65536),ge=C-Y*65536,C=xe+Y+65535,Y=Math.floor(C/65536),xe=C-Y*65536,C=Re+Y+65535,Y=Math.floor(C/65536),Re=C-Y*65536,C=De+Y+65535,Y=Math.floor(C/65536),De=C-Y*65536,C=it+Y+65535,Y=Math.floor(C/65536),it=C-Y*65536,C=Ue+Y+65535,Y=Math.floor(C/65536),Ue=C-Y*65536,C=gt+Y+65535,Y=Math.floor(C/65536),gt=C-Y*65536,C=st+Y+65535,Y=Math.floor(C/65536),st=C-Y*65536,C=tt+Y+65535,Y=Math.floor(C/65536),tt=C-Y*65536,C=At+Y+65535,Y=Math.floor(C/65536),At=C-Y*65536,C=Rt+Y+65535,Y=Math.floor(C/65536),Rt=C-Y*65536,C=Mt+Y+65535,Y=Math.floor(C/65536),Mt=C-Y*65536,C=Et+Y+65535,Y=Math.floor(C/65536),Et=C-Y*65536,C=dt+Y+65535,Y=Math.floor(C/65536),dt=C-Y*65536,U+=Y-1+37*(Y-1),Y=1,C=U+Y+65535,Y=Math.floor(C/65536),U=C-Y*65536,C=oe+Y+65535,Y=Math.floor(C/65536),oe=C-Y*65536,C=ge+Y+65535,Y=Math.floor(C/65536),ge=C-Y*65536,C=xe+Y+65535,Y=Math.floor(C/65536),xe=C-Y*65536,C=Re+Y+65535,Y=Math.floor(C/65536),Re=C-Y*65536,C=De+Y+65535,Y=Math.floor(C/65536),De=C-Y*65536,C=it+Y+65535,Y=Math.floor(C/65536),it=C-Y*65536,C=Ue+Y+65535,Y=Math.floor(C/65536),Ue=C-Y*65536,C=gt+Y+65535,Y=Math.floor(C/65536),gt=C-Y*65536,C=st+Y+65535,Y=Math.floor(C/65536),st=C-Y*65536,C=tt+Y+65535,Y=Math.floor(C/65536),tt=C-Y*65536,C=At+Y+65535,Y=Math.floor(C/65536),At=C-Y*65536,C=Rt+Y+65535,Y=Math.floor(C/65536),Rt=C-Y*65536,C=Mt+Y+65535,Y=Math.floor(C/65536),Mt=C-Y*65536,C=Et+Y+65535,Y=Math.floor(C/65536),Et=C-Y*65536,C=dt+Y+65535,Y=Math.floor(C/65536),dt=C-Y*65536,U+=Y-1+37*(Y-1),$[0]=U,$[1]=oe,$[2]=ge,$[3]=xe,$[4]=Re,$[5]=De,$[6]=it,$[7]=Ue,$[8]=gt,$[9]=st,$[10]=tt,$[11]=At,$[12]=Rt,$[13]=Mt,$[14]=Et,$[15]=dt}function se($,W){N($,W,W)}function ee($,W){var V=r(),C;for(C=0;C<16;C++)V[C]=W[C];for(C=253;C>=0;C--)se(V,V),C!==2&&C!==4&&N(V,V,W);for(C=0;C<16;C++)$[C]=V[C]}function X($,W){var V=r(),C;for(C=0;C<16;C++)V[C]=W[C];for(C=250;C>=0;C--)se(V,V),C!==1&&N(V,V,W);for(C=0;C<16;C++)$[C]=V[C]}function Q($,W,V){var C=new Uint8Array(32),Y=new Float64Array(80),U,oe,ge=r(),xe=r(),Re=r(),De=r(),it=r(),Ue=r();for(oe=0;oe<31;oe++)C[oe]=W[oe];for(C[31]=W[31]&127|64,C[0]&=248,I(Y,V),oe=0;oe<16;oe++)xe[oe]=Y[oe],De[oe]=ge[oe]=Re[oe]=0;for(ge[0]=De[0]=1,oe=254;oe>=0;--oe)U=C[oe>>>3]>>>(oe&7)&1,_(ge,xe,U),_(Re,De,U),F(it,ge,Re),ce(ge,ge,Re),F(Re,xe,De),ce(xe,xe,De),se(De,it),se(Ue,ge),N(ge,Re,ge),N(Re,xe,it),F(it,ge,Re),ce(ge,ge,Re),se(xe,ge),ce(Re,De,Ue),N(ge,Re,u),F(ge,ge,De),N(Re,Re,ge),N(ge,De,Ue),N(De,xe,Y),se(xe,it),_(ge,xe,U),_(Re,De,U);for(oe=0;oe<16;oe++)Y[oe+16]=ge[oe],Y[oe+32]=Re[oe],Y[oe+48]=xe[oe],Y[oe+64]=De[oe];var gt=Y.subarray(32),st=Y.subarray(16);return ee(gt,gt),N(st,st,gt),S($,st),0}function R($,W){return Q($,W,s)}function Z($,W){return n(W,32),R($,W)}function te($,W,V){var C=new Uint8Array(32);return Q(C,V,W),H($,i,C,J)}var le=f,ie=g;function fe($,W,V,C,Y,U){var oe=new Uint8Array(32);return te(oe,Y,U),le($,W,V,C,oe)}function ve($,W,V,C,Y,U){var oe=new Uint8Array(32);return te(oe,Y,U),ie($,W,V,C,oe)}var Me=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ne($,W,V,C){for(var Y=new Int32Array(16),U=new Int32Array(16),oe,ge,xe,Re,De,it,Ue,gt,st,tt,At,Rt,Mt,Et,dt,_t,ot,wt,lt,at,Ae,Pe,Ge,je,qe,Xe,kt=$[0],Wt=$[1],Zt=$[2],Kt=$[3],pe=$[4],nr=$[5],dr=$[6],pr=$[7],Qt=W[0],gr=W[1],lr=W[2],Lr=W[3],mr=W[4],wr=W[5],Br=W[6],$r=W[7],Ir=0;C>=128;){for(lt=0;lt<16;lt++)at=8*lt+Ir,Y[lt]=V[at+0]<<24|V[at+1]<<16|V[at+2]<<8|V[at+3],U[lt]=V[at+4]<<24|V[at+5]<<16|V[at+6]<<8|V[at+7];for(lt=0;lt<80;lt++)if(oe=kt,ge=Wt,xe=Zt,Re=Kt,De=pe,it=nr,Ue=dr,gt=pr,st=Qt,tt=gr,At=lr,Rt=Lr,Mt=mr,Et=wr,dt=Br,_t=$r,Ae=pr,Pe=$r,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=(pe>>>14|mr<<18)^(pe>>>18|mr<<14)^(mr>>>9|pe<<23),Pe=(mr>>>14|pe<<18)^(mr>>>18|pe<<14)^(pe>>>9|mr<<23),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=pe&nr^~pe&dr,Pe=mr&wr^~mr&Br,Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=Me[lt*2],Pe=Me[lt*2+1],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=Y[lt%16],Pe=U[lt%16],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,ot=qe&65535|Xe<<16,wt=Ge&65535|je<<16,Ae=ot,Pe=wt,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=(kt>>>28|Qt<<4)^(Qt>>>2|kt<<30)^(Qt>>>7|kt<<25),Pe=(Qt>>>28|kt<<4)^(kt>>>2|Qt<<30)^(kt>>>7|Qt<<25),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=kt&Wt^kt&Zt^Wt&Zt,Pe=Qt&gr^Qt&lr^gr&lr,Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,gt=qe&65535|Xe<<16,_t=Ge&65535|je<<16,Ae=Re,Pe=Rt,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=ot,Pe=wt,Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,Re=qe&65535|Xe<<16,Rt=Ge&65535|je<<16,Wt=oe,Zt=ge,Kt=xe,pe=Re,nr=De,dr=it,pr=Ue,kt=gt,gr=st,lr=tt,Lr=At,mr=Rt,wr=Mt,Br=Et,$r=dt,Qt=_t,lt%16===15)for(at=0;at<16;at++)Ae=Y[at],Pe=U[at],Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=Y[(at+9)%16],Pe=U[(at+9)%16],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,ot=Y[(at+1)%16],wt=U[(at+1)%16],Ae=(ot>>>1|wt<<31)^(ot>>>8|wt<<24)^ot>>>7,Pe=(wt>>>1|ot<<31)^(wt>>>8|ot<<24)^(wt>>>7|ot<<25),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,ot=Y[(at+14)%16],wt=U[(at+14)%16],Ae=(ot>>>19|wt<<13)^(wt>>>29|ot<<3)^ot>>>6,Pe=(wt>>>19|ot<<13)^(ot>>>29|wt<<3)^(wt>>>6|ot<<26),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,Y[at]=qe&65535|Xe<<16,U[at]=Ge&65535|je<<16;Ae=kt,Pe=Qt,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[0],Pe=W[0],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[0]=kt=qe&65535|Xe<<16,W[0]=Qt=Ge&65535|je<<16,Ae=Wt,Pe=gr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[1],Pe=W[1],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[1]=Wt=qe&65535|Xe<<16,W[1]=gr=Ge&65535|je<<16,Ae=Zt,Pe=lr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[2],Pe=W[2],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[2]=Zt=qe&65535|Xe<<16,W[2]=lr=Ge&65535|je<<16,Ae=Kt,Pe=Lr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[3],Pe=W[3],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[3]=Kt=qe&65535|Xe<<16,W[3]=Lr=Ge&65535|je<<16,Ae=pe,Pe=mr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[4],Pe=W[4],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[4]=pe=qe&65535|Xe<<16,W[4]=mr=Ge&65535|je<<16,Ae=nr,Pe=wr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[5],Pe=W[5],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[5]=nr=qe&65535|Xe<<16,W[5]=wr=Ge&65535|je<<16,Ae=dr,Pe=Br,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[6],Pe=W[6],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[6]=dr=qe&65535|Xe<<16,W[6]=Br=Ge&65535|je<<16,Ae=pr,Pe=$r,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[7],Pe=W[7],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[7]=pr=qe&65535|Xe<<16,W[7]=$r=Ge&65535|je<<16,Ir+=128,C-=128}return C}function Te($,W,V){var C=new Int32Array(8),Y=new Int32Array(8),U=new Uint8Array(256),oe,ge=V;for(C[0]=1779033703,C[1]=3144134277,C[2]=1013904242,C[3]=2773480762,C[4]=1359893119,C[5]=2600822924,C[6]=528734635,C[7]=1541459225,Y[0]=4089235720,Y[1]=2227873595,Y[2]=4271175723,Y[3]=1595750129,Y[4]=2917565137,Y[5]=725511199,Y[6]=4215389547,Y[7]=327033209,Ne(C,Y,W,V),V%=128,oe=0;oe<V;oe++)U[oe]=W[ge-V+oe];for(U[V]=128,V=256-128*(V<112?1:0),U[V-9]=0,P(U,V-8,ge/536870912|0,ge<<3),Ne(C,Y,U,V),oe=0;oe<8;oe++)P($,8*oe,C[oe],Y[oe]);return 0}function $e($,W){var V=r(),C=r(),Y=r(),U=r(),oe=r(),ge=r(),xe=r(),Re=r(),De=r();ce(V,$[1],$[0]),ce(De,W[1],W[0]),N(V,V,De),F(C,$[0],$[1]),F(De,W[0],W[1]),N(C,C,De),N(Y,$[3],W[3]),N(Y,Y,d),N(U,$[2],W[2]),F(U,U,U),ce(oe,C,V),ce(ge,U,Y),F(xe,U,Y),F(Re,C,V),N($[0],oe,ge),N($[1],Re,xe),N($[2],xe,ge),N($[3],oe,Re)}function Ie($,W,V){var C;for(C=0;C<4;C++)_($[C],W[C],V)}function Le($,W){var V=r(),C=r(),Y=r();ee(Y,W[2]),N(V,W[0],Y),N(C,W[1],Y),S($,C),$[31]^=M(V)<<7}function Ve($,W,V){var C,Y;for(v($[0],o),v($[1],a),v($[2],a),v($[3],o),Y=255;Y>=0;--Y)C=V[Y/8|0]>>(Y&7)&1,Ie($,W,C),$e(W,$),$e($,$),Ie($,W,C)}function ke($,W){var V=[r(),r(),r(),r()];v(V[0],p),v(V[1],y),v(V[2],a),N(V[3],p,y),Ve($,V,W)}function ze($,W,V){var C=new Uint8Array(64),Y=[r(),r(),r(),r()],U;for(V||n(W,32),Te(C,W,32),C[0]&=248,C[31]&=127,C[31]|=64,ke(Y,C),Le($,Y),U=0;U<32;U++)W[U+32]=$[U];return 0}var He=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ee($,W){var V,C,Y,U;for(C=63;C>=32;--C){for(V=0,Y=C-32,U=C-12;Y<U;++Y)W[Y]+=V-16*W[C]*He[Y-(C-32)],V=Math.floor((W[Y]+128)/256),W[Y]-=V*256;W[Y]+=V,W[C]=0}for(V=0,Y=0;Y<32;Y++)W[Y]+=V-(W[31]>>4)*He[Y],V=W[Y]>>8,W[Y]&=255;for(Y=0;Y<32;Y++)W[Y]-=V*He[Y];for(C=0;C<32;C++)W[C+1]+=W[C]>>8,$[C]=W[C]&255}function Qe($){var W=new Float64Array(64),V;for(V=0;V<64;V++)W[V]=$[V];for(V=0;V<64;V++)$[V]=0;Ee($,W)}function ct($,W,V,C){var Y=new Uint8Array(64),U=new Uint8Array(64),oe=new Uint8Array(64),ge,xe,Re=new Float64Array(64),De=[r(),r(),r(),r()];Te(Y,C,32),Y[0]&=248,Y[31]&=127,Y[31]|=64;var it=V+64;for(ge=0;ge<V;ge++)$[64+ge]=W[ge];for(ge=0;ge<32;ge++)$[32+ge]=Y[32+ge];for(Te(oe,$.subarray(32),V+32),Qe(oe),ke(De,oe),Le($,De),ge=32;ge<64;ge++)$[ge]=C[ge];for(Te(U,$,V+64),Qe(U),ge=0;ge<64;ge++)Re[ge]=0;for(ge=0;ge<32;ge++)Re[ge]=oe[ge];for(ge=0;ge<32;ge++)for(xe=0;xe<32;xe++)Re[ge+xe]+=U[ge]*Y[xe];return Ee($.subarray(32),Re),it}function Be($,W){var V=r(),C=r(),Y=r(),U=r(),oe=r(),ge=r(),xe=r();return v($[2],a),I($[1],W),se(Y,$[1]),N(U,Y,l),ce(Y,Y,$[2]),F(U,$[2],U),se(oe,U),se(ge,oe),N(xe,ge,oe),N(V,xe,Y),N(V,V,U),X(V,V),N(V,V,Y),N(V,V,U),N(V,V,U),N($[0],V,U),se(C,$[0]),N(C,C,U),b(C,Y)&&N($[0],$[0],A),se(C,$[0]),N(C,C,U),b(C,Y)?-1:(M($[0])===W[31]>>7&&ce($[0],o,$[0]),N($[3],$[0],$[1]),0)}function et($,W,V,C){var Y,U=new Uint8Array(32),oe=new Uint8Array(64),ge=[r(),r(),r(),r()],xe=[r(),r(),r(),r()];if(V<64||Be(xe,C))return-1;for(Y=0;Y<V;Y++)$[Y]=W[Y];for(Y=0;Y<32;Y++)$[Y+32]=C[Y];if(Te(oe,$,V),Qe(oe),Ve(ge,xe,oe),ke(xe,W.subarray(32)),$e(ge,xe),Le(U,ge),V-=64,k(W,0,U,0)){for(Y=0;Y<V;Y++)$[Y]=0;return-1}for(Y=0;Y<V;Y++)$[Y]=W[Y+64];return V}var rt=32,Je=24,pt=32,ht=16,ft=32,Ht=32,Jt=32,St=32,er=32,Xt=Je,Ot=pt,Bt=ht,Tt=64,vt=32,Dt=64,Lt=32,bt=64;e.lowlevel={crypto_core_hsalsa20:H,crypto_stream_xor:_e,crypto_stream:ue,crypto_stream_salsa20_xor:T,crypto_stream_salsa20:z,crypto_onetimeauth:E,crypto_onetimeauth_verify:m,crypto_verify_16:D,crypto_verify_32:k,crypto_secretbox:f,crypto_secretbox_open:g,crypto_scalarmult:Q,crypto_scalarmult_base:R,crypto_box_beforenm:te,crypto_box_afternm:le,crypto_box:fe,crypto_box_open:ve,crypto_box_keypair:Z,crypto_hash:Te,crypto_sign:ct,crypto_sign_keypair:ze,crypto_sign_open:et,crypto_secretbox_KEYBYTES:rt,crypto_secretbox_NONCEBYTES:Je,crypto_secretbox_ZEROBYTES:pt,crypto_secretbox_BOXZEROBYTES:ht,crypto_scalarmult_BYTES:ft,crypto_scalarmult_SCALARBYTES:Ht,crypto_box_PUBLICKEYBYTES:Jt,crypto_box_SECRETKEYBYTES:St,crypto_box_BEFORENMBYTES:er,crypto_box_NONCEBYTES:Xt,crypto_box_ZEROBYTES:Ot,crypto_box_BOXZEROBYTES:Bt,crypto_sign_BYTES:Tt,crypto_sign_PUBLICKEYBYTES:vt,crypto_sign_SECRETKEYBYTES:Dt,crypto_sign_SEEDBYTES:Lt,crypto_hash_BYTES:bt,gf:r,D:l,L:He,pack25519:S,unpack25519:I,M:N,A:F,S:se,Z:ce,pow2523:X,add:$e,set25519:v,modL:Ee,scalarmult:Ve,scalarbase:ke};function $t($,W){if($.length!==rt)throw new Error("bad key size");if(W.length!==Je)throw new Error("bad nonce size")}function jt($,W){if($.length!==Jt)throw new Error("bad public key size");if(W.length!==St)throw new Error("bad secret key size")}function nt(){for(var $=0;$<arguments.length;$++)if(!(arguments[$]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ft($){for(var W=0;W<$.length;W++)$[W]=0}e.randomBytes=function($){var W=new Uint8Array($);return n(W,$),W},e.secretbox=function($,W,V){nt($,W,V),$t(V,W);for(var C=new Uint8Array(pt+$.length),Y=new Uint8Array(C.length),U=0;U<$.length;U++)C[U+pt]=$[U];return f(Y,C,C.length,W,V),Y.subarray(ht)},e.secretbox.open=function($,W,V){nt($,W,V),$t(V,W);for(var C=new Uint8Array(ht+$.length),Y=new Uint8Array(C.length),U=0;U<$.length;U++)C[U+ht]=$[U];return C.length<32||g(Y,C,C.length,W,V)!==0?null:Y.subarray(pt)},e.secretbox.keyLength=rt,e.secretbox.nonceLength=Je,e.secretbox.overheadLength=ht,e.scalarMult=function($,W){if(nt($,W),$.length!==Ht)throw new Error("bad n size");if(W.length!==ft)throw new Error("bad p size");var V=new Uint8Array(ft);return Q(V,$,W),V},e.scalarMult.base=function($){if(nt($),$.length!==Ht)throw new Error("bad n size");var W=new Uint8Array(ft);return R(W,$),W},e.scalarMult.scalarLength=Ht,e.scalarMult.groupElementLength=ft,e.box=function($,W,V,C){var Y=e.box.before(V,C);return e.secretbox($,W,Y)},e.box.before=function($,W){nt($,W),jt($,W);var V=new Uint8Array(er);return te(V,$,W),V},e.box.after=e.secretbox,e.box.open=function($,W,V,C){var Y=e.box.before(V,C);return e.secretbox.open($,W,Y)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var $=new Uint8Array(Jt),W=new Uint8Array(St);return Z($,W),{publicKey:$,secretKey:W}},e.box.keyPair.fromSecretKey=function($){if(nt($),$.length!==St)throw new Error("bad secret key size");var W=new Uint8Array(Jt);return R(W,$),{publicKey:W,secretKey:new Uint8Array($)}},e.box.publicKeyLength=Jt,e.box.secretKeyLength=St,e.box.sharedKeyLength=er,e.box.nonceLength=Xt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function($,W){if(nt($,W),W.length!==Dt)throw new Error("bad secret key size");var V=new Uint8Array(Tt+$.length);return ct(V,$,$.length,W),V},e.sign.open=function($,W){if(nt($,W),W.length!==vt)throw new Error("bad public key size");var V=new Uint8Array($.length),C=et(V,$,$.length,W);if(C<0)return null;for(var Y=new Uint8Array(C),U=0;U<Y.length;U++)Y[U]=V[U];return Y},e.sign.detached=function($,W){for(var V=e.sign($,W),C=new Uint8Array(Tt),Y=0;Y<C.length;Y++)C[Y]=V[Y];return C},e.sign.detached.verify=function($,W,V){if(nt($,W,V),W.length!==Tt)throw new Error("bad signature size");if(V.length!==vt)throw new Error("bad public key size");var C=new Uint8Array(Tt+$.length),Y=new Uint8Array(Tt+$.length),U;for(U=0;U<Tt;U++)C[U]=W[U];for(U=0;U<$.length;U++)C[U+Tt]=$[U];return et(Y,C,C.length,V)>=0},e.sign.keyPair=function(){var $=new Uint8Array(vt),W=new Uint8Array(Dt);return ze($,W),{publicKey:$,secretKey:W}},e.sign.keyPair.fromSecretKey=function($){if(nt($),$.length!==Dt)throw new Error("bad secret key size");for(var W=new Uint8Array(vt),V=0;V<W.length;V++)W[V]=$[32+V];return{publicKey:W,secretKey:new Uint8Array($)}},e.sign.keyPair.fromSeed=function($){if(nt($),$.length!==Lt)throw new Error("bad seed size");for(var W=new Uint8Array(vt),V=new Uint8Array(Dt),C=0;C<32;C++)V[C]=$[C];return ze(W,V,!0),{publicKey:W,secretKey:V}},e.sign.publicKeyLength=vt,e.sign.secretKeyLength=Dt,e.sign.seedLength=Lt,e.sign.signatureLength=Tt,e.hash=function($){nt($);var W=new Uint8Array(bt);return Te(W,$,$.length),W},e.hash.hashLength=bt,e.verify=function($,W){return nt($,W),$.length===0||W.length===0||$.length!==W.length?!1:O($,0,W,0,$.length)===0},e.setPRNG=function($){n=$},function(){var $=typeof self<"u"?self.crypto||self.msCrypto:null;if($&&$.getRandomValues){var W=65536;e.setPRNG(function(V,C){var Y,U=new Uint8Array(C);for(Y=0;Y<C;Y+=W)$.getRandomValues(U.subarray(Y,Y+Math.min(C-Y,W)));for(Y=0;Y<C;Y++)V[Y]=U[Y];Ft(U)})}else typeof tx<"u"&&($=tl,$&&$.randomBytes&&e.setPRNG(function(V,C){var Y,U=$.randomBytes(C);for(Y=0;Y<C;Y++)V[Y]=U[Y];Ft(U)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(D7);var NZ=D7.exports;const G0=ji(NZ);var Pa;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",t[t.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Pa||(Pa={}));var O7;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(O7||(O7={}));var Ju;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Ju||(Ju={}));var N7;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(N7||(N7={}));var L7;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(L7||(L7={}));var k7;(function(t){t.MAINNET="-239",t.TESTNET="-3"})(k7||(k7={}));function LZ(t,e){const r=uh.encodeBase64(t);return e?encodeURIComponent(r):r}function kZ(t,e){return e&&(t=decodeURIComponent(t)),uh.decodeBase64(t)}function BZ(t,e=!1){let r;return t instanceof Uint8Array?r=t:(typeof t!="string"&&(t=JSON.stringify(t)),r=uh.decodeUTF8(t)),LZ(r,e)}function $Z(t,e=!1){const r=kZ(t,e);return{toString(){return uh.encodeUTF8(r)},toObject(){try{return JSON.parse(uh.encodeUTF8(r))}catch{return null}},toUint8Array(){return r}}}const B7={encode:BZ,decode:$Z};function FZ(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function jZ(t,e){if(e>=t.length)throw new Error("Index is out of buffer");const r=t.slice(0,e),n=t.slice(e);return[r,n]}function Cb(t){let e="";return t.forEach(r=>{e+=("0"+(r&255).toString(16)).slice(-2)}),e}function Y0(t){if(t.length%2!==0)throw new Error(`Cannot convert ${t} to bytesArray`);const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=parseInt(t.slice(r,r+2),16);return e}class Tb{constructor(e){this.nonceLength=24,this.keyPair=e?this.createKeypairFromString(e):this.createKeypair(),this.sessionId=Cb(this.keyPair.publicKey)}createKeypair(){return G0.box.keyPair()}createKeypairFromString(e){return{publicKey:Y0(e.publicKey),secretKey:Y0(e.secretKey)}}createNonce(){return G0.randomBytes(this.nonceLength)}encrypt(e,r){const n=new TextEncoder().encode(e),i=this.createNonce(),s=G0.box(n,i,r,this.keyPair.secretKey);return FZ(i,s)}decrypt(e,r){const[n,i]=jZ(e,this.nonceLength),s=G0.box.open(i,n,r,this.keyPair.secretKey);if(!s)throw new Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${r.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(s)}stringifyKeypair(){return{publicKey:Cb(this.keyPair.publicKey),secretKey:Cb(this.keyPair.secretKey)}}}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function UZ(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Pt(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{l(n.next(d))}catch(p){o(p)}}function u(d){try{l(n.throw(d))}catch(p){o(p)}}function l(d){d.done?s(d.value):i(d.value).then(a,u)}l((n=n.apply(t,[])).next())})}class Ut extends Error{constructor(e,r){super(e,r),this.message=`${Ut.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${e?`
`+e:""}`,Object.setPrototypeOf(this,Ut.prototype)}get info(){return""}}Ut.prefix="[TON_CONNECT_SDK_ERROR]";class Rb extends Ut{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,Rb.prototype)}}class J0 extends Ut{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,J0.prototype)}}class X0 extends Ut{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,X0.prototype)}}class Db extends Ut{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...e){super(...e),Object.setPrototypeOf(this,Db.prototype)}}class Z0 extends Ut{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,Z0.prototype)}}function qZ(t){return"jsBridgeKey"in t}class Q0 extends Ut{get info(){return"User rejects the action in the wallet."}constructor(...e){super(...e),Object.setPrototypeOf(this,Q0.prototype)}}class ep extends Ut{get info(){return"Request to the wallet contains errors."}constructor(...e){super(...e),Object.setPrototypeOf(this,ep.prototype)}}class tp extends Ut{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,tp.prototype)}}class Ob extends Ut{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...e){super(...e),Object.setPrototypeOf(this,Ob.prototype)}}class Nb extends Ut{get info(){return"An error occurred while fetching the wallets list."}constructor(...e){super(...e),Object.setPrototypeOf(this,Nb.prototype)}}class Ma extends Ut{constructor(...e){super(...e),Object.setPrototypeOf(this,Ma.prototype)}}const $7={[Pa.UNKNOWN_ERROR]:Ma,[Pa.USER_REJECTS_ERROR]:Q0,[Pa.BAD_REQUEST_ERROR]:ep,[Pa.UNKNOWN_APP_ERROR]:tp,[Pa.MANIFEST_NOT_FOUND_ERROR]:X0,[Pa.MANIFEST_CONTENT_ERROR]:J0};class zZ{parseError(e){let r=Ma;return e.code in $7&&(r=$7[e.code]||Ma),new r(e.message)}}const HZ=new zZ;class WZ{isError(e){return"error"in e}}const F7={[Ju.UNKNOWN_ERROR]:Ma,[Ju.USER_REJECTS_ERROR]:Q0,[Ju.BAD_REQUEST_ERROR]:ep,[Ju.UNKNOWN_APP_ERROR]:tp};class KZ extends WZ{convertToRpcRequest(e){return{method:"sendTransaction",params:[JSON.stringify(e)]}}parseAndThrowError(e){let r=Ma;throw e.error.code in F7&&(r=F7[e.error.code]||Ma),new r(e.error.message)}convertFromRpcResponse(e){return{boc:e.result}}}const rp=new KZ;class VZ{constructor(e,r){this.storage=e,this.storeKey="ton-connect-storage_http-bridge-gateway::"+r}storeLastEventId(e){return Pt(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,e)})}removeLastEventId(){return Pt(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return Pt(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);return e||null})}}function GZ(t){return t.slice(-1)==="/"?t.slice(0,-1):t}function j7(t,e){return GZ(t)+"/"+e}function YZ(t){if(!t)return!1;const e=new URL(t);return e.protocol==="tg:"||e.hostname==="t.me"}function JZ(t){return t.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--")}function U7(t,e){return Pt(this,void 0,void 0,function*(){return new Promise((r,n)=>{var i,s;if(!((i=void 0)===null||i===void 0)&&i.aborted){n(new Ut("Delay aborted"));return}const o=setTimeout(()=>r(),t);(s=void 0)===null||s===void 0||s.addEventListener("abort",()=>{clearTimeout(o),n(new Ut("Delay aborted"))})})})}function As(t){const e=new AbortController;return t!=null&&t.aborted?e.abort():t==null||t.addEventListener("abort",()=>e.abort(),{once:!0}),e}function fh(t,e){var r,n;return Pt(this,void 0,void 0,function*(){const i=(r=e==null?void 0:e.attempts)!==null&&r!==void 0?r:10,s=(n=e==null?void 0:e.delayMs)!==null&&n!==void 0?n:200,o=As(e==null?void 0:e.signal);if(typeof t!="function")throw new Ut(`Expected a function, got ${typeof t}`);let a=0,u;for(;a<i;){if(o.signal.aborted)throw new Ut(`Aborted after attempts ${a}`);try{return yield t({signal:o.signal})}catch(l){u=l,a++,a<i&&(yield U7(s))}}throw u})}function Sn(...t){try{console.debug("[TON_CONNECT_SDK]",...t)}catch{}}function Fo(...t){try{console.error("[TON_CONNECT_SDK]",...t)}catch{}}function XZ(...t){try{console.warn("[TON_CONNECT_SDK]",...t)}catch{}}function ZZ(t,e){let r=null,n=null,i=null,s=null,o=null;const a=(p,...y)=>Pt(this,void 0,void 0,function*(){if(s=p??null,o==null||o.abort(),o=As(p),o.signal.aborted)throw new Ut("Resource creation was aborted");n=y??null;const A=t(o.signal,...y);i=A;const P=yield A;if(i!==A&&P!==r)throw yield e(P),new Ut("Resource creation was aborted by a new resource creation");return r=P,r});return{create:a,current:()=>r??null,dispose:()=>Pt(this,void 0,void 0,function*(){try{const p=r;r=null;const y=i;i=null;try{o==null||o.abort()}catch{}yield Promise.allSettled([p?e(p):Promise.resolve(),y?e(yield y):Promise.resolve()])}catch{}}),recreate:p=>Pt(this,void 0,void 0,function*(){const y=r,A=i,P=n,O=s;if(yield U7(p),y===r&&A===i&&P===n&&O===s)return yield a(s,...P??[]);throw new Ut("Resource recreation was aborted by a new resource creation")})}}function QZ(t,e){const r=e==null?void 0:e.timeout,n=e==null?void 0:e.signal,i=As(n);return new Promise((s,o)=>Pt(this,void 0,void 0,function*(){if(i.signal.aborted){o(new Ut("Operation aborted"));return}let a;typeof r<"u"&&(a=setTimeout(()=>{i.abort(),o(new Ut(`Timeout after ${r}ms`))},r)),i.signal.addEventListener("abort",()=>{clearTimeout(a),o(new Ut("Operation aborted"))},{once:!0});const u={timeout:r,abort:i.signal};yield t((...l)=>{clearTimeout(a),s(...l)},()=>{clearTimeout(a),o()},u)}))}class Lb{constructor(e,r,n,i,s){this.bridgeUrl=r,this.sessionId=n,this.listener=i,this.errorsListener=s,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=2e3,this.defaultResendDelay=5e3,this.eventSource=ZZ((o,a)=>Pt(this,void 0,void 0,function*(){const u={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:o,openingDeadlineMS:a};return yield eQ(u)}),o=>Pt(this,void 0,void 0,function*(){o.close()})),this.bridgeGatewayStorage=new VZ(e,r)}get isReady(){const e=this.eventSource.current();return(e==null?void 0:e.readyState)===EventSource.OPEN}get isClosed(){const e=this.eventSource.current();return(e==null?void 0:e.readyState)!==EventSource.OPEN}get isConnecting(){const e=this.eventSource.current();return(e==null?void 0:e.readyState)===EventSource.CONNECTING}registerSession(e){return Pt(this,void 0,void 0,function*(){yield this.eventSource.create(e==null?void 0:e.signal,e==null?void 0:e.openingDeadlineMS)})}send(e,r,n,i){var s;return Pt(this,void 0,void 0,function*(){const o={};typeof i=="number"?o.ttl=i:(o.ttl=i==null?void 0:i.ttl,o.signal=i==null?void 0:i.signal,o.attempts=i==null?void 0:i.attempts);const a=new URL(j7(this.bridgeUrl,this.postPath));a.searchParams.append("client_id",this.sessionId),a.searchParams.append("to",r),a.searchParams.append("ttl",((o==null?void 0:o.ttl)||this.defaultTtl).toString()),a.searchParams.append("topic",n);const u=B7.encode(e);yield fh(l=>Pt(this,void 0,void 0,function*(){const d=yield this.post(a,u,l.signal);if(!d.ok)throw new Ut(`Bridge send failed, status ${d.status}`)}),{attempts:(s=o==null?void 0:o.attempts)!==null&&s!==void 0?s:Number.MAX_SAFE_INTEGER,delayMs:this.defaultResendDelay,signal:o==null?void 0:o.signal})})}pause(){this.eventSource.dispose().catch(e=>Fo(`Bridge pause failed, ${e}`))}unPause(){return Pt(this,void 0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return Pt(this,void 0,void 0,function*(){yield this.eventSource.dispose().catch(e=>Fo(`Bridge close failed, ${e}`))})}setListener(e){this.listener=e}setErrorsListener(e){this.errorsListener=e}post(e,r,n){return Pt(this,void 0,void 0,function*(){const i=yield fetch(e,{method:"post",body:r,signal:n});if(!i.ok)throw new Ut(`Bridge send failed, status ${i.status}`);return i})}errorsHandler(e,r){return Pt(this,void 0,void 0,function*(){if(this.isConnecting)throw e.close(),new Ut("Bridge error, failed to connect");if(this.isReady){try{this.errorsListener(r)}catch{}return}if(this.isClosed)return e.close(),Sn(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new Ut("Bridge error, unknown state")})}messagesHandler(e){return Pt(this,void 0,void 0,function*(){if(e.data===this.heartbeatMessage||(yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId),this.isClosed))return;let r;try{r=JSON.parse(e.data)}catch(n){throw new Ut(`Bridge message parse failed, message ${n.data}`)}this.listener(r)})}}function eQ(t){return Pt(this,void 0,void 0,function*(){return yield QZ((e,r,n)=>Pt(this,void 0,void 0,function*(){var i;const o=As(n.signal).signal;if(o.aborted){r(new Ut("Bridge connection aborted"));return}const a=new URL(j7(t.bridgeUrl,t.ssePath));a.searchParams.append("client_id",t.sessionId);const u=yield t.bridgeGatewayStorage.getLastEventId();if(u&&a.searchParams.append("last_event_id",u),o.aborted){r(new Ut("Bridge connection aborted"));return}const l=new EventSource(a.toString());l.onerror=d=>Pt(this,void 0,void 0,function*(){if(o.aborted){l.close(),r(new Ut("Bridge connection aborted"));return}try{const p=yield t.errorHandler(l,d);p!==l&&l.close(),p&&p!==l&&e(p)}catch(p){l.close(),r(p)}}),l.onopen=()=>{if(o.aborted){l.close(),r(new Ut("Bridge connection aborted"));return}e(l)},l.onmessage=d=>{if(o.aborted){l.close(),r(new Ut("Bridge connection aborted"));return}t.messageHandler(d)},(i=t.signal)===null||i===void 0||i.addEventListener("abort",()=>{l.close(),r(new Ut("Bridge connection aborted"))})}),{timeout:t.openingDeadlineMS,signal:t.signal})})}function lh(t){return!("connectEvent"in t)}class hh{constructor(e){this.storage=e,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(e){return Pt(this,void 0,void 0,function*(){if(e.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(e));if(!lh(e)){const n={sessionKeyPair:e.session.sessionCrypto.stringifyKeypair(),walletPublicKey:e.session.walletPublicKey,bridgeUrl:e.session.bridgeUrl},i={type:"http",connectEvent:e.connectEvent,session:n,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(i))}const r={type:"http",connectionSource:e.connectionSource,sessionCrypto:e.sessionCrypto.stringifyKeypair()};return this.storage.setItem(this.storeKey,JSON.stringify(r))})}removeConnection(){return Pt(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);if(!e)return null;const r=JSON.parse(e);if(r.type==="injected")return r;if("connectEvent"in r){const n=new Tb(r.session.sessionKeyPair);return{type:"http",connectEvent:r.connectEvent,lastWalletEventId:r.lastWalletEventId,nextRpcRequestId:r.nextRpcRequestId,session:{sessionCrypto:n,bridgeUrl:r.session.bridgeUrl,walletPublicKey:r.session.walletPublicKey}}}return{type:"http",sessionCrypto:new Tb(r.sessionCrypto),connectionSource:r.connectionSource}})}getHttpConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new Ut("Trying to read HTTP connection source while nothing is stored");if(e.type==="injected")throw new Ut("Trying to read HTTP connection source while injected connection is stored");return e})}getHttpPendingConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new Ut("Trying to read HTTP connection source while nothing is stored");if(e.type==="injected")throw new Ut("Trying to read HTTP connection source while injected connection is stored");if(!lh(e))throw new Ut("Trying to read HTTP-pending connection while http connection is stored");return e})}getInjectedConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new Ut("Trying to read Injected bridge connection source while nothing is stored");if((e==null?void 0:e.type)==="http")throw new Ut("Trying to read Injected bridge connection source while HTTP connection is stored");return e})}storedConnectionType(){return Pt(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);return e?JSON.parse(e).type:null})}storeLastWalletEventId(e){return Pt(this,void 0,void 0,function*(){const r=yield this.getConnection();if(r&&r.type==="http"&&!lh(r))return r.lastWalletEventId=e,this.storeConnection(r)})}getLastWalletEventId(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId})}increaseNextRpcRequestId(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(e&&"nextRpcRequestId"in e){const r=e.nextRpcRequestId||0;return e.nextRpcRequestId=r+1,this.storeConnection(e)}})}getNextRpcRequestId(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();return e&&"nextRpcRequestId"in e&&e.nextRpcRequestId||0})}}const q7=2;class dh{constructor(e,r){this.storage=e,this.walletConnectionSource=r,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=12e3,this.defaultRetryTimeoutMS=2e3,this.connectionStorage=new hh(e)}static fromStorage(e){return Pt(this,void 0,void 0,function*(){const n=yield new hh(e).getHttpConnection();return lh(n)?new dh(e,n.connectionSource):new dh(e,{bridgeUrl:n.session.bridgeUrl})})}connect(e,r){var n;const i=As(r==null?void 0:r.signal);(n=this.abortController)===null||n===void 0||n.abort(),this.abortController=i,this.closeGateways();const s=new Tb;this.session={sessionCrypto:s,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:s}).then(()=>Pt(this,void 0,void 0,function*(){i.signal.aborted||(yield fh(a=>{var u;return this.openGateways(s,{openingDeadlineMS:(u=r==null?void 0:r.openingDeadlineMS)!==null&&u!==void 0?u:this.defaultOpeningDeadlineMS,signal:a==null?void 0:a.signal})},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:i.signal}))}));const o="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(o,e)}restoreConnection(e){var r,n;return Pt(this,void 0,void 0,function*(){const i=As(e==null?void 0:e.signal);if((r=this.abortController)===null||r===void 0||r.abort(),this.abortController=i,i.signal.aborted)return;this.closeGateways();const s=yield this.connectionStorage.getHttpConnection();if(!s||i.signal.aborted)return;const o=(n=e==null?void 0:e.openingDeadlineMS)!==null&&n!==void 0?n:this.defaultOpeningDeadlineMS;if(lh(s))return this.session={sessionCrypto:s.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(s.sessionCrypto,{openingDeadlineMS:o,signal:i==null?void 0:i.signal});if(Array.isArray(this.walletConnectionSource))throw new Ut("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=s.session,this.gateway&&(Sn("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Lb(this.storage,this.walletConnectionSource.bridgeUrl,s.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),!i.signal.aborted){this.listeners.forEach(a=>a(s.connectEvent));try{yield fh(a=>this.gateway.registerSession({openingDeadlineMS:o,signal:a.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:i.signal})}catch{yield this.disconnect({signal:i.signal});return}}})}sendRequest(e,r){const n={};return typeof r=="function"?n.onRequestSent=r:(n.onRequestSent=r==null?void 0:r.onRequestSent,n.signal=r==null?void 0:r.signal,n.attempts=r==null?void 0:r.attempts),new Promise((i,s)=>Pt(this,void 0,void 0,function*(){var o;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new Ut("Trying to send bridge request without session");const a=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Sn("Send http-bridge request:",Object.assign(Object.assign({},e),{id:a}));const u=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{id:a})),Y0(this.session.walletPublicKey));try{yield this.gateway.send(u,this.session.walletPublicKey,e.method,{attempts:n==null?void 0:n.attempts,signal:n==null?void 0:n.signal}),(o=n==null?void 0:n.onRequestSent)===null||o===void 0||o.call(n),this.pendingRequests.set(a.toString(),i)}catch(l){s(l)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(e){return Pt(this,void 0,void 0,function*(){return new Promise(r=>Pt(this,void 0,void 0,function*(){let n=!1,i=null;const s=()=>{n||(n=!0,this.removeBridgeAndSession().then(r))};try{this.closeGateways();const o=As(e==null?void 0:e.signal);i=setTimeout(()=>{o.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:s,signal:o.signal,attempts:1})}catch(o){Sn("Disconnect error:",o),n||this.removeBridgeAndSession().then(r)}finally{i&&clearTimeout(i),s()}}))})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(r=>r!==e)}pause(){var e;(e=this.gateway)===null||e===void 0||e.pause(),this.pendingGateways.forEach(r=>r.pause())}unPause(){return Pt(this,void 0,void 0,function*(){const e=this.pendingGateways.map(r=>r.unPause());this.gateway&&e.push(this.gateway.unPause()),yield Promise.all(e)})}pendingGatewaysListener(e,r,n){return Pt(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(e)){yield e.close();return}return this.closeGateways({except:e}),this.gateway&&(Sn("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=r,this.gateway=e,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(n)})}gatewayListener(e){return Pt(this,void 0,void 0,function*(){const r=JSON.parse(this.session.sessionCrypto.decrypt(B7.decode(e.message).toUint8Array(),Y0(e.from)));if(Sn("Wallet message received:",r),!("event"in r)){const i=r.id.toString(),s=this.pendingRequests.get(i);if(!s){Sn(`Response id ${i} doesn't match any request's id`);return}s(r),this.pendingRequests.delete(i);return}if(r.id!==void 0){const i=yield this.connectionStorage.getLastWalletEventId();if(i!==void 0&&r.id<=i){Fo(`Received event id (=${r.id}) must be greater than stored last wallet event id (=${i}) `);return}r.event!=="connect"&&(yield this.connectionStorage.storeLastWalletEventId(r.id))}const n=this.listeners;r.event==="connect"&&(yield this.updateSession(r,e.from)),r.event==="disconnect"&&(Sn("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),n.forEach(i=>i(r))})}gatewayErrorsListener(e){return Pt(this,void 0,void 0,function*(){throw new Ut(`Bridge error ${JSON.stringify(e)}`)})}updateSession(e,r){return Pt(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:r});const n=e.payload.items.find(s=>s.name==="ton_addr"),i=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{items:[n]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:e.id,connectEvent:i,nextRpcRequestId:0})})}removeBridgeAndSession(){return Pt(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(e,r){return YZ(e)?this.generateTGUniversalLink(e,r):this.generateRegularUniversalLink(e,r)}generateRegularUniversalLink(e,r){const n=new URL(e);return n.searchParams.append("v",q7.toString()),n.searchParams.append("id",this.session.sessionCrypto.sessionId),n.searchParams.append("r",JSON.stringify(r)),n.toString()}generateTGUniversalLink(e,r){const i=this.generateRegularUniversalLink("about:blank",r).split("?")[1],s="tonconnect-"+JZ(i),o=this.convertToDirectLink(e),a=new URL(o);return a.searchParams.append("startapp",s),a.toString()}convertToDirectLink(e){const r=new URL(e);return r.searchParams.has("attach")&&(r.searchParams.delete("attach"),r.pathname+="/start"),r.toString()}openGateways(e,r){return Pt(this,void 0,void 0,function*(){if(Array.isArray(this.walletConnectionSource)){this.pendingGateways.map(n=>n.close().catch()),this.pendingGateways=this.walletConnectionSource.map(n=>{const i=new Lb(this.storage,n.bridgeUrl,e.sessionId,()=>{},()=>{});return i.setListener(s=>this.pendingGatewaysListener(i,n.bridgeUrl,s)),i}),yield Promise.allSettled(this.pendingGateways.map(n=>fh(i=>{var s;return this.pendingGateways.some(o=>o===n)?n.registerSession({openingDeadlineMS:(s=r==null?void 0:r.openingDeadlineMS)!==null&&s!==void 0?s:this.defaultOpeningDeadlineMS,signal:i.signal}):n.close()},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:r==null?void 0:r.signal})));return}else return this.gateway&&(Sn("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Lb(this.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession({openingDeadlineMS:r==null?void 0:r.openingDeadlineMS,signal:r==null?void 0:r.signal})})}closeGateways(e){var r;(r=this.gateway)===null||r===void 0||r.close(),this.pendingGateways.filter(n=>n!==(e==null?void 0:e.except)).forEach(n=>n.close()),this.pendingGateways=[]}}function z7(t,e){return H7(t,[e])}function H7(t,e){return!t||typeof t!="object"?!1:e.every(r=>r in t)}function tQ(t){try{return!z7(t,"tonconnect")||!z7(t.tonconnect,"walletInfo")?!1:H7(t.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch{return!1}}class Xu{constructor(){this.storage={}}static getInstance(){return Xu.instance||(Xu.instance=new Xu),Xu.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var r;return(r=this.storage[e])!==null&&r!==void 0?r:null}key(e){var r;const n=Object.keys(this.storage);return e<0||e>=n.length?null:(r=n[e])!==null&&r!==void 0?r:null}removeItem(e){delete this.storage[e]}setItem(e,r){this.storage[e]=r}}function np(){if(!(typeof window>"u"))return window}function rQ(){const t=np();if(!t)return[];try{return Object.keys(t)}catch{return[]}}function nQ(){if(!(typeof document>"u"))return document}function iQ(){var t;const e=(t=np())===null||t===void 0?void 0:t.location.origin;return e?e+"/tonconnect-manifest.json":""}function sQ(){if(oQ())return localStorage;if(aQ())throw new Ut("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return Xu.getInstance()}function oQ(){try{return typeof localStorage<"u"}catch{return!1}}function aQ(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}class xi{constructor(e,r){this.injectedWalletKey=r,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const n=xi.window;if(!xi.isWindowContainsWallet(n,r))throw new Ob;this.connectionStorage=new hh(e),this.injectedWallet=n[r].tonconnect}static fromStorage(e){return Pt(this,void 0,void 0,function*(){const n=yield new hh(e).getInjectedConnection();return new xi(e,n.jsBridgeKey)})}static isWalletInjected(e){return xi.isWindowContainsWallet(this.window,e)}static isInsideWalletBrowser(e){return xi.isWindowContainsWallet(this.window,e)?this.window[e].tonconnect.isWalletBrowser:!1}static getCurrentlyInjectedWallets(){return this.window?rQ().filter(([n,i])=>tQ(i)).map(([n,i])=>({name:i.tonconnect.walletInfo.name,appName:i.tonconnect.walletInfo.app_name,aboutUrl:i.tonconnect.walletInfo.about_url,imageUrl:i.tonconnect.walletInfo.image,tondns:i.tonconnect.walletInfo.tondns,jsBridgeKey:n,injected:!0,embedded:i.tonconnect.isWalletBrowser,platforms:i.tonconnect.walletInfo.platforms})):[]}static isWindowContainsWallet(e,r){return!!e&&r in e&&typeof e[r]=="object"&&"tonconnect"in e[r]}connect(e){this._connect(q7,e)}restoreConnection(){return Pt(this,void 0,void 0,function*(){try{Sn("Injected Provider restoring connection...");const e=yield this.injectedWallet.restoreConnection();Sn("Injected Provider restoring connection response",e),e.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(r=>r(e))):yield this.connectionStorage.removeConnection()}catch(e){yield this.connectionStorage.removeConnection(),console.error(e)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return Pt(this,void 0,void 0,function*(){return new Promise(e=>{const r=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(e)};try{this.injectedWallet.disconnect(),r()}catch(n){Sn(n),this.sendRequest({method:"disconnect",params:[]},r)}})})}closeAllListeners(){var e;this.listenSubscriptions=!1,this.listeners=[],(e=this.unsubscribeCallback)===null||e===void 0||e.call(this)}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(r=>r!==e)}sendRequest(e,r){var n;return Pt(this,void 0,void 0,function*(){const i={};typeof r=="function"?i.onRequestSent=r:(i.onRequestSent=r==null?void 0:r.onRequestSent,i.signal=r==null?void 0:r.signal);const s=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Sn("Send injected-bridge request:",Object.assign(Object.assign({},e),{id:s}));const o=this.injectedWallet.send(Object.assign(Object.assign({},e),{id:s}));return o.then(a=>Sn("Wallet message received:",a)),(n=i==null?void 0:i.onRequestSent)===null||n===void 0||n.call(i),o})}_connect(e,r){return Pt(this,void 0,void 0,function*(){try{Sn(`Injected Provider connect request: protocolVersion: ${e}, message:`,r);const n=yield this.injectedWallet.connect(e,r);Sn("Injected Provider connect response:",n),n.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(i=>i(n))}catch(n){Sn("Injected Provider connect error:",n);const i={event:"connect_error",payload:{code:0,message:n==null?void 0:n.toString()}};this.listeners.forEach(s=>s(i))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(e=>{Sn("Wallet message received:",e),this.listenSubscriptions&&this.listeners.forEach(r=>r(e)),e.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}xi.window=np();class cQ{constructor(){this.localStorage=sQ()}getItem(e){return Pt(this,void 0,void 0,function*(){return this.localStorage.getItem(e)})}removeItem(e){return Pt(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}setItem(e,r){return Pt(this,void 0,void 0,function*(){this.localStorage.setItem(e,r)})}}function W7(t){return fQ(t)&&t.injected}function uQ(t){return W7(t)&&t.embedded}function fQ(t){return"jsBridgeKey"in t}const lQ=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.ton.space/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://static.mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"]},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"]},{app_name:"dewallet",name:"DeWallet",image:"https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",about_url:"https://delabwallet.com",universal_url:"https://t.me/dewallet?attach=wallet",bridge:[{type:"sse",url:"https://sse-bridge.delab.team/bridge"}],platforms:["ios","android"]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"]},{app_name:"bitgetTonWallet",name:"Bitget Wallet",image:"https://raw.githubusercontent.com/bitkeepwallet/download/main/logo/png/bitget_wallet_logo_0_gas_fee.png",about_url:"https://web3.bitget.com",deepLink:"bitkeep://",bridge:[{type:"js",key:"bitgetTonWallet"},{type:"sse",url:"https://bridge.tonapi.io/bridge"}],platforms:["ios","android","chrome"],universal_url:"https://bkcode.vip/ton-connect"},{app_name:"safepalwallet",name:"SafePal",image:"https://s.pvcliping.com/web/public_image/SafePal_x288.png",tondns:"",about_url:"https://www.safepal.com",universal_url:"https://link.safepal.io/ton-connect",deepLink:"safepal-tc://",bridge:[{type:"sse",url:"https://ton-bridge.safepal.com/tonbridge/v1/bridge"},{type:"js",key:"safepalwallet"}],platforms:["ios","android","chrome","firefox"]},{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]},{app_name:"okxTonWalletTr",name:"OKX TR Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/587A8296F0BB640F.png",about_url:"https://tr.okx.com/web3",universal_url:"https://tr.okx.com/download?appendQuery=true&deeplink=okxtr://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]}];class kb{constructor(e){this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource="https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json",e!=null&&e.walletsListSource&&(this.walletsListSource=e.walletsListSource),e!=null&&e.cacheTTLMs&&(this.cacheTTLMs=e.cacheTTLMs)}getWallets(){return Pt(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return Pt(this,void 0,void 0,function*(){const r=(yield this.getWallets()).filter(uQ);return r.length!==1?null:r[0]})}fetchWalletsList(){return Pt(this,void 0,void 0,function*(){let e=[];try{if(e=yield(yield fetch(this.walletsListSource)).json(),!Array.isArray(e))throw new Nb("Wrong wallets list format, wallets list must be an array.");const i=e.filter(s=>!this.isCorrectWalletConfigDTO(s));i.length&&(Fo(`Wallet(s) ${i.map(s=>s.name).join(", ")} config format is wrong. They were removed from the wallets list.`),e=e.filter(s=>this.isCorrectWalletConfigDTO(s)))}catch(n){Fo(n),e=lQ}let r=[];try{r=xi.getCurrentlyInjectedWallets()}catch(n){Fo(n)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(e),r)})}walletConfigDTOListToWalletConfigList(e){return e.map(r=>{const i={name:r.name,appName:r.app_name,imageUrl:r.image,aboutUrl:r.about_url,tondns:r.tondns,platforms:r.platforms};return r.bridge.forEach(s=>{if(s.type==="sse"&&(i.bridgeUrl=s.url,i.universalLink=r.universal_url,i.deepLink=r.deepLink),s.type==="js"){const o=s.key;i.jsBridgeKey=o,i.injected=xi.isWalletInjected(o),i.embedded=xi.isInsideWalletBrowser(o)}}),i})}mergeWalletsLists(e,r){return[...new Set(e.concat(r).map(i=>i.name)).values()].map(i=>{const s=e.find(a=>a.name===i),o=r.find(a=>a.name===i);return Object.assign(Object.assign({},s&&Object.assign({},s)),o&&Object.assign({},o))})}isCorrectWalletConfigDTO(e){if(!e||typeof e!="object")return!1;const r="name"in e,n="app_name"in e,i="image"in e,s="about_url"in e,o="platforms"in e;if(!r||!i||!s||!o||!n||!e.platforms||!Array.isArray(e.platforms)||!e.platforms.length||!("bridge"in e)||!Array.isArray(e.bridge)||!e.bridge.length)return!1;const a=e.bridge;if(a.some(d=>!d||typeof d!="object"||!("type"in d)))return!1;const u=a.find(d=>d.type==="sse");if(u&&(!("url"in u)||!u.url||!e.universal_url))return!1;const l=a.find(d=>d.type==="js");return!(l&&(!("key"in l)||!l.key))}}class ip extends Ut{get info(){return"Wallet doesn't support requested feature method."}constructor(...e){super(...e),Object.setPrototypeOf(this,ip.prototype)}}function hQ(t,e){const r=t.includes("SendTransaction"),n=t.find(i=>i&&typeof i=="object"&&i.name==="SendTransaction");if(!r&&!n)throw new ip("Wallet doesn't support SendTransaction feature.");if(n&&n.maxMessages!==void 0){if(n.maxMessages<e.requiredMessagesNumber)throw new ip(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${n.maxMessages}, but ${e.requiredMessagesNumber} is required.`);return}XZ("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}function dQ(){return{type:"request-version"}}function pQ(t){return{type:"response-version",version:t}}function Zu(t){return{ton_connect_sdk_lib:t.ton_connect_sdk_lib,ton_connect_ui_lib:t.ton_connect_ui_lib}}function Qu(t,e){var r,n,i,s,o,a,u,l;const p=((r=e==null?void 0:e.connectItems)===null||r===void 0?void 0:r.tonProof)&&"proof"in e.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:(i=(n=e==null?void 0:e.account)===null||n===void 0?void 0:n.address)!==null&&i!==void 0?i:null,wallet_type:(s=e==null?void 0:e.device.appName)!==null&&s!==void 0?s:null,wallet_version:(o=e==null?void 0:e.device.appVersion)!==null&&o!==void 0?o:null,auth_type:p,custom_data:Object.assign({chain_id:(u=(a=e==null?void 0:e.account)===null||a===void 0?void 0:a.chain)!==null&&u!==void 0?u:null,provider:(l=e==null?void 0:e.provider)!==null&&l!==void 0?l:null},Zu(t))}}function gQ(t){return{type:"connection-started",custom_data:Zu(t)}}function mQ(t,e){return Object.assign({type:"connection-completed",is_success:!0},Qu(t,e))}function vQ(t,e,r){return{type:"connection-error",is_success:!1,error_message:e,error_code:r??null,custom_data:Zu(t)}}function bQ(t){return{type:"connection-restoring-started",custom_data:Zu(t)}}function yQ(t,e){return Object.assign({type:"connection-restoring-completed",is_success:!0},Qu(t,e))}function wQ(t,e){return{type:"connection-restoring-error",is_success:!1,error_message:e,custom_data:Zu(t)}}function Bb(t,e){var r,n,i,s;return{valid_until:(r=String(e.validUntil))!==null&&r!==void 0?r:null,from:(s=(n=e.from)!==null&&n!==void 0?n:(i=t==null?void 0:t.account)===null||i===void 0?void 0:i.address)!==null&&s!==void 0?s:null,messages:e.messages.map(o=>{var a,u;return{address:(a=o.address)!==null&&a!==void 0?a:null,amount:(u=o.amount)!==null&&u!==void 0?u:null}})}}function xQ(t,e,r){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},Qu(t,e)),Bb(e,r))}function _Q(t,e,r,n){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:n.boc},Qu(t,e)),Bb(e,r))}function EQ(t,e,r,n,i){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:n,error_code:i??null},Qu(t,e)),Bb(e,r))}function SQ(t,e,r){return Object.assign({type:"disconnection",scope:r},Qu(t,e))}class AQ{constructor(){this.window=np()}dispatchEvent(e,r){var n;return Pt(this,void 0,void 0,function*(){const i=new CustomEvent(e,{detail:r});(n=this.window)===null||n===void 0||n.dispatchEvent(i)})}addEventListener(e,r,n){var i;return Pt(this,void 0,void 0,function*(){return(i=this.window)===null||i===void 0||i.addEventListener(e,r,n),()=>{var s;return(s=this.window)===null||s===void 0?void 0:s.removeEventListener(e,r)}})}}class PQ{constructor(e){var r;this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=(r=e==null?void 0:e.eventDispatcher)!==null&&r!==void 0?r:new AQ,this.tonConnectSdkVersion=e.tonConnectSdkVersion,this.init().catch()}get version(){return Zu({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return Pt(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch{}})}setRequestVersionHandler(){return Pt(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>Pt(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",pQ(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return Pt(this,void 0,void 0,function*(){return new Promise((e,r)=>Pt(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",n=>{e(n.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",dQ())}catch(n){r(n)}}))})}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch{}}trackConnectionStarted(...e){try{const r=gQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionCompleted(...e){try{const r=mQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionError(...e){try{const r=vQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringStarted(...e){try{const r=bQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringCompleted(...e){try{const r=yQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringError(...e){try{const r=wQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackDisconnection(...e){try{const r=SQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSentForSignature(...e){try{const r=xQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSigned(...e){try{const r=_Q(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSigningFailed(...e){try{const r=EQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}}const MQ="3.0.5";class ph{constructor(e){if(this.walletsList=new kb,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(e==null?void 0:e.manifestUrl)||iQ(),storage:(e==null?void 0:e.storage)||new cQ},this.walletsList=new kb({walletsListSource:e==null?void 0:e.walletsListSource,cacheTTLMs:e==null?void 0:e.walletsListCacheTTLMs}),this.tracker=new PQ({eventDispatcher:e==null?void 0:e.eventDispatcher,tonConnectSdkVersion:MQ}),!this.dappSettings.manifestUrl)throw new Rb("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new hh(this.dappSettings.storage),e!=null&&e.disableAutoPauseConnection||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var e;return((e=this._wallet)===null||e===void 0?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(r=>r(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(e,r){return this.statusChangeSubscriptions.push(e),r&&this.statusChangeErrorSubscriptions.push(r),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(n=>n!==e),r&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(n=>n!==r))}}connect(e,r){var n,i;const s={};if(typeof r=="object"&&"tonProof"in r&&(s.request=r),typeof r=="object"&&("openingDeadlineMS"in r||"signal"in r||"request"in r)&&(s.request=r==null?void 0:r.request,s.openingDeadlineMS=r==null?void 0:r.openingDeadlineMS,s.signal=r==null?void 0:r.signal),this.connected)throw new Db;const o=As(s==null?void 0:s.signal);if((n=this.abortController)===null||n===void 0||n.abort(),this.abortController=o,o.signal.aborted)throw new Ut("Connection was aborted");return(i=this.provider)===null||i===void 0||i.closeConnection(),this.provider=this.createProvider(e),o.signal.addEventListener("abort",()=>{var a;(a=this.provider)===null||a===void 0||a.closeConnection(),this.provider=null}),this.tracker.trackConnectionStarted(),this.provider.connect(this.createConnectRequest(s==null?void 0:s.request),{openingDeadlineMS:s==null?void 0:s.openingDeadlineMS,signal:o.signal})}restoreConnection(e){var r,n;return Pt(this,void 0,void 0,function*(){this.tracker.trackConnectionRestoringStarted();const i=As(e==null?void 0:e.signal);if((r=this.abortController)===null||r===void 0||r.abort(),this.abortController=i,i.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}const[s,o]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(i.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let a=null;try{switch(s){case"http":a=yield dh.fromStorage(this.dappSettings.storage);break;case"injected":a=yield xi.fromStorage(this.dappSettings.storage);break;default:if(o)a=this.createProvider(o);else return}}catch{this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),a==null||a.closeConnection(),a=null;return}if(i.signal.aborted){a==null||a.closeConnection(),this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}if(!a){Fo("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}(n=this.provider)===null||n===void 0||n.closeConnection(),this.provider=a,a.listen(this.walletEventsListener.bind(this));const u=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted"),a==null||a.closeConnection(),a=null};i.signal.addEventListener("abort",u);const l=fh(p=>Pt(this,void 0,void 0,function*(){yield a==null?void 0:a.restoreConnection({openingDeadlineMS:e==null?void 0:e.openingDeadlineMS,signal:p.signal}),i.signal.removeEventListener("abort",u),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:2e3,signal:e==null?void 0:e.signal}),d=new Promise(p=>setTimeout(()=>p(),12e3));return Promise.race([l,d])})}sendTransaction(e,r){return Pt(this,void 0,void 0,function*(){const n={};typeof r=="function"?n.onRequestSent=r:(n.onRequestSent=r==null?void 0:r.onRequestSent,n.signal=r==null?void 0:r.signal);const i=As(n==null?void 0:n.signal);if(i.signal.aborted)throw new Ut("Transaction sending was aborted");this.checkConnection(),hQ(this.wallet.device.features,{requiredMessagesNumber:e.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,e);const{validUntil:s}=e,o=UZ(e,["validUntil"]),a=e.from||this.account.address,u=e.network||this.account.chain,l=yield this.provider.sendRequest(rp.convertToRpcRequest(Object.assign(Object.assign({},o),{valid_until:s,from:a,network:u})),{onRequestSent:n.onRequestSent,signal:i.signal});if(rp.isError(l))return this.tracker.trackTransactionSigningFailed(this.wallet,e,l.error.message,l.error.code),rp.parseAndThrowError(l);const d=rp.convertFromRpcResponse(l);return this.tracker.trackTransactionSigned(this.wallet,e,d),d})}disconnect(e){var r;return Pt(this,void 0,void 0,function*(){if(!this.connected)throw new Z0;const n=As(e==null?void 0:e.signal),i=this.abortController;if(this.abortController=n,n.signal.aborted)throw new Ut("Disconnect was aborted");this.onWalletDisconnected("dapp"),yield(r=this.provider)===null||r===void 0?void 0:r.disconnect({signal:n.signal}),i==null||i.abort()})}pauseConnection(){var e;((e=this.provider)===null||e===void 0?void 0:e.type)==="http"&&this.provider.pause()}unPauseConnection(){var e;return((e=this.provider)===null||e===void 0?void 0:e.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){const e=nQ();if(e)try{e.addEventListener("visibilitychange",()=>{e.hidden?this.pauseConnection():this.unPauseConnection().catch()})}catch(r){Fo("Cannot subscribe to the document.visibilitychange: ",r)}}createProvider(e){let r;return!Array.isArray(e)&&qZ(e)?r=new xi(this.dappSettings.storage,e.jsBridgeKey):r=new dh(this.dappSettings.storage,e),r.listen(this.walletEventsListener.bind(this)),r}walletEventsListener(e){switch(e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.onWalletConnectError(e.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){const r=e.items.find(s=>s.name==="ton_addr"),n=e.items.find(s=>s.name==="ton_proof");if(!r)throw new Ut("ton_addr connection item was not found");const i={device:e.device,provider:this.provider.type,account:{address:r.address,chain:r.network,walletStateInit:r.walletStateInit,publicKey:r.publicKey}};n&&(i.connectItems={tonProof:n}),this.wallet=i,this.tracker.trackConnectionCompleted(i)}onWalletConnectError(e){const r=HZ.parseError(e);if(this.statusChangeErrorSubscriptions.forEach(n=>n(r)),Sn(r),this.tracker.trackConnectionError(e.message,e.code),r instanceof X0||r instanceof J0)throw Fo(r),r}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}checkConnection(){if(!this.connected)throw new Z0}createConnectRequest(e){const r=[{name:"ton_addr"}];return e!=null&&e.tonProof&&r.push({name:"ton_proof",payload:e.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:r}}}ph.walletsList=new kb,ph.isWalletInjected=t=>xi.isWalletInjected(t),ph.isInsideWalletBrowser=t=>xi.isInsideWalletBrowser(t);for(let t=0;t<=255;t++){let e=t.toString(16);e.length<2&&(e="0"+e)}function $b(t){const{children:e,onClick:r}=t;return de.jsx("button",{onClick:r,className:"xc-border xc-px-4 xc-py-2 xc-rounded-full xc-text-sm xc-flex xc-gap-2 xc-items-center",children:e})}function K7(t){const{wallet:e,connector:r,loading:n}=t,i=Se.useRef(null),s=Se.useRef(),[o,a]=Se.useState(),[u,l]=Se.useState(),[d,p]=Se.useState("connect"),[y,A]=Se.useState(!1),[P,O]=Se.useState();function D(z){var ue;(ue=s.current)==null||ue.update({data:z})}async function k(){A(!0);try{a("");const z=await va.getNonce({account_type:"block_chain"});if("universalLink"in e&&e.universalLink){const ue=r.connect({universalLink:e.universalLink,bridgeUrl:e.bridgeUrl},{request:{tonProof:z}});if(!ue)return;O(ue),D(ue),l(z)}}catch(z){a(z.message)}A(!1)}function B(){s.current=new E7({width:264,height:264,margin:0,type:"svg",qrOptions:{errorCorrectionLevel:"M"},dotsOptions:{color:"black",type:"rounded"},backgroundOptions:{color:"transparent"}}),s.current.append(i.current)}function q(){r.connect(e,{request:{tonProof:u}})}function j(){if("deepLink"in e){if(!e.deepLink||!P)return;const z=new URL(P),ue=`${e.deepLink}${z.search}`;window.open(ue)}}function H(){"universalLink"in e&&e.universalLink&&/t.me/.test(e.universalLink)&&window.open(P)}const J=Se.useMemo(()=>!!("deepLink"in e&&e.deepLink),[e]),T=Se.useMemo(()=>!!("universalLink"in e&&e.universalLink&&/t.me/.test(e.universalLink)),[e]);return Se.useEffect(()=>{B(),k()},[]),de.jsxs(Ss,{children:[de.jsx("div",{className:"xc-mb-6",children:de.jsx(Sc,{title:"Connect wallet",onBack:t.onBack})}),de.jsxs("div",{className:"xc-text-center xc-mb-6",children:[de.jsxs("div",{className:"xc-relative xc-mx-auto xc-mb-6 xc-block xc-max-h-[272px] xc-max-w-[272px] xc-rounded-xl xc-bg-white xc-p-1",children:[de.jsx("div",{className:"xc-aspect-[1/1] xc-flex xc-h-full xc-w-full xc-justify-center",ref:i}),de.jsx("div",{className:"xc-absolute xc-left-0 xc-top-0 xc-flex xc-h-full xc-w-full xc-items-center xc-justify-center",children:y?de.jsx(vc,{className:"xc-h-6 xc-w-6 xc-animate-spin xc-text-black",size:20}):de.jsx("img",{className:"xc-h-10 xc-w-10 xc-rounded-md",src:e.imageUrl})})]}),de.jsx("p",{className:"xc-text-center",children:"Scan the QR code below with your phone's camera. "})]}),de.jsxs("div",{className:"xc-flex xc-justify-center xc-gap-2",children:[n&&de.jsx(vc,{className:"xc-animate-spin"}),!y&&!n&&de.jsxs(de.Fragment,{children:[W7(e)&&de.jsxs($b,{onClick:q,children:[de.jsx(BK,{className:"xc-opacity-80"}),"Extension"]}),J&&de.jsxs($b,{onClick:j,children:[de.jsx(f8,{className:"xc-opacity-80"}),"Desktop"]}),T&&de.jsx($b,{onClick:H,children:"Telegram Mini App"})]})]})]})}function IQ(t){const[e,r]=Se.useState(""),[n,i]=Se.useState(),[s,o]=Se.useState(),a=Ib(),[u,l]=Se.useState(!1);async function d(y){var P,O;if(!y||!((P=y.connectItems)!=null&&P.tonProof))return;l(!0);const A=await va.tonLogin({account_type:"block_chain",connector:"codatta_ton",account_enum:"C",wallet_name:y==null?void 0:y.device.appName,inviter_code:a.inviterCode,address:y.account.address,chain:y.account.chain,connect_info:[{name:"ton_addr",network:y.account.chain,...y.account},(O=y.connectItems)==null?void 0:O.tonProof],source:{device:a.device,channel:a.channel,app:a.app}});await t.onLogin(A.data),l(!1)}Se.useEffect(()=>{const y=new ph({manifestUrl:"https://static.codatta.io/static/tonconnect-manifest.json?v=2"}),A=y.onStatusChange(d);return o(y),r("select"),A},[]);function p(y){r("connect"),i(y)}return de.jsxs(Ss,{children:[e==="select"&&de.jsx(T7,{connector:s,onSelect:p,onBack:t.onBack}),e==="connect"&&de.jsx(K7,{connector:s,wallet:n,onBack:t.onBack,loading:u})]})}function V7(t){const{children:e,className:r}=t,n=Se.useRef(null),[i,s]=Se.useState(0);function o(){var a;try{const u=((a=n.current)==null?void 0:a.children)||[];let l=0;for(let d=0;d<u.length;d++)l+=u[d].offsetHeight;s(l)}catch(u){console.error(u)}}return Se.useEffect(()=>{const a=new MutationObserver(o);return a.observe(n.current,{childList:!0,subtree:!0}),()=>a.disconnect()},[]),Se.useEffect(()=>{console.log("maxHeight",i)},[i]),de.jsx("div",{ref:n,className:r,style:{transition:"all 0.2s ease-in-out",overflow:"hidden",height:i},children:e})}function CQ(){return de.jsxs("svg",{width:"121",height:"120",viewBox:"0 0 121 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[de.jsx("rect",{x:"0.5",width:"120",height:"120",rx:"60",fill:"#404049"}),de.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M52.8709 61.106C52.8208 61.4482 52.7948 61.7979 52.7948 62.1535C52.7948 66.2529 56.2445 69.5761 60.5 69.5761C64.7554 69.5761 68.2052 66.2529 68.2052 62.1535C68.2052 61.7979 68.1792 61.4482 68.129 61.106H86.826V77.6174C86.826 78.6422 85.9636 79.473 84.8997 79.473H36.1002C35.0364 79.473 34.174 78.6422 34.174 77.6174V61.106H52.8709Z",fill:"#252532"}),de.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M69.061 60.9416C69.061 65.6697 65.2281 69.5026 60.5 69.5026C55.7719 69.5026 51.939 65.6697 51.939 60.9416C51.939 60.7884 51.943 60.6362 51.951 60.485H33.5L39.7959 41.8696C40.0673 41.0671 40.8202 40.527 41.6674 40.527H79.3326C80.1798 40.527 80.9327 41.0671 81.2041 41.8696L87.5 60.485H69.049C69.057 60.6362 69.061 60.7884 69.061 60.9416Z",fill:"#252532"}),de.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M67.8081 61.5708C67.8081 65.2243 64.5361 68.8446 60.4999 68.8446C56.4637 68.8446 53.1918 65.2243 53.1918 61.5708C53.1918 61.4524 53.1952 60.6762 53.202 60.5594H39.4268L44.8013 47.4919C45.033 46.8717 45.6757 46.4543 46.3989 46.4543H74.601C75.3242 46.4543 75.9669 46.8717 76.1986 47.4919L81.5731 60.5594H67.7979C67.8046 60.6762 67.8081 61.4524 67.8081 61.5708Z",fill:"#404049"}),de.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M34.3232 60.6199V78.063C34.3232 78.6995 34.8392 79.2155 35.4757 79.2155H85.5245C86.1609 79.2155 86.6769 78.6995 86.6769 78.063V60.6199L80.4244 42.1328C80.2661 41.6647 79.8269 41.3496 79.3327 41.3496H41.6674C41.1733 41.3496 40.7341 41.6647 40.5758 42.1328L34.3232 60.6199Z",stroke:"#77777D","stroke-width":"2"}),de.jsx("path",{d:"M34.817 60.2823C37.4094 60.2823 48.1095 60.2823 51.1124 60.2823C52.348 60.2823 52.348 61.1507 52.348 61.5994C52.348 65.9638 55.9675 69.5019 60.4323 69.5019C64.8971 69.5019 68.5165 65.9638 68.5165 61.5994C68.5165 61.1507 68.5165 60.2823 69.7521 60.2823H86.1829",stroke:"#77777D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]})}function G7(t){const{wallets:e}=Kl(),[r,n]=Se.useState(),i=Se.useMemo(()=>r?e.filter(a=>a.key.toLowerCase().includes(r.toLowerCase())):e,[r]);function s(a){t.onSelectWallet(a)}function o(a){n(a.target.value)}return de.jsxs(Ss,{children:[de.jsx("div",{className:"xc-mb-6",children:de.jsx(Sc,{title:"Select wallet",onBack:t.onBack})}),de.jsxs("div",{className:"xc-mb-6 xc-flex xc-gap-3 xc-px-4 xc-py-2 xc-border xc-rounded-xl xc-w-full xc-overflow-hidden xc-items-center xc-border-opacity-15 xc-border-white focus-within:xc-border-opacity-40",children:[de.jsx(l8,{className:"xc-shrink-0 xc-opacity-50"}),de.jsx("input",{type:"text",className:"xc-flex-1 xc-bg-transparent xc-appearance-none xc-outline-none",placeholder:"Search wallet",onInput:o})]}),de.jsx("div",{className:"xc-mb-4 xc-flex xc-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:i.length?i.map(a=>de.jsx(e7,{wallet:a,onClick:s},`feature-${a.key}`)):de.jsx(CQ,{})})]})}function TQ(t){const{onLogin:e,header:r,showEmailSignIn:n=!0,showMoreWallets:i=!0,showTonConnect:s=!0,showFeaturedWallets:o=!0}=t,[a,u]=Se.useState(""),[l,d]=Se.useState(null),[p,y]=Se.useState("");function A(k){d(k),u("evm-wallet")}function P(k){u("email"),y(k)}async function O(k){await e(k)}function D(){u("ton-wallet")}return Se.useEffect(()=>{u("index")},[]),de.jsx(YX,{config:t.config,children:de.jsxs(V7,{className:"xc-rounded-2xl xc-transition-height xc-box-content xc-w-full xc-min-w-[277px] xc-max-w-[420px] xc-p-6 xc-bg-[rgb(28,28,38)] xc-text-white",children:[a==="evm-wallet"&&de.jsx(RZ,{onBack:()=>u("index"),onLogin:O,wallet:l}),a==="ton-wallet"&&de.jsx(IQ,{onBack:()=>u("index"),onLogin:O}),a==="email"&&de.jsx(fZ,{email:p,onBack:()=>u("index"),onLogin:O}),a==="index"&&de.jsx(f7,{header:r,onEmailConfirm:P,onSelectWallet:A,onSelectMoreWallets:()=>{u("all-wallet")},onSelectTonConnect:D,config:{showEmailSignIn:n,showFeaturedWallets:o,showMoreWallets:i,showTonConnect:s}}),a==="all-wallet"&&de.jsx(G7,{onBack:()=>u("index"),onSelectWallet:A})]})})}function RQ(t){const{wallet:e,onConnect:r}=t,[n,i]=Se.useState(e.installed?"connect":"qr");async function s(o,a){await r(o,a)}return de.jsxs(Ss,{children:[de.jsx("div",{className:"xc-mb-6",children:de.jsx(Sc,{title:"Connect wallet",onBack:t.onBack})}),n==="qr"&&de.jsx(M7,{wallet:e,onGetExtension:()=>i("get-extension"),onSignFinish:s}),n==="connect"&&de.jsx(I7,{onShowQrCode:()=>i("qr"),wallet:e,onSignFinish:s}),n==="get-extension"&&de.jsx(C7,{wallet:e})]})}function DQ(t){const{email:e}=t,[r,n]=Se.useState("captcha");return de.jsxs(Ss,{children:[de.jsx("div",{className:"xc-mb-12",children:de.jsx(Sc,{title:"Sign in with email",onBack:t.onBack})}),r==="captcha"&&de.jsx(x7,{email:e,onCodeSend:()=>n("verify-email")}),r==="verify-email"&&de.jsx(w7,{email:e,onInputCode:t.onInputCode,onResendCode:()=>n("captcha")})]})}function OQ(t){const{onEvmWalletConnect:e,onTonWalletConnect:r,onEmailConnect:n,config:i={showEmailSignIn:!1,showFeaturedWallets:!0,showMoreWallets:!0,showTonConnect:!0}}=t,[s,o]=Se.useState(""),[a,u]=Se.useState(),[l,d]=Se.useState(),p=Se.useRef(),[y,A]=Se.useState("");function P(j){u(j),o("evm-wallet-connect")}function O(j){A(j),o("email-connect")}async function D(j,H){await(e==null?void 0:e({chain_type:"eip155",client:j.client,connect_info:H,wallet:j})),o("index")}async function k(j,H){await(n==null?void 0:n(j,H))}function B(j){d(j),o("ton-wallet-connect")}async function q(j){j&&await(r==null?void 0:r({chain_type:"ton",client:p.current,connect_info:j,wallet:j}))}return Se.useEffect(()=>{p.current=new ph({manifestUrl:"https://static.codatta.io/static/tonconnect-manifest.json?v=2"});const j=p.current.onStatusChange(q);return o("index"),j},[]),de.jsxs(V7,{className:"xc-rounded-2xl xc-transition-height xc-box-content xc-w-full xc-min-w-[277px] xc-max-w-[420px] xc-p-6 xc-bg-[rgb(28,28,38)] xc-text-white",children:[s==="evm-wallet-select"&&de.jsx(G7,{onBack:()=>o("index"),onSelectWallet:P}),s==="evm-wallet-connect"&&de.jsx(RQ,{onBack:()=>o("index"),onConnect:D,wallet:a}),s==="ton-wallet-select"&&de.jsx(T7,{connector:p.current,onSelect:B,onBack:()=>o("index")}),s==="ton-wallet-connect"&&de.jsx(K7,{connector:p.current,wallet:l,onBack:()=>o("index")}),s==="email-connect"&&de.jsx(DQ,{email:y,onBack:()=>o("index"),onInputCode:k}),s==="index"&&de.jsx(f7,{onEmailConfirm:O,onSelectWallet:P,onSelectMoreWallets:()=>o("evm-wallet-select"),onSelectTonConnect:()=>o("ton-wallet-select"),config:i})]})}Mn.CodattaConnect=OQ,Mn.CodattaConnectContextProvider=CK,Mn.CodattaSignin=TQ,Mn.WalletItem=ru,Mn.coinbaseWallet=o8,Mn.useCodattaConnectContext=Kl,Object.defineProperty(Mn,Symbol.toStringTag,{value:"Module"})});
