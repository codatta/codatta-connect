(function(Pn,Ee){typeof exports=="object"&&typeof module<"u"?Ee(exports,require("react"),require("https://o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js")):typeof define=="function"&&define.amd?define(["exports","react","https://o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js"],Ee):(Pn=typeof globalThis<"u"?globalThis:Pn||self,Ee(Pn["xny-connect"]={},Pn.React))})(this,function(Pn,Ee){"use strict";var Uoe=Object.defineProperty;var qoe=(Pn,Ee,qc)=>Ee in Pn?Uoe(Pn,Ee,{enumerable:!0,configurable:!0,writable:!0,value:qc}):Pn[Ee]=qc;var Ns=(Pn,Ee,qc)=>qoe(Pn,typeof Ee!="symbol"?Ee+"":Ee,qc);function qc(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Yt=qc(Ee);var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var ug={exports:{}},mf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function PP(){if(tw)return mf;tw=1;var t=Ee,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var d,p={},y=null,_=null;l!==void 0&&(y=""+l),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(_=u.ref);for(d in u)n.call(u,d)&&!s.hasOwnProperty(d)&&(p[d]=u[d]);if(a&&a.defaultProps)for(d in u=a.defaultProps,u)p[d]===void 0&&(p[d]=u[d]);return{$$typeof:e,type:a,key:y,ref:_,props:p,_owner:i.current}}return mf.Fragment=r,mf.jsx=o,mf.jsxs=o,mf}var vf={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function MP(){return rw||(rw=1,process.env.NODE_ENV!=="production"&&function(){var t=Ee,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),M=Symbol.iterator,O="@@iterator";function L(q){if(q===null||typeof q!="object")return null;var ae=M&&q[M]||q[O];return typeof ae=="function"?ae:null}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function k(q){{for(var ae=arguments.length,pe=new Array(ae>1?ae-1:0),_e=1;_e<ae;_e++)pe[_e-1]=arguments[_e];H("error",q,pe)}}function H(q,ae,pe){{var _e=B.ReactDebugCurrentFrame,Re=_e.getStackAddendum();Re!==""&&(ae+="%s",pe=pe.concat([Re]));var De=pe.map(function(it){return String(it)});De.unshift("Warning: "+ae),Function.prototype.apply.call(console[q],console,De)}}var U=!1,z=!1,Z=!1,R=!1,W=!1,ie;ie=Symbol.for("react.module.reference");function me(q){return!!(typeof q=="string"||typeof q=="function"||q===n||q===s||W||q===i||q===l||q===d||R||q===_||U||z||Z||typeof q=="object"&&q!==null&&(q.$$typeof===y||q.$$typeof===p||q.$$typeof===o||q.$$typeof===a||q.$$typeof===u||q.$$typeof===ie||q.getModuleId!==void 0))}function j(q,ae,pe){var _e=q.displayName;if(_e)return _e;var Re=ae.displayName||ae.name||"";return Re!==""?pe+"("+Re+")":pe}function E(q){return q.displayName||"Context"}function m(q){if(q==null)return null;if(typeof q.tag=="number"&&k("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof q=="function")return q.displayName||q.name||null;if(typeof q=="string")return q;switch(q){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case l:return"Suspense";case d:return"SuspenseList"}if(typeof q=="object")switch(q.$$typeof){case a:var ae=q;return E(ae)+".Consumer";case o:var pe=q;return E(pe._context)+".Provider";case u:return j(q,q.render,"ForwardRef");case p:var _e=q.displayName||null;return _e!==null?_e:m(q.type)||"Memo";case y:{var Re=q,De=Re._payload,it=Re._init;try{return m(it(De))}catch{return null}}}return null}var f=Object.assign,g=0,v,x,S,A,b,P,I;function F(){}F.__reactDisabledLog=!0;function ce(){{if(g===0){v=console.log,x=console.info,S=console.warn,A=console.error,b=console.group,P=console.groupCollapsed,I=console.groupEnd;var q={configurable:!0,enumerable:!0,value:F,writable:!0};Object.defineProperties(console,{info:q,log:q,warn:q,error:q,group:q,groupCollapsed:q,groupEnd:q})}g++}}function D(){{if(g--,g===0){var q={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:f({},q,{value:v}),info:f({},q,{value:x}),warn:f({},q,{value:S}),error:f({},q,{value:A}),group:f({},q,{value:b}),groupCollapsed:f({},q,{value:P}),groupEnd:f({},q,{value:I})})}g<0&&k("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var se=B.ReactCurrentDispatcher,ee;function J(q,ae,pe){{if(ee===void 0)try{throw Error()}catch(Re){var _e=Re.stack.trim().match(/\n( *(at )?)/);ee=_e&&_e[1]||""}return`
`+ee+q}}var Q=!1,T;{var X=typeof WeakMap=="function"?WeakMap:Map;T=new X}function re(q,ae){if(!q||Q)return"";{var pe=T.get(q);if(pe!==void 0)return pe}var _e;Q=!0;var Re=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var De;De=se.current,se.current=null,ce();try{if(ae){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Et){_e=Et}Reflect.construct(q,[],it)}else{try{it.call()}catch(Et){_e=Et}q.call(it.prototype)}}else{try{throw Error()}catch(Et){_e=Et}q()}}catch(Et){if(Et&&_e&&typeof Et.stack=="string"){for(var Ue=Et.stack.split(`
`),mt=_e.stack.split(`
`),st=Ue.length-1,tt=mt.length-1;st>=1&&tt>=0&&Ue[st]!==mt[tt];)tt--;for(;st>=1&&tt>=0;st--,tt--)if(Ue[st]!==mt[tt]){if(st!==1||tt!==1)do if(st--,tt--,tt<0||Ue[st]!==mt[tt]){var At=`
`+Ue[st].replace(" at new "," at ");return q.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",q.displayName)),typeof q=="function"&&T.set(q,At),At}while(st>=1&&tt>=0);break}}}finally{Q=!1,se.current=De,D(),Error.prepareStackTrace=Re}var Rt=q?q.displayName||q.name:"",Mt=Rt?J(Rt):"";return typeof q=="function"&&T.set(q,Mt),Mt}function ge(q,ae,pe){return re(q,!1)}function oe(q){var ae=q.prototype;return!!(ae&&ae.isReactComponent)}function fe(q,ae,pe){if(q==null)return"";if(typeof q=="function")return re(q,oe(q));if(typeof q=="string")return J(q);switch(q){case l:return J("Suspense");case d:return J("SuspenseList")}if(typeof q=="object")switch(q.$$typeof){case u:return ge(q.render);case p:return fe(q.type,ae,pe);case y:{var _e=q,Re=_e._payload,De=_e._init;try{return fe(De(Re),ae,pe)}catch{}}}return""}var be=Object.prototype.hasOwnProperty,Me={},Ne=B.ReactDebugCurrentFrame;function Te(q){if(q){var ae=q._owner,pe=fe(q.type,q._source,ae?ae.type:null);Ne.setExtraStackFrame(pe)}else Ne.setExtraStackFrame(null)}function $e(q,ae,pe,_e,Re){{var De=Function.call.bind(be);for(var it in q)if(De(q,it)){var Ue=void 0;try{if(typeof q[it]!="function"){var mt=Error((_e||"React class")+": "+pe+" type `"+it+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof q[it]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw mt.name="Invariant Violation",mt}Ue=q[it](ae,it,_e,pe,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(st){Ue=st}Ue&&!(Ue instanceof Error)&&(Te(Re),k("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",_e||"React class",pe,it,typeof Ue),Te(null)),Ue instanceof Error&&!(Ue.message in Me)&&(Me[Ue.message]=!0,Te(Re),k("Failed %s type: %s",pe,Ue.message),Te(null))}}}var Ie=Array.isArray;function Le(q){return Ie(q)}function Ve(q){{var ae=typeof Symbol=="function"&&Symbol.toStringTag,pe=ae&&q[Symbol.toStringTag]||q.constructor.name||"Object";return pe}}function ke(q){try{return ze(q),!1}catch{return!0}}function ze(q){return""+q}function He(q){if(ke(q))return k("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ve(q)),ze(q)}var Se=B.ReactCurrentOwner,Qe={key:!0,ref:!0,__self:!0,__source:!0},ct,Be,et;et={};function rt(q){if(be.call(q,"ref")){var ae=Object.getOwnPropertyDescriptor(q,"ref").get;if(ae&&ae.isReactWarning)return!1}return q.ref!==void 0}function Je(q){if(be.call(q,"key")){var ae=Object.getOwnPropertyDescriptor(q,"key").get;if(ae&&ae.isReactWarning)return!1}return q.key!==void 0}function gt(q,ae){if(typeof q.ref=="string"&&Se.current&&ae&&Se.current.stateNode!==ae){var pe=m(Se.current.type);et[pe]||(k('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',m(Se.current.type),q.ref),et[pe]=!0)}}function ht(q,ae){{var pe=function(){ct||(ct=!0,k("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ae))};pe.isReactWarning=!0,Object.defineProperty(q,"key",{get:pe,configurable:!0})}}function ft(q,ae){{var pe=function(){Be||(Be=!0,k("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ae))};pe.isReactWarning=!0,Object.defineProperty(q,"ref",{get:pe,configurable:!0})}}var Ht=function(q,ae,pe,_e,Re,De,it){var Ue={$$typeof:e,type:q,key:ae,ref:pe,props:it,_owner:De};return Ue._store={},Object.defineProperty(Ue._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ue,"_self",{configurable:!1,enumerable:!1,writable:!1,value:_e}),Object.defineProperty(Ue,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Re}),Object.freeze&&(Object.freeze(Ue.props),Object.freeze(Ue)),Ue};function Jt(q,ae,pe,_e,Re){{var De,it={},Ue=null,mt=null;pe!==void 0&&(He(pe),Ue=""+pe),Je(ae)&&(He(ae.key),Ue=""+ae.key),rt(ae)&&(mt=ae.ref,gt(ae,Re));for(De in ae)be.call(ae,De)&&!Qe.hasOwnProperty(De)&&(it[De]=ae[De]);if(q&&q.defaultProps){var st=q.defaultProps;for(De in st)it[De]===void 0&&(it[De]=st[De])}if(Ue||mt){var tt=typeof q=="function"?q.displayName||q.name||"Unknown":q;Ue&&ht(it,tt),mt&&ft(it,tt)}return Ht(q,Ue,mt,Re,_e,Se.current,it)}}var St=B.ReactCurrentOwner,er=B.ReactDebugCurrentFrame;function Xt(q){if(q){var ae=q._owner,pe=fe(q.type,q._source,ae?ae.type:null);er.setExtraStackFrame(pe)}else er.setExtraStackFrame(null)}var Ot;Ot=!1;function Bt(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function Tt(){{if(St.current){var q=m(St.current.type);if(q)return`

Check the render method of \``+q+"`."}return""}}function bt(q){return""}var Dt={};function Lt(q){{var ae=Tt();if(!ae){var pe=typeof q=="string"?q:q.displayName||q.name;pe&&(ae=`

Check the top-level render call using <`+pe+">.")}return ae}}function yt(q,ae){{if(!q._store||q._store.validated||q.key!=null)return;q._store.validated=!0;var pe=Lt(ae);if(Dt[pe])return;Dt[pe]=!0;var _e="";q&&q._owner&&q._owner!==St.current&&(_e=" It was passed a child from "+m(q._owner.type)+"."),Xt(q),k('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',pe,_e),Xt(null)}}function $t(q,ae){{if(typeof q!="object")return;if(Le(q))for(var pe=0;pe<q.length;pe++){var _e=q[pe];Bt(_e)&&yt(_e,ae)}else if(Bt(q))q._store&&(q._store.validated=!0);else if(q){var Re=L(q);if(typeof Re=="function"&&Re!==q.entries)for(var De=Re.call(q),it;!(it=De.next()).done;)Bt(it.value)&&yt(it.value,ae)}}}function jt(q){{var ae=q.type;if(ae==null||typeof ae=="string")return;var pe;if(typeof ae=="function")pe=ae.propTypes;else if(typeof ae=="object"&&(ae.$$typeof===u||ae.$$typeof===p))pe=ae.propTypes;else return;if(pe){var _e=m(ae);$e(pe,q.props,"prop",_e,q)}else if(ae.PropTypes!==void 0&&!Ot){Ot=!0;var Re=m(ae);k("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Re||"Unknown")}typeof ae.getDefaultProps=="function"&&!ae.getDefaultProps.isReactClassApproved&&k("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function nt(q){{for(var ae=Object.keys(q.props),pe=0;pe<ae.length;pe++){var _e=ae[pe];if(_e!=="children"&&_e!=="key"){Xt(q),k("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",_e),Xt(null);break}}q.ref!==null&&(Xt(q),k("Invalid attribute `ref` supplied to `React.Fragment`."),Xt(null))}}var Ft={};function $(q,ae,pe,_e,Re,De){{var it=me(q);if(!it){var Ue="";(q===void 0||typeof q=="object"&&q!==null&&Object.keys(q).length===0)&&(Ue+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var mt=bt();mt?Ue+=mt:Ue+=Tt();var st;q===null?st="null":Le(q)?st="array":q!==void 0&&q.$$typeof===e?(st="<"+(m(q.type)||"Unknown")+" />",Ue=" Did you accidentally export a JSX literal instead of a component?"):st=typeof q,k("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",st,Ue)}var tt=Jt(q,ae,pe,Re,De);if(tt==null)return tt;if(it){var At=ae.children;if(At!==void 0)if(_e)if(Le(At)){for(var Rt=0;Rt<At.length;Rt++)$t(At[Rt],q);Object.freeze&&Object.freeze(At)}else k("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else $t(At,q)}if(be.call(ae,"key")){var Mt=m(q),Et=Object.keys(ae).filter(function(ot){return ot!=="key"}),dt=Et.length>0?"{key: someKey, "+Et.join(": ..., ")+": ...}":"{key: someKey}";if(!Ft[Mt+dt]){var _t=Et.length>0?"{"+Et.join(": ..., ")+": ...}":"{}";k(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,dt,Mt,_t,Mt),Ft[Mt+dt]=!0}}return q===n?nt(tt):jt(tt),tt}}function K(q,ae,pe){return $(q,ae,pe,!0)}function G(q,ae,pe){return $(q,ae,pe,!1)}var C=G,Y=K;vf.Fragment=n,vf.jsx=C,vf.jsxs=Y}()),vf}process.env.NODE_ENV==="production"?ug.exports=PP():ug.exports=MP();var le=ug.exports;const Ls="https://static.codatta.io/codatta-connect/wallet-icons.svg?v=2",IP=[{featured:!0,name:"MetaMask",rdns:"io.metamask",image:`${Ls}#metamask`,getWallet:{chrome_store_id:"nkbihfbeogaeaoehlefnkodbefgpgknn",brave_store_id:"nkbihfbeogaeaoehlefnkodbefgpgknn",edge_addon_id:"ejbalbakoplchlghecdalmeeeajnimhm",firefox_addon_id:"ether-metamask",play_store_id:"io.metamask",app_store_id:"id1438144202"},deep_link:"metamask://wc",universal_link:"https://metamask.app.link/wc"},{featured:!0,name:"OKX Wallet",rdns:"com.okex.wallet",image:`${Ls}#okx`,getWallet:{chrome_store_id:"mcohilncbfahbmgdjkbpemcciiolgcge",brave_store_id:"mcohilncbfahbmgdjkbpemcciiolgcge",edge_addon_id:"pbpjkcldjiffchgbbndmhojiacbgflha",play_store_id:"com.okinc.okex.gp",app_store_id:"id1327268470"},deep_link:"okex://main/wc",universal_link:"okex://main/wc"},{featured:!0,name:"WalletConnect",image:`${Ls}#walletconnect`},{featured:!1,name:"Coinbase Wallet",image:`${Ls}#coinbase`},{featured:!1,name:"GateWallet",rdns:"io.gate.wallet",image:`${Ls}#6e528abf-7a7d-47bd-d84d-481f169b1200`,getWallet:{chrome_store_id:"cpmkedoipcpimgecpmgpldfpohjplkpp",brave_store_id:"cpmkedoipcpimgecpmgpldfpohjplkpp",play_store_id:"com.gateio.gateio",app_store_id:"id1294998195",mac_app_store_id:"id1609559473"},deep_link:"https://www.gate.io/mobileapp",universal_link:"https://www.gate.io/mobileapp"},{featured:!1,name:"Onekey",rdns:"so.onekey.app.wallet",image:`${Ls}#onekey`,getWallet:{chrome_store_id:"jnmbobjmhlngoefaiojfljckilhhlhcj",brave_store_id:"jnmbobjmhlngoefaiojfljckilhhlhcj",play_store_id:"so.onekey.app.wallet",app_store_id:"id1609559473"},deep_link:"onekey-wallet://",universal_link:"onekey://wc"},{featured:!1,name:"Infinity Wallet",image:`${Ls}#9f259366-0bcd-4817-0af9-f78773e41900`,desktop_link:"infinity://wc"},{name:"Rabby Wallet",rdns:"io.rabby",featured:!1,image:`${Ls}#rabby`,getWallet:{chrome_store_id:"acmacodkjbdgmoleebolmdjonilkdbch",brave_store_id:"acmacodkjbdgmoleebolmdjonilkdbch",play_store_id:"com.debank.rabbymobile",app_store_id:"id6474381673"}},{name:"Binance Web3 Wallet",featured:!1,image:`${Ls}#ebac7b39-688c-41e3-7912-a4fefba74600`,getWallet:{play_store_id:"com.binance.dev",app_store_id:"id1436799971"}},{name:"Rainbow Wallet",rdns:"me.rainbow",featured:!1,image:`${Ls}#rainbow`,getWallet:{chrome_store_id:"opfgelmcmbiajamepnmloijbpoleiama",edge_addon_id:"cpojfbodiccabbabgimdeohkkpjfpbnf",firefox_addon_id:"rainbow-extension",app_store_id:"id1457119021",play_store_id:"me.rainbow"}}];function CP(t,e){const r=t.exec(e);return r==null?void 0:r.groups}const nw=/^tuple(?<array>(\[(\d*)\])*)$/;function fg(t){let e=t.type;if(nw.test(t.type)&&"components"in t){e="(";const r=t.components.length;for(let i=0;i<r;i++){const s=t.components[i];e+=fg(s),i<r-1&&(e+=", ")}const n=CP(nw,t.type);return e+=`)${(n==null?void 0:n.array)??""}`,fg({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function bf(t){let e="";const r=t.length;for(let n=0;n<r;n++){const i=t[n];e+=fg(i),n!==r-1&&(e+=", ")}return e}function TP(t){var e;return t.type==="function"?`function ${t.name}(${bf(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${bf(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${bf(t.inputs)})`:t.type==="error"?`error ${t.name}(${bf(t.inputs)})`:t.type==="constructor"?`constructor(${bf(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}function Wn(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const i=t[r];return typeof i=="function"?i:s=>e(t,s)}function zc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new qP(t.type);return`${t.name}(${lg(t.inputs,{includeName:e})})`}function lg(t,{includeName:e=!1}={}){return t?t.map(r=>RP(r,{includeName:e})).join(e?", ":","):""}function RP(t,{includeName:e}){return t.type.startsWith("tuple")?`(${lg(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Jo(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function vn(t){return Jo(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const iw="2.31.3";let yf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${iw}`};class pt extends Error{constructor(e,r={}){var a;const n=(()=>{var u;return r.cause instanceof pt?r.cause.details:(u=r.cause)!=null&&u.message?r.cause.message:r.details})(),i=r.cause instanceof pt&&r.cause.docsPath||r.docsPath,s=(a=yf.getDocsUrl)==null?void 0:a.call(yf,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...yf.version?[`Version: ${yf.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=iw}walk(e){return sw(this,e)}}function sw(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?sw(t.cause,e):e?null:t}class DP extends pt{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class ow extends pt{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class OP extends pt{constructor({data:e,params:r,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${lg(r,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=r,this.size=n}}class hg extends pt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class NP extends pt{constructor({expectedLength:e,givenLength:r,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${r}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class LP extends pt{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${vn(r)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class kP extends pt{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${r}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class aw extends pt{constructor(e,{docsPath:r}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class cw extends pt{constructor(e,{docsPath:r}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionNotFoundError"})}}class BP extends pt{constructor(e,r){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${zc(e.abiItem)}\`, and`,`\`${r.type}\` in \`${zc(r.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class $P extends pt{constructor({expectedSize:e,givenSize:r}){super(`Expected bytes${e}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}}class FP extends pt{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiEncodingType"})}}class jP extends pt{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiDecodingType"})}}class UP extends pt{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class qP extends pt{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class uw extends pt{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class fw extends pt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}class lw extends pt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function Hc(t,{dir:e,size:r=32}={}){return typeof t=="string"?Xo(t,{dir:e,size:r}):zP(t,{dir:e,size:r})}function Xo(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new fw({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function zP(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new fw({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class hw extends pt{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class HP extends pt{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class WP extends pt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Lh(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let i=0;i<r.length-1&&r[e==="left"?i:r.length-i-1].toString()==="0";i++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function ks(t,{size:e}){if(vn(t)>e)throw new WP({givenSize:vn(t),maxSize:e})}function Zo(t,e={}){const{signed:r}=e;e.size&&ks(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Qo(t,e={}){return Number(Zo(t,e))}const KP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kh(t,e={}){return typeof t=="number"||typeof t=="bigint"?dr(t,e):typeof t=="string"?Bh(t,e):typeof t=="boolean"?dw(t,e):ui(t,e)}function dw(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(ks(r,{size:e.size}),Hc(r,{size:e.size})):r}function ui(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=KP[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(ks(n,{size:e.size}),Hc(n,{dir:"right",size:e.size})):n}function dr(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const u=typeof t=="bigint"?"n":"";throw new hw({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Hc(a,{size:n}):a}const VP=new TextEncoder;function Bh(t,e={}){const r=VP.encode(t);return ui(r,e)}const GP=new TextEncoder;function dg(t,e={}){return typeof t=="number"||typeof t=="bigint"?JP(t,e):typeof t=="boolean"?YP(t,e):Jo(t)?lo(t,e):gw(t,e)}function YP(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(ks(r,{size:e.size}),Hc(r,{size:e.size})):r}const fo={zero:48,nine:57,A:65,F:70,a:97,f:102};function pw(t){if(t>=fo.zero&&t<=fo.nine)return t-fo.zero;if(t>=fo.A&&t<=fo.F)return t-(fo.A-10);if(t>=fo.a&&t<=fo.f)return t-(fo.a-10)}function lo(t,e={}){let r=t;e.size&&(ks(r,{size:e.size}),r=Hc(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const u=pw(n.charCodeAt(a++)),l=pw(n.charCodeAt(a++));if(u===void 0||l===void 0)throw new pt(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=u*16+l}return s}function JP(t,e){const r=dr(t,e);return lo(r)}function gw(t,e={}){const r=GP.encode(t);return typeof e.size=="number"?(ks(r,{size:e.size}),Hc(r,{dir:"right",size:e.size})):r}const $h=BigInt(2**32-1),mw=BigInt(32);function XP(t,e=!1){return e?{h:Number(t&$h),l:Number(t>>mw&$h)}:{h:Number(t>>mw&$h)|0,l:Number(t&$h)|0}}function ZP(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=XP(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const QP=(t,e,r)=>t<<r|e>>>32-r,eM=(t,e,r)=>e<<r|t>>>32-r,tM=(t,e,r)=>e<<r-32|t>>>64-r,rM=(t,e,r)=>t<<r-32|e>>>64-r,Wc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function wf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ps(t,...e){if(!pg(t))throw new Error("Uint8Array expected");e.length>0}function nM(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");wf(t.outputLen),wf(t.blockLen)}function Kc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vw(t,e){ps(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function iM(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Vc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function gg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Bs(t,e){return t<<32-e|t>>>e}const sM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function oM(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function aM(t){for(let e=0;e<t.length;e++)t[e]=oM(t[e]);return t}const bw=sM?t=>t:aM,yw=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",cM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gc(t){if(ps(t),yw)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=cM[t[r]];return e}const ho={_0:48,_9:57,A:65,F:70,a:97,f:102};function ww(t){if(t>=ho._0&&t<=ho._9)return t-ho._0;if(t>=ho.A&&t<=ho.F)return t-(ho.A-10);if(t>=ho.a&&t<=ho.f)return t-(ho.a-10)}function mg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(yw)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=ww(t.charCodeAt(s)),a=ww(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}function uM(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function xf(t){return typeof t=="string"&&(t=uM(t)),ps(t),t}function Ua(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];ps(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class vg{}function xw(t){const e=n=>t().update(xf(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function fM(t){const e=(n,i)=>t(i).update(xf(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function lM(t=32){if(Wc&&typeof Wc.getRandomValues=="function")return Wc.getRandomValues(new Uint8Array(t));if(Wc&&typeof Wc.randomBytes=="function")return Uint8Array.from(Wc.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const hM=BigInt(0),_f=BigInt(1),dM=BigInt(2),pM=BigInt(7),gM=BigInt(256),mM=BigInt(113),_w=[],Ew=[],Sw=[];for(let t=0,e=_f,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],_w.push(2*(5*n+r)),Ew.push((t+1)*(t+2)/2%64);let i=hM;for(let s=0;s<7;s++)e=(e<<_f^(e>>pM)*mM)%gM,e&dM&&(i^=_f<<(_f<<BigInt(s))-_f);Sw.push(i)}const Aw=ZP(Sw,!0),vM=Aw[0],bM=Aw[1],Pw=(t,e,r)=>r>32?tM(t,e,r):QP(t,e,r),Mw=(t,e,r)=>r>32?rM(t,e,r):eM(t,e,r);function Iw(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,l=r[u],d=r[u+1],p=Pw(l,d,1)^r[a],y=Mw(l,d,1)^r[a+1];for(let _=0;_<50;_+=10)t[o+_]^=p,t[o+_+1]^=y}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=Ew[o],u=Pw(i,s,a),l=Mw(i,s,a),d=_w[o];i=t[d],s=t[d+1],t[d]=u,t[d+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=vM[n],t[1]^=bM[n]}Vc(r)}class Ef extends vg{constructor(e,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,wf(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=iM(this.state)}clone(){return this._cloneInto()}keccak(){bw(this.state32),Iw(this.state32,this.rounds),bw(this.state32),this.posOut=0,this.pos=0}update(e){Kc(this),e=xf(e),ps(e);const{blockLen:r,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Kc(this,!1),ps(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return wf(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(vw(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Vc(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Ef(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const ea=(t,e,r)=>xw(()=>new Ef(e,t,r)),yM=ea(6,144,224/8),wM=ea(6,136,256/8),xM=ea(6,104,384/8),_M=ea(6,72,512/8),EM=ea(1,144,224/8),Cw=ea(1,136,256/8),SM=ea(1,104,384/8),AM=ea(1,72,512/8),Tw=(t,e,r)=>fM((n={})=>new Ef(e,t,n.dkLen===void 0?r:n.dkLen,!0)),PM=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Ef,keccakP:Iw,keccak_224:EM,keccak_256:Cw,keccak_384:SM,keccak_512:AM,sha3_224:yM,sha3_256:wM,sha3_384:xM,sha3_512:_M,shake128:Tw(31,168,128/8),shake256:Tw(31,136,256/8)},Symbol.toStringTag,{value:"Module"}));function Fh(t,e){const r=e||"hex",n=Cw(Jo(t,{strict:!1})?dg(t):t);return r==="bytes"?n:kh(n)}const MM=t=>Fh(dg(t));function IM(t){return MM(t)}function CM(t){let e=!0,r="",n=0,i="",s=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&n++,a===")"&&n--,!!e){if(n===0){if(a===" "&&["event","function",""].includes(i))i="";else if(i+=a,a===")"){s=!0;break}continue}if(a===" "){t[o-1]!==","&&r!==","&&r!==",("&&(r="",e=!1);continue}i+=a,r+=a}}if(!s)throw new pt("Unable to normalize signature.");return i}const TM=t=>{const e=typeof t=="string"?t:TP(t);return CM(e)};function Rw(t){return IM(TM(t))}const RM=Rw;class ta extends pt{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class jh extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const bg=new jh(8192);function Sf(t,e){if(bg.has(`${t}.${e}`))return bg.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=Fh(gw(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return bg.set(`${t}.${e}`,s),s}function yg(t,e){if(!gs(t,{strict:!1}))throw new ta({address:t});return Sf(t,e)}const DM=/^0x[a-fA-F0-9]{40}$/,wg=new jh(8192);function gs(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(wg.has(n))return wg.get(n);const i=DM.test(t)?t.toLowerCase()===t?!0:r?Sf(t)===t:!0:!1;return wg.set(n,i),i}function ra(t){return typeof t[0]=="string"?Uh(t):OM(t)}function OM(t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Uh(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function qh(t,e,r,{strict:n}={}){return Jo(t,{strict:!1})?xg(t,e,r,{strict:n}):Nw(t,e,r,{strict:n})}function Dw(t,e){if(typeof e=="number"&&e>0&&e>vn(t)-1)throw new uw({offset:e,position:"start",size:vn(t)})}function Ow(t,e,r){if(typeof e=="number"&&typeof r=="number"&&vn(t)!==r-e)throw new uw({offset:r,position:"end",size:vn(t)})}function Nw(t,e,r,{strict:n}={}){Dw(t,e);const i=t.slice(e,r);return n&&Ow(i,e,r),i}function xg(t,e,r,{strict:n}={}){Dw(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&Ow(i,e,r),i}const NM=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Lw=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function kw(t,e){if(t.length!==e.length)throw new kP({expectedLength:t.length,givenLength:e.length});const r=LM({params:t,values:e}),n=Eg(r);return n.length===0?"0x":n}function LM({params:t,values:e}){const r=[];for(let n=0;n<t.length;n++)r.push(_g({param:t[n],value:e[n]}));return r}function _g({param:t,value:e}){const r=Sg(t.type);if(r){const[n,i]=r;return BM(e,{length:n,param:{...t,type:i}})}if(t.type==="tuple")return qM(e,{param:t});if(t.type==="address")return kM(e);if(t.type==="bool")return FM(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const n=t.type.startsWith("int"),[,,i="256"]=Lw.exec(t.type)??[];return jM(e,{signed:n,size:Number(i)})}if(t.type.startsWith("bytes"))return $M(e,{param:t});if(t.type==="string")return UM(e);throw new FP(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Eg(t){let e=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?e+=32:e+=vn(a)}const r=[],n=[];let i=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?(r.push(dr(e+i,{size:32})),n.push(a),i+=vn(a)):r.push(a)}return ra([...r,...n])}function kM(t){if(!gs(t))throw new ta({address:t});return{dynamic:!1,encoded:Xo(t.toLowerCase())}}function BM(t,{length:e,param:r}){const n=e===null;if(!Array.isArray(t))throw new UP(t);if(!n&&t.length!==e)throw new NP({expectedLength:e,givenLength:t.length,type:`${r.type}[${e}]`});let i=!1;const s=[];for(let o=0;o<t.length;o++){const a=_g({param:r,value:t[o]});a.dynamic&&(i=!0),s.push(a)}if(n||i){const o=Eg(s);if(n){const a=dr(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?ra([a,o]):a}}if(i)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:ra(s.map(({encoded:o})=>o))}}function $M(t,{param:e}){const[,r]=e.type.split("bytes"),n=vn(t);if(!r){let i=t;return n%32!==0&&(i=Xo(i,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:ra([Xo(dr(n,{size:32})),i])}}if(n!==Number.parseInt(r))throw new LP({expectedSize:Number.parseInt(r),value:t});return{dynamic:!1,encoded:Xo(t,{dir:"right"})}}function FM(t){if(typeof t!="boolean")throw new pt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Xo(dw(t))}}function jM(t,{signed:e,size:r=256}){if(typeof r=="number"){const n=2n**(BigInt(r)-(e?1n:0n))-1n,i=e?-n-1n:0n;if(t>n||t<i)throw new hw({max:n.toString(),min:i.toString(),signed:e,size:r/8,value:t.toString()})}return{dynamic:!1,encoded:dr(t,{size:32,signed:e})}}function UM(t){const e=Bh(t),r=Math.ceil(vn(e)/32),n=[];for(let i=0;i<r;i++)n.push(Xo(qh(e,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ra([Xo(dr(vn(e),{size:32})),...n])}}function qM(t,{param:e}){let r=!1;const n=[];for(let i=0;i<e.components.length;i++){const s=e.components[i],o=Array.isArray(t)?i:s.name,a=_g({param:s,value:t[o]});n.push(a),a.dynamic&&(r=!0)}return{dynamic:r,encoded:r?Eg(n):ra(n.map(({encoded:i})=>i))}}function Sg(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Ag=t=>qh(Rw(t),0,4);function Bw(t){const{abi:e,args:r=[],name:n}=t,i=Jo(n,{strict:!1}),s=e.filter(a=>i?a.type==="function"?Ag(a)===n:a.type==="event"?RM(a)===n:!1:"name"in a&&a.name===n);if(s.length===0)return;if(s.length===1)return s[0];let o;for(const a of s){if(!("inputs"in a))continue;if(!r||r.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==r.length)continue;if(r.every((l,d)=>{const p="inputs"in a&&a.inputs[d];return p?Pg(l,p):!1})){if(o&&"inputs"in o&&o.inputs){const l=$w(a.inputs,o.inputs,r);if(l)throw new BP({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||s[0]}function Pg(t,e){const r=typeof t,n=e.type;switch(n){case"address":return gs(t,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>Pg(Object.values(t)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(t)&&t.every(i=>Pg(i,{...e,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function $w(t,e,r){for(const n in t){const i=t[n],s=e[n];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return $w(i.components,s.components,r[n]);const o=[i.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?gs(r[n],{strict:!1}):o.includes("address")&&o.includes("bytes")?gs(r[n],{strict:!1}):!1)return o}}function fi(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const Fw="/docs/contract/encodeFunctionData";function zM(t){const{abi:e,args:r,functionName:n}=t;let i=e[0];if(n){const s=Bw({abi:e,args:r,name:n});if(!s)throw new cw(n,{docsPath:Fw});i=s}if(i.type!=="function")throw new cw(void 0,{docsPath:Fw});return{abi:[i],functionName:Ag(zc(i))}}function jw(t){const{args:e}=t,{abi:r,functionName:n}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:zM(t)})(),i=r[0],s=n,o="inputs"in i&&i.inputs?kw(i.inputs,e??[]):void 0;return Uh([s,o??"0x"])}const HM={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},WM={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},KM={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Uw extends pt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class VM extends pt{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class GM extends pt{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const YM={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new GM({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new VM({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Uw({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Uw({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function Mg(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(YM);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}function JM(t,e={}){typeof e.size<"u"&&ks(t,{size:e.size});const r=ui(t,e);return Zo(r,e)}function XM(t,e={}){let r=t;if(typeof e.size<"u"&&(ks(r,{size:e.size}),r=Lh(r)),r.length>1||r[0]>1)throw new HP(r);return!!r[0]}function po(t,e={}){typeof e.size<"u"&&ks(t,{size:e.size});const r=ui(t,e);return Qo(r,e)}function ZM(t,e={}){let r=t;return typeof e.size<"u"&&(ks(r,{size:e.size}),r=Lh(r,{dir:"right"})),new TextDecoder().decode(r)}function QM(t,e){const r=typeof e=="string"?lo(e):e,n=Mg(r);if(vn(r)===0&&t.length>0)throw new hg;if(vn(e)&&vn(e)<32)throw new OP({data:typeof e=="string"?e:ui(e),params:t,size:vn(e)});let i=0;const s=[];for(let o=0;o<t.length;++o){const a=t[o];n.setPosition(i);const[u,l]=Yc(n,a,{staticPosition:0});i+=l,s.push(u)}return s}function Yc(t,e,{staticPosition:r}){const n=Sg(e.type);if(n){const[i,s]=n;return tI(t,{...e,type:s},{length:i,staticPosition:r})}if(e.type==="tuple")return sI(t,e,{staticPosition:r});if(e.type==="address")return eI(t);if(e.type==="bool")return rI(t);if(e.type.startsWith("bytes"))return nI(t,e,{staticPosition:r});if(e.type.startsWith("uint")||e.type.startsWith("int"))return iI(t,e);if(e.type==="string")return oI(t,{staticPosition:r});throw new jP(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const qw=32,Ig=32;function eI(t){const e=t.readBytes(32);return[Sf(ui(Nw(e,-20))),32]}function tI(t,e,{length:r,staticPosition:n}){if(!r){const o=po(t.readBytes(Ig)),a=n+o,u=a+qw;t.setPosition(a);const l=po(t.readBytes(qw)),d=Af(e);let p=0;const y=[];for(let _=0;_<l;++_){t.setPosition(u+(d?_*32:p));const[M,O]=Yc(t,e,{staticPosition:u});p+=O,y.push(M)}return t.setPosition(n+32),[y,32]}if(Af(e)){const o=po(t.readBytes(Ig)),a=n+o,u=[];for(let l=0;l<r;++l){t.setPosition(a+l*32);const[d]=Yc(t,e,{staticPosition:a});u.push(d)}return t.setPosition(n+32),[u,32]}let i=0;const s=[];for(let o=0;o<r;++o){const[a,u]=Yc(t,e,{staticPosition:n+i});i+=u,s.push(a)}return[s,i]}function rI(t){return[XM(t.readBytes(32),{size:32}),32]}function nI(t,e,{staticPosition:r}){const[n,i]=e.type.split("bytes");if(!i){const o=po(t.readBytes(32));t.setPosition(r+o);const a=po(t.readBytes(32));if(a===0)return t.setPosition(r+32),["0x",32];const u=t.readBytes(a);return t.setPosition(r+32),[ui(u),32]}return[ui(t.readBytes(Number.parseInt(i),32)),32]}function iI(t,e){const r=e.type.startsWith("int"),n=Number.parseInt(e.type.split("int")[1]||"256"),i=t.readBytes(32);return[n>48?JM(i,{signed:r}):po(i,{signed:r}),32]}function sI(t,e,{staticPosition:r}){const n=e.components.length===0||e.components.some(({name:o})=>!o),i=n?[]:{};let s=0;if(Af(e)){const o=po(t.readBytes(Ig)),a=r+o;for(let u=0;u<e.components.length;++u){const l=e.components[u];t.setPosition(a+s);const[d,p]=Yc(t,l,{staticPosition:a});s+=p,i[n?u:l==null?void 0:l.name]=d}return t.setPosition(r+32),[i,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[u,l]=Yc(t,a,{staticPosition:r});i[n?o:a==null?void 0:a.name]=u,s+=l}return[i,s]}function oI(t,{staticPosition:e}){const r=po(t.readBytes(32)),n=e+r;t.setPosition(n);const i=po(t.readBytes(32));if(i===0)return t.setPosition(e+32),["",32];const s=t.readBytes(i,32),o=ZM(Lh(s));return t.setPosition(e+32),[o,32]}function Af(t){var n;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(n=t.components)==null?void 0:n.some(Af);const r=Sg(t.type);return!!(r&&Af({...t,type:r[1]}))}function aI(t){const{abi:e,data:r}=t,n=qh(r,0,4);if(n==="0x")throw new hg;const s=[...e||[],WM,KM].find(o=>o.type==="error"&&n===Ag(zc(o)));if(!s)throw new aw(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?QM(s.inputs,qh(r,4)):void 0,errorName:s.name}}const qa=(t,e,r)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,r);function zw({abiItem:t,args:e,includeFunctionName:r=!0,includeName:n=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${r?t.name:""}(${t.inputs.map((i,s)=>`${n&&i.name?`${i.name}: `:""}${typeof e[s]=="object"?qa(e[s]):e[s]}`).join(", ")})`}const cI={gwei:9,wei:18},uI={ether:-9,wei:9};function Hw(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}function Ww(t,e="wei"){return Hw(t,cI[e])}function ms(t,e="wei"){return Hw(t,uI[e])}class fI extends pt{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class lI extends pt{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function zh(t){const e=Object.entries(t).map(([n,i])=>i===void 0||i===!1?null:[n,i]).filter(Boolean),r=e.reduce((n,[i])=>Math.max(n,i.length),0);return e.map(([n,i])=>`  ${`${n}:`.padEnd(r+1)}  ${i}`).join(`
`)}class hI extends pt{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class dI extends pt{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",zh(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class pI extends pt{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:u,maxPriorityFeePerGas:l,nonce:d,to:p,value:y}){var M;const _=zh({chain:i&&`${i==null?void 0:i.name} (id: ${i==null?void 0:i.id})`,from:r==null?void 0:r.address,to:p,value:typeof y<"u"&&`${Ww(y)} ${((M=i==null?void 0:i.nativeCurrency)==null?void 0:M.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${ms(a)} gwei`,maxFeePerGas:typeof u<"u"&&`${ms(u)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ms(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",_].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}const gI=t=>t,Kw=t=>t;class mI extends pt{constructor(e,{abi:r,args:n,contractAddress:i,docsPath:s,functionName:o,sender:a}){const u=Bw({abi:r,args:n,name:o}),l=u?zw({abiItem:u,args:n,includeFunctionName:!1,includeName:!1}):void 0,d=u?zc(u,{includeName:!0}):void 0,p=zh({address:i&&gI(i),function:d,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],p&&"Contract Call:",p].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=r,this.args=n,this.cause=e,this.contractAddress=i,this.functionName=o,this.sender=a}}class vI extends pt{constructor({abi:e,data:r,functionName:n,message:i}){let s,o,a,u;if(r&&r!=="0x")try{o=aI({abi:e,data:r});const{abiItem:d,errorName:p,args:y}=o;if(p==="Error")u=y[0];else if(p==="Panic"){const[_]=y;u=HM[_]}else{const _=d?zc(d,{includeName:!0}):void 0,M=d&&y?zw({abiItem:d,args:y,includeFunctionName:!1,includeName:!1}):void 0;a=[_?`Error: ${_}`:"",M&&M!=="()"?`       ${[...Array((p==null?void 0:p.length)??0).keys()].map(()=>" ").join("")}${M}`:""]}}catch(d){s=d}else i&&(u=i);let l;s instanceof aw&&(l=s.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(u&&u!=="execution reverted"||l?[`The contract function "${n}" reverted with the following ${l?"signature":"reason"}:`,u||l].join(`
`):`The contract function "${n}" reverted.`,{cause:s,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=r,this.reason=u,this.signature=l}}class bI extends pt{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class yI extends pt{constructor({data:e,message:r}){super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Vw extends pt{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${Kw(o)}`,e&&`Request body: ${qa(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class Gw extends pt{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${Kw(n)}`,`Request body: ${qa(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}const wI=-1;class li extends pt{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof Gw?e.code:r??wI}}class Pi extends li{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class Pf extends li{constructor(e){super(e,{code:Pf.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Pf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Mf extends li{constructor(e){super(e,{code:Mf.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Mf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class If extends li{constructor(e,{method:r}={}){super(e,{code:If.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(If,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Cf extends li{constructor(e){super(e,{code:Cf.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Cf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class za extends li{constructor(e){super(e,{code:za.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(za,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Tf extends li{constructor(e){super(e,{code:Tf.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Tf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Rf extends li{constructor(e){super(e,{code:Rf.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Rf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Df extends li{constructor(e){super(e,{code:Df.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Df,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Of extends li{constructor(e){super(e,{code:Of.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Of,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ha extends li{constructor(e,{method:r}={}){super(e,{code:Ha.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(Ha,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Jc extends li{constructor(e){super(e,{code:Jc.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Nf extends li{constructor(e){super(e,{code:Nf.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Nf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Xc extends Pi{constructor(e){super(e,{code:Xc.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Xc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Lf extends Pi{constructor(e){super(e,{code:Lf.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Lf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class kf extends Pi{constructor(e,{method:r}={}){super(e,{code:kf.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(kf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Bf extends Pi{constructor(e){super(e,{code:Bf.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Bf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class $f extends Pi{constructor(e){super(e,{code:$f.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty($f,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ff extends Pi{constructor(e){super(e,{code:Ff.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ff,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Zc extends Pi{constructor(e){super(e,{code:Zc.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class jf extends Pi{constructor(e){super(e,{code:jf.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(jf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Uf extends Pi{constructor(e){super(e,{code:Uf.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Uf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class qf extends Pi{constructor(e){super(e,{code:qf.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(qf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class zf extends Pi{constructor(e){super(e,{code:zf.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(zf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Hf extends Pi{constructor(e){super(e,{code:Hf.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Hf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Qc extends Pi{constructor(e){super(e,{code:Qc.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Qc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class xI extends li{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const _I=3;function EI(t,{abi:e,address:r,args:n,docsPath:i,functionName:s,sender:o}){const a=t instanceof yI?t:t instanceof pt?t.walk(M=>"data"in M)||t.walk():{},{code:u,data:l,details:d,message:p,shortMessage:y}=a,_=t instanceof hg?new bI({functionName:s}):[_I,za.code].includes(u)&&(l||d||p||y)?new vI({abi:e,data:typeof l=="object"?l.data:l,functionName:s,message:a instanceof Gw?d:y??p}):t;return new mI(_,{abi:e,args:n,contractAddress:r,docsPath:i,functionName:s,sender:o})}function SI(t){const e=Fh(`0x${t.substring(4)}`).substring(26);return Sf(`0x${e}`)}async function AI({hash:t,signature:e}){const r=Jo(t)?t:kh(t),{secp256k1:n}=await Promise.resolve().then(()=>pT);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:d,v:p,yParity:y}=e,_=Number(y??p),M=Yw(_);return new n.Signature(Zo(l),Zo(d)).addRecoveryBit(M)}const o=Jo(e)?e:kh(e);if(vn(o)!==65)throw new Error("invalid signature length");const a=Qo(`0x${o.slice(130)}`),u=Yw(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function Yw(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function PI({hash:t,signature:e}){return SI(await AI({hash:t,signature:e}))}function MI(t,e="hex"){const r=Jw(t),n=Mg(new Uint8Array(r.length));return r.encode(n),e==="hex"?ui(n.bytes):n.bytes}function Jw(t){return Array.isArray(t)?II(t.map(e=>Jw(e))):CI(t)}function II(t){const e=t.reduce((i,s)=>i+s.length,0),r=Xw(e);return{length:e<=55?1+e:1+r+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+r),r===1?i.pushUint8(e):r===2?i.pushUint16(e):r===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of t)s(i)}}}function CI(t){const e=typeof t=="string"?lo(t):t,r=Xw(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+r),r===1?i.pushUint8(e.length):r===2?i.pushUint16(e.length):r===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function Xw(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new pt("Length is too large.")}function TI(t){const{chainId:e,nonce:r,to:n}=t,i=t.contractAddress??t.address,s=Fh(Uh(["0x05",MI([e?dr(e):"0x",i,r?dr(r):"0x"])]));return n==="bytes"?lo(s):s}async function Zw(t){const{authorization:e,signature:r}=t;return PI({hash:TI(e),signature:r??e})}class RI extends pt{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:u,maxPriorityFeePerGas:l,nonce:d,to:p,value:y}){var M;const _=zh({from:r==null?void 0:r.address,to:p,value:typeof y<"u"&&`${Ww(y)} ${((M=i==null?void 0:i.nativeCurrency)==null?void 0:M.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${ms(a)} gwei`,maxFeePerGas:typeof u<"u"&&`${ms(u)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ms(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",_].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class eu extends pt{constructor({cause:e,message:r}={}){var i;const n=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(eu,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(eu,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Hh extends pt{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${ms(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Hh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Cg extends pt{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${ms(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Cg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Tg extends pt{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Tg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Rg extends pt{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Rg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Dg extends pt{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Dg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Og extends pt{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Og,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Ng extends pt{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Ng,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Lg extends pt{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Lg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class kg extends pt{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(kg,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Wh extends pt{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${ms(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${ms(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Wh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Bg extends pt{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Qw(t,e){const r=(t.details||"").toLowerCase(),n=t instanceof pt?t.walk(i=>(i==null?void 0:i.code)===eu.code):t;return n instanceof pt?new eu({cause:t,message:n.details}):eu.nodeMessage.test(r)?new eu({cause:t,message:t.details}):Hh.nodeMessage.test(r)?new Hh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Cg.nodeMessage.test(r)?new Cg({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Tg.nodeMessage.test(r)?new Tg({cause:t,nonce:e==null?void 0:e.nonce}):Rg.nodeMessage.test(r)?new Rg({cause:t,nonce:e==null?void 0:e.nonce}):Dg.nodeMessage.test(r)?new Dg({cause:t,nonce:e==null?void 0:e.nonce}):Og.nodeMessage.test(r)?new Og({cause:t}):Ng.nodeMessage.test(r)?new Ng({cause:t,gas:e==null?void 0:e.gas}):Lg.nodeMessage.test(r)?new Lg({cause:t,gas:e==null?void 0:e.gas}):kg.nodeMessage.test(r)?new kg({cause:t}):Wh.nodeMessage.test(r)?new Wh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Bg({cause:t})}function DI(t,{docsPath:e,...r}){const n=(()=>{const i=Qw(t,r);return i instanceof Bg?t:i})();return new RI(n,{docsPath:e,...r})}function e2(t,{format:e}){if(!e)return{};const r={};function n(s){const o=Object.keys(s);for(const a of o)a in t&&(r[a]=t[a]),s[a]&&typeof s[a]=="object"&&!Array.isArray(s[a])&&n(s[a])}const i=e(t||{});return n(i),r}const OI={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function $g(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=NI(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>ui(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=dr(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=dr(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=dr(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=dr(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=dr(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=dr(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=OI[t.type]),typeof t.value<"u"&&(e.value=dr(t.value)),e}function NI(t){return t.map(e=>({address:e.address,r:e.r?dr(BigInt(e.r)):e.r,s:e.s?dr(BigInt(e.s)):e.s,chainId:dr(e.chainId),nonce:dr(e.nonce),...typeof e.yParity<"u"?{yParity:dr(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:dr(e.v)}:{}}))}function t2(t){if(!(!t||t.length===0))return t.reduce((e,{slot:r,value:n})=>{if(r.length!==66)throw new lw({size:r.length,targetSize:66,type:"hex"});if(n.length!==66)throw new lw({size:n.length,targetSize:66,type:"hex"});return e[r]=n,e},{})}function LI(t){const{balance:e,nonce:r,state:n,stateDiff:i,code:s}=t,o={};if(s!==void 0&&(o.code=s),e!==void 0&&(o.balance=dr(e)),r!==void 0&&(o.nonce=dr(r)),n!==void 0&&(o.state=t2(n)),i!==void 0){if(o.state)throw new lI;o.stateDiff=t2(i)}return o}function kI(t){if(!t)return;const e={};for(const{address:r,...n}of t){if(!gs(r,{strict:!1}))throw new ta({address:r});if(e[r])throw new fI({address:r});e[r]=LI(n)}return e}const BI=2n**256n-1n;function Kh(t){const{account:e,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:i,to:s}=t,o=e?fi(e):void 0;if(o&&!gs(o.address))throw new ta({address:o.address});if(s&&!gs(s))throw new ta({address:s});if(typeof r<"u"&&(typeof n<"u"||typeof i<"u"))throw new hI;if(n&&n>BI)throw new Hh({maxFeePerGas:n});if(i&&n&&i>n)throw new Wh({maxFeePerGas:n,maxPriorityFeePerGas:i})}class $I extends pt{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Fg extends pt{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class FI extends pt{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ms(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class jI extends pt{constructor({blockHash:e,blockNumber:r}){let n="Block";e&&(n=`Block at hash "${e}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}const UI={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function qI(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Qo(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Qo(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?UI[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=zI(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function zI(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function HI(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:qI(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Vh(t,{blockHash:e,blockNumber:r,blockTag:n,includeTransactions:i}={}){var d,p,y;const s=n??"latest",o=i??!1,a=r!==void 0?dr(r):void 0;let u=null;if(e?u=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):u=await t.request({method:"eth_getBlockByNumber",params:[a||s,o]},{dedupe:!!a}),!u)throw new jI({blockHash:e,blockNumber:r});return(((y=(p=(d=t.chain)==null?void 0:d.formatters)==null?void 0:p.block)==null?void 0:y.format)||HI)(u)}async function r2(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function WI(t,e){var s,o;const{block:r,chain:n=t.chain,request:i}=e||{};try{const a=((s=n==null?void 0:n.fees)==null?void 0:s.maxPriorityFeePerGas)??((o=n==null?void 0:n.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=r||await Wn(t,Vh,"getBlock")({}),d=await a({block:l,client:t,request:i});if(d===null)throw new Error;return d}if(typeof a<"u")return a;const u=await t.request({method:"eth_maxPriorityFeePerGas"});return Zo(u)}catch{const[a,u]=await Promise.all([r?Promise.resolve(r):Wn(t,Vh,"getBlock")({}),Wn(t,r2,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Fg;const l=u-a.baseFeePerGas;return l<0n?0n:l}}async function n2(t,e){var y,_;const{block:r,chain:n=t.chain,request:i,type:s="eip1559"}=e||{},o=await(async()=>{var M,O;return typeof((M=n==null?void 0:n.fees)==null?void 0:M.baseFeeMultiplier)=="function"?n.fees.baseFeeMultiplier({block:r,client:t,request:i}):((O=n==null?void 0:n.fees)==null?void 0:O.baseFeeMultiplier)??1.2})();if(o<1)throw new $I;const u=10**(((y=o.toString().split(".")[1])==null?void 0:y.length)??0),l=M=>M*BigInt(Math.ceil(o*u))/BigInt(u),d=r||await Wn(t,Vh,"getBlock")({});if(typeof((_=n==null?void 0:n.fees)==null?void 0:_.estimateFeesPerGas)=="function"){const M=await n.fees.estimateFeesPerGas({block:r,client:t,multiply:l,request:i,type:s});if(M!==null)return M}if(s==="eip1559"){if(typeof d.baseFeePerGas!="bigint")throw new Fg;const M=typeof(i==null?void 0:i.maxPriorityFeePerGas)=="bigint"?i.maxPriorityFeePerGas:await WI(t,{block:d,chain:n,request:i}),O=l(d.baseFeePerGas);return{maxFeePerGas:(i==null?void 0:i.maxFeePerGas)??O+M,maxPriorityFeePerGas:M}}return{gasPrice:(i==null?void 0:i.gasPrice)??l(await Wn(t,r2,"getGasPrice")({}))}}async function i2(t,{address:e,blockTag:r="latest",blockNumber:n}){const i=await t.request({method:"eth_getTransactionCount",params:[e,typeof n=="bigint"?dr(n):r]},{dedupe:!!n});return Qo(i)}function s2(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(s=>lo(s)):t.blobs,i=[];for(const s of n)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return r==="bytes"?i:i.map(s=>ui(s))}function o2(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>lo(o)):t.blobs,i=typeof t.commitments[0]=="string"?t.commitments.map(o=>lo(o)):t.commitments,s=[];for(let o=0;o<n.length;o++){const a=n[o],u=i[o];s.push(Uint8Array.from(e.computeBlobKzgProof(a,u)))}return r==="bytes"?s:s.map(o=>ui(o))}function KI(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,l=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+l,a,n)}function VI(t,e,r){return t&e^~t&r}function GI(t,e,r){return t&e^t&r^e&r}class YI extends vg{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=gg(this.buffer)}update(e){Kc(this),e=xf(e),ps(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=gg(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Kc(this),vw(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,Vc(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let p=o;p<i;p++)r[p]=0;KI(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=gg(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<l;p++)a.setUint32(4*p,d[p],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const na=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),JI=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ia=new Uint32Array(64);let XI=class extends YI{constructor(e=32){super(64,e,8,!1),this.A=na[0]|0,this.B=na[1]|0,this.C=na[2]|0,this.D=na[3]|0,this.E=na[4]|0,this.F=na[5]|0,this.G=na[6]|0,this.H=na[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[e,r,n,i,s,o,a,u]}set(e,r,n,i,s,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let p=0;p<16;p++,r+=4)ia[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const y=ia[p-15],_=ia[p-2],M=Bs(y,7)^Bs(y,18)^y>>>3,O=Bs(_,17)^Bs(_,19)^_>>>10;ia[p]=O+ia[p-7]+M+ia[p-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:l,H:d}=this;for(let p=0;p<64;p++){const y=Bs(a,6)^Bs(a,11)^Bs(a,25),_=d+y+VI(a,u,l)+JI[p]+ia[p]|0,O=(Bs(n,2)^Bs(n,13)^Bs(n,22))+GI(n,i,s)|0;d=l,l=u,u=a,a=o+_|0,o=s,s=i,i=n,n=_+O|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,i,s,o,a,u,l,d)}roundClean(){Vc(ia)}destroy(){this.set(0,0,0,0,0,0,0,0),Vc(this.buffer)}};const a2=xw(()=>new XI),c2=a2;function ZI(t,e){return c2(Jo(t,{strict:!1})?dg(t):t)}function QI(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),i=ZI(e);return i.set([r],0),n==="bytes"?i:ui(i)}function eC(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),i=[];for(const s of e)i.push(QI({commitment:s,to:n,version:r}));return i}const u2=6,f2=32,jg=4096,l2=f2*jg,h2=l2*u2-1-1*jg*u2;class tC extends pt{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class rC extends pt{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function nC(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?lo(t.data):t.data,n=vn(r);if(!n)throw new rC;if(n>h2)throw new tC({maxSize:h2,size:n});const i=[];let s=!0,o=0;for(;s;){const a=Mg(new Uint8Array(l2));let u=0;for(;u<jg;){const l=r.slice(o,o+(f2-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),s=!1;break}u++,o+=31}i.push(a)}return e==="bytes"?i.map(a=>a.bytes):i.map(a=>ui(a.bytes))}function iC(t){const{data:e,kzg:r,to:n}=t,i=t.blobs??nC({data:e,to:n}),s=t.commitments??s2({blobs:i,kzg:r,to:n}),o=t.proofs??o2({blobs:i,commitments:s,kzg:r,to:n}),a=[];for(let u=0;u<i.length;u++)a.push({blob:i[u],commitment:s[u],proof:o[u]});return a}function sC(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new dI({transaction:t})}async function Wf(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Qo(e)}const d2=["blobVersionedHashes","chainId","fees","gas","nonce","type"],p2=new Map;async function Ug(t,e){const{account:r=t.account,blobs:n,chain:i,gas:s,kzg:o,nonce:a,nonceManager:u,parameters:l=d2,type:d}=e,p=r&&fi(r),y={...e,...p?{from:p==null?void 0:p.address}:{}};let _;async function M(){return _||(_=await Wn(t,Vh,"getBlock")({blockTag:"latest"}),_)}let O;async function L(){return O||(i?i.id:typeof e.chainId<"u"?e.chainId:(O=await Wn(t,Wf,"getChainId")({}),O))}if(l.includes("nonce")&&typeof a>"u"&&p)if(u){const B=await L();y.nonce=await u.consume({address:p.address,chainId:B,client:t})}else y.nonce=await Wn(t,i2,"getTransactionCount")({address:p.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&n&&o){const B=s2({blobs:n,kzg:o});if(l.includes("blobVersionedHashes")){const k=eC({commitments:B,to:"hex"});y.blobVersionedHashes=k}if(l.includes("sidecars")){const k=o2({blobs:n,commitments:B,kzg:o}),H=iC({blobs:n,commitments:B,proofs:k,to:"hex"});y.sidecars=H}}if(l.includes("chainId")&&(y.chainId=await L()),(l.includes("fees")||l.includes("type"))&&typeof d>"u")try{y.type=sC(y)}catch{let B=p2.get(t.uid);if(typeof B>"u"){const k=await M();B=typeof(k==null?void 0:k.baseFeePerGas)=="bigint",p2.set(t.uid,B)}y.type=B?"eip1559":"legacy"}if(l.includes("fees"))if(y.type!=="legacy"&&y.type!=="eip2930"){if(typeof y.maxFeePerGas>"u"||typeof y.maxPriorityFeePerGas>"u"){const B=await M(),{maxFeePerGas:k,maxPriorityFeePerGas:H}=await n2(t,{block:B,chain:i,request:y});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<H)throw new FI({maxPriorityFeePerGas:H});y.maxPriorityFeePerGas=H,y.maxFeePerGas=k}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Fg;if(typeof e.gasPrice>"u"){const B=await M(),{gasPrice:k}=await n2(t,{block:B,chain:i,request:y,type:"legacy"});y.gasPrice=k}}return l.includes("gas")&&typeof s>"u"&&(y.gas=await Wn(t,aC,"estimateGas")({...y,account:p&&{address:p.address,type:"json-rpc"}})),Kh(y),delete y.parameters,y}async function oC(t,{address:e,blockNumber:r,blockTag:n="latest"}){const i=typeof r=="bigint"?dr(r):void 0,s=await t.request({method:"eth_getBalance",params:[e,i||n]});return BigInt(s)}async function aC(t,e){var i,s,o;const{account:r=t.account}=e,n=r?fi(r):void 0;try{let f=function(v){const{block:x,request:S,rpcStateOverride:A}=v;return t.request({method:"eth_estimateGas",params:A?[S,x??"latest",A]:x?[S,x]:[S]})};const{accessList:a,authorizationList:u,blobs:l,blobVersionedHashes:d,blockNumber:p,blockTag:y,data:_,gas:M,gasPrice:O,maxFeePerBlobGas:L,maxFeePerGas:B,maxPriorityFeePerGas:k,nonce:H,value:U,stateOverride:z,...Z}=await Ug(t,{...e,parameters:(n==null?void 0:n.type)==="local"?void 0:["blobVersionedHashes"]}),W=(typeof p=="bigint"?dr(p):void 0)||y,ie=kI(z),me=await(async()=>{if(Z.to)return Z.to;if(u&&u.length>0)return await Zw({authorization:u[0]}).catch(()=>{throw new pt("`to` is required. Could not infer from `authorizationList`")})})();Kh(e);const j=(o=(s=(i=t.chain)==null?void 0:i.formatters)==null?void 0:s.transactionRequest)==null?void 0:o.format,m=(j||$g)({...e2(Z,{format:j}),from:n==null?void 0:n.address,accessList:a,authorizationList:u,blobs:l,blobVersionedHashes:d,data:_,gas:M,gasPrice:O,maxFeePerBlobGas:L,maxFeePerGas:B,maxPriorityFeePerGas:k,nonce:H,to:me,value:U});let g=BigInt(await f({block:W,request:m,rpcStateOverride:ie}));if(u){const v=await oC(t,{address:m.from}),x=await Promise.all(u.map(async S=>{const{address:A}=S,b=await f({block:W,request:{authorizationList:void 0,data:_,from:n==null?void 0:n.address,to:A,value:dr(v)},rpcStateOverride:ie}).catch(()=>100000n);return 2n*BigInt(b)}));g+=x.reduce((S,A)=>S+A,0n)}return g}catch(a){throw DI(a,{...e,account:n,chain:t.chain})}}function cC(t,e){if(!gs(t,{strict:!1}))throw new ta({address:t});if(!gs(e,{strict:!1}))throw new ta({address:e});return t.toLowerCase()===e.toLowerCase()}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qg=BigInt(0),zg=BigInt(1);function Gh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Yh(t){const e=t.toString(16);return e.length&1?"0"+e:e}function g2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?qg:BigInt("0x"+t)}function Jh(t){return g2(Gc(t))}function m2(t){return ps(t),g2(Gc(Uint8Array.from(t).reverse()))}function Hg(t,e){return mg(t.toString(16).padStart(e*2,"0"))}function v2(t,e){return Hg(t,e).reverse()}function Ui(t,e,r){let n;if(typeof e=="string")try{n=mg(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(pg(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Wg=t=>typeof t=="bigint"&&qg<=t;function uC(t,e,r){return Wg(t)&&Wg(e)&&Wg(r)&&e<=t&&t<r}function fC(t,e,r,n){if(!uC(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function lC(t){let e;for(e=0;t>qg;t>>=zg,e+=1);return e}const Xh=t=>(zg<<BigInt(t))-zg;function hC(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=_=>new Uint8Array(_),i=_=>Uint8Array.of(_);let s=n(t),o=n(t),a=0;const u=()=>{s.fill(1),o.fill(0),a=0},l=(..._)=>r(o,s,..._),d=(_=n(0))=>{o=l(i(0),_),s=l(),_.length!==0&&(o=l(i(1),_),s=l())},p=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let _=0;const M=[];for(;_<e;){s=l();const O=s.slice();M.push(O),_+=s.length}return Ua(...M)};return(_,M)=>{u(),d(_);let O;for(;!(O=M(p()));)d();return u(),O}}function Kg(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const a=t[i];if(o&&a===void 0)return;const u=typeof a;if(u!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function b2(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}class dC extends pt{constructor({chain:e,currentChainId:r}){super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class pC extends pt{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}const Vg="/docs/contract/encodeDeployData";function gC(t){const{abi:e,args:r,bytecode:n}=t;if(!r||r.length===0)return n;const i=e.find(o=>"type"in o&&o.type==="constructor");if(!i)throw new DP({docsPath:Vg});if(!("inputs"in i))throw new ow({docsPath:Vg});if(!i.inputs||i.inputs.length===0)throw new ow({docsPath:Vg});const s=kw(i.inputs,r);return Uh([n,s])}function mC(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const Gg=new Map,y2=new Map;let vC=0;function bC(t,e,r){const n=++vC,i=()=>Gg.get(t)||[],s=()=>{const d=i();Gg.set(t,d.filter(p=>p.id!==n))},o=()=>{const d=i();if(!d.some(y=>y.id===n))return;const p=y2.get(t);if(d.length===1&&p){const y=p();y instanceof Promise&&y.catch(()=>{})}s()},a=i();if(Gg.set(t,[...a,{id:n,fns:e}]),a&&a.length>0)return o;const u={};for(const d in e)u[d]=(...p)=>{var _,M;const y=i();if(y.length!==0)for(const O of y)(M=(_=O.fns)[d])==null||M.call(_,...p)};const l=r(u);return typeof l=="function"&&y2.set(t,l),o}async function Yg(t){return new Promise(e=>setTimeout(e,t))}function yC(t,{emitOnBegin:e,initialWaitTime:r,interval:n}){let i=!0;const s=()=>i=!1;return(async()=>{let a;a=await t({unpoll:s});const u=await(r==null?void 0:r(a))??n;await Yg(u);const l=async()=>{i&&(await t({unpoll:s}),await Yg(n),l())};l()})(),s}class Wa extends pt{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Zh extends pt{constructor({docsPath:e,metaMessages:r,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:r,name:"AccountTypeNotSupportedError"})}}function w2({chain:t,currentChainId:e}){if(!t)throw new pC;if(e!==t.id)throw new dC({chain:t,currentChainId:e})}function x2(t,{docsPath:e,...r}){const n=(()=>{const i=Qw(t,r);return i instanceof Bg?t:i})();return new pI(n,{docsPath:e,...r})}async function _2(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Jg=new jh(128);async function Qh(t,e){var k,H,U,z;const{account:r=t.account,chain:n=t.chain,accessList:i,authorizationList:s,blobs:o,data:a,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:_,type:M,value:O,...L}=e;if(typeof r>"u")throw new Wa({docsPath:"/docs/actions/wallet/sendTransaction"});const B=r?fi(r):null;try{Kh(e);const Z=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await Zw({authorization:s[0]}).catch(()=>{throw new pt("`to` is required. Could not infer from `authorizationList`.")})})();if((B==null?void 0:B.type)==="json-rpc"||B===null){let R;n!==null&&(R=await Wn(t,Wf,"getChainId")({}),w2({currentChainId:R,chain:n}));const W=(U=(H=(k=t.chain)==null?void 0:k.formatters)==null?void 0:H.transactionRequest)==null?void 0:U.format,me=(W||$g)({...e2(L,{format:W}),accessList:i,authorizationList:s,blobs:o,chainId:R,data:a,from:B==null?void 0:B.address,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:_,to:Z,type:M,value:O}),j=Jg.get(t.uid),E=j?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:E,params:[me]},{retryCount:0})}catch(m){if(j===!1)throw m;const f=m;if(f.name==="InvalidInputRpcError"||f.name==="InvalidParamsRpcError"||f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[me]},{retryCount:0}).then(g=>(Jg.set(t.uid,!0),g)).catch(g=>{const v=g;throw v.name==="MethodNotFoundRpcError"||v.name==="MethodNotSupportedRpcError"?(Jg.set(t.uid,!1),f):v});throw f}}if((B==null?void 0:B.type)==="local"){const R=await Wn(t,Ug,"prepareTransactionRequest")({account:B,accessList:i,authorizationList:s,blobs:o,chain:n,data:a,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:_,nonceManager:B.nonceManager,parameters:[...d2,"sidecars"],type:M,value:O,...L,to:Z}),W=(z=n==null?void 0:n.serializers)==null?void 0:z.transaction,ie=await B.signTransaction(R,{serializer:W});return await Wn(t,_2,"sendRawTransaction")({serializedTransaction:ie})}throw(B==null?void 0:B.type)==="smart"?new Zh({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Zh({docsPath:"/docs/actions/wallet/sendTransaction",type:B==null?void 0:B.type})}catch(Z){throw Z instanceof Zh?Z:x2(Z,{...e,account:B,chain:e.chain||void 0})}}async function wC(t,e){const{abi:r,account:n=t.account,address:i,args:s,dataSuffix:o,functionName:a,...u}=e;if(typeof n>"u")throw new Wa({docsPath:"/docs/contract/writeContract"});const l=n?fi(n):null,d=jw({abi:r,args:s,functionName:a});try{return await Wn(t,Qh,"sendTransaction")({data:`${d}${o?o.replace("0x",""):""}`,to:i,account:l,...u})}catch(p){throw EI(p,{abi:r,address:i,args:s,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}const xC={"0x0":"reverted","0x1":"success"},E2="0x5792579257925792579257925792579257925792579257925792579257925792",S2=dr(0,{size:32});async function _C(t,e){const{account:r=t.account,capabilities:n,chain:i=t.chain,experimental_fallback:s,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:u,version:l="2.0.0"}=e,d=r?fi(r):null,p=e.calls.map(y=>{const _=y,M=_.abi?jw({abi:_.abi,functionName:_.functionName,args:_.args}):_.data;return{data:_.dataSuffix&&M?ra([M,_.dataSuffix]):M,to:_.to,value:_.value?dr(_.value):void 0}});try{const y=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:p,capabilities:n,chainId:dr(i.id),from:d==null?void 0:d.address,id:u,version:l}]},{retryCount:0});return typeof y=="string"?{id:y}:y}catch(y){const _=y;if(s&&(_.name==="MethodNotFoundRpcError"||_.name==="MethodNotSupportedRpcError"||_.name==="UnknownRpcError"||_.details.toLowerCase().includes("does not exist / is not available")||_.details.toLowerCase().includes("missing or invalid. request()")||_.details.toLowerCase().includes("did not match any variant of untagged enum")||_.details.toLowerCase().includes("account upgraded to unsupported contract")||_.details.toLowerCase().includes("eip-7702 not supported")||_.details.toLowerCase().includes("unsupported wc_ method"))){if(n&&Object.values(n).some(k=>!k.optional)){const k="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Zc(new pt(k,{details:k}))}if(a&&p.length>1){const B="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Qc(new pt(B,{details:B}))}const M=[];for(const B of p){const k=Qh(t,{account:d,chain:i,data:B.data,to:B.to,value:B.value?Zo(B.value):void 0});M.push(k),o>0&&await new Promise(H=>setTimeout(H,o))}const O=await Promise.allSettled(M);if(O.every(B=>B.status==="rejected"))throw O[0].reason;const L=O.map(B=>B.status==="fulfilled"?B.value:S2);return{id:ra([...L,dr(i.id,{size:32}),E2])}}throw x2(y,{...e,account:d,chain:e.chain})}}async function A2(t,e){async function r(d){if(d.endsWith(E2.slice(2))){const y=Lh(xg(d,-64,-32)),_=xg(d,0,-64).slice(2).match(/.{1,64}/g),M=await Promise.all(_.map(L=>S2.slice(2)!==L?t.request({method:"eth_getTransactionReceipt",params:[`0x${L}`]},{dedupe:!0}):void 0)),O=M.some(L=>L===null)?100:M.every(L=>(L==null?void 0:L.status)==="0x1")?200:M.every(L=>(L==null?void 0:L.status)==="0x0")?500:600;return{atomic:!1,chainId:Qo(y),receipts:M.filter(Boolean),status:O,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[d]})}const{atomic:n=!1,chainId:i,receipts:s,version:o="2.0.0",...a}=await r(e.id),[u,l]=(()=>{const d=a.status;return d>=100&&d<200?["pending",d]:d>=200&&d<300?["success",d]:d>=300&&d<700?["failure",d]:d==="CONFIRMED"?["success",200]:d==="PENDING"?["pending",100]:[void 0,d]})();return{...a,atomic:n,chainId:i?Qo(i):void 0,receipts:(s==null?void 0:s.map(d=>({...d,blockNumber:Zo(d.blockNumber),gasUsed:Zo(d.gasUsed),status:xC[d.status]})))??[],statusCode:l,status:u,version:o}}async function EC(t,e){const{id:r,pollingInterval:n=t.pollingInterval,status:i=({statusCode:y})=>y>=200,timeout:s=6e4}=e,o=qa(["waitForCallsStatus",t.uid,r]),{promise:a,resolve:u,reject:l}=mC();let d;const p=bC(o,{resolve:u,reject:l},y=>{const _=yC(async()=>{const M=O=>{clearTimeout(d),_(),O(),p()};try{const O=await A2(t,{id:r});if(!i(O))return;M(()=>y.resolve(O))}catch(O){M(()=>y.reject(O))}},{interval:n,emitOnBegin:!0});return _});return d=s?setTimeout(()=>{p(),clearTimeout(d),l(new SC({id:r}))},s):void 0,await a}class SC extends pt{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const Xg=256;let ed=Xg,td;function P2(t=11){if(!td||ed+t>Xg*2){td="",ed=0;for(let e=0;e<Xg;e++)td+=(256+Math.random()*256|0).toString(16).substring(1)}return td.substring(ed,ed+++t)}function AC(t){const{batch:e,chain:r,ccipRead:n,key:i="base",name:s="Base Client",type:o="base"}=t,a=(r==null?void 0:r.blockTime)??12e3,u=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??u,d=t.cacheTime??l,p=t.account?fi(t.account):void 0,{config:y,request:_,value:M}=t.transport({chain:r,pollingInterval:l}),O={...y,...M},L={account:p,batch:e,cacheTime:d,ccipRead:n,chain:r,key:i,name:s,pollingInterval:l,request:_,transport:O,type:o,uid:P2()};function B(k){return H=>{const U=H(k);for(const Z in L)delete U[Z];const z={...k,...U};return Object.assign(z,{extend:B(z)})}}return Object.assign(L,{extend:B(L)})}const rd=new jh(8192);function PC(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(rd.get(r))return rd.get(r);const n=t().finally(()=>rd.delete(r));return rd.set(r,n),n}function MC(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const u=async({error:l})=>{const d=typeof e=="function"?e({count:a,error:l}):e;d&&await Yg(d),o({count:a+1})};try{const l=await t();i(l)}catch(l){if(a<r&&await n({count:a,error:l}))return u({error:l});s(l)}};o()})}function IC(t,e={}){return async(r,n={})=>{var p;const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:u}={...e,...n},{method:l}=r;if((p=s==null?void 0:s.exclude)!=null&&p.includes(l))throw new Ha(new Error("method not supported"),{method:l});if(s!=null&&s.include&&!s.include.includes(l))throw new Ha(new Error("method not supported"),{method:l});const d=i?Bh(`${u}.${qa(r)}`):void 0;return PC(()=>MC(async()=>{try{return await t(r)}catch(y){const _=y;switch(_.code){case Pf.code:throw new Pf(_);case Mf.code:throw new Mf(_);case If.code:throw new If(_,{method:r.method});case Cf.code:throw new Cf(_);case za.code:throw new za(_);case Tf.code:throw new Tf(_);case Rf.code:throw new Rf(_);case Df.code:throw new Df(_);case Of.code:throw new Of(_);case Ha.code:throw new Ha(_,{method:r.method});case Jc.code:throw new Jc(_);case Nf.code:throw new Nf(_);case Xc.code:throw new Xc(_);case Lf.code:throw new Lf(_);case kf.code:throw new kf(_);case Bf.code:throw new Bf(_);case $f.code:throw new $f(_);case Ff.code:throw new Ff(_);case Zc.code:throw new Zc(_);case jf.code:throw new jf(_);case Uf.code:throw new Uf(_);case qf.code:throw new qf(_);case zf.code:throw new zf(_);case Hf.code:throw new Hf(_);case Qc.code:throw new Qc(_);case 5e3:throw new Xc(_);default:throw y instanceof pt?y:new xI(_)}}},{delay:({count:y,error:_})=>{var M;if(_&&_ instanceof Vw){const O=(M=_==null?void 0:_.headers)==null?void 0:M.get("Retry-After");if(O!=null&&O.match(/\d/))return Number.parseInt(O)*1e3}return~~(1<<y)*o},retryCount:a,shouldRetry:({error:y})=>CC(y)}),{enabled:i,id:d})}}function CC(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Jc.code||t.code===za.code:t instanceof Vw&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function TC({key:t,methods:e,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},u){const l=P2();return{config:{key:t,methods:e,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:a},request:IC(n,{methods:e,retryCount:i,retryDelay:s,uid:l}),value:u}}function nd(t,e={}){const{key:r="custom",methods:n,name:i="Custom Provider",retryDelay:s}=e;return({retryCount:o})=>TC({key:r,methods:n,name:i,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:s,type:"custom"})}class RC extends pt{constructor({domain:e}){super(`Invalid domain "${qa(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class DC extends pt{constructor({primaryType:e,types:r}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class OC extends pt{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function NC(t){const{domain:e,message:r,primaryType:n,types:i}=t,s=(u,l)=>{const d={...l};for(const p of u){const{name:y,type:_}=p;_==="address"&&(d[y]=d[y].toLowerCase())}return d},o=i.EIP712Domain?e?s(i.EIP712Domain,e):{}:{},a=(()=>{if(n!=="EIP712Domain")return s(i[n],r)})();return qa({domain:o,message:a,primaryType:n,types:i})}function LC(t){const{domain:e,message:r,primaryType:n,types:i}=t,s=(o,a)=>{for(const u of o){const{name:l,type:d}=u,p=a[l],y=d.match(Lw);if(y&&(typeof p=="number"||typeof p=="bigint")){const[O,L,B]=y;dr(p,{signed:L==="int",size:Number.parseInt(B)/8})}if(d==="address"&&typeof p=="string"&&!gs(p))throw new ta({address:p});const _=d.match(NM);if(_){const[O,L]=_;if(L&&vn(p)!==Number.parseInt(L))throw new $P({expectedSize:Number.parseInt(L),givenSize:vn(p)})}const M=i[d];M&&(BC(d),s(M,p))}};if(i.EIP712Domain&&e){if(typeof e!="object")throw new RC({domain:e});s(i.EIP712Domain,e)}if(n!=="EIP712Domain")if(i[n])s(i[n],r);else throw new DC({primaryType:n,types:i})}function kC({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function BC(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new OC({type:t})}let M2=class extends vg{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,nM(e);const n=xf(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Vc(s)}update(e){return Kc(this),this.iHash.update(e),this}digestInto(e){Kc(this),ps(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const I2=(t,e,r)=>new M2(t,e).update(r).digest();I2.create=(t,e)=>new M2(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hi=BigInt(0),ei=BigInt(1),Ka=BigInt(2),$C=BigInt(3),C2=BigInt(4),T2=BigInt(5),R2=BigInt(8);function qi(t,e){const r=t%e;return r>=hi?r:e+r}function zi(t,e,r){let n=t;for(;e-- >hi;)n*=n,n%=r;return n}function D2(t,e){if(t===hi)throw new Error("invert: expected non-zero number");if(e<=hi)throw new Error("invert: expected positive modulus, got "+e);let r=qi(t,e),n=e,i=hi,s=ei;for(;r!==hi;){const a=n/r,u=n%r,l=i-s*a;n=r,r=u,i=s,s=l}if(n!==ei)throw new Error("invert: does not exist");return qi(i,e)}function O2(t,e){const r=(t.ORDER+ei)/C2,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function FC(t,e){const r=(t.ORDER-T2)/R2,n=t.mul(e,Ka),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,Ka),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function jC(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-ei,r=0;for(;e%Ka===hi;)e/=Ka,r++;let n=Ka;const i=id(t);for(;L2(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return O2;let s=i.pow(n,e);const o=(e+ei)/Ka;return function(u,l){if(u.is0(l))return l;if(L2(u,l)!==1)throw new Error("Cannot find square root");let d=r,p=u.mul(u.ONE,s),y=u.pow(l,e),_=u.pow(l,o);for(;!u.eql(y,u.ONE);){if(u.is0(y))return u.ZERO;let M=1,O=u.sqr(y);for(;!u.eql(O,u.ONE);)if(M++,O=u.sqr(O),M===d)throw new Error("Cannot find square root");const L=ei<<BigInt(d-M-1),B=u.pow(p,L);d=M,p=u.sqr(B),y=u.mul(y,p),_=u.mul(_,B)}return _}}function UC(t){return t%C2===$C?O2:t%R2===T2?FC:jC(t)}const qC=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zC(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=qC.reduce((n,i)=>(n[i]="function",n),e);return Kg(t,r),t}function HC(t,e,r){if(r<hi)throw new Error("invalid exponent, negatives unsupported");if(r===hi)return t.ONE;if(r===ei)return e;let n=t.ONE,i=e;for(;r>hi;)r&ei&&(n=t.mul(n,i)),i=t.sqr(i),r>>=ei;return n}function N2(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,u)=>t.is0(a)?o:(n[u]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,u)=>t.is0(a)?o:(n[u]=t.mul(o,n[u]),t.mul(o,a)),s),n}function L2(t,e){const r=(t.ORDER-ei)/Ka,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function WC(t,e){e!==void 0&&wf(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function id(t,e,r=!1,n={}){if(t<=hi)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(i=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(r=d.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:o,nByteLength:a}=WC(t,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:a,MASK:Xh(o),ZERO:hi,ONE:ei,create:d=>qi(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return hi<=d&&d<t},is0:d=>d===hi,isValidNot0:d=>!l.is0(d)&&l.isValid(d),isOdd:d=>(d&ei)===ei,neg:d=>qi(-d,t),eql:(d,p)=>d===p,sqr:d=>qi(d*d,t),add:(d,p)=>qi(d+p,t),sub:(d,p)=>qi(d-p,t),mul:(d,p)=>qi(d*p,t),pow:(d,p)=>HC(l,d,p),div:(d,p)=>qi(d*D2(p,t),t),sqrN:d=>d*d,addN:(d,p)=>d+p,subN:(d,p)=>d-p,mulN:(d,p)=>d*p,inv:d=>D2(d,t),sqrt:s||(d=>(u||(u=UC(t)),u(l,d))),toBytes:d=>r?v2(d,a):Hg(d,a),fromBytes:d=>{if(d.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);return r?m2(d):Jh(d)},invertBatch:d=>N2(l,d),cmov:(d,p,y)=>y?p:d});return Object.freeze(l)}function k2(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function B2(t){const e=k2(t);return e+Math.ceil(e/2)}function KC(t,e,r=!1){const n=t.length,i=k2(e),s=B2(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?m2(t):Jh(t),a=qi(o,e-ei)+ei;return r?v2(a,i):Hg(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tu=BigInt(0),Va=BigInt(1);function Kf(t,e){const r=e.negate();return t?r:e}function VC(t,e,r){const n=o=>o.pz,i=N2(t.Fp,r.map(n));return r.map((o,a)=>o.toAffine(i[a])).map(t.fromAffine)}function $2(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Zg(t,e){$2(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=Xh(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function F2(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),u=t>>o;a>n&&(a-=s,u+=Va);const l=e*n,d=l+Math.abs(a)-1,p=a===0,y=a<0,_=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:y,isNegF:_,offsetF:l}}function GC(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function YC(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Qg=new WeakMap,j2=new WeakMap;function em(t){return j2.get(t)||1}function U2(t){if(t!==tu)throw new Error("invalid wNAF")}function JC(t,e){return{constTimeNegate:Kf,hasPrecomputes(r){return em(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>tu;)n&Va&&(i=i.add(s)),s=s.double(),n>>=Va;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Zg(n,e),o=[];let a=r,u=a;for(let l=0;l<i;l++){u=a,o.push(u);for(let d=1;d<s;d++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(r,n,i){let s=t.ZERO,o=t.BASE;const a=Zg(r,e);for(let u=0;u<a.windows;u++){const{nextN:l,offset:d,isZero:p,isNeg:y,isNegF:_,offsetF:M}=F2(i,u,a);i=l,p?o=o.add(Kf(_,n[M])):s=s.add(Kf(y,n[d]))}return U2(i),{p:s,f:o}},wNAFUnsafe(r,n,i,s=t.ZERO){const o=Zg(r,e);for(let a=0;a<o.windows&&i!==tu;a++){const{nextN:u,offset:l,isZero:d,isNeg:p}=F2(i,a,o);if(i=u,!d){const y=n[l];s=s.add(p?y.negate():y)}}return U2(i),s},getPrecomputes(r,n,i){let s=Qg.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&(typeof i=="function"&&(s=i(s)),Qg.set(n,s))),s},wNAFCached(r,n,i){const s=em(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=em(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){$2(n,e),j2.set(r,n),Qg.delete(r)}}}function XC(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>tu||n>tu;)r&Va&&(s=s.add(i)),n&Va&&(o=o.add(i)),i=i.double(),r>>=Va,n>>=Va;return{p1:s,p2:o}}function ZC(t,e,r,n){GC(r,t),YC(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=lC(BigInt(i));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const l=Xh(u),d=new Array(Number(l)+1).fill(o),p=Math.floor((e.BITS-1)/u)*u;let y=o;for(let _=p;_>=0;_-=u){d.fill(o);for(let O=0;O<s;O++){const L=n[O],B=Number(L>>BigInt(_)&l);d[B]=d[B].add(r[O])}let M=o;for(let O=d.length-1,L=o;O>0;O--)L=L.add(d[O]),M=M.add(L);if(y=y.add(M),_!==0)for(let O=0;O<u;O++)y=y.double()}return y}function q2(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return zC(e),e}else return id(t)}function QC(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const u=e[a];if(!(typeof u=="bigint"&&u>tu))throw new Error(`CURVE.${a} must be positive bigint`)}const n=q2(e.p,r.Fp),i=q2(e.n,r.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!n.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function z2(t){t.lowS!==void 0&&Gh("lowS",t.lowS),t.prehash!==void 0&&Gh("prehash",t.prehash)}class eT extends Error{constructor(e=""){super(e)}}const go={Err:eT,_tlv:{encode:(t,e)=>{const{Err:r}=go;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Yh(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Yh(i.length/2|128):"";return Yh(t)+s+i+e},decode(t,e){const{Err:r}=go;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new r("tlv.decode(long): indefinite length not supported");if(u>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+u);if(l.length!==u)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const d of l)o=o<<8|d;if(n+=u,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=go;if(t<Vf)throw new e("integer: negative integers are not allowed");let r=Yh(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=go;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Jh(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=go,i=Ui("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,s),{v:l,l:d}=n.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=go,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Vf=BigInt(0),Gf=BigInt(1),tT=BigInt(2),sd=BigInt(3),rT=BigInt(4);function nT(t,e,r){function n(i){const s=t.sqr(i),o=t.mul(s,i);return t.add(t.add(o,t.mul(i,e)),r)}return n}function H2(t,e,r){const{BYTES:n}=t;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=Ui("private key",s);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const u=new Uint8Array(n);u.set(a,u.length-a.length),a=u}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof s}`)}}if(r&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function iT(t,e={}){const{Fp:r,Fn:n}=QC("weierstrass",t,e),{h:i,n:s}=t;Kg(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!r.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function u(W,ie,me){const{x:j,y:E}=ie.toAffine(),m=r.toBytes(j);if(Gh("isCompressed",me),me){a();const f=!r.isOdd(E);return Ua(W2(f),m)}else return Ua(Uint8Array.of(4),m,r.toBytes(E))}function l(W){ps(W);const ie=r.BYTES,me=ie+1,j=2*ie+1,E=W.length,m=W[0],f=W.subarray(1);if(E===me&&(m===2||m===3)){const g=r.fromBytes(f);if(!r.isValid(g))throw new Error("bad point: is not on curve, wrong x");const v=y(g);let x;try{x=r.sqrt(v)}catch(b){const P=b instanceof Error?": "+b.message:"";throw new Error("bad point: is not on curve, sqrt error"+P)}a();const S=r.isOdd(x);return(m&1)===1!==S&&(x=r.neg(x)),{x:g,y:x}}else if(E===j&&m===4){const g=r.fromBytes(f.subarray(ie*0,ie*1)),v=r.fromBytes(f.subarray(ie*1,ie*2));if(!_(g,v))throw new Error("bad point: is not on curve");return{x:g,y:v}}else throw new Error(`bad point: got length ${E}, expected compressed=${me} or uncompressed=${j}`)}const d=e.toBytes||u,p=e.fromBytes||l,y=nT(r,t.a,t.b);function _(W,ie){const me=r.sqr(ie),j=y(W);return r.eql(me,j)}if(!_(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const M=r.mul(r.pow(t.a,sd),rT),O=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(M,O)))throw new Error("bad curve params: a or b");function L(W,ie,me=!1){if(!r.isValid(ie)||me&&r.is0(ie))throw new Error(`bad point coordinate ${W}`);return ie}function B(W){if(!(W instanceof z))throw new Error("ProjectivePoint expected")}const k=b2((W,ie)=>{const{px:me,py:j,pz:E}=W;if(r.eql(E,r.ONE))return{x:me,y:j};const m=W.is0();ie==null&&(ie=m?r.ONE:r.inv(E));const f=r.mul(me,ie),g=r.mul(j,ie),v=r.mul(E,ie);if(m)return{x:r.ZERO,y:r.ZERO};if(!r.eql(v,r.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),H=b2(W=>{if(W.is0()){if(e.allowInfinityPoint&&!r.is0(W.py))return;throw new Error("bad point: ZERO")}const{x:ie,y:me}=W.toAffine();if(!r.isValid(ie)||!r.isValid(me))throw new Error("bad point: x or y not field elements");if(!_(ie,me))throw new Error("bad point: equation left != right");if(!W.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(W,ie,me,j,E){return me=new z(r.mul(me.px,W),me.py,me.pz),ie=Kf(j,ie),me=Kf(E,me),ie.add(me)}class z{constructor(ie,me,j){this.px=L("x",ie),this.py=L("y",me,!0),this.pz=L("z",j),Object.freeze(this)}static fromAffine(ie){const{x:me,y:j}=ie||{};if(!ie||!r.isValid(me)||!r.isValid(j))throw new Error("invalid affine point");if(ie instanceof z)throw new Error("projective point not allowed");return r.is0(me)&&r.is0(j)?z.ZERO:new z(me,j,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(ie){return VC(z,"pz",ie)}static fromBytes(ie){return ps(ie),z.fromHex(ie)}static fromHex(ie){const me=z.fromAffine(p(Ui("pointHex",ie)));return me.assertValidity(),me}static fromPrivateKey(ie){const me=H2(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return z.BASE.multiply(me(ie))}static msm(ie,me){return ZC(z,n,ie,me)}precompute(ie=8,me=!0){return R.setWindowSize(this,ie),me||this.multiply(sd),this}_setWindowSize(ie){this.precompute(ie)}assertValidity(){H(this)}hasEvenY(){const{y:ie}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(ie)}equals(ie){B(ie);const{px:me,py:j,pz:E}=this,{px:m,py:f,pz:g}=ie,v=r.eql(r.mul(me,g),r.mul(m,E)),x=r.eql(r.mul(j,g),r.mul(f,E));return v&&x}negate(){return new z(this.px,r.neg(this.py),this.pz)}double(){const{a:ie,b:me}=t,j=r.mul(me,sd),{px:E,py:m,pz:f}=this;let g=r.ZERO,v=r.ZERO,x=r.ZERO,S=r.mul(E,E),A=r.mul(m,m),b=r.mul(f,f),P=r.mul(E,m);return P=r.add(P,P),x=r.mul(E,f),x=r.add(x,x),g=r.mul(ie,x),v=r.mul(j,b),v=r.add(g,v),g=r.sub(A,v),v=r.add(A,v),v=r.mul(g,v),g=r.mul(P,g),x=r.mul(j,x),b=r.mul(ie,b),P=r.sub(S,b),P=r.mul(ie,P),P=r.add(P,x),x=r.add(S,S),S=r.add(x,S),S=r.add(S,b),S=r.mul(S,P),v=r.add(v,S),b=r.mul(m,f),b=r.add(b,b),S=r.mul(b,P),g=r.sub(g,S),x=r.mul(b,A),x=r.add(x,x),x=r.add(x,x),new z(g,v,x)}add(ie){B(ie);const{px:me,py:j,pz:E}=this,{px:m,py:f,pz:g}=ie;let v=r.ZERO,x=r.ZERO,S=r.ZERO;const A=t.a,b=r.mul(t.b,sd);let P=r.mul(me,m),I=r.mul(j,f),F=r.mul(E,g),ce=r.add(me,j),D=r.add(m,f);ce=r.mul(ce,D),D=r.add(P,I),ce=r.sub(ce,D),D=r.add(me,E);let se=r.add(m,g);return D=r.mul(D,se),se=r.add(P,F),D=r.sub(D,se),se=r.add(j,E),v=r.add(f,g),se=r.mul(se,v),v=r.add(I,F),se=r.sub(se,v),S=r.mul(A,D),v=r.mul(b,F),S=r.add(v,S),v=r.sub(I,S),S=r.add(I,S),x=r.mul(v,S),I=r.add(P,P),I=r.add(I,P),F=r.mul(A,F),D=r.mul(b,D),I=r.add(I,F),F=r.sub(P,F),F=r.mul(A,F),D=r.add(D,F),P=r.mul(I,D),x=r.add(x,P),P=r.mul(se,D),v=r.mul(ce,v),v=r.sub(v,P),P=r.mul(ce,I),S=r.mul(se,S),S=r.add(S,P),new z(v,x,S)}subtract(ie){return this.add(ie.negate())}is0(){return this.equals(z.ZERO)}multiply(ie){const{endo:me}=e;if(!n.isValidNot0(ie))throw new Error("invalid scalar: out of range");let j,E;const m=f=>R.wNAFCached(this,f,z.normalizeZ);if(me){const{k1neg:f,k1:g,k2neg:v,k2:x}=me.splitScalar(ie),{p:S,f:A}=m(g),{p:b,f:P}=m(x);E=A.add(P),j=U(me.beta,S,b,f,v)}else{const{p:f,f:g}=m(ie);j=f,E=g}return z.normalizeZ([j,E])[0]}multiplyUnsafe(ie){const{endo:me}=e,j=this;if(!n.isValid(ie))throw new Error("invalid scalar: out of range");if(ie===Vf||j.is0())return z.ZERO;if(ie===Gf)return j;if(R.hasPrecomputes(this))return this.multiply(ie);if(me){const{k1neg:E,k1:m,k2neg:f,k2:g}=me.splitScalar(ie),{p1:v,p2:x}=XC(z,j,m,g);return U(me.beta,v,x,E,f)}else return R.wNAFCachedUnsafe(j,ie)}multiplyAndAddUnsafe(ie,me,j){const E=this.multiplyUnsafe(me).add(ie.multiplyUnsafe(j));return E.is0()?void 0:E}toAffine(ie){return k(this,ie)}isTorsionFree(){const{isTorsionFree:ie}=e;return i===Gf?!0:ie?ie(z,this):R.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:ie}=e;return i===Gf?this:ie?ie(z,this):this.multiplyUnsafe(i)}toBytes(ie=!0){return Gh("isCompressed",ie),this.assertValidity(),d(z,this,ie)}toRawBytes(ie=!0){return this.toBytes(ie)}toHex(ie=!0){return Gc(this.toBytes(ie))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}z.BASE=new z(t.Gx,t.Gy,r.ONE),z.ZERO=new z(r.ZERO,r.ONE,r.ZERO),z.Fp=r,z.Fn=n;const Z=n.BITS,R=JC(z,e.endo?Math.ceil(Z/2):Z);return z}function W2(t){return Uint8Array.of(t?2:3)}function sT(t,e,r={}){Kg(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||lM,i=e.hmac||((j,...E)=>I2(e.hash,j,Ua(...E))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:u}=o;function l(j){const E=a>>Gf;return j>E}function d(j){return l(j)?o.neg(j):j}function p(j,E){if(!o.isValidNot0(E))throw new Error(`invalid signature ${j}: out of range 1..CURVE.n`)}class y{constructor(E,m,f){p("r",E),p("s",m),this.r=E,this.s=m,f!=null&&(this.recovery=f),Object.freeze(this)}static fromCompact(E){const m=o.BYTES,f=Ui("compactSignature",E,m*2);return new y(o.fromBytes(f.subarray(0,m)),o.fromBytes(f.subarray(m,m*2)))}static fromDER(E){const{r:m,s:f}=go.toSig(Ui("DER",E));return new y(m,f)}assertValidity(){}addRecoveryBit(E){return new y(this.r,this.s,E)}recoverPublicKey(E){const m=s.ORDER,{r:f,s:g,recovery:v}=this;if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");if(a*tT<m&&v>1)throw new Error("recovery id is ambiguous for h>1 curve");const S=v===2||v===3?f+a:f;if(!s.isValid(S))throw new Error("recovery id 2 or 3 invalid");const A=s.toBytes(S),b=t.fromHex(Ua(W2((v&1)===0),A)),P=o.inv(S),I=H(Ui("msgHash",E)),F=o.create(-I*P),ce=o.create(g*P),D=t.BASE.multiplyUnsafe(F).add(b.multiplyUnsafe(ce));if(D.is0())throw new Error("point at infinify");return D.assertValidity(),D}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toBytes(E){if(E==="compact")return Ua(o.toBytes(this.r),o.toBytes(this.s));if(E==="der")return mg(go.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Gc(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Gc(this.toBytes("compact"))}}const _=H2(o,r.allowedPrivateKeyLengths,r.wrapPrivateKey),M={isValidPrivateKey(j){try{return _(j),!0}catch{return!1}},normPrivateKeyToScalar:_,randomPrivateKey:()=>{const j=a;return KC(n(B2(j)),j)},precompute(j=8,E=t.BASE){return E.precompute(j,!1)}};function O(j,E=!0){return t.fromPrivateKey(j).toBytes(E)}function L(j){if(typeof j=="bigint")return!1;if(j instanceof t)return!0;const m=Ui("key",j).length,f=s.BYTES,g=f+1,v=2*f+1;if(!(r.allowedPrivateKeyLengths||o.BYTES===g))return m===g||m===v}function B(j,E,m=!0){if(L(j)===!0)throw new Error("first arg must be private key");if(L(E)===!1)throw new Error("second arg must be public key");return t.fromHex(E).multiply(_(j)).toBytes(m)}const k=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const E=Jh(j),m=j.length*8-u;return m>0?E>>BigInt(m):E},H=e.bits2int_modN||function(j){return o.create(k(j))},U=Xh(u);function z(j){return fC("num < 2^"+u,j,Vf,U),o.toBytes(j)}function Z(j,E,m=R){if(["recovered","canonical"].some(ce=>ce in m))throw new Error("sign() legacy options not supported");const{hash:f}=e;let{lowS:g,prehash:v,extraEntropy:x}=m;g==null&&(g=!0),j=Ui("msgHash",j),z2(m),v&&(j=Ui("prehashed msgHash",f(j)));const S=H(j),A=_(E),b=[z(A),z(S)];if(x!=null&&x!==!1){const ce=x===!0?n(s.BYTES):x;b.push(Ui("extraEntropy",ce))}const P=Ua(...b),I=S;function F(ce){const D=k(ce);if(!o.isValidNot0(D))return;const se=o.inv(D),ee=t.BASE.multiply(D).toAffine(),J=o.create(ee.x);if(J===Vf)return;const Q=o.create(se*o.create(I+J*A));if(Q===Vf)return;let T=(ee.x===J?0:2)|Number(ee.y&Gf),X=Q;return g&&l(Q)&&(X=d(Q),T^=1),new y(J,X,T)}return{seed:P,k2sig:F}}const R={lowS:e.lowS,prehash:!1},W={lowS:e.lowS,prehash:!1};function ie(j,E,m=R){const{seed:f,k2sig:g}=Z(j,E,m);return hC(e.hash.outputLen,o.BYTES,i)(f,g)}t.BASE.precompute(8);function me(j,E,m,f=W){const g=j;E=Ui("msgHash",E),m=Ui("publicKey",m),z2(f);const{lowS:v,prehash:x,format:S}=f;if("strict"in f)throw new Error("options.strict was renamed to lowS");if(S!==void 0&&!["compact","der","js"].includes(S))throw new Error('format must be "compact", "der" or "js"');const A=typeof g=="string"||pg(g),b=!A&&!S&&typeof g=="object"&&g!==null&&typeof g.r=="bigint"&&typeof g.s=="bigint";if(!A&&!b)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let P,I;try{if(b)if(S===void 0||S==="js")P=new y(g.r,g.s);else throw new Error("invalid format");if(A){try{S!=="compact"&&(P=y.fromDER(g))}catch(X){if(!(X instanceof go.Err))throw X}!P&&S!=="der"&&(P=y.fromCompact(g))}I=t.fromHex(m)}catch{return!1}if(!P||v&&P.hasHighS())return!1;x&&(E=e.hash(E));const{r:F,s:ce}=P,D=H(E),se=o.inv(ce),ee=o.create(D*se),J=o.create(F*se),Q=t.BASE.multiplyUnsafe(ee).add(I.multiplyUnsafe(J));return Q.is0()?!1:o.create(Q.x)===F}return Object.freeze({getPublicKey:O,getSharedSecret:B,sign:ie,verify:me,utils:M,Point:t,Signature:y})}function oT(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=id(e.n,t.nBitLength),i={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function aT(t){const{CURVE:e,curveOpts:r}=oT(t),n={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,ecdsaOpts:n}}function cT(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function uT(t){const{CURVE:e,curveOpts:r,ecdsaOpts:n}=aT(t),i=iT(e,r),s=sT(i,n,r);return cT(t,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fT(t,e){const r=n=>uT({...t,hash:n});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const od={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const lT=BigInt(1),tm=BigInt(2),K2=(t,e)=>(t+e/tm)/e;function hT(t){const e=od.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),l=t*t*t%e,d=l*l*t%e,p=zi(d,r,e)*d%e,y=zi(p,r,e)*d%e,_=zi(y,tm,e)*l%e,M=zi(_,i,e)*_%e,O=zi(M,s,e)*M%e,L=zi(O,a,e)*O%e,B=zi(L,u,e)*L%e,k=zi(B,a,e)*O%e,H=zi(k,r,e)*d%e,U=zi(H,o,e)*M%e,z=zi(U,n,e)*l%e,Z=zi(z,tm,e);if(!rm.eql(rm.sqr(Z),t))throw new Error("Cannot find square root");return Z}const rm=id(od.p,void 0,void 0,{sqrt:hT}),dT=fT({...od,Fp:rm,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=od.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-lT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=K2(s*t,e),u=K2(-n*t,e);let l=qi(t-a*r-u*i,e),d=qi(-a*n-u*s,e);const p=l>o,y=d>o;if(p&&(l=e-l),y&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:p,k1:l,k2neg:y,k2:d}}}},a2),pT=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:dT},Symbol.toStringTag,{value:"Module"}));async function gT(t,{chain:e}){const{id:r,name:n,nativeCurrency:i,rpcUrls:s,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:dr(r),chainName:n,nativeCurrency:i,rpcUrls:s.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function mT(t,e){const{abi:r,args:n,bytecode:i,...s}=e,o=gC({abi:r,args:n,bytecode:i});return Qh(t,{...s,...s.authorizationList?{to:null}:{},data:o})}async function vT(t){var r;return((r=t.account)==null?void 0:r.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(n=>Sf(n))}async function bT(t,e={}){const{account:r=t.account,chainId:n}=e,i=r?fi(r):void 0,s=n?[i==null?void 0:i.address,[dr(n)]]:[i==null?void 0:i.address],o=await t.request({method:"wallet_getCapabilities",params:s}),a={};for(const[u,l]of Object.entries(o)){a[Number(u)]={};for(let[d,p]of Object.entries(l))d==="addSubAccount"&&(d="unstable_addSubAccount"),a[Number(u)][d]=p}return typeof n=="number"?a[n]:a}async function yT(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function V2(t,e){var u;const{account:r=t.account,chainId:n,nonce:i}=e;if(!r)throw new Wa({docsPath:"/docs/eip7702/prepareAuthorization"});const s=fi(r),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:fi(e.executor)})(),a={address:e.contractAddress??e.address,chainId:n,nonce:i};return typeof a.chainId>"u"&&(a.chainId=((u=t.chain)==null?void 0:u.id)??await Wn(t,Wf,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Wn(t,i2,"getTransactionCount")({address:s.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&cC(o.address,s.address))&&(a.nonce+=1)),a}async function wT(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(r=>yg(r))}async function xT(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function _T(t,e){const{id:r}=e;await t.request({method:"wallet_showCallsStatus",params:[r]})}async function ET(t,e){const{account:r=t.account}=e;if(!r)throw new Wa({docsPath:"/docs/eip7702/signAuthorization"});const n=fi(r);if(!n.signAuthorization)throw new Zh({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:n.type});const i=await V2(t,e);return n.signAuthorization(i)}async function ST(t,{account:e=t.account,message:r}){if(!e)throw new Wa({docsPath:"/docs/actions/wallet/signMessage"});const n=fi(e);if(n.signMessage)return n.signMessage({message:r});const i=typeof r=="string"?Bh(r):r.raw instanceof Uint8Array?kh(r.raw):r.raw;return t.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}async function AT(t,e){var l,d,p,y;const{account:r=t.account,chain:n=t.chain,...i}=e;if(!r)throw new Wa({docsPath:"/docs/actions/wallet/signTransaction"});const s=fi(r);Kh({account:s,...e});const o=await Wn(t,Wf,"getChainId")({});n!==null&&w2({currentChainId:o,chain:n});const a=(n==null?void 0:n.formatters)||((l=t.chain)==null?void 0:l.formatters),u=((d=a==null?void 0:a.transactionRequest)==null?void 0:d.format)||$g;return s.signTransaction?s.signTransaction({...i,chainId:o},{serializer:(y=(p=t.chain)==null?void 0:p.serializers)==null?void 0:y.transaction}):await t.request({method:"eth_signTransaction",params:[{...u(i),chainId:dr(o),from:s.address}]},{retryCount:0})}async function PT(t,e){const{account:r=t.account,domain:n,message:i,primaryType:s}=e;if(!r)throw new Wa({docsPath:"/docs/actions/wallet/signTypedData"});const o=fi(r),a={EIP712Domain:kC({domain:n}),...e.types};if(LC({domain:n,message:i,primaryType:s,types:a}),o.signTypedData)return o.signTypedData({domain:n,message:i,primaryType:s,types:a});const u=NC({domain:n,message:i,primaryType:s,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,u]},{retryCount:0})}async function MT(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:dr(e)}]},{retryCount:0})}async function IT(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function CT(t){return{addChain:e=>gT(t,e),deployContract:e=>mT(t,e),getAddresses:()=>vT(t),getCallsStatus:e=>A2(t,e),getCapabilities:e=>bT(t,e),getChainId:()=>Wf(t),getPermissions:()=>yT(t),prepareAuthorization:e=>V2(t,e),prepareTransactionRequest:e=>Ug(t,e),requestAddresses:()=>wT(t),requestPermissions:e=>xT(t,e),sendCalls:e=>_C(t,e),sendRawTransaction:e=>_2(t,e),sendTransaction:e=>Qh(t,e),showCallsStatus:e=>_T(t,e),signAuthorization:e=>ET(t,e),signMessage:e=>ST(t,e),signTransaction:e=>AT(t,e),signTypedData:e=>PT(t,e),switchChain:e=>MT(t,e),waitForCallsStatus:e=>EC(t,e),watchAsset:e=>IT(t,e),writeContract:e=>wC(t,e)}}function ad(t){const{key:e="wallet",name:r="Wallet Client",transport:n}=t;return AC({...t,key:e,name:r,transport:n,type:"walletClient"}).extend(CT)}class ru{constructor(e){Ns(this,"_key");Ns(this,"_config",null);Ns(this,"_provider",null);Ns(this,"_connected",!1);Ns(this,"_address",null);Ns(this,"_fatured",!1);Ns(this,"_installed",!1);Ns(this,"lastUsed",!1);Ns(this,"_client",null);var r;if("name"in e&&"image"in e)this._key=e.name,this._config=e,this._fatured=e.featured;else if("session"in e){if(!e.session)throw new Error("session is null");this._key=(r=e.session)==null?void 0:r.peer.metadata.name,this._provider=e,this._client=ad({transport:nd(this._provider)}),this._config={name:e.session.peer.metadata.name,image:e.session.peer.metadata.icons[0],featured:!1}}else if("info"in e)this._key=e.info.name,this._provider=e.provider,this._installed=!0,this._client=ad({transport:nd(this._provider)}),this._config={name:e.info.name,image:e.info.icon,featured:!1},this.testConnect();else throw new Error("unknown params")}get address(){return this._address}get connected(){return this._connected}get featured(){return this._fatured}get key(){return this._key}get installed(){return this._installed}get provider(){return this._provider}get client(){return this._client?this._client:null}get config(){return this._config}static fromWalletConfig(e){return new ru(e)}EIP6963Detected(e){this._provider=e.provider,this._client=ad({transport:nd(this._provider)}),this._installed=!0,this._provider.on("disconnect",this.disconnect),this._provider.on("accountsChanged",r=>{this._address=r[0],this._connected=!0}),this.testConnect()}setUniversalProvider(e){this._provider=e,this._client=ad({transport:nd(this._provider)}),this.testConnect()}async switchChain(e){var r,n,i,s;try{return await((r=this.client)==null?void 0:r.getChainId())===e.id||await((n=this.client)==null?void 0:n.switchChain(e)),!0}catch(o){if(o.code===4902)return await((i=this.client)==null?void 0:i.addChain({chain:e})),await((s=this.client)==null?void 0:s.switchChain(e)),!0;throw o}}async testConnect(){var r;const e=await((r=this.client)==null?void 0:r.getAddresses());e&&e.length>0?(this._address=e[0],this._connected=!0):(this._address=null,this._connected=!1)}async connect(){var r;const e=await((r=this.client)==null?void 0:r.requestAddresses());if(!e)throw new Error("connect failed");return e}async getAddress(){var r;const e=await((r=this.client)==null?void 0:r.getAddresses());if(!e)throw new Error("get address failed");return e[0]}async getChain(){var r;const e=await((r=this.client)==null?void 0:r.getChainId());if(!e)throw new Error("get chain failed");return e}async signMessage(e,r){var i;return await((i=this.client)==null?void 0:i.signMessage({message:e,account:r}))}async disconnect(){this._provider&&"session"in this._provider&&await this._provider.disconnect(),this._connected=!1,this._address=null}}var nm={exports:{}},nu=typeof Reflect=="object"?Reflect:null,G2=nu&&typeof nu.apply=="function"?nu.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},cd;nu&&typeof nu.ownKeys=="function"?cd=nu.ownKeys:Object.getOwnPropertySymbols?cd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:cd=function(e){return Object.getOwnPropertyNames(e)};function TT(t){console&&console.warn&&console.warn(t)}var Y2=Number.isNaN||function(e){return e!==e};function Rr(){Rr.init.call(this)}nm.exports=Rr,nm.exports.once=NT,Rr.EventEmitter=Rr,Rr.prototype._events=void 0,Rr.prototype._eventsCount=0,Rr.prototype._maxListeners=void 0;var J2=10;function ud(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Rr,"defaultMaxListeners",{enumerable:!0,get:function(){return J2},set:function(t){if(typeof t!="number"||t<0||Y2(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");J2=t}}),Rr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Rr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Y2(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function X2(t){return t._maxListeners===void 0?Rr.defaultMaxListeners:t._maxListeners}Rr.prototype.getMaxListeners=function(){return X2(this)},Rr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")G2(u,this,r);else for(var l=u.length,d=rx(u,l),n=0;n<l;++n)G2(d[n],this,r);return!0};function Z2(t,e,r,n){var i,s,o;if(ud(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=X2(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,TT(a)}return t}Rr.prototype.addListener=function(e,r){return Z2(this,e,r,!1)},Rr.prototype.on=Rr.prototype.addListener,Rr.prototype.prependListener=function(e,r){return Z2(this,e,r,!0)};function RT(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Q2(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=RT.bind(n);return i.listener=r,n.wrapFn=i,i}Rr.prototype.once=function(e,r){return ud(r),this.on(e,Q2(this,e,r)),this},Rr.prototype.prependOnceListener=function(e,r){return ud(r),this.prependListener(e,Q2(this,e,r)),this},Rr.prototype.removeListener=function(e,r){var n,i,s,o,a;if(ud(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():DT(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},Rr.prototype.off=Rr.prototype.removeListener,Rr.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function ex(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?OT(i):rx(i,i.length)}Rr.prototype.listeners=function(e){return ex(this,e,!0)},Rr.prototype.rawListeners=function(e){return ex(this,e,!1)},Rr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):tx.call(t,e)},Rr.prototype.listenerCount=tx;function tx(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Rr.prototype.eventNames=function(){return this._eventsCount>0?cd(this._events):[]};function rx(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function DT(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function OT(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function NT(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}nx(t,e,s,{once:!0}),e!=="error"&&LT(t,i,{once:!0})})}function LT(t,e,r){typeof t.on=="function"&&nx(t,"error",e,r)}function nx(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Hi=nm.exports;const im=ji(Hi);var vt={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var sm=function(t,e){return sm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},sm(t,e)};function kT(t,e){sm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var om=function(){return om=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},om.apply(this,arguments)};function BT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function $T(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function FT(t,e){return function(r,n){e(r,n,t)}}function jT(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function UT(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{l(n.next(d))}catch(p){o(p)}}function u(d){try{l(n.throw(d))}catch(p){o(p)}}function l(d){d.done?s(d.value):i(d.value).then(a,u)}l((n=n.apply(t,e||[])).next())})}function qT(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(d){return u([l,d])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function zT(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function HT(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function am(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ix(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function WT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ix(arguments[e]));return t}function KT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Yf(t){return this instanceof Yf?(this.v=t,this):new Yf(t)}function VT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){n[y]&&(i[y]=function(_){return new Promise(function(M,O){s.push([y,_,M,O])>1||a(y,_)})})}function a(y,_){try{u(n[y](_))}catch(M){p(s[0][3],M)}}function u(y){y.value instanceof Yf?Promise.resolve(y.value.v).then(l,d):p(s[0][2],y)}function l(y){a("next",y)}function d(y){a("throw",y)}function p(y,_){y(_),s.shift(),s.length&&a(s[0][0],s[0][1])}}function GT(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Yf(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function YT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof am=="function"?am(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}function JT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function XT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function ZT(t){return t&&t.__esModule?t:{default:t}}function QT(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function eR(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Jf=cg(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return om},__asyncDelegator:GT,__asyncGenerator:VT,__asyncValues:YT,__await:Yf,__awaiter:UT,__classPrivateFieldGet:QT,__classPrivateFieldSet:eR,__createBinding:zT,__decorate:$T,__exportStar:HT,__extends:kT,__generator:qT,__importDefault:ZT,__importStar:XT,__makeTemplateObject:JT,__metadata:jT,__param:FT,__read:ix,__rest:BT,__spread:WT,__spreadArrays:KT,__values:am},Symbol.toStringTag,{value:"Module"})));var cm={},Xf={},sx;function tR(){if(sx)return Xf;sx=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Xf.delay=t,Xf}var Ga={},um={},Ya={},ox;function rR(){return ox||(ox=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.ONE_THOUSAND=Ya.ONE_HUNDRED=void 0,Ya.ONE_HUNDRED=100,Ya.ONE_THOUSAND=1e3),Ya}var fm={},ax;function nR(){return ax||(ax=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(fm)),fm}var cx;function ux(){return cx||(cx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Jf;e.__exportStar(rR(),t),e.__exportStar(nR(),t)}(um)),um}var fx;function iR(){if(fx)return Ga;fx=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.fromMiliseconds=Ga.toMiliseconds=void 0;const t=ux();function e(n){return n*t.ONE_THOUSAND}Ga.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Ga.fromMiliseconds=r,Ga}var lx;function sR(){return lx||(lx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Jf;e.__exportStar(tR(),t),e.__exportStar(iR(),t)}(cm)),cm}var iu={},hx;function oR(){if(hx)return iu;hx=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return iu.Watch=t,iu.default=t,iu}var lm={},Zf={},dx;function aR(){if(dx)return Zf;dx=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.IWatch=void 0;class t{}return Zf.IWatch=t,Zf}var px;function cR(){return px||(px=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Jf.__exportStar(aR(),t)}(lm)),lm}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Jf;e.__exportStar(sR(),t),e.__exportStar(oR(),t),e.__exportStar(cR(),t),e.__exportStar(ux(),t)})(vt);class Ja{}let uR=class extends Ja{constructor(e){super()}};const gx=vt.FIVE_SECONDS,su={pulse:"heartbeat_pulse"};let fR=class EP extends uR{constructor(e){super(e),this.events=new Hi.EventEmitter,this.interval=gx,this.interval=(e==null?void 0:e.interval)||gx}static async init(e){const r=new EP(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),vt.toMiliseconds(this.interval))}pulse(){this.events.emit(su.pulse)}};const lR=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,hR=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,dR=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function pR(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){gR(t);return}return e}function gR(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function fd(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!dR.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(lR.test(t)||hR.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,pR)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function mR(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Mn(t,...e){try{return mR(t(...e))}catch(r){return Promise.reject(r)}}function vR(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function bR(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function ld(t){if(vR(t))return String(t);if(bR(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return ld(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function mx(){if(typeof Buffer>"u")throw new TypeError("[unstorage] Buffer is not supported!")}const hm="base64:";function yR(t){if(typeof t=="string")return t;mx();const e=Buffer.from(t).toString("base64");return hm+e}function wR(t){return typeof t!="string"||!t.startsWith(hm)?t:(mx(),Buffer.from(t.slice(hm.length),"base64"))}function di(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function xR(...t){return di(t.join(":"))}function hd(t){return t=di(t),t?t+":":""}function Koe(t){return t}const _R="memory",ER=()=>{const t=new Map;return{name:_R,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function SR(t={}){const e={mounts:{"":t.driver||ER()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const d of e.mountpoints)if(l.startsWith(d))return{base:d,relativeKey:l.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,d)=>e.mountpoints.filter(p=>p.startsWith(l)||d&&l.startsWith(p)).map(p=>({relativeBase:l.length>p.length?l.slice(p.length):void 0,mountpoint:p,driver:e.mounts[p]})),i=(l,d)=>{if(e.watching){d=di(d);for(const p of e.watchListeners)p(l,d)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await vx(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,d,p)=>{const y=new Map,_=M=>{let O=y.get(M.base);return O||(O={driver:M.driver,base:M.base,items:[]},y.set(M.base,O)),O};for(const M of l){const O=typeof M=="string",L=di(O?M:M.key),B=O?void 0:M.value,k=O||!M.options?d:{...d,...M.options},H=r(L);_(H).items.push({key:L,value:B,relativeKey:H.relativeKey,options:k})}return Promise.all([...y.values()].map(M=>p(M))).then(M=>M.flat())},u={hasItem(l,d={}){l=di(l);const{relativeKey:p,driver:y}=r(l);return Mn(y.hasItem,p,d)},getItem(l,d={}){l=di(l);const{relativeKey:p,driver:y}=r(l);return Mn(y.getItem,p,d).then(_=>fd(_))},getItems(l,d){return a(l,d,p=>p.driver.getItems?Mn(p.driver.getItems,p.items.map(y=>({key:y.relativeKey,options:y.options})),d).then(y=>y.map(_=>({key:xR(p.base,_.key),value:fd(_.value)}))):Promise.all(p.items.map(y=>Mn(p.driver.getItem,y.relativeKey,y.options).then(_=>({key:y.key,value:fd(_)})))))},getItemRaw(l,d={}){l=di(l);const{relativeKey:p,driver:y}=r(l);return y.getItemRaw?Mn(y.getItemRaw,p,d):Mn(y.getItem,p,d).then(_=>wR(_))},async setItem(l,d,p={}){if(d===void 0)return u.removeItem(l);l=di(l);const{relativeKey:y,driver:_}=r(l);_.setItem&&(await Mn(_.setItem,y,ld(d),p),_.watch||i("update",l))},async setItems(l,d){await a(l,d,async p=>{if(p.driver.setItems)return Mn(p.driver.setItems,p.items.map(y=>({key:y.relativeKey,value:ld(y.value),options:y.options})),d);p.driver.setItem&&await Promise.all(p.items.map(y=>Mn(p.driver.setItem,y.relativeKey,ld(y.value),y.options)))})},async setItemRaw(l,d,p={}){if(d===void 0)return u.removeItem(l,p);l=di(l);const{relativeKey:y,driver:_}=r(l);if(_.setItemRaw)await Mn(_.setItemRaw,y,d,p);else if(_.setItem)await Mn(_.setItem,y,yR(d),p);else return;_.watch||i("update",l)},async removeItem(l,d={}){typeof d=="boolean"&&(d={removeMeta:d}),l=di(l);const{relativeKey:p,driver:y}=r(l);y.removeItem&&(await Mn(y.removeItem,p,d),(d.removeMeta||d.removeMata)&&await Mn(y.removeItem,p+"$",d),y.watch||i("remove",l))},async getMeta(l,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),l=di(l);const{relativeKey:p,driver:y}=r(l),_=Object.create(null);if(y.getMeta&&Object.assign(_,await Mn(y.getMeta,p,d)),!d.nativeOnly){const M=await Mn(y.getItem,p+"$",d).then(O=>fd(O));M&&typeof M=="object"&&(typeof M.atime=="string"&&(M.atime=new Date(M.atime)),typeof M.mtime=="string"&&(M.mtime=new Date(M.mtime)),Object.assign(_,M))}return _},setMeta(l,d,p={}){return this.setItem(l+"$",d,p)},removeMeta(l,d={}){return this.removeItem(l+"$",d)},async getKeys(l,d={}){l=hd(l);const p=n(l,!0);let y=[];const _=[];for(const M of p){const O=await Mn(M.driver.getKeys,M.relativeBase,d);for(const L of O){const B=M.mountpoint+di(L);y.some(k=>B.startsWith(k))||_.push(B)}y=[M.mountpoint,...y.filter(L=>!L.startsWith(M.mountpoint))]}return l?_.filter(M=>M.startsWith(l)&&M[M.length-1]!=="$"):_.filter(M=>M[M.length-1]!=="$")},async clear(l,d={}){l=hd(l),await Promise.all(n(l,!1).map(async p=>{if(p.driver.clear)return Mn(p.driver.clear,p.relativeBase,d);if(p.driver.removeItem){const y=await p.driver.getKeys(p.relativeBase||"",d);return Promise.all(y.map(_=>p.driver.removeItem(_,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>bx(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,d){if(l=hd(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((p,y)=>y.length-p.length)),e.mounts[l]=d,e.watching&&Promise.resolve(vx(d,i,l)).then(p=>{e.unwatch[l]=p}).catch(console.error),u},async unmount(l,d=!0){l=hd(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l](),delete e.unwatch[l]),d&&await bx(e.mounts[l]),e.mountpoints=e.mountpoints.filter(p=>p!==l),delete e.mounts[l])},getMount(l=""){l=di(l)+":";const d=r(l);return{driver:d.driver,base:d.base}},getMounts(l="",d={}){return l=di(l),n(l,d.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(l,d={})=>u.getKeys(l,d),get:(l,d={})=>u.getItem(l,d),set:(l,d,p={})=>u.setItem(l,d,p),has:(l,d={})=>u.hasItem(l,d),del:(l,d={})=>u.removeItem(l,d),remove:(l,d={})=>u.removeItem(l,d)};return u}function vx(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function bx(t){typeof t.dispose=="function"&&await Mn(t.dispose)}function Xa(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function yx(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Xa(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let dm;function Qf(){return dm||(dm=yx("keyval-store","keyval")),dm}function wx(t,e=Qf()){return e("readonly",r=>Xa(r.get(t)))}function AR(t,e,r=Qf()){return r("readwrite",n=>(n.put(e,t),Xa(n.transaction)))}function PR(t,e=Qf()){return e("readwrite",r=>(r.delete(t),Xa(r.transaction)))}function MR(t=Qf()){return t("readwrite",e=>(e.clear(),Xa(e.transaction)))}function IR(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Xa(t.transaction)}function CR(t=Qf()){return t("readonly",e=>{if(e.getAllKeys)return Xa(e.getAllKeys());const r=[];return IR(e,n=>r.push(n.key)).then(()=>r)})}const TR=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),RR=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Za(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return RR(t)}catch{return t}}function mo(t){return typeof t=="string"?t:TR(t)||""}const DR="idb-keyval";var OR=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=yx(t.dbName,t.storeName)),{name:DR,options:t,async hasItem(i){return!(typeof await wx(r(i),n)>"u")},async getItem(i){return await wx(r(i),n)??null},setItem(i,s){return AR(r(i),s,n)},removeItem(i){return PR(r(i),n)},getKeys(){return CR(n)},clear(){return MR(n)}}};const NR="WALLET_CONNECT_V2_INDEXED_DB",LR="keyvaluestorage";let kR=class{constructor(){this.indexedDb=SR({driver:OR({dbName:NR,storeName:LR})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,mo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dd={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof pm<"u"&&pm.localStorage?dd.exports=pm.localStorage:typeof window<"u"&&window.localStorage?dd.exports=window.localStorage:dd.exports=new e})();function BR(t){var e;return[t[0],Za((e=t[1])!=null?e:"")]}let $R=class{constructor(){this.localStorage=dd.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(BR)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Za(r)}async setItem(e,r){this.localStorage.setItem(e,mo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const FR="wc_storage_version",xx=1,jR=async(t,e,r)=>{const n=FR,i=await e.getItem(n);if(i&&i>=xx){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const u=a.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,xx),r(e),UR(t,o)},UR=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let qR=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new $R;this.storage=e;try{const r=new kR;jR(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};function zR(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var HR=WR;function WR(t,e,r){var n=r&&r.stringify||zR,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var l="",d=1-i,p=-1,y=t&&t.length||0,_=0;_<y;){if(t.charCodeAt(_)===37&&_+1<y){switch(p=p>-1?p:0,t.charCodeAt(_+1)){case 100:case 102:if(d>=u||e[d]==null)break;p<_&&(l+=t.slice(p,_)),l+=Number(e[d]),p=_+2,_++;break;case 105:if(d>=u||e[d]==null)break;p<_&&(l+=t.slice(p,_)),l+=Math.floor(Number(e[d])),p=_+2,_++;break;case 79:case 111:case 106:if(d>=u||e[d]===void 0)break;p<_&&(l+=t.slice(p,_));var M=typeof e[d];if(M==="string"){l+="'"+e[d]+"'",p=_+2,_++;break}if(M==="function"){l+=e[d].name||"<anonymous>",p=_+2,_++;break}l+=n(e[d]),p=_+2,_++;break;case 115:if(d>=u)break;p<_&&(l+=t.slice(p,_)),l+=String(e[d]),p=_+2,_++;break;case 37:p<_&&(l+=t.slice(p,_)),l+="%",p=_+2,_++,d--;break}++d}++_}return p===-1?t:(p<y&&(l+=t.slice(p)),l)}const _x=HR;var ou=vo;const el=tD().console||{},KR={mapHttpRequest:gd,mapHttpResponse:gd,wrapRequestSerializer:mm,wrapResponseSerializer:mm,wrapErrorSerializer:mm,req:gd,res:gd,err:XR};function VR(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function vo(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||el;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=VR(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",u=Object.create(r);u.log||(u.log=tl),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:p,set:y});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:ZR(t)};u.levels=vo.levels,u.level=a,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=tl,u.serializers=n,u._serialize=i,u._stdErrSerialize=s,u.child=_,e&&(u._logEvent=gm());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function p(){return this._level}function y(M){if(M!=="silent"&&!this.levels.values[M])throw Error("unknown level "+M);this._level=M,au(l,u,"error","log"),au(l,u,"fatal","error"),au(l,u,"warn","error"),au(l,u,"info","log"),au(l,u,"debug","log"),au(l,u,"trace","log")}function _(M,O){if(!M)throw new Error("missing bindings for child Pino");O=O||{},i&&M.serializers&&(O.serializers=M.serializers);const L=O.serializers;if(i&&L){var B=Object.assign({},n,L),k=t.browser.serialize===!0?Object.keys(B):i;delete M.serializers,pd([M],k,B,this._stdErrSerialize)}function H(U){this._childLevel=(U._childLevel|0)+1,this.error=cu(U,M,"error"),this.fatal=cu(U,M,"fatal"),this.warn=cu(U,M,"warn"),this.info=cu(U,M,"info"),this.debug=cu(U,M,"debug"),this.trace=cu(U,M,"trace"),B&&(this.serializers=B,this._serialize=k),e&&(this._logEvent=gm([].concat(U._logEvent.bindings,M)))}return H.prototype=this,new H(this)}return u}vo.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},vo.stdSerializers=KR,vo.stdTimeFunctions=Object.assign({},{nullTime:Ex,epochTime:Sx,unixTime:QR,isoTime:eD});function au(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?tl:i[r]?i[r]:el[r]||el[n]||tl,GR(t,e,r)}function GR(t,e,r){!t.transmit&&e[r]===tl||(e[r]=function(n){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===el?el:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];if(t.serialize&&!t.asObject&&pd(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,YR(this,r,o,s)):n.apply(a,o),t.transmit){const l=t.transmit.level||e.level,d=vo.levels.values[l],p=vo.levels.values[r];if(p<d)return;JR(this,{ts:s,methodLevel:r,methodValue:p,send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function YR(t,e,r,n){t._serialize&&pd(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};n&&(o.time=n),o.level=vo.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?_x(i.shift(),i):void 0}else typeof s=="string"&&(s=_x(i.shift(),i));return s!==void 0&&(o.msg=s),o}function pd(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=vo.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function cu(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function JR(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,u=t._logEvent.bindings;pd(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(l){return u.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=gm(u)}function gm(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function XR(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function ZR(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Ex:Sx}function gd(){return{}}function mm(t){return t}function tl(){}function Ex(){return!1}function Sx(){return Date.now()}function QR(){return Math.round(Date.now()/1e3)}function eD(){return new Date(Date.now()).toISOString()}function tD(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const rl=ji(ou),rD={level:"info"},nl="custom_context",vm=1e3*1024;let nD=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Ax=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new nD(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},Px=class{constructor(e,r=vm){this.level=e??"error",this.levelValue=ou.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Ax(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===ou.levels.values.error?console.error(e):r===ou.levels.values.warn?console.warn(e):r===ou.levels.values.debug?console.debug(e):r===ou.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(mo({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Ax(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(mo({extraMetadata:e})),new Blob(r,{type:"application/json"})}},iD=class{constructor(e,r=vm){this.baseChunkLogger=new Px(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},sD=class{constructor(e,r=vm){this.baseChunkLogger=new Px(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var oD=Object.defineProperty,aD=Object.defineProperties,cD=Object.getOwnPropertyDescriptors,Mx=Object.getOwnPropertySymbols,uD=Object.prototype.hasOwnProperty,fD=Object.prototype.propertyIsEnumerable,Ix=(t,e,r)=>e in t?oD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,md=(t,e)=>{for(var r in e||(e={}))uD.call(e,r)&&Ix(t,r,e[r]);if(Mx)for(var r of Mx(e))fD.call(e,r)&&Ix(t,r,e[r]);return t},vd=(t,e)=>aD(t,cD(e));function bd(t){return vd(md({},t),{level:(t==null?void 0:t.level)||rD.level})}function lD(t,e=nl){return t[e]||""}function hD(t,e,r=nl){return t[r]=e,t}function pi(t,e=nl){let r="";return typeof t.bindings>"u"?r=lD(t,e):r=t.bindings().context||"",r}function dD(t,e,r=nl){const n=pi(t,r);return n.trim()?`${n}/${e}`:e}function ti(t,e,r=nl){const n=dD(t,e,r),i=t.child({context:n});return hD(i,n,r)}function pD(t){var e,r;const n=new iD((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:rl(vd(md({},t.opts),{level:"trace",browser:vd(md({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function gD(t){var e;const r=new sD((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:rl(vd(md({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function mD(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?pD(t):gD(t)}let vD=class extends Ja{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},bD=class extends Ja{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},yD=class{constructor(e,r){this.logger=e,this.core=r}},wD=class extends Ja{constructor(e,r){super(),this.relayer=e,this.logger=r}},xD=class extends Ja{constructor(e){super()}},_D=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},ED=class extends Ja{constructor(e,r){super(),this.relayer=e,this.logger=r}},SD=class extends Ja{constructor(e,r){super(),this.core=e,this.logger=r}},AD=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},PD=class{constructor(e,r){this.projectId=e,this.logger=r}},MD=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}},ID=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},CD=class{constructor(e){this.client=e}};var bm={},sa={},yd={},wd={};Object.defineProperty(wd,"__esModule",{value:!0}),wd.BrowserRandomSource=void 0;const Cx=65536;class TD{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Cx)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Cx)));return r}}wd.BrowserRandomSource=TD;function Tx(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xd={},Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});function RD(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Mi.wipe=RD;const il=cg(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(xd,"__esModule",{value:!0}),xd.NodeRandomSource=void 0;const DD=Mi;class OD{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Tx<"u"){const e=il;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,DD.wipe)(r),n}}xd.NodeRandomSource=OD,Object.defineProperty(yd,"__esModule",{value:!0}),yd.SystemRandomSource=void 0;const ND=wd,LD=xd;class kD{constructor(){if(this.isAvailable=!1,this.name="",this._source=new ND.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new LD.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}yd.SystemRandomSource=kD;var or={},Rx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,u){var l=a>>>16&65535,d=a&65535,p=u>>>16&65535,y=u&65535;return d*y+(l*y+d*p<<16>>>0)|0}t.mul=Math.imul||e;function r(a,u){return a+u|0}t.add=r;function n(a,u){return a-u|0}t.sub=n;function i(a,u){return a<<u|a>>>32-u}t.rotl=i;function s(a,u){return a<<32-u|a>>>u}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Rx),Object.defineProperty(or,"__esModule",{value:!0});var Dx=Rx;function BD(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}or.readInt16BE=BD;function $D(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}or.readUint16BE=$D;function FD(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}or.readInt16LE=FD;function jD(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}or.readUint16LE=jD;function Ox(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}or.writeUint16BE=Ox,or.writeInt16BE=Ox;function Nx(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}or.writeUint16LE=Nx,or.writeInt16LE=Nx;function ym(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}or.readInt32BE=ym;function wm(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}or.readUint32BE=wm;function xm(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}or.readInt32LE=xm;function _m(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}or.readUint32LE=_m;function _d(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}or.writeUint32BE=_d,or.writeInt32BE=_d;function Ed(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}or.writeUint32LE=Ed,or.writeInt32LE=Ed;function UD(t,e){e===void 0&&(e=0);var r=ym(t,e),n=ym(t,e+4);return r*4294967296+n-(n>>31)*4294967296}or.readInt64BE=UD;function qD(t,e){e===void 0&&(e=0);var r=wm(t,e),n=wm(t,e+4);return r*4294967296+n}or.readUint64BE=qD;function zD(t,e){e===void 0&&(e=0);var r=xm(t,e),n=xm(t,e+4);return n*4294967296+r-(r>>31)*4294967296}or.readInt64LE=zD;function HD(t,e){e===void 0&&(e=0);var r=_m(t,e),n=_m(t,e+4);return n*4294967296+r}or.readUint64LE=HD;function Lx(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),_d(t/4294967296>>>0,e,r),_d(t>>>0,e,r+4),e}or.writeUint64BE=Lx,or.writeInt64BE=Lx;function kx(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ed(t>>>0,e,r),Ed(t/4294967296>>>0,e,r+4),e}or.writeUint64LE=kx,or.writeInt64LE=kx;function WD(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}or.readUintBE=WD;function KD(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}or.readUintLE=KD;function VD(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Dx.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}or.writeUintBE=VD;function GD(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Dx.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}or.writeUintLE=GD;function YD(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}or.readFloat32BE=YD;function JD(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}or.readFloat32LE=JD;function XD(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}or.readFloat64BE=XD;function ZD(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}or.readFloat64LE=ZD;function QD(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}or.writeFloat32BE=QD;function eO(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}or.writeFloat32LE=eO;function tO(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}or.writeFloat64BE=tO;function rO(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}or.writeFloat64LE=rO,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=yd,r=or,n=Mi;t.defaultRandomSource=new e.SystemRandomSource;function i(l,d=t.defaultRandomSource){return d.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const d=i(4,l),p=(0,r.readUint32LE)(d);return(0,n.wipe)(d),p}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,d=o,p=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let y="";const _=d.length,M=256-256%_;for(;l>0;){const O=i(Math.ceil(l*256/M),p);for(let L=0;L<O.length&&l>0;L++){const B=O[L];B<M&&(y+=d.charAt(B%_),l--)}(0,n.wipe)(O)}return y}t.randomString=a;function u(l,d=o,p=t.defaultRandomSource){const y=Math.ceil(l/(Math.log(d.length)/Math.LN2));return a(y,d,p)}t.randomStringForEntropy=u}(sa);var Bx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=or,r=Mi;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(u,l){if(l===void 0&&(l=u.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=u[d++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,u,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=u[d++],l--;return this},a.prototype.finish=function(u){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,p=l/536870912|0,y=l<<3,_=l%128<112?128:256;this._buffer[d]=128;for(var M=d+1;M<_-8;M++)this._buffer[M]=0;e.writeUint32BE(p,this._buffer,_-8),e.writeUint32BE(y,this._buffer,_-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,_),this._finished=!0}for(var M=0;M<this.digestLength/8;M++)e.writeUint32BE(this._stateHi[M],u,M*8),e.writeUint32BE(this._stateLo[M],u,M*8+4);return this},a.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(u){return this._stateHi.set(u.stateHi),this._stateLo.set(u.stateLo),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(u){r.wipe(u.stateHi),r.wipe(u.stateLo),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,u,l,d,p,y,_){for(var M=l[0],O=l[1],L=l[2],B=l[3],k=l[4],H=l[5],U=l[6],z=l[7],Z=d[0],R=d[1],W=d[2],ie=d[3],me=d[4],j=d[5],E=d[6],m=d[7],f,g,v,x,S,A,b,P;_>=128;){for(var I=0;I<16;I++){var F=8*I+y;a[I]=e.readUint32BE(p,F),u[I]=e.readUint32BE(p,F+4)}for(var I=0;I<80;I++){var ce=M,D=O,se=L,ee=B,J=k,Q=H,T=U,X=z,re=Z,ge=R,oe=W,fe=ie,be=me,Me=j,Ne=E,Te=m;if(f=z,g=m,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=(k>>>14|me<<18)^(k>>>18|me<<14)^(me>>>9|k<<23),g=(me>>>14|k<<18)^(me>>>18|k<<14)^(k>>>9|me<<23),S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,f=k&H^~k&U,g=me&j^~me&E,S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,f=i[I*2],g=i[I*2+1],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,f=a[I%16],g=u[I%16],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,v=b&65535|P<<16,x=S&65535|A<<16,f=v,g=x,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=(M>>>28|Z<<4)^(Z>>>2|M<<30)^(Z>>>7|M<<25),g=(Z>>>28|M<<4)^(M>>>2|Z<<30)^(M>>>7|Z<<25),S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,f=M&O^M&L^O&L,g=Z&R^Z&W^R&W,S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,X=b&65535|P<<16,Te=S&65535|A<<16,f=ee,g=fe,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=v,g=x,S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,ee=b&65535|P<<16,fe=S&65535|A<<16,O=ce,L=D,B=se,k=ee,H=J,U=Q,z=T,M=X,R=re,W=ge,ie=oe,me=fe,j=be,E=Me,m=Ne,Z=Te,I%16===15)for(var F=0;F<16;F++)f=a[F],g=u[F],S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=a[(F+9)%16],g=u[(F+9)%16],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,v=a[(F+1)%16],x=u[(F+1)%16],f=(v>>>1|x<<31)^(v>>>8|x<<24)^v>>>7,g=(x>>>1|v<<31)^(x>>>8|v<<24)^(x>>>7|v<<25),S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,v=a[(F+14)%16],x=u[(F+14)%16],f=(v>>>19|x<<13)^(x>>>29|v<<3)^v>>>6,g=(x>>>19|v<<13)^(v>>>29|x<<3)^(x>>>6|v<<26),S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,a[F]=b&65535|P<<16,u[F]=S&65535|A<<16}f=M,g=Z,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[0],g=d[0],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[0]=M=b&65535|P<<16,d[0]=Z=S&65535|A<<16,f=O,g=R,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[1],g=d[1],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[1]=O=b&65535|P<<16,d[1]=R=S&65535|A<<16,f=L,g=W,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[2],g=d[2],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[2]=L=b&65535|P<<16,d[2]=W=S&65535|A<<16,f=B,g=ie,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[3],g=d[3],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[3]=B=b&65535|P<<16,d[3]=ie=S&65535|A<<16,f=k,g=me,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[4],g=d[4],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[4]=k=b&65535|P<<16,d[4]=me=S&65535|A<<16,f=H,g=j,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[5],g=d[5],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[5]=H=b&65535|P<<16,d[5]=j=S&65535|A<<16,f=U,g=E,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[6],g=d[6],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[6]=U=b&65535|P<<16,d[6]=E=S&65535|A<<16,f=z,g=m,S=g&65535,A=g>>>16,b=f&65535,P=f>>>16,f=l[7],g=d[7],S+=g&65535,A+=g>>>16,b+=f&65535,P+=f>>>16,A+=S>>>16,b+=A>>>16,P+=b>>>16,l[7]=z=b&65535|P<<16,d[7]=m=S&65535|A<<16,y+=128,_-=128}return y}function o(a){var u=new n;u.update(a);var l=u.digest();return u.clean(),l}t.hash=o})(Bx),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=sa,r=Bx,n=Mi;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(ee){const J=new Float64Array(16);if(ee)for(let Q=0;Q<ee.length;Q++)J[Q]=ee[Q];return J}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _(ee,J){for(let Q=0;Q<16;Q++)ee[Q]=J[Q]|0}function M(ee){let J=1;for(let Q=0;Q<16;Q++){let T=ee[Q]+J+65535;J=Math.floor(T/65536),ee[Q]=T-J*65536}ee[0]+=J-1+37*(J-1)}function O(ee,J,Q){const T=~(Q-1);for(let X=0;X<16;X++){const re=T&(ee[X]^J[X]);ee[X]^=re,J[X]^=re}}function L(ee,J){const Q=i(),T=i();for(let X=0;X<16;X++)T[X]=J[X];M(T),M(T),M(T);for(let X=0;X<2;X++){Q[0]=T[0]-65517;for(let ge=1;ge<15;ge++)Q[ge]=T[ge]-65535-(Q[ge-1]>>16&1),Q[ge-1]&=65535;Q[15]=T[15]-32767-(Q[14]>>16&1);const re=Q[15]>>16&1;Q[14]&=65535,O(T,Q,1-re)}for(let X=0;X<16;X++)ee[2*X]=T[X]&255,ee[2*X+1]=T[X]>>8}function B(ee,J){let Q=0;for(let T=0;T<32;T++)Q|=ee[T]^J[T];return(1&Q-1>>>8)-1}function k(ee,J){const Q=new Uint8Array(32),T=new Uint8Array(32);return L(Q,ee),L(T,J),B(Q,T)}function H(ee){const J=new Uint8Array(32);return L(J,ee),J[0]&1}function U(ee,J){for(let Q=0;Q<16;Q++)ee[Q]=J[2*Q]+(J[2*Q+1]<<8);ee[15]&=32767}function z(ee,J,Q){for(let T=0;T<16;T++)ee[T]=J[T]+Q[T]}function Z(ee,J,Q){for(let T=0;T<16;T++)ee[T]=J[T]-Q[T]}function R(ee,J,Q){let T,X,re=0,ge=0,oe=0,fe=0,be=0,Me=0,Ne=0,Te=0,$e=0,Ie=0,Le=0,Ve=0,ke=0,ze=0,He=0,Se=0,Qe=0,ct=0,Be=0,et=0,rt=0,Je=0,gt=0,ht=0,ft=0,Ht=0,Jt=0,St=0,er=0,Xt=0,Ot=0,Bt=Q[0],Tt=Q[1],bt=Q[2],Dt=Q[3],Lt=Q[4],yt=Q[5],$t=Q[6],jt=Q[7],nt=Q[8],Ft=Q[9],$=Q[10],K=Q[11],G=Q[12],C=Q[13],Y=Q[14],q=Q[15];T=J[0],re+=T*Bt,ge+=T*Tt,oe+=T*bt,fe+=T*Dt,be+=T*Lt,Me+=T*yt,Ne+=T*$t,Te+=T*jt,$e+=T*nt,Ie+=T*Ft,Le+=T*$,Ve+=T*K,ke+=T*G,ze+=T*C,He+=T*Y,Se+=T*q,T=J[1],ge+=T*Bt,oe+=T*Tt,fe+=T*bt,be+=T*Dt,Me+=T*Lt,Ne+=T*yt,Te+=T*$t,$e+=T*jt,Ie+=T*nt,Le+=T*Ft,Ve+=T*$,ke+=T*K,ze+=T*G,He+=T*C,Se+=T*Y,Qe+=T*q,T=J[2],oe+=T*Bt,fe+=T*Tt,be+=T*bt,Me+=T*Dt,Ne+=T*Lt,Te+=T*yt,$e+=T*$t,Ie+=T*jt,Le+=T*nt,Ve+=T*Ft,ke+=T*$,ze+=T*K,He+=T*G,Se+=T*C,Qe+=T*Y,ct+=T*q,T=J[3],fe+=T*Bt,be+=T*Tt,Me+=T*bt,Ne+=T*Dt,Te+=T*Lt,$e+=T*yt,Ie+=T*$t,Le+=T*jt,Ve+=T*nt,ke+=T*Ft,ze+=T*$,He+=T*K,Se+=T*G,Qe+=T*C,ct+=T*Y,Be+=T*q,T=J[4],be+=T*Bt,Me+=T*Tt,Ne+=T*bt,Te+=T*Dt,$e+=T*Lt,Ie+=T*yt,Le+=T*$t,Ve+=T*jt,ke+=T*nt,ze+=T*Ft,He+=T*$,Se+=T*K,Qe+=T*G,ct+=T*C,Be+=T*Y,et+=T*q,T=J[5],Me+=T*Bt,Ne+=T*Tt,Te+=T*bt,$e+=T*Dt,Ie+=T*Lt,Le+=T*yt,Ve+=T*$t,ke+=T*jt,ze+=T*nt,He+=T*Ft,Se+=T*$,Qe+=T*K,ct+=T*G,Be+=T*C,et+=T*Y,rt+=T*q,T=J[6],Ne+=T*Bt,Te+=T*Tt,$e+=T*bt,Ie+=T*Dt,Le+=T*Lt,Ve+=T*yt,ke+=T*$t,ze+=T*jt,He+=T*nt,Se+=T*Ft,Qe+=T*$,ct+=T*K,Be+=T*G,et+=T*C,rt+=T*Y,Je+=T*q,T=J[7],Te+=T*Bt,$e+=T*Tt,Ie+=T*bt,Le+=T*Dt,Ve+=T*Lt,ke+=T*yt,ze+=T*$t,He+=T*jt,Se+=T*nt,Qe+=T*Ft,ct+=T*$,Be+=T*K,et+=T*G,rt+=T*C,Je+=T*Y,gt+=T*q,T=J[8],$e+=T*Bt,Ie+=T*Tt,Le+=T*bt,Ve+=T*Dt,ke+=T*Lt,ze+=T*yt,He+=T*$t,Se+=T*jt,Qe+=T*nt,ct+=T*Ft,Be+=T*$,et+=T*K,rt+=T*G,Je+=T*C,gt+=T*Y,ht+=T*q,T=J[9],Ie+=T*Bt,Le+=T*Tt,Ve+=T*bt,ke+=T*Dt,ze+=T*Lt,He+=T*yt,Se+=T*$t,Qe+=T*jt,ct+=T*nt,Be+=T*Ft,et+=T*$,rt+=T*K,Je+=T*G,gt+=T*C,ht+=T*Y,ft+=T*q,T=J[10],Le+=T*Bt,Ve+=T*Tt,ke+=T*bt,ze+=T*Dt,He+=T*Lt,Se+=T*yt,Qe+=T*$t,ct+=T*jt,Be+=T*nt,et+=T*Ft,rt+=T*$,Je+=T*K,gt+=T*G,ht+=T*C,ft+=T*Y,Ht+=T*q,T=J[11],Ve+=T*Bt,ke+=T*Tt,ze+=T*bt,He+=T*Dt,Se+=T*Lt,Qe+=T*yt,ct+=T*$t,Be+=T*jt,et+=T*nt,rt+=T*Ft,Je+=T*$,gt+=T*K,ht+=T*G,ft+=T*C,Ht+=T*Y,Jt+=T*q,T=J[12],ke+=T*Bt,ze+=T*Tt,He+=T*bt,Se+=T*Dt,Qe+=T*Lt,ct+=T*yt,Be+=T*$t,et+=T*jt,rt+=T*nt,Je+=T*Ft,gt+=T*$,ht+=T*K,ft+=T*G,Ht+=T*C,Jt+=T*Y,St+=T*q,T=J[13],ze+=T*Bt,He+=T*Tt,Se+=T*bt,Qe+=T*Dt,ct+=T*Lt,Be+=T*yt,et+=T*$t,rt+=T*jt,Je+=T*nt,gt+=T*Ft,ht+=T*$,ft+=T*K,Ht+=T*G,Jt+=T*C,St+=T*Y,er+=T*q,T=J[14],He+=T*Bt,Se+=T*Tt,Qe+=T*bt,ct+=T*Dt,Be+=T*Lt,et+=T*yt,rt+=T*$t,Je+=T*jt,gt+=T*nt,ht+=T*Ft,ft+=T*$,Ht+=T*K,Jt+=T*G,St+=T*C,er+=T*Y,Xt+=T*q,T=J[15],Se+=T*Bt,Qe+=T*Tt,ct+=T*bt,Be+=T*Dt,et+=T*Lt,rt+=T*yt,Je+=T*$t,gt+=T*jt,ht+=T*nt,ft+=T*Ft,Ht+=T*$,Jt+=T*K,St+=T*G,er+=T*C,Xt+=T*Y,Ot+=T*q,re+=38*Qe,ge+=38*ct,oe+=38*Be,fe+=38*et,be+=38*rt,Me+=38*Je,Ne+=38*gt,Te+=38*ht,$e+=38*ft,Ie+=38*Ht,Le+=38*Jt,Ve+=38*St,ke+=38*er,ze+=38*Xt,He+=38*Ot,X=1,T=re+X+65535,X=Math.floor(T/65536),re=T-X*65536,T=ge+X+65535,X=Math.floor(T/65536),ge=T-X*65536,T=oe+X+65535,X=Math.floor(T/65536),oe=T-X*65536,T=fe+X+65535,X=Math.floor(T/65536),fe=T-X*65536,T=be+X+65535,X=Math.floor(T/65536),be=T-X*65536,T=Me+X+65535,X=Math.floor(T/65536),Me=T-X*65536,T=Ne+X+65535,X=Math.floor(T/65536),Ne=T-X*65536,T=Te+X+65535,X=Math.floor(T/65536),Te=T-X*65536,T=$e+X+65535,X=Math.floor(T/65536),$e=T-X*65536,T=Ie+X+65535,X=Math.floor(T/65536),Ie=T-X*65536,T=Le+X+65535,X=Math.floor(T/65536),Le=T-X*65536,T=Ve+X+65535,X=Math.floor(T/65536),Ve=T-X*65536,T=ke+X+65535,X=Math.floor(T/65536),ke=T-X*65536,T=ze+X+65535,X=Math.floor(T/65536),ze=T-X*65536,T=He+X+65535,X=Math.floor(T/65536),He=T-X*65536,T=Se+X+65535,X=Math.floor(T/65536),Se=T-X*65536,re+=X-1+37*(X-1),X=1,T=re+X+65535,X=Math.floor(T/65536),re=T-X*65536,T=ge+X+65535,X=Math.floor(T/65536),ge=T-X*65536,T=oe+X+65535,X=Math.floor(T/65536),oe=T-X*65536,T=fe+X+65535,X=Math.floor(T/65536),fe=T-X*65536,T=be+X+65535,X=Math.floor(T/65536),be=T-X*65536,T=Me+X+65535,X=Math.floor(T/65536),Me=T-X*65536,T=Ne+X+65535,X=Math.floor(T/65536),Ne=T-X*65536,T=Te+X+65535,X=Math.floor(T/65536),Te=T-X*65536,T=$e+X+65535,X=Math.floor(T/65536),$e=T-X*65536,T=Ie+X+65535,X=Math.floor(T/65536),Ie=T-X*65536,T=Le+X+65535,X=Math.floor(T/65536),Le=T-X*65536,T=Ve+X+65535,X=Math.floor(T/65536),Ve=T-X*65536,T=ke+X+65535,X=Math.floor(T/65536),ke=T-X*65536,T=ze+X+65535,X=Math.floor(T/65536),ze=T-X*65536,T=He+X+65535,X=Math.floor(T/65536),He=T-X*65536,T=Se+X+65535,X=Math.floor(T/65536),Se=T-X*65536,re+=X-1+37*(X-1),ee[0]=re,ee[1]=ge,ee[2]=oe,ee[3]=fe,ee[4]=be,ee[5]=Me,ee[6]=Ne,ee[7]=Te,ee[8]=$e,ee[9]=Ie,ee[10]=Le,ee[11]=Ve,ee[12]=ke,ee[13]=ze,ee[14]=He,ee[15]=Se}function W(ee,J){R(ee,J,J)}function ie(ee,J){const Q=i();let T;for(T=0;T<16;T++)Q[T]=J[T];for(T=253;T>=0;T--)W(Q,Q),T!==2&&T!==4&&R(Q,Q,J);for(T=0;T<16;T++)ee[T]=Q[T]}function me(ee,J){const Q=i();let T;for(T=0;T<16;T++)Q[T]=J[T];for(T=250;T>=0;T--)W(Q,Q),T!==1&&R(Q,Q,J);for(T=0;T<16;T++)ee[T]=Q[T]}function j(ee,J){const Q=i(),T=i(),X=i(),re=i(),ge=i(),oe=i(),fe=i(),be=i(),Me=i();Z(Q,ee[1],ee[0]),Z(Me,J[1],J[0]),R(Q,Q,Me),z(T,ee[0],ee[1]),z(Me,J[0],J[1]),R(T,T,Me),R(X,ee[3],J[3]),R(X,X,l),R(re,ee[2],J[2]),z(re,re,re),Z(ge,T,Q),Z(oe,re,X),z(fe,re,X),z(be,T,Q),R(ee[0],ge,oe),R(ee[1],be,fe),R(ee[2],fe,oe),R(ee[3],ge,be)}function E(ee,J,Q){for(let T=0;T<4;T++)O(ee[T],J[T],Q)}function m(ee,J){const Q=i(),T=i(),X=i();ie(X,J[2]),R(Q,J[0],X),R(T,J[1],X),L(ee,T),ee[31]^=H(Q)<<7}function f(ee,J,Q){_(ee[0],o),_(ee[1],a),_(ee[2],a),_(ee[3],o);for(let T=255;T>=0;--T){const X=Q[T/8|0]>>(T&7)&1;E(ee,J,X),j(J,ee),j(ee,ee),E(ee,J,X)}}function g(ee,J){const Q=[i(),i(),i(),i()];_(Q[0],d),_(Q[1],p),_(Q[2],a),R(Q[3],d,p),f(ee,Q,J)}function v(ee){if(ee.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const J=(0,r.hash)(ee);J[0]&=248,J[31]&=127,J[31]|=64;const Q=new Uint8Array(32),T=[i(),i(),i(),i()];g(T,J),m(Q,T);const X=new Uint8Array(64);return X.set(ee),X.set(Q,32),{publicKey:Q,secretKey:X}}t.generateKeyPairFromSeed=v;function x(ee){const J=(0,e.randomBytes)(32,ee),Q=v(J);return(0,n.wipe)(J),Q}t.generateKeyPair=x;function S(ee){if(ee.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(ee.subarray(32))}t.extractPublicKeyFromSecretKey=S;const A=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function b(ee,J){let Q,T,X,re;for(T=63;T>=32;--T){for(Q=0,X=T-32,re=T-12;X<re;++X)J[X]+=Q-16*J[T]*A[X-(T-32)],Q=Math.floor((J[X]+128)/256),J[X]-=Q*256;J[X]+=Q,J[T]=0}for(Q=0,X=0;X<32;X++)J[X]+=Q-(J[31]>>4)*A[X],Q=J[X]>>8,J[X]&=255;for(X=0;X<32;X++)J[X]-=Q*A[X];for(T=0;T<32;T++)J[T+1]+=J[T]>>8,ee[T]=J[T]&255}function P(ee){const J=new Float64Array(64);for(let Q=0;Q<64;Q++)J[Q]=ee[Q];for(let Q=0;Q<64;Q++)ee[Q]=0;b(ee,J)}function I(ee,J){const Q=new Float64Array(64),T=[i(),i(),i(),i()],X=(0,r.hash)(ee.subarray(0,32));X[0]&=248,X[31]&=127,X[31]|=64;const re=new Uint8Array(64);re.set(X.subarray(32),32);const ge=new r.SHA512;ge.update(re.subarray(32)),ge.update(J);const oe=ge.digest();ge.clean(),P(oe),g(T,oe),m(re,T),ge.reset(),ge.update(re.subarray(0,32)),ge.update(ee.subarray(32)),ge.update(J);const fe=ge.digest();P(fe);for(let be=0;be<32;be++)Q[be]=oe[be];for(let be=0;be<32;be++)for(let Me=0;Me<32;Me++)Q[be+Me]+=fe[be]*X[Me];return b(re.subarray(32),Q),re}t.sign=I;function F(ee,J){const Q=i(),T=i(),X=i(),re=i(),ge=i(),oe=i(),fe=i();return _(ee[2],a),U(ee[1],J),W(X,ee[1]),R(re,X,u),Z(X,X,ee[2]),z(re,ee[2],re),W(ge,re),W(oe,ge),R(fe,oe,ge),R(Q,fe,X),R(Q,Q,re),me(Q,Q),R(Q,Q,X),R(Q,Q,re),R(Q,Q,re),R(ee[0],Q,re),W(T,ee[0]),R(T,T,re),k(T,X)&&R(ee[0],ee[0],y),W(T,ee[0]),R(T,T,re),k(T,X)?-1:(H(ee[0])===J[31]>>7&&Z(ee[0],o,ee[0]),R(ee[3],ee[0],ee[1]),0)}function ce(ee,J,Q){const T=new Uint8Array(32),X=[i(),i(),i(),i()],re=[i(),i(),i(),i()];if(Q.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(F(re,ee))return!1;const ge=new r.SHA512;ge.update(Q.subarray(0,32)),ge.update(ee),ge.update(J);const oe=ge.digest();return P(oe),f(X,re,oe),g(re,Q.subarray(32)),j(X,re),m(T,X),!B(Q,T)}t.verify=ce;function D(ee){let J=[i(),i(),i(),i()];if(F(J,ee))throw new Error("Ed25519: invalid public key");let Q=i(),T=i(),X=J[1];z(Q,a,X),Z(T,a,X),ie(T,T),R(Q,Q,T);let re=new Uint8Array(32);return L(re,Q),re}t.convertPublicKeyToX25519=D;function se(ee){const J=(0,r.hash)(ee.subarray(0,32));J[0]&=248,J[31]&=127,J[31]|=64;const Q=new Uint8Array(J.subarray(0,32));return(0,n.wipe)(J),Q}t.convertSecretKeyToX25519=se}(bm);const nO="EdDSA",iO="JWT",Sd=".",Ad="base64url",$x="utf8",Fx="utf8",sO=":",oO="did",aO="key",jx="base58btc",cO="z",uO="K36",fO=32;function Ux(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Pd(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Ux(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function lO(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function p(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var O=0,L=0,B=0,k=M.length;B!==k&&M[B]===0;)B++,O++;for(var H=(k-B)*d+1>>>0,U=new Uint8Array(H);B!==k;){for(var z=M[B],Z=0,R=H-1;(z!==0||Z<L)&&R!==-1;R--,Z++)z+=256*U[R]>>>0,U[R]=z%a>>>0,z=z/a>>>0;if(z!==0)throw new Error("Non-zero carry");L=Z,B++}for(var W=H-L;W!==H&&U[W]===0;)W++;for(var ie=u.repeat(O);W<H;++W)ie+=t.charAt(U[W]);return ie}function y(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var O=0;if(M[O]!==" "){for(var L=0,B=0;M[O]===u;)L++,O++;for(var k=(M.length-O)*l+1>>>0,H=new Uint8Array(k);M[O];){var U=r[M.charCodeAt(O)];if(U===255)return;for(var z=0,Z=k-1;(U!==0||z<B)&&Z!==-1;Z--,z++)U+=a*H[Z]>>>0,H[Z]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");B=z,O++}if(M[O]!==" "){for(var R=k-B;R!==k&&H[R]===0;)R++;for(var W=new Uint8Array(L+(k-R)),ie=L;R!==k;)W[ie++]=H[R++];return W}}}function _(M){var O=y(M);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:y,decode:_}}var hO=lO,dO=hO;const pO=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},gO=t=>new TextEncoder().encode(t),mO=t=>new TextDecoder().decode(t);class vO{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class bO{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qx(this,e)}}class yO{constructor(e){this.decoders=e}or(e){return qx(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qx=(t,e)=>new yO({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class wO{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new vO(e,r,n),this.decoder=new bO(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Md=({name:t,prefix:e,encode:r,decode:n})=>new wO(t,e,r,n),sl=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=dO(r,e);return Md({prefix:t,name:e,encode:n,decode:s=>pO(i(s))})},xO=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,u=0,l=0;for(let d=0;d<s;++d){const p=i[t[d]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},_O=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Bn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Md({prefix:e,name:t,encode(i){return _O(i,n,r)},decode(i){return xO(i,n,r,t)}}),EO=Md({prefix:"\0",name:"identity",encode:t=>mO(t),decode:t=>gO(t)}),SO=Object.freeze(Object.defineProperty({__proto__:null,identity:EO},Symbol.toStringTag,{value:"Module"})),AO=Bn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),PO=Object.freeze(Object.defineProperty({__proto__:null,base2:AO},Symbol.toStringTag,{value:"Module"})),MO=Bn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),IO=Object.freeze(Object.defineProperty({__proto__:null,base8:MO},Symbol.toStringTag,{value:"Module"})),CO=sl({prefix:"9",name:"base10",alphabet:"0123456789"}),TO=Object.freeze(Object.defineProperty({__proto__:null,base10:CO},Symbol.toStringTag,{value:"Module"})),RO=Bn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),DO=Bn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),OO=Object.freeze(Object.defineProperty({__proto__:null,base16:RO,base16upper:DO},Symbol.toStringTag,{value:"Module"})),NO=Bn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),LO=Bn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kO=Bn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),BO=Bn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$O=Bn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),FO=Bn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jO=Bn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),UO=Bn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qO=Bn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),zO=Object.freeze(Object.defineProperty({__proto__:null,base32:NO,base32hex:$O,base32hexpad:jO,base32hexpadupper:UO,base32hexupper:FO,base32pad:kO,base32padupper:BO,base32upper:LO,base32z:qO},Symbol.toStringTag,{value:"Module"})),HO=sl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),WO=sl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),KO=Object.freeze(Object.defineProperty({__proto__:null,base36:HO,base36upper:WO},Symbol.toStringTag,{value:"Module"})),VO=sl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),GO=sl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),YO=Object.freeze(Object.defineProperty({__proto__:null,base58btc:VO,base58flickr:GO},Symbol.toStringTag,{value:"Module"})),JO=Bn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),XO=Bn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ZO=Bn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),QO=Bn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),eN=Object.freeze(Object.defineProperty({__proto__:null,base64:JO,base64pad:XO,base64url:ZO,base64urlpad:QO},Symbol.toStringTag,{value:"Module"})),zx=Array.from(""),tN=zx.reduce((t,e,r)=>(t[r]=e,t),[]),rN=zx.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function nN(t){return t.reduce((e,r)=>(e+=tN[r],e),"")}function iN(t){const e=[];for(const r of t){const n=rN[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const sN=Md({prefix:"",name:"base256emoji",encode:nN,decode:iN}),oN=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:sN},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const Hx={...SO,...PO,...IO,...TO,...OO,...zO,...KO,...YO,...eN,...oN};function Wx(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Kx=Wx("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Em=Wx("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ux(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Vx={utf8:Kx,"utf-8":Kx,hex:Hx.base16,latin1:Em,ascii:Em,binary:Em,...Hx};function In(t,e="utf8"){const r=Vx[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Cn(t,e="utf8"){const r=Vx[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Gx(t){return Za(In(Cn(t,Ad),$x))}function Id(t){return In(Cn(mo(t),$x),Ad)}function Yx(t){const e=Cn(uO,jx),r=cO+In(Pd([e,t]),jx);return[oO,aO,r].join(sO)}function aN(t){return In(t,Ad)}function cN(t){return Cn(t,Ad)}function uN(t){return Cn([Id(t.header),Id(t.payload)].join(Sd),Fx)}function fN(t){return[Id(t.header),Id(t.payload),aN(t.signature)].join(Sd)}function Sm(t){const e=t.split(Sd),r=Gx(e[0]),n=Gx(e[1]),i=cN(e[2]),s=Cn(e.slice(0,2).join(Sd),Fx);return{header:r,payload:n,signature:i,data:s}}function Jx(t=sa.randomBytes(fO)){return bm.generateKeyPairFromSeed(t)}async function lN(t,e,r,n,i=vt.fromMiliseconds(Date.now())){const s={alg:nO,typ:iO},o=Yx(n.publicKey),a=i+r,u={iss:o,sub:t,aud:e,iat:i,exp:a},l=uN({header:s,payload:u}),d=bm.sign(n.secretKey,l);return fN({header:s,payload:u,signature:d})}var Xx=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},hN=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),dN=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),pN=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),gN=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),mN=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),vN=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,bN=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Zx=3,yN=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",vN]],Qx=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function wN(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new mN:typeof navigator<"u"?_N(navigator.userAgent):SN()}function xN(t){return t!==""&&yN.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function _N(t){var e=xN(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new gN;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Zx&&(i=Xx(Xx([],i,!0),AN(Zx-i.length),!0)):i=[];var s=i.join("."),o=EN(t),a=bN.exec(t);return a&&a[1]?new pN(r,s,o,a[1]):new hN(r,s,o)}function EN(t){for(var e=0,r=Qx.length;e<r;e++){var n=Qx[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function SN(){var t=typeof process<"u"&&process.version;return t?new dN(process.version.slice(1)):null}function AN(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var zr={};Object.defineProperty(zr,"__esModule",{value:!0}),zr.getLocalStorage=zr.getLocalStorageOrThrow=zr.getCrypto=zr.getCryptoOrThrow=e3=zr.getLocation=zr.getLocationOrThrow=Am=zr.getNavigator=zr.getNavigatorOrThrow=ol=zr.getDocument=zr.getDocumentOrThrow=zr.getFromWindowOrThrow=zr.getFromWindow=void 0;function Qa(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}zr.getFromWindow=Qa;function uu(t){const e=Qa(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}zr.getFromWindowOrThrow=uu;function PN(){return uu("document")}zr.getDocumentOrThrow=PN;function MN(){return Qa("document")}var ol=zr.getDocument=MN;function IN(){return uu("navigator")}zr.getNavigatorOrThrow=IN;function CN(){return Qa("navigator")}var Am=zr.getNavigator=CN;function TN(){return uu("location")}zr.getLocationOrThrow=TN;function RN(){return Qa("location")}var e3=zr.getLocation=RN;function DN(){return uu("crypto")}zr.getCryptoOrThrow=DN;function ON(){return Qa("crypto")}zr.getCrypto=ON;function NN(){return uu("localStorage")}zr.getLocalStorageOrThrow=NN;function LN(){return Qa("localStorage")}zr.getLocalStorage=LN;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});var t3=Pm.getWindowMetadata=void 0;const r3=zr;function kN(){let t,e;try{t=r3.getDocumentOrThrow(),e=r3.getLocationOrThrow()}catch{return null}function r(){const p=t.getElementsByTagName("link"),y=[];for(let _=0;_<p.length;_++){const M=p[_],O=M.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const L=M.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let B=e.protocol+"//"+e.host;if(L.indexOf("/")===0)B+=L;else{const k=e.pathname.split("/");k.pop();const H=k.join("/");B+=H+"/"+L}y.push(B)}else if(L.indexOf("//")===0){const B=e.protocol+L;y.push(B)}else y.push(L)}}return y}function n(...p){const y=t.getElementsByTagName("meta");for(let _=0;_<y.length;_++){const M=y[_],O=["itemprop","property","name"].map(L=>M.getAttribute(L)).filter(L=>L?p.includes(L):!1);if(O.length&&O){const L=M.getAttribute("content");if(L)return L}}return""}function i(){let p=n("name","og:site_name","og:title","twitter:title");return p||(p=t.title),p}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),u=e.origin,l=r();return{description:a,url:u,icons:l,name:o}}t3=Pm.getWindowMetadata=kN;var al={},BN=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),n3="%[a-f0-9]{2}",i3=new RegExp("("+n3+")|([^%]+?)","gi"),s3=new RegExp("("+n3+")+","gi");function Mm(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Mm(r),Mm(n))}function $N(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(i3)||[],r=1;r<e.length;r++)t=Mm(e,r).join(""),e=t.match(i3)||[];return t}}function FN(t){for(var e={"%FE%FF":"","%FF%FE":""},r=s3.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=$N(r[0]);n!==r[0]&&(e[r[0]]=n)}r=s3.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var jN=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return FN(t)}},UN=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},qN=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=BN,r=jN,n=UN,i=qN,s=k=>k==null,o=Symbol("encodeFragmentIdentifier");function a(k){switch(k.arrayFormat){case"index":return H=>(U,z)=>{const Z=U.length;return z===void 0||k.skipNull&&z===null||k.skipEmptyString&&z===""?U:z===null?[...U,[d(H,k),"[",Z,"]"].join("")]:[...U,[d(H,k),"[",d(Z,k),"]=",d(z,k)].join("")]};case"bracket":return H=>(U,z)=>z===void 0||k.skipNull&&z===null||k.skipEmptyString&&z===""?U:z===null?[...U,[d(H,k),"[]"].join("")]:[...U,[d(H,k),"[]=",d(z,k)].join("")];case"colon-list-separator":return H=>(U,z)=>z===void 0||k.skipNull&&z===null||k.skipEmptyString&&z===""?U:z===null?[...U,[d(H,k),":list="].join("")]:[...U,[d(H,k),":list=",d(z,k)].join("")];case"comma":case"separator":case"bracket-separator":{const H=k.arrayFormat==="bracket-separator"?"[]=":"=";return U=>(z,Z)=>Z===void 0||k.skipNull&&Z===null||k.skipEmptyString&&Z===""?z:(Z=Z===null?"":Z,z.length===0?[[d(U,k),H,d(Z,k)].join("")]:[[z,d(Z,k)].join(k.arrayFormatSeparator)])}default:return H=>(U,z)=>z===void 0||k.skipNull&&z===null||k.skipEmptyString&&z===""?U:z===null?[...U,d(H,k)]:[...U,[d(H,k),"=",d(z,k)].join("")]}}function u(k){let H;switch(k.arrayFormat){case"index":return(U,z,Z)=>{if(H=/\[(\d*)\]$/.exec(U),U=U.replace(/\[\d*\]$/,""),!H){Z[U]=z;return}Z[U]===void 0&&(Z[U]={}),Z[U][H[1]]=z};case"bracket":return(U,z,Z)=>{if(H=/(\[\])$/.exec(U),U=U.replace(/\[\]$/,""),!H){Z[U]=z;return}if(Z[U]===void 0){Z[U]=[z];return}Z[U]=[].concat(Z[U],z)};case"colon-list-separator":return(U,z,Z)=>{if(H=/(:list)$/.exec(U),U=U.replace(/:list$/,""),!H){Z[U]=z;return}if(Z[U]===void 0){Z[U]=[z];return}Z[U]=[].concat(Z[U],z)};case"comma":case"separator":return(U,z,Z)=>{const R=typeof z=="string"&&z.includes(k.arrayFormatSeparator),W=typeof z=="string"&&!R&&p(z,k).includes(k.arrayFormatSeparator);z=W?p(z,k):z;const ie=R||W?z.split(k.arrayFormatSeparator).map(me=>p(me,k)):z===null?z:p(z,k);Z[U]=ie};case"bracket-separator":return(U,z,Z)=>{const R=/(\[\])$/.test(U);if(U=U.replace(/\[\]$/,""),!R){Z[U]=z&&p(z,k);return}const W=z===null?[]:z.split(k.arrayFormatSeparator).map(ie=>p(ie,k));if(Z[U]===void 0){Z[U]=W;return}Z[U]=[].concat(Z[U],W)};default:return(U,z,Z)=>{if(Z[U]===void 0){Z[U]=z;return}Z[U]=[].concat(Z[U],z)}}}function l(k){if(typeof k!="string"||k.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(k,H){return H.encode?H.strict?e(k):encodeURIComponent(k):k}function p(k,H){return H.decode?r(k):k}function y(k){return Array.isArray(k)?k.sort():typeof k=="object"?y(Object.keys(k)).sort((H,U)=>Number(H)-Number(U)).map(H=>k[H]):k}function _(k){const H=k.indexOf("#");return H!==-1&&(k=k.slice(0,H)),k}function M(k){let H="";const U=k.indexOf("#");return U!==-1&&(H=k.slice(U)),H}function O(k){k=_(k);const H=k.indexOf("?");return H===-1?"":k.slice(H+1)}function L(k,H){return H.parseNumbers&&!Number.isNaN(Number(k))&&typeof k=="string"&&k.trim()!==""?k=Number(k):H.parseBooleans&&k!==null&&(k.toLowerCase()==="true"||k.toLowerCase()==="false")&&(k=k.toLowerCase()==="true"),k}function B(k,H){H=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},H),l(H.arrayFormatSeparator);const U=u(H),z=Object.create(null);if(typeof k!="string"||(k=k.trim().replace(/^[?#&]/,""),!k))return z;for(const Z of k.split("&")){if(Z==="")continue;let[R,W]=n(H.decode?Z.replace(/\+/g," "):Z,"=");W=W===void 0?null:["comma","separator","bracket-separator"].includes(H.arrayFormat)?W:p(W,H),U(p(R,H),W,z)}for(const Z of Object.keys(z)){const R=z[Z];if(typeof R=="object"&&R!==null)for(const W of Object.keys(R))R[W]=L(R[W],H);else z[Z]=L(R,H)}return H.sort===!1?z:(H.sort===!0?Object.keys(z).sort():Object.keys(z).sort(H.sort)).reduce((Z,R)=>{const W=z[R];return W&&typeof W=="object"&&!Array.isArray(W)?Z[R]=y(W):Z[R]=W,Z},Object.create(null))}t.extract=O,t.parse=B,t.stringify=(k,H)=>{if(!k)return"";H=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},H),l(H.arrayFormatSeparator);const U=W=>H.skipNull&&s(k[W])||H.skipEmptyString&&k[W]==="",z=a(H),Z={};for(const W of Object.keys(k))U(W)||(Z[W]=k[W]);const R=Object.keys(Z);return H.sort!==!1&&R.sort(H.sort),R.map(W=>{const ie=k[W];return ie===void 0?"":ie===null?d(W,H):Array.isArray(ie)?ie.length===0&&H.arrayFormat==="bracket-separator"?d(W,H)+"[]":ie.reduce(z(W),[]).join("&"):d(W,H)+"="+d(ie,H)}).filter(W=>W.length>0).join("&")},t.parseUrl=(k,H)=>{H=Object.assign({decode:!0},H);const[U,z]=n(k,"#");return Object.assign({url:U.split("?")[0]||"",query:B(O(k),H)},H&&H.parseFragmentIdentifier&&z?{fragmentIdentifier:p(z,H)}:{})},t.stringifyUrl=(k,H)=>{H=Object.assign({encode:!0,strict:!0,[o]:!0},H);const U=_(k.url).split("?")[0]||"",z=t.extract(k.url),Z=t.parse(z,{sort:!1}),R=Object.assign(Z,k.query);let W=t.stringify(R,H);W&&(W=`?${W}`);let ie=M(k.url);return k.fragmentIdentifier&&(ie=`#${H[o]?d(k.fragmentIdentifier,H):k.fragmentIdentifier}`),`${U}${W}${ie}`},t.pick=(k,H,U)=>{U=Object.assign({parseFragmentIdentifier:!0,[o]:!1},U);const{url:z,query:Z,fragmentIdentifier:R}=t.parseUrl(k,U);return t.stringifyUrl({url:z,query:i(Z,H),fragmentIdentifier:R},U)},t.exclude=(k,H,U)=>{const z=Array.isArray(H)?Z=>!H.includes(Z):(Z,R)=>!H(Z,R);return t.pick(k,z,U)}})(al);var o3={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=nn:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,u=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),d=[31,7936,2031616,520093696],p=[4,1024,262144,67108864],y=[1,256,65536,16777216],_=[6,1536,393216,100663296],M=[0,8,16,24],O=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],L=[224,256,384,512],B=[128,256],k=["hex","buffer","arrayBuffer","array","digest"],H={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(D){return Object.prototype.toString.call(D)==="[object Array]"}),u&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(D){return typeof D=="object"&&D.buffer&&D.buffer.constructor===ArrayBuffer});for(var U=function(D,se,ee){return function(J){return new I(D,se,D).update(J)[ee]()}},z=function(D,se,ee){return function(J,Q){return new I(D,se,Q).update(J)[ee]()}},Z=function(D,se,ee){return function(J,Q,T,X){return f["cshake"+D].update(J,Q,T,X)[ee]()}},R=function(D,se,ee){return function(J,Q,T,X){return f["kmac"+D].update(J,Q,T,X)[ee]()}},W=function(D,se,ee,J){for(var Q=0;Q<k.length;++Q){var T=k[Q];D[T]=se(ee,J,T)}return D},ie=function(D,se){var ee=U(D,se,"hex");return ee.create=function(){return new I(D,se,D)},ee.update=function(J){return ee.create().update(J)},W(ee,U,D,se)},me=function(D,se){var ee=z(D,se,"hex");return ee.create=function(J){return new I(D,se,J)},ee.update=function(J,Q){return ee.create(Q).update(J)},W(ee,z,D,se)},j=function(D,se){var ee=H[D],J=Z(D,se,"hex");return J.create=function(Q,T,X){return!T&&!X?f["shake"+D].create(Q):new I(D,se,Q).bytepad([T,X],ee)},J.update=function(Q,T,X,re){return J.create(T,X,re).update(Q)},W(J,Z,D,se)},E=function(D,se){var ee=H[D],J=R(D,se,"hex");return J.create=function(Q,T,X){return new F(D,se,T).bytepad(["KMAC",X],ee).bytepad([Q],ee)},J.update=function(Q,T,X,re){return J.create(Q,X,re).update(T)},W(J,R,D,se)},m=[{name:"keccak",padding:y,bits:L,createMethod:ie},{name:"sha3",padding:_,bits:L,createMethod:ie},{name:"shake",padding:d,bits:B,createMethod:me},{name:"cshake",padding:p,bits:B,createMethod:j},{name:"kmac",padding:p,bits:B,createMethod:E}],f={},g=[],v=0;v<m.length;++v)for(var x=m[v],S=x.bits,A=0;A<S.length;++A){var b=x.name+"_"+S[A];if(g.push(b),f[b]=x.createMethod(S[A],x.padding),x.name!=="sha3"){var P=x.name+S[A];g.push(P),f[P]=f[b]}}function I(D,se,ee){this.blocks=[],this.s=[],this.padding=se,this.outputBits=ee,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(D<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ee>>5,this.extraBytes=(ee&31)>>3;for(var J=0;J<50;++J)this.s[J]=0}I.prototype.update=function(D){if(this.finalized)throw new Error(r);var se,ee=typeof D;if(ee!=="string"){if(ee==="object"){if(D===null)throw new Error(e);if(u&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!u||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);se=!0}for(var J=this.blocks,Q=this.byteCount,T=D.length,X=this.blockCount,re=0,ge=this.s,oe,fe;re<T;){if(this.reset)for(this.reset=!1,J[0]=this.block,oe=1;oe<X+1;++oe)J[oe]=0;if(se)for(oe=this.start;re<T&&oe<Q;++re)J[oe>>2]|=D[re]<<M[oe++&3];else for(oe=this.start;re<T&&oe<Q;++re)fe=D.charCodeAt(re),fe<128?J[oe>>2]|=fe<<M[oe++&3]:fe<2048?(J[oe>>2]|=(192|fe>>6)<<M[oe++&3],J[oe>>2]|=(128|fe&63)<<M[oe++&3]):fe<55296||fe>=57344?(J[oe>>2]|=(224|fe>>12)<<M[oe++&3],J[oe>>2]|=(128|fe>>6&63)<<M[oe++&3],J[oe>>2]|=(128|fe&63)<<M[oe++&3]):(fe=65536+((fe&1023)<<10|D.charCodeAt(++re)&1023),J[oe>>2]|=(240|fe>>18)<<M[oe++&3],J[oe>>2]|=(128|fe>>12&63)<<M[oe++&3],J[oe>>2]|=(128|fe>>6&63)<<M[oe++&3],J[oe>>2]|=(128|fe&63)<<M[oe++&3]);if(this.lastByteIndex=oe,oe>=Q){for(this.start=oe-Q,this.block=J[X],oe=0;oe<X;++oe)ge[oe]^=J[oe];ce(ge),this.reset=!0}else this.start=oe}return this},I.prototype.encode=function(D,se){var ee=D&255,J=1,Q=[ee];for(D=D>>8,ee=D&255;ee>0;)Q.unshift(ee),D=D>>8,ee=D&255,++J;return se?Q.push(J):Q.unshift(J),this.update(Q),Q.length},I.prototype.encodeString=function(D){var se,ee=typeof D;if(ee!=="string"){if(ee==="object"){if(D===null)throw new Error(e);if(u&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!u||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);se=!0}var J=0,Q=D.length;if(se)J=Q;else for(var T=0;T<D.length;++T){var X=D.charCodeAt(T);X<128?J+=1:X<2048?J+=2:X<55296||X>=57344?J+=3:(X=65536+((X&1023)<<10|D.charCodeAt(++T)&1023),J+=4)}return J+=this.encode(J*8),this.update(D),J},I.prototype.bytepad=function(D,se){for(var ee=this.encode(se),J=0;J<D.length;++J)ee+=this.encodeString(D[J]);var Q=se-ee%se,T=[];return T.length=Q,this.update(T),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var D=this.blocks,se=this.lastByteIndex,ee=this.blockCount,J=this.s;if(D[se>>2]|=this.padding[se&3],this.lastByteIndex===this.byteCount)for(D[0]=D[ee],se=1;se<ee+1;++se)D[se]=0;for(D[ee-1]|=2147483648,se=0;se<ee;++se)J[se]^=D[se];ce(J)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var D=this.blockCount,se=this.s,ee=this.outputBlocks,J=this.extraBytes,Q=0,T=0,X="",re;T<ee;){for(Q=0;Q<D&&T<ee;++Q,++T)re=se[Q],X+=l[re>>4&15]+l[re&15]+l[re>>12&15]+l[re>>8&15]+l[re>>20&15]+l[re>>16&15]+l[re>>28&15]+l[re>>24&15];T%D===0&&(ce(se),Q=0)}return J&&(re=se[Q],X+=l[re>>4&15]+l[re&15],J>1&&(X+=l[re>>12&15]+l[re>>8&15]),J>2&&(X+=l[re>>20&15]+l[re>>16&15])),X},I.prototype.arrayBuffer=function(){this.finalize();var D=this.blockCount,se=this.s,ee=this.outputBlocks,J=this.extraBytes,Q=0,T=0,X=this.outputBits>>3,re;J?re=new ArrayBuffer(ee+1<<2):re=new ArrayBuffer(X);for(var ge=new Uint32Array(re);T<ee;){for(Q=0;Q<D&&T<ee;++Q,++T)ge[T]=se[Q];T%D===0&&ce(se)}return J&&(ge[Q]=se[Q],re=re.slice(0,X)),re},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var D=this.blockCount,se=this.s,ee=this.outputBlocks,J=this.extraBytes,Q=0,T=0,X=[],re,ge;T<ee;){for(Q=0;Q<D&&T<ee;++Q,++T)re=T<<2,ge=se[Q],X[re]=ge&255,X[re+1]=ge>>8&255,X[re+2]=ge>>16&255,X[re+3]=ge>>24&255;T%D===0&&ce(se)}return J&&(re=T<<2,ge=se[Q],X[re]=ge&255,J>1&&(X[re+1]=ge>>8&255),J>2&&(X[re+2]=ge>>16&255)),X};function F(D,se,ee){I.call(this,D,se,ee)}F.prototype=new I,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var ce=function(D){var se,ee,J,Q,T,X,re,ge,oe,fe,be,Me,Ne,Te,$e,Ie,Le,Ve,ke,ze,He,Se,Qe,ct,Be,et,rt,Je,gt,ht,ft,Ht,Jt,St,er,Xt,Ot,Bt,Tt,bt,Dt,Lt,yt,$t,jt,nt,Ft,$,K,G,C,Y,q,ae,pe,_e,Re,De,it,Ue,mt,st,tt;for(J=0;J<48;J+=2)Q=D[0]^D[10]^D[20]^D[30]^D[40],T=D[1]^D[11]^D[21]^D[31]^D[41],X=D[2]^D[12]^D[22]^D[32]^D[42],re=D[3]^D[13]^D[23]^D[33]^D[43],ge=D[4]^D[14]^D[24]^D[34]^D[44],oe=D[5]^D[15]^D[25]^D[35]^D[45],fe=D[6]^D[16]^D[26]^D[36]^D[46],be=D[7]^D[17]^D[27]^D[37]^D[47],Me=D[8]^D[18]^D[28]^D[38]^D[48],Ne=D[9]^D[19]^D[29]^D[39]^D[49],se=Me^(X<<1|re>>>31),ee=Ne^(re<<1|X>>>31),D[0]^=se,D[1]^=ee,D[10]^=se,D[11]^=ee,D[20]^=se,D[21]^=ee,D[30]^=se,D[31]^=ee,D[40]^=se,D[41]^=ee,se=Q^(ge<<1|oe>>>31),ee=T^(oe<<1|ge>>>31),D[2]^=se,D[3]^=ee,D[12]^=se,D[13]^=ee,D[22]^=se,D[23]^=ee,D[32]^=se,D[33]^=ee,D[42]^=se,D[43]^=ee,se=X^(fe<<1|be>>>31),ee=re^(be<<1|fe>>>31),D[4]^=se,D[5]^=ee,D[14]^=se,D[15]^=ee,D[24]^=se,D[25]^=ee,D[34]^=se,D[35]^=ee,D[44]^=se,D[45]^=ee,se=ge^(Me<<1|Ne>>>31),ee=oe^(Ne<<1|Me>>>31),D[6]^=se,D[7]^=ee,D[16]^=se,D[17]^=ee,D[26]^=se,D[27]^=ee,D[36]^=se,D[37]^=ee,D[46]^=se,D[47]^=ee,se=fe^(Q<<1|T>>>31),ee=be^(T<<1|Q>>>31),D[8]^=se,D[9]^=ee,D[18]^=se,D[19]^=ee,D[28]^=se,D[29]^=ee,D[38]^=se,D[39]^=ee,D[48]^=se,D[49]^=ee,Te=D[0],$e=D[1],nt=D[11]<<4|D[10]>>>28,Ft=D[10]<<4|D[11]>>>28,Je=D[20]<<3|D[21]>>>29,gt=D[21]<<3|D[20]>>>29,Ue=D[31]<<9|D[30]>>>23,mt=D[30]<<9|D[31]>>>23,Lt=D[40]<<18|D[41]>>>14,yt=D[41]<<18|D[40]>>>14,St=D[2]<<1|D[3]>>>31,er=D[3]<<1|D[2]>>>31,Ie=D[13]<<12|D[12]>>>20,Le=D[12]<<12|D[13]>>>20,$=D[22]<<10|D[23]>>>22,K=D[23]<<10|D[22]>>>22,ht=D[33]<<13|D[32]>>>19,ft=D[32]<<13|D[33]>>>19,st=D[42]<<2|D[43]>>>30,tt=D[43]<<2|D[42]>>>30,ae=D[5]<<30|D[4]>>>2,pe=D[4]<<30|D[5]>>>2,Xt=D[14]<<6|D[15]>>>26,Ot=D[15]<<6|D[14]>>>26,Ve=D[25]<<11|D[24]>>>21,ke=D[24]<<11|D[25]>>>21,G=D[34]<<15|D[35]>>>17,C=D[35]<<15|D[34]>>>17,Ht=D[45]<<29|D[44]>>>3,Jt=D[44]<<29|D[45]>>>3,ct=D[6]<<28|D[7]>>>4,Be=D[7]<<28|D[6]>>>4,_e=D[17]<<23|D[16]>>>9,Re=D[16]<<23|D[17]>>>9,Bt=D[26]<<25|D[27]>>>7,Tt=D[27]<<25|D[26]>>>7,ze=D[36]<<21|D[37]>>>11,He=D[37]<<21|D[36]>>>11,Y=D[47]<<24|D[46]>>>8,q=D[46]<<24|D[47]>>>8,$t=D[8]<<27|D[9]>>>5,jt=D[9]<<27|D[8]>>>5,et=D[18]<<20|D[19]>>>12,rt=D[19]<<20|D[18]>>>12,De=D[29]<<7|D[28]>>>25,it=D[28]<<7|D[29]>>>25,bt=D[38]<<8|D[39]>>>24,Dt=D[39]<<8|D[38]>>>24,Se=D[48]<<14|D[49]>>>18,Qe=D[49]<<14|D[48]>>>18,D[0]=Te^~Ie&Ve,D[1]=$e^~Le&ke,D[10]=ct^~et&Je,D[11]=Be^~rt&gt,D[20]=St^~Xt&Bt,D[21]=er^~Ot&Tt,D[30]=$t^~nt&$,D[31]=jt^~Ft&K,D[40]=ae^~_e&De,D[41]=pe^~Re&it,D[2]=Ie^~Ve&ze,D[3]=Le^~ke&He,D[12]=et^~Je&ht,D[13]=rt^~gt&ft,D[22]=Xt^~Bt&bt,D[23]=Ot^~Tt&Dt,D[32]=nt^~$&G,D[33]=Ft^~K&C,D[42]=_e^~De&Ue,D[43]=Re^~it&mt,D[4]=Ve^~ze&Se,D[5]=ke^~He&Qe,D[14]=Je^~ht&Ht,D[15]=gt^~ft&Jt,D[24]=Bt^~bt&Lt,D[25]=Tt^~Dt&yt,D[34]=$^~G&Y,D[35]=K^~C&q,D[44]=De^~Ue&st,D[45]=it^~mt&tt,D[6]=ze^~Se&Te,D[7]=He^~Qe&$e,D[16]=ht^~Ht&ct,D[17]=ft^~Jt&Be,D[26]=bt^~Lt&St,D[27]=Dt^~yt&er,D[36]=G^~Y&$t,D[37]=C^~q&jt,D[46]=Ue^~st&ae,D[47]=mt^~tt&pe,D[8]=Se^~Te&Ie,D[9]=Qe^~$e&Le,D[18]=Ht^~ct&et,D[19]=Jt^~Be&rt,D[28]=Lt^~St&Xt,D[29]=yt^~er&Ot,D[38]=Y^~$t&nt,D[39]=q^~jt&Ft,D[48]=st^~ae&_e,D[49]=tt^~pe&Re,D[0]^=O[J],D[1]^=O[J+1]};if(a)t.exports=f;else for(v=0;v<g.length;++v)i[g[v]]=f[g[v]]})()})(o3);var zN=o3.exports;const HN=ji(zN),WN="logger/5.7.0";let a3=!1,c3=!1;const Cd={debug:1,default:2,info:2,warning:3,error:4,off:5};let u3=Cd.default,Im=null;function KN(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const f3=KN();var Cm;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Cm||(Cm={}));var vs;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(vs||(vs={}));const l3="0123456789abcdef";class Kr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();Cd[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(u3>Cd[n])&&console.log.apply(console,r)}debug(...e){this._log(Kr.levels.DEBUG,e)}info(...e){this._log(Kr.levels.INFO,e)}warn(...e){this._log(Kr.levels.WARNING,e)}makeError(e,r,n){if(c3)return this.makeError("censored error",r,{});r||(r=Kr.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(u=>{const l=n[u];try{if(l instanceof Uint8Array){let d="";for(let p=0;p<l.length;p++)d+=l3[l[p]>>4],d+=l3[l[p]&15];i.push(u+"=Uint8Array(0x"+d+")")}else i.push(u+"="+JSON.stringify(l))}catch{i.push(u+"="+JSON.stringify(n[u].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case vs.NUMERIC_FAULT:{o="NUMERIC_FAULT";const u=e;switch(u){case"overflow":case"underflow":case"division-by-zero":o+="-"+u;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case vs.CALL_EXCEPTION:case vs.INSUFFICIENT_FUNDS:case vs.MISSING_NEW:case vs.NONCE_EXPIRED:case vs.REPLACEMENT_UNDERPRICED:case vs.TRANSACTION_REPLACED:case vs.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(u){a[u]=n[u]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,Kr.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){f3&&this.throwError("platform missing String.prototype.normalize",Kr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:f3})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,Kr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,Kr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,Kr.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,Kr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",Kr.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Kr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Kr.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Im||(Im=new Kr(WN)),Im}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Kr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),a3){if(!e)return;this.globalLogger().throwError("error censorship permanent",Kr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}c3=!!e,a3=!!r}static setLogLevel(e){const r=Cd[e.toLowerCase()];if(r==null){Kr.globalLogger().warn("invalid log level - "+e);return}u3=r}static from(e){return new Kr(e)}}Kr.errors=vs,Kr.levels=Cm;const VN="bytes/5.7.0",sn=new Kr(VN);function h3(t){return!!t.toHexString}function fu(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return fu(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function GN(t){return $s(t)&&!(t.length%2)||Tm(t)}function d3(t){return typeof t=="number"&&t==t&&t%1===0}function Tm(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!d3(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!d3(r)||r<0||r>=256)return!1}return!0}function bn(t,e){if(e||(e={}),typeof t=="number"){sn.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),fu(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),h3(t)&&(t=t.toHexString()),$s(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":sn.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return fu(new Uint8Array(n))}return Tm(t)?fu(new Uint8Array(t)):sn.throwArgumentError("invalid arrayify value","value",t)}function YN(t){const e=t.map(i=>bn(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),fu(n)}function JN(t,e){t=bn(t),t.length>e&&sn.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),fu(r)}function $s(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Rm="0123456789abcdef";function Ii(t,e){if(e||(e={}),typeof t=="number"){sn.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=Rm[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),h3(t))return t.toHexString();if($s(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":sn.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Tm(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=Rm[(i&240)>>4]+Rm[i&15]}return r}return sn.throwArgumentError("invalid hexlify value","value",t)}function XN(t){if(typeof t!="string")t=Ii(t);else if(!$s(t)||t.length%2)return null;return(t.length-2)/2}function p3(t,e,r){return typeof t!="string"?t=Ii(t):(!$s(t)||t.length%2)&&sn.throwArgumentError("invalid hexData","value",t),e=2+2*e,"0x"+t.substring(e)}function lu(t,e){for(typeof t!="string"?t=Ii(t):$s(t)||sn.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&sn.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function g3(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(GN(t)){let r=bn(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=Ii(r.slice(0,32)),e.s=Ii(r.slice(32,64))):r.length===65?(e.r=Ii(r.slice(0,32)),e.s=Ii(r.slice(32,64)),e.v=r[64]):sn.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:sn.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=Ii(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=JN(bn(e._vs),32);e._vs=Ii(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&sn.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=Ii(i);e.s==null?e.s=o:e.s!==o&&sn.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?sn.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&sn.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!$s(e.r)?sn.throwArgumentError("signature missing or invalid r","signature",t):e.r=lu(e.r,32),e.s==null||!$s(e.s)?sn.throwArgumentError("signature missing or invalid s","signature",t):e.s=lu(e.s,32);const r=bn(e.s);r[0]>=128&&sn.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=Ii(r);e._vs&&($s(e._vs)||sn.throwArgumentError("signature invalid _vs","signature",t),e._vs=lu(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&sn.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Dm(t){return"0x"+HN.keccak_256(bn(t))}var Om={exports:{}};Om.exports,function(t){(function(e,r){function n(m,f){if(!m)throw new Error(f||"Assertion failed")}function i(m,f){m.super_=f;var g=function(){};g.prototype=f.prototype,m.prototype=new g,m.prototype.constructor=m}function s(m,f,g){if(s.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((f==="le"||f==="be")&&(g=f,f=10),this._init(m||0,f||10,g||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=il.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,g){return f.cmp(g)>0?f:g},s.min=function(f,g){return f.cmp(g)<0?f:g},s.prototype._init=function(f,g,v){if(typeof f=="number")return this._initNumber(f,g,v);if(typeof f=="object")return this._initArray(f,g,v);g==="hex"&&(g=16),n(g===(g|0)&&g>=2&&g<=36),f=f.toString().replace(/\s+/g,"");var x=0;f[0]==="-"&&(x++,this.negative=1),x<f.length&&(g===16?this._parseHex(f,x,v):(this._parseBase(f,g,x),v==="le"&&this._initArray(this.toArray(),g,v)))},s.prototype._initNumber=function(f,g,v){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),g,v)},s.prototype._initArray=function(f,g,v){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var S,A,b=0;if(v==="be")for(x=f.length-1,S=0;x>=0;x-=3)A=f[x]|f[x-1]<<8|f[x-2]<<16,this.words[S]|=A<<b&67108863,this.words[S+1]=A>>>26-b&67108863,b+=24,b>=26&&(b-=26,S++);else if(v==="le")for(x=0,S=0;x<f.length;x+=3)A=f[x]|f[x+1]<<8|f[x+2]<<16,this.words[S]|=A<<b&67108863,this.words[S+1]=A>>>26-b&67108863,b+=24,b>=26&&(b-=26,S++);return this._strip()};function a(m,f){var g=m.charCodeAt(f);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;n(!1,"Invalid character in "+m)}function u(m,f,g){var v=a(m,g);return g-1>=f&&(v|=a(m,g-1)<<4),v}s.prototype._parseHex=function(f,g,v){this.length=Math.ceil((f.length-g)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var S=0,A=0,b;if(v==="be")for(x=f.length-1;x>=g;x-=2)b=u(f,g,x)<<S,this.words[A]|=b&67108863,S>=18?(S-=18,A+=1,this.words[A]|=b>>>26):S+=8;else{var P=f.length-g;for(x=P%2===0?g+1:g;x<f.length;x+=2)b=u(f,g,x)<<S,this.words[A]|=b&67108863,S>=18?(S-=18,A+=1,this.words[A]|=b>>>26):S+=8}this._strip()};function l(m,f,g,v){for(var x=0,S=0,A=Math.min(m.length,g),b=f;b<A;b++){var P=m.charCodeAt(b)-48;x*=v,P>=49?S=P-49+10:P>=17?S=P-17+10:S=P,n(P>=0&&S<v,"Invalid character"),x+=S}return x}s.prototype._parseBase=function(f,g,v){this.words=[0],this.length=1;for(var x=0,S=1;S<=67108863;S*=g)x++;x--,S=S/g|0;for(var A=f.length-v,b=A%x,P=Math.min(A,A-b)+v,I=0,F=v;F<P;F+=x)I=l(f,F,F+x,g),this.imuln(S),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(b!==0){var ce=1;for(I=l(f,F,f.length,g),F=0;F<b;F++)ce*=g;this.imuln(ce),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var g=0;g<this.length;g++)f.words[g]=this.words[g];f.length=this.length,f.negative=this.negative,f.red=this.red};function d(m,f){m.words=f.words,m.length=f.length,m.negative=f.negative,m.red=f.red}if(s.prototype._move=function(f){d(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{s.prototype.inspect=p}else s.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,g){f=f||10,g=g|0||1;var v;if(f===16||f==="hex"){v="";for(var x=0,S=0,A=0;A<this.length;A++){var b=this.words[A],P=((b<<x|S)&16777215).toString(16);S=b>>>24-x&16777215,x+=2,x>=26&&(x-=26,A--),S!==0||A!==this.length-1?v=y[6-P.length]+P+v:v=P+v}for(S!==0&&(v=S.toString(16)+v);v.length%g!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(f===(f|0)&&f>=2&&f<=36){var I=_[f],F=M[f];v="";var ce=this.clone();for(ce.negative=0;!ce.isZero();){var D=ce.modrn(F).toString(f);ce=ce.idivn(F),ce.isZero()?v=D+v:v=y[I-D.length]+D+v}for(this.isZero()&&(v="0"+v);v.length%g!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,g){return this.toArrayLike(o,f,g)}),s.prototype.toArray=function(f,g){return this.toArrayLike(Array,f,g)};var O=function(f,g){return f.allocUnsafe?f.allocUnsafe(g):new f(g)};s.prototype.toArrayLike=function(f,g,v){this._strip();var x=this.byteLength(),S=v||Math.max(1,x);n(x<=S,"byte array longer than desired length"),n(S>0,"Requested array length <= 0");var A=O(f,S),b=g==="le"?"LE":"BE";return this["_toArrayLike"+b](A,x),A},s.prototype._toArrayLikeLE=function(f,g){for(var v=0,x=0,S=0,A=0;S<this.length;S++){var b=this.words[S]<<A|x;f[v++]=b&255,v<f.length&&(f[v++]=b>>8&255),v<f.length&&(f[v++]=b>>16&255),A===6?(v<f.length&&(f[v++]=b>>24&255),x=0,A=0):(x=b>>>24,A+=2)}if(v<f.length)for(f[v++]=x;v<f.length;)f[v++]=0},s.prototype._toArrayLikeBE=function(f,g){for(var v=f.length-1,x=0,S=0,A=0;S<this.length;S++){var b=this.words[S]<<A|x;f[v--]=b&255,v>=0&&(f[v--]=b>>8&255),v>=0&&(f[v--]=b>>16&255),A===6?(v>=0&&(f[v--]=b>>24&255),x=0,A=0):(x=b>>>24,A+=2)}if(v>=0)for(f[v--]=x;v>=0;)f[v--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var g=f,v=0;return g>=4096&&(v+=13,g>>>=13),g>=64&&(v+=7,g>>>=7),g>=8&&(v+=4,g>>>=4),g>=2&&(v+=2,g>>>=2),v+g},s.prototype._zeroBits=function(f){if(f===0)return 26;var g=f,v=0;return g&8191||(v+=13,g>>>=13),g&127||(v+=7,g>>>=7),g&15||(v+=4,g>>>=4),g&3||(v+=2,g>>>=2),g&1||v++,v},s.prototype.bitLength=function(){var f=this.words[this.length-1],g=this._countBits(f);return(this.length-1)*26+g};function L(m){for(var f=new Array(m.bitLength()),g=0;g<f.length;g++){var v=g/26|0,x=g%26;f[g]=m.words[v]>>>x&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,g=0;g<this.length;g++){var v=this._zeroBits(this.words[g]);if(f+=v,v!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var g=0;g<f.length;g++)this.words[g]=this.words[g]|f.words[g];return this._strip()},s.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var g;this.length>f.length?g=f:g=this;for(var v=0;v<g.length;v++)this.words[v]=this.words[v]&f.words[v];return this.length=g.length,this._strip()},s.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var g,v;this.length>f.length?(g=this,v=f):(g=f,v=this);for(var x=0;x<v.length;x++)this.words[x]=g.words[x]^v.words[x];if(this!==g)for(;x<g.length;x++)this.words[x]=g.words[x];return this.length=g.length,this._strip()},s.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var g=Math.ceil(f/26)|0,v=f%26;this._expand(g),v>0&&g--;for(var x=0;x<g;x++)this.words[x]=~this.words[x]&67108863;return v>0&&(this.words[x]=~this.words[x]&67108863>>26-v),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,g){n(typeof f=="number"&&f>=0);var v=f/26|0,x=f%26;return this._expand(v+1),g?this.words[v]=this.words[v]|1<<x:this.words[v]=this.words[v]&~(1<<x),this._strip()},s.prototype.iadd=function(f){var g;if(this.negative!==0&&f.negative===0)return this.negative=0,g=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,g=this.isub(f),f.negative=1,g._normSign();var v,x;this.length>f.length?(v=this,x=f):(v=f,x=this);for(var S=0,A=0;A<x.length;A++)g=(v.words[A]|0)+(x.words[A]|0)+S,this.words[A]=g&67108863,S=g>>>26;for(;S!==0&&A<v.length;A++)g=(v.words[A]|0)+S,this.words[A]=g&67108863,S=g>>>26;if(this.length=v.length,S!==0)this.words[this.length]=S,this.length++;else if(v!==this)for(;A<v.length;A++)this.words[A]=v.words[A];return this},s.prototype.add=function(f){var g;return f.negative!==0&&this.negative===0?(f.negative=0,g=this.sub(f),f.negative^=1,g):f.negative===0&&this.negative!==0?(this.negative=0,g=f.sub(this),this.negative=1,g):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var g=this.iadd(f);return f.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var v=this.cmp(f);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,S;v>0?(x=this,S=f):(x=f,S=this);for(var A=0,b=0;b<S.length;b++)g=(x.words[b]|0)-(S.words[b]|0)+A,A=g>>26,this.words[b]=g&67108863;for(;A!==0&&b<x.length;b++)g=(x.words[b]|0)+A,A=g>>26,this.words[b]=g&67108863;if(A===0&&b<x.length&&x!==this)for(;b<x.length;b++)this.words[b]=x.words[b];return this.length=Math.max(this.length,b),x!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function B(m,f,g){g.negative=f.negative^m.negative;var v=m.length+f.length|0;g.length=v,v=v-1|0;var x=m.words[0]|0,S=f.words[0]|0,A=x*S,b=A&67108863,P=A/67108864|0;g.words[0]=b;for(var I=1;I<v;I++){for(var F=P>>>26,ce=P&67108863,D=Math.min(I,f.length-1),se=Math.max(0,I-m.length+1);se<=D;se++){var ee=I-se|0;x=m.words[ee]|0,S=f.words[se]|0,A=x*S+ce,F+=A/67108864|0,ce=A&67108863}g.words[I]=ce|0,P=F|0}return P!==0?g.words[I]=P|0:g.length--,g._strip()}var k=function(f,g,v){var x=f.words,S=g.words,A=v.words,b=0,P,I,F,ce=x[0]|0,D=ce&8191,se=ce>>>13,ee=x[1]|0,J=ee&8191,Q=ee>>>13,T=x[2]|0,X=T&8191,re=T>>>13,ge=x[3]|0,oe=ge&8191,fe=ge>>>13,be=x[4]|0,Me=be&8191,Ne=be>>>13,Te=x[5]|0,$e=Te&8191,Ie=Te>>>13,Le=x[6]|0,Ve=Le&8191,ke=Le>>>13,ze=x[7]|0,He=ze&8191,Se=ze>>>13,Qe=x[8]|0,ct=Qe&8191,Be=Qe>>>13,et=x[9]|0,rt=et&8191,Je=et>>>13,gt=S[0]|0,ht=gt&8191,ft=gt>>>13,Ht=S[1]|0,Jt=Ht&8191,St=Ht>>>13,er=S[2]|0,Xt=er&8191,Ot=er>>>13,Bt=S[3]|0,Tt=Bt&8191,bt=Bt>>>13,Dt=S[4]|0,Lt=Dt&8191,yt=Dt>>>13,$t=S[5]|0,jt=$t&8191,nt=$t>>>13,Ft=S[6]|0,$=Ft&8191,K=Ft>>>13,G=S[7]|0,C=G&8191,Y=G>>>13,q=S[8]|0,ae=q&8191,pe=q>>>13,_e=S[9]|0,Re=_e&8191,De=_e>>>13;v.negative=f.negative^g.negative,v.length=19,P=Math.imul(D,ht),I=Math.imul(D,ft),I=I+Math.imul(se,ht)|0,F=Math.imul(se,ft);var it=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(it>>>26)|0,it&=67108863,P=Math.imul(J,ht),I=Math.imul(J,ft),I=I+Math.imul(Q,ht)|0,F=Math.imul(Q,ft),P=P+Math.imul(D,Jt)|0,I=I+Math.imul(D,St)|0,I=I+Math.imul(se,Jt)|0,F=F+Math.imul(se,St)|0;var Ue=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,P=Math.imul(X,ht),I=Math.imul(X,ft),I=I+Math.imul(re,ht)|0,F=Math.imul(re,ft),P=P+Math.imul(J,Jt)|0,I=I+Math.imul(J,St)|0,I=I+Math.imul(Q,Jt)|0,F=F+Math.imul(Q,St)|0,P=P+Math.imul(D,Xt)|0,I=I+Math.imul(D,Ot)|0,I=I+Math.imul(se,Xt)|0,F=F+Math.imul(se,Ot)|0;var mt=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(mt>>>26)|0,mt&=67108863,P=Math.imul(oe,ht),I=Math.imul(oe,ft),I=I+Math.imul(fe,ht)|0,F=Math.imul(fe,ft),P=P+Math.imul(X,Jt)|0,I=I+Math.imul(X,St)|0,I=I+Math.imul(re,Jt)|0,F=F+Math.imul(re,St)|0,P=P+Math.imul(J,Xt)|0,I=I+Math.imul(J,Ot)|0,I=I+Math.imul(Q,Xt)|0,F=F+Math.imul(Q,Ot)|0,P=P+Math.imul(D,Tt)|0,I=I+Math.imul(D,bt)|0,I=I+Math.imul(se,Tt)|0,F=F+Math.imul(se,bt)|0;var st=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(st>>>26)|0,st&=67108863,P=Math.imul(Me,ht),I=Math.imul(Me,ft),I=I+Math.imul(Ne,ht)|0,F=Math.imul(Ne,ft),P=P+Math.imul(oe,Jt)|0,I=I+Math.imul(oe,St)|0,I=I+Math.imul(fe,Jt)|0,F=F+Math.imul(fe,St)|0,P=P+Math.imul(X,Xt)|0,I=I+Math.imul(X,Ot)|0,I=I+Math.imul(re,Xt)|0,F=F+Math.imul(re,Ot)|0,P=P+Math.imul(J,Tt)|0,I=I+Math.imul(J,bt)|0,I=I+Math.imul(Q,Tt)|0,F=F+Math.imul(Q,bt)|0,P=P+Math.imul(D,Lt)|0,I=I+Math.imul(D,yt)|0,I=I+Math.imul(se,Lt)|0,F=F+Math.imul(se,yt)|0;var tt=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(tt>>>26)|0,tt&=67108863,P=Math.imul($e,ht),I=Math.imul($e,ft),I=I+Math.imul(Ie,ht)|0,F=Math.imul(Ie,ft),P=P+Math.imul(Me,Jt)|0,I=I+Math.imul(Me,St)|0,I=I+Math.imul(Ne,Jt)|0,F=F+Math.imul(Ne,St)|0,P=P+Math.imul(oe,Xt)|0,I=I+Math.imul(oe,Ot)|0,I=I+Math.imul(fe,Xt)|0,F=F+Math.imul(fe,Ot)|0,P=P+Math.imul(X,Tt)|0,I=I+Math.imul(X,bt)|0,I=I+Math.imul(re,Tt)|0,F=F+Math.imul(re,bt)|0,P=P+Math.imul(J,Lt)|0,I=I+Math.imul(J,yt)|0,I=I+Math.imul(Q,Lt)|0,F=F+Math.imul(Q,yt)|0,P=P+Math.imul(D,jt)|0,I=I+Math.imul(D,nt)|0,I=I+Math.imul(se,jt)|0,F=F+Math.imul(se,nt)|0;var At=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(At>>>26)|0,At&=67108863,P=Math.imul(Ve,ht),I=Math.imul(Ve,ft),I=I+Math.imul(ke,ht)|0,F=Math.imul(ke,ft),P=P+Math.imul($e,Jt)|0,I=I+Math.imul($e,St)|0,I=I+Math.imul(Ie,Jt)|0,F=F+Math.imul(Ie,St)|0,P=P+Math.imul(Me,Xt)|0,I=I+Math.imul(Me,Ot)|0,I=I+Math.imul(Ne,Xt)|0,F=F+Math.imul(Ne,Ot)|0,P=P+Math.imul(oe,Tt)|0,I=I+Math.imul(oe,bt)|0,I=I+Math.imul(fe,Tt)|0,F=F+Math.imul(fe,bt)|0,P=P+Math.imul(X,Lt)|0,I=I+Math.imul(X,yt)|0,I=I+Math.imul(re,Lt)|0,F=F+Math.imul(re,yt)|0,P=P+Math.imul(J,jt)|0,I=I+Math.imul(J,nt)|0,I=I+Math.imul(Q,jt)|0,F=F+Math.imul(Q,nt)|0,P=P+Math.imul(D,$)|0,I=I+Math.imul(D,K)|0,I=I+Math.imul(se,$)|0,F=F+Math.imul(se,K)|0;var Rt=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,P=Math.imul(He,ht),I=Math.imul(He,ft),I=I+Math.imul(Se,ht)|0,F=Math.imul(Se,ft),P=P+Math.imul(Ve,Jt)|0,I=I+Math.imul(Ve,St)|0,I=I+Math.imul(ke,Jt)|0,F=F+Math.imul(ke,St)|0,P=P+Math.imul($e,Xt)|0,I=I+Math.imul($e,Ot)|0,I=I+Math.imul(Ie,Xt)|0,F=F+Math.imul(Ie,Ot)|0,P=P+Math.imul(Me,Tt)|0,I=I+Math.imul(Me,bt)|0,I=I+Math.imul(Ne,Tt)|0,F=F+Math.imul(Ne,bt)|0,P=P+Math.imul(oe,Lt)|0,I=I+Math.imul(oe,yt)|0,I=I+Math.imul(fe,Lt)|0,F=F+Math.imul(fe,yt)|0,P=P+Math.imul(X,jt)|0,I=I+Math.imul(X,nt)|0,I=I+Math.imul(re,jt)|0,F=F+Math.imul(re,nt)|0,P=P+Math.imul(J,$)|0,I=I+Math.imul(J,K)|0,I=I+Math.imul(Q,$)|0,F=F+Math.imul(Q,K)|0,P=P+Math.imul(D,C)|0,I=I+Math.imul(D,Y)|0,I=I+Math.imul(se,C)|0,F=F+Math.imul(se,Y)|0;var Mt=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,P=Math.imul(ct,ht),I=Math.imul(ct,ft),I=I+Math.imul(Be,ht)|0,F=Math.imul(Be,ft),P=P+Math.imul(He,Jt)|0,I=I+Math.imul(He,St)|0,I=I+Math.imul(Se,Jt)|0,F=F+Math.imul(Se,St)|0,P=P+Math.imul(Ve,Xt)|0,I=I+Math.imul(Ve,Ot)|0,I=I+Math.imul(ke,Xt)|0,F=F+Math.imul(ke,Ot)|0,P=P+Math.imul($e,Tt)|0,I=I+Math.imul($e,bt)|0,I=I+Math.imul(Ie,Tt)|0,F=F+Math.imul(Ie,bt)|0,P=P+Math.imul(Me,Lt)|0,I=I+Math.imul(Me,yt)|0,I=I+Math.imul(Ne,Lt)|0,F=F+Math.imul(Ne,yt)|0,P=P+Math.imul(oe,jt)|0,I=I+Math.imul(oe,nt)|0,I=I+Math.imul(fe,jt)|0,F=F+Math.imul(fe,nt)|0,P=P+Math.imul(X,$)|0,I=I+Math.imul(X,K)|0,I=I+Math.imul(re,$)|0,F=F+Math.imul(re,K)|0,P=P+Math.imul(J,C)|0,I=I+Math.imul(J,Y)|0,I=I+Math.imul(Q,C)|0,F=F+Math.imul(Q,Y)|0,P=P+Math.imul(D,ae)|0,I=I+Math.imul(D,pe)|0,I=I+Math.imul(se,ae)|0,F=F+Math.imul(se,pe)|0;var Et=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Et>>>26)|0,Et&=67108863,P=Math.imul(rt,ht),I=Math.imul(rt,ft),I=I+Math.imul(Je,ht)|0,F=Math.imul(Je,ft),P=P+Math.imul(ct,Jt)|0,I=I+Math.imul(ct,St)|0,I=I+Math.imul(Be,Jt)|0,F=F+Math.imul(Be,St)|0,P=P+Math.imul(He,Xt)|0,I=I+Math.imul(He,Ot)|0,I=I+Math.imul(Se,Xt)|0,F=F+Math.imul(Se,Ot)|0,P=P+Math.imul(Ve,Tt)|0,I=I+Math.imul(Ve,bt)|0,I=I+Math.imul(ke,Tt)|0,F=F+Math.imul(ke,bt)|0,P=P+Math.imul($e,Lt)|0,I=I+Math.imul($e,yt)|0,I=I+Math.imul(Ie,Lt)|0,F=F+Math.imul(Ie,yt)|0,P=P+Math.imul(Me,jt)|0,I=I+Math.imul(Me,nt)|0,I=I+Math.imul(Ne,jt)|0,F=F+Math.imul(Ne,nt)|0,P=P+Math.imul(oe,$)|0,I=I+Math.imul(oe,K)|0,I=I+Math.imul(fe,$)|0,F=F+Math.imul(fe,K)|0,P=P+Math.imul(X,C)|0,I=I+Math.imul(X,Y)|0,I=I+Math.imul(re,C)|0,F=F+Math.imul(re,Y)|0,P=P+Math.imul(J,ae)|0,I=I+Math.imul(J,pe)|0,I=I+Math.imul(Q,ae)|0,F=F+Math.imul(Q,pe)|0,P=P+Math.imul(D,Re)|0,I=I+Math.imul(D,De)|0,I=I+Math.imul(se,Re)|0,F=F+Math.imul(se,De)|0;var dt=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(dt>>>26)|0,dt&=67108863,P=Math.imul(rt,Jt),I=Math.imul(rt,St),I=I+Math.imul(Je,Jt)|0,F=Math.imul(Je,St),P=P+Math.imul(ct,Xt)|0,I=I+Math.imul(ct,Ot)|0,I=I+Math.imul(Be,Xt)|0,F=F+Math.imul(Be,Ot)|0,P=P+Math.imul(He,Tt)|0,I=I+Math.imul(He,bt)|0,I=I+Math.imul(Se,Tt)|0,F=F+Math.imul(Se,bt)|0,P=P+Math.imul(Ve,Lt)|0,I=I+Math.imul(Ve,yt)|0,I=I+Math.imul(ke,Lt)|0,F=F+Math.imul(ke,yt)|0,P=P+Math.imul($e,jt)|0,I=I+Math.imul($e,nt)|0,I=I+Math.imul(Ie,jt)|0,F=F+Math.imul(Ie,nt)|0,P=P+Math.imul(Me,$)|0,I=I+Math.imul(Me,K)|0,I=I+Math.imul(Ne,$)|0,F=F+Math.imul(Ne,K)|0,P=P+Math.imul(oe,C)|0,I=I+Math.imul(oe,Y)|0,I=I+Math.imul(fe,C)|0,F=F+Math.imul(fe,Y)|0,P=P+Math.imul(X,ae)|0,I=I+Math.imul(X,pe)|0,I=I+Math.imul(re,ae)|0,F=F+Math.imul(re,pe)|0,P=P+Math.imul(J,Re)|0,I=I+Math.imul(J,De)|0,I=I+Math.imul(Q,Re)|0,F=F+Math.imul(Q,De)|0;var _t=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(_t>>>26)|0,_t&=67108863,P=Math.imul(rt,Xt),I=Math.imul(rt,Ot),I=I+Math.imul(Je,Xt)|0,F=Math.imul(Je,Ot),P=P+Math.imul(ct,Tt)|0,I=I+Math.imul(ct,bt)|0,I=I+Math.imul(Be,Tt)|0,F=F+Math.imul(Be,bt)|0,P=P+Math.imul(He,Lt)|0,I=I+Math.imul(He,yt)|0,I=I+Math.imul(Se,Lt)|0,F=F+Math.imul(Se,yt)|0,P=P+Math.imul(Ve,jt)|0,I=I+Math.imul(Ve,nt)|0,I=I+Math.imul(ke,jt)|0,F=F+Math.imul(ke,nt)|0,P=P+Math.imul($e,$)|0,I=I+Math.imul($e,K)|0,I=I+Math.imul(Ie,$)|0,F=F+Math.imul(Ie,K)|0,P=P+Math.imul(Me,C)|0,I=I+Math.imul(Me,Y)|0,I=I+Math.imul(Ne,C)|0,F=F+Math.imul(Ne,Y)|0,P=P+Math.imul(oe,ae)|0,I=I+Math.imul(oe,pe)|0,I=I+Math.imul(fe,ae)|0,F=F+Math.imul(fe,pe)|0,P=P+Math.imul(X,Re)|0,I=I+Math.imul(X,De)|0,I=I+Math.imul(re,Re)|0,F=F+Math.imul(re,De)|0;var ot=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(ot>>>26)|0,ot&=67108863,P=Math.imul(rt,Tt),I=Math.imul(rt,bt),I=I+Math.imul(Je,Tt)|0,F=Math.imul(Je,bt),P=P+Math.imul(ct,Lt)|0,I=I+Math.imul(ct,yt)|0,I=I+Math.imul(Be,Lt)|0,F=F+Math.imul(Be,yt)|0,P=P+Math.imul(He,jt)|0,I=I+Math.imul(He,nt)|0,I=I+Math.imul(Se,jt)|0,F=F+Math.imul(Se,nt)|0,P=P+Math.imul(Ve,$)|0,I=I+Math.imul(Ve,K)|0,I=I+Math.imul(ke,$)|0,F=F+Math.imul(ke,K)|0,P=P+Math.imul($e,C)|0,I=I+Math.imul($e,Y)|0,I=I+Math.imul(Ie,C)|0,F=F+Math.imul(Ie,Y)|0,P=P+Math.imul(Me,ae)|0,I=I+Math.imul(Me,pe)|0,I=I+Math.imul(Ne,ae)|0,F=F+Math.imul(Ne,pe)|0,P=P+Math.imul(oe,Re)|0,I=I+Math.imul(oe,De)|0,I=I+Math.imul(fe,Re)|0,F=F+Math.imul(fe,De)|0;var wt=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(wt>>>26)|0,wt&=67108863,P=Math.imul(rt,Lt),I=Math.imul(rt,yt),I=I+Math.imul(Je,Lt)|0,F=Math.imul(Je,yt),P=P+Math.imul(ct,jt)|0,I=I+Math.imul(ct,nt)|0,I=I+Math.imul(Be,jt)|0,F=F+Math.imul(Be,nt)|0,P=P+Math.imul(He,$)|0,I=I+Math.imul(He,K)|0,I=I+Math.imul(Se,$)|0,F=F+Math.imul(Se,K)|0,P=P+Math.imul(Ve,C)|0,I=I+Math.imul(Ve,Y)|0,I=I+Math.imul(ke,C)|0,F=F+Math.imul(ke,Y)|0,P=P+Math.imul($e,ae)|0,I=I+Math.imul($e,pe)|0,I=I+Math.imul(Ie,ae)|0,F=F+Math.imul(Ie,pe)|0,P=P+Math.imul(Me,Re)|0,I=I+Math.imul(Me,De)|0,I=I+Math.imul(Ne,Re)|0,F=F+Math.imul(Ne,De)|0;var lt=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(lt>>>26)|0,lt&=67108863,P=Math.imul(rt,jt),I=Math.imul(rt,nt),I=I+Math.imul(Je,jt)|0,F=Math.imul(Je,nt),P=P+Math.imul(ct,$)|0,I=I+Math.imul(ct,K)|0,I=I+Math.imul(Be,$)|0,F=F+Math.imul(Be,K)|0,P=P+Math.imul(He,C)|0,I=I+Math.imul(He,Y)|0,I=I+Math.imul(Se,C)|0,F=F+Math.imul(Se,Y)|0,P=P+Math.imul(Ve,ae)|0,I=I+Math.imul(Ve,pe)|0,I=I+Math.imul(ke,ae)|0,F=F+Math.imul(ke,pe)|0,P=P+Math.imul($e,Re)|0,I=I+Math.imul($e,De)|0,I=I+Math.imul(Ie,Re)|0,F=F+Math.imul(Ie,De)|0;var at=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(at>>>26)|0,at&=67108863,P=Math.imul(rt,$),I=Math.imul(rt,K),I=I+Math.imul(Je,$)|0,F=Math.imul(Je,K),P=P+Math.imul(ct,C)|0,I=I+Math.imul(ct,Y)|0,I=I+Math.imul(Be,C)|0,F=F+Math.imul(Be,Y)|0,P=P+Math.imul(He,ae)|0,I=I+Math.imul(He,pe)|0,I=I+Math.imul(Se,ae)|0,F=F+Math.imul(Se,pe)|0,P=P+Math.imul(Ve,Re)|0,I=I+Math.imul(Ve,De)|0,I=I+Math.imul(ke,Re)|0,F=F+Math.imul(ke,De)|0;var Ae=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,P=Math.imul(rt,C),I=Math.imul(rt,Y),I=I+Math.imul(Je,C)|0,F=Math.imul(Je,Y),P=P+Math.imul(ct,ae)|0,I=I+Math.imul(ct,pe)|0,I=I+Math.imul(Be,ae)|0,F=F+Math.imul(Be,pe)|0,P=P+Math.imul(He,Re)|0,I=I+Math.imul(He,De)|0,I=I+Math.imul(Se,Re)|0,F=F+Math.imul(Se,De)|0;var Pe=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,P=Math.imul(rt,ae),I=Math.imul(rt,pe),I=I+Math.imul(Je,ae)|0,F=Math.imul(Je,pe),P=P+Math.imul(ct,Re)|0,I=I+Math.imul(ct,De)|0,I=I+Math.imul(Be,Re)|0,F=F+Math.imul(Be,De)|0;var Ge=(b+P|0)+((I&8191)<<13)|0;b=(F+(I>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,P=Math.imul(rt,Re),I=Math.imul(rt,De),I=I+Math.imul(Je,Re)|0,F=Math.imul(Je,De);var je=(b+P|0)+((I&8191)<<13)|0;return b=(F+(I>>>13)|0)+(je>>>26)|0,je&=67108863,A[0]=it,A[1]=Ue,A[2]=mt,A[3]=st,A[4]=tt,A[5]=At,A[6]=Rt,A[7]=Mt,A[8]=Et,A[9]=dt,A[10]=_t,A[11]=ot,A[12]=wt,A[13]=lt,A[14]=at,A[15]=Ae,A[16]=Pe,A[17]=Ge,A[18]=je,b!==0&&(A[19]=b,v.length++),v};Math.imul||(k=B);function H(m,f,g){g.negative=f.negative^m.negative,g.length=m.length+f.length;for(var v=0,x=0,S=0;S<g.length-1;S++){var A=x;x=0;for(var b=v&67108863,P=Math.min(S,f.length-1),I=Math.max(0,S-m.length+1);I<=P;I++){var F=S-I,ce=m.words[F]|0,D=f.words[I]|0,se=ce*D,ee=se&67108863;A=A+(se/67108864|0)|0,ee=ee+b|0,b=ee&67108863,A=A+(ee>>>26)|0,x+=A>>>26,A&=67108863}g.words[S]=b,v=A,A=x}return v!==0?g.words[S]=v:g.length--,g._strip()}function U(m,f,g){return H(m,f,g)}s.prototype.mulTo=function(f,g){var v,x=this.length+f.length;return this.length===10&&f.length===10?v=k(this,f,g):x<63?v=B(this,f,g):x<1024?v=H(this,f,g):v=U(this,f,g),v},s.prototype.mul=function(f){var g=new s(null);return g.words=new Array(this.length+f.length),this.mulTo(f,g)},s.prototype.mulf=function(f){var g=new s(null);return g.words=new Array(this.length+f.length),U(this,f,g)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var g=f<0;g&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var v=0,x=0;x<this.length;x++){var S=(this.words[x]|0)*f,A=(S&67108863)+(v&67108863);v>>=26,v+=S/67108864|0,v+=A>>>26,this.words[x]=A&67108863}return v!==0&&(this.words[x]=v,this.length++),g?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var g=L(f);if(g.length===0)return new s(1);for(var v=this,x=0;x<g.length&&g[x]===0;x++,v=v.sqr());if(++x<g.length)for(var S=v.sqr();x<g.length;x++,S=S.sqr())g[x]!==0&&(v=v.mul(S));return v},s.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var g=f%26,v=(f-g)/26,x=67108863>>>26-g<<26-g,S;if(g!==0){var A=0;for(S=0;S<this.length;S++){var b=this.words[S]&x,P=(this.words[S]|0)-b<<g;this.words[S]=P|A,A=b>>>26-g}A&&(this.words[S]=A,this.length++)}if(v!==0){for(S=this.length-1;S>=0;S--)this.words[S+v]=this.words[S];for(S=0;S<v;S++)this.words[S]=0;this.length+=v}return this._strip()},s.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,g,v){n(typeof f=="number"&&f>=0);var x;g?x=(g-g%26)/26:x=0;var S=f%26,A=Math.min((f-S)/26,this.length),b=67108863^67108863>>>S<<S,P=v;if(x-=A,x=Math.max(0,x),P){for(var I=0;I<A;I++)P.words[I]=this.words[I];P.length=A}if(A!==0)if(this.length>A)for(this.length-=A,I=0;I<this.length;I++)this.words[I]=this.words[I+A];else this.words[0]=0,this.length=1;var F=0;for(I=this.length-1;I>=0&&(F!==0||I>=x);I--){var ce=this.words[I]|0;this.words[I]=F<<26-S|ce>>>S,F=ce&b}return P&&F!==0&&(P.words[P.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,g,v){return n(this.negative===0),this.iushrn(f,g,v)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var g=f%26,v=(f-g)/26,x=1<<g;if(this.length<=v)return!1;var S=this.words[v];return!!(S&x)},s.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var g=f%26,v=(f-g)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(g!==0&&v++,this.length=Math.min(v,this.length),g!==0){var x=67108863^67108863>>>g<<g;this.words[this.length-1]&=x}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},s.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,g,v){var x=f.length+v,S;this._expand(x);var A,b=0;for(S=0;S<f.length;S++){A=(this.words[S+v]|0)+b;var P=(f.words[S]|0)*g;A-=P&67108863,b=(A>>26)-(P/67108864|0),this.words[S+v]=A&67108863}for(;S<this.length-v;S++)A=(this.words[S+v]|0)+b,b=A>>26,this.words[S+v]=A&67108863;if(b===0)return this._strip();for(n(b===-1),b=0,S=0;S<this.length;S++)A=-(this.words[S]|0)+b,b=A>>26,this.words[S]=A&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,g){var v=this.length-f.length,x=this.clone(),S=f,A=S.words[S.length-1]|0,b=this._countBits(A);v=26-b,v!==0&&(S=S.ushln(v),x.iushln(v),A=S.words[S.length-1]|0);var P=x.length-S.length,I;if(g!=="mod"){I=new s(null),I.length=P+1,I.words=new Array(I.length);for(var F=0;F<I.length;F++)I.words[F]=0}var ce=x.clone()._ishlnsubmul(S,1,P);ce.negative===0&&(x=ce,I&&(I.words[P]=1));for(var D=P-1;D>=0;D--){var se=(x.words[S.length+D]|0)*67108864+(x.words[S.length+D-1]|0);for(se=Math.min(se/A|0,67108863),x._ishlnsubmul(S,se,D);x.negative!==0;)se--,x.negative=0,x._ishlnsubmul(S,1,D),x.isZero()||(x.negative^=1);I&&(I.words[D]=se)}return I&&I._strip(),x._strip(),g!=="div"&&v!==0&&x.iushrn(v),{div:I||null,mod:x}},s.prototype.divmod=function(f,g,v){if(n(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var x,S,A;return this.negative!==0&&f.negative===0?(A=this.neg().divmod(f,g),g!=="mod"&&(x=A.div.neg()),g!=="div"&&(S=A.mod.neg(),v&&S.negative!==0&&S.iadd(f)),{div:x,mod:S}):this.negative===0&&f.negative!==0?(A=this.divmod(f.neg(),g),g!=="mod"&&(x=A.div.neg()),{div:x,mod:A.mod}):this.negative&f.negative?(A=this.neg().divmod(f.neg(),g),g!=="div"&&(S=A.mod.neg(),v&&S.negative!==0&&S.isub(f)),{div:A.div,mod:S}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?g==="div"?{div:this.divn(f.words[0]),mod:null}:g==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,g)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var g=this.divmod(f);if(g.mod.isZero())return g.div;var v=g.div.negative!==0?g.mod.isub(f):g.mod,x=f.ushrn(1),S=f.andln(1),A=v.cmp(x);return A<0||S===1&&A===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},s.prototype.modrn=function(f){var g=f<0;g&&(f=-f),n(f<=67108863);for(var v=(1<<26)%f,x=0,S=this.length-1;S>=0;S--)x=(v*x+(this.words[S]|0))%f;return g?-x:x},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var g=f<0;g&&(f=-f),n(f<=67108863);for(var v=0,x=this.length-1;x>=0;x--){var S=(this.words[x]|0)+v*67108864;this.words[x]=S/f|0,v=S%f}return this._strip(),g?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var g=this,v=f.clone();g.negative!==0?g=g.umod(f):g=g.clone();for(var x=new s(1),S=new s(0),A=new s(0),b=new s(1),P=0;g.isEven()&&v.isEven();)g.iushrn(1),v.iushrn(1),++P;for(var I=v.clone(),F=g.clone();!g.isZero();){for(var ce=0,D=1;!(g.words[0]&D)&&ce<26;++ce,D<<=1);if(ce>0)for(g.iushrn(ce);ce-- >0;)(x.isOdd()||S.isOdd())&&(x.iadd(I),S.isub(F)),x.iushrn(1),S.iushrn(1);for(var se=0,ee=1;!(v.words[0]&ee)&&se<26;++se,ee<<=1);if(se>0)for(v.iushrn(se);se-- >0;)(A.isOdd()||b.isOdd())&&(A.iadd(I),b.isub(F)),A.iushrn(1),b.iushrn(1);g.cmp(v)>=0?(g.isub(v),x.isub(A),S.isub(b)):(v.isub(g),A.isub(x),b.isub(S))}return{a:A,b,gcd:v.iushln(P)}},s.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var g=this,v=f.clone();g.negative!==0?g=g.umod(f):g=g.clone();for(var x=new s(1),S=new s(0),A=v.clone();g.cmpn(1)>0&&v.cmpn(1)>0;){for(var b=0,P=1;!(g.words[0]&P)&&b<26;++b,P<<=1);if(b>0)for(g.iushrn(b);b-- >0;)x.isOdd()&&x.iadd(A),x.iushrn(1);for(var I=0,F=1;!(v.words[0]&F)&&I<26;++I,F<<=1);if(I>0)for(v.iushrn(I);I-- >0;)S.isOdd()&&S.iadd(A),S.iushrn(1);g.cmp(v)>=0?(g.isub(v),x.isub(S)):(v.isub(g),S.isub(x))}var ce;return g.cmpn(1)===0?ce=x:ce=S,ce.cmpn(0)<0&&ce.iadd(f),ce},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var g=this.clone(),v=f.clone();g.negative=0,v.negative=0;for(var x=0;g.isEven()&&v.isEven();x++)g.iushrn(1),v.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;v.isEven();)v.iushrn(1);var S=g.cmp(v);if(S<0){var A=g;g=v,v=A}else if(S===0||v.cmpn(1)===0)break;g.isub(v)}while(!0);return v.iushln(x)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){n(typeof f=="number");var g=f%26,v=(f-g)/26,x=1<<g;if(this.length<=v)return this._expand(v+1),this.words[v]|=x,this;for(var S=x,A=v;S!==0&&A<this.length;A++){var b=this.words[A]|0;b+=S,S=b>>>26,b&=67108863,this.words[A]=b}return S!==0&&(this.words[A]=S,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var g=f<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var v;if(this.length>1)v=1;else{g&&(f=-f),n(f<=67108863,"Number is too big");var x=this.words[0]|0;v=x===f?0:x<f?-1:1}return this.negative!==0?-v|0:v},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var g=this.ucmp(f);return this.negative!==0?-g|0:g},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var g=0,v=this.length-1;v>=0;v--){var x=this.words[v]|0,S=f.words[v]|0;if(x!==S){x<S?g=-1:x>S&&(g=1);break}}return g},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new j(f)},s.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var z={k256:null,p224:null,p192:null,p25519:null};function Z(m,f){this.name=m,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},Z.prototype.ireduce=function(f){var g=f,v;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),v=g.bitLength();while(v>this.n);var x=v<this.n?-1:g.ucmp(this.p);return x===0?(g.words[0]=0,g.length=1):x>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},Z.prototype.split=function(f,g){f.iushrn(this.n,0,g)},Z.prototype.imulK=function(f){return f.imul(this.k)};function R(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(R,Z),R.prototype.split=function(f,g){for(var v=4194303,x=Math.min(f.length,9),S=0;S<x;S++)g.words[S]=f.words[S];if(g.length=x,f.length<=9){f.words[0]=0,f.length=1;return}var A=f.words[9];for(g.words[g.length++]=A&v,S=10;S<f.length;S++){var b=f.words[S]|0;f.words[S-10]=(b&v)<<4|A>>>22,A=b}A>>>=22,f.words[S-10]=A,A===0&&f.length>10?f.length-=10:f.length-=9},R.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var g=0,v=0;v<f.length;v++){var x=f.words[v]|0;g+=x*977,f.words[v]=g&67108863,g=x*64+(g/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function W(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(W,Z);function ie(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ie,Z);function me(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(me,Z),me.prototype.imulK=function(f){for(var g=0,v=0;v<f.length;v++){var x=(f.words[v]|0)*19+g,S=x&67108863;x>>>=26,f.words[v]=S,g=x}return g!==0&&(f.words[f.length++]=g),f},s._prime=function(f){if(z[f])return z[f];var g;if(f==="k256")g=new R;else if(f==="p224")g=new W;else if(f==="p192")g=new ie;else if(f==="p25519")g=new me;else throw new Error("Unknown prime "+f);return z[f]=g,g};function j(m){if(typeof m=="string"){var f=s._prime(m);this.m=f.p,this.prime=f}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}j.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,g){n((f.negative|g.negative)===0,"red works only with positives"),n(f.red&&f.red===g.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(d(f,f.umod(this.m)._forceRed(this)),f)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,g){this._verify2(f,g);var v=f.add(g);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},j.prototype.iadd=function(f,g){this._verify2(f,g);var v=f.iadd(g);return v.cmp(this.m)>=0&&v.isub(this.m),v},j.prototype.sub=function(f,g){this._verify2(f,g);var v=f.sub(g);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},j.prototype.isub=function(f,g){this._verify2(f,g);var v=f.isub(g);return v.cmpn(0)<0&&v.iadd(this.m),v},j.prototype.shl=function(f,g){return this._verify1(f),this.imod(f.ushln(g))},j.prototype.imul=function(f,g){return this._verify2(f,g),this.imod(f.imul(g))},j.prototype.mul=function(f,g){return this._verify2(f,g),this.imod(f.mul(g))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var g=this.m.andln(3);if(n(g%2===1),g===3){var v=this.m.add(new s(1)).iushrn(2);return this.pow(f,v)}for(var x=this.m.subn(1),S=0;!x.isZero()&&x.andln(1)===0;)S++,x.iushrn(1);n(!x.isZero());var A=new s(1).toRed(this),b=A.redNeg(),P=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,P).cmp(b)!==0;)I.redIAdd(b);for(var F=this.pow(I,x),ce=this.pow(f,x.addn(1).iushrn(1)),D=this.pow(f,x),se=S;D.cmp(A)!==0;){for(var ee=D,J=0;ee.cmp(A)!==0;J++)ee=ee.redSqr();n(J<se);var Q=this.pow(F,new s(1).iushln(se-J-1));ce=ce.redMul(Q),F=Q.redSqr(),D=D.redMul(F),se=J}return ce},j.prototype.invm=function(f){var g=f._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},j.prototype.pow=function(f,g){if(g.isZero())return new s(1).toRed(this);if(g.cmpn(1)===0)return f.clone();var v=4,x=new Array(1<<v);x[0]=new s(1).toRed(this),x[1]=f;for(var S=2;S<x.length;S++)x[S]=this.mul(x[S-1],f);var A=x[0],b=0,P=0,I=g.bitLength()%26;for(I===0&&(I=26),S=g.length-1;S>=0;S--){for(var F=g.words[S],ce=I-1;ce>=0;ce--){var D=F>>ce&1;if(A!==x[0]&&(A=this.sqr(A)),D===0&&b===0){P=0;continue}b<<=1,b|=D,P++,!(P!==v&&(S!==0||ce!==0))&&(A=this.mul(A,x[b]),P=0,b=0)}I=26}return A},j.prototype.convertTo=function(f){var g=f.umod(this.m);return g===f?g.clone():g},j.prototype.convertFrom=function(f){var g=f.clone();return g.red=null,g},s.mont=function(f){return new E(f)};function E(m){j.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(E,j),E.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},E.prototype.convertFrom=function(f){var g=this.imod(f.mul(this.rinv));return g.red=null,g},E.prototype.imul=function(f,g){if(f.isZero()||g.isZero())return f.words[0]=0,f.length=1,f;var v=f.imul(g),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=v.isub(x).iushrn(this.shift),A=S;return S.cmp(this.m)>=0?A=S.isub(this.m):S.cmpn(0)<0&&(A=S.iadd(this.m)),A._forceRed(this)},E.prototype.mul=function(f,g){if(f.isZero()||g.isZero())return new s(0)._forceRed(this);var v=f.mul(g),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=v.isub(x).iushrn(this.shift),A=S;return S.cmp(this.m)>=0?A=S.isub(this.m):S.cmpn(0)<0&&(A=S.iadd(this.m)),A._forceRed(this)},E.prototype.invm=function(f){var g=this.imod(f._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,nn)}(Om);var ZN=Om.exports;const rr=ji(ZN);var QN=rr.BN;function eL(t){return new QN(t,36).toString(16)}const tL="strings/5.7.0",rL=new Kr(tL);var Td;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Td||(Td={}));var m3;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(m3||(m3={}));function Nm(t,e=Td.current){e!=Td.current&&(rL.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return bn(r)}const nL=`Ethereum Signed Message:
`;function v3(t){return typeof t=="string"&&(t=Nm(t)),Dm(YN([Nm(nL),Nm(String(t.length)),t]))}const iL="address/5.7.0",cl=new Kr(iL);function b3(t){$s(t,20)||cl.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=bn(Dm(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const sL=9007199254740991;function oL(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Lm={};for(let t=0;t<10;t++)Lm[String(t)]=String(t);for(let t=0;t<26;t++)Lm[String.fromCharCode(65+t)]=String(10+t);const y3=Math.floor(oL(sL));function aL(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Lm[n]).join("");for(;e.length>=y3;){let n=e.substring(0,y3);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function cL(t){let e=null;if(typeof t!="string"&&cl.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=b3(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&cl.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==aL(t)&&cl.throwArgumentError("bad icap checksum","address",t),e=eL(t.substring(4));e.length<40;)e="0"+e;e=b3("0x"+e)}else cl.throwArgumentError("invalid address","address",t);return e}function ul(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}var fl={},wr={},ec=w3;function w3(t,e){if(!t)throw new Error(e||"Assertion failed")}w3.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var km={exports:{}};typeof Object.create=="function"?km.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:km.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Rd=km.exports,uL=ec,fL=Rd;wr.inherits=fL;function lL(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function hL(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):lL(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}wr.toArray=hL;function dL(t){for(var e="",r=0;r<t.length;r++)e+=_3(t[r].toString(16));return e}wr.toHex=dL;function x3(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}wr.htonl=x3;function pL(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=x3(i)),r+=E3(i.toString(16))}return r}wr.toHex32=pL;function _3(t){return t.length===1?"0"+t:t}wr.zero2=_3;function E3(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}wr.zero8=E3;function gL(t,e,r,n){var i=r-e;uL(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var u;n==="big"?u=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:u=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=u>>>0}return s}wr.join32=gL;function mL(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}wr.split32=mL;function vL(t,e){return t>>>e|t<<32-e}wr.rotr32=vL;function bL(t,e){return t<<e|t>>>32-e}wr.rotl32=bL;function yL(t,e){return t+e>>>0}wr.sum32=yL;function wL(t,e,r){return t+e+r>>>0}wr.sum32_3=wL;function xL(t,e,r,n){return t+e+r+n>>>0}wr.sum32_4=xL;function _L(t,e,r,n,i){return t+e+r+n+i>>>0}wr.sum32_5=_L;function EL(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}wr.sum64=EL;function SL(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}wr.sum64_hi=SL;function AL(t,e,r,n){var i=e+n;return i>>>0}wr.sum64_lo=AL;function PL(t,e,r,n,i,s,o,a){var u=0,l=e;l=l+n>>>0,u+=l<e?1:0,l=l+s>>>0,u+=l<s?1:0,l=l+a>>>0,u+=l<a?1:0;var d=t+r+i+o+u;return d>>>0}wr.sum64_4_hi=PL;function ML(t,e,r,n,i,s,o,a){var u=e+n+s+a;return u>>>0}wr.sum64_4_lo=ML;function IL(t,e,r,n,i,s,o,a,u,l){var d=0,p=e;p=p+n>>>0,d+=p<e?1:0,p=p+s>>>0,d+=p<s?1:0,p=p+a>>>0,d+=p<a?1:0,p=p+l>>>0,d+=p<l?1:0;var y=t+r+i+o+u+d;return y>>>0}wr.sum64_5_hi=IL;function CL(t,e,r,n,i,s,o,a,u,l){var d=e+n+s+a+l;return d>>>0}wr.sum64_5_lo=CL;function TL(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}wr.rotr64_hi=TL;function RL(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}wr.rotr64_lo=RL;function DL(t,e,r){return t>>>r}wr.shr64_hi=DL;function OL(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}wr.shr64_lo=OL;var hu={},S3=wr,NL=ec;function Dd(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}hu.BlockHash=Dd,Dd.prototype.update=function(e,r){if(e=S3.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=S3.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},Dd.prototype.digest=function(e){return this.update(this._pad()),NL(this.pending===null),this._digest(e)},Dd.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var du={},Fs={},LL=wr,js=LL.rotr32;function kL(t,e,r,n){if(t===0)return A3(e,r,n);if(t===1||t===3)return M3(e,r,n);if(t===2)return P3(e,r,n)}Fs.ft_1=kL;function A3(t,e,r){return t&e^~t&r}Fs.ch32=A3;function P3(t,e,r){return t&e^t&r^e&r}Fs.maj32=P3;function M3(t,e,r){return t^e^r}Fs.p32=M3;function BL(t){return js(t,2)^js(t,13)^js(t,22)}Fs.s0_256=BL;function $L(t){return js(t,6)^js(t,11)^js(t,25)}Fs.s1_256=$L;function FL(t){return js(t,7)^js(t,18)^t>>>3}Fs.g0_256=FL;function jL(t){return js(t,17)^js(t,19)^t>>>10}Fs.g1_256=jL;var pu=wr,UL=hu,qL=Fs,Bm=pu.rotl32,ll=pu.sum32,zL=pu.sum32_5,HL=qL.ft_1,I3=UL.BlockHash,WL=[1518500249,1859775393,2400959708,3395469782];function Us(){if(!(this instanceof Us))return new Us;I3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}pu.inherits(Us,I3);var KL=Us;Us.blockSize=512,Us.outSize=160,Us.hmacStrength=80,Us.padLength=64,Us.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Bm(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],u=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var d=~~(i/20),p=zL(Bm(s,5),HL(d,o,a,u),l,n[i],WL[d]);l=u,u=a,a=Bm(o,30),o=s,s=p}this.h[0]=ll(this.h[0],s),this.h[1]=ll(this.h[1],o),this.h[2]=ll(this.h[2],a),this.h[3]=ll(this.h[3],u),this.h[4]=ll(this.h[4],l)},Us.prototype._digest=function(e){return e==="hex"?pu.toHex32(this.h,"big"):pu.split32(this.h,"big")};var gu=wr,VL=hu,mu=Fs,GL=ec,bs=gu.sum32,YL=gu.sum32_4,JL=gu.sum32_5,XL=mu.ch32,ZL=mu.maj32,QL=mu.s0_256,ek=mu.s1_256,tk=mu.g0_256,rk=mu.g1_256,C3=VL.BlockHash,nk=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function qs(){if(!(this instanceof qs))return new qs;C3.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=nk,this.W=new Array(64)}gu.inherits(qs,C3);var T3=qs;qs.blockSize=512,qs.outSize=256,qs.hmacStrength=192,qs.padLength=64,qs.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=YL(rk(n[i-2]),n[i-7],tk(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],u=this.h[3],l=this.h[4],d=this.h[5],p=this.h[6],y=this.h[7];for(GL(this.k.length===n.length),i=0;i<n.length;i++){var _=JL(y,ek(l),XL(l,d,p),this.k[i],n[i]),M=bs(QL(s),ZL(s,o,a));y=p,p=d,d=l,l=bs(u,_),u=a,a=o,o=s,s=bs(_,M)}this.h[0]=bs(this.h[0],s),this.h[1]=bs(this.h[1],o),this.h[2]=bs(this.h[2],a),this.h[3]=bs(this.h[3],u),this.h[4]=bs(this.h[4],l),this.h[5]=bs(this.h[5],d),this.h[6]=bs(this.h[6],p),this.h[7]=bs(this.h[7],y)},qs.prototype._digest=function(e){return e==="hex"?gu.toHex32(this.h,"big"):gu.split32(this.h,"big")};var $m=wr,R3=T3;function bo(){if(!(this instanceof bo))return new bo;R3.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}$m.inherits(bo,R3);var ik=bo;bo.blockSize=512,bo.outSize=224,bo.hmacStrength=192,bo.padLength=64,bo.prototype._digest=function(e){return e==="hex"?$m.toHex32(this.h.slice(0,7),"big"):$m.split32(this.h.slice(0,7),"big")};var gi=wr,sk=hu,ok=ec,zs=gi.rotr64_hi,Hs=gi.rotr64_lo,D3=gi.shr64_hi,O3=gi.shr64_lo,oa=gi.sum64,Fm=gi.sum64_hi,jm=gi.sum64_lo,ak=gi.sum64_4_hi,ck=gi.sum64_4_lo,uk=gi.sum64_5_hi,fk=gi.sum64_5_lo,N3=sk.BlockHash,lk=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ys(){if(!(this instanceof ys))return new ys;N3.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=lk,this.W=new Array(160)}gi.inherits(ys,N3);var L3=ys;ys.blockSize=1024,ys.outSize=512,ys.hmacStrength=192,ys.padLength=128,ys.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=_k(n[i-4],n[i-3]),o=Ek(n[i-4],n[i-3]),a=n[i-14],u=n[i-13],l=wk(n[i-30],n[i-29]),d=xk(n[i-30],n[i-29]),p=n[i-32],y=n[i-31];n[i]=ak(s,o,a,u,l,d,p,y),n[i+1]=ck(s,o,a,u,l,d,p,y)}},ys.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4],l=this.h[5],d=this.h[6],p=this.h[7],y=this.h[8],_=this.h[9],M=this.h[10],O=this.h[11],L=this.h[12],B=this.h[13],k=this.h[14],H=this.h[15];ok(this.k.length===n.length);for(var U=0;U<n.length;U+=2){var z=k,Z=H,R=bk(y,_),W=yk(y,_),ie=hk(y,_,M,O,L),me=dk(y,_,M,O,L,B),j=this.k[U],E=this.k[U+1],m=n[U],f=n[U+1],g=uk(z,Z,R,W,ie,me,j,E,m,f),v=fk(z,Z,R,W,ie,me,j,E,m,f);z=mk(i,s),Z=vk(i,s),R=pk(i,s,o,a,u),W=gk(i,s,o,a,u,l);var x=Fm(z,Z,R,W),S=jm(z,Z,R,W);k=L,H=B,L=M,B=O,M=y,O=_,y=Fm(d,p,g,v),_=jm(p,p,g,v),d=u,p=l,u=o,l=a,o=i,a=s,i=Fm(g,v,x,S),s=jm(g,v,x,S)}oa(this.h,0,i,s),oa(this.h,2,o,a),oa(this.h,4,u,l),oa(this.h,6,d,p),oa(this.h,8,y,_),oa(this.h,10,M,O),oa(this.h,12,L,B),oa(this.h,14,k,H)},ys.prototype._digest=function(e){return e==="hex"?gi.toHex32(this.h,"big"):gi.split32(this.h,"big")};function hk(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function dk(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function pk(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function gk(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function mk(t,e){var r=zs(t,e,28),n=zs(e,t,2),i=zs(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function vk(t,e){var r=Hs(t,e,28),n=Hs(e,t,2),i=Hs(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function bk(t,e){var r=zs(t,e,14),n=zs(t,e,18),i=zs(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function yk(t,e){var r=Hs(t,e,14),n=Hs(t,e,18),i=Hs(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function wk(t,e){var r=zs(t,e,1),n=zs(t,e,8),i=D3(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function xk(t,e){var r=Hs(t,e,1),n=Hs(t,e,8),i=O3(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function _k(t,e){var r=zs(t,e,19),n=zs(e,t,29),i=D3(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function Ek(t,e){var r=Hs(t,e,19),n=Hs(e,t,29),i=O3(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var Um=wr,k3=L3;function yo(){if(!(this instanceof yo))return new yo;k3.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Um.inherits(yo,k3);var Sk=yo;yo.blockSize=1024,yo.outSize=384,yo.hmacStrength=192,yo.padLength=128,yo.prototype._digest=function(e){return e==="hex"?Um.toHex32(this.h.slice(0,12),"big"):Um.split32(this.h.slice(0,12),"big")},du.sha1=KL,du.sha224=ik,du.sha256=T3,du.sha384=Sk,du.sha512=L3;var B3={},tc=wr,Ak=hu,Od=tc.rotl32,$3=tc.sum32,hl=tc.sum32_3,F3=tc.sum32_4,j3=Ak.BlockHash;function Ws(){if(!(this instanceof Ws))return new Ws;j3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}tc.inherits(Ws,j3),B3.ripemd160=Ws,Ws.blockSize=512,Ws.outSize=160,Ws.hmacStrength=192,Ws.padLength=64,Ws.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],u=n,l=i,d=s,p=o,y=a,_=0;_<80;_++){var M=$3(Od(F3(n,U3(_,i,s,o),e[Ik[_]+r],Pk(_)),Tk[_]),a);n=a,a=o,o=Od(s,10),s=i,i=M,M=$3(Od(F3(u,U3(79-_,l,d,p),e[Ck[_]+r],Mk(_)),Rk[_]),y),u=y,y=p,p=Od(d,10),d=l,l=M}M=hl(this.h[1],s,p),this.h[1]=hl(this.h[2],o,y),this.h[2]=hl(this.h[3],a,u),this.h[3]=hl(this.h[4],n,l),this.h[4]=hl(this.h[0],i,d),this.h[0]=M},Ws.prototype._digest=function(e){return e==="hex"?tc.toHex32(this.h,"little"):tc.split32(this.h,"little")};function U3(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function Pk(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Mk(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var Ik=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ck=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Tk=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Rk=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Dk=wr,Ok=ec;function vu(t,e,r){if(!(this instanceof vu))return new vu(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Dk.toArray(e,r))}var Nk=vu;vu.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Ok(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)},vu.prototype.update=function(e,r){return this.inner.update(e,r),this},vu.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(t){var e=t;e.utils=wr,e.common=hu,e.sha=du,e.ripemd=B3,e.hmac=Nk,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(fl);const wo=ji(fl);function bu(t,e,r){return r={path:e,exports:{},require:function(n,i){return Lk(n,i??r.path)}},t(r,r.exports),r.exports}function Lk(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var qm=q3;function q3(t,e){if(!t)throw new Error(e||"Assertion failed")}q3.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var ws=bu(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var u=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)u[l]=o[l]|0;return u}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)u.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var d=o.charCodeAt(l),p=d>>8,y=d&255;p?u.push(p,y):u.push(y)}return u}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",u=0;u<o.length;u++)a+=i(o[u].toString(16));return a}r.toHex=s,r.encode=function(a,u){return u==="hex"?s(a):a}}),Ci=bu(function(t,e){var r=e;r.assert=qm,r.toArray=ws.toArray,r.zero2=ws.zero2,r.toHex=ws.toHex,r.encode=ws.encode;function n(u,l,d){var p=new Array(Math.max(u.bitLength(),d)+1);p.fill(0);for(var y=1<<l+1,_=u.clone(),M=0;M<p.length;M++){var O,L=_.andln(y-1);_.isOdd()?(L>(y>>1)-1?O=(y>>1)-L:O=L,_.isubn(O)):O=0,p[M]=O,_.iushrn(1)}return p}r.getNAF=n;function i(u,l){var d=[[],[]];u=u.clone(),l=l.clone();for(var p=0,y=0,_;u.cmpn(-p)>0||l.cmpn(-y)>0;){var M=u.andln(3)+p&3,O=l.andln(3)+y&3;M===3&&(M=-1),O===3&&(O=-1);var L;M&1?(_=u.andln(7)+p&7,(_===3||_===5)&&O===2?L=-M:L=M):L=0,d[0].push(L);var B;O&1?(_=l.andln(7)+y&7,(_===3||_===5)&&M===2?B=-O:B=O):B=0,d[1].push(B),2*p===L+1&&(p=1-p),2*y===B+1&&(y=1-y),u.iushrn(1),l.iushrn(1)}return d}r.getJSF=i;function s(u,l,d){var p="_"+l;u.prototype[l]=function(){return this[p]!==void 0?this[p]:this[p]=d.call(this)}}r.cachedProperty=s;function o(u){return typeof u=="string"?r.toArray(u,"hex"):u}r.parseBytes=o;function a(u){return new rr(u,"hex","le")}r.intFromLE=a}),Nd=Ci.getNAF,kk=Ci.getJSF,Ld=Ci.assert;function aa(t,e){this.type=t,this.p=new rr(e.p,16),this.red=e.prime?rr.red(e.prime):rr.mont(this.p),this.zero=new rr(0).toRed(this.red),this.one=new rr(1).toRed(this.red),this.two=new rr(2).toRed(this.red),this.n=e.n&&new rr(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var rc=aa;aa.prototype.point=function(){throw new Error("Not implemented")},aa.prototype.validate=function(){throw new Error("Not implemented")},aa.prototype._fixedNafMul=function(e,r){Ld(e.precomputed);var n=e._getDoubles(),i=Nd(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var l=a+n.step-1;l>=a;l--)u=(u<<1)+i[l];o.push(u)}for(var d=this.jpoint(null,null,null),p=this.jpoint(null,null,null),y=s;y>0;y--){for(a=0;a<o.length;a++)u=o[a],u===y?p=p.mixedAdd(n.points[a]):u===-y&&(p=p.mixedAdd(n.points[a].neg()));d=d.add(p)}return d.toP()},aa.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Nd(r,n,this._bitLength),a=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var l=0;u>=0&&o[u]===0;u--)l++;if(u>=0&&l++,a=a.dblp(l),u<0)break;var d=o[u];Ld(d!==0),e.type==="affine"?d>0?a=a.mixedAdd(s[d-1>>1]):a=a.mixedAdd(s[-d-1>>1].neg()):d>0?a=a.add(s[d-1>>1]):a=a.add(s[-d-1>>1].neg())}return e.type==="affine"?a.toP():a},aa.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,u=this._wnafT3,l=0,d,p,y;for(d=0;d<i;d++){y=r[d];var _=y._getNAFPoints(e);o[d]=_.wnd,a[d]=_.points}for(d=i-1;d>=1;d-=2){var M=d-1,O=d;if(o[M]!==1||o[O]!==1){u[M]=Nd(n[M],o[M],this._bitLength),u[O]=Nd(n[O],o[O],this._bitLength),l=Math.max(u[M].length,l),l=Math.max(u[O].length,l);continue}var L=[r[M],null,null,r[O]];r[M].y.cmp(r[O].y)===0?(L[1]=r[M].add(r[O]),L[2]=r[M].toJ().mixedAdd(r[O].neg())):r[M].y.cmp(r[O].y.redNeg())===0?(L[1]=r[M].toJ().mixedAdd(r[O]),L[2]=r[M].add(r[O].neg())):(L[1]=r[M].toJ().mixedAdd(r[O]),L[2]=r[M].toJ().mixedAdd(r[O].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],k=kk(n[M],n[O]);for(l=Math.max(k[0].length,l),u[M]=new Array(l),u[O]=new Array(l),p=0;p<l;p++){var H=k[0][p]|0,U=k[1][p]|0;u[M][p]=B[(H+1)*3+(U+1)],u[O][p]=0,a[M]=L}}var z=this.jpoint(null,null,null),Z=this._wnafT4;for(d=l;d>=0;d--){for(var R=0;d>=0;){var W=!0;for(p=0;p<i;p++)Z[p]=u[p][d]|0,Z[p]!==0&&(W=!1);if(!W)break;R++,d--}if(d>=0&&R++,z=z.dblp(R),d<0)break;for(p=0;p<i;p++){var ie=Z[p];ie!==0&&(ie>0?y=a[p][ie-1>>1]:ie<0&&(y=a[p][-ie-1>>1].neg()),y.type==="affine"?z=z.mixedAdd(y):z=z.add(y))}}for(d=0;d<i;d++)a[d]=null;return s?z:z.toP()};function Wi(t,e){this.curve=t,this.type=e,this.precomputed=null}aa.BasePoint=Wi,Wi.prototype.eq=function(){throw new Error("Not implemented")},Wi.prototype.validate=function(){return this.curve.validate(this)},aa.prototype.decodePoint=function(e,r){e=Ci.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Ld(e[e.length-1]%2===0):e[0]===7&&Ld(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")},Wi.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Wi.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))},Wi.prototype.encode=function(e,r){return Ci.encode(this._encode(r),e)},Wi.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},Wi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},Wi.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}},Wi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}},Wi.prototype._getBeta=function(){return null},Wi.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var zm=bu(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),Bk=Ci.assert;function Ki(t){rc.call(this,"short",t),this.a=new rr(t.a,16).toRed(this.red),this.b=new rr(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}zm(Ki,rc);var $k=Ki;Ki.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new rr(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new rr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Bk(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new rr(a.a,16),b:new rr(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}},Ki.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:rr.mont(e),n=new rr(2).toRed(r).redInvm(),i=n.redNeg(),s=new rr(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]},Ki.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new rr(1),o=new rr(0),a=new rr(0),u=new rr(1),l,d,p,y,_,M,O,L=0,B,k;n.cmpn(0)!==0;){var H=i.div(n);B=i.sub(H.mul(n)),k=a.sub(H.mul(s));var U=u.sub(H.mul(o));if(!p&&B.cmp(r)<0)l=O.neg(),d=s,p=B.neg(),y=k;else if(p&&++L===2)break;O=B,i=n,n=B,a=s,s=k,u=o,o=U}_=B.neg(),M=k;var z=p.sqr().add(y.sqr()),Z=_.sqr().add(M.sqr());return Z.cmp(z)>=0&&(_=l,M=d),p.negative&&(p=p.neg(),y=y.neg()),_.negative&&(_=_.neg(),M=M.neg()),[{a:p,b:y},{a:_,b:M}]},Ki.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),u=o.mul(i.a),l=s.mul(n.b),d=o.mul(i.b),p=e.sub(a).sub(u),y=l.add(d).neg();return{k1:p,k2:y}},Ki.prototype.pointFromX=function(e,r){e=new rr(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)},Ki.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0},Ki.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),u=e[o],l=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=u,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var d=this._wnafMulAdd(1,i,s,o*2,n),p=0;p<o*2;p++)i[p]=null,s[p]=null;return d};function Tn(t,e,r,n){rc.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new rr(e,16),this.y=new rr(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}zm(Tn,rc.BasePoint),Ki.prototype.point=function(e,r,n){return new Tn(this,e,r,n)},Ki.prototype.pointFromJSON=function(e,r){return Tn.fromJSON(this,e,r)},Tn.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}},Tn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Tn.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},Tn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Tn.prototype.isInfinity=function(){return this.inf},Tn.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},Tn.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},Tn.prototype.getX=function(){return this.x.fromRed()},Tn.prototype.getY=function(){return this.y.fromRed()},Tn.prototype.mul=function(e){return e=new rr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Tn.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},Tn.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},Tn.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},Tn.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r},Tn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function $n(t,e,r,n){rc.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new rr(0)):(this.x=new rr(e,16),this.y=new rr(r,16),this.z=new rr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}zm($n,rc.BasePoint),Ki.prototype.jpoint=function(e,r,n){return new $n(this,e,r,n)},$n.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)},$n.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},$n.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),u=i.redSub(s),l=o.redSub(a);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=u.redSqr(),p=d.redMul(u),y=i.redMul(d),_=l.redSqr().redIAdd(p).redISub(y).redISub(y),M=l.redMul(y.redISub(_)).redISub(o.redMul(p)),O=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(_,M,O)},$n.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),u=s.redSub(o);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),d=l.redMul(a),p=n.redMul(l),y=u.redSqr().redIAdd(d).redISub(p).redISub(p),_=u.redMul(p.redISub(y)).redISub(s.redMul(d)),M=this.z.redMul(a);return this.curve.jpoint(y,_,M)},$n.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,u=this.z,l=u.redSqr().redSqr(),d=a.redAdd(a);for(r=0;r<e;r++){var p=o.redSqr(),y=d.redSqr(),_=y.redSqr(),M=p.redAdd(p).redIAdd(p).redIAdd(i.redMul(l)),O=o.redMul(y),L=M.redSqr().redISub(O.redAdd(O)),B=O.redISub(L),k=M.redMul(B);k=k.redIAdd(k).redISub(_);var H=d.redMul(u);r+1<e&&(l=l.redMul(_)),o=L,u=H,d=k}return this.curve.jpoint(o,d.redMul(s),u)},$n.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},$n.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),l=u.redSqr().redISub(a).redISub(a),d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),e=l,r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),y=this.y.redSqr(),_=y.redSqr(),M=this.x.redAdd(y).redSqr().redISub(p).redISub(_);M=M.redIAdd(M);var O=p.redAdd(p).redIAdd(p),L=O.redSqr(),B=_.redIAdd(_);B=B.redIAdd(B),B=B.redIAdd(B),e=L.redISub(M).redISub(M),r=O.redMul(M.redISub(e)).redISub(B),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)},$n.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=u.redSqr().redISub(a).redISub(a);e=l;var d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),y=this.y.redSqr(),_=this.x.redMul(y),M=this.x.redSub(p).redMul(this.x.redAdd(p));M=M.redAdd(M).redIAdd(M);var O=_.redIAdd(_);O=O.redIAdd(O);var L=O.redAdd(O);e=M.redSqr().redISub(L),n=this.y.redAdd(this.z).redSqr().redISub(y).redISub(p);var B=y.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),r=M.redMul(O.redISub(e)).redISub(B)}return this.curve.jpoint(e,r,n)},$n.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),u=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var d=l.redMul(a),p=u.redSqr().redISub(d.redAdd(d)),y=d.redISub(p),_=a.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var M=u.redMul(y).redISub(_),O=n.redAdd(n).redMul(i);return this.curve.jpoint(p,M,O)},$n.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var u=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(l),p=r.redMul(d);p=p.redIAdd(p),p=p.redIAdd(p);var y=this.x.redMul(u).redISub(p);y=y.redIAdd(y),y=y.redIAdd(y);var _=this.y.redMul(d.redMul(l.redISub(d)).redISub(a.redMul(u)));_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var M=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(y,_,M)},$n.prototype.mul=function(e,r){return e=new rr(e,r),this.curve._wnafMul(this,e)},$n.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0},$n.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}},$n.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},$n.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var kd=bu(function(t,e){var r=e;r.base=rc,r.short=$k,r.mont=null,r.edwards=null}),Bd=bu(function(t,e){var r=e,n=Ci.assert;function i(a){a.type==="short"?this.curve=new kd.short(a):a.type==="edwards"?this.curve=new kd.edwards(a):this.curve=new kd.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,u){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(u);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:wo.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:wo.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:wo.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:wo.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:wo.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wo.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wo.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:wo.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function ca(t){if(!(this instanceof ca))return new ca(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ws.toArray(t.entropy,t.entropyEnc||"hex"),r=ws.toArray(t.nonce,t.nonceEnc||"hex"),n=ws.toArray(t.pers,t.persEnc||"hex");qm(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var z3=ca;ca.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},ca.prototype._hmac=function(){return new wo.hmac(this.hash,this.K)},ca.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},ca.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=ws.toArray(e,r),n=ws.toArray(n,i),qm(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},ca.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=ws.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,ws.encode(o,r)};var Hm=Ci.assert;function Kn(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Wm=Kn;Kn.fromPublic=function(e,r,n){return r instanceof Kn?r:new Kn(e,{pub:r,pubEnc:n})},Kn.fromPrivate=function(e,r,n){return r instanceof Kn?r:new Kn(e,{priv:r,privEnc:n})},Kn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Kn.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},Kn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Kn.prototype._importPrivate=function(e,r){this.priv=new rr(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},Kn.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Hm(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Hm(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},Kn.prototype.derive=function(e){return e.validate()||Hm(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Kn.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)},Kn.prototype.verify=function(e,r){return this.ec.verify(e,r,this)},Kn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Fk=Ci.assert;function $d(t,e){if(t instanceof $d)return t;this._importDER(t,e)||(Fk(t.r&&t.s,"Signature without r or s"),this.r=new rr(t.r,16),this.s=new rr(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Fd=$d;function jk(){this.place=0}function Km(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function H3(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}$d.prototype._importDER=function(e,r){e=Ci.toArray(e,r);var n=new jk;if(e[n.place++]!==48)return!1;var i=Km(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Km(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=Km(e,n);if(a===!1||e.length!==a+n.place)return!1;var u=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new rr(o),this.s=new rr(u),this.recoveryParam=null,!0};function Vm(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}$d.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=H3(r),n=H3(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Vm(i,r.length),i=i.concat(r),i.push(2),Vm(i,n.length);var s=i.concat(n),o=[48];return Vm(o,s.length),o=o.concat(s),Ci.encode(o,e)};var Uk=function(){throw new Error("unsupported")},W3=Ci.assert;function Vi(t){if(!(this instanceof Vi))return new Vi(t);typeof t=="string"&&(W3(Object.prototype.hasOwnProperty.call(Bd,t),"Unknown curve "+t),t=Bd[t]),t instanceof Bd.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var qk=Vi;Vi.prototype.keyPair=function(e){return new Wm(this,e)},Vi.prototype.keyFromPrivate=function(e,r){return Wm.fromPrivate(this,e,r)},Vi.prototype.keyFromPublic=function(e,r){return Wm.fromPublic(this,e,r)},Vi.prototype.genKeyPair=function(e){e||(e={});for(var r=new z3({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Uk(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new rr(2));;){var s=new rr(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Vi.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},Vi.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new rr(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),u=new z3({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new rr(1)),d=0;;d++){var p=i.k?i.k(d):new rr(u.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(l)>=0)){var y=this.g.mul(p);if(!y.isInfinity()){var _=y.getX(),M=_.umod(this.n);if(M.cmpn(0)!==0){var O=p.invm(this.n).mul(M.mul(r.getPrivate()).iadd(e));if(O=O.umod(this.n),O.cmpn(0)!==0){var L=(y.getY().isOdd()?1:0)|(_.cmp(M)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),L^=1),new Fd({r:M,s:O,recoveryParam:L})}}}}}},Vi.prototype.verify=function(e,r,n,i){e=this._truncateToN(new rr(e,16)),n=this.keyFromPublic(n,i),r=new Fd(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),u=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.eqXToP(s)):(d=this.g.mulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.getX().umod(this.n).cmp(s)===0)},Vi.prototype.recoverPubKey=function(t,e,r,n){W3((3&r)===r,"The recovery param is more than two bits"),e=new Fd(e,n);var i=this.n,s=new rr(t),o=e.r,a=e.s,u=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var d=e.r.invm(i),p=i.sub(s).mul(d).umod(i),y=a.mul(d).umod(i);return this.g.mulAdd(p,o,y)},Vi.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Fd(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var zk=bu(function(t,e){var r=e;r.version="6.5.4",r.utils=Ci,r.rand=function(){throw new Error("unsupported")},r.curve=kd,r.curves=Bd,r.ec=qk,r.eddsa=null}),Hk=zk.ec;const Wk="signing-key/5.7.0",Gm=new Kr(Wk);let Ym=null;function ua(){return Ym||(Ym=new Hk("secp256k1")),Ym}class Kk{constructor(e){ul(this,"curve","secp256k1"),ul(this,"privateKey",Ii(e)),XN(this.privateKey)!==32&&Gm.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=ua().keyFromPrivate(bn(this.privateKey));ul(this,"publicKey","0x"+r.getPublic(!1,"hex")),ul(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),ul(this,"_isSigningKey",!0)}_addPoint(e){const r=ua().keyFromPublic(bn(this.publicKey)),n=ua().keyFromPublic(bn(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=ua().keyFromPrivate(bn(this.privateKey)),n=bn(e);n.length!==32&&Gm.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return g3({recoveryParam:i.recoveryParam,r:lu("0x"+i.r.toString(16),32),s:lu("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=ua().keyFromPrivate(bn(this.privateKey)),n=ua().keyFromPublic(bn(K3(e)));return lu("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Vk(t,e){const r=g3(e),n={r:bn(r.r),s:bn(r.s)};return"0x"+ua().recoverPubKey(bn(t),n,r.recoveryParam).encode("hex",!1)}function K3(t,e){const r=bn(t);return r.length===32?new Kk(r).publicKey:r.length===33?"0x"+ua().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?Ii(r):Gm.throwArgumentError("invalid public or private key","key","[REDACTED]")}var V3;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(V3||(V3={}));function Gk(t){const e=K3(t);return cL(p3(Dm(p3(e,1)),12))}function Yk(t,e){return Gk(Vk(bn(t),e))}var Jm={},jd={};Object.defineProperty(jd,"__esModule",{value:!0});var Vn=or,Xm=Mi,Jk=20;function Xk(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],p=r[19]<<24|r[18]<<16|r[17]<<8|r[16],y=r[23]<<24|r[22]<<16|r[21]<<8|r[20],_=r[27]<<24|r[26]<<16|r[25]<<8|r[24],M=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=e[3]<<24|e[2]<<16|e[1]<<8|e[0],L=e[7]<<24|e[6]<<16|e[5]<<8|e[4],B=e[11]<<24|e[10]<<16|e[9]<<8|e[8],k=e[15]<<24|e[14]<<16|e[13]<<8|e[12],H=n,U=i,z=s,Z=o,R=a,W=u,ie=l,me=d,j=p,E=y,m=_,f=M,g=O,v=L,x=B,S=k,A=0;A<Jk;A+=2)H=H+R|0,g^=H,g=g>>>16|g<<16,j=j+g|0,R^=j,R=R>>>20|R<<12,U=U+W|0,v^=U,v=v>>>16|v<<16,E=E+v|0,W^=E,W=W>>>20|W<<12,z=z+ie|0,x^=z,x=x>>>16|x<<16,m=m+x|0,ie^=m,ie=ie>>>20|ie<<12,Z=Z+me|0,S^=Z,S=S>>>16|S<<16,f=f+S|0,me^=f,me=me>>>20|me<<12,z=z+ie|0,x^=z,x=x>>>24|x<<8,m=m+x|0,ie^=m,ie=ie>>>25|ie<<7,Z=Z+me|0,S^=Z,S=S>>>24|S<<8,f=f+S|0,me^=f,me=me>>>25|me<<7,U=U+W|0,v^=U,v=v>>>24|v<<8,E=E+v|0,W^=E,W=W>>>25|W<<7,H=H+R|0,g^=H,g=g>>>24|g<<8,j=j+g|0,R^=j,R=R>>>25|R<<7,H=H+W|0,S^=H,S=S>>>16|S<<16,m=m+S|0,W^=m,W=W>>>20|W<<12,U=U+ie|0,g^=U,g=g>>>16|g<<16,f=f+g|0,ie^=f,ie=ie>>>20|ie<<12,z=z+me|0,v^=z,v=v>>>16|v<<16,j=j+v|0,me^=j,me=me>>>20|me<<12,Z=Z+R|0,x^=Z,x=x>>>16|x<<16,E=E+x|0,R^=E,R=R>>>20|R<<12,z=z+me|0,v^=z,v=v>>>24|v<<8,j=j+v|0,me^=j,me=me>>>25|me<<7,Z=Z+R|0,x^=Z,x=x>>>24|x<<8,E=E+x|0,R^=E,R=R>>>25|R<<7,U=U+ie|0,g^=U,g=g>>>24|g<<8,f=f+g|0,ie^=f,ie=ie>>>25|ie<<7,H=H+W|0,S^=H,S=S>>>24|S<<8,m=m+S|0,W^=m,W=W>>>25|W<<7;Vn.writeUint32LE(H+n|0,t,0),Vn.writeUint32LE(U+i|0,t,4),Vn.writeUint32LE(z+s|0,t,8),Vn.writeUint32LE(Z+o|0,t,12),Vn.writeUint32LE(R+a|0,t,16),Vn.writeUint32LE(W+u|0,t,20),Vn.writeUint32LE(ie+l|0,t,24),Vn.writeUint32LE(me+d|0,t,28),Vn.writeUint32LE(j+p|0,t,32),Vn.writeUint32LE(E+y|0,t,36),Vn.writeUint32LE(m+_|0,t,40),Vn.writeUint32LE(f+M|0,t,44),Vn.writeUint32LE(g+O|0,t,48),Vn.writeUint32LE(v+L|0,t,52),Vn.writeUint32LE(x+B|0,t,56),Vn.writeUint32LE(S+k|0,t,60)}function G3(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),u=0;u<r.length;u+=64){Xk(a,s,t);for(var l=u;l<u+64&&l<r.length;l++)n[l]=r[l]^a[l-u];Qk(s,0,o)}return Xm.wipe(a),i===0&&Xm.wipe(s),n}jd.streamXOR=G3;function Zk(t,e,r,n){return n===void 0&&(n=0),Xm.wipe(r),G3(t,e,r,r,n)}jd.stream=Zk;function Qk(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Y3={},fa={};Object.defineProperty(fa,"__esModule",{value:!0});function eB(t,e,r){return~(t-1)&e|t-1&r}fa.select=eB;function tB(t,e){return(t|0)-(e|0)-1>>>31&1}fa.lessOrEqual=tB;function J3(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}fa.compare=J3;function rB(t,e){return t.length===0||e.length===0?!1:J3(t,e)!==0}fa.equal=rB,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fa,r=Mi;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var u=a[0]|a[1]<<8;this._r[0]=u&8191;var l=a[2]|a[3]<<8;this._r[1]=(u>>>13|l<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(l>>>10|d<<6)&7939;var p=a[6]|a[7]<<8;this._r[3]=(d>>>7|p<<9)&8191;var y=a[8]|a[9]<<8;this._r[4]=(p>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var _=a[10]|a[11]<<8;this._r[6]=(y>>>14|_<<2)&8191;var M=a[12]|a[13]<<8;this._r[7]=(_>>>11|M<<5)&8065;var O=a[14]|a[15]<<8;this._r[8]=(M>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,u,l){for(var d=this._fin?0:2048,p=this._h[0],y=this._h[1],_=this._h[2],M=this._h[3],O=this._h[4],L=this._h[5],B=this._h[6],k=this._h[7],H=this._h[8],U=this._h[9],z=this._r[0],Z=this._r[1],R=this._r[2],W=this._r[3],ie=this._r[4],me=this._r[5],j=this._r[6],E=this._r[7],m=this._r[8],f=this._r[9];l>=16;){var g=a[u+0]|a[u+1]<<8;p+=g&8191;var v=a[u+2]|a[u+3]<<8;y+=(g>>>13|v<<3)&8191;var x=a[u+4]|a[u+5]<<8;_+=(v>>>10|x<<6)&8191;var S=a[u+6]|a[u+7]<<8;M+=(x>>>7|S<<9)&8191;var A=a[u+8]|a[u+9]<<8;O+=(S>>>4|A<<12)&8191,L+=A>>>1&8191;var b=a[u+10]|a[u+11]<<8;B+=(A>>>14|b<<2)&8191;var P=a[u+12]|a[u+13]<<8;k+=(b>>>11|P<<5)&8191;var I=a[u+14]|a[u+15]<<8;H+=(P>>>8|I<<8)&8191,U+=I>>>5|d;var F=0,ce=F;ce+=p*z,ce+=y*(5*f),ce+=_*(5*m),ce+=M*(5*E),ce+=O*(5*j),F=ce>>>13,ce&=8191,ce+=L*(5*me),ce+=B*(5*ie),ce+=k*(5*W),ce+=H*(5*R),ce+=U*(5*Z),F+=ce>>>13,ce&=8191;var D=F;D+=p*Z,D+=y*z,D+=_*(5*f),D+=M*(5*m),D+=O*(5*E),F=D>>>13,D&=8191,D+=L*(5*j),D+=B*(5*me),D+=k*(5*ie),D+=H*(5*W),D+=U*(5*R),F+=D>>>13,D&=8191;var se=F;se+=p*R,se+=y*Z,se+=_*z,se+=M*(5*f),se+=O*(5*m),F=se>>>13,se&=8191,se+=L*(5*E),se+=B*(5*j),se+=k*(5*me),se+=H*(5*ie),se+=U*(5*W),F+=se>>>13,se&=8191;var ee=F;ee+=p*W,ee+=y*R,ee+=_*Z,ee+=M*z,ee+=O*(5*f),F=ee>>>13,ee&=8191,ee+=L*(5*m),ee+=B*(5*E),ee+=k*(5*j),ee+=H*(5*me),ee+=U*(5*ie),F+=ee>>>13,ee&=8191;var J=F;J+=p*ie,J+=y*W,J+=_*R,J+=M*Z,J+=O*z,F=J>>>13,J&=8191,J+=L*(5*f),J+=B*(5*m),J+=k*(5*E),J+=H*(5*j),J+=U*(5*me),F+=J>>>13,J&=8191;var Q=F;Q+=p*me,Q+=y*ie,Q+=_*W,Q+=M*R,Q+=O*Z,F=Q>>>13,Q&=8191,Q+=L*z,Q+=B*(5*f),Q+=k*(5*m),Q+=H*(5*E),Q+=U*(5*j),F+=Q>>>13,Q&=8191;var T=F;T+=p*j,T+=y*me,T+=_*ie,T+=M*W,T+=O*R,F=T>>>13,T&=8191,T+=L*Z,T+=B*z,T+=k*(5*f),T+=H*(5*m),T+=U*(5*E),F+=T>>>13,T&=8191;var X=F;X+=p*E,X+=y*j,X+=_*me,X+=M*ie,X+=O*W,F=X>>>13,X&=8191,X+=L*R,X+=B*Z,X+=k*z,X+=H*(5*f),X+=U*(5*m),F+=X>>>13,X&=8191;var re=F;re+=p*m,re+=y*E,re+=_*j,re+=M*me,re+=O*ie,F=re>>>13,re&=8191,re+=L*W,re+=B*R,re+=k*Z,re+=H*z,re+=U*(5*f),F+=re>>>13,re&=8191;var ge=F;ge+=p*f,ge+=y*m,ge+=_*E,ge+=M*j,ge+=O*me,F=ge>>>13,ge&=8191,ge+=L*ie,ge+=B*W,ge+=k*R,ge+=H*Z,ge+=U*z,F+=ge>>>13,ge&=8191,F=(F<<2)+F|0,F=F+ce|0,ce=F&8191,F=F>>>13,D+=F,p=ce,y=D,_=se,M=ee,O=J,L=Q,B=T,k=X,H=re,U=ge,u+=16,l-=16}this._h[0]=p,this._h[1]=y,this._h[2]=_,this._h[3]=M,this._h[4]=O,this._h[5]=L,this._h[6]=B,this._h[7]=k,this._h[8]=H,this._h[9]=U},o.prototype.finish=function(a,u){u===void 0&&(u=0);var l=new Uint16Array(10),d,p,y,_;if(this._leftover){for(_=this._leftover,this._buffer[_++]=1;_<16;_++)this._buffer[_]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,_=2;_<10;_++)this._h[_]+=d,d=this._h[_]>>>13,this._h[_]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,l[0]=this._h[0]+5,d=l[0]>>>13,l[0]&=8191,_=1;_<10;_++)l[_]=this._h[_]+d,d=l[_]>>>13,l[_]&=8191;for(l[9]-=8192,p=(d^1)-1,_=0;_<10;_++)l[_]&=p;for(p=~p,_=0;_<10;_++)this._h[_]=this._h[_]&p|l[_];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,_=1;_<8;_++)y=(this._h[_]+this._pad[_]|0)+(y>>>16)|0,this._h[_]=y&65535;return a[u+0]=this._h[0]>>>0,a[u+1]=this._h[0]>>>8,a[u+2]=this._h[1]>>>0,a[u+3]=this._h[1]>>>8,a[u+4]=this._h[2]>>>0,a[u+5]=this._h[2]>>>8,a[u+6]=this._h[3]>>>0,a[u+7]=this._h[3]>>>8,a[u+8]=this._h[4]>>>0,a[u+9]=this._h[4]>>>8,a[u+10]=this._h[5]>>>0,a[u+11]=this._h[5]>>>8,a[u+12]=this._h[6]>>>0,a[u+13]=this._h[6]>>>8,a[u+14]=this._h[7]>>>0,a[u+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var u=0,l=a.length,d;if(this._leftover){d=16-this._leftover,d>l&&(d=l);for(var p=0;p<d;p++)this._buffer[this._leftover+p]=a[u+p];if(l-=d,u+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(d=l-l%16,this._blocks(a,u,d),u+=d,l-=d),l){for(var p=0;p<l;p++)this._buffer[this._leftover+p]=a[u+p];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var u=new n(o);u.update(a);var l=u.digest();return u.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Y3),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=jd,r=Y3,n=Mi,i=or,s=fa;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function u(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return u.prototype.seal=function(l,d,p,y){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var _=new Uint8Array(16);_.set(l,_.length-l.length);var M=new Uint8Array(32);e.stream(this._key,_,M,4);var O=d.length+this.tagLength,L;if(y){if(y.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");L=y}else L=new Uint8Array(O);return e.streamXOR(this._key,_,d,L,4),this._authenticate(L.subarray(L.length-this.tagLength,L.length),M,L.subarray(0,L.length-this.tagLength),p),n.wipe(_),L},u.prototype.open=function(l,d,p,y){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var _=new Uint8Array(16);_.set(l,_.length-l.length);var M=new Uint8Array(32);e.stream(this._key,_,M,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,M,d.subarray(0,d.length-this.tagLength),p),!s.equal(O,d.subarray(d.length-this.tagLength,d.length)))return null;var L=d.length-this.tagLength,B;if(y){if(y.length!==L)throw new Error("ChaCha20Poly1305: incorrect destination length");B=y}else B=new Uint8Array(L);return e.streamXOR(this._key,_,d.subarray(0,d.length-this.tagLength),B,4),n.wipe(_),B},u.prototype.clean=function(){return n.wipe(this._key),this},u.prototype._authenticate=function(l,d,p,y){var _=new r.Poly1305(d);y&&(_.update(y),y.length%16>0&&_.update(o.subarray(y.length%16))),_.update(p),p.length%16>0&&_.update(o.subarray(p.length%16));var M=new Uint8Array(8);y&&i.writeUint64LE(y.length,M),_.update(M),i.writeUint64LE(p.length,M),_.update(M);for(var O=_.digest(),L=0;L<O.length;L++)l[L]=O[L];_.clean(),n.wipe(O),n.wipe(M)},u}();t.ChaCha20Poly1305=a}(Jm);var X3={},dl={},Zm={};Object.defineProperty(Zm,"__esModule",{value:!0});function nB(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Zm.isSerializableHash=nB,Object.defineProperty(dl,"__esModule",{value:!0});var Ks=Zm,iB=fa,sB=Mi,Z3=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Ks.isSerializableHash(this._inner)&&Ks.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),sB.wipe(n)}return t.prototype.reset=function(){if(!Ks.isSerializableHash(this._inner)||!Ks.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Ks.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Ks.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Ks.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Ks.isSerializableHash(this._inner)||!Ks.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Ks.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();dl.HMAC=Z3;function oB(t,e,r){var n=new Z3(t,e);n.update(r);var i=n.digest();return n.clean(),i}dl.hmac=oB,dl.equal=iB.equal,Object.defineProperty(X3,"__esModule",{value:!0});var Q3=dl,e_=Mi,aB=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Q3.hmac(this._hash,n,r);this._hmac=new Q3.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),e_.wipe(this._buffer),e_.wipe(this._counter),this._bufpos=0},t}(),cB=X3.HKDF=aB,pl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=or,r=Mi;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(u,l){if(l===void 0&&(l=u.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=u[d++],l--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._temp,this._state,u,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=u[d++],l--;return this},a.prototype.finish=function(u){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,p=l/536870912|0,y=l<<3,_=l%64<56?64:128;this._buffer[d]=128;for(var M=d+1;M<_-8;M++)this._buffer[M]=0;e.writeUint32BE(p,this._buffer,_-8),e.writeUint32BE(y,this._buffer,_-4),s(this._temp,this._state,this._buffer,0,_),this._finished=!0}for(var M=0;M<this.digestLength/4;M++)e.writeUint32BE(this._state[M],u,M*4);return this},a.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(u){return this._state.set(u.state),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(u){r.wipe(u.state),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,u,l,d,p){for(;p>=64;){for(var y=u[0],_=u[1],M=u[2],O=u[3],L=u[4],B=u[5],k=u[6],H=u[7],U=0;U<16;U++){var z=d+U*4;a[U]=e.readUint32BE(l,z)}for(var U=16;U<64;U++){var Z=a[U-2],R=(Z>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10;Z=a[U-15];var W=(Z>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3;a[U]=(R+a[U-7]|0)+(W+a[U-16]|0)}for(var U=0;U<64;U++){var R=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&B^~L&k)|0)+(H+(i[U]+a[U]|0)|0)|0,W=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&_^y&M^_&M)|0;H=k,k=B,B=L,L=O+R|0,O=M,M=_,_=y,y=R+W|0}u[0]+=y,u[1]+=_,u[2]+=M,u[3]+=O,u[4]+=L,u[5]+=B,u[6]+=k,u[7]+=H,d+=64,p-=64}return d}function o(a){var u=new n;u.update(a);var l=u.digest();return u.clean(),l}t.hash=o})(pl);var Qm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=sa,r=Mi;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(U){const z=new Float64Array(16);if(U)for(let Z=0;Z<U.length;Z++)z[Z]=U[Z];return z}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(U){let z=1;for(let Z=0;Z<16;Z++){let R=U[Z]+z+65535;z=Math.floor(R/65536),U[Z]=R-z*65536}U[0]+=z-1+37*(z-1)}function a(U,z,Z){const R=~(Z-1);for(let W=0;W<16;W++){const ie=R&(U[W]^z[W]);U[W]^=ie,z[W]^=ie}}function u(U,z){const Z=n(),R=n();for(let W=0;W<16;W++)R[W]=z[W];o(R),o(R),o(R);for(let W=0;W<2;W++){Z[0]=R[0]-65517;for(let me=1;me<15;me++)Z[me]=R[me]-65535-(Z[me-1]>>16&1),Z[me-1]&=65535;Z[15]=R[15]-32767-(Z[14]>>16&1);const ie=Z[15]>>16&1;Z[14]&=65535,a(R,Z,1-ie)}for(let W=0;W<16;W++)U[2*W]=R[W]&255,U[2*W+1]=R[W]>>8}function l(U,z){for(let Z=0;Z<16;Z++)U[Z]=z[2*Z]+(z[2*Z+1]<<8);U[15]&=32767}function d(U,z,Z){for(let R=0;R<16;R++)U[R]=z[R]+Z[R]}function p(U,z,Z){for(let R=0;R<16;R++)U[R]=z[R]-Z[R]}function y(U,z,Z){let R,W,ie=0,me=0,j=0,E=0,m=0,f=0,g=0,v=0,x=0,S=0,A=0,b=0,P=0,I=0,F=0,ce=0,D=0,se=0,ee=0,J=0,Q=0,T=0,X=0,re=0,ge=0,oe=0,fe=0,be=0,Me=0,Ne=0,Te=0,$e=Z[0],Ie=Z[1],Le=Z[2],Ve=Z[3],ke=Z[4],ze=Z[5],He=Z[6],Se=Z[7],Qe=Z[8],ct=Z[9],Be=Z[10],et=Z[11],rt=Z[12],Je=Z[13],gt=Z[14],ht=Z[15];R=z[0],ie+=R*$e,me+=R*Ie,j+=R*Le,E+=R*Ve,m+=R*ke,f+=R*ze,g+=R*He,v+=R*Se,x+=R*Qe,S+=R*ct,A+=R*Be,b+=R*et,P+=R*rt,I+=R*Je,F+=R*gt,ce+=R*ht,R=z[1],me+=R*$e,j+=R*Ie,E+=R*Le,m+=R*Ve,f+=R*ke,g+=R*ze,v+=R*He,x+=R*Se,S+=R*Qe,A+=R*ct,b+=R*Be,P+=R*et,I+=R*rt,F+=R*Je,ce+=R*gt,D+=R*ht,R=z[2],j+=R*$e,E+=R*Ie,m+=R*Le,f+=R*Ve,g+=R*ke,v+=R*ze,x+=R*He,S+=R*Se,A+=R*Qe,b+=R*ct,P+=R*Be,I+=R*et,F+=R*rt,ce+=R*Je,D+=R*gt,se+=R*ht,R=z[3],E+=R*$e,m+=R*Ie,f+=R*Le,g+=R*Ve,v+=R*ke,x+=R*ze,S+=R*He,A+=R*Se,b+=R*Qe,P+=R*ct,I+=R*Be,F+=R*et,ce+=R*rt,D+=R*Je,se+=R*gt,ee+=R*ht,R=z[4],m+=R*$e,f+=R*Ie,g+=R*Le,v+=R*Ve,x+=R*ke,S+=R*ze,A+=R*He,b+=R*Se,P+=R*Qe,I+=R*ct,F+=R*Be,ce+=R*et,D+=R*rt,se+=R*Je,ee+=R*gt,J+=R*ht,R=z[5],f+=R*$e,g+=R*Ie,v+=R*Le,x+=R*Ve,S+=R*ke,A+=R*ze,b+=R*He,P+=R*Se,I+=R*Qe,F+=R*ct,ce+=R*Be,D+=R*et,se+=R*rt,ee+=R*Je,J+=R*gt,Q+=R*ht,R=z[6],g+=R*$e,v+=R*Ie,x+=R*Le,S+=R*Ve,A+=R*ke,b+=R*ze,P+=R*He,I+=R*Se,F+=R*Qe,ce+=R*ct,D+=R*Be,se+=R*et,ee+=R*rt,J+=R*Je,Q+=R*gt,T+=R*ht,R=z[7],v+=R*$e,x+=R*Ie,S+=R*Le,A+=R*Ve,b+=R*ke,P+=R*ze,I+=R*He,F+=R*Se,ce+=R*Qe,D+=R*ct,se+=R*Be,ee+=R*et,J+=R*rt,Q+=R*Je,T+=R*gt,X+=R*ht,R=z[8],x+=R*$e,S+=R*Ie,A+=R*Le,b+=R*Ve,P+=R*ke,I+=R*ze,F+=R*He,ce+=R*Se,D+=R*Qe,se+=R*ct,ee+=R*Be,J+=R*et,Q+=R*rt,T+=R*Je,X+=R*gt,re+=R*ht,R=z[9],S+=R*$e,A+=R*Ie,b+=R*Le,P+=R*Ve,I+=R*ke,F+=R*ze,ce+=R*He,D+=R*Se,se+=R*Qe,ee+=R*ct,J+=R*Be,Q+=R*et,T+=R*rt,X+=R*Je,re+=R*gt,ge+=R*ht,R=z[10],A+=R*$e,b+=R*Ie,P+=R*Le,I+=R*Ve,F+=R*ke,ce+=R*ze,D+=R*He,se+=R*Se,ee+=R*Qe,J+=R*ct,Q+=R*Be,T+=R*et,X+=R*rt,re+=R*Je,ge+=R*gt,oe+=R*ht,R=z[11],b+=R*$e,P+=R*Ie,I+=R*Le,F+=R*Ve,ce+=R*ke,D+=R*ze,se+=R*He,ee+=R*Se,J+=R*Qe,Q+=R*ct,T+=R*Be,X+=R*et,re+=R*rt,ge+=R*Je,oe+=R*gt,fe+=R*ht,R=z[12],P+=R*$e,I+=R*Ie,F+=R*Le,ce+=R*Ve,D+=R*ke,se+=R*ze,ee+=R*He,J+=R*Se,Q+=R*Qe,T+=R*ct,X+=R*Be,re+=R*et,ge+=R*rt,oe+=R*Je,fe+=R*gt,be+=R*ht,R=z[13],I+=R*$e,F+=R*Ie,ce+=R*Le,D+=R*Ve,se+=R*ke,ee+=R*ze,J+=R*He,Q+=R*Se,T+=R*Qe,X+=R*ct,re+=R*Be,ge+=R*et,oe+=R*rt,fe+=R*Je,be+=R*gt,Me+=R*ht,R=z[14],F+=R*$e,ce+=R*Ie,D+=R*Le,se+=R*Ve,ee+=R*ke,J+=R*ze,Q+=R*He,T+=R*Se,X+=R*Qe,re+=R*ct,ge+=R*Be,oe+=R*et,fe+=R*rt,be+=R*Je,Me+=R*gt,Ne+=R*ht,R=z[15],ce+=R*$e,D+=R*Ie,se+=R*Le,ee+=R*Ve,J+=R*ke,Q+=R*ze,T+=R*He,X+=R*Se,re+=R*Qe,ge+=R*ct,oe+=R*Be,fe+=R*et,be+=R*rt,Me+=R*Je,Ne+=R*gt,Te+=R*ht,ie+=38*D,me+=38*se,j+=38*ee,E+=38*J,m+=38*Q,f+=38*T,g+=38*X,v+=38*re,x+=38*ge,S+=38*oe,A+=38*fe,b+=38*be,P+=38*Me,I+=38*Ne,F+=38*Te,W=1,R=ie+W+65535,W=Math.floor(R/65536),ie=R-W*65536,R=me+W+65535,W=Math.floor(R/65536),me=R-W*65536,R=j+W+65535,W=Math.floor(R/65536),j=R-W*65536,R=E+W+65535,W=Math.floor(R/65536),E=R-W*65536,R=m+W+65535,W=Math.floor(R/65536),m=R-W*65536,R=f+W+65535,W=Math.floor(R/65536),f=R-W*65536,R=g+W+65535,W=Math.floor(R/65536),g=R-W*65536,R=v+W+65535,W=Math.floor(R/65536),v=R-W*65536,R=x+W+65535,W=Math.floor(R/65536),x=R-W*65536,R=S+W+65535,W=Math.floor(R/65536),S=R-W*65536,R=A+W+65535,W=Math.floor(R/65536),A=R-W*65536,R=b+W+65535,W=Math.floor(R/65536),b=R-W*65536,R=P+W+65535,W=Math.floor(R/65536),P=R-W*65536,R=I+W+65535,W=Math.floor(R/65536),I=R-W*65536,R=F+W+65535,W=Math.floor(R/65536),F=R-W*65536,R=ce+W+65535,W=Math.floor(R/65536),ce=R-W*65536,ie+=W-1+37*(W-1),W=1,R=ie+W+65535,W=Math.floor(R/65536),ie=R-W*65536,R=me+W+65535,W=Math.floor(R/65536),me=R-W*65536,R=j+W+65535,W=Math.floor(R/65536),j=R-W*65536,R=E+W+65535,W=Math.floor(R/65536),E=R-W*65536,R=m+W+65535,W=Math.floor(R/65536),m=R-W*65536,R=f+W+65535,W=Math.floor(R/65536),f=R-W*65536,R=g+W+65535,W=Math.floor(R/65536),g=R-W*65536,R=v+W+65535,W=Math.floor(R/65536),v=R-W*65536,R=x+W+65535,W=Math.floor(R/65536),x=R-W*65536,R=S+W+65535,W=Math.floor(R/65536),S=R-W*65536,R=A+W+65535,W=Math.floor(R/65536),A=R-W*65536,R=b+W+65535,W=Math.floor(R/65536),b=R-W*65536,R=P+W+65535,W=Math.floor(R/65536),P=R-W*65536,R=I+W+65535,W=Math.floor(R/65536),I=R-W*65536,R=F+W+65535,W=Math.floor(R/65536),F=R-W*65536,R=ce+W+65535,W=Math.floor(R/65536),ce=R-W*65536,ie+=W-1+37*(W-1),U[0]=ie,U[1]=me,U[2]=j,U[3]=E,U[4]=m,U[5]=f,U[6]=g,U[7]=v,U[8]=x,U[9]=S,U[10]=A,U[11]=b,U[12]=P,U[13]=I,U[14]=F,U[15]=ce}function _(U,z){y(U,z,z)}function M(U,z){const Z=n();for(let R=0;R<16;R++)Z[R]=z[R];for(let R=253;R>=0;R--)_(Z,Z),R!==2&&R!==4&&y(Z,Z,z);for(let R=0;R<16;R++)U[R]=Z[R]}function O(U,z){const Z=new Uint8Array(32),R=new Float64Array(80),W=n(),ie=n(),me=n(),j=n(),E=n(),m=n();for(let x=0;x<31;x++)Z[x]=U[x];Z[31]=U[31]&127|64,Z[0]&=248,l(R,z);for(let x=0;x<16;x++)ie[x]=R[x];W[0]=j[0]=1;for(let x=254;x>=0;--x){const S=Z[x>>>3]>>>(x&7)&1;a(W,ie,S),a(me,j,S),d(E,W,me),p(W,W,me),d(me,ie,j),p(ie,ie,j),_(j,E),_(m,W),y(W,me,W),y(me,ie,E),d(E,W,me),p(W,W,me),_(ie,W),p(me,j,m),y(W,me,s),d(W,W,j),y(me,me,W),y(W,j,m),y(j,ie,R),_(ie,E),a(W,ie,S),a(me,j,S)}for(let x=0;x<16;x++)R[x+16]=W[x],R[x+32]=me[x],R[x+48]=ie[x],R[x+64]=j[x];const f=R.subarray(32),g=R.subarray(16);M(f,f),y(g,g,f);const v=new Uint8Array(32);return u(v,g),v}t.scalarMult=O;function L(U){return O(U,i)}t.scalarMultBase=L;function B(U){if(U.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const z=new Uint8Array(U);return{publicKey:L(z),secretKey:z}}t.generateKeyPairFromSeed=B;function k(U){const z=(0,e.randomBytes)(32,U),Z=B(z);return(0,r.wipe)(z),Z}t.generateKeyPair=k;function H(U,z,Z=!1){if(U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(z.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const R=O(U,z);if(Z){let W=0;for(let ie=0;ie<R.length;ie++)W|=R[ie];if(W===0)throw new Error("X25519: invalid shared key")}return R}t.sharedKey=H})(Qm);var t_={};const uB={name:"elliptic",version:"6.6.0",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}};var Ti={},e1={exports:{}};e1.exports,function(t){(function(e,r){function n(j,E){if(!j)throw new Error(E||"Assertion failed")}function i(j,E){j.super_=E;var m=function(){};m.prototype=E.prototype,j.prototype=new m,j.prototype.constructor=j}function s(j,E,m){if(s.isBN(j))return j;this.negative=0,this.words=null,this.length=0,this.red=null,j!==null&&((E==="le"||E==="be")&&(m=E,E=10),this._init(j||0,E||10,m||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=il.Buffer}catch{}s.isBN=function(E){return E instanceof s?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===s.wordSize&&Array.isArray(E.words)},s.max=function(E,m){return E.cmp(m)>0?E:m},s.min=function(E,m){return E.cmp(m)<0?E:m},s.prototype._init=function(E,m,f){if(typeof E=="number")return this._initNumber(E,m,f);if(typeof E=="object")return this._initArray(E,m,f);m==="hex"&&(m=16),n(m===(m|0)&&m>=2&&m<=36),E=E.toString().replace(/\s+/g,"");var g=0;E[0]==="-"&&(g++,this.negative=1),g<E.length&&(m===16?this._parseHex(E,g,f):(this._parseBase(E,m,g),f==="le"&&this._initArray(this.toArray(),m,f)))},s.prototype._initNumber=function(E,m,f){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(n(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),m,f)},s.prototype._initArray=function(E,m,f){if(n(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var v,x,S=0;if(f==="be")for(g=E.length-1,v=0;g>=0;g-=3)x=E[g]|E[g-1]<<8|E[g-2]<<16,this.words[v]|=x<<S&67108863,this.words[v+1]=x>>>26-S&67108863,S+=24,S>=26&&(S-=26,v++);else if(f==="le")for(g=0,v=0;g<E.length;g+=3)x=E[g]|E[g+1]<<8|E[g+2]<<16,this.words[v]|=x<<S&67108863,this.words[v+1]=x>>>26-S&67108863,S+=24,S>=26&&(S-=26,v++);return this.strip()};function a(j,E){var m=j.charCodeAt(E);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function u(j,E,m){var f=a(j,m);return m-1>=E&&(f|=a(j,m-1)<<4),f}s.prototype._parseHex=function(E,m,f){this.length=Math.ceil((E.length-m)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var v=0,x=0,S;if(f==="be")for(g=E.length-1;g>=m;g-=2)S=u(E,m,g)<<v,this.words[x]|=S&67108863,v>=18?(v-=18,x+=1,this.words[x]|=S>>>26):v+=8;else{var A=E.length-m;for(g=A%2===0?m+1:m;g<E.length;g+=2)S=u(E,m,g)<<v,this.words[x]|=S&67108863,v>=18?(v-=18,x+=1,this.words[x]|=S>>>26):v+=8}this.strip()};function l(j,E,m,f){for(var g=0,v=Math.min(j.length,m),x=E;x<v;x++){var S=j.charCodeAt(x)-48;g*=f,S>=49?g+=S-49+10:S>=17?g+=S-17+10:g+=S}return g}s.prototype._parseBase=function(E,m,f){this.words=[0],this.length=1;for(var g=0,v=1;v<=67108863;v*=m)g++;g--,v=v/m|0;for(var x=E.length-f,S=x%g,A=Math.min(x,x-S)+f,b=0,P=f;P<A;P+=g)b=l(E,P,P+g,m),this.imuln(v),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(S!==0){var I=1;for(b=l(E,P,E.length,m),P=0;P<S;P++)I*=m;this.imuln(I),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this.strip()},s.prototype.copy=function(E){E.words=new Array(this.length);for(var m=0;m<this.length;m++)E.words[m]=this.words[m];E.length=this.length,E.negative=this.negative,E.red=this.red},s.prototype.clone=function(){var E=new s(null);return this.copy(E),E},s.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(E,m){E=E||10,m=m|0||1;var f;if(E===16||E==="hex"){f="";for(var g=0,v=0,x=0;x<this.length;x++){var S=this.words[x],A=((S<<g|v)&16777215).toString(16);v=S>>>24-g&16777215,g+=2,g>=26&&(g-=26,x--),v!==0||x!==this.length-1?f=d[6-A.length]+A+f:f=A+f}for(v!==0&&(f=v.toString(16)+f);f.length%m!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(E===(E|0)&&E>=2&&E<=36){var b=p[E],P=y[E];f="";var I=this.clone();for(I.negative=0;!I.isZero();){var F=I.modn(P).toString(E);I=I.idivn(P),I.isZero()?f=F+f:f=d[b-F.length]+F+f}for(this.isZero()&&(f="0"+f);f.length%m!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(E,m){return n(typeof o<"u"),this.toArrayLike(o,E,m)},s.prototype.toArray=function(E,m){return this.toArrayLike(Array,E,m)},s.prototype.toArrayLike=function(E,m,f){var g=this.byteLength(),v=f||Math.max(1,g);n(g<=v,"byte array longer than desired length"),n(v>0,"Requested array length <= 0"),this.strip();var x=m==="le",S=new E(v),A,b,P=this.clone();if(x){for(b=0;!P.isZero();b++)A=P.andln(255),P.iushrn(8),S[b]=A;for(;b<v;b++)S[b]=0}else{for(b=0;b<v-g;b++)S[b]=0;for(b=0;!P.isZero();b++)A=P.andln(255),P.iushrn(8),S[v-b-1]=A}return S},Math.clz32?s.prototype._countBits=function(E){return 32-Math.clz32(E)}:s.prototype._countBits=function(E){var m=E,f=0;return m>=4096&&(f+=13,m>>>=13),m>=64&&(f+=7,m>>>=7),m>=8&&(f+=4,m>>>=4),m>=2&&(f+=2,m>>>=2),f+m},s.prototype._zeroBits=function(E){if(E===0)return 26;var m=E,f=0;return m&8191||(f+=13,m>>>=13),m&127||(f+=7,m>>>=7),m&15||(f+=4,m>>>=4),m&3||(f+=2,m>>>=2),m&1||f++,f},s.prototype.bitLength=function(){var E=this.words[this.length-1],m=this._countBits(E);return(this.length-1)*26+m};function _(j){for(var E=new Array(j.bitLength()),m=0;m<E.length;m++){var f=m/26|0,g=m%26;E[m]=(j.words[f]&1<<g)>>>g}return E}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,m=0;m<this.length;m++){var f=this._zeroBits(this.words[m]);if(E+=f,f!==26)break}return E},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},s.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var m=0;m<E.length;m++)this.words[m]=this.words[m]|E.words[m];return this.strip()},s.prototype.ior=function(E){return n((this.negative|E.negative)===0),this.iuor(E)},s.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},s.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},s.prototype.iuand=function(E){var m;this.length>E.length?m=E:m=this;for(var f=0;f<m.length;f++)this.words[f]=this.words[f]&E.words[f];return this.length=m.length,this.strip()},s.prototype.iand=function(E){return n((this.negative|E.negative)===0),this.iuand(E)},s.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},s.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},s.prototype.iuxor=function(E){var m,f;this.length>E.length?(m=this,f=E):(m=E,f=this);for(var g=0;g<f.length;g++)this.words[g]=m.words[g]^f.words[g];if(this!==m)for(;g<m.length;g++)this.words[g]=m.words[g];return this.length=m.length,this.strip()},s.prototype.ixor=function(E){return n((this.negative|E.negative)===0),this.iuxor(E)},s.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},s.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},s.prototype.inotn=function(E){n(typeof E=="number"&&E>=0);var m=Math.ceil(E/26)|0,f=E%26;this._expand(m),f>0&&m--;for(var g=0;g<m;g++)this.words[g]=~this.words[g]&67108863;return f>0&&(this.words[g]=~this.words[g]&67108863>>26-f),this.strip()},s.prototype.notn=function(E){return this.clone().inotn(E)},s.prototype.setn=function(E,m){n(typeof E=="number"&&E>=0);var f=E/26|0,g=E%26;return this._expand(f+1),m?this.words[f]=this.words[f]|1<<g:this.words[f]=this.words[f]&~(1<<g),this.strip()},s.prototype.iadd=function(E){var m;if(this.negative!==0&&E.negative===0)return this.negative=0,m=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,m=this.isub(E),E.negative=1,m._normSign();var f,g;this.length>E.length?(f=this,g=E):(f=E,g=this);for(var v=0,x=0;x<g.length;x++)m=(f.words[x]|0)+(g.words[x]|0)+v,this.words[x]=m&67108863,v=m>>>26;for(;v!==0&&x<f.length;x++)m=(f.words[x]|0)+v,this.words[x]=m&67108863,v=m>>>26;if(this.length=f.length,v!==0)this.words[this.length]=v,this.length++;else if(f!==this)for(;x<f.length;x++)this.words[x]=f.words[x];return this},s.prototype.add=function(E){var m;return E.negative!==0&&this.negative===0?(E.negative=0,m=this.sub(E),E.negative^=1,m):E.negative===0&&this.negative!==0?(this.negative=0,m=E.sub(this),this.negative=1,m):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},s.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var m=this.iadd(E);return E.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var f=this.cmp(E);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,v;f>0?(g=this,v=E):(g=E,v=this);for(var x=0,S=0;S<v.length;S++)m=(g.words[S]|0)-(v.words[S]|0)+x,x=m>>26,this.words[S]=m&67108863;for(;x!==0&&S<g.length;S++)m=(g.words[S]|0)+x,x=m>>26,this.words[S]=m&67108863;if(x===0&&S<g.length&&g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this.length=Math.max(this.length,S),g!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(E){return this.clone().isub(E)};function M(j,E,m){m.negative=E.negative^j.negative;var f=j.length+E.length|0;m.length=f,f=f-1|0;var g=j.words[0]|0,v=E.words[0]|0,x=g*v,S=x&67108863,A=x/67108864|0;m.words[0]=S;for(var b=1;b<f;b++){for(var P=A>>>26,I=A&67108863,F=Math.min(b,E.length-1),ce=Math.max(0,b-j.length+1);ce<=F;ce++){var D=b-ce|0;g=j.words[D]|0,v=E.words[ce]|0,x=g*v+I,P+=x/67108864|0,I=x&67108863}m.words[b]=I|0,A=P|0}return A!==0?m.words[b]=A|0:m.length--,m.strip()}var O=function(E,m,f){var g=E.words,v=m.words,x=f.words,S=0,A,b,P,I=g[0]|0,F=I&8191,ce=I>>>13,D=g[1]|0,se=D&8191,ee=D>>>13,J=g[2]|0,Q=J&8191,T=J>>>13,X=g[3]|0,re=X&8191,ge=X>>>13,oe=g[4]|0,fe=oe&8191,be=oe>>>13,Me=g[5]|0,Ne=Me&8191,Te=Me>>>13,$e=g[6]|0,Ie=$e&8191,Le=$e>>>13,Ve=g[7]|0,ke=Ve&8191,ze=Ve>>>13,He=g[8]|0,Se=He&8191,Qe=He>>>13,ct=g[9]|0,Be=ct&8191,et=ct>>>13,rt=v[0]|0,Je=rt&8191,gt=rt>>>13,ht=v[1]|0,ft=ht&8191,Ht=ht>>>13,Jt=v[2]|0,St=Jt&8191,er=Jt>>>13,Xt=v[3]|0,Ot=Xt&8191,Bt=Xt>>>13,Tt=v[4]|0,bt=Tt&8191,Dt=Tt>>>13,Lt=v[5]|0,yt=Lt&8191,$t=Lt>>>13,jt=v[6]|0,nt=jt&8191,Ft=jt>>>13,$=v[7]|0,K=$&8191,G=$>>>13,C=v[8]|0,Y=C&8191,q=C>>>13,ae=v[9]|0,pe=ae&8191,_e=ae>>>13;f.negative=E.negative^m.negative,f.length=19,A=Math.imul(F,Je),b=Math.imul(F,gt),b=b+Math.imul(ce,Je)|0,P=Math.imul(ce,gt);var Re=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(Re>>>26)|0,Re&=67108863,A=Math.imul(se,Je),b=Math.imul(se,gt),b=b+Math.imul(ee,Je)|0,P=Math.imul(ee,gt),A=A+Math.imul(F,ft)|0,b=b+Math.imul(F,Ht)|0,b=b+Math.imul(ce,ft)|0,P=P+Math.imul(ce,Ht)|0;var De=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(De>>>26)|0,De&=67108863,A=Math.imul(Q,Je),b=Math.imul(Q,gt),b=b+Math.imul(T,Je)|0,P=Math.imul(T,gt),A=A+Math.imul(se,ft)|0,b=b+Math.imul(se,Ht)|0,b=b+Math.imul(ee,ft)|0,P=P+Math.imul(ee,Ht)|0,A=A+Math.imul(F,St)|0,b=b+Math.imul(F,er)|0,b=b+Math.imul(ce,St)|0,P=P+Math.imul(ce,er)|0;var it=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(it>>>26)|0,it&=67108863,A=Math.imul(re,Je),b=Math.imul(re,gt),b=b+Math.imul(ge,Je)|0,P=Math.imul(ge,gt),A=A+Math.imul(Q,ft)|0,b=b+Math.imul(Q,Ht)|0,b=b+Math.imul(T,ft)|0,P=P+Math.imul(T,Ht)|0,A=A+Math.imul(se,St)|0,b=b+Math.imul(se,er)|0,b=b+Math.imul(ee,St)|0,P=P+Math.imul(ee,er)|0,A=A+Math.imul(F,Ot)|0,b=b+Math.imul(F,Bt)|0,b=b+Math.imul(ce,Ot)|0,P=P+Math.imul(ce,Bt)|0;var Ue=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,A=Math.imul(fe,Je),b=Math.imul(fe,gt),b=b+Math.imul(be,Je)|0,P=Math.imul(be,gt),A=A+Math.imul(re,ft)|0,b=b+Math.imul(re,Ht)|0,b=b+Math.imul(ge,ft)|0,P=P+Math.imul(ge,Ht)|0,A=A+Math.imul(Q,St)|0,b=b+Math.imul(Q,er)|0,b=b+Math.imul(T,St)|0,P=P+Math.imul(T,er)|0,A=A+Math.imul(se,Ot)|0,b=b+Math.imul(se,Bt)|0,b=b+Math.imul(ee,Ot)|0,P=P+Math.imul(ee,Bt)|0,A=A+Math.imul(F,bt)|0,b=b+Math.imul(F,Dt)|0,b=b+Math.imul(ce,bt)|0,P=P+Math.imul(ce,Dt)|0;var mt=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(mt>>>26)|0,mt&=67108863,A=Math.imul(Ne,Je),b=Math.imul(Ne,gt),b=b+Math.imul(Te,Je)|0,P=Math.imul(Te,gt),A=A+Math.imul(fe,ft)|0,b=b+Math.imul(fe,Ht)|0,b=b+Math.imul(be,ft)|0,P=P+Math.imul(be,Ht)|0,A=A+Math.imul(re,St)|0,b=b+Math.imul(re,er)|0,b=b+Math.imul(ge,St)|0,P=P+Math.imul(ge,er)|0,A=A+Math.imul(Q,Ot)|0,b=b+Math.imul(Q,Bt)|0,b=b+Math.imul(T,Ot)|0,P=P+Math.imul(T,Bt)|0,A=A+Math.imul(se,bt)|0,b=b+Math.imul(se,Dt)|0,b=b+Math.imul(ee,bt)|0,P=P+Math.imul(ee,Dt)|0,A=A+Math.imul(F,yt)|0,b=b+Math.imul(F,$t)|0,b=b+Math.imul(ce,yt)|0,P=P+Math.imul(ce,$t)|0;var st=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(st>>>26)|0,st&=67108863,A=Math.imul(Ie,Je),b=Math.imul(Ie,gt),b=b+Math.imul(Le,Je)|0,P=Math.imul(Le,gt),A=A+Math.imul(Ne,ft)|0,b=b+Math.imul(Ne,Ht)|0,b=b+Math.imul(Te,ft)|0,P=P+Math.imul(Te,Ht)|0,A=A+Math.imul(fe,St)|0,b=b+Math.imul(fe,er)|0,b=b+Math.imul(be,St)|0,P=P+Math.imul(be,er)|0,A=A+Math.imul(re,Ot)|0,b=b+Math.imul(re,Bt)|0,b=b+Math.imul(ge,Ot)|0,P=P+Math.imul(ge,Bt)|0,A=A+Math.imul(Q,bt)|0,b=b+Math.imul(Q,Dt)|0,b=b+Math.imul(T,bt)|0,P=P+Math.imul(T,Dt)|0,A=A+Math.imul(se,yt)|0,b=b+Math.imul(se,$t)|0,b=b+Math.imul(ee,yt)|0,P=P+Math.imul(ee,$t)|0,A=A+Math.imul(F,nt)|0,b=b+Math.imul(F,Ft)|0,b=b+Math.imul(ce,nt)|0,P=P+Math.imul(ce,Ft)|0;var tt=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(tt>>>26)|0,tt&=67108863,A=Math.imul(ke,Je),b=Math.imul(ke,gt),b=b+Math.imul(ze,Je)|0,P=Math.imul(ze,gt),A=A+Math.imul(Ie,ft)|0,b=b+Math.imul(Ie,Ht)|0,b=b+Math.imul(Le,ft)|0,P=P+Math.imul(Le,Ht)|0,A=A+Math.imul(Ne,St)|0,b=b+Math.imul(Ne,er)|0,b=b+Math.imul(Te,St)|0,P=P+Math.imul(Te,er)|0,A=A+Math.imul(fe,Ot)|0,b=b+Math.imul(fe,Bt)|0,b=b+Math.imul(be,Ot)|0,P=P+Math.imul(be,Bt)|0,A=A+Math.imul(re,bt)|0,b=b+Math.imul(re,Dt)|0,b=b+Math.imul(ge,bt)|0,P=P+Math.imul(ge,Dt)|0,A=A+Math.imul(Q,yt)|0,b=b+Math.imul(Q,$t)|0,b=b+Math.imul(T,yt)|0,P=P+Math.imul(T,$t)|0,A=A+Math.imul(se,nt)|0,b=b+Math.imul(se,Ft)|0,b=b+Math.imul(ee,nt)|0,P=P+Math.imul(ee,Ft)|0,A=A+Math.imul(F,K)|0,b=b+Math.imul(F,G)|0,b=b+Math.imul(ce,K)|0,P=P+Math.imul(ce,G)|0;var At=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(At>>>26)|0,At&=67108863,A=Math.imul(Se,Je),b=Math.imul(Se,gt),b=b+Math.imul(Qe,Je)|0,P=Math.imul(Qe,gt),A=A+Math.imul(ke,ft)|0,b=b+Math.imul(ke,Ht)|0,b=b+Math.imul(ze,ft)|0,P=P+Math.imul(ze,Ht)|0,A=A+Math.imul(Ie,St)|0,b=b+Math.imul(Ie,er)|0,b=b+Math.imul(Le,St)|0,P=P+Math.imul(Le,er)|0,A=A+Math.imul(Ne,Ot)|0,b=b+Math.imul(Ne,Bt)|0,b=b+Math.imul(Te,Ot)|0,P=P+Math.imul(Te,Bt)|0,A=A+Math.imul(fe,bt)|0,b=b+Math.imul(fe,Dt)|0,b=b+Math.imul(be,bt)|0,P=P+Math.imul(be,Dt)|0,A=A+Math.imul(re,yt)|0,b=b+Math.imul(re,$t)|0,b=b+Math.imul(ge,yt)|0,P=P+Math.imul(ge,$t)|0,A=A+Math.imul(Q,nt)|0,b=b+Math.imul(Q,Ft)|0,b=b+Math.imul(T,nt)|0,P=P+Math.imul(T,Ft)|0,A=A+Math.imul(se,K)|0,b=b+Math.imul(se,G)|0,b=b+Math.imul(ee,K)|0,P=P+Math.imul(ee,G)|0,A=A+Math.imul(F,Y)|0,b=b+Math.imul(F,q)|0,b=b+Math.imul(ce,Y)|0,P=P+Math.imul(ce,q)|0;var Rt=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,A=Math.imul(Be,Je),b=Math.imul(Be,gt),b=b+Math.imul(et,Je)|0,P=Math.imul(et,gt),A=A+Math.imul(Se,ft)|0,b=b+Math.imul(Se,Ht)|0,b=b+Math.imul(Qe,ft)|0,P=P+Math.imul(Qe,Ht)|0,A=A+Math.imul(ke,St)|0,b=b+Math.imul(ke,er)|0,b=b+Math.imul(ze,St)|0,P=P+Math.imul(ze,er)|0,A=A+Math.imul(Ie,Ot)|0,b=b+Math.imul(Ie,Bt)|0,b=b+Math.imul(Le,Ot)|0,P=P+Math.imul(Le,Bt)|0,A=A+Math.imul(Ne,bt)|0,b=b+Math.imul(Ne,Dt)|0,b=b+Math.imul(Te,bt)|0,P=P+Math.imul(Te,Dt)|0,A=A+Math.imul(fe,yt)|0,b=b+Math.imul(fe,$t)|0,b=b+Math.imul(be,yt)|0,P=P+Math.imul(be,$t)|0,A=A+Math.imul(re,nt)|0,b=b+Math.imul(re,Ft)|0,b=b+Math.imul(ge,nt)|0,P=P+Math.imul(ge,Ft)|0,A=A+Math.imul(Q,K)|0,b=b+Math.imul(Q,G)|0,b=b+Math.imul(T,K)|0,P=P+Math.imul(T,G)|0,A=A+Math.imul(se,Y)|0,b=b+Math.imul(se,q)|0,b=b+Math.imul(ee,Y)|0,P=P+Math.imul(ee,q)|0,A=A+Math.imul(F,pe)|0,b=b+Math.imul(F,_e)|0,b=b+Math.imul(ce,pe)|0,P=P+Math.imul(ce,_e)|0;var Mt=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,A=Math.imul(Be,ft),b=Math.imul(Be,Ht),b=b+Math.imul(et,ft)|0,P=Math.imul(et,Ht),A=A+Math.imul(Se,St)|0,b=b+Math.imul(Se,er)|0,b=b+Math.imul(Qe,St)|0,P=P+Math.imul(Qe,er)|0,A=A+Math.imul(ke,Ot)|0,b=b+Math.imul(ke,Bt)|0,b=b+Math.imul(ze,Ot)|0,P=P+Math.imul(ze,Bt)|0,A=A+Math.imul(Ie,bt)|0,b=b+Math.imul(Ie,Dt)|0,b=b+Math.imul(Le,bt)|0,P=P+Math.imul(Le,Dt)|0,A=A+Math.imul(Ne,yt)|0,b=b+Math.imul(Ne,$t)|0,b=b+Math.imul(Te,yt)|0,P=P+Math.imul(Te,$t)|0,A=A+Math.imul(fe,nt)|0,b=b+Math.imul(fe,Ft)|0,b=b+Math.imul(be,nt)|0,P=P+Math.imul(be,Ft)|0,A=A+Math.imul(re,K)|0,b=b+Math.imul(re,G)|0,b=b+Math.imul(ge,K)|0,P=P+Math.imul(ge,G)|0,A=A+Math.imul(Q,Y)|0,b=b+Math.imul(Q,q)|0,b=b+Math.imul(T,Y)|0,P=P+Math.imul(T,q)|0,A=A+Math.imul(se,pe)|0,b=b+Math.imul(se,_e)|0,b=b+Math.imul(ee,pe)|0,P=P+Math.imul(ee,_e)|0;var Et=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(Et>>>26)|0,Et&=67108863,A=Math.imul(Be,St),b=Math.imul(Be,er),b=b+Math.imul(et,St)|0,P=Math.imul(et,er),A=A+Math.imul(Se,Ot)|0,b=b+Math.imul(Se,Bt)|0,b=b+Math.imul(Qe,Ot)|0,P=P+Math.imul(Qe,Bt)|0,A=A+Math.imul(ke,bt)|0,b=b+Math.imul(ke,Dt)|0,b=b+Math.imul(ze,bt)|0,P=P+Math.imul(ze,Dt)|0,A=A+Math.imul(Ie,yt)|0,b=b+Math.imul(Ie,$t)|0,b=b+Math.imul(Le,yt)|0,P=P+Math.imul(Le,$t)|0,A=A+Math.imul(Ne,nt)|0,b=b+Math.imul(Ne,Ft)|0,b=b+Math.imul(Te,nt)|0,P=P+Math.imul(Te,Ft)|0,A=A+Math.imul(fe,K)|0,b=b+Math.imul(fe,G)|0,b=b+Math.imul(be,K)|0,P=P+Math.imul(be,G)|0,A=A+Math.imul(re,Y)|0,b=b+Math.imul(re,q)|0,b=b+Math.imul(ge,Y)|0,P=P+Math.imul(ge,q)|0,A=A+Math.imul(Q,pe)|0,b=b+Math.imul(Q,_e)|0,b=b+Math.imul(T,pe)|0,P=P+Math.imul(T,_e)|0;var dt=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(dt>>>26)|0,dt&=67108863,A=Math.imul(Be,Ot),b=Math.imul(Be,Bt),b=b+Math.imul(et,Ot)|0,P=Math.imul(et,Bt),A=A+Math.imul(Se,bt)|0,b=b+Math.imul(Se,Dt)|0,b=b+Math.imul(Qe,bt)|0,P=P+Math.imul(Qe,Dt)|0,A=A+Math.imul(ke,yt)|0,b=b+Math.imul(ke,$t)|0,b=b+Math.imul(ze,yt)|0,P=P+Math.imul(ze,$t)|0,A=A+Math.imul(Ie,nt)|0,b=b+Math.imul(Ie,Ft)|0,b=b+Math.imul(Le,nt)|0,P=P+Math.imul(Le,Ft)|0,A=A+Math.imul(Ne,K)|0,b=b+Math.imul(Ne,G)|0,b=b+Math.imul(Te,K)|0,P=P+Math.imul(Te,G)|0,A=A+Math.imul(fe,Y)|0,b=b+Math.imul(fe,q)|0,b=b+Math.imul(be,Y)|0,P=P+Math.imul(be,q)|0,A=A+Math.imul(re,pe)|0,b=b+Math.imul(re,_e)|0,b=b+Math.imul(ge,pe)|0,P=P+Math.imul(ge,_e)|0;var _t=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(_t>>>26)|0,_t&=67108863,A=Math.imul(Be,bt),b=Math.imul(Be,Dt),b=b+Math.imul(et,bt)|0,P=Math.imul(et,Dt),A=A+Math.imul(Se,yt)|0,b=b+Math.imul(Se,$t)|0,b=b+Math.imul(Qe,yt)|0,P=P+Math.imul(Qe,$t)|0,A=A+Math.imul(ke,nt)|0,b=b+Math.imul(ke,Ft)|0,b=b+Math.imul(ze,nt)|0,P=P+Math.imul(ze,Ft)|0,A=A+Math.imul(Ie,K)|0,b=b+Math.imul(Ie,G)|0,b=b+Math.imul(Le,K)|0,P=P+Math.imul(Le,G)|0,A=A+Math.imul(Ne,Y)|0,b=b+Math.imul(Ne,q)|0,b=b+Math.imul(Te,Y)|0,P=P+Math.imul(Te,q)|0,A=A+Math.imul(fe,pe)|0,b=b+Math.imul(fe,_e)|0,b=b+Math.imul(be,pe)|0,P=P+Math.imul(be,_e)|0;var ot=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(ot>>>26)|0,ot&=67108863,A=Math.imul(Be,yt),b=Math.imul(Be,$t),b=b+Math.imul(et,yt)|0,P=Math.imul(et,$t),A=A+Math.imul(Se,nt)|0,b=b+Math.imul(Se,Ft)|0,b=b+Math.imul(Qe,nt)|0,P=P+Math.imul(Qe,Ft)|0,A=A+Math.imul(ke,K)|0,b=b+Math.imul(ke,G)|0,b=b+Math.imul(ze,K)|0,P=P+Math.imul(ze,G)|0,A=A+Math.imul(Ie,Y)|0,b=b+Math.imul(Ie,q)|0,b=b+Math.imul(Le,Y)|0,P=P+Math.imul(Le,q)|0,A=A+Math.imul(Ne,pe)|0,b=b+Math.imul(Ne,_e)|0,b=b+Math.imul(Te,pe)|0,P=P+Math.imul(Te,_e)|0;var wt=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(wt>>>26)|0,wt&=67108863,A=Math.imul(Be,nt),b=Math.imul(Be,Ft),b=b+Math.imul(et,nt)|0,P=Math.imul(et,Ft),A=A+Math.imul(Se,K)|0,b=b+Math.imul(Se,G)|0,b=b+Math.imul(Qe,K)|0,P=P+Math.imul(Qe,G)|0,A=A+Math.imul(ke,Y)|0,b=b+Math.imul(ke,q)|0,b=b+Math.imul(ze,Y)|0,P=P+Math.imul(ze,q)|0,A=A+Math.imul(Ie,pe)|0,b=b+Math.imul(Ie,_e)|0,b=b+Math.imul(Le,pe)|0,P=P+Math.imul(Le,_e)|0;var lt=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(lt>>>26)|0,lt&=67108863,A=Math.imul(Be,K),b=Math.imul(Be,G),b=b+Math.imul(et,K)|0,P=Math.imul(et,G),A=A+Math.imul(Se,Y)|0,b=b+Math.imul(Se,q)|0,b=b+Math.imul(Qe,Y)|0,P=P+Math.imul(Qe,q)|0,A=A+Math.imul(ke,pe)|0,b=b+Math.imul(ke,_e)|0,b=b+Math.imul(ze,pe)|0,P=P+Math.imul(ze,_e)|0;var at=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(at>>>26)|0,at&=67108863,A=Math.imul(Be,Y),b=Math.imul(Be,q),b=b+Math.imul(et,Y)|0,P=Math.imul(et,q),A=A+Math.imul(Se,pe)|0,b=b+Math.imul(Se,_e)|0,b=b+Math.imul(Qe,pe)|0,P=P+Math.imul(Qe,_e)|0;var Ae=(S+A|0)+((b&8191)<<13)|0;S=(P+(b>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,A=Math.imul(Be,pe),b=Math.imul(Be,_e),b=b+Math.imul(et,pe)|0,P=Math.imul(et,_e);var Pe=(S+A|0)+((b&8191)<<13)|0;return S=(P+(b>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,x[0]=Re,x[1]=De,x[2]=it,x[3]=Ue,x[4]=mt,x[5]=st,x[6]=tt,x[7]=At,x[8]=Rt,x[9]=Mt,x[10]=Et,x[11]=dt,x[12]=_t,x[13]=ot,x[14]=wt,x[15]=lt,x[16]=at,x[17]=Ae,x[18]=Pe,S!==0&&(x[19]=S,f.length++),f};Math.imul||(O=M);function L(j,E,m){m.negative=E.negative^j.negative,m.length=j.length+E.length;for(var f=0,g=0,v=0;v<m.length-1;v++){var x=g;g=0;for(var S=f&67108863,A=Math.min(v,E.length-1),b=Math.max(0,v-j.length+1);b<=A;b++){var P=v-b,I=j.words[P]|0,F=E.words[b]|0,ce=I*F,D=ce&67108863;x=x+(ce/67108864|0)|0,D=D+S|0,S=D&67108863,x=x+(D>>>26)|0,g+=x>>>26,x&=67108863}m.words[v]=S,f=x,x=g}return f!==0?m.words[v]=f:m.length--,m.strip()}function B(j,E,m){var f=new k;return f.mulp(j,E,m)}s.prototype.mulTo=function(E,m){var f,g=this.length+E.length;return this.length===10&&E.length===10?f=O(this,E,m):g<63?f=M(this,E,m):g<1024?f=L(this,E,m):f=B(this,E,m),f};function k(j,E){this.x=j,this.y=E}k.prototype.makeRBT=function(E){for(var m=new Array(E),f=s.prototype._countBits(E)-1,g=0;g<E;g++)m[g]=this.revBin(g,f,E);return m},k.prototype.revBin=function(E,m,f){if(E===0||E===f-1)return E;for(var g=0,v=0;v<m;v++)g|=(E&1)<<m-v-1,E>>=1;return g},k.prototype.permute=function(E,m,f,g,v,x){for(var S=0;S<x;S++)g[S]=m[E[S]],v[S]=f[E[S]]},k.prototype.transform=function(E,m,f,g,v,x){this.permute(x,E,m,f,g,v);for(var S=1;S<v;S<<=1)for(var A=S<<1,b=Math.cos(2*Math.PI/A),P=Math.sin(2*Math.PI/A),I=0;I<v;I+=A)for(var F=b,ce=P,D=0;D<S;D++){var se=f[I+D],ee=g[I+D],J=f[I+D+S],Q=g[I+D+S],T=F*J-ce*Q;Q=F*Q+ce*J,J=T,f[I+D]=se+J,g[I+D]=ee+Q,f[I+D+S]=se-J,g[I+D+S]=ee-Q,D!==A&&(T=b*F-P*ce,ce=b*ce+P*F,F=T)}},k.prototype.guessLen13b=function(E,m){var f=Math.max(m,E)|1,g=f&1,v=0;for(f=f/2|0;f;f=f>>>1)v++;return 1<<v+1+g},k.prototype.conjugate=function(E,m,f){if(!(f<=1))for(var g=0;g<f/2;g++){var v=E[g];E[g]=E[f-g-1],E[f-g-1]=v,v=m[g],m[g]=-m[f-g-1],m[f-g-1]=-v}},k.prototype.normalize13b=function(E,m){for(var f=0,g=0;g<m/2;g++){var v=Math.round(E[2*g+1]/m)*8192+Math.round(E[2*g]/m)+f;E[g]=v&67108863,v<67108864?f=0:f=v/67108864|0}return E},k.prototype.convert13b=function(E,m,f,g){for(var v=0,x=0;x<m;x++)v=v+(E[x]|0),f[2*x]=v&8191,v=v>>>13,f[2*x+1]=v&8191,v=v>>>13;for(x=2*m;x<g;++x)f[x]=0;n(v===0),n((v&-8192)===0)},k.prototype.stub=function(E){for(var m=new Array(E),f=0;f<E;f++)m[f]=0;return m},k.prototype.mulp=function(E,m,f){var g=2*this.guessLen13b(E.length,m.length),v=this.makeRBT(g),x=this.stub(g),S=new Array(g),A=new Array(g),b=new Array(g),P=new Array(g),I=new Array(g),F=new Array(g),ce=f.words;ce.length=g,this.convert13b(E.words,E.length,S,g),this.convert13b(m.words,m.length,P,g),this.transform(S,x,A,b,g,v),this.transform(P,x,I,F,g,v);for(var D=0;D<g;D++){var se=A[D]*I[D]-b[D]*F[D];b[D]=A[D]*F[D]+b[D]*I[D],A[D]=se}return this.conjugate(A,b,g),this.transform(A,b,ce,x,g,v),this.conjugate(ce,x,g),this.normalize13b(ce,g),f.negative=E.negative^m.negative,f.length=E.length+m.length,f.strip()},s.prototype.mul=function(E){var m=new s(null);return m.words=new Array(this.length+E.length),this.mulTo(E,m)},s.prototype.mulf=function(E){var m=new s(null);return m.words=new Array(this.length+E.length),B(this,E,m)},s.prototype.imul=function(E){return this.clone().mulTo(E,this)},s.prototype.imuln=function(E){n(typeof E=="number"),n(E<67108864);for(var m=0,f=0;f<this.length;f++){var g=(this.words[f]|0)*E,v=(g&67108863)+(m&67108863);m>>=26,m+=g/67108864|0,m+=v>>>26,this.words[f]=v&67108863}return m!==0&&(this.words[f]=m,this.length++),this},s.prototype.muln=function(E){return this.clone().imuln(E)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(E){var m=_(E);if(m.length===0)return new s(1);for(var f=this,g=0;g<m.length&&m[g]===0;g++,f=f.sqr());if(++g<m.length)for(var v=f.sqr();g<m.length;g++,v=v.sqr())m[g]!==0&&(f=f.mul(v));return f},s.prototype.iushln=function(E){n(typeof E=="number"&&E>=0);var m=E%26,f=(E-m)/26,g=67108863>>>26-m<<26-m,v;if(m!==0){var x=0;for(v=0;v<this.length;v++){var S=this.words[v]&g,A=(this.words[v]|0)-S<<m;this.words[v]=A|x,x=S>>>26-m}x&&(this.words[v]=x,this.length++)}if(f!==0){for(v=this.length-1;v>=0;v--)this.words[v+f]=this.words[v];for(v=0;v<f;v++)this.words[v]=0;this.length+=f}return this.strip()},s.prototype.ishln=function(E){return n(this.negative===0),this.iushln(E)},s.prototype.iushrn=function(E,m,f){n(typeof E=="number"&&E>=0);var g;m?g=(m-m%26)/26:g=0;var v=E%26,x=Math.min((E-v)/26,this.length),S=67108863^67108863>>>v<<v,A=f;if(g-=x,g=Math.max(0,g),A){for(var b=0;b<x;b++)A.words[b]=this.words[b];A.length=x}if(x!==0)if(this.length>x)for(this.length-=x,b=0;b<this.length;b++)this.words[b]=this.words[b+x];else this.words[0]=0,this.length=1;var P=0;for(b=this.length-1;b>=0&&(P!==0||b>=g);b--){var I=this.words[b]|0;this.words[b]=P<<26-v|I>>>v,P=I&S}return A&&P!==0&&(A.words[A.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(E,m,f){return n(this.negative===0),this.iushrn(E,m,f)},s.prototype.shln=function(E){return this.clone().ishln(E)},s.prototype.ushln=function(E){return this.clone().iushln(E)},s.prototype.shrn=function(E){return this.clone().ishrn(E)},s.prototype.ushrn=function(E){return this.clone().iushrn(E)},s.prototype.testn=function(E){n(typeof E=="number"&&E>=0);var m=E%26,f=(E-m)/26,g=1<<m;if(this.length<=f)return!1;var v=this.words[f];return!!(v&g)},s.prototype.imaskn=function(E){n(typeof E=="number"&&E>=0);var m=E%26,f=(E-m)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(m!==0&&f++,this.length=Math.min(f,this.length),m!==0){var g=67108863^67108863>>>m<<m;this.words[this.length-1]&=g}return this.strip()},s.prototype.maskn=function(E){return this.clone().imaskn(E)},s.prototype.iaddn=function(E){return n(typeof E=="number"),n(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},s.prototype._iaddn=function(E){this.words[0]+=E;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},s.prototype.isubn=function(E){if(n(typeof E=="number"),n(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},s.prototype.addn=function(E){return this.clone().iaddn(E)},s.prototype.subn=function(E){return this.clone().isubn(E)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(E,m,f){var g=E.length+f,v;this._expand(g);var x,S=0;for(v=0;v<E.length;v++){x=(this.words[v+f]|0)+S;var A=(E.words[v]|0)*m;x-=A&67108863,S=(x>>26)-(A/67108864|0),this.words[v+f]=x&67108863}for(;v<this.length-f;v++)x=(this.words[v+f]|0)+S,S=x>>26,this.words[v+f]=x&67108863;if(S===0)return this.strip();for(n(S===-1),S=0,v=0;v<this.length;v++)x=-(this.words[v]|0)+S,S=x>>26,this.words[v]=x&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(E,m){var f=this.length-E.length,g=this.clone(),v=E,x=v.words[v.length-1]|0,S=this._countBits(x);f=26-S,f!==0&&(v=v.ushln(f),g.iushln(f),x=v.words[v.length-1]|0);var A=g.length-v.length,b;if(m!=="mod"){b=new s(null),b.length=A+1,b.words=new Array(b.length);for(var P=0;P<b.length;P++)b.words[P]=0}var I=g.clone()._ishlnsubmul(v,1,A);I.negative===0&&(g=I,b&&(b.words[A]=1));for(var F=A-1;F>=0;F--){var ce=(g.words[v.length+F]|0)*67108864+(g.words[v.length+F-1]|0);for(ce=Math.min(ce/x|0,67108863),g._ishlnsubmul(v,ce,F);g.negative!==0;)ce--,g.negative=0,g._ishlnsubmul(v,1,F),g.isZero()||(g.negative^=1);b&&(b.words[F]=ce)}return b&&b.strip(),g.strip(),m!=="div"&&f!==0&&g.iushrn(f),{div:b||null,mod:g}},s.prototype.divmod=function(E,m,f){if(n(!E.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,v,x;return this.negative!==0&&E.negative===0?(x=this.neg().divmod(E,m),m!=="mod"&&(g=x.div.neg()),m!=="div"&&(v=x.mod.neg(),f&&v.negative!==0&&v.iadd(E)),{div:g,mod:v}):this.negative===0&&E.negative!==0?(x=this.divmod(E.neg(),m),m!=="mod"&&(g=x.div.neg()),{div:g,mod:x.mod}):this.negative&E.negative?(x=this.neg().divmod(E.neg(),m),m!=="div"&&(v=x.mod.neg(),f&&v.negative!==0&&v.isub(E)),{div:x.div,mod:v}):E.length>this.length||this.cmp(E)<0?{div:new s(0),mod:this}:E.length===1?m==="div"?{div:this.divn(E.words[0]),mod:null}:m==="mod"?{div:null,mod:new s(this.modn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new s(this.modn(E.words[0]))}:this._wordDiv(E,m)},s.prototype.div=function(E){return this.divmod(E,"div",!1).div},s.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},s.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},s.prototype.divRound=function(E){var m=this.divmod(E);if(m.mod.isZero())return m.div;var f=m.div.negative!==0?m.mod.isub(E):m.mod,g=E.ushrn(1),v=E.andln(1),x=f.cmp(g);return x<0||v===1&&x===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},s.prototype.modn=function(E){n(E<=67108863);for(var m=(1<<26)%E,f=0,g=this.length-1;g>=0;g--)f=(m*f+(this.words[g]|0))%E;return f},s.prototype.idivn=function(E){n(E<=67108863);for(var m=0,f=this.length-1;f>=0;f--){var g=(this.words[f]|0)+m*67108864;this.words[f]=g/E|0,m=g%E}return this.strip()},s.prototype.divn=function(E){return this.clone().idivn(E)},s.prototype.egcd=function(E){n(E.negative===0),n(!E.isZero());var m=this,f=E.clone();m.negative!==0?m=m.umod(E):m=m.clone();for(var g=new s(1),v=new s(0),x=new s(0),S=new s(1),A=0;m.isEven()&&f.isEven();)m.iushrn(1),f.iushrn(1),++A;for(var b=f.clone(),P=m.clone();!m.isZero();){for(var I=0,F=1;!(m.words[0]&F)&&I<26;++I,F<<=1);if(I>0)for(m.iushrn(I);I-- >0;)(g.isOdd()||v.isOdd())&&(g.iadd(b),v.isub(P)),g.iushrn(1),v.iushrn(1);for(var ce=0,D=1;!(f.words[0]&D)&&ce<26;++ce,D<<=1);if(ce>0)for(f.iushrn(ce);ce-- >0;)(x.isOdd()||S.isOdd())&&(x.iadd(b),S.isub(P)),x.iushrn(1),S.iushrn(1);m.cmp(f)>=0?(m.isub(f),g.isub(x),v.isub(S)):(f.isub(m),x.isub(g),S.isub(v))}return{a:x,b:S,gcd:f.iushln(A)}},s.prototype._invmp=function(E){n(E.negative===0),n(!E.isZero());var m=this,f=E.clone();m.negative!==0?m=m.umod(E):m=m.clone();for(var g=new s(1),v=new s(0),x=f.clone();m.cmpn(1)>0&&f.cmpn(1)>0;){for(var S=0,A=1;!(m.words[0]&A)&&S<26;++S,A<<=1);if(S>0)for(m.iushrn(S);S-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);for(var b=0,P=1;!(f.words[0]&P)&&b<26;++b,P<<=1);if(b>0)for(f.iushrn(b);b-- >0;)v.isOdd()&&v.iadd(x),v.iushrn(1);m.cmp(f)>=0?(m.isub(f),g.isub(v)):(f.isub(m),v.isub(g))}var I;return m.cmpn(1)===0?I=g:I=v,I.cmpn(0)<0&&I.iadd(E),I},s.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var m=this.clone(),f=E.clone();m.negative=0,f.negative=0;for(var g=0;m.isEven()&&f.isEven();g++)m.iushrn(1),f.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;f.isEven();)f.iushrn(1);var v=m.cmp(f);if(v<0){var x=m;m=f,f=x}else if(v===0||f.cmpn(1)===0)break;m.isub(f)}while(!0);return f.iushln(g)},s.prototype.invm=function(E){return this.egcd(E).a.umod(E)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(E){return this.words[0]&E},s.prototype.bincn=function(E){n(typeof E=="number");var m=E%26,f=(E-m)/26,g=1<<m;if(this.length<=f)return this._expand(f+1),this.words[f]|=g,this;for(var v=g,x=f;v!==0&&x<this.length;x++){var S=this.words[x]|0;S+=v,v=S>>>26,S&=67108863,this.words[x]=S}return v!==0&&(this.words[x]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(E){var m=E<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var f;if(this.length>1)f=1;else{m&&(E=-E),n(E<=67108863,"Number is too big");var g=this.words[0]|0;f=g===E?0:g<E?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var m=this.ucmp(E);return this.negative!==0?-m|0:m},s.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var m=0,f=this.length-1;f>=0;f--){var g=this.words[f]|0,v=E.words[f]|0;if(g!==v){g<v?m=-1:g>v&&(m=1);break}}return m},s.prototype.gtn=function(E){return this.cmpn(E)===1},s.prototype.gt=function(E){return this.cmp(E)===1},s.prototype.gten=function(E){return this.cmpn(E)>=0},s.prototype.gte=function(E){return this.cmp(E)>=0},s.prototype.ltn=function(E){return this.cmpn(E)===-1},s.prototype.lt=function(E){return this.cmp(E)===-1},s.prototype.lten=function(E){return this.cmpn(E)<=0},s.prototype.lte=function(E){return this.cmp(E)<=0},s.prototype.eqn=function(E){return this.cmpn(E)===0},s.prototype.eq=function(E){return this.cmp(E)===0},s.red=function(E){return new ie(E)},s.prototype.toRed=function(E){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(E){return this.red=E,this},s.prototype.forceRed=function(E){return n(!this.red,"Already a number in reduction context"),this._forceRed(E)},s.prototype.redAdd=function(E){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},s.prototype.redIAdd=function(E){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},s.prototype.redSub=function(E){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},s.prototype.redISub=function(E){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},s.prototype.redShl=function(E){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},s.prototype.redMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},s.prototype.redIMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(E){return n(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var H={k256:null,p224:null,p192:null,p25519:null};function U(j,E){this.name=j,this.p=new s(E,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var E=new s(null);return E.words=new Array(Math.ceil(this.n/13)),E},U.prototype.ireduce=function(E){var m=E,f;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),f=m.bitLength();while(f>this.n);var g=f<this.n?-1:m.ucmp(this.p);return g===0?(m.words[0]=0,m.length=1):g>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},U.prototype.split=function(E,m){E.iushrn(this.n,0,m)},U.prototype.imulK=function(E){return E.imul(this.k)};function z(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(z,U),z.prototype.split=function(E,m){for(var f=4194303,g=Math.min(E.length,9),v=0;v<g;v++)m.words[v]=E.words[v];if(m.length=g,E.length<=9){E.words[0]=0,E.length=1;return}var x=E.words[9];for(m.words[m.length++]=x&f,v=10;v<E.length;v++){var S=E.words[v]|0;E.words[v-10]=(S&f)<<4|x>>>22,x=S}x>>>=22,E.words[v-10]=x,x===0&&E.length>10?E.length-=10:E.length-=9},z.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var m=0,f=0;f<E.length;f++){var g=E.words[f]|0;m+=g*977,E.words[f]=m&67108863,m=g*64+(m/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function Z(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Z,U);function R(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(R,U);function W(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(W,U),W.prototype.imulK=function(E){for(var m=0,f=0;f<E.length;f++){var g=(E.words[f]|0)*19+m,v=g&67108863;g>>>=26,E.words[f]=v,m=g}return m!==0&&(E.words[E.length++]=m),E},s._prime=function(E){if(H[E])return H[E];var m;if(E==="k256")m=new z;else if(E==="p224")m=new Z;else if(E==="p192")m=new R;else if(E==="p25519")m=new W;else throw new Error("Unknown prime "+E);return H[E]=m,m};function ie(j){if(typeof j=="string"){var E=s._prime(j);this.m=E.p,this.prime=E}else n(j.gtn(1),"modulus must be greater than 1"),this.m=j,this.prime=null}ie.prototype._verify1=function(E){n(E.negative===0,"red works only with positives"),n(E.red,"red works only with red numbers")},ie.prototype._verify2=function(E,m){n((E.negative|m.negative)===0,"red works only with positives"),n(E.red&&E.red===m.red,"red works only with red numbers")},ie.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):E.umod(this.m)._forceRed(this)},ie.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},ie.prototype.add=function(E,m){this._verify2(E,m);var f=E.add(m);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},ie.prototype.iadd=function(E,m){this._verify2(E,m);var f=E.iadd(m);return f.cmp(this.m)>=0&&f.isub(this.m),f},ie.prototype.sub=function(E,m){this._verify2(E,m);var f=E.sub(m);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},ie.prototype.isub=function(E,m){this._verify2(E,m);var f=E.isub(m);return f.cmpn(0)<0&&f.iadd(this.m),f},ie.prototype.shl=function(E,m){return this._verify1(E),this.imod(E.ushln(m))},ie.prototype.imul=function(E,m){return this._verify2(E,m),this.imod(E.imul(m))},ie.prototype.mul=function(E,m){return this._verify2(E,m),this.imod(E.mul(m))},ie.prototype.isqr=function(E){return this.imul(E,E.clone())},ie.prototype.sqr=function(E){return this.mul(E,E)},ie.prototype.sqrt=function(E){if(E.isZero())return E.clone();var m=this.m.andln(3);if(n(m%2===1),m===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(E,f)}for(var g=this.m.subn(1),v=0;!g.isZero()&&g.andln(1)===0;)v++,g.iushrn(1);n(!g.isZero());var x=new s(1).toRed(this),S=x.redNeg(),A=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new s(2*b*b).toRed(this);this.pow(b,A).cmp(S)!==0;)b.redIAdd(S);for(var P=this.pow(b,g),I=this.pow(E,g.addn(1).iushrn(1)),F=this.pow(E,g),ce=v;F.cmp(x)!==0;){for(var D=F,se=0;D.cmp(x)!==0;se++)D=D.redSqr();n(se<ce);var ee=this.pow(P,new s(1).iushln(ce-se-1));I=I.redMul(ee),P=ee.redSqr(),F=F.redMul(P),ce=se}return I},ie.prototype.invm=function(E){var m=E._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},ie.prototype.pow=function(E,m){if(m.isZero())return new s(1).toRed(this);if(m.cmpn(1)===0)return E.clone();var f=4,g=new Array(1<<f);g[0]=new s(1).toRed(this),g[1]=E;for(var v=2;v<g.length;v++)g[v]=this.mul(g[v-1],E);var x=g[0],S=0,A=0,b=m.bitLength()%26;for(b===0&&(b=26),v=m.length-1;v>=0;v--){for(var P=m.words[v],I=b-1;I>=0;I--){var F=P>>I&1;if(x!==g[0]&&(x=this.sqr(x)),F===0&&S===0){A=0;continue}S<<=1,S|=F,A++,!(A!==f&&(v!==0||I!==0))&&(x=this.mul(x,g[S]),A=0,S=0)}b=26}return x},ie.prototype.convertTo=function(E){var m=E.umod(this.m);return m===E?m.clone():m},ie.prototype.convertFrom=function(E){var m=E.clone();return m.red=null,m},s.mont=function(E){return new me(E)};function me(j){ie.call(this,j),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(me,ie),me.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},me.prototype.convertFrom=function(E){var m=this.imod(E.mul(this.rinv));return m.red=null,m},me.prototype.imul=function(E,m){if(E.isZero()||m.isZero())return E.words[0]=0,E.length=1,E;var f=E.imul(m),g=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(g).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},me.prototype.mul=function(E,m){if(E.isZero()||m.isZero())return new s(0)._forceRed(this);var f=E.mul(m),g=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(g).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},me.prototype.invm=function(E){var m=this.imod(E._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(t,nn)}(e1);var xo=e1.exports,t1={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)a[u]=s[u]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)a.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var l=s.charCodeAt(u),d=l>>8,p=l&255;d?a.push(d,p):a.push(p)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(t1),function(t){var e=t,r=xo,n=ec,i=t1;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(d,p,y){var _=new Array(Math.max(d.bitLength(),y)+1),M;for(M=0;M<_.length;M+=1)_[M]=0;var O=1<<p+1,L=d.clone();for(M=0;M<_.length;M++){var B,k=L.andln(O-1);L.isOdd()?(k>(O>>1)-1?B=(O>>1)-k:B=k,L.isubn(B)):B=0,_[M]=B,L.iushrn(1)}return _}e.getNAF=s;function o(d,p){var y=[[],[]];d=d.clone(),p=p.clone();for(var _=0,M=0,O;d.cmpn(-_)>0||p.cmpn(-M)>0;){var L=d.andln(3)+_&3,B=p.andln(3)+M&3;L===3&&(L=-1),B===3&&(B=-1);var k;L&1?(O=d.andln(7)+_&7,(O===3||O===5)&&B===2?k=-L:k=L):k=0,y[0].push(k);var H;B&1?(O=p.andln(7)+M&7,(O===3||O===5)&&L===2?H=-B:H=B):H=0,y[1].push(H),2*_===k+1&&(_=1-_),2*M===H+1&&(M=1-M),d.iushrn(1),p.iushrn(1)}return y}e.getJSF=o;function a(d,p,y){var _="_"+p;d.prototype[p]=function(){return this[_]!==void 0?this[_]:this[_]=y.call(this)}}e.cachedProperty=a;function u(d){return typeof d=="string"?e.toArray(d,"hex"):d}e.parseBytes=u;function l(d){return new r(d,"hex","le")}e.intFromLE=l}(Ti);var r1={exports:{}},n1;r1.exports=function(e){return n1||(n1=new la(null)),n1.generate(e)};function la(t){this.rand=t}if(r1.exports.Rand=la,la.prototype.generate=function(e){return this._rand(e)},la.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r},typeof self=="object")self.crypto&&self.crypto.getRandomValues?la.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?la.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(la.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r_=il;if(typeof r_.randomBytes!="function")throw new Error("Not supported");la.prototype._rand=function(e){return r_.randomBytes(e)}}catch{}var n_=r1.exports,i1={},nc=xo,gl=Ti,Ud=gl.getNAF,fB=gl.getJSF,qd=gl.assert;function ha(t,e){this.type=t,this.p=new nc(e.p,16),this.red=e.prime?nc.red(e.prime):nc.mont(this.p),this.zero=new nc(0).toRed(this.red),this.one=new nc(1).toRed(this.red),this.two=new nc(2).toRed(this.red),this.n=e.n&&new nc(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var zd=ha;ha.prototype.point=function(){throw new Error("Not implemented")},ha.prototype.validate=function(){throw new Error("Not implemented")},ha.prototype._fixedNafMul=function(e,r){qd(e.precomputed);var n=e._getDoubles(),i=Ud(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var l=a+n.step-1;l>=a;l--)u=(u<<1)+i[l];o.push(u)}for(var d=this.jpoint(null,null,null),p=this.jpoint(null,null,null),y=s;y>0;y--){for(a=0;a<o.length;a++)u=o[a],u===y?p=p.mixedAdd(n.points[a]):u===-y&&(p=p.mixedAdd(n.points[a].neg()));d=d.add(p)}return d.toP()},ha.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Ud(r,n,this._bitLength),a=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var l=0;u>=0&&o[u]===0;u--)l++;if(u>=0&&l++,a=a.dblp(l),u<0)break;var d=o[u];qd(d!==0),e.type==="affine"?d>0?a=a.mixedAdd(s[d-1>>1]):a=a.mixedAdd(s[-d-1>>1].neg()):d>0?a=a.add(s[d-1>>1]):a=a.add(s[-d-1>>1].neg())}return e.type==="affine"?a.toP():a},ha.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,u=this._wnafT3,l=0,d,p,y;for(d=0;d<i;d++){y=r[d];var _=y._getNAFPoints(e);o[d]=_.wnd,a[d]=_.points}for(d=i-1;d>=1;d-=2){var M=d-1,O=d;if(o[M]!==1||o[O]!==1){u[M]=Ud(n[M],o[M],this._bitLength),u[O]=Ud(n[O],o[O],this._bitLength),l=Math.max(u[M].length,l),l=Math.max(u[O].length,l);continue}var L=[r[M],null,null,r[O]];r[M].y.cmp(r[O].y)===0?(L[1]=r[M].add(r[O]),L[2]=r[M].toJ().mixedAdd(r[O].neg())):r[M].y.cmp(r[O].y.redNeg())===0?(L[1]=r[M].toJ().mixedAdd(r[O]),L[2]=r[M].add(r[O].neg())):(L[1]=r[M].toJ().mixedAdd(r[O]),L[2]=r[M].toJ().mixedAdd(r[O].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],k=fB(n[M],n[O]);for(l=Math.max(k[0].length,l),u[M]=new Array(l),u[O]=new Array(l),p=0;p<l;p++){var H=k[0][p]|0,U=k[1][p]|0;u[M][p]=B[(H+1)*3+(U+1)],u[O][p]=0,a[M]=L}}var z=this.jpoint(null,null,null),Z=this._wnafT4;for(d=l;d>=0;d--){for(var R=0;d>=0;){var W=!0;for(p=0;p<i;p++)Z[p]=u[p][d]|0,Z[p]!==0&&(W=!1);if(!W)break;R++,d--}if(d>=0&&R++,z=z.dblp(R),d<0)break;for(p=0;p<i;p++){var ie=Z[p];ie!==0&&(ie>0?y=a[p][ie-1>>1]:ie<0&&(y=a[p][-ie-1>>1].neg()),y.type==="affine"?z=z.mixedAdd(y):z=z.add(y))}}for(d=0;d<i;d++)a[d]=null;return s?z:z.toP()};function Gi(t,e){this.curve=t,this.type=e,this.precomputed=null}ha.BasePoint=Gi,Gi.prototype.eq=function(){throw new Error("Not implemented")},Gi.prototype.validate=function(){return this.curve.validate(this)},ha.prototype.decodePoint=function(e,r){e=gl.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?qd(e[e.length-1]%2===0):e[0]===7&&qd(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")},Gi.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Gi.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))},Gi.prototype.encode=function(e,r){return gl.encode(this._encode(r),e)},Gi.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},Gi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},Gi.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}},Gi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}},Gi.prototype._getBeta=function(){return null},Gi.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var lB=Ti,en=xo,s1=Rd,yu=zd,hB=lB.assert;function Yi(t){yu.call(this,"short",t),this.a=new en(t.a,16).toRed(this.red),this.b=new en(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}s1(Yi,yu);var dB=Yi;Yi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new en(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new en(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],hB(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new en(a.a,16),b:new en(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}},Yi.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:en.mont(e),n=new en(2).toRed(r).redInvm(),i=n.redNeg(),s=new en(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]},Yi.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new en(1),o=new en(0),a=new en(0),u=new en(1),l,d,p,y,_,M,O,L=0,B,k;n.cmpn(0)!==0;){var H=i.div(n);B=i.sub(H.mul(n)),k=a.sub(H.mul(s));var U=u.sub(H.mul(o));if(!p&&B.cmp(r)<0)l=O.neg(),d=s,p=B.neg(),y=k;else if(p&&++L===2)break;O=B,i=n,n=B,a=s,s=k,u=o,o=U}_=B.neg(),M=k;var z=p.sqr().add(y.sqr()),Z=_.sqr().add(M.sqr());return Z.cmp(z)>=0&&(_=l,M=d),p.negative&&(p=p.neg(),y=y.neg()),_.negative&&(_=_.neg(),M=M.neg()),[{a:p,b:y},{a:_,b:M}]},Yi.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),u=o.mul(i.a),l=s.mul(n.b),d=o.mul(i.b),p=e.sub(a).sub(u),y=l.add(d).neg();return{k1:p,k2:y}},Yi.prototype.pointFromX=function(e,r){e=new en(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)},Yi.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0},Yi.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),u=e[o],l=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=u,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var d=this._wnafMulAdd(1,i,s,o*2,n),p=0;p<o*2;p++)i[p]=null,s[p]=null;return d};function Rn(t,e,r,n){yu.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new en(e,16),this.y=new en(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}s1(Rn,yu.BasePoint),Yi.prototype.point=function(e,r,n){return new Rn(this,e,r,n)},Yi.prototype.pointFromJSON=function(e,r){return Rn.fromJSON(this,e,r)},Rn.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}},Rn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Rn.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},Rn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Rn.prototype.isInfinity=function(){return this.inf},Rn.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},Rn.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},Rn.prototype.getX=function(){return this.x.fromRed()},Rn.prototype.getY=function(){return this.y.fromRed()},Rn.prototype.mul=function(e){return e=new en(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Rn.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},Rn.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},Rn.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},Rn.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r},Rn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Fn(t,e,r,n){yu.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new en(0)):(this.x=new en(e,16),this.y=new en(r,16),this.z=new en(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s1(Fn,yu.BasePoint),Yi.prototype.jpoint=function(e,r,n){return new Fn(this,e,r,n)},Fn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)},Fn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Fn.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),u=i.redSub(s),l=o.redSub(a);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=u.redSqr(),p=d.redMul(u),y=i.redMul(d),_=l.redSqr().redIAdd(p).redISub(y).redISub(y),M=l.redMul(y.redISub(_)).redISub(o.redMul(p)),O=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(_,M,O)},Fn.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),u=s.redSub(o);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),d=l.redMul(a),p=n.redMul(l),y=u.redSqr().redIAdd(d).redISub(p).redISub(p),_=u.redMul(p.redISub(y)).redISub(s.redMul(d)),M=this.z.redMul(a);return this.curve.jpoint(y,_,M)},Fn.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,u=this.z,l=u.redSqr().redSqr(),d=a.redAdd(a);for(r=0;r<e;r++){var p=o.redSqr(),y=d.redSqr(),_=y.redSqr(),M=p.redAdd(p).redIAdd(p).redIAdd(i.redMul(l)),O=o.redMul(y),L=M.redSqr().redISub(O.redAdd(O)),B=O.redISub(L),k=M.redMul(B);k=k.redIAdd(k).redISub(_);var H=d.redMul(u);r+1<e&&(l=l.redMul(_)),o=L,u=H,d=k}return this.curve.jpoint(o,d.redMul(s),u)},Fn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Fn.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),l=u.redSqr().redISub(a).redISub(a),d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),e=l,r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),y=this.y.redSqr(),_=y.redSqr(),M=this.x.redAdd(y).redSqr().redISub(p).redISub(_);M=M.redIAdd(M);var O=p.redAdd(p).redIAdd(p),L=O.redSqr(),B=_.redIAdd(_);B=B.redIAdd(B),B=B.redIAdd(B),e=L.redISub(M).redISub(M),r=O.redMul(M.redISub(e)).redISub(B),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)},Fn.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=u.redSqr().redISub(a).redISub(a);e=l;var d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),r=u.redMul(a.redISub(l)).redISub(d),n=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),y=this.y.redSqr(),_=this.x.redMul(y),M=this.x.redSub(p).redMul(this.x.redAdd(p));M=M.redAdd(M).redIAdd(M);var O=_.redIAdd(_);O=O.redIAdd(O);var L=O.redAdd(O);e=M.redSqr().redISub(L),n=this.y.redAdd(this.z).redSqr().redISub(y).redISub(p);var B=y.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),r=M.redMul(O.redISub(e)).redISub(B)}return this.curve.jpoint(e,r,n)},Fn.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),u=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var d=l.redMul(a),p=u.redSqr().redISub(d.redAdd(d)),y=d.redISub(p),_=a.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var M=u.redMul(y).redISub(_),O=n.redAdd(n).redMul(i);return this.curve.jpoint(p,M,O)},Fn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var u=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(l),p=r.redMul(d);p=p.redIAdd(p),p=p.redIAdd(p);var y=this.x.redMul(u).redISub(p);y=y.redIAdd(y),y=y.redIAdd(y);var _=this.y.redMul(d.redMul(l.redISub(d)).redISub(a.redMul(u)));_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var M=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(y,_,M)},Fn.prototype.mul=function(e,r){return e=new en(e,r),this.curve._wnafMul(this,e)},Fn.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0},Fn.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}},Fn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Fn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var wu=xo,i_=Rd,Hd=zd,pB=Ti;function xu(t){Hd.call(this,"mont",t),this.a=new wu(t.a,16).toRed(this.red),this.b=new wu(t.b,16).toRed(this.red),this.i4=new wu(4).toRed(this.red).redInvm(),this.two=new wu(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}i_(xu,Hd);var gB=xu;xu.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function Dn(t,e,r){Hd.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new wu(e,16),this.z=new wu(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i_(Dn,Hd.BasePoint),xu.prototype.decodePoint=function(e,r){return this.point(pB.toArray(e,r),1)},xu.prototype.point=function(e,r){return new Dn(this,e,r)},xu.prototype.pointFromJSON=function(e){return Dn.fromJSON(this,e)},Dn.prototype.precompute=function(){},Dn.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Dn.fromJSON=function(e,r){return new Dn(e,r[0],r[1]||e.one)},Dn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Dn.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Dn.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)},Dn.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Dn.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),u=s.redMul(i),l=r.z.redMul(a.redAdd(u).redSqr()),d=r.x.redMul(a.redISub(u).redSqr());return this.curve.point(l,d)},Dn.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i},Dn.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Dn.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Dn.prototype.eq=function(e){return this.getX().cmp(e.getX())===0},Dn.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Dn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var mB=Ti,_o=xo,s_=Rd,Wd=zd,vB=mB.assert;function Vs(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Wd.call(this,"edwards",t),this.a=new _o(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new _o(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new _o(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),vB(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}s_(Vs,Wd);var bB=Vs;Vs.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},Vs.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},Vs.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)},Vs.prototype.pointFromX=function(e,r){e=new _o(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var u=a.fromRed().isOdd();return(r&&!u||!r&&u)&&(a=a.redNeg()),this.point(e,a)},Vs.prototype.pointFromY=function(e,r){e=new _o(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)},Vs.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function Hr(t,e,r,n,i){Wd.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new _o(e,16),this.y=new _o(r,16),this.z=n?new _o(n,16):this.curve.one,this.t=i&&new _o(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s_(Hr,Wd.BasePoint),Vs.prototype.pointFromJSON=function(e){return Hr.fromJSON(this,e)},Vs.prototype.point=function(e,r,n,i){return new Hr(this,e,r,n,i)},Hr.fromJSON=function(e,r){return new Hr(e,r[0],r[1],r[2])},Hr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Hr.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Hr.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),u=i.redSub(r),l=s.redMul(a),d=o.redMul(u),p=s.redMul(u),y=a.redMul(o);return this.curve.point(l,d,y,p)},Hr.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,u,l;if(this.curve.twisted){a=this.curve._mulA(r);var d=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(d.redSub(this.curve.two)),s=d.redMul(a.redSub(n)),o=d.redSqr().redSub(d).redSub(d)):(u=this.z.redSqr(),l=d.redSub(u).redISub(u),i=e.redSub(r).redISub(n).redMul(l),s=d.redMul(a.redSub(n)),o=d.redMul(l))}else a=r.redAdd(n),u=this.curve._mulC(this.z).redSqr(),l=a.redSub(u).redSub(u),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)},Hr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Hr.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),u=s.redAdd(i),l=n.redAdd(r),d=o.redMul(a),p=u.redMul(l),y=o.redMul(l),_=a.redMul(u);return this.curve.point(d,p,_,y)},Hr.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),u=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),d=r.redMul(a).redMul(l),p,y;return this.curve.twisted?(p=r.redMul(u).redMul(s.redSub(this.curve._mulA(i))),y=a.redMul(u)):(p=r.redMul(u).redMul(s.redSub(i)),y=this.curve._mulC(a).redMul(u)),this.curve.point(d,p,y)},Hr.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Hr.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Hr.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)},Hr.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)},Hr.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Hr.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Hr.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Hr.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Hr.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0},Hr.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}},Hr.prototype.toP=Hr.prototype.normalize,Hr.prototype.mixedAdd=Hr.prototype.add,function(t){var e=t;e.base=zd,e.short=dB,e.mont=gB,e.edwards=bB}(i1);var Kd={},o1,o_;function yB(){return o_||(o_=1,o1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),o1}(function(t){var e=t,r=fl,n=i1,i=Ti,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,d){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var p=new o(d);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:p}),p}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=yB()}catch{u=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})})(Kd);var wB=fl,ic=t1,a_=ec;function da(t){if(!(this instanceof da))return new da(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ic.toArray(t.entropy,t.entropyEnc||"hex"),r=ic.toArray(t.nonce,t.nonceEnc||"hex"),n=ic.toArray(t.pers,t.persEnc||"hex");a_(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var xB=da;da.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},da.prototype._hmac=function(){return new wB.hmac(this.hash,this.K)},da.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},da.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=ic.toArray(e,r),n=ic.toArray(n,i),a_(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},da.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=ic.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,ic.encode(o,r)};var _B=xo,EB=Ti,a1=EB.assert;function Gn(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var SB=Gn;Gn.fromPublic=function(e,r,n){return r instanceof Gn?r:new Gn(e,{pub:r,pubEnc:n})},Gn.fromPrivate=function(e,r,n){return r instanceof Gn?r:new Gn(e,{priv:r,privEnc:n})},Gn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Gn.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},Gn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Gn.prototype._importPrivate=function(e,r){this.priv=new _B(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},Gn.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?a1(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&a1(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},Gn.prototype.derive=function(e){return e.validate()||a1(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Gn.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)},Gn.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)},Gn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Vd=xo,c1=Ti,AB=c1.assert;function Gd(t,e){if(t instanceof Gd)return t;this._importDER(t,e)||(AB(t.r&&t.s,"Signature without r or s"),this.r=new Vd(t.r,16),this.s=new Vd(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var PB=Gd;function MB(){this.place=0}function u1(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function c_(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Gd.prototype._importDER=function(e,r){e=c1.toArray(e,r);var n=new MB;if(e[n.place++]!==48)return!1;var i=u1(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=u1(e,n);if(s===!1||e[n.place]&128)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=u1(e,n);if(a===!1||e.length!==a+n.place||e[n.place]&128)return!1;var u=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new Vd(o),this.s=new Vd(u),this.recoveryParam=null,!0};function f1(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Gd.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=c_(r),n=c_(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];f1(i,r.length),i=i.concat(r),i.push(2),f1(i,n.length);var s=i.concat(n),o=[48];return f1(o,s.length),o=o.concat(s),c1.encode(o,e)};var Eo=xo,u_=xB,IB=Ti,l1=Kd,CB=n_,f_=IB.assert,h1=SB,Yd=PB;function Ji(t){if(!(this instanceof Ji))return new Ji(t);typeof t=="string"&&(f_(Object.prototype.hasOwnProperty.call(l1,t),"Unknown curve "+t),t=l1[t]),t instanceof l1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var TB=Ji;Ji.prototype.keyPair=function(e){return new h1(this,e)},Ji.prototype.keyFromPrivate=function(e,r){return h1.fromPrivate(this,e,r)},Ji.prototype.keyFromPublic=function(e,r){return h1.fromPublic(this,e,r)},Ji.prototype.genKeyPair=function(e){e||(e={});for(var r=new u_({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||CB(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Eo(2));;){var s=new Eo(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Ji.prototype._truncateToN=function(e,r,n){var i;if(Eo.isBN(e)||typeof e=="number")e=new Eo(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Eo(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Eo(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},Ji.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength);for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),u=new u_({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new Eo(1)),d=0;;d++){var p=i.k?i.k(d):new Eo(u.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(l)>=0)){var y=this.g.mul(p);if(!y.isInfinity()){var _=y.getX(),M=_.umod(this.n);if(M.cmpn(0)!==0){var O=p.invm(this.n).mul(M.mul(r.getPrivate()).iadd(e));if(O=O.umod(this.n),O.cmpn(0)!==0){var L=(y.getY().isOdd()?1:0)|(_.cmp(M)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),L^=1),new Yd({r:M,s:O,recoveryParam:L})}}}}}},Ji.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new Yd(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var u=a.invm(this.n),l=u.mul(e).umod(this.n),d=u.mul(o).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(l,n.getPublic(),d),p.isInfinity()?!1:p.eqXToP(o)):(p=this.g.mulAdd(l,n.getPublic(),d),p.isInfinity()?!1:p.getX().umod(this.n).cmp(o)===0)},Ji.prototype.recoverPubKey=function(t,e,r,n){f_((3&r)===r,"The recovery param is more than two bits"),e=new Yd(e,n);var i=this.n,s=new Eo(t),o=e.r,a=e.s,u=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var d=e.r.invm(i),p=i.sub(s).mul(d).umod(i),y=a.mul(d).umod(i);return this.g.mulAdd(p,o,y)},Ji.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Yd(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var ml=Ti,l_=ml.assert,h_=ml.parseBytes,_u=ml.cachedProperty;function On(t,e){this.eddsa=t,this._secret=h_(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=h_(e.pub)}On.fromPublic=function(e,r){return r instanceof On?r:new On(e,{pub:r})},On.fromSecret=function(e,r){return r instanceof On?r:new On(e,{secret:r})},On.prototype.secret=function(){return this._secret},_u(On,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),_u(On,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),_u(On,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i}),_u(On,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),_u(On,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),_u(On,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),On.prototype.sign=function(e){return l_(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},On.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)},On.prototype.getSecret=function(e){return l_(this._secret,"KeyPair is public only"),ml.encode(this.secret(),e)},On.prototype.getPublic=function(e){return ml.encode(this.pubBytes(),e)};var RB=On,DB=xo,Jd=Ti,d_=Jd.assert,Xd=Jd.cachedProperty,OB=Jd.parseBytes;function sc(t,e){this.eddsa=t,typeof e!="object"&&(e=OB(e)),Array.isArray(e)&&(d_(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),d_(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof DB&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Xd(sc,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),Xd(sc,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),Xd(sc,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),Xd(sc,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),sc.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},sc.prototype.toHex=function(){return Jd.encode(this.toBytes(),"hex").toUpperCase()};var NB=sc,LB=fl,kB=Kd,Eu=Ti,BB=Eu.assert,p_=Eu.parseBytes,g_=RB,m_=NB;function mi(t){if(BB(t==="ed25519","only tested with ed25519 so far"),!(this instanceof mi))return new mi(t);t=kB[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=LB.sha512}var $B=mi;mi.prototype.sign=function(e,r){e=p_(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),u=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:u,Rencoded:o})},mi.prototype.verify=function(e,r,n){if(e=p_(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)},mi.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Eu.intFromLE(e.digest()).umod(this.curve.n)},mi.prototype.keyFromPublic=function(e){return g_.fromPublic(this,e)},mi.prototype.keyFromSecret=function(e){return g_.fromSecret(this,e)},mi.prototype.makeSignature=function(e){return e instanceof m_?e:new m_(this,e)},mi.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r},mi.prototype.decodePoint=function(e){e=Eu.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Eu.intFromLE(n);return this.curve.pointFromY(s,i)},mi.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},mi.prototype.decodeInt=function(e){return Eu.intFromLE(e)},mi.prototype.isPoint=function(e){return e instanceof this.pointClass},function(t){var e=t;e.version=uB.version,e.utils=Ti,e.rand=n_,e.curve=i1,e.curves=Kd,e.ec=TB,e.eddsa=$B}(t_);const FB={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},jB=":";function Su(t){const[e,r]=t.split(jB);return{namespace:e,reference:r}}function v_(t,e){return t.includes(":")?[t]:e.chains||[]}var UB=Object.defineProperty,b_=Object.getOwnPropertySymbols,qB=Object.prototype.hasOwnProperty,zB=Object.prototype.propertyIsEnumerable,y_=(t,e,r)=>e in t?UB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w_=(t,e)=>{for(var r in e||(e={}))qB.call(e,r)&&y_(t,r,e[r]);if(b_)for(var r of b_(e))zB.call(e,r)&&y_(t,r,e[r]);return t};const HB="ReactNative",Ri={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},WB="js";function Zd(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Au(){return!ol()&&!!Am()&&navigator.product===HB}function vl(){return!Zd()&&!!Am()&&!!ol()}function bl(){return Au()?Ri.reactNative:Zd()?Ri.node:vl()?Ri.browser:Ri.unknown}function KB(){var t;try{return Au()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function VB(t,e){let r=al.parse(t);return r=w_(w_({},r),e),t=al.stringify(r),t}function x_(){return t3()||{name:"",description:"",url:"",icons:[""]}}function GB(){if(bl()===Ri.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=wN();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function YB(){var t;const e=bl();return e===Ri.browser?[e,((t=e3())==null?void 0:t.host)||"unknown"].join(":"):e}function __(t,e,r){const n=GB(),i=YB();return[[t,e].join("-"),[WB,r].join("-"),n,i].join("/")}function JB({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a}){const u=r.split("?"),l=__(t,e,n),d={auth:i,ua:l,projectId:s,useOnCloseEvent:o,origin:a||void 0},p=VB(u[1]||"",d);return u[0]+"?"+p}function oc(t,e){return t.filter(r=>e.includes(r)).length===t.length}function E_(t){return Object.fromEntries(t.entries())}function S_(t){return new Map(Object.entries(t))}function ac(t=vt.FIVE_MINUTES,e){const r=vt.toMiliseconds(t||vt.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function Pu(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function A_(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function XB(t){return A_("topic",t)}function ZB(t){return A_("id",t)}function P_(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function _n(t,e){return vt.fromMiliseconds(Date.now()+vt.toMiliseconds(t))}function pa(t){return Date.now()>=vt.toMiliseconds(t)}function br(t,e){return`${t}${e?`:${e}`:""}`}function Qd(t=[],e=[]){return[...new Set([...t,...e])]}async function QB({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=e$(s,t,e),a=bl();if(a===Ri.browser){if(!((n=ol())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}o.startsWith("https://")||o.startsWith("http://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,r$()?"_blank":"_self","noreferrer noopener")}else a===Ri.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function e$(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${n$(n,!0)}`}else i=`${i}/wc?${n}`;return i}async function t$(t,e){let r="";try{if(vl()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function M_(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function I_(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function d1(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function r$(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function n$(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function C_(t){return Buffer.from(t,"base64").toString("utf-8")}const i$="https://rpc.walletconnect.org/v1";async function s$(t,e,r,n,i,s){switch(r.t){case"eip191":return o$(t,e,r.s);case"eip1271":return await a$(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function o$(t,e,r){return Yk(v3(e),r).toLowerCase()===t.toLowerCase()}async function a$(t,e,r,n,i,s){const o=Su(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",d=r.substring(2),p=v3(e).substring(2),y=a+p+u+l+d,_=await fetch(`${s||i$}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:c$(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:y},"latest"]})}),{result:M}=await _.json();return M?M.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function c$(){return Date.now()+Math.floor(Math.random()*1e3)}var u$=Object.defineProperty,f$=Object.defineProperties,l$=Object.getOwnPropertyDescriptors,T_=Object.getOwnPropertySymbols,h$=Object.prototype.hasOwnProperty,d$=Object.prototype.propertyIsEnumerable,R_=(t,e,r)=>e in t?u$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p$=(t,e)=>{for(var r in e||(e={}))h$.call(e,r)&&R_(t,r,e[r]);if(T_)for(var r of T_(e))d$.call(e,r)&&R_(t,r,e[r]);return t},g$=(t,e)=>f$(t,l$(e));const m$="did:pkh:",p1=t=>t==null?void 0:t.split(":"),v$=t=>{const e=t&&p1(t);if(e)return t.includes(m$)?e[3]:e[1]},g1=t=>{const e=t&&p1(t);if(e)return e[2]+":"+e[3]},e0=t=>{const e=t&&p1(t);if(e)return e.pop()};async function D_(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=O_(i,i.iss),o=e0(i.iss);return await s$(o,s,n,g1(i.iss),r)}const O_=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=e0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${v$(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,p=t.nbf?`Not Before: ${t.nbf}`:void 0,y=t.requestId?`Request ID: ${t.requestId}`:void 0,_=t.resources?`Resources:${t.resources.map(O=>`
- ${O}`).join("")}`:void 0,M=t0(t.resources);if(M){const O=yl(M);i=P$(i,O)}return[r,n,"",i,"",s,o,a,u,l,d,p,y,_].filter(O=>O!=null).join(`
`)};function b$(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function y$(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function cc(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function w$(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:x$(e,r,n)}}}function x$(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function N_(t){return cc(t),`urn:recap:${b$(t).replace(/=/g,"")}`}function yl(t){const e=y$(t.replace("urn:recap:",""));return cc(e),e}function _$(t,e,r){const n=w$(t,e,r);return N_(n)}function E$(t){return t&&t.includes("urn:recap:")}function S$(t,e){const r=yl(t),n=yl(e),i=A$(r,n);return N_(i)}function A$(t,e){cc(t),cc(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,u)=>a.localeCompare(u)).forEach(a=>{var u,l;n.att[i]=g$(p$({},n.att[i]),{[a]:((u=t.att[i])==null?void 0:u[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function P$(t="",e){cc(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const u=Object.keys(e.att[a]).map(p=>({ability:p.split("/")[0],action:p.split("/")[1]}));u.sort((p,y)=>p.action.localeCompare(y.action));const l={};u.forEach(p=>{l[p.ability]||(l[p.ability]=[]),l[p.ability].push(p.action)});const d=Object.keys(l).map(p=>(i++,`(${i}) '${p}': '${l[p].join("', '")}' for '${a}'.`));n.push(d.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function L_(t){var e;const r=yl(t);cc(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function k_(t){const e=yl(t);cc(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function t0(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return E$(e)?e:void 0}const B_="base10",ri="base16",ga="base64pad",wl="base64url",xl="utf8",$_=0,So=1,_l=2,M$=0,F_=1,El=12,m1=32;function I$(){const t=Qm.generateKeyPair();return{privateKey:In(t.secretKey,ri),publicKey:In(t.publicKey,ri)}}function v1(){const t=sa.randomBytes(m1);return In(t,ri)}function C$(t,e){const r=Qm.sharedKey(Cn(t,ri),Cn(e,ri),!0),n=new cB(pl.SHA256,r).expand(m1);return In(n,ri)}function r0(t){const e=pl.hash(Cn(t,ri));return In(e,ri)}function Ao(t){const e=pl.hash(Cn(t,xl));return In(e,ri)}function j_(t){return Cn(`${t}`,B_)}function uc(t){return Number(In(t,B_))}function T$(t){const e=j_(typeof t.type<"u"?t.type:$_);if(uc(e)===So&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Cn(t.senderPublicKey,ri):void 0,n=typeof t.iv<"u"?Cn(t.iv,ri):sa.randomBytes(El),i=new Jm.ChaCha20Poly1305(Cn(t.symKey,ri)).seal(n,Cn(t.message,xl));return U_({type:e,sealed:i,iv:n,senderPublicKey:r,encoding:t.encoding})}function R$(t,e){const r=j_(_l),n=sa.randomBytes(El),i=Cn(t,xl);return U_({type:r,sealed:i,iv:n,encoding:e})}function D$(t){const e=new Jm.ChaCha20Poly1305(Cn(t.symKey,ri)),{sealed:r,iv:n}=Sl({encoded:t.encoded,encoding:t==null?void 0:t.encoding}),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return In(i,xl)}function O$(t,e){const{sealed:r}=Sl({encoded:t,encoding:e});return In(r,xl)}function U_(t){const{encoding:e=ga}=t;if(uc(t.type)===_l)return In(Pd([t.type,t.sealed]),e);if(uc(t.type)===So){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return In(Pd([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return In(Pd([t.type,t.iv,t.sealed]),e)}function Sl(t){const{encoded:e,encoding:r=ga}=t,n=Cn(e,r),i=n.slice(M$,F_),s=F_;if(uc(i)===So){const l=s+m1,d=l+El,p=n.slice(s,l),y=n.slice(l,d),_=n.slice(d);return{type:i,sealed:_,iv:y,senderPublicKey:p}}if(uc(i)===_l){const l=n.slice(s),d=sa.randomBytes(El);return{type:i,sealed:l,iv:d}}const o=s+El,a=n.slice(s,o),u=n.slice(o);return{type:i,sealed:u,iv:a}}function N$(t,e){const r=Sl({encoded:t,encoding:e==null?void 0:e.encoding});return q_({type:uc(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?In(r.senderPublicKey,ri):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function q_(t){const e=(t==null?void 0:t.type)||$_;if(e===So){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function z_(t){return t.type===So&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function H_(t){return t.type===_l}function L$(t){return new t_.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function k$(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function B$(t){return Buffer.from(k$(t),"base64")}function $$(t,e){const[r,n,i]=t.split("."),s=B$(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),u=`${r}.${n}`,l=new pl.SHA256().update(Buffer.from(u)).digest(),d=L$(e),p=Buffer.from(l).toString("hex");if(!d.verify(p,{r:o,s:a}))throw new Error("Invalid signature");return Sm(t).payload}const F$="irn";function b1(t){return(t==null?void 0:t.relay)||{protocol:F$}}function Al(t){const e=FB[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var j$=Object.defineProperty,U$=Object.defineProperties,q$=Object.getOwnPropertyDescriptors,W_=Object.getOwnPropertySymbols,z$=Object.prototype.hasOwnProperty,H$=Object.prototype.propertyIsEnumerable,K_=(t,e,r)=>e in t?j$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V_=(t,e)=>{for(var r in e||(e={}))z$.call(e,r)&&K_(t,r,e[r]);if(W_)for(var r of W_(e))H$.call(e,r)&&K_(t,r,e[r]);return t},W$=(t,e)=>U$(t,q$(e));function K$(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function G_(t){if(!t.includes("wc:")){const u=C_(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=al.parse(s),a=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:n,topic:V$(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:K$(o),methods:a,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function V$(t){return t.startsWith("//")?t.substring(2):t}function G$(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Y_(t){return`${t.protocol}:${t.topic}@${t.version}?`+al.stringify(V_(W$(V_({symKey:t.symKey},G$(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}function n0(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Mu(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Y$(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Mu(r.accounts))}),e}function J$(t,e){const r=[];return Object.values(t).forEach(n=>{Mu(n.accounts).includes(e)&&r.push(...n.methods)}),r}function X$(t,e){const r=[];return Object.values(t).forEach(n=>{Mu(n.accounts).includes(e)&&r.push(...n.events)}),r}function y1(t){return t.includes(":")}function Pl(t){return y1(t)?t.split(":")[0]:t}function Z$(t){const e={};return t==null||t.forEach(r=>{const[n,i]=r.split(":");e[n]||(e[n]={accounts:[],chains:[],events:[]}),e[n].accounts.push(r),e[n].chains.push(`${n}:${i}`)}),e}function J_(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=Z$(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=Qd(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const Q$={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},eF={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ut(t,e){const{message:r,code:n}=eF[t];return{message:e?`${r} ${e}`:r,code:n}}function Dr(t,e){const{message:r,code:n}=Q$[t];return{message:e?`${r} ${e}`:r,code:n}}function fc(t,e){return!!Array.isArray(t)}function Ml(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function vi(t){return typeof t>"u"}function on(t,e){return e&&vi(t)?!0:typeof t=="string"&&!!t.trim().length}function w1(t,e){return typeof t=="number"&&!isNaN(t)}function tF(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return oc(i,n)?(n.forEach(o=>{const{accounts:a,methods:u,events:l}=t.namespaces[o],d=Mu(a),p=r[o];(!oc(v_(o,p),d)||!oc(p.methods,u)||!oc(p.events,l))&&(s=!1)}),s):!1}function i0(t){return on(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function rF(t){if(on(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&i0(r)}}return!1}function nF(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(on(t,!1)){if(e(t))return!0;const r=C_(t);return e(r)}}catch{}return!1}function iF(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function sF(t){return t==null?void 0:t.topic}function oF(t,e){let r=null;return on(t==null?void 0:t.publicKey,!1)||(r=ut("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function X_(t){let e=!0;return fc(t)?t.length&&(e=t.every(r=>on(r,!1))):e=!1,e}function aF(t,e,r){let n=null;return fc(e)&&e.length?e.forEach(i=>{n||i0(i)||(n=Dr("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):i0(t)||(n=Dr("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function cF(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=aF(i,v_(i,s),`${e} ${r}`);o&&(n=o)}),n}function uF(t,e){let r=null;return fc(t)?t.forEach(n=>{r||rF(n)||(r=Dr("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Dr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function fF(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=uF(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function lF(t,e){let r=null;return X_(t==null?void 0:t.methods)?X_(t==null?void 0:t.events)||(r=Dr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Dr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Z_(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=lF(n,`${e}, namespace`);i&&(r=i)}),r}function hF(t,e,r){let n=null;if(t&&Ml(t)){const i=Z_(t,e);i&&(n=i);const s=cF(t,e,r);s&&(n=s)}else n=ut("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function x1(t,e){let r=null;if(t&&Ml(t)){const n=Z_(t,e);n&&(r=n);const i=fF(t,e);i&&(r=i)}else r=ut("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Q_(t){return on(t.protocol,!0)}function dF(t,e){let r=!1;return t?t&&fc(t)&&t.length&&t.forEach(n=>{r=Q_(n)}):r=!0,r}function pF(t){return typeof t=="number"}function bi(t){return typeof t<"u"&&typeof t!==null}function gF(t){return!(!t||typeof t!="object"||!t.code||!w1(t.code)||!t.message||!on(t.message,!1))}function mF(t){return!(vi(t)||!on(t.method,!1))}function vF(t){return!(vi(t)||vi(t.result)&&vi(t.error)||!w1(t.id)||!on(t.jsonrpc,!1))}function bF(t){return!(vi(t)||!on(t.name,!1))}function e6(t,e){return!(!i0(e)||!Y$(t).includes(e))}function yF(t,e,r){return on(r,!1)?J$(t,e).includes(r):!1}function wF(t,e,r){return on(r,!1)?X$(t,e).includes(r):!1}function t6(t,e,r){let n=null;const i=xF(t),s=_F(e),o=Object.keys(i),a=Object.keys(s),u=r6(Object.keys(t)),l=r6(Object.keys(e)),d=u.filter(p=>!l.includes(p));return d.length&&(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),oc(o,a)||(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(p=>{if(!p.includes(":")||n)return;const y=Mu(e[p].accounts);y.includes(p)||(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${p}
        Required: ${p}
        Approved: ${y.toString()}`))}),o.forEach(p=>{n||(oc(i[p].methods,s[p].methods)?oc(i[p].events,s[p].events)||(n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${p}`)):n=ut("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${p}`))}),n}function xF(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function r6(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function _F(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Mu(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function EF(t,e){return w1(t)&&t<=e.max&&t>=e.min}function n6(){const t=bl();return new Promise(e=>{switch(t){case Ri.browser:e(SF());break;case Ri.reactNative:e(AF());break;case Ri.node:e(PF());break;default:e(!0)}})}function SF(){return vl()&&(navigator==null?void 0:navigator.onLine)}async function AF(){if(Au()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function PF(){return!0}function MF(t){switch(bl()){case Ri.browser:IF(t);break;case Ri.reactNative:CF(t);break}}function IF(t){!Au()&&vl()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function CF(t){Au()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const _1={};class Il{static get(e){return _1[e]}static set(e,r){_1[e]=r}static delete(e){delete _1[e]}}const TF="PARSE_ERROR",RF="INVALID_REQUEST",DF="METHOD_NOT_FOUND",OF="INVALID_PARAMS",i6="INTERNAL_ERROR",E1="SERVER_ERROR",NF=[-32700,-32600,-32601,-32602,-32603],Cl={[TF]:{code:-32700,message:"Parse error"},[RF]:{code:-32600,message:"Invalid Request"},[DF]:{code:-32601,message:"Method not found"},[OF]:{code:-32602,message:"Invalid params"},[i6]:{code:-32603,message:"Internal error"},[E1]:{code:-32e3,message:"Server error"}},s6=E1;function LF(t){return NF.includes(t)}function o6(t){return Object.keys(Cl).includes(t)?Cl[t]:Cl[s6]}function kF(t){const e=Object.values(Cl).find(r=>r.code===t);return e||Cl[s6]}function a6(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var c6={},Po={},u6;function BF(){if(u6)return Po;u6=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.isBrowserCryptoAvailable=Po.getSubtleCrypto=Po.getBrowerCrypto=void 0;function t(){return(nn==null?void 0:nn.crypto)||(nn==null?void 0:nn.msCrypto)||{}}Po.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Po.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Po.isBrowserCryptoAvailable=r,Po}var Mo={},f6;function $F(){if(f6)return Mo;f6=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.isBrowser=Mo.isNode=Mo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Mo.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Mo.isNode=e;function r(){return!t()&&!e()}return Mo.isBrowser=r,Mo}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Jf;e.__exportStar(BF(),t),e.__exportStar($F(),t)})(c6);function ma(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function lc(t=6){return BigInt(ma(t))}function va(t,e,r){return{id:r||ma(),jsonrpc:"2.0",method:t,params:e}}function s0(t,e){return{id:t,jsonrpc:"2.0",result:e}}function o0(t,e,r){return{id:t,jsonrpc:"2.0",error:FF(e)}}function FF(t,e){return typeof t>"u"?o6(i6):(typeof t=="string"&&(t=Object.assign(Object.assign({},o6(E1)),{message:t})),LF(t.code)&&(t=kF(t.code)),t)}let jF=class{},UF=class extends jF{constructor(){super()}},qF=class extends UF{constructor(e){super()}};const zF="^https?:",HF="^wss?:";function WF(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function l6(t,e){const r=WF(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function h6(t){return l6(t,zF)}function d6(t){return l6(t,HF)}function KF(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function p6(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function S1(t){return p6(t)&&"method"in t}function a0(t){return p6(t)&&(Gs(t)||Xi(t))}function Gs(t){return"result"in t}function Xi(t){return"error"in t}let Zi=class extends qF{constructor(e){super(e),this.events=new Hi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(va(e.method,e.params||[],e.id||lc().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Xi(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),a0(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const VF=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),GF=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",g6=t=>t.split("?")[0],m6=10,YF=VF();let JF=class{constructor(e){if(this.url=e,this.events=new Hi.EventEmitter,this.registering=!1,!d6(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(mo(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!d6(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=new URLSearchParams(e).get("origin"),s=c6.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!KF(e)},o=new YF(e,[],s);GF()?o.onerror=a=>{const u=a;n(this.emitError(u.error))}:o.on("error",a=>{n(this.emitError(a))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Za(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=o0(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return a6(e,g6(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>m6&&this.events.setMaxListeners(m6)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${g6(this.url)}`));return this.events.emit("register_error",r),r}};var c0={exports:{}};c0.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",y="[object Error]",_="[object Function]",M="[object GeneratorFunction]",O="[object Map]",L="[object Number]",B="[object Null]",k="[object Object]",H="[object Promise]",U="[object Proxy]",z="[object RegExp]",Z="[object Set]",R="[object String]",W="[object Symbol]",ie="[object Undefined]",me="[object WeakMap]",j="[object ArrayBuffer]",E="[object DataView]",m="[object Float32Array]",f="[object Float64Array]",g="[object Int8Array]",v="[object Int16Array]",x="[object Int32Array]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",b="[object Uint16Array]",P="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,D={};D[m]=D[f]=D[g]=D[v]=D[x]=D[S]=D[A]=D[b]=D[P]=!0,D[a]=D[u]=D[j]=D[d]=D[E]=D[p]=D[y]=D[_]=D[O]=D[L]=D[k]=D[z]=D[Z]=D[R]=D[me]=!1;var se=typeof nn=="object"&&nn&&nn.Object===Object&&nn,ee=typeof self=="object"&&self&&self.Object===Object&&self,J=se||ee||Function("return this")(),Q=e&&!e.nodeType&&e,T=Q&&!0&&t&&!t.nodeType&&t,X=T&&T.exports===Q,re=X&&se.process,ge=function(){try{return re&&re.binding&&re.binding("util")}catch{}}(),oe=ge&&ge.isTypedArray;function fe(ue,we){for(var Ye=-1,It=ue==null?0:ue.length,jr=0,ir=[];++Ye<It;){var Yr=ue[Ye];we(Yr,Ye,ue)&&(ir[jr++]=Yr)}return ir}function be(ue,we){for(var Ye=-1,It=we.length,jr=ue.length;++Ye<It;)ue[jr+Ye]=we[Ye];return ue}function Me(ue,we){for(var Ye=-1,It=ue==null?0:ue.length;++Ye<It;)if(we(ue[Ye],Ye,ue))return!0;return!1}function Ne(ue,we){for(var Ye=-1,It=Array(ue);++Ye<ue;)It[Ye]=we(Ye);return It}function Te(ue){return function(we){return ue(we)}}function $e(ue,we){return ue.has(we)}function Ie(ue,we){return ue==null?void 0:ue[we]}function Le(ue){var we=-1,Ye=Array(ue.size);return ue.forEach(function(It,jr){Ye[++we]=[jr,It]}),Ye}function Ve(ue,we){return function(Ye){return ue(we(Ye))}}function ke(ue){var we=-1,Ye=Array(ue.size);return ue.forEach(function(It){Ye[++we]=It}),Ye}var ze=Array.prototype,He=Function.prototype,Se=Object.prototype,Qe=J["__core-js_shared__"],ct=He.toString,Be=Se.hasOwnProperty,et=function(){var ue=/[^.]+$/.exec(Qe&&Qe.keys&&Qe.keys.IE_PROTO||"");return ue?"Symbol(src)_1."+ue:""}(),rt=Se.toString,Je=RegExp("^"+ct.call(Be).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=X?J.Buffer:void 0,ht=J.Symbol,ft=J.Uint8Array,Ht=Se.propertyIsEnumerable,Jt=ze.splice,St=ht?ht.toStringTag:void 0,er=Object.getOwnPropertySymbols,Xt=gt?gt.isBuffer:void 0,Ot=Ve(Object.keys,Object),Bt=xr(J,"DataView"),Tt=xr(J,"Map"),bt=xr(J,"Promise"),Dt=xr(J,"Set"),Lt=xr(J,"WeakMap"),yt=xr(Object,"create"),$t=jo(Bt),jt=jo(Tt),nt=jo(bt),Ft=jo(Dt),$=jo(Lt),K=ht?ht.prototype:void 0,G=K?K.valueOf:void 0;function C(ue){var we=-1,Ye=ue==null?0:ue.length;for(this.clear();++we<Ye;){var It=ue[we];this.set(It[0],It[1])}}function Y(){this.__data__=yt?yt(null):{},this.size=0}function q(ue){var we=this.has(ue)&&delete this.__data__[ue];return this.size-=we?1:0,we}function ae(ue){var we=this.__data__;if(yt){var Ye=we[ue];return Ye===n?void 0:Ye}return Be.call(we,ue)?we[ue]:void 0}function pe(ue){var we=this.__data__;return yt?we[ue]!==void 0:Be.call(we,ue)}function _e(ue,we){var Ye=this.__data__;return this.size+=this.has(ue)?0:1,Ye[ue]=yt&&we===void 0?n:we,this}C.prototype.clear=Y,C.prototype.delete=q,C.prototype.get=ae,C.prototype.has=pe,C.prototype.set=_e;function Re(ue){var we=-1,Ye=ue==null?0:ue.length;for(this.clear();++we<Ye;){var It=ue[we];this.set(It[0],It[1])}}function De(){this.__data__=[],this.size=0}function it(ue){var we=this.__data__,Ye=Xe(we,ue);if(Ye<0)return!1;var It=we.length-1;return Ye==It?we.pop():Jt.call(we,Ye,1),--this.size,!0}function Ue(ue){var we=this.__data__,Ye=Xe(we,ue);return Ye<0?void 0:we[Ye][1]}function mt(ue){return Xe(this.__data__,ue)>-1}function st(ue,we){var Ye=this.__data__,It=Xe(Ye,ue);return It<0?(++this.size,Ye.push([ue,we])):Ye[It][1]=we,this}Re.prototype.clear=De,Re.prototype.delete=it,Re.prototype.get=Ue,Re.prototype.has=mt,Re.prototype.set=st;function tt(ue){var we=-1,Ye=ue==null?0:ue.length;for(this.clear();++we<Ye;){var It=ue[we];this.set(It[0],It[1])}}function At(){this.size=0,this.__data__={hash:new C,map:new(Tt||Re),string:new C}}function Rt(ue){var we=vr(this,ue).delete(ue);return this.size-=we?1:0,we}function Mt(ue){return vr(this,ue).get(ue)}function Et(ue){return vr(this,ue).has(ue)}function dt(ue,we){var Ye=vr(this,ue),It=Ye.size;return Ye.set(ue,we),this.size+=Ye.size==It?0:1,this}tt.prototype.clear=At,tt.prototype.delete=Rt,tt.prototype.get=Mt,tt.prototype.has=Et,tt.prototype.set=dt;function _t(ue){var we=-1,Ye=ue==null?0:ue.length;for(this.__data__=new tt;++we<Ye;)this.add(ue[we])}function ot(ue){return this.__data__.set(ue,n),this}function wt(ue){return this.__data__.has(ue)}_t.prototype.add=_t.prototype.push=ot,_t.prototype.has=wt;function lt(ue){var we=this.__data__=new Re(ue);this.size=we.size}function at(){this.__data__=new Re,this.size=0}function Ae(ue){var we=this.__data__,Ye=we.delete(ue);return this.size=we.size,Ye}function Pe(ue){return this.__data__.get(ue)}function Ge(ue){return this.__data__.has(ue)}function je(ue,we){var Ye=this.__data__;if(Ye instanceof Re){var It=Ye.__data__;if(!Tt||It.length<r-1)return It.push([ue,we]),this.size=++Ye.size,this;Ye=this.__data__=new tt(It)}return Ye.set(ue,we),this.size=Ye.size,this}lt.prototype.clear=at,lt.prototype.delete=Ae,lt.prototype.get=Pe,lt.prototype.has=Ge,lt.prototype.set=je;function qe(ue,we){var Ye=ef(ue),It=!Ye&&yp(ue),jr=!Ye&&!It&&bh(ue),ir=!Ye&&!It&&!jr&&_p(ue),Yr=Ye||It||jr||ir,wn=Yr?Ne(ue.length,String):[],Er=wn.length;for(var Ur in ue)Be.call(ue,Ur)&&!(Yr&&(Ur=="length"||jr&&(Ur=="offset"||Ur=="parent")||ir&&(Ur=="buffer"||Ur=="byteLength"||Ur=="byteOffset")||ln(Ur,Er)))&&wn.push(Ur);return wn}function Xe(ue,we){for(var Ye=ue.length;Ye--;)if(bp(ue[Ye][0],we))return Ye;return-1}function kt(ue,we,Ye){var It=we(ue);return ef(ue)?It:be(It,Ye(ue))}function Wt(ue){return ue==null?ue===void 0?ie:B:St&&St in Object(ue)?Br(ue):Gb(ue)}function Zt(ue){return Dc(ue)&&Wt(ue)==a}function Kt(ue,we,Ye,It,jr){return ue===we?!0:ue==null||we==null||!Dc(ue)&&!Dc(we)?ue!==ue&&we!==we:de(ue,we,Ye,It,Kt,jr)}function de(ue,we,Ye,It,jr,ir){var Yr=ef(ue),wn=ef(we),Er=Yr?u:Ir(ue),Ur=wn?u:Ir(we);Er=Er==a?k:Er,Ur=Ur==a?k:Ur;var pn=Er==k,xi=Ur==k,xn=Er==Ur;if(xn&&bh(ue)){if(!bh(we))return!1;Yr=!0,pn=!1}if(xn&&!pn)return ir||(ir=new lt),Yr||_p(ue)?Qt(ue,we,Ye,It,jr,ir):mr(ue,we,Er,Ye,It,jr,ir);if(!(Ye&i)){var Jr=pn&&Be.call(ue,"__wrapped__"),si=xi&&Be.call(we,"__wrapped__");if(Jr||si){var Cs=Jr?ue.value():ue,os=si?we.value():we;return ir||(ir=new lt),jr(Cs,os,Ye,It,ir)}}return xn?(ir||(ir=new lt),lr(ue,we,Ye,It,jr,ir)):!1}function nr(ue){if(!xp(ue)||dn(ue))return!1;var we=tf(ue)?Je:F;return we.test(jo(ue))}function pr(ue){return Dc(ue)&&wp(ue.length)&&!!D[Wt(ue)]}function gr(ue){if(!vp(ue))return Ot(ue);var we=[];for(var Ye in Object(ue))Be.call(ue,Ye)&&Ye!="constructor"&&we.push(Ye);return we}function Qt(ue,we,Ye,It,jr,ir){var Yr=Ye&i,wn=ue.length,Er=we.length;if(wn!=Er&&!(Yr&&Er>wn))return!1;var Ur=ir.get(ue);if(Ur&&ir.get(we))return Ur==we;var pn=-1,xi=!0,xn=Ye&s?new _t:void 0;for(ir.set(ue,we),ir.set(we,ue);++pn<wn;){var Jr=ue[pn],si=we[pn];if(It)var Cs=Yr?It(si,Jr,pn,we,ue,ir):It(Jr,si,pn,ue,we,ir);if(Cs!==void 0){if(Cs)continue;xi=!1;break}if(xn){if(!Me(we,function(os,oo){if(!$e(xn,oo)&&(Jr===os||jr(Jr,os,Ye,It,ir)))return xn.push(oo)})){xi=!1;break}}else if(!(Jr===si||jr(Jr,si,Ye,It,ir))){xi=!1;break}}return ir.delete(ue),ir.delete(we),xi}function mr(ue,we,Ye,It,jr,ir,Yr){switch(Ye){case E:if(ue.byteLength!=we.byteLength||ue.byteOffset!=we.byteOffset)return!1;ue=ue.buffer,we=we.buffer;case j:return!(ue.byteLength!=we.byteLength||!ir(new ft(ue),new ft(we)));case d:case p:case L:return bp(+ue,+we);case y:return ue.name==we.name&&ue.message==we.message;case z:case R:return ue==we+"";case O:var wn=Le;case Z:var Er=It&i;if(wn||(wn=ke),ue.size!=we.size&&!Er)return!1;var Ur=Yr.get(ue);if(Ur)return Ur==we;It|=s,Yr.set(ue,we);var pn=Qt(wn(ue),wn(we),It,jr,ir,Yr);return Yr.delete(ue),pn;case W:if(G)return G.call(ue)==G.call(we)}return!1}function lr(ue,we,Ye,It,jr,ir){var Yr=Ye&i,wn=Lr(ue),Er=wn.length,Ur=Lr(we),pn=Ur.length;if(Er!=pn&&!Yr)return!1;for(var xi=Er;xi--;){var xn=wn[xi];if(!(Yr?xn in we:Be.call(we,xn)))return!1}var Jr=ir.get(ue);if(Jr&&ir.get(we))return Jr==we;var si=!0;ir.set(ue,we),ir.set(we,ue);for(var Cs=Yr;++xi<Er;){xn=wn[xi];var os=ue[xn],oo=we[xn];if(It)var yh=Yr?It(oo,os,xn,we,ue,ir):It(os,oo,xn,ue,we,ir);if(!(yh===void 0?os===oo||jr(os,oo,Ye,It,ir):yh)){si=!1;break}Cs||(Cs=xn=="constructor")}if(si&&!Cs){var Oc=ue.constructor,Ln=we.constructor;Oc!=Ln&&"constructor"in ue&&"constructor"in we&&!(typeof Oc=="function"&&Oc instanceof Oc&&typeof Ln=="function"&&Ln instanceof Ln)&&(si=!1)}return ir.delete(ue),ir.delete(we),si}function Lr(ue){return kt(ue,Xb,$r)}function vr(ue,we){var Ye=ue.__data__;return hn(we)?Ye[typeof we=="string"?"string":"hash"]:Ye.map}function xr(ue,we){var Ye=Ie(ue,we);return nr(Ye)?Ye:void 0}function Br(ue){var we=Be.call(ue,St),Ye=ue[St];try{ue[St]=void 0;var It=!0}catch{}var jr=rt.call(ue);return It&&(we?ue[St]=Ye:delete ue[St]),jr}var $r=er?function(ue){return ue==null?[]:(ue=Object(ue),fe(er(ue),function(we){return Ht.call(ue,we)}))}:Fr,Ir=Wt;(Bt&&Ir(new Bt(new ArrayBuffer(1)))!=E||Tt&&Ir(new Tt)!=O||bt&&Ir(bt.resolve())!=H||Dt&&Ir(new Dt)!=Z||Lt&&Ir(new Lt)!=me)&&(Ir=function(ue){var we=Wt(ue),Ye=we==k?ue.constructor:void 0,It=Ye?jo(Ye):"";if(It)switch(It){case $t:return E;case jt:return O;case nt:return H;case Ft:return Z;case $:return me}return we});function ln(ue,we){return we=we??o,!!we&&(typeof ue=="number"||ce.test(ue))&&ue>-1&&ue%1==0&&ue<we}function hn(ue){var we=typeof ue;return we=="string"||we=="number"||we=="symbol"||we=="boolean"?ue!=="__proto__":ue===null}function dn(ue){return!!et&&et in ue}function vp(ue){var we=ue&&ue.constructor,Ye=typeof we=="function"&&we.prototype||Se;return ue===Ye}function Gb(ue){return rt.call(ue)}function jo(ue){if(ue!=null){try{return ct.call(ue)}catch{}try{return ue+""}catch{}}return""}function bp(ue,we){return ue===we||ue!==ue&&we!==we}var yp=Zt(function(){return arguments}())?Zt:function(ue){return Dc(ue)&&Be.call(ue,"callee")&&!Ht.call(ue,"callee")},ef=Array.isArray;function Yb(ue){return ue!=null&&wp(ue.length)&&!tf(ue)}var bh=Xt||kr;function Jb(ue,we){return Kt(ue,we)}function tf(ue){if(!xp(ue))return!1;var we=Wt(ue);return we==_||we==M||we==l||we==U}function wp(ue){return typeof ue=="number"&&ue>-1&&ue%1==0&&ue<=o}function xp(ue){var we=typeof ue;return ue!=null&&(we=="object"||we=="function")}function Dc(ue){return ue!=null&&typeof ue=="object"}var _p=oe?Te(oe):pr;function Xb(ue){return Yb(ue)?qe(ue):gr(ue)}function Fr(){return[]}function kr(){return!1}t.exports=Jb}(c0,c0.exports);var XF=c0.exports;const ZF=ji(XF),v6="wc",b6=2,y6="core",Ys=`${v6}@2:${y6}:`,QF={logger:"error"},ej={database:":memory:"},tj="crypto",w6="client_ed25519_seed",rj=vt.ONE_DAY,nj="keychain",ij="0.3",sj="messages",oj="0.3",aj=vt.SIX_HOURS,cj="publisher",x6="irn",uj="error",_6="wss://relay.walletconnect.org",fj="relayer",ni={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},lj="_subscription",Qi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},hj=.1,A1="2.17.2",Wr={link_mode:"link_mode",relay:"relay"},dj="0.3",pj="WALLETCONNECT_CLIENT_ID",E6="WALLETCONNECT_LINK_MODE_APPS",Js={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},gj="subscription",mj="0.3",vj=vt.FIVE_SECONDS*1e3,bj="pairing",yj="0.3",Tl={wc_pairingDelete:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:vt.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:vt.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:0},res:{ttl:vt.ONE_DAY,prompt:!1,tag:0}}},hc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},xs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},wj="history",xj="0.3",_j="expirer",es={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Ej="0.3",Sj="verify-api",Aj="https://verify.walletconnect.com",S6="https://verify.walletconnect.org",Rl=S6,Pj=`${Rl}/v3`,Mj=[Aj,S6],Ij="echo",Cj="https://echo.walletconnect.com",Xs={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},Io={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},_s={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},dc={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},pc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Dl={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Tj=.1,Rj="event-client",Dj=86400,Oj="https://pulse.walletconnect.org/batch";function Nj(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function p(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var O=0,L=0,B=0,k=M.length;B!==k&&M[B]===0;)B++,O++;for(var H=(k-B)*d+1>>>0,U=new Uint8Array(H);B!==k;){for(var z=M[B],Z=0,R=H-1;(z!==0||Z<L)&&R!==-1;R--,Z++)z+=256*U[R]>>>0,U[R]=z%a>>>0,z=z/a>>>0;if(z!==0)throw new Error("Non-zero carry");L=Z,B++}for(var W=H-L;W!==H&&U[W]===0;)W++;for(var ie=u.repeat(O);W<H;++W)ie+=t.charAt(U[W]);return ie}function y(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var O=0;if(M[O]!==" "){for(var L=0,B=0;M[O]===u;)L++,O++;for(var k=(M.length-O)*l+1>>>0,H=new Uint8Array(k);M[O];){var U=r[M.charCodeAt(O)];if(U===255)return;for(var z=0,Z=k-1;(U!==0||z<B)&&Z!==-1;Z--,z++)U+=a*H[Z]>>>0,H[Z]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");B=z,O++}if(M[O]!==" "){for(var R=k-B;R!==k&&H[R]===0;)R++;for(var W=new Uint8Array(L+(k-R)),ie=L;R!==k;)W[ie++]=H[R++];return W}}}function _(M){var O=y(M);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:y,decode:_}}var Lj=Nj,kj=Lj;const A6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Bj=t=>new TextEncoder().encode(t),$j=t=>new TextDecoder().decode(t);class Fj{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class jj{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return P6(this,e)}}class Uj{constructor(e){this.decoders=e}or(e){return P6(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const P6=(t,e)=>new Uj({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class qj{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Fj(e,r,n),this.decoder=new jj(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const u0=({name:t,prefix:e,encode:r,decode:n})=>new qj(t,e,r,n),Ol=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=kj(r,e);return u0({prefix:t,name:e,encode:n,decode:s=>A6(i(s))})},zj=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,u=0,l=0;for(let d=0;d<s;++d){const p=i[t[d]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Hj=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},jn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>u0({prefix:e,name:t,encode(i){return Hj(i,n,r)},decode(i){return zj(i,n,r,t)}}),Wj=u0({prefix:"\0",name:"identity",encode:t=>$j(t),decode:t=>Bj(t)});var Kj=Object.freeze({__proto__:null,identity:Wj});const Vj=jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Gj=Object.freeze({__proto__:null,base2:Vj});const Yj=jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Jj=Object.freeze({__proto__:null,base8:Yj});const Xj=Ol({prefix:"9",name:"base10",alphabet:"0123456789"});var Zj=Object.freeze({__proto__:null,base10:Xj});const Qj=jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eU=jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tU=Object.freeze({__proto__:null,base16:Qj,base16upper:eU});const rU=jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nU=jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iU=jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sU=jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oU=jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aU=jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cU=jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uU=jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fU=jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lU=Object.freeze({__proto__:null,base32:rU,base32upper:nU,base32pad:iU,base32padupper:sU,base32hex:oU,base32hexupper:aU,base32hexpad:cU,base32hexpadupper:uU,base32z:fU});const hU=Ol({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dU=Ol({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pU=Object.freeze({__proto__:null,base36:hU,base36upper:dU});const gU=Ol({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),mU=Ol({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vU=Object.freeze({__proto__:null,base58btc:gU,base58flickr:mU});const bU=jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yU=jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wU=jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xU=jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var _U=Object.freeze({__proto__:null,base64:bU,base64pad:yU,base64url:wU,base64urlpad:xU});const M6=Array.from(""),EU=M6.reduce((t,e,r)=>(t[r]=e,t),[]),SU=M6.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function AU(t){return t.reduce((e,r)=>(e+=EU[r],e),"")}function PU(t){const e=[];for(const r of t){const n=SU[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const MU=u0({prefix:"",name:"base256emoji",encode:AU,decode:PU});var IU=Object.freeze({__proto__:null,base256emoji:MU}),CU=C6,I6=128,TU=127,RU=~TU,DU=Math.pow(2,31);function C6(t,e,r){e=e||[],r=r||0;for(var n=r;t>=DU;)e[r++]=t&255|I6,t/=128;for(;t&RU;)e[r++]=t&255|I6,t>>>=7;return e[r]=t|0,C6.bytes=r-n+1,e}var OU=P1,NU=128,T6=127;function P1(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw P1.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&T6)<<i:(o&T6)*Math.pow(2,i),i+=7}while(o>=NU);return P1.bytes=s-n,r}var LU=Math.pow(2,7),kU=Math.pow(2,14),BU=Math.pow(2,21),$U=Math.pow(2,28),FU=Math.pow(2,35),jU=Math.pow(2,42),UU=Math.pow(2,49),qU=Math.pow(2,56),zU=Math.pow(2,63),HU=function(t){return t<LU?1:t<kU?2:t<BU?3:t<$U?4:t<FU?5:t<jU?6:t<UU?7:t<qU?8:t<zU?9:10},WU={encode:CU,decode:OU,encodingLength:HU},R6=WU;const D6=(t,e,r=0)=>(R6.encode(t,e,r),e),O6=t=>R6.encodingLength(t),M1=(t,e)=>{const r=e.byteLength,n=O6(t),i=n+O6(r),s=new Uint8Array(i+r);return D6(t,s,0),D6(r,s,n),s.set(e,i),new KU(t,r,e,s)};class KU{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const N6=({name:t,code:e,encode:r})=>new VU(t,e,r);class VU{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?M1(this.code,r):r.then(n=>M1(this.code,n))}else throw Error("Unknown type, must be binary type")}}const L6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),GU=N6({name:"sha2-256",code:18,encode:L6("SHA-256")}),YU=N6({name:"sha2-512",code:19,encode:L6("SHA-512")});var JU=Object.freeze({__proto__:null,sha256:GU,sha512:YU});const k6=0,XU="identity",B6=A6;var ZU=Object.freeze({__proto__:null,identity:{code:k6,name:XU,encode:B6,digest:t=>M1(k6,B6(t))}});new TextEncoder,new TextDecoder;const $6={...Kj,...Gj,...Jj,...Zj,...tU,...lU,...pU,...vU,..._U,...IU};({...JU,...ZU});function QU(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function F6(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const j6=F6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),I1=F6("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=QU(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),eq={utf8:j6,"utf-8":j6,hex:$6.base16,latin1:I1,ascii:I1,binary:I1,...$6};function tq(t,e="utf8"){const r=eq[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}let rq=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=nj,this.version=ij,this.initialized=!1,this.storagePrefix=Ys,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ut("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=ti(r,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,E_(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?S_(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}},nq=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=tj,this.randomSessionIdentifier=v1(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Jx(i);return Yx(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=I$();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Jx(s),a=this.randomSessionIdentifier;return await lN(a,i,rj,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),u=C$(a,s);return this.setSymKey(u,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||r0(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=q_(o),u=mo(s);if(H_(a))return R$(u,o==null?void 0:o.encoding);if(z_(a)){const y=a.senderPublicKey,_=a.receiverPublicKey;i=await this.generateSharedKey(y,_)}const l=this.getSymKey(i),{type:d,senderPublicKey:p}=a;return T$({type:d,symKey:l,message:u,senderPublicKey:p,encoding:o==null?void 0:o.encoding})},this.decode=async(i,s,o)=>{this.isInitialized();const a=N$(s,o);if(H_(a)){const u=O$(s,o==null?void 0:o.encoding);return Za(u)}if(z_(a)){const u=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(u,l)}try{const u=this.getSymKey(i),l=D$({symKey:u,encoded:s,encoding:o==null?void 0:o.encoding});return Za(l)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}},this.getPayloadType=(i,s=ga)=>{const o=Sl({encoded:i,encoding:s});return uc(o.type)},this.getPayloadSenderPublicKey=(i,s=ga)=>{const o=Sl({encoded:i,encoding:s});return o.senderPublicKey?In(o.senderPublicKey,ri):void 0},this.core=e,this.logger=ti(r,this.name),this.keychain=n||new rq(this.core,this.logger)}get context(){return pi(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(w6)}catch{e=v1(),await this.keychain.set(w6,e)}return tq(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}};class iq extends yD{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=sj,this.version=oj,this.initialized=!1,this.storagePrefix=Ys,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Ao(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Ao(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=ti(e,this.name),this.core=r}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,E_(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?S_(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class sq extends wD{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Hi.EventEmitter,this.name=cj,this.queue=new Map,this.publishTimeout=vt.toMiliseconds(vt.ONE_MINUTE),this.failedPublishTimeout=vt.toMiliseconds(vt.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||aj,u=b1(s),l=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,p=(s==null?void 0:s.id)||lc().toString(),y={topic:n,message:i,opts:{ttl:a,relay:u,prompt:l,tag:d,id:p,attestation:s==null?void 0:s.attestation}},_=`Failed to publish payload, please try again. id:${p} tag:${d}`,M=Date.now();let O,L=1;try{for(;O===void 0;){if(Date.now()-M>this.publishTimeout)throw new Error(_);this.logger.trace({id:p,attempts:L},`publisher.publish - attempt ${L}`),O=await await Pu(this.rpcPublish(n,i,a,u,l,d,p,s==null?void 0:s.attestation).catch(B=>this.logger.warn(B)),this.publishTimeout,_),L++,O||await new Promise(B=>setTimeout(B,this.failedPublishTimeout))}this.relayer.events.emit(ni.publish,y),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:p,topic:n,message:i,opts:s}})}catch(B){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(B),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw B;this.queue.set(p,y)}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=ti(r,this.name),this.registerEventListeners()}get context(){return pi(this.logger)}rpcPublish(e,r,n,i,s,o,a,u){var l,d,p,y;const _={method:Al(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o,attestation:u},id:a};return vi((l=_.params)==null?void 0:l.prompt)&&((d=_.params)==null||delete d.prompt),vi((p=_.params)==null?void 0:p.tag)&&((y=_.params)==null||delete y.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_}),this.relayer.request(_)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(su.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ni.connection_stalled);return}this.checkQueue()}),this.relayer.on(ni.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class oq{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var aq=Object.defineProperty,cq=Object.defineProperties,uq=Object.getOwnPropertyDescriptors,U6=Object.getOwnPropertySymbols,fq=Object.prototype.hasOwnProperty,lq=Object.prototype.propertyIsEnumerable,q6=(t,e,r)=>e in t?aq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nl=(t,e)=>{for(var r in e||(e={}))fq.call(e,r)&&q6(t,r,e[r]);if(U6)for(var r of U6(e))lq.call(e,r)&&q6(t,r,e[r]);return t},C1=(t,e)=>cq(t,uq(e));class hq extends ED{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new oq,this.events=new Hi.EventEmitter,this.name=gj,this.version=mj,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ys,this.subscribeTimeout=vt.toMiliseconds(vt.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=b1(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{const a=new vt.Watch;a.start(i);const u=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(u),a.stop(i),s(!0)),a.elapsed(i)>=vj&&(clearInterval(u),a.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=ti(r,this.name),this.clientId=""}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=b1(n);await this.rpcUnsubscribe(e,r,i);const s=Dr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(n==null?void 0:n.transportType)===Wr.relay&&await this.restartToComplete();const s={method:Al(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=Ao(e+this.clientId);if((n==null?void 0:n.transportType)===Wr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(l=>this.logger.warn(l))},vt.toMiliseconds(vt.ONE_SECOND)),a;const u=await Pu(this.relayer.request(s).catch(l=>this.logger.warn(l)),this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ni.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Al(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Pu(this.relayer.request(n).catch(i=>this.logger.warn(i)),this.subscribeTimeout)}catch{this.relayer.events.emit(ni.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Al(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Pu(this.relayer.request(n).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(ni.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:Al(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,C1(Nl({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Nl({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Nl({},r)),this.topicMap.set(r.topic,e),this.events.emit(Js.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Js.deleted,C1(Nl({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Js.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(n),await this.batchSubscribe(n)}}this.events.emit(Js.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);fc(r)&&this.onBatchSubscribe(r.map((n,i)=>C1(Nl({},e[i]),{id:n})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(r.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(su.pulse,async()=>{await this.checkPending()}),this.events.on(Js.created,async e=>{const r=Js.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Js.deleted,async e=>{const r=Js.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var dq=Object.defineProperty,z6=Object.getOwnPropertySymbols,pq=Object.prototype.hasOwnProperty,gq=Object.prototype.propertyIsEnumerable,H6=(t,e,r)=>e in t?dq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,W6=(t,e)=>{for(var r in e||(e={}))pq.call(e,r)&&H6(t,r,e[r]);if(z6)for(var r of z6(e))gq.call(e,r)&&H6(t,r,e[r]);return t};class mq extends xD{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Hi.EventEmitter,this.name=fj,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=vt.toMiliseconds(vt.THIRTY_SECONDS+vt.ONE_SECOND),this.request=async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||lc().toString();await this.toEstablishConnection();try{const o=this.provider.request(r);this.requestsInFlight.set(s,{promise:o,request:r}),this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - attempt to publish...");const a=await new Promise(async(u,l)=>{const d=()=>{l(new Error(`relayer.request - publish interrupted, id: ${s}`))};this.provider.on(Qi.disconnect,d);const p=await o;this.provider.off(Qi.disconnect,d),u(p)});return this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - published"),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}finally{this.requestsInFlight.delete(s)}},this.resetPingTimeout=()=>{if(Zd())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(ni.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(ni.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Qi.payload,this.onPayloadHandler),this.provider.on(Qi.connect,this.onConnectHandler),this.provider.on(Qi.disconnect,this.onDisconnectHandler),this.provider.on(Qi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ti(e.logger,this.name):rl(bd({level:e.logger||uj})),this.messages=new iq(this.logger,e.core),this.subscriber=new hq(this,this.logger),this.publisher=new sq(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||_6,this.projectId=e.projectId,this.bundleId=KB(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return pi(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Wr.relay})}async subscribe(e,r){var n,i,s;this.isInitialized(),(r==null?void 0:r.transportType)==="relay"&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",u;const l=d=>{d.topic===e&&(this.subscriber.off(Js.created,l),u())};return await Promise.all([new Promise(d=>{u=d,this.subscriber.on(Js.created,l)}),new Promise(async(d,p)=>{a=await this.subscriber.subscribe(e,W6({internal:{throwOnFailedPublish:o}},r)).catch(y=>{o&&p(y)})||a,d()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Pu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(r,n)=>{const i=()=>{this.provider.off(Qi.disconnect,i),n(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Qi.disconnect,i),await Pu(this.provider.connect(),vt.toMiliseconds(vt.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>{n(s)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(s=>{this.logger.error(s),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){this.logger.error(r);const n=r;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(n.message))throw r}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await n6())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.trace(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=_n(vt.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(ni.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,r,n,i,s;if(Zd())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o)}}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Zi(new JF(JB({sdkVersion:A1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),S1(e)){if(!e.method.endsWith(lj))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:Wr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(W6({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else a0(e)&&this.events.emit(ni.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(ni.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=s0(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Qi.payload,this.onPayloadHandler),this.provider.off(Qi.connect,this.onConnectHandler),this.provider.off(Qi.disconnect,this.onDisconnectHandler),this.provider.off(Qi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await n6();MF(async r=>{e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(ni.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},vt.toMiliseconds(hj))))}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var vq=Object.defineProperty,K6=Object.getOwnPropertySymbols,bq=Object.prototype.hasOwnProperty,yq=Object.prototype.propertyIsEnumerable,V6=(t,e,r)=>e in t?vq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G6=(t,e)=>{for(var r in e||(e={}))bq.call(e,r)&&V6(t,r,e[r]);if(K6)for(var r of K6(e))yq.call(e,r)&&V6(t,r,e[r]);return t};class gc extends _D{constructor(e,r,n,i=Ys,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=dj,this.cached=[],this.initialized=!1,this.storagePrefix=Ys,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!vi(o)?this.map.set(this.getKey(o),o):iF(o)?this.map.set(o.id,o):sF(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(u=>ZF(a[u],o[u]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const u=G6(G6({},this.getData(o)),a);this.map.set(o,u),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=ti(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=ut("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class wq{constructor(e,r){this.core=e,this.logger=r,this.name=bj,this.version=yj,this.events=new im,this.initialized=!1,this.storagePrefix=Ys,this.ignoredPayloadTypes=[So],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async n=>{this.isInitialized();const i=v1(),s=await this.core.crypto.setSymKey(i),o=_n(vt.FIVE_MINUTES),a={protocol:x6},u={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=Y_({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(hc.create,u),this.core.expirer.set(s,o),await this.pairings.set(s,u),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:l}},this.pair=async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Xs.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:u,methods:l}=G_(n.uri);i.props.properties.topic=s,i.addTrace(Xs.pairing_uri_validation_success),i.addTrace(Xs.pairing_uri_not_expired);let d;if(this.pairings.keys.includes(s)){if(d=this.pairings.get(s),i.addTrace(Xs.existing_pairing),d.active)throw i.setError(Io.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Xs.pairing_not_expired)}const p=u||_n(vt.FIVE_MINUTES),y={topic:s,relay:a,expiry:p,active:!1,methods:l};this.core.expirer.set(s,p),await this.pairings.set(s,y),i.addTrace(Xs.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(hc.create,y),i.addTrace(Xs.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Xs.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Io.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(_){throw i.setError(Io.subscribe_pairing_topic_failure),_}return i.addTrace(Xs.subscribe_pairing_topic_success),y},this.activate=async({topic:n})=>{this.isInitialized();const i=_n(vt.THIRTY_DAYS);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:u}=ac();this.events.once(br("pairing_ping",s),({error:l})=>{l?u(l):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Dr("USER_DISCONNECTED")),await this.deletePairing(i))},this.formatUriFromPairing=n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,u=this.core.crypto.keychain.get(i);return Y_({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:u,relay:s,expiryTimestamp:o,methods:a})},this.sendRequest=async(n,i,s)=>{const o=va(i,s),a=await this.core.crypto.encode(n,o),u=Tl[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,u),o.id},this.sendResult=async(n,i,s)=>{const o=s0(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),l=Tl[u.request.method].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=o0(n,s),a=await this.core.crypto.encode(i,o),u=await this.core.history.get(i,n),l=Tl[u.request.method]?Tl[u.request.method].res:Tl.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Dr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>pa(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(hc.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Gs(i)?this.events.emit(br("pairing_ping",s),{}):Xi(i)&&this.events.emit(br("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(hc.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Dr("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Dr("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=(n,i)=>{var s;if(!bi(n)){const{message:a}=ut("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Io.malformed_pairing_uri),new Error(a)}if(!nF(n.uri)){const{message:a}=ut("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Io.malformed_pairing_uri),new Error(a)}const o=G_(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=ut("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Io.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ut("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Io.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&vt.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Io.pairing_expired);const{message:a}=ut("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}},this.isValidPing=async n=>{if(!bi(n)){const{message:s}=ut("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!bi(n)){const{message:s}=ut("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!on(n,!1)){const{message:i}=ut("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ut("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(pa(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ut("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=ti(r,this.name),this.pairings=new gc(this.core,this.logger,this.name,this.storagePrefix)}get context(){return pi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ni.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(!this.pairings.keys.includes(r)||i===Wr.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{S1(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):a0(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(es.expired,async e=>{const{topic:r}=P_(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(hc.expire,{topic:r}))})}}class xq extends bD{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Hi.EventEmitter,this.name=wj,this.version=xj,this.cached=[],this.initialized=!1,this.storagePrefix=Ys,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:_n(vt.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(xs.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Xi(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(xs.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(xs.deleted,s)}}),this.persist()},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=ti(r,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:va(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(xs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(xs.created,e=>{const r=xs.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(xs.updated,e=>{const r=xs.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(xs.deleted,e=>{const r=xs.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(su.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{vt.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(xs.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _q extends SD{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Hi.EventEmitter,this.name=_j,this.version=Ej,this.cached=[],this.initialized=!1,this.storagePrefix=Ys,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(es.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(es.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=ti(r,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return XB(e);if(typeof e=="number")return ZB(e);const{message:r}=ut("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(es.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ut("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;vt.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(es.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(su.pulse,()=>this.checkExpirations()),this.events.on(es.created,e=>{const r=es.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(es.expired,e=>{const r=es.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(es.deleted,e=>{const r=es.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Eq extends AD{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,this.name=Sj,this.verifyUrlV3=Pj,this.storagePrefix=Ys,this.version=b6,this.init=async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&vt.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async i=>{if(!vl()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=ol(),d=this.startAbortTimer(vt.ONE_SECOND*5),p=await new Promise((y,_)=>{const M=()=>{window.removeEventListener("message",L),l.body.removeChild(O),_("attestation aborted")};this.abortController.signal.addEventListener("abort",M);const O=l.createElement("iframe");O.src=u,O.style.display="none",O.addEventListener("error",M,{signal:this.abortController.signal});const L=B=>{if(B.data&&typeof B.data=="string")try{const k=JSON.parse(B.data);if(k.type==="verify_attestation"){if(Sm(k.attestation).payload.id!==o)return;clearInterval(d),l.body.removeChild(O),this.abortController.signal.removeEventListener("abort",M),window.removeEventListener("message",L),y(k.attestation===null?"":k.attestation)}}catch(k){this.logger.warn(k)}};l.body.appendChild(O),window.addEventListener("message",L,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",p),p}catch(l){this.logger.warn(l)}return""},this.resolve=async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Sm(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const u=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,u)},this.fetchAttestation=async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(vt.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0},this.getVerifyUrl=i=>{let s=i||Rl;return Mj.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Rl}`),s=Rl),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(vt.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}},this.persistPublicKey=async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i},this.validateAttestation=(i,s)=>{const o=$$(i,s.publicKey),a={hasExpired:vt.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}},this.logger=ti(r,this.name),this.abortController=new AbortController,this.isDevEnv=d1(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return pi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),vt.toMiliseconds(e))}}class Sq extends PD{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=Ij,this.registerDeviceToken=async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,u=`${Cj}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})},this.logger=ti(r,this.context)}}var Aq=Object.defineProperty,Y6=Object.getOwnPropertySymbols,Pq=Object.prototype.hasOwnProperty,Mq=Object.prototype.propertyIsEnumerable,J6=(t,e,r)=>e in t?Aq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ll=(t,e)=>{for(var r in e||(e={}))Pq.call(e,r)&&J6(t,r,e[r]);if(Y6)for(var r of Y6(e))Mq.call(e,r)&&J6(t,r,e[r]);return t};class Iq extends MD{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,this.context=Rj,this.storagePrefix=Ys,this.storageVersion=Tj,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!d1())try{const i={eventId:I_(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:__(this.core.relayer.protocol,this.core.relayer.version,A1)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}},this.createEvent=i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:u}}=i,l=I_(),d=this.core.projectId||"",p=Date.now(),y=Ll({eventId:l,timestamp:p,props:{event:s,type:o,properties:{topic:a,trace:u}},bundleId:d,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,y),this.shouldPersist=!0),y},this.getEvent=i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(a)return Ll(Ll({},a),this.setMethods(a.eventId))},this.deleteEvent=i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(su.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{vt.fromMiliseconds(Date.now())-vt.fromMiliseconds(i.timestamp)>Dj&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})},this.setMethods=i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)}),this.addTrace=(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)},this.setError=(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Ll(Ll({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Oj}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${A1}${s}`,{method:"POST",body:JSON.stringify(i)})},this.getAppDomain=()=>x_().url,this.logger=ti(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Cq=Object.defineProperty,X6=Object.getOwnPropertySymbols,Tq=Object.prototype.hasOwnProperty,Rq=Object.prototype.propertyIsEnumerable,Z6=(t,e,r)=>e in t?Cq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q6=(t,e)=>{for(var r in e||(e={}))Tq.call(e,r)&&Z6(t,r,e[r]);if(X6)for(var r of X6(e))Rq.call(e,r)&&Z6(t,r,e[r]);return t};class T1 extends vD{constructor(e){var r;super(e),this.protocol=v6,this.version=b6,this.name=y6,this.events=new Hi.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.dispatchEnvelope=({topic:o,message:a,sessionExists:u})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:Wr.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})},this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||_6,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=bd({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:QF.logger}),{logger:i,chunkLoggerController:s}=mD({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ti(i,this.name),this.heartbeat=new fR,this.crypto=new nq(this,this.logger,e==null?void 0:e.keychain),this.history=new xq(this,this.logger),this.expirer=new _q(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new qR(Q6(Q6({},ej),e==null?void 0:e.storageOptions)),this.relayer=new mq({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new wq(this,this.logger),this.verify=new Eq(this,this.logger,this.storage),this.echoClient=new Sq(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Iq(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new T1(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(pj,n),r}get context(){return pi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(E6,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(E6)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Dq=T1,e5="wc",t5=2,r5="client",R1=`${e5}@${t5}:${r5}:`,D1={name:r5,logger:"error"},n5="WALLETCONNECT_DEEPLINK_CHOICE",Oq="proposal",i5="Proposal expired",Nq="session",Iu=vt.SEVEN_DAYS,Lq="engine",Nn={wc_sessionPropose:{req:{ttl:vt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:vt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:vt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1114},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:vt.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:vt.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1119}}},O1={min:vt.FIVE_MINUTES,max:vt.SEVEN_DAYS},Zs={idle:"IDLE",active:"ACTIVE"},kq="request",Bq=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],$q="wc",Fq="auth",jq="authKeys",Uq="pairingTopics",qq="requests",f0=`${$q}@${1.5}:${Fq}:`,l0=`${f0}:PUB_KEY`;var zq=Object.defineProperty,Hq=Object.defineProperties,Wq=Object.getOwnPropertyDescriptors,s5=Object.getOwnPropertySymbols,Kq=Object.prototype.hasOwnProperty,Vq=Object.prototype.propertyIsEnumerable,o5=(t,e,r)=>e in t?zq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tn=(t,e)=>{for(var r in e||(e={}))Kq.call(e,r)&&o5(t,r,e[r]);if(s5)for(var r of s5(e))Vq.call(e,r)&&o5(t,r,e[r]);return t},Es=(t,e)=>Hq(t,Wq(e));class Gq extends CD{constructor(e){super(e),this.name=Lq,this.events=new im,this.initialized=!1,this.requestQueue={state:Zs.idle,queue:[]},this.sessionRequestQueue={state:Zs.idle,queue:[]},this.requestQueueDelay=vt.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Nn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},vt.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Es(tn({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:u}=n;let l=i,d,p=!1;try{l&&(p=this.client.core.pairing.pairings.get(l).active)}catch(U){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),U}if(!l||!p){const{topic:U,uri:z}=await this.client.core.pairing.create();l=U,d=z}if(!l){const{message:U}=ut("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(U)}const y=await this.client.core.crypto.generateKeyPair(),_=Nn.wc_sessionPropose.req.ttl||vt.FIVE_MINUTES,M=_n(_),O=tn({requiredNamespaces:s,optionalNamespaces:o,relays:u??[{protocol:x6}],proposer:{publicKey:y,metadata:this.client.metadata},expiryTimestamp:M,pairingTopic:l},a&&{sessionProperties:a}),{reject:L,resolve:B,done:k}=ac(_,i5);this.events.once(br("session_connect"),async({error:U,session:z})=>{if(U)L(U);else if(z){z.self.publicKey=y;const Z=Es(tn({},z),{pairingTopic:O.pairingTopic,requiredNamespaces:O.requiredNamespaces,optionalNamespaces:O.optionalNamespaces,transportType:Wr.relay});await this.client.session.set(z.topic,Z),await this.setExpiry(z.topic,z.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:z.peer.metadata}),this.cleanupDuplicatePairings(Z),B(Z)}});const H=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:O,throwOnFailedPublish:!0});return await this.setProposal(H,tn({id:H},O)),{uri:d,approval:k}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}},this.approve=async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[_s.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(W){throw o.setError(dc.no_internet_connection),W}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(W){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(dc.proposal_not_found),W}try{await this.isValidApprove(r)}catch(W){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(dc.session_approve_namespace_validation_failure),W}const{id:a,relayProtocol:u,namespaces:l,sessionProperties:d,sessionConfig:p}=r,y=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:_,proposer:M,requiredNamespaces:O,optionalNamespaces:L}=y;let B=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:_});B||(B=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:_s.session_approve_started,properties:{topic:_,trace:[_s.session_approve_started,_s.session_namespaces_validation_success]}}));const k=await this.client.core.crypto.generateKeyPair(),H=M.publicKey,U=await this.client.core.crypto.generateSharedKey(k,H),z=tn(tn({relay:{protocol:u??"irn"},namespaces:l,controller:{publicKey:k,metadata:this.client.metadata},expiry:_n(Iu)},d&&{sessionProperties:d}),p&&{sessionConfig:p}),Z=Wr.relay;B.addTrace(_s.subscribing_session_topic);try{await this.client.core.relayer.subscribe(U,{transportType:Z})}catch(W){throw B.setError(dc.subscribe_session_topic_failure),W}B.addTrace(_s.subscribe_session_topic_success);const R=Es(tn({},z),{topic:U,requiredNamespaces:O,optionalNamespaces:L,pairingTopic:_,acknowledged:!1,self:z.controller,peer:{publicKey:M.publicKey,metadata:M.metadata},controller:k,transportType:Wr.relay});await this.client.session.set(U,R),B.addTrace(_s.store_session);try{B.addTrace(_s.publishing_session_settle),await this.sendRequest({topic:U,method:"wc_sessionSettle",params:z,throwOnFailedPublish:!0}).catch(W=>{throw B==null||B.setError(dc.session_settle_publish_failure),W}),B.addTrace(_s.session_settle_publish_success),B.addTrace(_s.publishing_session_approve),await this.sendResult({id:a,topic:_,result:{relay:{protocol:u??"irn"},responderPublicKey:k},throwOnFailedPublish:!0}).catch(W=>{throw B==null||B.setError(dc.session_approve_publish_failure),W}),B.addTrace(_s.session_approve_publish_success)}catch(W){throw this.client.logger.error(W),this.client.session.delete(U,Dr("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(U),W}return this.client.core.eventClient.deleteEvent({eventId:B.eventId}),await this.client.core.pairing.updateMetadata({topic:_,metadata:M.metadata}),await this.client.proposal.delete(a,Dr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}),await this.setExpiry(U,_n(Iu)),{topic:U,acknowledged:()=>Promise.resolve(this.client.session.get(U))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:Nn.wc_sessionPropose.reject}),await this.client.proposal.delete(n,Dr("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(p){throw this.client.logger.error("update() -> isValidUpdate() failed"),p}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=ac(),u=ma(),l=lc().toString(),d=this.client.session.get(n).namespaces;return this.events.once(br("session_update",u),({error:p})=>{p?a(p):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:l}).catch(p=>{this.client.logger.error(p),this.client.session.update(n,{namespaces:d}),a(p)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:n}=r,i=ma(),{done:s,resolve:o,reject:a}=ac();return this.events.once(br("session_extend",i),({error:u})=>{u?a(u):o()}),await this.setExpiry(n,_n(Iu)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(u=>{a(u)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(M){throw this.client.logger.error("request() -> isValidRequest() failed"),M}const{chainId:n,request:i,topic:s,expiry:o=Nn.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Wr.relay&&await this.confirmOnlineStateOrThrow();const u=ma(),l=lc().toString(),{done:d,resolve:p,reject:y}=ac(o,"Request expired. Please try again.");this.events.once(br("session_request",u),({error:M,result:O})=>{M?y(M):p(O)});const _=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);return _?(await this.sendRequest({clientRpcId:u,relayRpcId:l,topic:s,method:"wc_sessionRequest",params:{request:Es(tn({},i),{expiryTimestamp:_n(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:_}).catch(M=>y(M)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),await d()):await Promise.all([new Promise(async M=>{await this.sendRequest({clientRpcId:u,relayRpcId:l,topic:s,method:"wc_sessionRequest",params:{request:Es(tn({},i),{expiryTimestamp:_n(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(O=>y(O)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),M()}),new Promise(async M=>{var O;if(!((O=a.sessionConfig)!=null&&O.disableDeepLink)){const L=await t$(this.client.core.storage,n5);await QB({id:u,topic:s,wcDeepLink:L})}M()}),d()]).then(M=>M[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Wr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Gs(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):Xi(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=ma(),s=lc().toString(),{done:o,resolve:a,reject:u}=ac();this.events.once(br("session_ping",i),({error:l})=>{l?u(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=lc().toString();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Dr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=ut("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>tF(n,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Wr.link_mode:Wr.relay;o===Wr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:u="",uri:l,domain:d,nonce:p,type:y,exp:_,nbf:M,methods:O=[],expiry:L}=r,B=[...r.resources||[]],{topic:k,uri:H}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:k,uri:H}});const U=await this.client.core.crypto.generateKeyPair(),z=r0(U);if(await Promise.all([this.client.auth.authKeys.set(l0,{responseTopic:z,publicKey:U}),this.client.auth.pairingTopics.set(z,{topic:z,pairingTopic:k})]),await this.client.core.relayer.subscribe(z,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${k}`),O.length>0){const{namespace:S}=Su(a[0]);let A=_$(S,"request",O);t0(B)&&(A=S$(A,B.pop())),B.push(A)}const Z=L&&L>Nn.wc_sessionAuthenticate.req.ttl?L:Nn.wc_sessionAuthenticate.req.ttl,R={authPayload:{type:y??"caip122",chains:a,statement:u,aud:l,domain:d,version:"1",nonce:p,iat:new Date().toISOString(),exp:_,nbf:M,resources:B},requester:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:_n(Z)},W={eip155:{chains:a,methods:[...new Set(["personal_sign",...O])],events:["chainChanged","accountsChanged"]}},ie={requiredNamespaces:{},optionalNamespaces:W,relays:[{protocol:"irn"}],pairingTopic:k,proposer:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:_n(Nn.wc_sessionPropose.req.ttl)},{done:me,resolve:j,reject:E}=ac(Z,"Request expired"),m=async({error:S,session:A})=>{if(this.events.off(br("session_request",g),f),S)E(S);else if(A){A.self.publicKey=U,await this.client.session.set(A.topic,A),await this.setExpiry(A.topic,A.expiry),k&&await this.client.core.pairing.updateMetadata({topic:k,metadata:A.peer.metadata});const b=this.client.session.get(A.topic);await this.deleteProposal(v),j({session:b})}},f=async S=>{var A,b,P;if(await this.deletePendingAuthRequest(g,{message:"fulfilled",code:0}),S.error){const J=Dr("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return S.error.code===J.code?void 0:(this.events.off(br("session_connect"),m),E(S.error.message))}await this.deleteProposal(v),this.events.off(br("session_connect"),m);const{cacaos:I,responder:F}=S.result,ce=[],D=[];for(const J of I){await D_({cacao:J,projectId:this.client.core.projectId})||(this.client.logger.error(J,"Signature verification failed"),E(Dr("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Q}=J,T=t0(Q.resources),X=[g1(Q.iss)],re=e0(Q.iss);if(T){const ge=L_(T),oe=k_(T);ce.push(...ge),X.push(...oe)}for(const ge of X)D.push(`${ge}:${re}`)}const se=await this.client.core.crypto.generateSharedKey(U,F.publicKey);let ee;ce.length>0&&(ee={topic:se,acknowledged:!0,self:{publicKey:U,metadata:this.client.metadata},peer:F,controller:F.publicKey,expiry:_n(Iu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:k,namespaces:J_([...new Set(ce)],[...new Set(D)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,ee),k&&await this.client.core.pairing.updateMetadata({topic:k,metadata:F.metadata}),ee=this.client.session.get(se)),(A=this.client.metadata.redirect)!=null&&A.linkMode&&(b=F.metadata.redirect)!=null&&b.linkMode&&(P=F.metadata.redirect)!=null&&P.universal&&n&&(this.client.core.addLinkModeSupportedApp(F.metadata.redirect.universal),this.client.session.update(se,{transportType:Wr.link_mode})),j({auths:I,session:ee})},g=ma(),v=ma();this.events.once(br("session_connect"),m),this.events.once(br("session_request",g),f);let x;try{if(s){const S=va("wc_sessionAuthenticate",R,g);this.client.core.history.set(k,S);const A=await this.client.core.crypto.encode("",S,{type:_l,encoding:wl});x=n0(n,k,A)}else await Promise.all([this.sendRequest({topic:k,method:"wc_sessionAuthenticate",params:R,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:g}),this.sendRequest({topic:k,method:"wc_sessionPropose",params:ie,expiry:Nn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:v})])}catch(S){throw this.events.off(br("session_connect"),m),this.events.off(br("session_request",g),f),S}return await this.setProposal(v,tn({id:v},ie)),await this.setAuthRequest(g,{request:Es(tn({},R),{verifyContext:{}}),pairingTopic:k,transportType:o}),{uri:x??H,response:me}},this.approveSessionAuthenticate=async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[pc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(L){throw s.setError(Dl.no_internet_connection),L}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(Dl.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Wr.relay;a===Wr.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),d=r0(u),p={type:So,receiverPublicKey:u,senderPublicKey:l},y=[],_=[];for(const L of i){if(!await D_({cacao:L,projectId:this.client.core.projectId})){s.setError(Dl.invalid_cacao);const z=Dr("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:d,error:z,encodeOpts:p}),new Error(z.message)}s.addTrace(pc.cacaos_verified);const{p:B}=L,k=t0(B.resources),H=[g1(B.iss)],U=e0(B.iss);if(k){const z=L_(k),Z=k_(k);y.push(...z),H.push(...Z)}for(const z of H)_.push(`${z}:${U}`)}const M=await this.client.core.crypto.generateSharedKey(l,u);s.addTrace(pc.create_authenticated_session_topic);let O;if((y==null?void 0:y.length)>0){O={topic:M,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:_n(Iu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:J_([...new Set(y)],[...new Set(_)]),transportType:a},s.addTrace(pc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(M,{transportType:a})}catch(L){throw s.setError(Dl.subscribe_authenticated_session_topic_failure),L}s.addTrace(pc.subscribe_authenticated_session_topic_success),await this.client.session.set(M,O),s.addTrace(pc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(pc.publishing_authenticated_session_approve);try{await this.sendResult({topic:d,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:p,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(L){throw s.setError(Dl.authenticated_session_approve_publish_failure),L}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:O}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Wr.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),u=r0(o),l={type:So,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:u,error:i,encodeOpts:l,rpcOpts:Nn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,Dr("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:n,iss:i}=r;return O_(n,i)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:u}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Dr("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(n5).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,Dr("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Zs.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})},this.deleteProposal=async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(dc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Dr("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Zs.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))},this.setProposal=async(r,n)=>{this.client.core.expirer.set(r,_n(Nn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)},this.setAuthRequest=async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Wr.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})},this.setPendingSessionRequest=async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||_n(Nn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:u,throwOnFailedPublish:l,appLink:d}=r,p=va(i,s,u);let y;const _=!!d;try{const L=_?wl:ga;y=await this.client.core.crypto.encode(n,p,{encoding:L})}catch(L){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),L}let M;if(Bq.includes(i)){const L=Ao(JSON.stringify(p)),B=Ao(y);M=await this.client.core.verify.register({id:B,decryptedId:L})}const O=Nn[i].req;if(O.attestation=M,o&&(O.ttl=o),a&&(O.id=a),this.client.core.history.set(n,p),_){const L=n0(d,n,y);await global.Linking.openURL(L,this.client.name)}else{const L=Nn[i].req;o&&(L.ttl=o),a&&(L.id=a),l?(L.internal=Es(tn({},L.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,y,L)):this.client.core.relayer.publish(n,y,L).catch(B=>this.client.logger.error(B))}return p.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:u}=r,l=s0(n,s);let d;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const _=p?wl:ga;d=await this.client.core.crypto.encode(i,l,Es(tn({},a||{}),{encoding:_}))}catch(_){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),_}let y;try{y=await this.client.core.history.get(i,n)}catch(_){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),_}if(p){const _=n0(u,i,d);await global.Linking.openURL(_,this.client.name)}else{const _=Nn[y.request.method].res;o?(_.internal=Es(tn({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,d,_)):this.client.core.relayer.publish(i,d,_).catch(M=>this.client.logger.error(M))}await this.client.core.history.resolve(l)},this.sendError=async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:u}=r,l=o0(n,s);let d;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const _=p?wl:ga;d=await this.client.core.crypto.encode(i,l,Es(tn({},o||{}),{encoding:_}))}catch(_){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),_}let y;try{y=await this.client.core.history.get(i,n)}catch(_){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),_}if(p){const _=n0(u,i,d);await global.Linking.openURL(_,this.client.name)}else{const _=a||Nn[y.request.method].res;this.client.core.relayer.publish(i,d,_)}await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;pa(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{pa(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Zs.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Zs.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Zs.idle},this.processRequest=async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,u=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=ut("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.shouldIgnorePairingRequest=r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:u}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.isValidConnect(tn({},i.params));const d=a.expiryTimestamp||_n(Nn.wc_sessionPropose.req.ttl),p=tn({id:u,pairingTopic:n,expiryTimestamp:d},a);await this.setProposal(u,p);const y=await this.getVerifyContext({attestationId:s,hash:Ao(JSON.stringify(i)),encryptedId:o,metadata:p.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Io.proposal_listener_not_found)),l==null||l.addTrace(Xs.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:p,verifyContext:y})}catch(l){await this.sendError({id:u,topic:n,error:l,rpcOpts:Nn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}},this.onSessionProposeResponse=async(r,n,i)=>{const{id:s}=n;if(Gs(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const u=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const d=await this.client.core.crypto.generateSharedKey(u,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:d});const p=await this.client.core.relayer.subscribe(d,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:p}),await this.client.core.pairing.activate({topic:r})}else if(Xi(n)){await this.client.proposal.delete(s,Dr("USER_DISCONNECTED"));const o=br("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(br("session_connect"),{error:n.error})}},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:u,namespaces:l,sessionProperties:d,sessionConfig:p}=n.params,y=Es(tn(tn({topic:r,relay:o,expiry:u,namespaces:l,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},d&&{sessionProperties:d}),p&&{sessionConfig:p}),{transportType:Wr.relay}),_=br("session_connect");if(this.events.listenerCount(_)===0)throw new Error(`emitting ${_} without any listeners 997`);this.events.emit(br("session_connect"),{session:y}),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Gs(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(br("session_approve",i),{})):Xi(n)&&(await this.client.session.delete(r,Dr("USER_DISCONNECTED")),this.events.emit(br("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Il.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:Dr("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(tn({topic:r},i));try{Il.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(u){throw Il.delete(o),u}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n,s=br("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Gs(n)?this.events.emit(br("session_update",i),{}):Xi(n)&&this.events.emit(br("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,_n(Iu)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n,s=br("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Gs(n)?this.events.emit(br("session_extend",i),{}):Xi(n)&&this.events.emit(br("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n,s=br("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Gs(n)?this.events.emit(br("session_ping",i),{}):Xi(n)&&this.events.emit(br("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(ni.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Dr("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var n,i,s;const{topic:o,payload:a,attestation:u,encryptedId:l,transportType:d}=r,{id:p,params:y}=a;try{await this.isValidRequest(tn({topic:o},y));const _=this.client.session.get(o),M=await this.getVerifyContext({attestationId:u,hash:Ao(JSON.stringify(va("wc_sessionRequest",y,p))),encryptedId:l,metadata:_.peer.metadata,transportType:d}),O={id:p,topic:o,params:y,verifyContext:M};await this.setPendingSessionRequest(O),d===Wr.link_mode&&(n=_.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=_.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(O):(this.addSessionRequestToSessionRequestQueue(O),this.processSessionRequestQueue())}catch(_){await this.sendError({id:p,topic:o,error:_}),this.client.logger.error(_)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n,s=br("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Gs(n)?this.events.emit(br("session_request",i),{result:n.result}):Xi(n)&&this.events.emit(br("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Il.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(tn({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Il.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Gs(n)?this.events.emit(br("session_request",i),{result:n.result}):Xi(n)&&this.events.emit(br("session_request",i),{error:n.error})},this.onSessionAuthenticateRequest=async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:u}=r;try{const{requester:l,authPayload:d,expiryTimestamp:p}=s.params,y=await this.getVerifyContext({attestationId:o,hash:Ao(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:u}),_={requester:l,pairingTopic:i,id:s.id,authPayload:d,verifyContext:y,expiryTimestamp:p};await this.setAuthRequest(s.id,{request:_,pairingTopic:i,transportType:u}),u===Wr.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:y})}catch(l){this.client.logger.error(l);const d=s.params.requester.publicKey,p=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(s.params.requester.metadata,u),_={type:So,receiverPublicKey:d,senderPublicKey:p};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:_,rpcOpts:Nn.wc_sessionAuthenticate.autoReject,appLink:y})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Zs.idle,this.processSessionRequestQueue()},vt.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=br("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(br("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Zs.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Zs.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:va("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})},this.isValidConnect=async r=>{if(!bi(r)){const{message:u}=ut("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(vi(n)||await this.isValidPairingTopic(n),!dF(a)){const{message:u}=ut("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(u)}!vi(i)&&Ml(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!vi(s)&&Ml(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),vi(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=hF(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!bi(r))throw new Error(ut("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const a=this.client.proposal.get(n),u=x1(i,"approve()");if(u)throw new Error(u.message);const l=t6(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!on(s,!0)){const{message:d}=ut("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}vi(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!bi(r)){const{message:s}=ut("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!gF(i)){const{message:s}=ut("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!bi(r)){const{message:l}=ut("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!Q_(n)){const{message:l}=ut("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=oF(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const u=x1(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(pa(o)){const{message:l}=ut("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!bi(r)){const{message:u}=ut("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=x1(i,"update()");if(o)throw new Error(o.message);const a=t6(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!bi(r)){const{message:i}=ut("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!bi(r)){const{message:u}=ut("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!e6(a,s)){const{message:u}=ut("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!mF(i)){const{message:u}=ut("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!yF(a,s,i.method)){const{message:u}=ut("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!EF(o,O1)){const{message:u}=ut("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${O1.min} and ${O1.max}`);throw new Error(u)}},this.isValidRespond=async r=>{var n;if(!bi(r)){const{message:o}=ut("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!vF(s)){const{message:o}=ut("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!bi(r)){const{message:i}=ut("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!bi(r)){const{message:a}=ut("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!e6(o,s)){const{message:a}=ut("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!bF(i)){const{message:a}=ut("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!wF(o,s,i.name)){const{message:a}=ut("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!bi(r)){const{message:i}=ut("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidAuthenticate=r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!on(i,!1))throw new Error("uri is required parameter");if(!on(s,!1))throw new Error("domain is required parameter");if(!on(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(u=>Su(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Su(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,u={verified:{verifyUrl:o.verifyUrl||Rl,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Wr.link_mode){const d=this.getAppLinkIfEnabled(o,a);return u.verified.validation=d&&new URL(d).origin===new URL(o.url).origin?"VALID":"INVALID",u}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(u.verified.origin=l.origin,u.verified.isScam=l.isScam,u.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!on(i,!1)){const{message:s}=ut("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0},this.addToRecentlyDeleted=(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=ut("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}},this.isLinkModeEnabled=(r,n)=>{var i,s,o,a,u,l,d,p,y;return!r||n!==Wr.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:l.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.universal)!==void 0&&((p=r==null?void 0:r.redirect)==null?void 0:p.universal)!==""&&((y=r==null?void 0:r.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=M_(r,"topic")||"",i=decodeURIComponent(M_(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Wr.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if(d1()||Au()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=ut("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ni.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(l0)?this.client.auth.authKeys.get(l0):{publicKey:void 0},a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Wr.link_mode?wl:ga});try{S1(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Ao(n)})):a0(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(es.expired,async e=>{const{topic:r,id:n}=P_(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ut("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ut("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(hc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(hc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!on(e,!1)){const{message:r}=ut("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ut("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(pa(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ut("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!on(e,!1)){const{message:r}=ut("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ut("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(pa(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ut("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ut("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(on(e,!1)){const{message:r}=ut("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ut("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!pF(e)){const{message:r}=ut("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ut("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(pa(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ut("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class Yq extends gc{constructor(e,r){super(e,r,Oq,R1),this.core=e,this.logger=r}}let Jq=class extends gc{constructor(e,r){super(e,r,Nq,R1),this.core=e,this.logger=r}};class Xq extends gc{constructor(e,r){super(e,r,kq,R1,n=>n.id),this.core=e,this.logger=r}}class Zq extends gc{constructor(e,r){super(e,r,jq,f0,()=>l0),this.core=e,this.logger=r}}class Qq extends gc{constructor(e,r){super(e,r,Uq,f0),this.core=e,this.logger=r}}class ez extends gc{constructor(e,r){super(e,r,qq,f0,n=>n.id),this.core=e,this.logger=r}}class tz{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new Zq(this.core,this.logger),this.pairingTopics=new Qq(this.core,this.logger),this.requests=new ez(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class N1 extends ID{constructor(e){super(e),this.protocol=e5,this.version=t5,this.name=D1.name,this.events=new Hi.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.authenticate=async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}},this.approveSessionAuthenticate=async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.rejectSessionAuthenticate=async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||D1.name,this.metadata=(e==null?void 0:e.metadata)||x_(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:rl(bd({level:(e==null?void 0:e.logger)||D1.logger}));this.core=(e==null?void 0:e.core)||new Dq(e),this.logger=ti(r,this.name),this.session=new Jq(this.core,this.logger),this.proposal=new Yq(this.core,this.logger),this.pendingRequest=new Xq(this.core,this.logger),this.engine=new Gq(this),this.auth=new tz(this.core,this.logger)}static async init(e){const r=new N1(e);return await r.initialize(),r}get context(){return pi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var h0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */h0.exports,function(t,e){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,d="__lodash_placeholder__",p=1,y=2,_=4,M=1,O=2,L=1,B=2,k=4,H=8,U=16,z=32,Z=64,R=128,W=256,ie=512,me=30,j="...",E=800,m=16,f=1,g=2,v=3,x=1/0,S=9007199254740991,A=17976931348623157e292,b=NaN,P=4294967295,I=P-1,F=P>>>1,ce=[["ary",R],["bind",L],["bindKey",B],["curry",H],["curryRight",U],["flip",ie],["partial",z],["partialRight",Z],["rearg",W]],D="[object Arguments]",se="[object Array]",ee="[object AsyncFunction]",J="[object Boolean]",Q="[object Date]",T="[object DOMException]",X="[object Error]",re="[object Function]",ge="[object GeneratorFunction]",oe="[object Map]",fe="[object Number]",be="[object Null]",Me="[object Object]",Ne="[object Promise]",Te="[object Proxy]",$e="[object RegExp]",Ie="[object Set]",Le="[object String]",Ve="[object Symbol]",ke="[object Undefined]",ze="[object WeakMap]",He="[object WeakSet]",Se="[object ArrayBuffer]",Qe="[object DataView]",ct="[object Float32Array]",Be="[object Float64Array]",et="[object Int8Array]",rt="[object Int16Array]",Je="[object Int32Array]",gt="[object Uint8Array]",ht="[object Uint8ClampedArray]",ft="[object Uint16Array]",Ht="[object Uint32Array]",Jt=/\b__p \+= '';/g,St=/\b(__p \+=) '' \+/g,er=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xt=/&(?:amp|lt|gt|quot|#39);/g,Ot=/[&<>"']/g,Bt=RegExp(Xt.source),Tt=RegExp(Ot.source),bt=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(nt.source),$=/^\s+/,K=/\s/,G=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,C=/\{\n\/\* \[wrapped with (.+)\] \*/,Y=/,? & /,q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ae=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Re=/\w*$/,De=/^[-+]0x[0-9a-f]+$/i,it=/^0b[01]+$/i,Ue=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,tt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,At=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,Mt="\\ud800-\\udfff",Et="\\u0300-\\u036f",dt="\\ufe20-\\ufe2f",_t="\\u20d0-\\u20ff",ot=Et+dt+_t,wt="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",at="\\xac\\xb1\\xd7\\xf7",Ae="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pe="\\u2000-\\u206f",Ge=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",je="A-Z\\xc0-\\xd6\\xd8-\\xde",qe="\\ufe0e\\ufe0f",Xe=at+Ae+Pe+Ge,kt="[']",Wt="["+Mt+"]",Zt="["+Xe+"]",Kt="["+ot+"]",de="\\d+",nr="["+wt+"]",pr="["+lt+"]",gr="[^"+Mt+Xe+de+wt+lt+je+"]",Qt="\\ud83c[\\udffb-\\udfff]",mr="(?:"+Kt+"|"+Qt+")",lr="[^"+Mt+"]",Lr="(?:\\ud83c[\\udde6-\\uddff]){2}",vr="[\\ud800-\\udbff][\\udc00-\\udfff]",xr="["+je+"]",Br="\\u200d",$r="(?:"+pr+"|"+gr+")",Ir="(?:"+xr+"|"+gr+")",ln="(?:"+kt+"(?:d|ll|m|re|s|t|ve))?",hn="(?:"+kt+"(?:D|LL|M|RE|S|T|VE))?",dn=mr+"?",vp="["+qe+"]?",Gb="(?:"+Br+"(?:"+[lr,Lr,vr].join("|")+")"+vp+dn+")*",jo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yp=vp+dn+Gb,ef="(?:"+[nr,Lr,vr].join("|")+")"+yp,Yb="(?:"+[lr+Kt+"?",Kt,Lr,vr,Wt].join("|")+")",bh=RegExp(kt,"g"),Jb=RegExp(Kt,"g"),tf=RegExp(Qt+"(?="+Qt+")|"+Yb+yp,"g"),wp=RegExp([xr+"?"+pr+"+"+ln+"(?="+[Zt,xr,"$"].join("|")+")",Ir+"+"+hn+"(?="+[Zt,xr+$r,"$"].join("|")+")",xr+"?"+$r+"+"+ln,xr+"+"+hn,bp,jo,de,ef].join("|"),"g"),xp=RegExp("["+Br+Mt+ot+qe+"]"),Dc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_p=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xb=-1,Fr={};Fr[ct]=Fr[Be]=Fr[et]=Fr[rt]=Fr[Je]=Fr[gt]=Fr[ht]=Fr[ft]=Fr[Ht]=!0,Fr[D]=Fr[se]=Fr[Se]=Fr[J]=Fr[Qe]=Fr[Q]=Fr[X]=Fr[re]=Fr[oe]=Fr[fe]=Fr[Me]=Fr[$e]=Fr[Ie]=Fr[Le]=Fr[ze]=!1;var kr={};kr[D]=kr[se]=kr[Se]=kr[Qe]=kr[J]=kr[Q]=kr[ct]=kr[Be]=kr[et]=kr[rt]=kr[Je]=kr[oe]=kr[fe]=kr[Me]=kr[$e]=kr[Ie]=kr[Le]=kr[Ve]=kr[gt]=kr[ht]=kr[ft]=kr[Ht]=!0,kr[X]=kr[re]=kr[ze]=!1;var ue={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},we={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},It={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jr=parseFloat,ir=parseInt,Yr=typeof nn=="object"&&nn&&nn.Object===Object&&nn,wn=typeof self=="object"&&self&&self.Object===Object&&self,Er=Yr||wn||Function("return this")(),Ur=e&&!e.nodeType&&e,pn=Ur&&!0&&t&&!t.nodeType&&t,xi=pn&&pn.exports===Ur,xn=xi&&Yr.process,Jr=function(){try{var ye=pn&&pn.require&&pn.require("util").types;return ye||xn&&xn.binding&&xn.binding("util")}catch{}}(),si=Jr&&Jr.isArrayBuffer,Cs=Jr&&Jr.isDate,os=Jr&&Jr.isMap,oo=Jr&&Jr.isRegExp,yh=Jr&&Jr.isSet,Oc=Jr&&Jr.isTypedArray;function Ln(ye,Fe,Ce){switch(Ce.length){case 0:return ye.call(Fe);case 1:return ye.call(Fe,Ce[0]);case 2:return ye.call(Fe,Ce[0],Ce[1]);case 3:return ye.call(Fe,Ce[0],Ce[1],Ce[2])}return ye.apply(Fe,Ce)}function fee(ye,Fe,Ce,Ct){for(var tr=-1,Mr=ye==null?0:ye.length;++tr<Mr;){var Sn=ye[tr];Fe(Ct,Sn,Ce(Sn),ye)}return Ct}function as(ye,Fe){for(var Ce=-1,Ct=ye==null?0:ye.length;++Ce<Ct&&Fe(ye[Ce],Ce,ye)!==!1;);return ye}function lee(ye,Fe){for(var Ce=ye==null?0:ye.length;Ce--&&Fe(ye[Ce],Ce,ye)!==!1;);return ye}function S9(ye,Fe){for(var Ce=-1,Ct=ye==null?0:ye.length;++Ce<Ct;)if(!Fe(ye[Ce],Ce,ye))return!1;return!0}function Da(ye,Fe){for(var Ce=-1,Ct=ye==null?0:ye.length,tr=0,Mr=[];++Ce<Ct;){var Sn=ye[Ce];Fe(Sn,Ce,ye)&&(Mr[tr++]=Sn)}return Mr}function Ep(ye,Fe){var Ce=ye==null?0:ye.length;return!!Ce&&rf(ye,Fe,0)>-1}function Zb(ye,Fe,Ce){for(var Ct=-1,tr=ye==null?0:ye.length;++Ct<tr;)if(Ce(Fe,ye[Ct]))return!0;return!1}function Xr(ye,Fe){for(var Ce=-1,Ct=ye==null?0:ye.length,tr=Array(Ct);++Ce<Ct;)tr[Ce]=Fe(ye[Ce],Ce,ye);return tr}function Oa(ye,Fe){for(var Ce=-1,Ct=Fe.length,tr=ye.length;++Ce<Ct;)ye[tr+Ce]=Fe[Ce];return ye}function Qb(ye,Fe,Ce,Ct){var tr=-1,Mr=ye==null?0:ye.length;for(Ct&&Mr&&(Ce=ye[++tr]);++tr<Mr;)Ce=Fe(Ce,ye[tr],tr,ye);return Ce}function hee(ye,Fe,Ce,Ct){var tr=ye==null?0:ye.length;for(Ct&&tr&&(Ce=ye[--tr]);tr--;)Ce=Fe(Ce,ye[tr],tr,ye);return Ce}function ey(ye,Fe){for(var Ce=-1,Ct=ye==null?0:ye.length;++Ce<Ct;)if(Fe(ye[Ce],Ce,ye))return!0;return!1}var dee=ty("length");function pee(ye){return ye.split("")}function gee(ye){return ye.match(q)||[]}function A9(ye,Fe,Ce){var Ct;return Ce(ye,function(tr,Mr,Sn){if(Fe(tr,Mr,Sn))return Ct=Mr,!1}),Ct}function Sp(ye,Fe,Ce,Ct){for(var tr=ye.length,Mr=Ce+(Ct?1:-1);Ct?Mr--:++Mr<tr;)if(Fe(ye[Mr],Mr,ye))return Mr;return-1}function rf(ye,Fe,Ce){return Fe===Fe?Mee(ye,Fe,Ce):Sp(ye,P9,Ce)}function mee(ye,Fe,Ce,Ct){for(var tr=Ce-1,Mr=ye.length;++tr<Mr;)if(Ct(ye[tr],Fe))return tr;return-1}function P9(ye){return ye!==ye}function M9(ye,Fe){var Ce=ye==null?0:ye.length;return Ce?ny(ye,Fe)/Ce:b}function ty(ye){return function(Fe){return Fe==null?r:Fe[ye]}}function ry(ye){return function(Fe){return ye==null?r:ye[Fe]}}function I9(ye,Fe,Ce,Ct,tr){return tr(ye,function(Mr,Sn,qr){Ce=Ct?(Ct=!1,Mr):Fe(Ce,Mr,Sn,qr)}),Ce}function vee(ye,Fe){var Ce=ye.length;for(ye.sort(Fe);Ce--;)ye[Ce]=ye[Ce].value;return ye}function ny(ye,Fe){for(var Ce,Ct=-1,tr=ye.length;++Ct<tr;){var Mr=Fe(ye[Ct]);Mr!==r&&(Ce=Ce===r?Mr:Ce+Mr)}return Ce}function iy(ye,Fe){for(var Ce=-1,Ct=Array(ye);++Ce<ye;)Ct[Ce]=Fe(Ce);return Ct}function bee(ye,Fe){return Xr(Fe,function(Ce){return[Ce,ye[Ce]]})}function C9(ye){return ye&&ye.slice(0,O9(ye)+1).replace($,"")}function Li(ye){return function(Fe){return ye(Fe)}}function sy(ye,Fe){return Xr(Fe,function(Ce){return ye[Ce]})}function wh(ye,Fe){return ye.has(Fe)}function T9(ye,Fe){for(var Ce=-1,Ct=ye.length;++Ce<Ct&&rf(Fe,ye[Ce],0)>-1;);return Ce}function R9(ye,Fe){for(var Ce=ye.length;Ce--&&rf(Fe,ye[Ce],0)>-1;);return Ce}function yee(ye,Fe){for(var Ce=ye.length,Ct=0;Ce--;)ye[Ce]===Fe&&++Ct;return Ct}var wee=ry(ue),xee=ry(we);function _ee(ye){return"\\"+It[ye]}function Eee(ye,Fe){return ye==null?r:ye[Fe]}function nf(ye){return xp.test(ye)}function See(ye){return Dc.test(ye)}function Aee(ye){for(var Fe,Ce=[];!(Fe=ye.next()).done;)Ce.push(Fe.value);return Ce}function oy(ye){var Fe=-1,Ce=Array(ye.size);return ye.forEach(function(Ct,tr){Ce[++Fe]=[tr,Ct]}),Ce}function D9(ye,Fe){return function(Ce){return ye(Fe(Ce))}}function Na(ye,Fe){for(var Ce=-1,Ct=ye.length,tr=0,Mr=[];++Ce<Ct;){var Sn=ye[Ce];(Sn===Fe||Sn===d)&&(ye[Ce]=d,Mr[tr++]=Ce)}return Mr}function Ap(ye){var Fe=-1,Ce=Array(ye.size);return ye.forEach(function(Ct){Ce[++Fe]=Ct}),Ce}function Pee(ye){var Fe=-1,Ce=Array(ye.size);return ye.forEach(function(Ct){Ce[++Fe]=[Ct,Ct]}),Ce}function Mee(ye,Fe,Ce){for(var Ct=Ce-1,tr=ye.length;++Ct<tr;)if(ye[Ct]===Fe)return Ct;return-1}function Iee(ye,Fe,Ce){for(var Ct=Ce+1;Ct--;)if(ye[Ct]===Fe)return Ct;return Ct}function sf(ye){return nf(ye)?Tee(ye):dee(ye)}function Ts(ye){return nf(ye)?Ree(ye):pee(ye)}function O9(ye){for(var Fe=ye.length;Fe--&&K.test(ye.charAt(Fe)););return Fe}var Cee=ry(Ye);function Tee(ye){for(var Fe=tf.lastIndex=0;tf.test(ye);)++Fe;return Fe}function Ree(ye){return ye.match(tf)||[]}function Dee(ye){return ye.match(wp)||[]}var Oee=function ye(Fe){Fe=Fe==null?Er:of.defaults(Er.Object(),Fe,of.pick(Er,_p));var Ce=Fe.Array,Ct=Fe.Date,tr=Fe.Error,Mr=Fe.Function,Sn=Fe.Math,qr=Fe.Object,ay=Fe.RegExp,Nee=Fe.String,cs=Fe.TypeError,Pp=Ce.prototype,Lee=Mr.prototype,af=qr.prototype,Mp=Fe["__core-js_shared__"],Ip=Lee.toString,Tr=af.hasOwnProperty,kee=0,N9=function(){var c=/[^.]+$/.exec(Mp&&Mp.keys&&Mp.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Cp=af.toString,Bee=Ip.call(qr),$ee=Er._,Fee=ay("^"+Ip.call(Tr).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tp=xi?Fe.Buffer:r,La=Fe.Symbol,Rp=Fe.Uint8Array,L9=Tp?Tp.allocUnsafe:r,Dp=D9(qr.getPrototypeOf,qr),k9=qr.create,B9=af.propertyIsEnumerable,Op=Pp.splice,$9=La?La.isConcatSpreadable:r,xh=La?La.iterator:r,Nc=La?La.toStringTag:r,Np=function(){try{var c=Fc(qr,"defineProperty");return c({},"",{}),c}catch{}}(),jee=Fe.clearTimeout!==Er.clearTimeout&&Fe.clearTimeout,Uee=Ct&&Ct.now!==Er.Date.now&&Ct.now,qee=Fe.setTimeout!==Er.setTimeout&&Fe.setTimeout,Lp=Sn.ceil,kp=Sn.floor,cy=qr.getOwnPropertySymbols,zee=Tp?Tp.isBuffer:r,F9=Fe.isFinite,Hee=Pp.join,Wee=D9(qr.keys,qr),An=Sn.max,Zn=Sn.min,Kee=Ct.now,Vee=Fe.parseInt,j9=Sn.random,Gee=Pp.reverse,uy=Fc(Fe,"DataView"),_h=Fc(Fe,"Map"),fy=Fc(Fe,"Promise"),cf=Fc(Fe,"Set"),Eh=Fc(Fe,"WeakMap"),Sh=Fc(qr,"create"),Bp=Eh&&new Eh,uf={},Yee=jc(uy),Jee=jc(_h),Xee=jc(fy),Zee=jc(cf),Qee=jc(Eh),$p=La?La.prototype:r,Ah=$p?$p.valueOf:r,U9=$p?$p.toString:r;function te(c){if(rn(c)&&!sr(c)&&!(c instanceof _r)){if(c instanceof us)return c;if(Tr.call(c,"__wrapped__"))return qA(c)}return new us(c)}var ff=function(){function c(){}return function(h){if(!Qr(h))return{};if(k9)return k9(h);c.prototype=h;var w=new c;return c.prototype=r,w}}();function Fp(){}function us(c,h){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=r}te.templateSettings={escape:bt,evaluate:Dt,interpolate:Lt,variable:"",imports:{_:te}},te.prototype=Fp.prototype,te.prototype.constructor=te,us.prototype=ff(Fp.prototype),us.prototype.constructor=us;function _r(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function ete(){var c=new _r(this.__wrapped__);return c.__actions__=_i(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=_i(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=_i(this.__views__),c}function tte(){if(this.__filtered__){var c=new _r(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function rte(){var c=this.__wrapped__.value(),h=this.__dir__,w=sr(c),N=h<0,V=w?c.length:0,ne=pre(0,V,this.__views__),he=ne.start,ve=ne.end,xe=ve-he,We=N?ve:he-1,Ke=this.__iteratees__,Ze=Ke.length,xt=0,Nt=Zn(xe,this.__takeCount__);if(!w||!N&&V==xe&&Nt==xe)return lA(c,this.__actions__);var Vt=[];e:for(;xe--&&xt<Nt;){We+=h;for(var fr=-1,Gt=c[We];++fr<Ze;){var yr=Ke[fr],Sr=yr.iteratee,$i=yr.type,ci=Sr(Gt);if($i==g)Gt=ci;else if(!ci){if($i==f)continue e;break e}}Vt[xt++]=Gt}return Vt}_r.prototype=ff(Fp.prototype),_r.prototype.constructor=_r;function Lc(c){var h=-1,w=c==null?0:c.length;for(this.clear();++h<w;){var N=c[h];this.set(N[0],N[1])}}function nte(){this.__data__=Sh?Sh(null):{},this.size=0}function ite(c){var h=this.has(c)&&delete this.__data__[c];return this.size-=h?1:0,h}function ste(c){var h=this.__data__;if(Sh){var w=h[c];return w===u?r:w}return Tr.call(h,c)?h[c]:r}function ote(c){var h=this.__data__;return Sh?h[c]!==r:Tr.call(h,c)}function ate(c,h){var w=this.__data__;return this.size+=this.has(c)?0:1,w[c]=Sh&&h===r?u:h,this}Lc.prototype.clear=nte,Lc.prototype.delete=ite,Lc.prototype.get=ste,Lc.prototype.has=ote,Lc.prototype.set=ate;function Uo(c){var h=-1,w=c==null?0:c.length;for(this.clear();++h<w;){var N=c[h];this.set(N[0],N[1])}}function cte(){this.__data__=[],this.size=0}function ute(c){var h=this.__data__,w=jp(h,c);if(w<0)return!1;var N=h.length-1;return w==N?h.pop():Op.call(h,w,1),--this.size,!0}function fte(c){var h=this.__data__,w=jp(h,c);return w<0?r:h[w][1]}function lte(c){return jp(this.__data__,c)>-1}function hte(c,h){var w=this.__data__,N=jp(w,c);return N<0?(++this.size,w.push([c,h])):w[N][1]=h,this}Uo.prototype.clear=cte,Uo.prototype.delete=ute,Uo.prototype.get=fte,Uo.prototype.has=lte,Uo.prototype.set=hte;function qo(c){var h=-1,w=c==null?0:c.length;for(this.clear();++h<w;){var N=c[h];this.set(N[0],N[1])}}function dte(){this.size=0,this.__data__={hash:new Lc,map:new(_h||Uo),string:new Lc}}function pte(c){var h=Zp(this,c).delete(c);return this.size-=h?1:0,h}function gte(c){return Zp(this,c).get(c)}function mte(c){return Zp(this,c).has(c)}function vte(c,h){var w=Zp(this,c),N=w.size;return w.set(c,h),this.size+=w.size==N?0:1,this}qo.prototype.clear=dte,qo.prototype.delete=pte,qo.prototype.get=gte,qo.prototype.has=mte,qo.prototype.set=vte;function kc(c){var h=-1,w=c==null?0:c.length;for(this.__data__=new qo;++h<w;)this.add(c[h])}function bte(c){return this.__data__.set(c,u),this}function yte(c){return this.__data__.has(c)}kc.prototype.add=kc.prototype.push=bte,kc.prototype.has=yte;function Rs(c){var h=this.__data__=new Uo(c);this.size=h.size}function wte(){this.__data__=new Uo,this.size=0}function xte(c){var h=this.__data__,w=h.delete(c);return this.size=h.size,w}function _te(c){return this.__data__.get(c)}function Ete(c){return this.__data__.has(c)}function Ste(c,h){var w=this.__data__;if(w instanceof Uo){var N=w.__data__;if(!_h||N.length<i-1)return N.push([c,h]),this.size=++w.size,this;w=this.__data__=new qo(N)}return w.set(c,h),this.size=w.size,this}Rs.prototype.clear=wte,Rs.prototype.delete=xte,Rs.prototype.get=_te,Rs.prototype.has=Ete,Rs.prototype.set=Ste;function q9(c,h){var w=sr(c),N=!w&&Uc(c),V=!w&&!N&&ja(c),ne=!w&&!N&&!V&&pf(c),he=w||N||V||ne,ve=he?iy(c.length,Nee):[],xe=ve.length;for(var We in c)(h||Tr.call(c,We))&&!(he&&(We=="length"||V&&(We=="offset"||We=="parent")||ne&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Ko(We,xe)))&&ve.push(We);return ve}function z9(c){var h=c.length;return h?c[xy(0,h-1)]:r}function Ate(c,h){return Qp(_i(c),Bc(h,0,c.length))}function Pte(c){return Qp(_i(c))}function ly(c,h,w){(w!==r&&!Ds(c[h],w)||w===r&&!(h in c))&&zo(c,h,w)}function Ph(c,h,w){var N=c[h];(!(Tr.call(c,h)&&Ds(N,w))||w===r&&!(h in c))&&zo(c,h,w)}function jp(c,h){for(var w=c.length;w--;)if(Ds(c[w][0],h))return w;return-1}function Mte(c,h,w,N){return ka(c,function(V,ne,he){h(N,V,w(V),he)}),N}function H9(c,h){return c&&co(h,kn(h),c)}function Ite(c,h){return c&&co(h,Si(h),c)}function zo(c,h,w){h=="__proto__"&&Np?Np(c,h,{configurable:!0,enumerable:!0,value:w,writable:!0}):c[h]=w}function hy(c,h){for(var w=-1,N=h.length,V=Ce(N),ne=c==null;++w<N;)V[w]=ne?r:Ky(c,h[w]);return V}function Bc(c,h,w){return c===c&&(w!==r&&(c=c<=w?c:w),h!==r&&(c=c>=h?c:h)),c}function fs(c,h,w,N,V,ne){var he,ve=h&p,xe=h&y,We=h&_;if(w&&(he=V?w(c,N,V,ne):w(c)),he!==r)return he;if(!Qr(c))return c;var Ke=sr(c);if(Ke){if(he=mre(c),!ve)return _i(c,he)}else{var Ze=Qn(c),xt=Ze==re||Ze==ge;if(ja(c))return pA(c,ve);if(Ze==Me||Ze==D||xt&&!V){if(he=xe||xt?{}:OA(c),!ve)return xe?sre(c,Ite(he,c)):ire(c,H9(he,c))}else{if(!kr[Ze])return V?c:{};he=vre(c,Ze,ve)}}ne||(ne=new Rs);var Nt=ne.get(c);if(Nt)return Nt;ne.set(c,he),cP(c)?c.forEach(function(Gt){he.add(fs(Gt,h,w,Gt,c,ne))}):oP(c)&&c.forEach(function(Gt,yr){he.set(yr,fs(Gt,h,w,yr,c,ne))});var Vt=We?xe?Dy:Ry:xe?Si:kn,fr=Ke?r:Vt(c);return as(fr||c,function(Gt,yr){fr&&(yr=Gt,Gt=c[yr]),Ph(he,yr,fs(Gt,h,w,yr,c,ne))}),he}function Cte(c){var h=kn(c);return function(w){return W9(w,c,h)}}function W9(c,h,w){var N=w.length;if(c==null)return!N;for(c=qr(c);N--;){var V=w[N],ne=h[V],he=c[V];if(he===r&&!(V in c)||!ne(he))return!1}return!0}function K9(c,h,w){if(typeof c!="function")throw new cs(o);return Oh(function(){c.apply(r,w)},h)}function Mh(c,h,w,N){var V=-1,ne=Ep,he=!0,ve=c.length,xe=[],We=h.length;if(!ve)return xe;w&&(h=Xr(h,Li(w))),N?(ne=Zb,he=!1):h.length>=i&&(ne=wh,he=!1,h=new kc(h));e:for(;++V<ve;){var Ke=c[V],Ze=w==null?Ke:w(Ke);if(Ke=N||Ke!==0?Ke:0,he&&Ze===Ze){for(var xt=We;xt--;)if(h[xt]===Ze)continue e;xe.push(Ke)}else ne(h,Ze,N)||xe.push(Ke)}return xe}var ka=yA(ao),V9=yA(py,!0);function Tte(c,h){var w=!0;return ka(c,function(N,V,ne){return w=!!h(N,V,ne),w}),w}function Up(c,h,w){for(var N=-1,V=c.length;++N<V;){var ne=c[N],he=h(ne);if(he!=null&&(ve===r?he===he&&!Bi(he):w(he,ve)))var ve=he,xe=ne}return xe}function Rte(c,h,w,N){var V=c.length;for(w=ur(w),w<0&&(w=-w>V?0:V+w),N=N===r||N>V?V:ur(N),N<0&&(N+=V),N=w>N?0:fP(N);w<N;)c[w++]=h;return c}function G9(c,h){var w=[];return ka(c,function(N,V,ne){h(N,V,ne)&&w.push(N)}),w}function Hn(c,h,w,N,V){var ne=-1,he=c.length;for(w||(w=yre),V||(V=[]);++ne<he;){var ve=c[ne];h>0&&w(ve)?h>1?Hn(ve,h-1,w,N,V):Oa(V,ve):N||(V[V.length]=ve)}return V}var dy=wA(),Y9=wA(!0);function ao(c,h){return c&&dy(c,h,kn)}function py(c,h){return c&&Y9(c,h,kn)}function qp(c,h){return Da(h,function(w){return Vo(c[w])})}function $c(c,h){h=$a(h,c);for(var w=0,N=h.length;c!=null&&w<N;)c=c[uo(h[w++])];return w&&w==N?c:r}function J9(c,h,w){var N=h(c);return sr(c)?N:Oa(N,w(c))}function oi(c){return c==null?c===r?ke:be:Nc&&Nc in qr(c)?dre(c):Pre(c)}function gy(c,h){return c>h}function Dte(c,h){return c!=null&&Tr.call(c,h)}function Ote(c,h){return c!=null&&h in qr(c)}function Nte(c,h,w){return c>=Zn(h,w)&&c<An(h,w)}function my(c,h,w){for(var N=w?Zb:Ep,V=c[0].length,ne=c.length,he=ne,ve=Ce(ne),xe=1/0,We=[];he--;){var Ke=c[he];he&&h&&(Ke=Xr(Ke,Li(h))),xe=Zn(Ke.length,xe),ve[he]=!w&&(h||V>=120&&Ke.length>=120)?new kc(he&&Ke):r}Ke=c[0];var Ze=-1,xt=ve[0];e:for(;++Ze<V&&We.length<xe;){var Nt=Ke[Ze],Vt=h?h(Nt):Nt;if(Nt=w||Nt!==0?Nt:0,!(xt?wh(xt,Vt):N(We,Vt,w))){for(he=ne;--he;){var fr=ve[he];if(!(fr?wh(fr,Vt):N(c[he],Vt,w)))continue e}xt&&xt.push(Vt),We.push(Nt)}}return We}function Lte(c,h,w,N){return ao(c,function(V,ne,he){h(N,w(V),ne,he)}),N}function Ih(c,h,w){h=$a(h,c),c=BA(c,h);var N=c==null?c:c[uo(hs(h))];return N==null?r:Ln(N,c,w)}function X9(c){return rn(c)&&oi(c)==D}function kte(c){return rn(c)&&oi(c)==Se}function Bte(c){return rn(c)&&oi(c)==Q}function Ch(c,h,w,N,V){return c===h?!0:c==null||h==null||!rn(c)&&!rn(h)?c!==c&&h!==h:$te(c,h,w,N,Ch,V)}function $te(c,h,w,N,V,ne){var he=sr(c),ve=sr(h),xe=he?se:Qn(c),We=ve?se:Qn(h);xe=xe==D?Me:xe,We=We==D?Me:We;var Ke=xe==Me,Ze=We==Me,xt=xe==We;if(xt&&ja(c)){if(!ja(h))return!1;he=!0,Ke=!1}if(xt&&!Ke)return ne||(ne=new Rs),he||pf(c)?TA(c,h,w,N,V,ne):lre(c,h,xe,w,N,V,ne);if(!(w&M)){var Nt=Ke&&Tr.call(c,"__wrapped__"),Vt=Ze&&Tr.call(h,"__wrapped__");if(Nt||Vt){var fr=Nt?c.value():c,Gt=Vt?h.value():h;return ne||(ne=new Rs),V(fr,Gt,w,N,ne)}}return xt?(ne||(ne=new Rs),hre(c,h,w,N,V,ne)):!1}function Fte(c){return rn(c)&&Qn(c)==oe}function vy(c,h,w,N){var V=w.length,ne=V,he=!N;if(c==null)return!ne;for(c=qr(c);V--;){var ve=w[V];if(he&&ve[2]?ve[1]!==c[ve[0]]:!(ve[0]in c))return!1}for(;++V<ne;){ve=w[V];var xe=ve[0],We=c[xe],Ke=ve[1];if(he&&ve[2]){if(We===r&&!(xe in c))return!1}else{var Ze=new Rs;if(N)var xt=N(We,Ke,xe,c,h,Ze);if(!(xt===r?Ch(Ke,We,M|O,N,Ze):xt))return!1}}return!0}function Z9(c){if(!Qr(c)||xre(c))return!1;var h=Vo(c)?Fee:Ue;return h.test(jc(c))}function jte(c){return rn(c)&&oi(c)==$e}function Ute(c){return rn(c)&&Qn(c)==Ie}function qte(c){return rn(c)&&sg(c.length)&&!!Fr[oi(c)]}function Q9(c){return typeof c=="function"?c:c==null?Ai:typeof c=="object"?sr(c)?rA(c[0],c[1]):tA(c):xP(c)}function by(c){if(!Dh(c))return Wee(c);var h=[];for(var w in qr(c))Tr.call(c,w)&&w!="constructor"&&h.push(w);return h}function zte(c){if(!Qr(c))return Are(c);var h=Dh(c),w=[];for(var N in c)N=="constructor"&&(h||!Tr.call(c,N))||w.push(N);return w}function yy(c,h){return c<h}function eA(c,h){var w=-1,N=Ei(c)?Ce(c.length):[];return ka(c,function(V,ne,he){N[++w]=h(V,ne,he)}),N}function tA(c){var h=Ny(c);return h.length==1&&h[0][2]?LA(h[0][0],h[0][1]):function(w){return w===c||vy(w,c,h)}}function rA(c,h){return ky(c)&&NA(h)?LA(uo(c),h):function(w){var N=Ky(w,c);return N===r&&N===h?Vy(w,c):Ch(h,N,M|O)}}function zp(c,h,w,N,V){c!==h&&dy(h,function(ne,he){if(V||(V=new Rs),Qr(ne))Hte(c,h,he,w,zp,N,V);else{var ve=N?N($y(c,he),ne,he+"",c,h,V):r;ve===r&&(ve=ne),ly(c,he,ve)}},Si)}function Hte(c,h,w,N,V,ne,he){var ve=$y(c,w),xe=$y(h,w),We=he.get(xe);if(We){ly(c,w,We);return}var Ke=ne?ne(ve,xe,w+"",c,h,he):r,Ze=Ke===r;if(Ze){var xt=sr(xe),Nt=!xt&&ja(xe),Vt=!xt&&!Nt&&pf(xe);Ke=xe,xt||Nt||Vt?sr(ve)?Ke=ve:gn(ve)?Ke=_i(ve):Nt?(Ze=!1,Ke=pA(xe,!0)):Vt?(Ze=!1,Ke=gA(xe,!0)):Ke=[]:Nh(xe)||Uc(xe)?(Ke=ve,Uc(ve)?Ke=lP(ve):(!Qr(ve)||Vo(ve))&&(Ke=OA(xe))):Ze=!1}Ze&&(he.set(xe,Ke),V(Ke,xe,N,ne,he),he.delete(xe)),ly(c,w,Ke)}function nA(c,h){var w=c.length;if(w)return h+=h<0?w:0,Ko(h,w)?c[h]:r}function iA(c,h,w){h.length?h=Xr(h,function(ne){return sr(ne)?function(he){return $c(he,ne.length===1?ne[0]:ne)}:ne}):h=[Ai];var N=-1;h=Xr(h,Li(qt()));var V=eA(c,function(ne,he,ve){var xe=Xr(h,function(We){return We(ne)});return{criteria:xe,index:++N,value:ne}});return vee(V,function(ne,he){return nre(ne,he,w)})}function Wte(c,h){return sA(c,h,function(w,N){return Vy(c,N)})}function sA(c,h,w){for(var N=-1,V=h.length,ne={};++N<V;){var he=h[N],ve=$c(c,he);w(ve,he)&&Th(ne,$a(he,c),ve)}return ne}function Kte(c){return function(h){return $c(h,c)}}function wy(c,h,w,N){var V=N?mee:rf,ne=-1,he=h.length,ve=c;for(c===h&&(h=_i(h)),w&&(ve=Xr(c,Li(w)));++ne<he;)for(var xe=0,We=h[ne],Ke=w?w(We):We;(xe=V(ve,Ke,xe,N))>-1;)ve!==c&&Op.call(ve,xe,1),Op.call(c,xe,1);return c}function oA(c,h){for(var w=c?h.length:0,N=w-1;w--;){var V=h[w];if(w==N||V!==ne){var ne=V;Ko(V)?Op.call(c,V,1):Sy(c,V)}}return c}function xy(c,h){return c+kp(j9()*(h-c+1))}function Vte(c,h,w,N){for(var V=-1,ne=An(Lp((h-c)/(w||1)),0),he=Ce(ne);ne--;)he[N?ne:++V]=c,c+=w;return he}function _y(c,h){var w="";if(!c||h<1||h>S)return w;do h%2&&(w+=c),h=kp(h/2),h&&(c+=c);while(h);return w}function hr(c,h){return Fy(kA(c,h,Ai),c+"")}function Gte(c){return z9(gf(c))}function Yte(c,h){var w=gf(c);return Qp(w,Bc(h,0,w.length))}function Th(c,h,w,N){if(!Qr(c))return c;h=$a(h,c);for(var V=-1,ne=h.length,he=ne-1,ve=c;ve!=null&&++V<ne;){var xe=uo(h[V]),We=w;if(xe==="__proto__"||xe==="constructor"||xe==="prototype")return c;if(V!=he){var Ke=ve[xe];We=N?N(Ke,xe,ve):r,We===r&&(We=Qr(Ke)?Ke:Ko(h[V+1])?[]:{})}Ph(ve,xe,We),ve=ve[xe]}return c}var aA=Bp?function(c,h){return Bp.set(c,h),c}:Ai,Jte=Np?function(c,h){return Np(c,"toString",{configurable:!0,enumerable:!1,value:Yy(h),writable:!0})}:Ai;function Xte(c){return Qp(gf(c))}function ls(c,h,w){var N=-1,V=c.length;h<0&&(h=-h>V?0:V+h),w=w>V?V:w,w<0&&(w+=V),V=h>w?0:w-h>>>0,h>>>=0;for(var ne=Ce(V);++N<V;)ne[N]=c[N+h];return ne}function Zte(c,h){var w;return ka(c,function(N,V,ne){return w=h(N,V,ne),!w}),!!w}function Hp(c,h,w){var N=0,V=c==null?N:c.length;if(typeof h=="number"&&h===h&&V<=F){for(;N<V;){var ne=N+V>>>1,he=c[ne];he!==null&&!Bi(he)&&(w?he<=h:he<h)?N=ne+1:V=ne}return V}return Ey(c,h,Ai,w)}function Ey(c,h,w,N){var V=0,ne=c==null?0:c.length;if(ne===0)return 0;h=w(h);for(var he=h!==h,ve=h===null,xe=Bi(h),We=h===r;V<ne;){var Ke=kp((V+ne)/2),Ze=w(c[Ke]),xt=Ze!==r,Nt=Ze===null,Vt=Ze===Ze,fr=Bi(Ze);if(he)var Gt=N||Vt;else We?Gt=Vt&&(N||xt):ve?Gt=Vt&&xt&&(N||!Nt):xe?Gt=Vt&&xt&&!Nt&&(N||!fr):Nt||fr?Gt=!1:Gt=N?Ze<=h:Ze<h;Gt?V=Ke+1:ne=Ke}return Zn(ne,I)}function cA(c,h){for(var w=-1,N=c.length,V=0,ne=[];++w<N;){var he=c[w],ve=h?h(he):he;if(!w||!Ds(ve,xe)){var xe=ve;ne[V++]=he===0?0:he}}return ne}function uA(c){return typeof c=="number"?c:Bi(c)?b:+c}function ki(c){if(typeof c=="string")return c;if(sr(c))return Xr(c,ki)+"";if(Bi(c))return U9?U9.call(c):"";var h=c+"";return h=="0"&&1/c==-x?"-0":h}function Ba(c,h,w){var N=-1,V=Ep,ne=c.length,he=!0,ve=[],xe=ve;if(w)he=!1,V=Zb;else if(ne>=i){var We=h?null:ure(c);if(We)return Ap(We);he=!1,V=wh,xe=new kc}else xe=h?[]:ve;e:for(;++N<ne;){var Ke=c[N],Ze=h?h(Ke):Ke;if(Ke=w||Ke!==0?Ke:0,he&&Ze===Ze){for(var xt=xe.length;xt--;)if(xe[xt]===Ze)continue e;h&&xe.push(Ze),ve.push(Ke)}else V(xe,Ze,w)||(xe!==ve&&xe.push(Ze),ve.push(Ke))}return ve}function Sy(c,h){return h=$a(h,c),c=BA(c,h),c==null||delete c[uo(hs(h))]}function fA(c,h,w,N){return Th(c,h,w($c(c,h)),N)}function Wp(c,h,w,N){for(var V=c.length,ne=N?V:-1;(N?ne--:++ne<V)&&h(c[ne],ne,c););return w?ls(c,N?0:ne,N?ne+1:V):ls(c,N?ne+1:0,N?V:ne)}function lA(c,h){var w=c;return w instanceof _r&&(w=w.value()),Qb(h,function(N,V){return V.func.apply(V.thisArg,Oa([N],V.args))},w)}function Ay(c,h,w){var N=c.length;if(N<2)return N?Ba(c[0]):[];for(var V=-1,ne=Ce(N);++V<N;)for(var he=c[V],ve=-1;++ve<N;)ve!=V&&(ne[V]=Mh(ne[V]||he,c[ve],h,w));return Ba(Hn(ne,1),h,w)}function hA(c,h,w){for(var N=-1,V=c.length,ne=h.length,he={};++N<V;){var ve=N<ne?h[N]:r;w(he,c[N],ve)}return he}function Py(c){return gn(c)?c:[]}function My(c){return typeof c=="function"?c:Ai}function $a(c,h){return sr(c)?c:ky(c,h)?[c]:UA(Cr(c))}var Qte=hr;function Fa(c,h,w){var N=c.length;return w=w===r?N:w,!h&&w>=N?c:ls(c,h,w)}var dA=jee||function(c){return Er.clearTimeout(c)};function pA(c,h){if(h)return c.slice();var w=c.length,N=L9?L9(w):new c.constructor(w);return c.copy(N),N}function Iy(c){var h=new c.constructor(c.byteLength);return new Rp(h).set(new Rp(c)),h}function ere(c,h){var w=h?Iy(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.byteLength)}function tre(c){var h=new c.constructor(c.source,Re.exec(c));return h.lastIndex=c.lastIndex,h}function rre(c){return Ah?qr(Ah.call(c)):{}}function gA(c,h){var w=h?Iy(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.length)}function mA(c,h){if(c!==h){var w=c!==r,N=c===null,V=c===c,ne=Bi(c),he=h!==r,ve=h===null,xe=h===h,We=Bi(h);if(!ve&&!We&&!ne&&c>h||ne&&he&&xe&&!ve&&!We||N&&he&&xe||!w&&xe||!V)return 1;if(!N&&!ne&&!We&&c<h||We&&w&&V&&!N&&!ne||ve&&w&&V||!he&&V||!xe)return-1}return 0}function nre(c,h,w){for(var N=-1,V=c.criteria,ne=h.criteria,he=V.length,ve=w.length;++N<he;){var xe=mA(V[N],ne[N]);if(xe){if(N>=ve)return xe;var We=w[N];return xe*(We=="desc"?-1:1)}}return c.index-h.index}function vA(c,h,w,N){for(var V=-1,ne=c.length,he=w.length,ve=-1,xe=h.length,We=An(ne-he,0),Ke=Ce(xe+We),Ze=!N;++ve<xe;)Ke[ve]=h[ve];for(;++V<he;)(Ze||V<ne)&&(Ke[w[V]]=c[V]);for(;We--;)Ke[ve++]=c[V++];return Ke}function bA(c,h,w,N){for(var V=-1,ne=c.length,he=-1,ve=w.length,xe=-1,We=h.length,Ke=An(ne-ve,0),Ze=Ce(Ke+We),xt=!N;++V<Ke;)Ze[V]=c[V];for(var Nt=V;++xe<We;)Ze[Nt+xe]=h[xe];for(;++he<ve;)(xt||V<ne)&&(Ze[Nt+w[he]]=c[V++]);return Ze}function _i(c,h){var w=-1,N=c.length;for(h||(h=Ce(N));++w<N;)h[w]=c[w];return h}function co(c,h,w,N){var V=!w;w||(w={});for(var ne=-1,he=h.length;++ne<he;){var ve=h[ne],xe=N?N(w[ve],c[ve],ve,w,c):r;xe===r&&(xe=c[ve]),V?zo(w,ve,xe):Ph(w,ve,xe)}return w}function ire(c,h){return co(c,Ly(c),h)}function sre(c,h){return co(c,RA(c),h)}function Kp(c,h){return function(w,N){var V=sr(w)?fee:Mte,ne=h?h():{};return V(w,c,qt(N,2),ne)}}function lf(c){return hr(function(h,w){var N=-1,V=w.length,ne=V>1?w[V-1]:r,he=V>2?w[2]:r;for(ne=c.length>3&&typeof ne=="function"?(V--,ne):r,he&&ai(w[0],w[1],he)&&(ne=V<3?r:ne,V=1),h=qr(h);++N<V;){var ve=w[N];ve&&c(h,ve,N,ne)}return h})}function yA(c,h){return function(w,N){if(w==null)return w;if(!Ei(w))return c(w,N);for(var V=w.length,ne=h?V:-1,he=qr(w);(h?ne--:++ne<V)&&N(he[ne],ne,he)!==!1;);return w}}function wA(c){return function(h,w,N){for(var V=-1,ne=qr(h),he=N(h),ve=he.length;ve--;){var xe=he[c?ve:++V];if(w(ne[xe],xe,ne)===!1)break}return h}}function ore(c,h,w){var N=h&L,V=Rh(c);function ne(){var he=this&&this!==Er&&this instanceof ne?V:c;return he.apply(N?w:this,arguments)}return ne}function xA(c){return function(h){h=Cr(h);var w=nf(h)?Ts(h):r,N=w?w[0]:h.charAt(0),V=w?Fa(w,1).join(""):h.slice(1);return N[c]()+V}}function hf(c){return function(h){return Qb(yP(bP(h).replace(bh,"")),c,"")}}function Rh(c){return function(){var h=arguments;switch(h.length){case 0:return new c;case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var w=ff(c.prototype),N=c.apply(w,h);return Qr(N)?N:w}}function are(c,h,w){var N=Rh(c);function V(){for(var ne=arguments.length,he=Ce(ne),ve=ne,xe=df(V);ve--;)he[ve]=arguments[ve];var We=ne<3&&he[0]!==xe&&he[ne-1]!==xe?[]:Na(he,xe);if(ne-=We.length,ne<w)return PA(c,h,Vp,V.placeholder,r,he,We,r,r,w-ne);var Ke=this&&this!==Er&&this instanceof V?N:c;return Ln(Ke,this,he)}return V}function _A(c){return function(h,w,N){var V=qr(h);if(!Ei(h)){var ne=qt(w,3);h=kn(h),w=function(ve){return ne(V[ve],ve,V)}}var he=c(h,w,N);return he>-1?V[ne?h[he]:he]:r}}function EA(c){return Wo(function(h){var w=h.length,N=w,V=us.prototype.thru;for(c&&h.reverse();N--;){var ne=h[N];if(typeof ne!="function")throw new cs(o);if(V&&!he&&Xp(ne)=="wrapper")var he=new us([],!0)}for(N=he?N:w;++N<w;){ne=h[N];var ve=Xp(ne),xe=ve=="wrapper"?Oy(ne):r;xe&&By(xe[0])&&xe[1]==(R|H|z|W)&&!xe[4].length&&xe[9]==1?he=he[Xp(xe[0])].apply(he,xe[3]):he=ne.length==1&&By(ne)?he[ve]():he.thru(ne)}return function(){var We=arguments,Ke=We[0];if(he&&We.length==1&&sr(Ke))return he.plant(Ke).value();for(var Ze=0,xt=w?h[Ze].apply(this,We):Ke;++Ze<w;)xt=h[Ze].call(this,xt);return xt}})}function Vp(c,h,w,N,V,ne,he,ve,xe,We){var Ke=h&R,Ze=h&L,xt=h&B,Nt=h&(H|U),Vt=h&ie,fr=xt?r:Rh(c);function Gt(){for(var yr=arguments.length,Sr=Ce(yr),$i=yr;$i--;)Sr[$i]=arguments[$i];if(Nt)var ci=df(Gt),Fi=yee(Sr,ci);if(N&&(Sr=vA(Sr,N,V,Nt)),ne&&(Sr=bA(Sr,ne,he,Nt)),yr-=Fi,Nt&&yr<We){var mn=Na(Sr,ci);return PA(c,h,Vp,Gt.placeholder,w,Sr,mn,ve,xe,We-yr)}var Os=Ze?w:this,Yo=xt?Os[c]:c;return yr=Sr.length,ve?Sr=Mre(Sr,ve):Vt&&yr>1&&Sr.reverse(),Ke&&xe<yr&&(Sr.length=xe),this&&this!==Er&&this instanceof Gt&&(Yo=fr||Rh(Yo)),Yo.apply(Os,Sr)}return Gt}function SA(c,h){return function(w,N){return Lte(w,c,h(N),{})}}function Gp(c,h){return function(w,N){var V;if(w===r&&N===r)return h;if(w!==r&&(V=w),N!==r){if(V===r)return N;typeof w=="string"||typeof N=="string"?(w=ki(w),N=ki(N)):(w=uA(w),N=uA(N)),V=c(w,N)}return V}}function Cy(c){return Wo(function(h){return h=Xr(h,Li(qt())),hr(function(w){var N=this;return c(h,function(V){return Ln(V,N,w)})})})}function Yp(c,h){h=h===r?" ":ki(h);var w=h.length;if(w<2)return w?_y(h,c):h;var N=_y(h,Lp(c/sf(h)));return nf(h)?Fa(Ts(N),0,c).join(""):N.slice(0,c)}function cre(c,h,w,N){var V=h&L,ne=Rh(c);function he(){for(var ve=-1,xe=arguments.length,We=-1,Ke=N.length,Ze=Ce(Ke+xe),xt=this&&this!==Er&&this instanceof he?ne:c;++We<Ke;)Ze[We]=N[We];for(;xe--;)Ze[We++]=arguments[++ve];return Ln(xt,V?w:this,Ze)}return he}function AA(c){return function(h,w,N){return N&&typeof N!="number"&&ai(h,w,N)&&(w=N=r),h=Go(h),w===r?(w=h,h=0):w=Go(w),N=N===r?h<w?1:-1:Go(N),Vte(h,w,N,c)}}function Jp(c){return function(h,w){return typeof h=="string"&&typeof w=="string"||(h=ds(h),w=ds(w)),c(h,w)}}function PA(c,h,w,N,V,ne,he,ve,xe,We){var Ke=h&H,Ze=Ke?he:r,xt=Ke?r:he,Nt=Ke?ne:r,Vt=Ke?r:ne;h|=Ke?z:Z,h&=~(Ke?Z:z),h&k||(h&=~(L|B));var fr=[c,h,V,Nt,Ze,Vt,xt,ve,xe,We],Gt=w.apply(r,fr);return By(c)&&$A(Gt,fr),Gt.placeholder=N,FA(Gt,c,h)}function Ty(c){var h=Sn[c];return function(w,N){if(w=ds(w),N=N==null?0:Zn(ur(N),292),N&&F9(w)){var V=(Cr(w)+"e").split("e"),ne=h(V[0]+"e"+(+V[1]+N));return V=(Cr(ne)+"e").split("e"),+(V[0]+"e"+(+V[1]-N))}return h(w)}}var ure=cf&&1/Ap(new cf([,-0]))[1]==x?function(c){return new cf(c)}:Zy;function MA(c){return function(h){var w=Qn(h);return w==oe?oy(h):w==Ie?Pee(h):bee(h,c(h))}}function Ho(c,h,w,N,V,ne,he,ve){var xe=h&B;if(!xe&&typeof c!="function")throw new cs(o);var We=N?N.length:0;if(We||(h&=~(z|Z),N=V=r),he=he===r?he:An(ur(he),0),ve=ve===r?ve:ur(ve),We-=V?V.length:0,h&Z){var Ke=N,Ze=V;N=V=r}var xt=xe?r:Oy(c),Nt=[c,h,w,N,V,Ke,Ze,ne,he,ve];if(xt&&Sre(Nt,xt),c=Nt[0],h=Nt[1],w=Nt[2],N=Nt[3],V=Nt[4],ve=Nt[9]=Nt[9]===r?xe?0:c.length:An(Nt[9]-We,0),!ve&&h&(H|U)&&(h&=~(H|U)),!h||h==L)var Vt=ore(c,h,w);else h==H||h==U?Vt=are(c,h,ve):(h==z||h==(L|z))&&!V.length?Vt=cre(c,h,w,N):Vt=Vp.apply(r,Nt);var fr=xt?aA:$A;return FA(fr(Vt,Nt),c,h)}function IA(c,h,w,N){return c===r||Ds(c,af[w])&&!Tr.call(N,w)?h:c}function CA(c,h,w,N,V,ne){return Qr(c)&&Qr(h)&&(ne.set(h,c),zp(c,h,r,CA,ne),ne.delete(h)),c}function fre(c){return Nh(c)?r:c}function TA(c,h,w,N,V,ne){var he=w&M,ve=c.length,xe=h.length;if(ve!=xe&&!(he&&xe>ve))return!1;var We=ne.get(c),Ke=ne.get(h);if(We&&Ke)return We==h&&Ke==c;var Ze=-1,xt=!0,Nt=w&O?new kc:r;for(ne.set(c,h),ne.set(h,c);++Ze<ve;){var Vt=c[Ze],fr=h[Ze];if(N)var Gt=he?N(fr,Vt,Ze,h,c,ne):N(Vt,fr,Ze,c,h,ne);if(Gt!==r){if(Gt)continue;xt=!1;break}if(Nt){if(!ey(h,function(yr,Sr){if(!wh(Nt,Sr)&&(Vt===yr||V(Vt,yr,w,N,ne)))return Nt.push(Sr)})){xt=!1;break}}else if(!(Vt===fr||V(Vt,fr,w,N,ne))){xt=!1;break}}return ne.delete(c),ne.delete(h),xt}function lre(c,h,w,N,V,ne,he){switch(w){case Qe:if(c.byteLength!=h.byteLength||c.byteOffset!=h.byteOffset)return!1;c=c.buffer,h=h.buffer;case Se:return!(c.byteLength!=h.byteLength||!ne(new Rp(c),new Rp(h)));case J:case Q:case fe:return Ds(+c,+h);case X:return c.name==h.name&&c.message==h.message;case $e:case Le:return c==h+"";case oe:var ve=oy;case Ie:var xe=N&M;if(ve||(ve=Ap),c.size!=h.size&&!xe)return!1;var We=he.get(c);if(We)return We==h;N|=O,he.set(c,h);var Ke=TA(ve(c),ve(h),N,V,ne,he);return he.delete(c),Ke;case Ve:if(Ah)return Ah.call(c)==Ah.call(h)}return!1}function hre(c,h,w,N,V,ne){var he=w&M,ve=Ry(c),xe=ve.length,We=Ry(h),Ke=We.length;if(xe!=Ke&&!he)return!1;for(var Ze=xe;Ze--;){var xt=ve[Ze];if(!(he?xt in h:Tr.call(h,xt)))return!1}var Nt=ne.get(c),Vt=ne.get(h);if(Nt&&Vt)return Nt==h&&Vt==c;var fr=!0;ne.set(c,h),ne.set(h,c);for(var Gt=he;++Ze<xe;){xt=ve[Ze];var yr=c[xt],Sr=h[xt];if(N)var $i=he?N(Sr,yr,xt,h,c,ne):N(yr,Sr,xt,c,h,ne);if(!($i===r?yr===Sr||V(yr,Sr,w,N,ne):$i)){fr=!1;break}Gt||(Gt=xt=="constructor")}if(fr&&!Gt){var ci=c.constructor,Fi=h.constructor;ci!=Fi&&"constructor"in c&&"constructor"in h&&!(typeof ci=="function"&&ci instanceof ci&&typeof Fi=="function"&&Fi instanceof Fi)&&(fr=!1)}return ne.delete(c),ne.delete(h),fr}function Wo(c){return Fy(kA(c,r,WA),c+"")}function Ry(c){return J9(c,kn,Ly)}function Dy(c){return J9(c,Si,RA)}var Oy=Bp?function(c){return Bp.get(c)}:Zy;function Xp(c){for(var h=c.name+"",w=uf[h],N=Tr.call(uf,h)?w.length:0;N--;){var V=w[N],ne=V.func;if(ne==null||ne==c)return V.name}return h}function df(c){var h=Tr.call(te,"placeholder")?te:c;return h.placeholder}function qt(){var c=te.iteratee||Jy;return c=c===Jy?Q9:c,arguments.length?c(arguments[0],arguments[1]):c}function Zp(c,h){var w=c.__data__;return wre(h)?w[typeof h=="string"?"string":"hash"]:w.map}function Ny(c){for(var h=kn(c),w=h.length;w--;){var N=h[w],V=c[N];h[w]=[N,V,NA(V)]}return h}function Fc(c,h){var w=Eee(c,h);return Z9(w)?w:r}function dre(c){var h=Tr.call(c,Nc),w=c[Nc];try{c[Nc]=r;var N=!0}catch{}var V=Cp.call(c);return N&&(h?c[Nc]=w:delete c[Nc]),V}var Ly=cy?function(c){return c==null?[]:(c=qr(c),Da(cy(c),function(h){return B9.call(c,h)}))}:Qy,RA=cy?function(c){for(var h=[];c;)Oa(h,Ly(c)),c=Dp(c);return h}:Qy,Qn=oi;(uy&&Qn(new uy(new ArrayBuffer(1)))!=Qe||_h&&Qn(new _h)!=oe||fy&&Qn(fy.resolve())!=Ne||cf&&Qn(new cf)!=Ie||Eh&&Qn(new Eh)!=ze)&&(Qn=function(c){var h=oi(c),w=h==Me?c.constructor:r,N=w?jc(w):"";if(N)switch(N){case Yee:return Qe;case Jee:return oe;case Xee:return Ne;case Zee:return Ie;case Qee:return ze}return h});function pre(c,h,w){for(var N=-1,V=w.length;++N<V;){var ne=w[N],he=ne.size;switch(ne.type){case"drop":c+=he;break;case"dropRight":h-=he;break;case"take":h=Zn(h,c+he);break;case"takeRight":c=An(c,h-he);break}}return{start:c,end:h}}function gre(c){var h=c.match(C);return h?h[1].split(Y):[]}function DA(c,h,w){h=$a(h,c);for(var N=-1,V=h.length,ne=!1;++N<V;){var he=uo(h[N]);if(!(ne=c!=null&&w(c,he)))break;c=c[he]}return ne||++N!=V?ne:(V=c==null?0:c.length,!!V&&sg(V)&&Ko(he,V)&&(sr(c)||Uc(c)))}function mre(c){var h=c.length,w=new c.constructor(h);return h&&typeof c[0]=="string"&&Tr.call(c,"index")&&(w.index=c.index,w.input=c.input),w}function OA(c){return typeof c.constructor=="function"&&!Dh(c)?ff(Dp(c)):{}}function vre(c,h,w){var N=c.constructor;switch(h){case Se:return Iy(c);case J:case Q:return new N(+c);case Qe:return ere(c,w);case ct:case Be:case et:case rt:case Je:case gt:case ht:case ft:case Ht:return gA(c,w);case oe:return new N;case fe:case Le:return new N(c);case $e:return tre(c);case Ie:return new N;case Ve:return rre(c)}}function bre(c,h){var w=h.length;if(!w)return c;var N=w-1;return h[N]=(w>1?"& ":"")+h[N],h=h.join(w>2?", ":" "),c.replace(G,`{
/* [wrapped with `+h+`] */
`)}function yre(c){return sr(c)||Uc(c)||!!($9&&c&&c[$9])}function Ko(c,h){var w=typeof c;return h=h??S,!!h&&(w=="number"||w!="symbol"&&st.test(c))&&c>-1&&c%1==0&&c<h}function ai(c,h,w){if(!Qr(w))return!1;var N=typeof h;return(N=="number"?Ei(w)&&Ko(h,w.length):N=="string"&&h in w)?Ds(w[h],c):!1}function ky(c,h){if(sr(c))return!1;var w=typeof c;return w=="number"||w=="symbol"||w=="boolean"||c==null||Bi(c)?!0:$t.test(c)||!yt.test(c)||h!=null&&c in qr(h)}function wre(c){var h=typeof c;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?c!=="__proto__":c===null}function By(c){var h=Xp(c),w=te[h];if(typeof w!="function"||!(h in _r.prototype))return!1;if(c===w)return!0;var N=Oy(w);return!!N&&c===N[0]}function xre(c){return!!N9&&N9 in c}var _re=Mp?Vo:ew;function Dh(c){var h=c&&c.constructor,w=typeof h=="function"&&h.prototype||af;return c===w}function NA(c){return c===c&&!Qr(c)}function LA(c,h){return function(w){return w==null?!1:w[c]===h&&(h!==r||c in qr(w))}}function Ere(c){var h=ng(c,function(N){return w.size===l&&w.clear(),N}),w=h.cache;return h}function Sre(c,h){var w=c[1],N=h[1],V=w|N,ne=V<(L|B|R),he=N==R&&w==H||N==R&&w==W&&c[7].length<=h[8]||N==(R|W)&&h[7].length<=h[8]&&w==H;if(!(ne||he))return c;N&L&&(c[2]=h[2],V|=w&L?0:k);var ve=h[3];if(ve){var xe=c[3];c[3]=xe?vA(xe,ve,h[4]):ve,c[4]=xe?Na(c[3],d):h[4]}return ve=h[5],ve&&(xe=c[5],c[5]=xe?bA(xe,ve,h[6]):ve,c[6]=xe?Na(c[5],d):h[6]),ve=h[7],ve&&(c[7]=ve),N&R&&(c[8]=c[8]==null?h[8]:Zn(c[8],h[8])),c[9]==null&&(c[9]=h[9]),c[0]=h[0],c[1]=V,c}function Are(c){var h=[];if(c!=null)for(var w in qr(c))h.push(w);return h}function Pre(c){return Cp.call(c)}function kA(c,h,w){return h=An(h===r?c.length-1:h,0),function(){for(var N=arguments,V=-1,ne=An(N.length-h,0),he=Ce(ne);++V<ne;)he[V]=N[h+V];V=-1;for(var ve=Ce(h+1);++V<h;)ve[V]=N[V];return ve[h]=w(he),Ln(c,this,ve)}}function BA(c,h){return h.length<2?c:$c(c,ls(h,0,-1))}function Mre(c,h){for(var w=c.length,N=Zn(h.length,w),V=_i(c);N--;){var ne=h[N];c[N]=Ko(ne,w)?V[ne]:r}return c}function $y(c,h){if(!(h==="constructor"&&typeof c[h]=="function")&&h!="__proto__")return c[h]}var $A=jA(aA),Oh=qee||function(c,h){return Er.setTimeout(c,h)},Fy=jA(Jte);function FA(c,h,w){var N=h+"";return Fy(c,bre(N,Ire(gre(N),w)))}function jA(c){var h=0,w=0;return function(){var N=Kee(),V=m-(N-w);if(w=N,V>0){if(++h>=E)return arguments[0]}else h=0;return c.apply(r,arguments)}}function Qp(c,h){var w=-1,N=c.length,V=N-1;for(h=h===r?N:h;++w<h;){var ne=xy(w,V),he=c[ne];c[ne]=c[w],c[w]=he}return c.length=h,c}var UA=Ere(function(c){var h=[];return c.charCodeAt(0)===46&&h.push(""),c.replace(jt,function(w,N,V,ne){h.push(V?ne.replace(pe,"$1"):N||w)}),h});function uo(c){if(typeof c=="string"||Bi(c))return c;var h=c+"";return h=="0"&&1/c==-x?"-0":h}function jc(c){if(c!=null){try{return Ip.call(c)}catch{}try{return c+""}catch{}}return""}function Ire(c,h){return as(ce,function(w){var N="_."+w[0];h&w[1]&&!Ep(c,N)&&c.push(N)}),c.sort()}function qA(c){if(c instanceof _r)return c.clone();var h=new us(c.__wrapped__,c.__chain__);return h.__actions__=_i(c.__actions__),h.__index__=c.__index__,h.__values__=c.__values__,h}function Cre(c,h,w){(w?ai(c,h,w):h===r)?h=1:h=An(ur(h),0);var N=c==null?0:c.length;if(!N||h<1)return[];for(var V=0,ne=0,he=Ce(Lp(N/h));V<N;)he[ne++]=ls(c,V,V+=h);return he}function Tre(c){for(var h=-1,w=c==null?0:c.length,N=0,V=[];++h<w;){var ne=c[h];ne&&(V[N++]=ne)}return V}function Rre(){var c=arguments.length;if(!c)return[];for(var h=Ce(c-1),w=arguments[0],N=c;N--;)h[N-1]=arguments[N];return Oa(sr(w)?_i(w):[w],Hn(h,1))}var Dre=hr(function(c,h){return gn(c)?Mh(c,Hn(h,1,gn,!0)):[]}),Ore=hr(function(c,h){var w=hs(h);return gn(w)&&(w=r),gn(c)?Mh(c,Hn(h,1,gn,!0),qt(w,2)):[]}),Nre=hr(function(c,h){var w=hs(h);return gn(w)&&(w=r),gn(c)?Mh(c,Hn(h,1,gn,!0),r,w):[]});function Lre(c,h,w){var N=c==null?0:c.length;return N?(h=w||h===r?1:ur(h),ls(c,h<0?0:h,N)):[]}function kre(c,h,w){var N=c==null?0:c.length;return N?(h=w||h===r?1:ur(h),h=N-h,ls(c,0,h<0?0:h)):[]}function Bre(c,h){return c&&c.length?Wp(c,qt(h,3),!0,!0):[]}function $re(c,h){return c&&c.length?Wp(c,qt(h,3),!0):[]}function Fre(c,h,w,N){var V=c==null?0:c.length;return V?(w&&typeof w!="number"&&ai(c,h,w)&&(w=0,N=V),Rte(c,h,w,N)):[]}function zA(c,h,w){var N=c==null?0:c.length;if(!N)return-1;var V=w==null?0:ur(w);return V<0&&(V=An(N+V,0)),Sp(c,qt(h,3),V)}function HA(c,h,w){var N=c==null?0:c.length;if(!N)return-1;var V=N-1;return w!==r&&(V=ur(w),V=w<0?An(N+V,0):Zn(V,N-1)),Sp(c,qt(h,3),V,!0)}function WA(c){var h=c==null?0:c.length;return h?Hn(c,1):[]}function jre(c){var h=c==null?0:c.length;return h?Hn(c,x):[]}function Ure(c,h){var w=c==null?0:c.length;return w?(h=h===r?1:ur(h),Hn(c,h)):[]}function qre(c){for(var h=-1,w=c==null?0:c.length,N={};++h<w;){var V=c[h];N[V[0]]=V[1]}return N}function KA(c){return c&&c.length?c[0]:r}function zre(c,h,w){var N=c==null?0:c.length;if(!N)return-1;var V=w==null?0:ur(w);return V<0&&(V=An(N+V,0)),rf(c,h,V)}function Hre(c){var h=c==null?0:c.length;return h?ls(c,0,-1):[]}var Wre=hr(function(c){var h=Xr(c,Py);return h.length&&h[0]===c[0]?my(h):[]}),Kre=hr(function(c){var h=hs(c),w=Xr(c,Py);return h===hs(w)?h=r:w.pop(),w.length&&w[0]===c[0]?my(w,qt(h,2)):[]}),Vre=hr(function(c){var h=hs(c),w=Xr(c,Py);return h=typeof h=="function"?h:r,h&&w.pop(),w.length&&w[0]===c[0]?my(w,r,h):[]});function Gre(c,h){return c==null?"":Hee.call(c,h)}function hs(c){var h=c==null?0:c.length;return h?c[h-1]:r}function Yre(c,h,w){var N=c==null?0:c.length;if(!N)return-1;var V=N;return w!==r&&(V=ur(w),V=V<0?An(N+V,0):Zn(V,N-1)),h===h?Iee(c,h,V):Sp(c,P9,V,!0)}function Jre(c,h){return c&&c.length?nA(c,ur(h)):r}var Xre=hr(VA);function VA(c,h){return c&&c.length&&h&&h.length?wy(c,h):c}function Zre(c,h,w){return c&&c.length&&h&&h.length?wy(c,h,qt(w,2)):c}function Qre(c,h,w){return c&&c.length&&h&&h.length?wy(c,h,r,w):c}var ene=Wo(function(c,h){var w=c==null?0:c.length,N=hy(c,h);return oA(c,Xr(h,function(V){return Ko(V,w)?+V:V}).sort(mA)),N});function tne(c,h){var w=[];if(!(c&&c.length))return w;var N=-1,V=[],ne=c.length;for(h=qt(h,3);++N<ne;){var he=c[N];h(he,N,c)&&(w.push(he),V.push(N))}return oA(c,V),w}function jy(c){return c==null?c:Gee.call(c)}function rne(c,h,w){var N=c==null?0:c.length;return N?(w&&typeof w!="number"&&ai(c,h,w)?(h=0,w=N):(h=h==null?0:ur(h),w=w===r?N:ur(w)),ls(c,h,w)):[]}function nne(c,h){return Hp(c,h)}function ine(c,h,w){return Ey(c,h,qt(w,2))}function sne(c,h){var w=c==null?0:c.length;if(w){var N=Hp(c,h);if(N<w&&Ds(c[N],h))return N}return-1}function one(c,h){return Hp(c,h,!0)}function ane(c,h,w){return Ey(c,h,qt(w,2),!0)}function cne(c,h){var w=c==null?0:c.length;if(w){var N=Hp(c,h,!0)-1;if(Ds(c[N],h))return N}return-1}function une(c){return c&&c.length?cA(c):[]}function fne(c,h){return c&&c.length?cA(c,qt(h,2)):[]}function lne(c){var h=c==null?0:c.length;return h?ls(c,1,h):[]}function hne(c,h,w){return c&&c.length?(h=w||h===r?1:ur(h),ls(c,0,h<0?0:h)):[]}function dne(c,h,w){var N=c==null?0:c.length;return N?(h=w||h===r?1:ur(h),h=N-h,ls(c,h<0?0:h,N)):[]}function pne(c,h){return c&&c.length?Wp(c,qt(h,3),!1,!0):[]}function gne(c,h){return c&&c.length?Wp(c,qt(h,3)):[]}var mne=hr(function(c){return Ba(Hn(c,1,gn,!0))}),vne=hr(function(c){var h=hs(c);return gn(h)&&(h=r),Ba(Hn(c,1,gn,!0),qt(h,2))}),bne=hr(function(c){var h=hs(c);return h=typeof h=="function"?h:r,Ba(Hn(c,1,gn,!0),r,h)});function yne(c){return c&&c.length?Ba(c):[]}function wne(c,h){return c&&c.length?Ba(c,qt(h,2)):[]}function xne(c,h){return h=typeof h=="function"?h:r,c&&c.length?Ba(c,r,h):[]}function Uy(c){if(!(c&&c.length))return[];var h=0;return c=Da(c,function(w){if(gn(w))return h=An(w.length,h),!0}),iy(h,function(w){return Xr(c,ty(w))})}function GA(c,h){if(!(c&&c.length))return[];var w=Uy(c);return h==null?w:Xr(w,function(N){return Ln(h,r,N)})}var _ne=hr(function(c,h){return gn(c)?Mh(c,h):[]}),Ene=hr(function(c){return Ay(Da(c,gn))}),Sne=hr(function(c){var h=hs(c);return gn(h)&&(h=r),Ay(Da(c,gn),qt(h,2))}),Ane=hr(function(c){var h=hs(c);return h=typeof h=="function"?h:r,Ay(Da(c,gn),r,h)}),Pne=hr(Uy);function Mne(c,h){return hA(c||[],h||[],Ph)}function Ine(c,h){return hA(c||[],h||[],Th)}var Cne=hr(function(c){var h=c.length,w=h>1?c[h-1]:r;return w=typeof w=="function"?(c.pop(),w):r,GA(c,w)});function YA(c){var h=te(c);return h.__chain__=!0,h}function Tne(c,h){return h(c),c}function eg(c,h){return h(c)}var Rne=Wo(function(c){var h=c.length,w=h?c[0]:0,N=this.__wrapped__,V=function(ne){return hy(ne,c)};return h>1||this.__actions__.length||!(N instanceof _r)||!Ko(w)?this.thru(V):(N=N.slice(w,+w+(h?1:0)),N.__actions__.push({func:eg,args:[V],thisArg:r}),new us(N,this.__chain__).thru(function(ne){return h&&!ne.length&&ne.push(r),ne}))});function Dne(){return YA(this)}function One(){return new us(this.value(),this.__chain__)}function Nne(){this.__values__===r&&(this.__values__=uP(this.value()));var c=this.__index__>=this.__values__.length,h=c?r:this.__values__[this.__index__++];return{done:c,value:h}}function Lne(){return this}function kne(c){for(var h,w=this;w instanceof Fp;){var N=qA(w);N.__index__=0,N.__values__=r,h?V.__wrapped__=N:h=N;var V=N;w=w.__wrapped__}return V.__wrapped__=c,h}function Bne(){var c=this.__wrapped__;if(c instanceof _r){var h=c;return this.__actions__.length&&(h=new _r(this)),h=h.reverse(),h.__actions__.push({func:eg,args:[jy],thisArg:r}),new us(h,this.__chain__)}return this.thru(jy)}function $ne(){return lA(this.__wrapped__,this.__actions__)}var Fne=Kp(function(c,h,w){Tr.call(c,w)?++c[w]:zo(c,w,1)});function jne(c,h,w){var N=sr(c)?S9:Tte;return w&&ai(c,h,w)&&(h=r),N(c,qt(h,3))}function Une(c,h){var w=sr(c)?Da:G9;return w(c,qt(h,3))}var qne=_A(zA),zne=_A(HA);function Hne(c,h){return Hn(tg(c,h),1)}function Wne(c,h){return Hn(tg(c,h),x)}function Kne(c,h,w){return w=w===r?1:ur(w),Hn(tg(c,h),w)}function JA(c,h){var w=sr(c)?as:ka;return w(c,qt(h,3))}function XA(c,h){var w=sr(c)?lee:V9;return w(c,qt(h,3))}var Vne=Kp(function(c,h,w){Tr.call(c,w)?c[w].push(h):zo(c,w,[h])});function Gne(c,h,w,N){c=Ei(c)?c:gf(c),w=w&&!N?ur(w):0;var V=c.length;return w<0&&(w=An(V+w,0)),og(c)?w<=V&&c.indexOf(h,w)>-1:!!V&&rf(c,h,w)>-1}var Yne=hr(function(c,h,w){var N=-1,V=typeof h=="function",ne=Ei(c)?Ce(c.length):[];return ka(c,function(he){ne[++N]=V?Ln(h,he,w):Ih(he,h,w)}),ne}),Jne=Kp(function(c,h,w){zo(c,w,h)});function tg(c,h){var w=sr(c)?Xr:eA;return w(c,qt(h,3))}function Xne(c,h,w,N){return c==null?[]:(sr(h)||(h=h==null?[]:[h]),w=N?r:w,sr(w)||(w=w==null?[]:[w]),iA(c,h,w))}var Zne=Kp(function(c,h,w){c[w?0:1].push(h)},function(){return[[],[]]});function Qne(c,h,w){var N=sr(c)?Qb:I9,V=arguments.length<3;return N(c,qt(h,4),w,V,ka)}function eie(c,h,w){var N=sr(c)?hee:I9,V=arguments.length<3;return N(c,qt(h,4),w,V,V9)}function tie(c,h){var w=sr(c)?Da:G9;return w(c,ig(qt(h,3)))}function rie(c){var h=sr(c)?z9:Gte;return h(c)}function nie(c,h,w){(w?ai(c,h,w):h===r)?h=1:h=ur(h);var N=sr(c)?Ate:Yte;return N(c,h)}function iie(c){var h=sr(c)?Pte:Xte;return h(c)}function sie(c){if(c==null)return 0;if(Ei(c))return og(c)?sf(c):c.length;var h=Qn(c);return h==oe||h==Ie?c.size:by(c).length}function oie(c,h,w){var N=sr(c)?ey:Zte;return w&&ai(c,h,w)&&(h=r),N(c,qt(h,3))}var aie=hr(function(c,h){if(c==null)return[];var w=h.length;return w>1&&ai(c,h[0],h[1])?h=[]:w>2&&ai(h[0],h[1],h[2])&&(h=[h[0]]),iA(c,Hn(h,1),[])}),rg=Uee||function(){return Er.Date.now()};function cie(c,h){if(typeof h!="function")throw new cs(o);return c=ur(c),function(){if(--c<1)return h.apply(this,arguments)}}function ZA(c,h,w){return h=w?r:h,h=c&&h==null?c.length:h,Ho(c,R,r,r,r,r,h)}function QA(c,h){var w;if(typeof h!="function")throw new cs(o);return c=ur(c),function(){return--c>0&&(w=h.apply(this,arguments)),c<=1&&(h=r),w}}var qy=hr(function(c,h,w){var N=L;if(w.length){var V=Na(w,df(qy));N|=z}return Ho(c,N,h,w,V)}),eP=hr(function(c,h,w){var N=L|B;if(w.length){var V=Na(w,df(eP));N|=z}return Ho(h,N,c,w,V)});function tP(c,h,w){h=w?r:h;var N=Ho(c,H,r,r,r,r,r,h);return N.placeholder=tP.placeholder,N}function rP(c,h,w){h=w?r:h;var N=Ho(c,U,r,r,r,r,r,h);return N.placeholder=rP.placeholder,N}function nP(c,h,w){var N,V,ne,he,ve,xe,We=0,Ke=!1,Ze=!1,xt=!0;if(typeof c!="function")throw new cs(o);h=ds(h)||0,Qr(w)&&(Ke=!!w.leading,Ze="maxWait"in w,ne=Ze?An(ds(w.maxWait)||0,h):ne,xt="trailing"in w?!!w.trailing:xt);function Nt(mn){var Os=N,Yo=V;return N=V=r,We=mn,he=c.apply(Yo,Os),he}function Vt(mn){return We=mn,ve=Oh(yr,h),Ke?Nt(mn):he}function fr(mn){var Os=mn-xe,Yo=mn-We,_P=h-Os;return Ze?Zn(_P,ne-Yo):_P}function Gt(mn){var Os=mn-xe,Yo=mn-We;return xe===r||Os>=h||Os<0||Ze&&Yo>=ne}function yr(){var mn=rg();if(Gt(mn))return Sr(mn);ve=Oh(yr,fr(mn))}function Sr(mn){return ve=r,xt&&N?Nt(mn):(N=V=r,he)}function $i(){ve!==r&&dA(ve),We=0,N=xe=V=ve=r}function ci(){return ve===r?he:Sr(rg())}function Fi(){var mn=rg(),Os=Gt(mn);if(N=arguments,V=this,xe=mn,Os){if(ve===r)return Vt(xe);if(Ze)return dA(ve),ve=Oh(yr,h),Nt(xe)}return ve===r&&(ve=Oh(yr,h)),he}return Fi.cancel=$i,Fi.flush=ci,Fi}var uie=hr(function(c,h){return K9(c,1,h)}),fie=hr(function(c,h,w){return K9(c,ds(h)||0,w)});function lie(c){return Ho(c,ie)}function ng(c,h){if(typeof c!="function"||h!=null&&typeof h!="function")throw new cs(o);var w=function(){var N=arguments,V=h?h.apply(this,N):N[0],ne=w.cache;if(ne.has(V))return ne.get(V);var he=c.apply(this,N);return w.cache=ne.set(V,he)||ne,he};return w.cache=new(ng.Cache||qo),w}ng.Cache=qo;function ig(c){if(typeof c!="function")throw new cs(o);return function(){var h=arguments;switch(h.length){case 0:return!c.call(this);case 1:return!c.call(this,h[0]);case 2:return!c.call(this,h[0],h[1]);case 3:return!c.call(this,h[0],h[1],h[2])}return!c.apply(this,h)}}function hie(c){return QA(2,c)}var die=Qte(function(c,h){h=h.length==1&&sr(h[0])?Xr(h[0],Li(qt())):Xr(Hn(h,1),Li(qt()));var w=h.length;return hr(function(N){for(var V=-1,ne=Zn(N.length,w);++V<ne;)N[V]=h[V].call(this,N[V]);return Ln(c,this,N)})}),zy=hr(function(c,h){var w=Na(h,df(zy));return Ho(c,z,r,h,w)}),iP=hr(function(c,h){var w=Na(h,df(iP));return Ho(c,Z,r,h,w)}),pie=Wo(function(c,h){return Ho(c,W,r,r,r,h)});function gie(c,h){if(typeof c!="function")throw new cs(o);return h=h===r?h:ur(h),hr(c,h)}function mie(c,h){if(typeof c!="function")throw new cs(o);return h=h==null?0:An(ur(h),0),hr(function(w){var N=w[h],V=Fa(w,0,h);return N&&Oa(V,N),Ln(c,this,V)})}function vie(c,h,w){var N=!0,V=!0;if(typeof c!="function")throw new cs(o);return Qr(w)&&(N="leading"in w?!!w.leading:N,V="trailing"in w?!!w.trailing:V),nP(c,h,{leading:N,maxWait:h,trailing:V})}function bie(c){return ZA(c,1)}function yie(c,h){return zy(My(h),c)}function wie(){if(!arguments.length)return[];var c=arguments[0];return sr(c)?c:[c]}function xie(c){return fs(c,_)}function _ie(c,h){return h=typeof h=="function"?h:r,fs(c,_,h)}function Eie(c){return fs(c,p|_)}function Sie(c,h){return h=typeof h=="function"?h:r,fs(c,p|_,h)}function Aie(c,h){return h==null||W9(c,h,kn(h))}function Ds(c,h){return c===h||c!==c&&h!==h}var Pie=Jp(gy),Mie=Jp(function(c,h){return c>=h}),Uc=X9(function(){return arguments}())?X9:function(c){return rn(c)&&Tr.call(c,"callee")&&!B9.call(c,"callee")},sr=Ce.isArray,Iie=si?Li(si):kte;function Ei(c){return c!=null&&sg(c.length)&&!Vo(c)}function gn(c){return rn(c)&&Ei(c)}function Cie(c){return c===!0||c===!1||rn(c)&&oi(c)==J}var ja=zee||ew,Tie=Cs?Li(Cs):Bte;function Rie(c){return rn(c)&&c.nodeType===1&&!Nh(c)}function Die(c){if(c==null)return!0;if(Ei(c)&&(sr(c)||typeof c=="string"||typeof c.splice=="function"||ja(c)||pf(c)||Uc(c)))return!c.length;var h=Qn(c);if(h==oe||h==Ie)return!c.size;if(Dh(c))return!by(c).length;for(var w in c)if(Tr.call(c,w))return!1;return!0}function Oie(c,h){return Ch(c,h)}function Nie(c,h,w){w=typeof w=="function"?w:r;var N=w?w(c,h):r;return N===r?Ch(c,h,r,w):!!N}function Hy(c){if(!rn(c))return!1;var h=oi(c);return h==X||h==T||typeof c.message=="string"&&typeof c.name=="string"&&!Nh(c)}function Lie(c){return typeof c=="number"&&F9(c)}function Vo(c){if(!Qr(c))return!1;var h=oi(c);return h==re||h==ge||h==ee||h==Te}function sP(c){return typeof c=="number"&&c==ur(c)}function sg(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=S}function Qr(c){var h=typeof c;return c!=null&&(h=="object"||h=="function")}function rn(c){return c!=null&&typeof c=="object"}var oP=os?Li(os):Fte;function kie(c,h){return c===h||vy(c,h,Ny(h))}function Bie(c,h,w){return w=typeof w=="function"?w:r,vy(c,h,Ny(h),w)}function $ie(c){return aP(c)&&c!=+c}function Fie(c){if(_re(c))throw new tr(s);return Z9(c)}function jie(c){return c===null}function Uie(c){return c==null}function aP(c){return typeof c=="number"||rn(c)&&oi(c)==fe}function Nh(c){if(!rn(c)||oi(c)!=Me)return!1;var h=Dp(c);if(h===null)return!0;var w=Tr.call(h,"constructor")&&h.constructor;return typeof w=="function"&&w instanceof w&&Ip.call(w)==Bee}var Wy=oo?Li(oo):jte;function qie(c){return sP(c)&&c>=-S&&c<=S}var cP=yh?Li(yh):Ute;function og(c){return typeof c=="string"||!sr(c)&&rn(c)&&oi(c)==Le}function Bi(c){return typeof c=="symbol"||rn(c)&&oi(c)==Ve}var pf=Oc?Li(Oc):qte;function zie(c){return c===r}function Hie(c){return rn(c)&&Qn(c)==ze}function Wie(c){return rn(c)&&oi(c)==He}var Kie=Jp(yy),Vie=Jp(function(c,h){return c<=h});function uP(c){if(!c)return[];if(Ei(c))return og(c)?Ts(c):_i(c);if(xh&&c[xh])return Aee(c[xh]());var h=Qn(c),w=h==oe?oy:h==Ie?Ap:gf;return w(c)}function Go(c){if(!c)return c===0?c:0;if(c=ds(c),c===x||c===-x){var h=c<0?-1:1;return h*A}return c===c?c:0}function ur(c){var h=Go(c),w=h%1;return h===h?w?h-w:h:0}function fP(c){return c?Bc(ur(c),0,P):0}function ds(c){if(typeof c=="number")return c;if(Bi(c))return b;if(Qr(c)){var h=typeof c.valueOf=="function"?c.valueOf():c;c=Qr(h)?h+"":h}if(typeof c!="string")return c===0?c:+c;c=C9(c);var w=it.test(c);return w||mt.test(c)?ir(c.slice(2),w?2:8):De.test(c)?b:+c}function lP(c){return co(c,Si(c))}function Gie(c){return c?Bc(ur(c),-S,S):c===0?c:0}function Cr(c){return c==null?"":ki(c)}var Yie=lf(function(c,h){if(Dh(h)||Ei(h)){co(h,kn(h),c);return}for(var w in h)Tr.call(h,w)&&Ph(c,w,h[w])}),hP=lf(function(c,h){co(h,Si(h),c)}),ag=lf(function(c,h,w,N){co(h,Si(h),c,N)}),Jie=lf(function(c,h,w,N){co(h,kn(h),c,N)}),Xie=Wo(hy);function Zie(c,h){var w=ff(c);return h==null?w:H9(w,h)}var Qie=hr(function(c,h){c=qr(c);var w=-1,N=h.length,V=N>2?h[2]:r;for(V&&ai(h[0],h[1],V)&&(N=1);++w<N;)for(var ne=h[w],he=Si(ne),ve=-1,xe=he.length;++ve<xe;){var We=he[ve],Ke=c[We];(Ke===r||Ds(Ke,af[We])&&!Tr.call(c,We))&&(c[We]=ne[We])}return c}),ese=hr(function(c){return c.push(r,CA),Ln(dP,r,c)});function tse(c,h){return A9(c,qt(h,3),ao)}function rse(c,h){return A9(c,qt(h,3),py)}function nse(c,h){return c==null?c:dy(c,qt(h,3),Si)}function ise(c,h){return c==null?c:Y9(c,qt(h,3),Si)}function sse(c,h){return c&&ao(c,qt(h,3))}function ose(c,h){return c&&py(c,qt(h,3))}function ase(c){return c==null?[]:qp(c,kn(c))}function cse(c){return c==null?[]:qp(c,Si(c))}function Ky(c,h,w){var N=c==null?r:$c(c,h);return N===r?w:N}function use(c,h){return c!=null&&DA(c,h,Dte)}function Vy(c,h){return c!=null&&DA(c,h,Ote)}var fse=SA(function(c,h,w){h!=null&&typeof h.toString!="function"&&(h=Cp.call(h)),c[h]=w},Yy(Ai)),lse=SA(function(c,h,w){h!=null&&typeof h.toString!="function"&&(h=Cp.call(h)),Tr.call(c,h)?c[h].push(w):c[h]=[w]},qt),hse=hr(Ih);function kn(c){return Ei(c)?q9(c):by(c)}function Si(c){return Ei(c)?q9(c,!0):zte(c)}function dse(c,h){var w={};return h=qt(h,3),ao(c,function(N,V,ne){zo(w,h(N,V,ne),N)}),w}function pse(c,h){var w={};return h=qt(h,3),ao(c,function(N,V,ne){zo(w,V,h(N,V,ne))}),w}var gse=lf(function(c,h,w){zp(c,h,w)}),dP=lf(function(c,h,w,N){zp(c,h,w,N)}),mse=Wo(function(c,h){var w={};if(c==null)return w;var N=!1;h=Xr(h,function(ne){return ne=$a(ne,c),N||(N=ne.length>1),ne}),co(c,Dy(c),w),N&&(w=fs(w,p|y|_,fre));for(var V=h.length;V--;)Sy(w,h[V]);return w});function vse(c,h){return pP(c,ig(qt(h)))}var bse=Wo(function(c,h){return c==null?{}:Wte(c,h)});function pP(c,h){if(c==null)return{};var w=Xr(Dy(c),function(N){return[N]});return h=qt(h),sA(c,w,function(N,V){return h(N,V[0])})}function yse(c,h,w){h=$a(h,c);var N=-1,V=h.length;for(V||(V=1,c=r);++N<V;){var ne=c==null?r:c[uo(h[N])];ne===r&&(N=V,ne=w),c=Vo(ne)?ne.call(c):ne}return c}function wse(c,h,w){return c==null?c:Th(c,h,w)}function xse(c,h,w,N){return N=typeof N=="function"?N:r,c==null?c:Th(c,h,w,N)}var gP=MA(kn),mP=MA(Si);function _se(c,h,w){var N=sr(c),V=N||ja(c)||pf(c);if(h=qt(h,4),w==null){var ne=c&&c.constructor;V?w=N?new ne:[]:Qr(c)?w=Vo(ne)?ff(Dp(c)):{}:w={}}return(V?as:ao)(c,function(he,ve,xe){return h(w,he,ve,xe)}),w}function Ese(c,h){return c==null?!0:Sy(c,h)}function Sse(c,h,w){return c==null?c:fA(c,h,My(w))}function Ase(c,h,w,N){return N=typeof N=="function"?N:r,c==null?c:fA(c,h,My(w),N)}function gf(c){return c==null?[]:sy(c,kn(c))}function Pse(c){return c==null?[]:sy(c,Si(c))}function Mse(c,h,w){return w===r&&(w=h,h=r),w!==r&&(w=ds(w),w=w===w?w:0),h!==r&&(h=ds(h),h=h===h?h:0),Bc(ds(c),h,w)}function Ise(c,h,w){return h=Go(h),w===r?(w=h,h=0):w=Go(w),c=ds(c),Nte(c,h,w)}function Cse(c,h,w){if(w&&typeof w!="boolean"&&ai(c,h,w)&&(h=w=r),w===r&&(typeof h=="boolean"?(w=h,h=r):typeof c=="boolean"&&(w=c,c=r)),c===r&&h===r?(c=0,h=1):(c=Go(c),h===r?(h=c,c=0):h=Go(h)),c>h){var N=c;c=h,h=N}if(w||c%1||h%1){var V=j9();return Zn(c+V*(h-c+jr("1e-"+((V+"").length-1))),h)}return xy(c,h)}var Tse=hf(function(c,h,w){return h=h.toLowerCase(),c+(w?vP(h):h)});function vP(c){return Gy(Cr(c).toLowerCase())}function bP(c){return c=Cr(c),c&&c.replace(tt,wee).replace(Jb,"")}function Rse(c,h,w){c=Cr(c),h=ki(h);var N=c.length;w=w===r?N:Bc(ur(w),0,N);var V=w;return w-=h.length,w>=0&&c.slice(w,V)==h}function Dse(c){return c=Cr(c),c&&Tt.test(c)?c.replace(Ot,xee):c}function Ose(c){return c=Cr(c),c&&Ft.test(c)?c.replace(nt,"\\$&"):c}var Nse=hf(function(c,h,w){return c+(w?"-":"")+h.toLowerCase()}),Lse=hf(function(c,h,w){return c+(w?" ":"")+h.toLowerCase()}),kse=xA("toLowerCase");function Bse(c,h,w){c=Cr(c),h=ur(h);var N=h?sf(c):0;if(!h||N>=h)return c;var V=(h-N)/2;return Yp(kp(V),w)+c+Yp(Lp(V),w)}function $se(c,h,w){c=Cr(c),h=ur(h);var N=h?sf(c):0;return h&&N<h?c+Yp(h-N,w):c}function Fse(c,h,w){c=Cr(c),h=ur(h);var N=h?sf(c):0;return h&&N<h?Yp(h-N,w)+c:c}function jse(c,h,w){return w||h==null?h=0:h&&(h=+h),Vee(Cr(c).replace($,""),h||0)}function Use(c,h,w){return(w?ai(c,h,w):h===r)?h=1:h=ur(h),_y(Cr(c),h)}function qse(){var c=arguments,h=Cr(c[0]);return c.length<3?h:h.replace(c[1],c[2])}var zse=hf(function(c,h,w){return c+(w?"_":"")+h.toLowerCase()});function Hse(c,h,w){return w&&typeof w!="number"&&ai(c,h,w)&&(h=w=r),w=w===r?P:w>>>0,w?(c=Cr(c),c&&(typeof h=="string"||h!=null&&!Wy(h))&&(h=ki(h),!h&&nf(c))?Fa(Ts(c),0,w):c.split(h,w)):[]}var Wse=hf(function(c,h,w){return c+(w?" ":"")+Gy(h)});function Kse(c,h,w){return c=Cr(c),w=w==null?0:Bc(ur(w),0,c.length),h=ki(h),c.slice(w,w+h.length)==h}function Vse(c,h,w){var N=te.templateSettings;w&&ai(c,h,w)&&(h=r),c=Cr(c),h=ag({},h,N,IA);var V=ag({},h.imports,N.imports,IA),ne=kn(V),he=sy(V,ne),ve,xe,We=0,Ke=h.interpolate||At,Ze="__p += '",xt=ay((h.escape||At).source+"|"+Ke.source+"|"+(Ke===Lt?_e:At).source+"|"+(h.evaluate||At).source+"|$","g"),Nt="//# sourceURL="+(Tr.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xb+"]")+`
`;c.replace(xt,function(Gt,yr,Sr,$i,ci,Fi){return Sr||(Sr=$i),Ze+=c.slice(We,Fi).replace(Rt,_ee),yr&&(ve=!0,Ze+=`' +
__e(`+yr+`) +
'`),ci&&(xe=!0,Ze+=`';
`+ci+`;
__p += '`),Sr&&(Ze+=`' +
((__t = (`+Sr+`)) == null ? '' : __t) +
'`),We=Fi+Gt.length,Gt}),Ze+=`';
`;var Vt=Tr.call(h,"variable")&&h.variable;if(!Vt)Ze=`with (obj) {
`+Ze+`
}
`;else if(ae.test(Vt))throw new tr(a);Ze=(xe?Ze.replace(Jt,""):Ze).replace(St,"$1").replace(er,"$1;"),Ze="function("+(Vt||"obj")+`) {
`+(Vt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ze+`return __p
}`;var fr=wP(function(){return Mr(ne,Nt+"return "+Ze).apply(r,he)});if(fr.source=Ze,Hy(fr))throw fr;return fr}function Gse(c){return Cr(c).toLowerCase()}function Yse(c){return Cr(c).toUpperCase()}function Jse(c,h,w){if(c=Cr(c),c&&(w||h===r))return C9(c);if(!c||!(h=ki(h)))return c;var N=Ts(c),V=Ts(h),ne=T9(N,V),he=R9(N,V)+1;return Fa(N,ne,he).join("")}function Xse(c,h,w){if(c=Cr(c),c&&(w||h===r))return c.slice(0,O9(c)+1);if(!c||!(h=ki(h)))return c;var N=Ts(c),V=R9(N,Ts(h))+1;return Fa(N,0,V).join("")}function Zse(c,h,w){if(c=Cr(c),c&&(w||h===r))return c.replace($,"");if(!c||!(h=ki(h)))return c;var N=Ts(c),V=T9(N,Ts(h));return Fa(N,V).join("")}function Qse(c,h){var w=me,N=j;if(Qr(h)){var V="separator"in h?h.separator:V;w="length"in h?ur(h.length):w,N="omission"in h?ki(h.omission):N}c=Cr(c);var ne=c.length;if(nf(c)){var he=Ts(c);ne=he.length}if(w>=ne)return c;var ve=w-sf(N);if(ve<1)return N;var xe=he?Fa(he,0,ve).join(""):c.slice(0,ve);if(V===r)return xe+N;if(he&&(ve+=xe.length-ve),Wy(V)){if(c.slice(ve).search(V)){var We,Ke=xe;for(V.global||(V=ay(V.source,Cr(Re.exec(V))+"g")),V.lastIndex=0;We=V.exec(Ke);)var Ze=We.index;xe=xe.slice(0,Ze===r?ve:Ze)}}else if(c.indexOf(ki(V),ve)!=ve){var xt=xe.lastIndexOf(V);xt>-1&&(xe=xe.slice(0,xt))}return xe+N}function eoe(c){return c=Cr(c),c&&Bt.test(c)?c.replace(Xt,Cee):c}var toe=hf(function(c,h,w){return c+(w?" ":"")+h.toUpperCase()}),Gy=xA("toUpperCase");function yP(c,h,w){return c=Cr(c),h=w?r:h,h===r?See(c)?Dee(c):gee(c):c.match(h)||[]}var wP=hr(function(c,h){try{return Ln(c,r,h)}catch(w){return Hy(w)?w:new tr(w)}}),roe=Wo(function(c,h){return as(h,function(w){w=uo(w),zo(c,w,qy(c[w],c))}),c});function noe(c){var h=c==null?0:c.length,w=qt();return c=h?Xr(c,function(N){if(typeof N[1]!="function")throw new cs(o);return[w(N[0]),N[1]]}):[],hr(function(N){for(var V=-1;++V<h;){var ne=c[V];if(Ln(ne[0],this,N))return Ln(ne[1],this,N)}})}function ioe(c){return Cte(fs(c,p))}function Yy(c){return function(){return c}}function soe(c,h){return c==null||c!==c?h:c}var ooe=EA(),aoe=EA(!0);function Ai(c){return c}function Jy(c){return Q9(typeof c=="function"?c:fs(c,p))}function coe(c){return tA(fs(c,p))}function uoe(c,h){return rA(c,fs(h,p))}var foe=hr(function(c,h){return function(w){return Ih(w,c,h)}}),loe=hr(function(c,h){return function(w){return Ih(c,w,h)}});function Xy(c,h,w){var N=kn(h),V=qp(h,N);w==null&&!(Qr(h)&&(V.length||!N.length))&&(w=h,h=c,c=this,V=qp(h,kn(h)));var ne=!(Qr(w)&&"chain"in w)||!!w.chain,he=Vo(c);return as(V,function(ve){var xe=h[ve];c[ve]=xe,he&&(c.prototype[ve]=function(){var We=this.__chain__;if(ne||We){var Ke=c(this.__wrapped__),Ze=Ke.__actions__=_i(this.__actions__);return Ze.push({func:xe,args:arguments,thisArg:c}),Ke.__chain__=We,Ke}return xe.apply(c,Oa([this.value()],arguments))})}),c}function hoe(){return Er._===this&&(Er._=$ee),this}function Zy(){}function doe(c){return c=ur(c),hr(function(h){return nA(h,c)})}var poe=Cy(Xr),goe=Cy(S9),moe=Cy(ey);function xP(c){return ky(c)?ty(uo(c)):Kte(c)}function voe(c){return function(h){return c==null?r:$c(c,h)}}var boe=AA(),yoe=AA(!0);function Qy(){return[]}function ew(){return!1}function woe(){return{}}function xoe(){return""}function _oe(){return!0}function Eoe(c,h){if(c=ur(c),c<1||c>S)return[];var w=P,N=Zn(c,P);h=qt(h),c-=P;for(var V=iy(N,h);++w<c;)h(w);return V}function Soe(c){return sr(c)?Xr(c,uo):Bi(c)?[c]:_i(UA(Cr(c)))}function Aoe(c){var h=++kee;return Cr(c)+h}var Poe=Gp(function(c,h){return c+h},0),Moe=Ty("ceil"),Ioe=Gp(function(c,h){return c/h},1),Coe=Ty("floor");function Toe(c){return c&&c.length?Up(c,Ai,gy):r}function Roe(c,h){return c&&c.length?Up(c,qt(h,2),gy):r}function Doe(c){return M9(c,Ai)}function Ooe(c,h){return M9(c,qt(h,2))}function Noe(c){return c&&c.length?Up(c,Ai,yy):r}function Loe(c,h){return c&&c.length?Up(c,qt(h,2),yy):r}var koe=Gp(function(c,h){return c*h},1),Boe=Ty("round"),$oe=Gp(function(c,h){return c-h},0);function Foe(c){return c&&c.length?ny(c,Ai):0}function joe(c,h){return c&&c.length?ny(c,qt(h,2)):0}return te.after=cie,te.ary=ZA,te.assign=Yie,te.assignIn=hP,te.assignInWith=ag,te.assignWith=Jie,te.at=Xie,te.before=QA,te.bind=qy,te.bindAll=roe,te.bindKey=eP,te.castArray=wie,te.chain=YA,te.chunk=Cre,te.compact=Tre,te.concat=Rre,te.cond=noe,te.conforms=ioe,te.constant=Yy,te.countBy=Fne,te.create=Zie,te.curry=tP,te.curryRight=rP,te.debounce=nP,te.defaults=Qie,te.defaultsDeep=ese,te.defer=uie,te.delay=fie,te.difference=Dre,te.differenceBy=Ore,te.differenceWith=Nre,te.drop=Lre,te.dropRight=kre,te.dropRightWhile=Bre,te.dropWhile=$re,te.fill=Fre,te.filter=Une,te.flatMap=Hne,te.flatMapDeep=Wne,te.flatMapDepth=Kne,te.flatten=WA,te.flattenDeep=jre,te.flattenDepth=Ure,te.flip=lie,te.flow=ooe,te.flowRight=aoe,te.fromPairs=qre,te.functions=ase,te.functionsIn=cse,te.groupBy=Vne,te.initial=Hre,te.intersection=Wre,te.intersectionBy=Kre,te.intersectionWith=Vre,te.invert=fse,te.invertBy=lse,te.invokeMap=Yne,te.iteratee=Jy,te.keyBy=Jne,te.keys=kn,te.keysIn=Si,te.map=tg,te.mapKeys=dse,te.mapValues=pse,te.matches=coe,te.matchesProperty=uoe,te.memoize=ng,te.merge=gse,te.mergeWith=dP,te.method=foe,te.methodOf=loe,te.mixin=Xy,te.negate=ig,te.nthArg=doe,te.omit=mse,te.omitBy=vse,te.once=hie,te.orderBy=Xne,te.over=poe,te.overArgs=die,te.overEvery=goe,te.overSome=moe,te.partial=zy,te.partialRight=iP,te.partition=Zne,te.pick=bse,te.pickBy=pP,te.property=xP,te.propertyOf=voe,te.pull=Xre,te.pullAll=VA,te.pullAllBy=Zre,te.pullAllWith=Qre,te.pullAt=ene,te.range=boe,te.rangeRight=yoe,te.rearg=pie,te.reject=tie,te.remove=tne,te.rest=gie,te.reverse=jy,te.sampleSize=nie,te.set=wse,te.setWith=xse,te.shuffle=iie,te.slice=rne,te.sortBy=aie,te.sortedUniq=une,te.sortedUniqBy=fne,te.split=Hse,te.spread=mie,te.tail=lne,te.take=hne,te.takeRight=dne,te.takeRightWhile=pne,te.takeWhile=gne,te.tap=Tne,te.throttle=vie,te.thru=eg,te.toArray=uP,te.toPairs=gP,te.toPairsIn=mP,te.toPath=Soe,te.toPlainObject=lP,te.transform=_se,te.unary=bie,te.union=mne,te.unionBy=vne,te.unionWith=bne,te.uniq=yne,te.uniqBy=wne,te.uniqWith=xne,te.unset=Ese,te.unzip=Uy,te.unzipWith=GA,te.update=Sse,te.updateWith=Ase,te.values=gf,te.valuesIn=Pse,te.without=_ne,te.words=yP,te.wrap=yie,te.xor=Ene,te.xorBy=Sne,te.xorWith=Ane,te.zip=Pne,te.zipObject=Mne,te.zipObjectDeep=Ine,te.zipWith=Cne,te.entries=gP,te.entriesIn=mP,te.extend=hP,te.extendWith=ag,Xy(te,te),te.add=Poe,te.attempt=wP,te.camelCase=Tse,te.capitalize=vP,te.ceil=Moe,te.clamp=Mse,te.clone=xie,te.cloneDeep=Eie,te.cloneDeepWith=Sie,te.cloneWith=_ie,te.conformsTo=Aie,te.deburr=bP,te.defaultTo=soe,te.divide=Ioe,te.endsWith=Rse,te.eq=Ds,te.escape=Dse,te.escapeRegExp=Ose,te.every=jne,te.find=qne,te.findIndex=zA,te.findKey=tse,te.findLast=zne,te.findLastIndex=HA,te.findLastKey=rse,te.floor=Coe,te.forEach=JA,te.forEachRight=XA,te.forIn=nse,te.forInRight=ise,te.forOwn=sse,te.forOwnRight=ose,te.get=Ky,te.gt=Pie,te.gte=Mie,te.has=use,te.hasIn=Vy,te.head=KA,te.identity=Ai,te.includes=Gne,te.indexOf=zre,te.inRange=Ise,te.invoke=hse,te.isArguments=Uc,te.isArray=sr,te.isArrayBuffer=Iie,te.isArrayLike=Ei,te.isArrayLikeObject=gn,te.isBoolean=Cie,te.isBuffer=ja,te.isDate=Tie,te.isElement=Rie,te.isEmpty=Die,te.isEqual=Oie,te.isEqualWith=Nie,te.isError=Hy,te.isFinite=Lie,te.isFunction=Vo,te.isInteger=sP,te.isLength=sg,te.isMap=oP,te.isMatch=kie,te.isMatchWith=Bie,te.isNaN=$ie,te.isNative=Fie,te.isNil=Uie,te.isNull=jie,te.isNumber=aP,te.isObject=Qr,te.isObjectLike=rn,te.isPlainObject=Nh,te.isRegExp=Wy,te.isSafeInteger=qie,te.isSet=cP,te.isString=og,te.isSymbol=Bi,te.isTypedArray=pf,te.isUndefined=zie,te.isWeakMap=Hie,te.isWeakSet=Wie,te.join=Gre,te.kebabCase=Nse,te.last=hs,te.lastIndexOf=Yre,te.lowerCase=Lse,te.lowerFirst=kse,te.lt=Kie,te.lte=Vie,te.max=Toe,te.maxBy=Roe,te.mean=Doe,te.meanBy=Ooe,te.min=Noe,te.minBy=Loe,te.stubArray=Qy,te.stubFalse=ew,te.stubObject=woe,te.stubString=xoe,te.stubTrue=_oe,te.multiply=koe,te.nth=Jre,te.noConflict=hoe,te.noop=Zy,te.now=rg,te.pad=Bse,te.padEnd=$se,te.padStart=Fse,te.parseInt=jse,te.random=Cse,te.reduce=Qne,te.reduceRight=eie,te.repeat=Use,te.replace=qse,te.result=yse,te.round=Boe,te.runInContext=ye,te.sample=rie,te.size=sie,te.snakeCase=zse,te.some=oie,te.sortedIndex=nne,te.sortedIndexBy=ine,te.sortedIndexOf=sne,te.sortedLastIndex=one,te.sortedLastIndexBy=ane,te.sortedLastIndexOf=cne,te.startCase=Wse,te.startsWith=Kse,te.subtract=$oe,te.sum=Foe,te.sumBy=joe,te.template=Vse,te.times=Eoe,te.toFinite=Go,te.toInteger=ur,te.toLength=fP,te.toLower=Gse,te.toNumber=ds,te.toSafeInteger=Gie,te.toString=Cr,te.toUpper=Yse,te.trim=Jse,te.trimEnd=Xse,te.trimStart=Zse,te.truncate=Qse,te.unescape=eoe,te.uniqueId=Aoe,te.upperCase=toe,te.upperFirst=Gy,te.each=JA,te.eachRight=XA,te.first=KA,Xy(te,function(){var c={};return ao(te,function(h,w){Tr.call(te.prototype,w)||(c[w]=h)}),c}(),{chain:!1}),te.VERSION=n,as(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){te[c].placeholder=te}),as(["drop","take"],function(c,h){_r.prototype[c]=function(w){w=w===r?1:An(ur(w),0);var N=this.__filtered__&&!h?new _r(this):this.clone();return N.__filtered__?N.__takeCount__=Zn(w,N.__takeCount__):N.__views__.push({size:Zn(w,P),type:c+(N.__dir__<0?"Right":"")}),N},_r.prototype[c+"Right"]=function(w){return this.reverse()[c](w).reverse()}}),as(["filter","map","takeWhile"],function(c,h){var w=h+1,N=w==f||w==v;_r.prototype[c]=function(V){var ne=this.clone();return ne.__iteratees__.push({iteratee:qt(V,3),type:w}),ne.__filtered__=ne.__filtered__||N,ne}}),as(["head","last"],function(c,h){var w="take"+(h?"Right":"");_r.prototype[c]=function(){return this[w](1).value()[0]}}),as(["initial","tail"],function(c,h){var w="drop"+(h?"":"Right");_r.prototype[c]=function(){return this.__filtered__?new _r(this):this[w](1)}}),_r.prototype.compact=function(){return this.filter(Ai)},_r.prototype.find=function(c){return this.filter(c).head()},_r.prototype.findLast=function(c){return this.reverse().find(c)},_r.prototype.invokeMap=hr(function(c,h){return typeof c=="function"?new _r(this):this.map(function(w){return Ih(w,c,h)})}),_r.prototype.reject=function(c){return this.filter(ig(qt(c)))},_r.prototype.slice=function(c,h){c=ur(c);var w=this;return w.__filtered__&&(c>0||h<0)?new _r(w):(c<0?w=w.takeRight(-c):c&&(w=w.drop(c)),h!==r&&(h=ur(h),w=h<0?w.dropRight(-h):w.take(h-c)),w)},_r.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},_r.prototype.toArray=function(){return this.take(P)},ao(_r.prototype,function(c,h){var w=/^(?:filter|find|map|reject)|While$/.test(h),N=/^(?:head|last)$/.test(h),V=te[N?"take"+(h=="last"?"Right":""):h],ne=N||/^find/.test(h);V&&(te.prototype[h]=function(){var he=this.__wrapped__,ve=N?[1]:arguments,xe=he instanceof _r,We=ve[0],Ke=xe||sr(he),Ze=function(yr){var Sr=V.apply(te,Oa([yr],ve));return N&&xt?Sr[0]:Sr};Ke&&w&&typeof We=="function"&&We.length!=1&&(xe=Ke=!1);var xt=this.__chain__,Nt=!!this.__actions__.length,Vt=ne&&!xt,fr=xe&&!Nt;if(!ne&&Ke){he=fr?he:new _r(this);var Gt=c.apply(he,ve);return Gt.__actions__.push({func:eg,args:[Ze],thisArg:r}),new us(Gt,xt)}return Vt&&fr?c.apply(this,ve):(Gt=this.thru(Ze),Vt?N?Gt.value()[0]:Gt.value():Gt)})}),as(["pop","push","shift","sort","splice","unshift"],function(c){var h=Pp[c],w=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",N=/^(?:pop|shift)$/.test(c);te.prototype[c]=function(){var V=arguments;if(N&&!this.__chain__){var ne=this.value();return h.apply(sr(ne)?ne:[],V)}return this[w](function(he){return h.apply(sr(he)?he:[],V)})}}),ao(_r.prototype,function(c,h){var w=te[h];if(w){var N=w.name+"";Tr.call(uf,N)||(uf[N]=[]),uf[N].push({name:h,func:w})}}),uf[Vp(r,B).name]=[{name:"wrapper",func:r}],_r.prototype.clone=ete,_r.prototype.reverse=tte,_r.prototype.value=rte,te.prototype.at=Rne,te.prototype.chain=Dne,te.prototype.commit=One,te.prototype.next=Nne,te.prototype.plant=kne,te.prototype.reverse=Bne,te.prototype.toJSON=te.prototype.valueOf=te.prototype.value=$ne,te.prototype.first=te.prototype.head,xh&&(te.prototype[xh]=Lne),te},of=Oee();pn?((pn.exports=of)._=of,Ur._=of):Er._=of}).call(nn)}(h0,h0.exports);var rz=h0.exports,L1={exports:{}};(function(t,e){var r=typeof self<"u"?self:nn,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(f){return f&&DataView.prototype.isPrototypeOf(f)}if(a.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(f){return f&&l.indexOf(Object.prototype.toString.call(f))>-1};function p(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function y(f){return typeof f!="string"&&(f=String(f)),f}function _(f){var g={next:function(){var v=f.shift();return{done:v===void 0,value:v}}};return a.iterable&&(g[Symbol.iterator]=function(){return g}),g}function M(f){this.map={},f instanceof M?f.forEach(function(g,v){this.append(v,g)},this):Array.isArray(f)?f.forEach(function(g){this.append(g[0],g[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(g){this.append(g,f[g])},this)}M.prototype.append=function(f,g){f=p(f),g=y(g);var v=this.map[f];this.map[f]=v?v+", "+g:g},M.prototype.delete=function(f){delete this.map[p(f)]},M.prototype.get=function(f){return f=p(f),this.has(f)?this.map[f]:null},M.prototype.has=function(f){return this.map.hasOwnProperty(p(f))},M.prototype.set=function(f,g){this.map[p(f)]=y(g)},M.prototype.forEach=function(f,g){for(var v in this.map)this.map.hasOwnProperty(v)&&f.call(g,this.map[v],v,this)},M.prototype.keys=function(){var f=[];return this.forEach(function(g,v){f.push(v)}),_(f)},M.prototype.values=function(){var f=[];return this.forEach(function(g){f.push(g)}),_(f)},M.prototype.entries=function(){var f=[];return this.forEach(function(g,v){f.push([v,g])}),_(f)},a.iterable&&(M.prototype[Symbol.iterator]=M.prototype.entries);function O(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function L(f){return new Promise(function(g,v){f.onload=function(){g(f.result)},f.onerror=function(){v(f.error)}})}function B(f){var g=new FileReader,v=L(g);return g.readAsArrayBuffer(f),v}function k(f){var g=new FileReader,v=L(g);return g.readAsText(f),v}function H(f){for(var g=new Uint8Array(f),v=new Array(g.length),x=0;x<g.length;x++)v[x]=String.fromCharCode(g[x]);return v.join("")}function U(f){if(f.slice)return f.slice(0);var g=new Uint8Array(f.byteLength);return g.set(new Uint8Array(f)),g.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:a.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:a.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():a.arrayBuffer&&a.blob&&u(f)?(this._bodyArrayBuffer=U(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||d(f))?this._bodyArrayBuffer=U(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var f=O(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?O(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(B)}),this.text=function(){var f=O(this);if(f)return f;if(this._bodyBlob)return k(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(H(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(ie)}),this.json=function(){return this.text().then(JSON.parse)},this}var Z=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function R(f){var g=f.toUpperCase();return Z.indexOf(g)>-1?g:f}function W(f,g){g=g||{};var v=g.body;if(f instanceof W){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,g.headers||(this.headers=new M(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!v&&f._bodyInit!=null&&(v=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=g.credentials||this.credentials||"same-origin",(g.headers||!this.headers)&&(this.headers=new M(g.headers)),this.method=R(g.method||this.method||"GET"),this.mode=g.mode||this.mode||null,this.signal=g.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&v)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(v)}W.prototype.clone=function(){return new W(this,{body:this._bodyInit})};function ie(f){var g=new FormData;return f.trim().split("&").forEach(function(v){if(v){var x=v.split("="),S=x.shift().replace(/\+/g," "),A=x.join("=").replace(/\+/g," ");g.append(decodeURIComponent(S),decodeURIComponent(A))}}),g}function me(f){var g=new M,v=f.replace(/\r?\n[\t ]+/g," ");return v.split(/\r?\n/).forEach(function(x){var S=x.split(":"),A=S.shift().trim();if(A){var b=S.join(":").trim();g.append(A,b)}}),g}z.call(W.prototype);function j(f,g){g||(g={}),this.type="default",this.status=g.status===void 0?200:g.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in g?g.statusText:"OK",this.headers=new M(g.headers),this.url=g.url||"",this._initBody(f)}z.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new M(this.headers),url:this.url})},j.error=function(){var f=new j(null,{status:0,statusText:""});return f.type="error",f};var E=[301,302,303,307,308];j.redirect=function(f,g){if(E.indexOf(g)===-1)throw new RangeError("Invalid status code");return new j(null,{status:g,headers:{location:f}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(g,v){this.message=g,this.name=v;var x=Error(g);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function m(f,g){return new Promise(function(v,x){var S=new W(f,g);if(S.signal&&S.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var A=new XMLHttpRequest;function b(){A.abort()}A.onload=function(){var P={status:A.status,statusText:A.statusText,headers:me(A.getAllResponseHeaders()||"")};P.url="responseURL"in A?A.responseURL:P.headers.get("X-Request-URL");var I="response"in A?A.response:A.responseText;v(new j(I,P))},A.onerror=function(){x(new TypeError("Network request failed"))},A.ontimeout=function(){x(new TypeError("Network request failed"))},A.onabort=function(){x(new o.DOMException("Aborted","AbortError"))},A.open(S.method,S.url,!0),S.credentials==="include"?A.withCredentials=!0:S.credentials==="omit"&&(A.withCredentials=!1),"responseType"in A&&a.blob&&(A.responseType="blob"),S.headers.forEach(function(P,I){A.setRequestHeader(I,P)}),S.signal&&(S.signal.addEventListener("abort",b),A.onreadystatechange=function(){A.readyState===4&&S.signal.removeEventListener("abort",b)}),A.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return m.polyfill=!0,s.fetch||(s.fetch=m,s.Headers=M,s.Request=W,s.Response=j),o.Headers=M,o.Request=W,o.Response=j,o.fetch=m,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(L1,L1.exports);var nz=L1.exports;const a5=ji(nz);var iz=Object.defineProperty,sz=Object.defineProperties,oz=Object.getOwnPropertyDescriptors,c5=Object.getOwnPropertySymbols,az=Object.prototype.hasOwnProperty,cz=Object.prototype.propertyIsEnumerable,u5=(t,e,r)=>e in t?iz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,f5=(t,e)=>{for(var r in e||(e={}))az.call(e,r)&&u5(t,r,e[r]);if(c5)for(var r of c5(e))cz.call(e,r)&&u5(t,r,e[r]);return t},l5=(t,e)=>sz(t,oz(e));const uz={Accept:"application/json","Content-Type":"application/json"},fz="POST",h5={headers:uz,method:fz},d5=10;let Ss=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Hi.EventEmitter,this.isAvailable=!1,this.registering=!1,!h6(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=mo(e),n=await(await a5(this.url,l5(f5({},h5),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!h6(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=mo({id:1,jsonrpc:"2.0",method:"test",params:[]});await a5(e,l5(f5({},h5),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Za(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=o0(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return a6(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>d5&&this.events.setMaxListeners(d5)}};const p5="error",lz="wss://relay.walletconnect.org",hz="wc",dz="universal_provider",g5=`${hz}@2:${dz}:`,m5="https://rpc.walletconnect.org/v1/",Cu="generic",pz=`${m5}bundler`,ts={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var gz=Object.defineProperty,mz=Object.defineProperties,vz=Object.getOwnPropertyDescriptors,v5=Object.getOwnPropertySymbols,bz=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,b5=(t,e,r)=>e in t?gz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d0=(t,e)=>{for(var r in e||(e={}))bz.call(e,r)&&b5(t,r,e[r]);if(v5)for(var r of v5(e))yz.call(e,r)&&b5(t,r,e[r]);return t},wz=(t,e)=>mz(t,vz(e));function Di(t,e,r){var n;const i=Su(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${m5}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function mc(t){return t.includes(":")?t.split(":")[1]:t}function y5(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function xz(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function k1(t={},e={}){const r=w5(t),n=w5(e);return rz.merge(r,n)}function w5(t){var e,r,n,i;const s={};if(!Ml(t))return s;for(const[o,a]of Object.entries(t)){const u=y1(o)?[o]:a.chains,l=a.methods||[],d=a.events||[],p=a.rpcMap||{},y=Pl(o);s[y]=wz(d0(d0({},s[y]),a),{chains:Qd(u,(e=s[y])==null?void 0:e.chains),methods:Qd(l,(r=s[y])==null?void 0:r.methods),events:Qd(d,(n=s[y])==null?void 0:n.events),rpcMap:d0(d0({},p),(i=s[y])==null?void 0:i.rpcMap)})}return s}function _z(t){return t.includes(":")?t.split(":")[2]:t}function x5(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=y1(r)?[r]:n.chains?n.chains:y5(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function B1(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const _5={},Pr=t=>_5[t],$1=(t,e)=>{_5[t]=e};class Ez{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=mc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}}var Sz=Object.defineProperty,Az=Object.defineProperties,Pz=Object.getOwnPropertyDescriptors,E5=Object.getOwnPropertySymbols,Mz=Object.prototype.hasOwnProperty,Iz=Object.prototype.propertyIsEnumerable,S5=(t,e,r)=>e in t?Sz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A5=(t,e)=>{for(var r in e||(e={}))Mz.call(e,r)&&S5(t,r,e[r]);if(E5)for(var r of E5(e))Iz.call(e,r)&&S5(t,r,e[r]);return t},P5=(t,e)=>Az(t,Pz(e));class Cz{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Di(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(mc(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a==null?void 0:a[s];const u=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:P5(A5({},o.sessionProperties||{}),{capabilities:P5(A5({},a||{}),{[s]:u})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return u}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(va("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${pz}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}class Tz{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=mc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}}let Rz=class{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=mc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}},Dz=class{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Di(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Zi(new Ss(n,Pr("disableProviderPing")))}},Oz=class{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=mc(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}},Nz=class{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=mc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}};class Lz{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=mc(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}}let kz=class{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Di(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace);return typeof n>"u"?void 0:new Zi(new Ss(n,Pr("disableProviderPing")))}};class Bz{constructor(e){this.name="tezos",this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Di(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace);return typeof n>"u"?void 0:new Zi(new Ss(n))}}class $z{constructor(e){this.name=Cu,this.namespace=e.namespace,this.events=Pr("events"),this.client=Pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ts.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=Su(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Di(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zi(new Ss(n,Pr("disableProviderPing")))}}var Fz=Object.defineProperty,jz=Object.defineProperties,Uz=Object.getOwnPropertyDescriptors,M5=Object.getOwnPropertySymbols,qz=Object.prototype.hasOwnProperty,zz=Object.prototype.propertyIsEnumerable,I5=(t,e,r)=>e in t?Fz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p0=(t,e)=>{for(var r in e||(e={}))qz.call(e,r)&&I5(t,r,e[r]);if(M5)for(var r of M5(e))zz.call(e,r)&&I5(t,r,e[r]);return t},F1=(t,e)=>jz(t,Uz(e));let j1=class SP{constructor(e){this.events=new im,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:rl(bd({level:(e==null?void 0:e.logger)||p5})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new SP(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:p0({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,s0(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Dr("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=x5(this.session.namespaces);this.namespaces=k1(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await i().then(s=>{this.session=s;const o=x5(s.namespaces);this.namespaces=k1(this.namespaces,o),this.persist("namespaces",this.namespaces)}).catch(s=>{if(s.message!==i5)throw s;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===Cu?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(fc(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await N1.init({core:this.providerOpts.core,logger:this.providerOpts.logger||p5,relayUrl:this.providerOpts.relayUrl||lz,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Pl(r)))];$1("client",this.client),$1("events",this.events),$1("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=xz(r,this.session),i=y5(n),s=k1(this.namespaces,this.optionalNamespaces),o=F1(p0({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new Cz({namespace:o});break;case"algorand":this.rpcProviders[r]=new Dz({namespace:o});break;case"solana":this.rpcProviders[r]=new Tz({namespace:o});break;case"cosmos":this.rpcProviders[r]=new Rz({namespace:o});break;case"polkadot":this.rpcProviders[r]=new Ez({namespace:o});break;case"cip34":this.rpcProviders[r]=new Oz({namespace:o});break;case"elrond":this.rpcProviders[r]=new Nz({namespace:o});break;case"multiversx":this.rpcProviders[r]=new Lz({namespace:o});break;case"near":this.rpcProviders[r]=new kz({namespace:o});break;case"tezos":this.rpcProviders[r]=new Bz({namespace:o});break;default:this.rpcProviders[Cu]?this.rpcProviders[Cu].updateNamespace(o):this.rpcProviders[Cu]=new $z({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;if(n.name==="accountsChanged"){const i=n.data;i&&fc(i)&&this.events.emit("accountsChanged",i.map(_z))}else if(n.name==="chainChanged"){const i=r.chainId,s=r.event.data,o=Pl(i),a=B1(i)!==B1(s)?`${o}:${B1(s)}`:i;this.onChainChanged(a)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=F1(p0({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",F1(p0({},Dr("USER_DISCONNECTED")),{data:e.topic}))}),this.on(ts.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Cu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Pl(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=Pl(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${g5}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${g5}/${e}`)}};const Hz=j1;function Wz(){return new Promise(t=>{const e=[];let r;window.addEventListener("eip6963:announceProvider",n=>{const{detail:i}=n;r&&clearTimeout(r),e.push(i),r=setTimeout(()=>t(e),200)}),r=setTimeout(()=>t(e),200),window.dispatchEvent(new Event("eip6963:requestProvider"))})}class Qs{constructor(e,r){this.scope=e,this.module=r}storeObject(e,r){this.setItem(e,JSON.stringify(r))}loadObject(e){const r=this.getItem(e);return r?JSON.parse(r):void 0}setItem(e,r){localStorage.setItem(this.scopedKey(e),r)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);typeof i=="string"&&i.startsWith(e)&&r.push(i)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new Qs("CBWSDK").clear(),new Qs("walletlink").clear()}}const an={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},U1={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},C5="Unspecified error message.",Kz="Unspecified server error.";function q1(t,e=C5){if(t&&Number.isInteger(t)){const r=t.toString();if(z1(U1,r))return U1[r].message;if(T5(t))return Kz}return e}function Vz(t){if(!Number.isInteger(t))return!1;const e=t.toString();return!!(U1[e]||T5(t))}function Gz(t,{shouldIncludeStack:e=!1}={}){const r={};if(t&&typeof t=="object"&&!Array.isArray(t)&&z1(t,"code")&&Vz(t.code)){const n=t;r.code=n.code,n.message&&typeof n.message=="string"?(r.message=n.message,z1(n,"data")&&(r.data=n.data)):(r.message=q1(r.code),r.data={originalError:R5(t)})}else r.code=an.rpc.internal,r.message=D5(t,"message")?t.message:C5,r.data={originalError:R5(t)};return e&&(r.stack=D5(t,"stack")?t.stack:void 0),r}function T5(t){return t>=-32099&&t<=-32e3}function R5(t){return t&&typeof t=="object"&&!Array.isArray(t)?Object.assign({},t):t}function z1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function D5(t,e){return typeof t=="object"&&t!==null&&e in t&&typeof t[e]=="string"}const Ar={rpc:{parse:t=>rs(an.rpc.parse,t),invalidRequest:t=>rs(an.rpc.invalidRequest,t),invalidParams:t=>rs(an.rpc.invalidParams,t),methodNotFound:t=>rs(an.rpc.methodNotFound,t),internal:t=>rs(an.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return rs(e,t)},invalidInput:t=>rs(an.rpc.invalidInput,t),resourceNotFound:t=>rs(an.rpc.resourceNotFound,t),resourceUnavailable:t=>rs(an.rpc.resourceUnavailable,t),transactionRejected:t=>rs(an.rpc.transactionRejected,t),methodNotSupported:t=>rs(an.rpc.methodNotSupported,t),limitExceeded:t=>rs(an.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Tu(an.provider.userRejectedRequest,t),unauthorized:t=>Tu(an.provider.unauthorized,t),unsupportedMethod:t=>Tu(an.provider.unsupportedMethod,t),disconnected:t=>Tu(an.provider.disconnected,t),chainDisconnected:t=>Tu(an.provider.chainDisconnected,t),unsupportedChain:t=>Tu(an.provider.unsupportedChain,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new L5(e,r,n)}}};function rs(t,e){const[r,n]=O5(e);return new N5(t,r||q1(t),n)}function Tu(t,e){const[r,n]=O5(e);return new L5(t,r||q1(t),n)}function O5(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}class N5 extends Error{constructor(e,r,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=e,n!==void 0&&(this.data=n)}}class L5 extends N5{constructor(e,r,n){if(!Yz(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,r,n)}}function Yz(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function H1(){return t=>t}const kl=H1(),Jz=H1(),Xz=H1();function Co(t){return Math.floor(t)}const k5=/^[0-9]*$/,B5=/^[a-f0-9]*$/;function vc(t){return W1(crypto.getRandomValues(new Uint8Array(t)))}function W1(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}function g0(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>Number.parseInt(e,16)))}function Bl(t,e=!1){const r=t.toString("hex");return kl(e?`0x${r}`:r)}function K1(t){return Bl(Y1(t),!0)}function eo(t){return Xz(t.toString(10))}function ba(t){return kl(`0x${BigInt(t).toString(16)}`)}function $5(t){return t.startsWith("0x")||t.startsWith("0X")}function V1(t){return $5(t)?t.slice(2):t}function F5(t){return $5(t)?`0x${t.slice(2)}`:`0x${t}`}function m0(t){if(typeof t!="string")return!1;const e=V1(t).toLowerCase();return B5.test(e)}function Zz(t,e=!1){if(typeof t=="string"){const r=V1(t).toLowerCase();if(B5.test(r))return kl(e?`0x${r}`:r)}throw Ar.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}function G1(t,e=!1){let r=Zz(t,!1);return r.length%2===1&&(r=kl(`0${r}`)),e?kl(`0x${r}`):r}function ya(t){if(typeof t=="string"){const e=V1(t).toLowerCase();if(m0(e)&&e.length===40)return Jz(F5(e))}throw Ar.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`)}function Y1(t){if(Buffer.isBuffer(t))return t;if(typeof t=="string"){if(m0(t)){const e=G1(t,!1);return Buffer.from(e,"hex")}return Buffer.from(t,"utf8")}throw Ar.rpc.invalidParams(`Not binary data: ${String(t)}`)}function $l(t){if(typeof t=="number"&&Number.isInteger(t))return Co(t);if(typeof t=="string"){if(k5.test(t))return Co(Number(t));if(m0(t))return Co(Number(BigInt(G1(t,!0))))}throw Ar.rpc.invalidParams(`Not an integer: ${String(t)}`)}function Fl(t){if(t!==null&&(typeof t=="bigint"||eH(t)))return BigInt(t.toString(10));if(typeof t=="number")return BigInt($l(t));if(typeof t=="string"){if(k5.test(t))return BigInt(t);if(m0(t))return BigInt(G1(t,!0))}throw Ar.rpc.invalidParams(`Not an integer: ${String(t)}`)}function Qz(t){if(typeof t=="string")return JSON.parse(t);if(typeof t=="object")return t;throw Ar.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`)}function eH(t){if(t==null||typeof t.constructor!="function")return!1;const{constructor:e}=t;return typeof e.config=="function"&&typeof e.EUCLID=="number"}async function tH(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function rH(t,e){return crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function nH(t,e){const r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,new TextEncoder().encode(e));return{iv:r,cipherText:n}}async function iH(t,{iv:e,cipherText:r}){const n=await crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,r);return new TextDecoder().decode(n)}function j5(t){switch(t){case"public":return"spki";case"private":return"pkcs8"}}async function U5(t,e){const r=j5(t),n=await crypto.subtle.exportKey(r,e);return W1(new Uint8Array(n))}async function q5(t,e){const r=j5(t),n=g0(e).buffer;return await crypto.subtle.importKey(r,new Uint8Array(n),{name:"ECDH",namedCurve:"P-256"},!0,t==="private"?["deriveKey"]:[])}async function sH(t,e){const r=JSON.stringify(t,(n,i)=>{if(!(i instanceof Error))return i;const s=i;return Object.assign(Object.assign({},s.code?{code:s.code}:{}),{message:s.message})});return nH(e,r)}async function oH(t,e){return JSON.parse(await iH(e,t))}const J1={storageKey:"ownPrivateKey",keyType:"private"},X1={storageKey:"ownPublicKey",keyType:"public"},Z1={storageKey:"peerPublicKey",keyType:"public"};class aH{constructor(){this.storage=new Qs("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(Z1,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(X1.storageKey),this.storage.removeItem(J1.storageKey),this.storage.removeItem(Z1.storageKey)}async generateKeyPair(){const e=await tH();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(J1,e.privateKey),await this.storeKey(X1,e.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(J1)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(X1)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(Z1)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await rH(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(e){const r=this.storage.getItem(e.storageKey);return r?q5(e.keyType,r):null}async storeKey(e,r){const n=await U5(e.keyType,r);this.storage.setItem(e.storageKey,n)}}const jl="4.2.4",z5="@coinbase/wallet-sdk";async function H5(t,e){const r=Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:crypto.randomUUID()}),n=await window.fetch(e,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":jl,"X-Cbw-Sdk-Platform":z5}}),{result:i,error:s}=await n.json();if(s)throw s;return i}function cH(){return globalThis.coinbaseWalletExtension}function uH(){var t,e;try{const r=globalThis;return(t=r.ethereum)!==null&&t!==void 0?t:(e=r.top)===null||e===void 0?void 0:e.ethereum}catch{return}}function fH({metadata:t,preference:e}){var r,n;const{appName:i,appLogoUrl:s,appChainIds:o}=t;if(e.options!=="smartWalletOnly"){const u=cH();if(u)return(r=u.setAppInfo)===null||r===void 0||r.call(u,i,s,o,e),u}const a=uH();if(a!=null&&a.isCoinbaseBrowser)return(n=a.setAppInfo)===null||n===void 0||n.call(a,i,s,o,e),a}function lH(t){if(!t||typeof t!="object"||Array.isArray(t))throw Ar.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:t});const{method:e,params:r}=t;if(typeof e!="string"||e.length===0)throw Ar.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:t});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw Ar.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:t});switch(e){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw Ar.provider.unsupportedMethod()}}const W5="accounts",K5="activeChain",V5="availableChains",G5="walletCapabilities";class hH{constructor(e){var r,n,i;this.metadata=e.metadata,this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new aH,this.storage=new Qs("CBWSDK","SCWStateManager"),this.accounts=(r=this.storage.loadObject(W5))!==null&&r!==void 0?r:[],this.chain=this.storage.loadObject(K5)||{id:(i=(n=e.metadata.appChainIds)===null||n===void 0?void 0:n[0])!==null&&i!==void 0?i:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(e){var r,n;const i=await this.createRequestMessage({handshake:{method:e.method,params:Object.assign({},this.metadata,(r=e.params)!==null&&r!==void 0?r:{})}}),s=await this.communicator.postRequestAndWaitForResponse(i);if("failure"in s.content)throw s.content.failure;const o=await q5("public",s.sender);await this.keyManager.setPeerPublicKey(o);const u=(await this.decryptResponseMessage(s)).result;if("error"in u)throw u.error;const l=u.value;this.accounts=l,this.storage.storeObject(W5,l),(n=this.callback)===null||n===void 0||n.call(this,"accountsChanged",l)}async request(e){var r;if(this.accounts.length===0)throw Ar.provider.unauthorized();switch(e.method){case"eth_requestAccounts":return(r=this.callback)===null||r===void 0||r.call(this,"connect",{chainId:ba(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return ba(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject(G5);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);default:if(!this.chain.rpcUrl)throw Ar.rpc.internal("No RPC URL set for chain");return H5(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var r,n;await((n=(r=this.communicator).waitForPopupLoaded)===null||n===void 0?void 0:n.call(r));const i=await this.sendEncryptedRequest(e),o=(await this.decryptResponseMessage(i)).result;if("error"in o)throw o.error;return o.value}async cleanup(){var e,r;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:(r=(e=this.metadata.appChainIds)===null||e===void 0?void 0:e[0])!==null&&r!==void 0?r:1}}async handleSwitchChainRequest(e){var r;const n=e.params;if(!n||!(!((r=n[0])===null||r===void 0)&&r.chainId))throw Ar.rpc.invalidParams();const i=$l(n[0].chainId);if(this.updateChain(i))return null;const o=await this.sendRequestToPopup(e);return o===null&&this.updateChain(i),o}async sendEncryptedRequest(e){const r=await this.keyManager.getSharedSecret();if(!r)throw Ar.provider.unauthorized("No valid session found, try requestAccounts before other methods");const n=await sH({action:e,chainId:this.chain.id},r),i=await this.createRequestMessage({encrypted:n});return this.communicator.postRequestAndWaitForResponse(i)}async createRequestMessage(e){const r=await U5("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:r,content:e,timestamp:new Date}}async decryptResponseMessage(e){var r,n;const i=e.content;if("failure"in i)throw i.failure;const s=await this.keyManager.getSharedSecret();if(!s)throw Ar.provider.unauthorized("Invalid session");const o=await oH(i.encrypted,s),a=(r=o.data)===null||r===void 0?void 0:r.chains;if(a){const l=Object.entries(a).map(([d,p])=>({id:Number(d),rpcUrl:p}));this.storage.storeObject(V5,l),this.updateChain(this.chain.id,l)}const u=(n=o.data)===null||n===void 0?void 0:n.capabilities;return u&&this.storage.storeObject(G5,u),o}updateChain(e,r){var n;const i=r??this.storage.loadObject(V5),s=i==null?void 0:i.find(o=>o.id===e);return s?(s!==this.chain&&(this.chain=s,this.storage.storeObject(K5,s),(n=this.callback)===null||n===void 0||n.call(this,"chainChanged",ba(s.id))),!0):!1}}const dH=cg(PM),{keccak_256:pH}=dH;function Y5(t){return Buffer.allocUnsafe(t).fill(0)}function gH(t){return t.toString(2).length}function J5(t,e){let r=t.toString(16);r.length%2!==0&&(r="0"+r);const n=r.match(/.{1,2}/g).map(i=>parseInt(i,16));for(;n.length<e;)n.unshift(0);return Buffer.from(n)}function mH(t,e){const r=t<0n;let n;if(r){const i=(1n<<BigInt(e))-1n;n=(~t&i)+1n}else n=t;return n&=(1n<<BigInt(e))-1n,n}function X5(t,e,r){const n=Y5(e);return t=v0(t),r?t.length<e?(t.copy(n),n):t.slice(0,e):t.length<e?(t.copy(n,e-t.length),n):t.slice(-e)}function vH(t,e){return X5(t,e,!0)}function v0(t){if(!Buffer.isBuffer(t))if(Array.isArray(t))t=Buffer.from(t);else if(typeof t=="string")Z5(t)?t=Buffer.from(wH(Q5(t)),"hex"):t=Buffer.from(t);else if(typeof t=="number")t=intToBuffer(t);else if(t==null)t=Buffer.allocUnsafe(0);else if(typeof t=="bigint")t=J5(t);else if(t.toArray)t=Buffer.from(t.toArray());else throw new Error("invalid type");return t}function bH(t){return t=v0(t),"0x"+t.toString("hex")}function yH(t,e){if(t=v0(t),e||(e=256),e!==256)throw new Error("unsupported");return Buffer.from(pH(new Uint8Array(t)))}function wH(t){return t.length%2?"0"+t:t}function Z5(t){return typeof t=="string"&&t.match(/^0x[0-9A-Fa-f]*$/)}function Q5(t){return typeof t=="string"&&t.startsWith("0x")?t.slice(2):t}var e4={zeros:Y5,setLength:X5,setLengthRight:vH,isHexString:Z5,stripHexPrefix:Q5,toBuffer:v0,bufferToHex:bH,keccak:yH,bitLengthFromBigInt:gH,bufferBEFromBigInt:J5,twosFromBigInt:mH};const ii=e4;function t4(t){return t.startsWith("int[")?"int256"+t.slice(3):t==="int"?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):t==="uint"?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):t==="fixed"?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):t==="ufixed"?"ufixed128x128":t}function Ru(t){return Number.parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function r4(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);return[Number.parseInt(e[1],10),Number.parseInt(e[2],10)]}function n4(t){var e=t.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":Number.parseInt(e[2],10):null}function bc(t){var e=typeof t;if(e==="string"||e==="number")return BigInt(t);if(e==="bigint")return t;throw new Error("Argument is not a number")}function to(t,e){var r,n,i,s;if(t==="address")return to("uint160",bc(e));if(t==="bool")return to("uint8",e?1:0);if(t==="string")return to("bytes",new Buffer(e,"utf8"));if(_H(t)){if(typeof e.length>"u")throw new Error("Not an array?");if(r=n4(t),r!=="dynamic"&&r!==0&&e.length>r)throw new Error("Elements exceed array size: "+r);i=[],t=t.slice(0,t.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(s in e)i.push(to(t,e[s]));if(r==="dynamic"){var o=to("uint256",e.length);i.unshift(o)}return Buffer.concat(i)}else{if(t==="bytes")return e=new Buffer(e),i=Buffer.concat([to("uint256",e.length),e]),e.length%32!==0&&(i=Buffer.concat([i,ii.zeros(32-e.length%32)])),i;if(t.startsWith("bytes")){if(r=Ru(t),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return ii.setLengthRight(e,32)}else if(t.startsWith("uint")){if(r=Ru(t),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);n=bc(e);const a=ii.bitLengthFromBigInt(n);if(a>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+a);if(n<0)throw new Error("Supplied uint is negative");return ii.bufferBEFromBigInt(n,32)}else if(t.startsWith("int")){if(r=Ru(t),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);n=bc(e);const a=ii.bitLengthFromBigInt(n);if(a>r)throw new Error("Supplied int exceeds width: "+r+" vs "+a);const u=ii.twosFromBigInt(n,256);return ii.bufferBEFromBigInt(u,32)}else if(t.startsWith("ufixed")){if(r=r4(t),n=bc(e),n<0)throw new Error("Supplied ufixed is negative");return to("uint256",n*BigInt(2)**BigInt(r[1]))}else if(t.startsWith("fixed"))return r=r4(t),to("int256",bc(e)*BigInt(2)**BigInt(r[1]))}throw new Error("Unsupported or invalid type: "+t)}function xH(t){return t==="string"||t==="bytes"||n4(t)==="dynamic"}function _H(t){return t.lastIndexOf("]")===t.length-1}function EH(t,e){var r=[],n=[],i=32*t.length;for(var s in t){var o=t4(t[s]),a=e[s],u=to(o,a);xH(o)?(r.push(to("uint256",i)),n.push(u),i+=u.length):r.push(u)}return Buffer.concat(r.concat(n))}function i4(t,e){if(t.length!==e.length)throw new Error("Number of types are not matching the values");for(var r,n,i=[],s=0;s<t.length;s++){var o=t4(t[s]),a=e[s];if(o==="bytes")i.push(a);else if(o==="string")i.push(new Buffer(a,"utf8"));else if(o==="bool")i.push(new Buffer(a?"01":"00","hex"));else if(o==="address")i.push(ii.setLength(a,20));else if(o.startsWith("bytes")){if(r=Ru(o),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);i.push(ii.setLengthRight(a,r))}else if(o.startsWith("uint")){if(r=Ru(o),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);n=bc(a);const u=ii.bitLengthFromBigInt(n);if(u>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+u);i.push(ii.bufferBEFromBigInt(n,r/8))}else if(o.startsWith("int")){if(r=Ru(o),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);n=bc(a);const u=ii.bitLengthFromBigInt(n);if(u>r)throw new Error("Supplied int exceeds width: "+r+" vs "+u);const l=ii.twosFromBigInt(n,r);i.push(ii.bufferBEFromBigInt(l,r/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(i)}function SH(t,e){return ii.keccak(i4(t,e))}var AH={rawEncode:EH,solidityPack:i4,soliditySHA3:SH};const As=e4,Ul=AH,s4={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Q1={encodeData(t,e,r,n=!0){const i=["bytes32"],s=[this.hashType(t,r)];if(n){const o=(a,u,l)=>{if(r[u]!==void 0)return["bytes32",l==null?"0x0000000000000000000000000000000000000000000000000000000000000000":As.keccak(this.encodeData(u,l,r,n))];if(l===void 0)throw new Error(`missing value for field ${a} of type ${u}`);if(u==="bytes")return["bytes32",As.keccak(l)];if(u==="string")return typeof l=="string"&&(l=Buffer.from(l,"utf8")),["bytes32",As.keccak(l)];if(u.lastIndexOf("]")===u.length-1){const d=u.slice(0,u.lastIndexOf("[")),p=l.map(y=>o(a,d,y));return["bytes32",As.keccak(Ul.rawEncode(p.map(([y])=>y),p.map(([,y])=>y)))]}return[u,l]};for(const a of r[t]){const[u,l]=o(a.name,a.type,e[a.name]);i.push(u),s.push(l)}}else for(const o of r[t]){let a=e[o.name];if(a!==void 0)if(o.type==="bytes")i.push("bytes32"),a=As.keccak(a),s.push(a);else if(o.type==="string")i.push("bytes32"),typeof a=="string"&&(a=Buffer.from(a,"utf8")),a=As.keccak(a),s.push(a);else if(r[o.type]!==void 0)i.push("bytes32"),a=As.keccak(this.encodeData(o.type,a,r,n)),s.push(a);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(o.type),s.push(a)}}return Ul.rawEncode(i,s)},encodeType(t,e){let r="",n=this.findTypeDependencies(t,e).filter(i=>i!==t);n=[t].concat(n.sort());for(const i of n){if(!e[i])throw new Error("No type definition specified: "+i);r+=i+"("+e[i].map(({name:o,type:a})=>a+" "+o).join(",")+")"}return r},findTypeDependencies(t,e,r=[]){if(t=t.match(/^\w*/)[0],r.includes(t)||e[t]===void 0)return r;r.push(t);for(const n of e[t])for(const i of this.findTypeDependencies(n.type,e,r))!r.includes(i)&&r.push(i);return r},hashStruct(t,e,r,n=!0){return As.keccak(this.encodeData(t,e,r,n))},hashType(t,e){return As.keccak(this.encodeType(t,e))},sanitizeData(t){const e={};for(const r in s4.properties)t[r]&&(e[r]=t[r]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(t,e=!0){const r=this.sanitizeData(t),n=[Buffer.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,e)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,e)),As.keccak(Buffer.concat(n))}};var PH={TYPED_MESSAGE_SCHEMA:s4,TypedDataUtils:Q1,hashForSignTypedDataLegacy:function(t){return MH(t.data)},hashForSignTypedData_v3:function(t){return Q1.hash(t.data,!1)},hashForSignTypedData_v4:function(t){return Q1.hash(t.data)}};function MH(t){const e=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!t.length)throw e;const r=t.map(function(s){return s.type==="bytes"?As.toBuffer(s.value):s.value}),n=t.map(function(s){return s.type}),i=t.map(function(s){if(!s.name)throw e;return s.type+" "+s.name});return Ul.soliditySHA3(["bytes32","bytes32"],[Ul.soliditySHA3(new Array(t.length).fill("string"),i),Ul.soliditySHA3(n,r)])}const b0=ji(PH),IH="walletUsername",ev="Addresses",CH="AppVersion";function Un(t){return t.errorMessage!==void 0}class TH{constructor(e){this.secret=e}async encrypt(e){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",g0(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=new TextEncoder,o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,s.encode(e)),a=16,u=o.slice(o.byteLength-a),l=o.slice(0,o.byteLength-a),d=new Uint8Array(u),p=new Uint8Array(l),y=new Uint8Array([...n,...d,...p]);return W1(y)}async decrypt(e){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");return new Promise((n,i)=>{(async function(){const s=await crypto.subtle.importKey("raw",g0(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),o=g0(e),a=o.slice(0,12),u=o.slice(12,28),l=o.slice(28),d=new Uint8Array([...l,...u]),p={name:"AES-GCM",iv:new Uint8Array(a)};try{const y=await window.crypto.subtle.decrypt(p,s,d),_=new TextDecoder;n(_.decode(y))}catch(y){i(y)}})()})}}class RH{constructor(e,r,n){this.linkAPIUrl=e,this.sessionId=r;const i=`${r}:${n}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(r=>fetch(`${this.linkAPIUrl}/events/${r.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(r=>console.error("Unabled to mark event as failed:",r))}async fetchUnseenEvents(){var e;const r=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(r.ok){const{events:n,error:i}=await r.json();if(i)throw new Error(`Check unseen events failed: ${i}`);const s=(e=n==null?void 0:n.filter(o=>o.event==="Web3Response").map(o=>({type:"Event",sessionId:this.sessionId,eventId:o.id,event:o.event,data:o.data})))!==null&&e!==void 0?e:[];return this.markUnseenEventsAsSeen(s),s}throw new Error(`Check unseen events failed: ${r.status}`)}}var To;(function(t){t[t.DISCONNECTED=0]="DISCONNECTED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED"})(To||(To={}));class DH{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,r=WebSocket){this.WebSocketClass=r,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((e,r)=>{var n;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(s){r(s);return}(n=this.connectionStateListener)===null||n===void 0||n.call(this,To.CONNECTING),i.onclose=s=>{var o;this.clearWebSocket(),r(new Error(`websocket error ${s.code}: ${s.reason}`)),(o=this.connectionStateListener)===null||o===void 0||o.call(this,To.DISCONNECTED)},i.onopen=s=>{var o;e(),(o=this.connectionStateListener)===null||o===void 0||o.call(this,To.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(u=>this.sendData(u)),this.pendingData=[])},i.onmessage=s=>{var o,a;if(s.data==="h")(o=this.incomingDataListener)===null||o===void 0||o.call(this,{type:"Heartbeat"});else try{const u=JSON.parse(s.data);(a=this.incomingDataListener)===null||a===void 0||a.call(this,u)}catch{}}})}disconnect(){var e;const{webSocket:r}=this;if(r){this.clearWebSocket(),(e=this.connectionStateListener)===null||e===void 0||e.call(this,To.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{r.close()}catch{}}}sendData(e){const{webSocket:r}=this;if(!r){this.pendingData.push(e),this.connect();return}r.send(e)}clearWebSocket(){const{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}const o4=1e4,OH=6e4;class NH{constructor({session:e,linkAPIUrl:r,listener:n}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=Co(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=s=>{if(!s)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",a=>s.JsonRpcUrl&&this.handleChainUpdated(a,s.JsonRpcUrl)]]).forEach((a,u)=>{const l=s[u];l!==void 0&&a(l)})},this.handleDestroyed=s=>{var o;s==="1"&&((o=this.listener)===null||o===void 0||o.resetAndReload())},this.handleAccountUpdated=async s=>{var o;const a=await this.cipher.decrypt(s);(o=this.listener)===null||o===void 0||o.accountUpdated(a)},this.handleMetadataUpdated=async(s,o)=>{var a;const u=await this.cipher.decrypt(o);(a=this.listener)===null||a===void 0||a.metadataUpdated(s,u)},this.handleWalletUsernameUpdated=async s=>{this.handleMetadataUpdated(IH,s)},this.handleAppVersionUpdated=async s=>{this.handleMetadataUpdated(CH,s)},this.handleChainUpdated=async(s,o)=>{var a;const u=await this.cipher.decrypt(s),l=await this.cipher.decrypt(o);(a=this.listener)===null||a===void 0||a.chainUpdated(u,l)},this.session=e,this.cipher=new TH(e.secret),this.listener=n;const i=new DH(`${r}/rpc`,WebSocket);i.setConnectionStateListener(async s=>{let o=!1;switch(s){case To.DISCONNECTED:if(!this.destroyed){const a=async()=>{await new Promise(u=>setTimeout(u,5e3)),this.destroyed||i.connect().catch(()=>{a()})};a()}break;case To.CONNECTED:o=await this.handleConnected(),this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},o4),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case To.CONNECTING:break}this.connected!==o&&(this.connected=o)}),i.setIncomingDataListener(s=>{var o;switch(s.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const a=s.type==="IsLinkedOK"?s.linked:void 0;this.linked=a||s.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(s.metadata);break}case"Event":{this.handleIncomingEvent(s);break}}s.id!==void 0&&((o=this.requestResolutions.get(s.id))===null||o===void 0||o(s))}),this.ws=i,this.http=new RH(r,e.id,e.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:Co(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.ws.disconnect(),this.listener=void 0)}get connected(){return this._connected}set connected(e){this._connected=e}get linked(){return this._linked}set linked(e){var r,n;this._linked=e,e&&((r=this.onceLinked)===null||r===void 0||r.call(this)),(n=this.listener)===null||n===void 0||n.linkedUpdated(e)}setOnceLinked(e){return new Promise(r=>{this.linked?e().then(r):this.onceLinked=()=>{e().then(r),this.onceLinked=void 0}})}async handleIncomingEvent(e){var r;if(e.type!=="Event"||e.event!=="Web3Response")return;const n=await this.cipher.decrypt(e.data),i=JSON.parse(n);if(i.type!=="WEB3_RESPONSE")return;const{id:s,response:o}=i;(r=this.listener)===null||r===void 0||r.handleWeb3ResponseMessage(s,o)}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(r=>this.handleIncomingEvent(r))}async publishEvent(e,r,n=!1){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),s={type:"PublishEvent",id:Co(this.nextReqId++),sessionId:this.session.id,event:e,data:i,callWebhook:n};return this.setOnceLinked(async()=>{const o=await this.makeRequest(s);if(o.type==="Fail")throw new Error(o.error||"failed to publish event");return o.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>o4*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(e,r={timeout:OH}){const n=e.id;this.sendData(e);let i;return Promise.race([new Promise((s,o)=>{i=window.setTimeout(()=>{o(new Error(`request ${n} timed out`))},r.timeout)}),new Promise(s=>{this.requestResolutions.set(n,o=>{clearTimeout(i),s(o),this.requestResolutions.delete(n)})})])}async handleConnected(){return(await this.makeRequest({type:"HostSession",id:Co(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type==="Fail"?!1:(this.sendData({type:"IsLinked",id:Co(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:Co(this.nextReqId++),sessionId:this.session.id}),!0)}}class LH{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,r=F5(e.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),e}}const a4="session:id",c4="session:secret",u4="session:linked";class Du{constructor(e,r,n,i=!1){this.storage=e,this.id=r,this.secret=n,this.key=Gc(c2(`${r}, ${n} WalletLink`)),this._linked=!!i}static create(e){const r=vc(16),n=vc(32);return new Du(e,r,n).save()}static load(e){const r=e.getItem(a4),n=e.getItem(u4),i=e.getItem(c4);return r&&i?new Du(e,r,i,n==="1"):null}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this.storage.setItem(a4,this.id),this.storage.setItem(c4,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(u4,this._linked?"1":"0")}}function kH(){try{return window.frameElement!==null}catch{return!1}}function BH(){try{return kH()&&window.top?window.top.location:window.location}catch{return window.location}}function $H(){var t;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((t=window==null?void 0:window.navigator)===null||t===void 0?void 0:t.userAgent)}function f4(){var t,e;return(e=(t=window==null?void 0:window.matchMedia)===null||t===void 0?void 0:t.call(window,"(prefers-color-scheme: dark)").matches)!==null&&e!==void 0?e:!1}const FH='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';function l4(){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(FH)),document.documentElement.appendChild(t)}function h4(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=h4(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function ql(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=h4(t))&&(n&&(n+=" "),n+=e);return n}var y0,Vr,d4,yc,p4,g4,tv,m4,rv,nv,iv,zl={},v4=[],jH=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,sv=Array.isArray;function wa(t,e){for(var r in e)t[r]=e[r];return t}function ov(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Or(t,e,r){var n,i,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?y0.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return w0(t,o,n,i,null)}function w0(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++d4,__i:-1,__u:0};return i==null&&Vr.vnode!=null&&Vr.vnode(s),s}function Hl(t){return t.children}function x0(t,e){this.props=t,this.context=e}function Ou(t,e){if(e==null)return t.__?Ou(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?Ou(t):null}function b4(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return b4(t)}}function y4(t){(!t.__d&&(t.__d=!0)&&yc.push(t)&&!_0.__r++||p4!==Vr.debounceRendering)&&((p4=Vr.debounceRendering)||g4)(_0)}function _0(){var t,e,r,n,i,s,o,a;for(yc.sort(tv);t=yc.shift();)t.__d&&(e=yc.length,n=void 0,s=(i=(r=t).__v).__e,o=[],a=[],r.__P&&((n=wa({},i)).__v=i.__v+1,Vr.vnode&&Vr.vnode(n),av(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,o,s??Ou(i),!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,S4(o,n,a),n.__e!=s&&b4(n)),yc.length>e&&yc.sort(tv));_0.__r=0}function w4(t,e,r,n,i,s,o,a,u,l,d){var p,y,_,M,O,L,B=n&&n.__k||v4,k=e.length;for(u=UH(r,e,B,u),p=0;p<k;p++)(_=r.__k[p])!=null&&(y=_.__i===-1?zl:B[_.__i]||zl,_.__i=p,L=av(t,_,y,i,s,o,a,u,l,d),M=_.__e,_.ref&&y.ref!=_.ref&&(y.ref&&cv(y.ref,null,_),d.push(_.ref,_.__c||M,_)),O==null&&M!=null&&(O=M),4&_.__u||y.__k===_.__k?u=x4(_,u,t):typeof _.type=="function"&&L!==void 0?u=L:M&&(u=M.nextSibling),_.__u&=-7);return r.__e=O,u}function UH(t,e,r,n){var i,s,o,a,u,l=e.length,d=r.length,p=d,y=0;for(t.__k=[],i=0;i<l;i++)(s=e[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(a=i+y,(s=t.__k[i]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?w0(null,s,null,null,null):sv(s)?w0(Hl,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?w0(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,o=null,(u=s.__i=qH(s,r,a,p))!==-1&&(p--,(o=r[u])&&(o.__u|=2)),o==null||o.__v===null?(u==-1&&y--,typeof s.type!="function"&&(s.__u|=4)):u!==a&&(u==a-1?y--:u==a+1?y++:(u>a?y--:y++,s.__u|=4))):s=t.__k[i]=null;if(p)for(i=0;i<d;i++)(o=r[i])!=null&&!(2&o.__u)&&(o.__e==n&&(n=Ou(o)),A4(o,o));return n}function x4(t,e,r){var n,i;if(typeof t.type=="function"){for(n=t.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=t,e=x4(n[i],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=Ou(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function qH(t,e,r,n){var i=t.key,s=t.type,o=r-1,a=r+1,u=e[r];if(u===null||u&&i==u.key&&s===u.type&&!(2&u.__u))return r;if((typeof s!="function"||s===Hl||i)&&n>(u!=null&&!(2&u.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((u=e[o])&&!(2&u.__u)&&i==u.key&&s===u.type)return o;o--}if(a<e.length){if((u=e[a])&&!(2&u.__u)&&i==u.key&&s===u.type)return a;a++}}return-1}function _4(t,e,r){e[0]==="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||jH.test(e)?r:r+"px"}function E0(t,e,r,n,i){var s;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||_4(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||_4(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(m4,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=r,r?n?r.u=n.u:(r.u=rv,t.addEventListener(e,s?iv:nv,s)):t.removeEventListener(e,s?iv:nv,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function E4(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=rv++;else if(e.t<r.u)return;return r(Vr.event?Vr.event(e):e)}}}function av(t,e,r,n,i,s,o,a,u,l){var d,p,y,_,M,O,L,B,k,H,U,z,Z,R,W,ie,me,j=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),s=[a=e.__e=r.__e]),(d=Vr.__b)&&d(e);e:if(typeof j=="function")try{if(B=e.props,k="prototype"in j&&j.prototype.render,H=(d=j.contextType)&&n[d.__c],U=d?H?H.props.value:d.__:n,r.__c?L=(p=e.__c=r.__c).__=p.__E:(k?e.__c=p=new j(B,U):(e.__c=p=new x0(B,U),p.constructor=j,p.render=HH),H&&H.sub(p),p.props=B,p.state||(p.state={}),p.context=U,p.__n=n,y=p.__d=!0,p.__h=[],p._sb=[]),k&&p.__s==null&&(p.__s=p.state),k&&j.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=wa({},p.__s)),wa(p.__s,j.getDerivedStateFromProps(B,p.__s))),_=p.props,M=p.state,p.__v=e,y)k&&j.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),k&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(k&&j.getDerivedStateFromProps==null&&B!==_&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(B,U),!p.__e&&(p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(B,p.__s,U)===!1||e.__v===r.__v)){for(e.__v!==r.__v&&(p.props=B,p.state=p.__s,p.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(E){E&&(E.__=e)}),z=0;z<p._sb.length;z++)p.__h.push(p._sb[z]);p._sb=[],p.__h.length&&o.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(B,p.__s,U),k&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(_,M,O)})}if(p.context=U,p.props=B,p.__P=t,p.__e=!1,Z=Vr.__r,R=0,k){for(p.state=p.__s,p.__d=!1,Z&&Z(e),d=p.render(p.props,p.state,p.context),W=0;W<p._sb.length;W++)p.__h.push(p._sb[W]);p._sb=[]}else do p.__d=!1,Z&&Z(e),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++R<25);p.state=p.__s,p.getChildContext!=null&&(n=wa(wa({},n),p.getChildContext())),k&&!y&&p.getSnapshotBeforeUpdate!=null&&(O=p.getSnapshotBeforeUpdate(_,M)),a=w4(t,sv(ie=d!=null&&d.type===Hl&&d.key==null?d.props.children:d)?ie:[ie],e,r,n,i,s,o,a,u,l),p.base=e.__e,e.__u&=-161,p.__h.length&&o.push(p),L&&(p.__E=p.__=null)}catch(E){if(e.__v=null,u||s!=null)if(E.then){for(e.__u|=u?160:128;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(me=s.length;me--;)ov(s[me]);else e.__e=r.__e,e.__k=r.__k;Vr.__e(E,e,r)}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=zH(r.__e,e,r,n,i,s,o,u,l);return(d=Vr.diffed)&&d(e),128&e.__u?void 0:a}function S4(t,e,r){for(var n=0;n<r.length;n++)cv(r[n],r[++n],r[++n]);Vr.__c&&Vr.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){Vr.__e(s,i.__v)}})}function zH(t,e,r,n,i,s,o,a,u){var l,d,p,y,_,M,O,L=r.props,B=e.props,k=e.type;if(k==="svg"?i="http://www.w3.org/2000/svg":k==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((_=s[l])&&"setAttribute"in _==!!k&&(k?_.localName===k:_.nodeType===3)){t=_,s[l]=null;break}}if(t==null){if(k===null)return document.createTextNode(B);t=document.createElementNS(i,k,B.is&&B),a&&(Vr.__m&&Vr.__m(e,s),a=!1),s=null}if(k===null)L===B||a&&t.data===B||(t.data=B);else{if(s=s&&y0.call(t.childNodes),L=r.props||zl,!a&&s!=null)for(L={},l=0;l<t.attributes.length;l++)L[(_=t.attributes[l]).name]=_.value;for(l in L)if(_=L[l],l!="children"){if(l=="dangerouslySetInnerHTML")p=_;else if(!(l in B)){if(l=="value"&&"defaultValue"in B||l=="checked"&&"defaultChecked"in B)continue;E0(t,l,null,_,i)}}for(l in B)_=B[l],l=="children"?y=_:l=="dangerouslySetInnerHTML"?d=_:l=="value"?M=_:l=="checked"?O=_:a&&typeof _!="function"||L[l]===_||E0(t,l,_,L[l],i);if(d)a||p&&(d.__html===p.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(p&&(t.innerHTML=""),w4(t,sv(y)?y:[y],e,r,n,k==="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:r.__k&&Ou(r,0),a,u),s!=null)for(l=s.length;l--;)ov(s[l]);a||(l="value",k==="progress"&&M==null?t.removeAttribute("value"):M!==void 0&&(M!==t[l]||k==="progress"&&!M||k==="option"&&M!==L[l])&&E0(t,l,M,L[l],i),l="checked",O!==void 0&&O!==t[l]&&E0(t,l,O,L[l],i))}return t}function cv(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(i){Vr.__e(i,r)}}function A4(t,e,r){var n,i;if(Vr.unmount&&Vr.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||cv(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){Vr.__e(s,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&A4(n[i],e,r||typeof t.type!="function");r||ov(t.__e),t.__c=t.__=t.__e=void 0}function HH(t,e,r){return this.constructor(t,r)}function uv(t,e,r){var n,i,s,o;e===document&&(e=document.documentElement),Vr.__&&Vr.__(t,e),i=(n=typeof r=="function")?null:e.__k,s=[],o=[],av(e,t=(!n&&r||e).__k=Or(Hl,null,[t]),i||zl,zl,e.namespaceURI,!n&&r?[r]:i?null:e.firstChild?y0.call(e.childNodes):null,s,!n&&r?r:i?i.__e:e.firstChild,n,o),S4(s,t,o)}y0=v4.slice,Vr={__e:function(t,e,r,n){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},d4=0,x0.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=wa({},this.state),typeof t=="function"&&(t=t(wa({},r),this.props)),t&&wa(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),y4(this))},x0.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),y4(this))},x0.prototype.render=Hl,yc=[],g4=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tv=function(t,e){return t.__v.__b-e.__v.__b},_0.__r=0,m4=/(PointerCapture)$|Capture$/i,rv=0,nv=E4(!1),iv=E4(!0);var S0,cn,fv,P4,lv=0,M4=[],yn=Vr,I4=yn.__b,C4=yn.__r,T4=yn.diffed,R4=yn.__c,D4=yn.unmount,O4=yn.__;function N4(t,e){yn.__h&&yn.__h(cn,t,lv||e),lv=0;var r=cn.__H||(cn.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function L4(t){return lv=1,WH(B4,t)}function WH(t,e,r){var n=N4(S0++,2);if(n.t=t,!n.__c&&(n.__=[B4(void 0,e),function(a){var u=n.__N?n.__N[0]:n.__[0],l=n.t(u,a);u!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=cn,!cn.u)){var i=function(a,u,l){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(y){return!!y.__c});if(d.every(function(y){return!y.__N}))return!s||s.call(this,a,u,l);var p=n.__c.props!==a;return d.forEach(function(y){if(y.__N){var _=y.__[0];y.__=y.__N,y.__N=void 0,_!==y.__[0]&&(p=!0)}}),s&&s.call(this,a,u,l)||p};cn.u=!0;var s=cn.shouldComponentUpdate,o=cn.componentWillUpdate;cn.componentWillUpdate=function(a,u,l){if(this.__e){var d=s;s=void 0,i(a,u,l),s=d}o&&o.call(this,a,u,l)},cn.shouldComponentUpdate=i}return n.__N||n.__}function KH(t,e){var r=N4(S0++,3);!yn.__s&&YH(r.__H,e)&&(r.__=t,r.i=e,cn.__H.__h.push(r))}function VH(){for(var t;t=M4.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(A0),t.__H.__h.forEach(hv),t.__H.__h=[]}catch(e){t.__H.__h=[],yn.__e(e,t.__v)}}yn.__b=function(t){cn=null,I4&&I4(t)},yn.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),O4&&O4(t,e)},yn.__r=function(t){C4&&C4(t),S0=0;var e=(cn=t.__c).__H;e&&(fv===cn?(e.__h=[],cn.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.i=r.__N=void 0})):(e.__h.forEach(A0),e.__h.forEach(hv),e.__h=[],S0=0)),fv=cn},yn.diffed=function(t){T4&&T4(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(M4.push(e)!==1&&P4===yn.requestAnimationFrame||((P4=yn.requestAnimationFrame)||GH)(VH)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.i=void 0})),fv=cn=null},yn.__c=function(t,e){e.some(function(r){try{r.__h.forEach(A0),r.__h=r.__h.filter(function(n){return!n.__||hv(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],yn.__e(n,r.__v)}}),R4&&R4(t,e)},yn.unmount=function(t){D4&&D4(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{A0(n)}catch(i){e=i}}),r.__H=void 0,e&&yn.__e(e,r.__v))};var k4=typeof requestAnimationFrame=="function";function GH(t){var e,r=function(){clearTimeout(n),k4&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);k4&&(e=requestAnimationFrame(r))}function A0(t){var e=cn,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),cn=e}function hv(t){var e=cn;t.__c=t.__(),cn=e}function YH(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function B4(t,e){return typeof e=="function"?e(t):e}const JH=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}",XH="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",ZH="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class QH{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=f4()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){const r=this.nextItemKey++;return this.items.set(r,e),this.render(),()=>{this.items.delete(r),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&uv(Or("div",null,Or($4,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,r])=>Or(eW,Object.assign({},r,{key:e}))))),this.root)}}const $4=t=>Or("div",{class:ql("-cbwsdk-snackbar-container")},Or("style",null,JH),Or("div",{class:"-cbwsdk-snackbar"},t.children)),eW=({autoExpand:t,message:e,menuItems:r})=>{const[n,i]=L4(!0),[s,o]=L4(t??!1);KH(()=>{const u=[window.setTimeout(()=>{i(!1)},1),window.setTimeout(()=>{o(!0)},1e4)];return()=>{u.forEach(window.clearTimeout)}});const a=()=>{o(!s)};return Or("div",{class:ql("-cbwsdk-snackbar-instance",n&&"-cbwsdk-snackbar-instance-hidden",s&&"-cbwsdk-snackbar-instance-expanded")},Or("div",{class:"-cbwsdk-snackbar-instance-header",onClick:a},Or("img",{src:XH,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",Or("div",{class:"-cbwsdk-snackbar-instance-header-message"},e),Or("div",{class:"-gear-container"},!s&&Or("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Or("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),Or("img",{src:ZH,class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&Or("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map((u,l)=>Or("div",{class:ql("-cbwsdk-snackbar-instance-menu-item",u.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:u.onClick,key:l},Or("svg",{width:u.svgWidth,height:u.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Or("path",{"fill-rule":u.defaultFillRule,"clip-rule":u.defaultClipRule,d:u.path,fill:"#AAAAAA"})),Or("span",{class:ql("-cbwsdk-snackbar-instance-menu-item-info",u.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},u.info)))))};class tW{constructor(){this.attached=!1,this.snackbar=new QH}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",e.appendChild(r),this.snackbar.attach(r),this.attached=!0,l4()}showConnecting(e){let r;return e.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:r={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(r)}}const rW=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";class nW{constructor(){this.root=null,this.darkMode=f4()}attach(){const e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),l4()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&(uv(null,this.root),e&&uv(Or(iW,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}const iW=({title:t,buttonText:e,darkMode:r,onButtonClick:n,onDismiss:i})=>{const s=r?"dark":"light";return Or($4,{darkMode:r},Or("div",{class:"-cbwsdk-redirect-dialog"},Or("style",null,rW),Or("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),Or("div",{class:ql("-cbwsdk-redirect-dialog-box",s)},Or("p",null,t),Or("button",{onClick:n},e))))},sW="https://keys.coinbase.com/connect",F4="https://www.walletlink.org",oW="https://go.cb-w.com/walletlink";class j4{constructor(){this.attached=!1,this.redirectDialog=new nW}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){const r=new URL(oW);r.searchParams.append("redirect_url",BH().href),e&&r.searchParams.append("wl_url",e);const n=document.createElement("a");n.target="cbw-opener",n.href=r.href,n.rel="noreferrer noopener",n.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}}class Ro{constructor(e){this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=$H(),this.linkedUpdated=s=>{this.isLinked=s;const o=this.storage.getItem(ev);if(s&&(this._session.linked=s),this.isUnlinkedErrorState=!1,o){const a=o.split(" "),u=this.storage.getItem("IsStandaloneSigning")==="true";a[0]!==""&&!s&&this._session.linked&&!u&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(s,o)=>{this.storage.setItem(s,o)},this.chainUpdated=(s,o)=>{this.chainCallbackParams.chainId===s&&this.chainCallbackParams.jsonRpcUrl===o||(this.chainCallbackParams={chainId:s,jsonRpcUrl:o},this.chainCallback&&this.chainCallback(o,Number.parseInt(s,10)))},this.accountUpdated=s=>{this.accountsCallback&&this.accountsCallback([s]),Ro.accountRequestCallbackIds.size>0&&(Array.from(Ro.accountRequestCallbackIds.values()).forEach(o=>{this.invokeCallback(o,{method:"requestEthereumAccounts",result:[s]})}),Ro.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.metadata=e.metadata,this.accountsCallback=e.accountsCallback,this.chainCallback=e.chainCallback;const{session:r,ui:n,connection:i}=this.subscribe();this._session=r,this.connection=i,this.relayEventManager=new LH,this.ui=n,this.ui.attach()}subscribe(){const e=Du.load(this.storage)||Du.create(this.storage),{linkAPIUrl:r}=this,n=new NH({session:e,linkAPIUrl:r,listener:this}),i=this.isMobileWeb?new j4:new tW;return n.connect(),{session:e,ui:i,connection:n}}resetAndReload(){this.connection.destroy().then(()=>{const e=Du.load(this.storage);(e==null?void 0:e.id)===this._session.id&&Qs.clearAll(),document.location.reload()}).catch(e=>{})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:eo(e.weiValue),data:Bl(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?eo(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?eo(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?eo(e.gasPriceInWei):null,gasLimit:e.gasLimit?eo(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:eo(e.weiValue),data:Bl(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?eo(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?eo(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?eo(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?eo(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,r){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:Bl(e,!0),chainId:r}})}getWalletLinkSession(){return this._session}sendRequest(e){let r=null;const n=vc(8),i=s=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,e.method,s),r==null||r()};return new Promise((s,o)=>{r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(n,a=>{if(r==null||r(),Un(a))return o(new Error(a.errorMessage));s(a)}),this.publishWeb3RequestEvent(n,e)})}publishWeb3RequestEvent(e,r){const n={type:"WEB3_REQUEST",id:e,request:r};this.publishEvent("Web3Request",n,!0).then(i=>{}).catch(i=>{this.handleWeb3ResponseMessage(n.id,{method:r.method,errorMessage:i.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(r.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof j4)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(e){const r={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",r,!1).then()}publishEvent(e,r,n){return this.connection.publishEvent(e,r,n)}handleWeb3ResponseMessage(e,r){if(r.method==="requestEthereumAccounts"){Ro.accountRequestCallbackIds.forEach(n=>this.invokeCallback(n,r)),Ro.accountRequestCallbackIds.clear();return}this.invokeCallback(e,r)}handleErrorResponse(e,r,n){var i;const s=(i=n==null?void 0:n.message)!==null&&i!==void 0?i:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:r,errorMessage:s})}invokeCallback(e,r){const n=this.relayEventManager.callbacks.get(e);n&&(n(r),this.relayEventManager.callbacks.delete(e))}requestEthereumAccounts(){const{appName:e,appLogoUrl:r}=this.metadata,n={method:"requestEthereumAccounts",params:{appName:e,appLogoUrl:r}},i=vc(8);return new Promise((s,o)=>{this.relayEventManager.callbacks.set(i,a=>{if(Un(a))return o(new Error(a.errorMessage));s(a)}),Ro.accountRequestCallbackIds.add(i),this.publishWeb3RequestEvent(i,n)})}watchAsset(e,r,n,i,s,o){const a={method:"watchAsset",params:{type:e,options:{address:r,symbol:n,decimals:i,image:s},chainId:o}};let u=null;const l=vc(8),d=p=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,p),u==null||u()};return u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}),new Promise((p,y)=>{this.relayEventManager.callbacks.set(l,_=>{if(u==null||u(),Un(_))return y(new Error(_.errorMessage));p(_)}),this.publishWeb3RequestEvent(l,a)})}addEthereumChain(e,r,n,i,s,o){const a={method:"addEthereumChain",params:{chainId:e,rpcUrls:r,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:o}};let u=null;const l=vc(8),d=p=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,a.method,p),u==null||u()};return u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}),new Promise((p,y)=>{this.relayEventManager.callbacks.set(l,_=>{if(u==null||u(),Un(_))return y(new Error(_.errorMessage));p(_)}),this.publishWeb3RequestEvent(l,a)})}switchEthereumChain(e,r){const n={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:r})};let i=null;const s=vc(8),o=a=>{this.publishWeb3RequestCanceledEvent(s),this.handleErrorResponse(s,n.method,a),i==null||i()};return i=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:o,onResetConnection:this.resetAndReload}),new Promise((a,u)=>{this.relayEventManager.callbacks.set(s,l=>{if(i==null||i(),Un(l)&&l.errorCode)return u(Ar.provider.custom({code:l.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(Un(l))return u(new Error(l.errorMessage));a(l)}),this.publishWeb3RequestEvent(s,n)})}}Ro.accountRequestCallbackIds=new Set;const U4="DefaultChainId",q4="DefaultJsonRpcUrl";class z4{constructor(e){this._relay=null,this._addresses=[],this.metadata=e.metadata,this._storage=new Qs("walletlink",F4),this.callback=e.callback||null;const r=this._storage.getItem(ev);if(r){const n=r.split(" ");n[0]!==""&&(this._addresses=n.map(i=>ya(i)))}this.initializeRelay()}getSession(){const e=this.initializeRelay(),{id:r,secret:n}=e.getWalletLinkSession();return{id:r,secret:n}}async handshake(){await this._eth_requestAccounts()}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(q4))!==null&&e!==void 0?e:void 0}set jsonRpcUrl(e){this._storage.setItem(q4,e)}updateProviderInfo(e,r){var n;this.jsonRpcUrl=e;const i=this.getChainId();this._storage.setItem(U4,r.toString(10)),$l(r)!==i&&((n=this.callback)===null||n===void 0||n.call(this,"chainChanged",ba(r)))}async watchAsset(e){const r=Array.isArray(e)?e[0]:e;if(!r.type)throw Ar.rpc.invalidParams("Type is required");if((r==null?void 0:r.type)!=="ERC20")throw Ar.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);if(!(r!=null&&r.options))throw Ar.rpc.invalidParams("Options are required");if(!(r!=null&&r.options.address))throw Ar.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:i,symbol:s,image:o,decimals:a}=r.options,l=await this.initializeRelay().watchAsset(r.type,i,s,a,o,n==null?void 0:n.toString());return Un(l)?!1:!!l.result}async addEthereumChain(e){var r,n;const i=e[0];if(((r=i.rpcUrls)===null||r===void 0?void 0:r.length)===0)throw Ar.rpc.invalidParams("please pass in at least 1 rpcUrl");if(!i.chainName||i.chainName.trim()==="")throw Ar.rpc.invalidParams("chainName is a required field");if(!i.nativeCurrency)throw Ar.rpc.invalidParams("nativeCurrency is a required field");const s=Number.parseInt(i.chainId,16);if(s===this.getChainId())return!1;const o=this.initializeRelay(),{rpcUrls:a=[],blockExplorerUrls:u=[],chainName:l,iconUrls:d=[],nativeCurrency:p}=i,y=await o.addEthereumChain(s.toString(),a,d,u,l,p);if(Un(y))return!1;if(((n=y.result)===null||n===void 0?void 0:n.isApproved)===!0)return this.updateProviderInfo(a[0],s),null;throw Ar.rpc.internal("unable to add ethereum chain")}async switchEthereumChain(e){const r=e[0],n=Number.parseInt(r.chainId,16),s=await this.initializeRelay().switchEthereumChain(n.toString(10),this.selectedAddress||void 0);if(Un(s))throw s;const o=s.result;return o.isApproved&&o.rpcUrl.length>0&&this.updateProviderInfo(o.rpcUrl,n),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(e,r){var n;if(!Array.isArray(e))throw new Error("addresses is not an array");const i=e.map(s=>ya(s));JSON.stringify(i)!==JSON.stringify(this._addresses)&&(this._addresses=i,(n=this.callback)===null||n===void 0||n.call(this,"accountsChanged",i),this._storage.setItem(ev,i.join(" ")))}async request(e){const r=e.params||[];switch(e.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return ba(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(e);case"personal_sign":return this.personalSign(e);case"eth_signTransaction":return this._eth_signTransaction(r);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(r);case"eth_sendTransaction":return this._eth_sendTransaction(r);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(e);case"wallet_addEthereumChain":return this.addEthereumChain(r);case"wallet_switchEthereumChain":return this.switchEthereumChain(r);case"wallet_watchAsset":return this.watchAsset(r);default:if(!this.jsonRpcUrl)throw Ar.rpc.internal("No RPC URL set for chain");return H5(e,this.jsonRpcUrl)}}_ensureKnownAddress(e){const r=ya(e);if(!this._addresses.map(i=>ya(i)).includes(r))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const r=e.from?ya(e.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=e.to?ya(e.to):null,i=e.value!=null?Fl(e.value):BigInt(0),s=e.data?Y1(e.data):Buffer.alloc(0),o=e.nonce!=null?$l(e.nonce):null,a=e.gasPrice!=null?Fl(e.gasPrice):null,u=e.maxFeePerGas!=null?Fl(e.maxFeePerGas):null,l=e.maxPriorityFeePerGas!=null?Fl(e.maxPriorityFeePerGas):null,d=e.gas!=null?Fl(e.gas):null,p=e.chainId?$l(e.chainId):this.getChainId();return{fromAddress:r,toAddress:n,weiValue:i,data:s,nonce:o,gasPriceInWei:a,maxFeePerGas:u,maxPriorityFeePerGas:l,gasLimit:d,chainId:p}}async ecRecover(e){const{method:r,params:n}=e;if(!Array.isArray(n))throw Ar.rpc.invalidParams();const s=await this.initializeRelay().sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:K1(n[0]),signature:K1(n[1]),addPrefix:r==="personal_ecRecover"}});if(Un(s))throw s;return s.result}getChainId(){var e;return Number.parseInt((e=this._storage.getItem(U4))!==null&&e!==void 0?e:"1",10)}async _eth_requestAccounts(){var e,r;if(this._addresses.length>0)return(e=this.callback)===null||e===void 0||e.call(this,"connect",{chainId:ba(this.getChainId())}),this._addresses;const i=await this.initializeRelay().requestEthereumAccounts();if(Un(i))throw i;if(!i.result)throw new Error("accounts received is empty");return this._setAddresses(i.result),(r=this.callback)===null||r===void 0||r.call(this,"connect",{chainId:ba(this.getChainId())}),this._addresses}async personalSign({params:e}){if(!Array.isArray(e))throw Ar.rpc.invalidParams();const r=e[1],n=e[0];this._ensureKnownAddress(r);const s=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:ya(r),message:K1(n),addPrefix:!0,typedDataJson:null}});if(Un(s))throw s;return s.result}async _eth_signTransaction(e){const r=this._prepareTransactionParams(e[0]||{}),i=await this.initializeRelay().signEthereumTransaction(r);if(Un(i))throw i;return i.result}async _eth_sendRawTransaction(e){const r=Y1(e[0]),i=await this.initializeRelay().submitEthereumTransaction(r,this.getChainId());if(Un(i))throw i;return i.result}async _eth_sendTransaction(e){const r=this._prepareTransactionParams(e[0]||{}),i=await this.initializeRelay().signAndSubmitEthereumTransaction(r);if(Un(i))throw i;return i.result}async signTypedData(e){const{method:r,params:n}=e;if(!Array.isArray(n))throw Ar.rpc.invalidParams();const i=l=>{const d={eth_signTypedData_v1:b0.hashForSignTypedDataLegacy,eth_signTypedData_v3:b0.hashForSignTypedData_v3,eth_signTypedData_v4:b0.hashForSignTypedData_v4,eth_signTypedData:b0.hashForSignTypedData_v4};return Bl(d[r]({data:Qz(l)}),!0)},s=n[r==="eth_signTypedData_v1"?1:0],o=n[r==="eth_signTypedData_v1"?0:1];this._ensureKnownAddress(s);const u=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:ya(s),message:i(o),typedDataJson:JSON.stringify(o,null,2),addPrefix:!1}});if(Un(u))throw u;return u.result}initializeRelay(){return this._relay||(this._relay=new Ro({linkAPIUrl:F4,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}const H4="SignerType",W4=new Qs("CBWSDK","SignerConfigurator");function aW(){return W4.getItem(H4)}function cW(t){W4.setItem(H4,t)}async function uW(t){const{communicator:e,metadata:r,handshakeRequest:n,callback:i}=t;lW(e,r,i).catch(()=>{});const s={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},t.preference),{handshakeRequest:n})},{data:o}=await e.postRequestAndWaitForResponse(s);return o}function fW(t){const{signerType:e,metadata:r,communicator:n,callback:i}=t;switch(e){case"scw":return new hH({metadata:r,callback:i,communicator:n});case"walletlink":return new z4({metadata:r,callback:i})}}async function lW(t,e,r){await t.onMessage(({event:i})=>i==="WalletLinkSessionRequest");const n=new z4({metadata:e,callback:r});t.postMessage({event:"WalletLinkUpdate",data:{session:n.getSession()}}),await n.handshake(),t.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}const hW=`Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`,dW=()=>{let t;return{getCrossOriginOpenerPolicy:()=>t===void 0?"undefined":t,checkCrossOriginOpenerPolicy:async()=>{if(typeof window>"u"){t="non-browser-env";return}try{const e=`${window.location.origin}${window.location.pathname}`,r=await fetch(e,{method:"HEAD"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=r.headers.get("Cross-Origin-Opener-Policy");t=n??"null",t==="same-origin"&&console.error(hW)}catch(e){console.error("Error checking Cross-Origin-Opener-Policy:",e.message),t="error"}}}},{checkCrossOriginOpenerPolicy:pW,getCrossOriginOpenerPolicy:gW}=dW(),K4=420,V4=540;function mW(t){const e=(window.innerWidth-K4)/2+window.screenX,r=(window.innerHeight-V4)/2+window.screenY;bW(t);const n=window.open(t,"Smart Wallet",`width=${K4}, height=${V4}, left=${e}, top=${r}`);if(n==null||n.focus(),!n)throw Ar.rpc.internal("Pop up window failed to open");return n}function vW(t){t&&!t.closed&&t.close()}function bW(t){const e={sdkName:z5,sdkVersion:jl,origin:window.location.origin,coop:gW()};for(const[r,n]of Object.entries(e))t.searchParams.append(r,n.toString())}class yW{constructor({url:e=sW,metadata:r,preference:n}){this.popup=null,this.listeners=new Map,this.postMessage=async i=>{(await this.waitForPopupLoaded()).postMessage(i,this.url.origin)},this.postRequestAndWaitForResponse=async i=>{const s=this.onMessage(({requestId:o})=>o===i.id);return this.postMessage(i),await s},this.onMessage=async i=>new Promise((s,o)=>{const a=u=>{if(u.origin!==this.url.origin)return;const l=u.data;i(l)&&(s(l),window.removeEventListener("message",a),this.listeners.delete(a))};window.addEventListener("message",a),this.listeners.set(a,{reject:o})}),this.disconnect=()=>{vW(this.popup),this.popup=null,this.listeners.forEach(({reject:i},s)=>{i(Ar.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",s)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=mW(this.url),this.onMessage(({event:i})=>i==="PopupUnload").then(this.disconnect).catch(()=>{}),this.onMessage(({event:i})=>i==="PopupLoaded").then(i=>{this.postMessage({requestId:i.id,data:{version:jl,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw Ar.rpc.internal();return this.popup})),this.url=new URL(e),this.metadata=r,this.preference=n}}function wW(t){const e=Gz(xW(t),{shouldIncludeStack:!0}),r=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return r.searchParams.set("version",jl),r.searchParams.set("code",e.code.toString()),r.searchParams.set("message",e.message),Object.assign(Object.assign({},e),{docUrl:r.href})}function xW(t){var e;if(typeof t=="string")return{message:t,code:an.rpc.internal};if(Un(t)){const r=t.errorMessage,n=(e=t.errorCode)!==null&&e!==void 0?e:r.match(/(denied|rejected)/i)?an.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},t),{message:r,code:n,data:{method:t.method}})}return t}var G4={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,d){this.fn=u,this.context=l,this.once=d||!1}function s(u,l,d,p,y){if(typeof d!="function")throw new TypeError("The listener must be a function");var _=new i(d,p||u,y),M=r?r+l:l;return u._events[M]?u._events[M].fn?u._events[M]=[u._events[M],_]:u._events[M].push(_):(u._events[M]=_,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],d,p;if(this._eventsCount===0)return l;for(p in d=this._events)e.call(d,p)&&l.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},a.prototype.listeners=function(l){var d=r?r+l:l,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,_=p.length,M=new Array(_);y<_;y++)M[y]=p[y].fn;return M},a.prototype.listenerCount=function(l){var d=r?r+l:l,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(l,d,p,y,_,M){var O=r?r+l:l;if(!this._events[O])return!1;var L=this._events[O],B=arguments.length,k,H;if(L.fn){switch(L.once&&this.removeListener(l,L.fn,void 0,!0),B){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,d),!0;case 3:return L.fn.call(L.context,d,p),!0;case 4:return L.fn.call(L.context,d,p,y),!0;case 5:return L.fn.call(L.context,d,p,y,_),!0;case 6:return L.fn.call(L.context,d,p,y,_,M),!0}for(H=1,k=new Array(B-1);H<B;H++)k[H-1]=arguments[H];L.fn.apply(L.context,k)}else{var U=L.length,z;for(H=0;H<U;H++)switch(L[H].once&&this.removeListener(l,L[H].fn,void 0,!0),B){case 1:L[H].fn.call(L[H].context);break;case 2:L[H].fn.call(L[H].context,d);break;case 3:L[H].fn.call(L[H].context,d,p);break;case 4:L[H].fn.call(L[H].context,d,p,y);break;default:if(!k)for(z=1,k=new Array(B-1);z<B;z++)k[z-1]=arguments[z];L[H].fn.apply(L[H].context,k)}}return!0},a.prototype.on=function(l,d,p){return s(this,l,d,p,!1)},a.prototype.once=function(l,d,p){return s(this,l,d,p,!0)},a.prototype.removeListener=function(l,d,p,y){var _=r?r+l:l;if(!this._events[_])return this;if(!d)return o(this,_),this;var M=this._events[_];if(M.fn)M.fn===d&&(!y||M.once)&&(!p||M.context===p)&&o(this,_);else{for(var O=0,L=[],B=M.length;O<B;O++)(M[O].fn!==d||y&&!M[O].once||p&&M[O].context!==p)&&L.push(M[O]);L.length?this._events[_]=L.length===1?L[0]:L:o(this,_)}return this},a.prototype.removeAllListeners=function(l){var d;return l?(d=r?r+l:l,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(G4);var _W=G4.exports;const EW=ji(_W);class SW extends EW{}var AW=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class PW extends SW{constructor(e){var{metadata:r}=e,n=e.preference,{keysUrl:i}=n,s=AW(n,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=r,this.preference=s,this.communicator=new yW({url:i,metadata:r,preference:s});const o=aW();o&&(this.signer=this.initSigner(o))}async request(e){try{if(lH(e),!this.signer)switch(e.method){case"eth_requestAccounts":{const r=await this.requestSignerSelection(e),n=this.initSigner(r);await n.handshake(e),this.signer=n,cW(r);break}case"net_version":return 1;case"eth_chainId":return ba(1);default:throw Ar.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return this.signer.request(e)}catch(r){const{code:n}=r;return n===an.provider.unauthorized&&this.disconnect(),Promise.reject(wW(r))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){var e;await((e=this.signer)===null||e===void 0?void 0:e.cleanup()),this.signer=null,Qs.clearAll(),this.emit("disconnect",Ar.provider.disconnected("User initiated disconnection"))}requestSignerSelection(e){return uW({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:e,callback:this.emit.bind(this)})}initSigner(e){return fW({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}function MW(t){if(t){if(!["all","smartWalletOnly","eoaOnly"].includes(t.options))throw new Error(`Invalid options: ${t.options}`);if(t.attribution&&t.attribution.auto!==void 0&&t.attribution.dataSuffix!==void 0)throw new Error("Attribution cannot contain both auto and dataSuffix properties")}}function IW(t){var e;const r={metadata:t.metadata,preference:t.preference};return(e=fH(r))!==null&&e!==void 0?e:new PW(r)}const CW={options:"all"};function TW(t){var e;new Qs("CBWSDK").setItem("VERSION",jl),pW();const n={metadata:{appName:t.appName||"Dapp",appLogoUrl:t.appLogoUrl||"",appChainIds:t.appChainIds||[]},preference:Object.assign(CW,(e=t.preference)!==null&&e!==void 0?e:{})};MW(n.preference);let i=null;return{getProvider:()=>(i||(i=IW(n)),i)}}function Y4(t,e){return function(){return t.apply(e,arguments)}}const{toString:RW}=Object.prototype,{getPrototypeOf:dv}=Object,P0=(t=>e=>{const r=RW.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ps=t=>(t=t.toLowerCase(),e=>P0(e)===t),M0=t=>e=>typeof e===t,{isArray:Nu}=Array,Wl=M0("undefined");function DW(t){return t!==null&&!Wl(t)&&t.constructor!==null&&!Wl(t.constructor)&&Oi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const J4=Ps("ArrayBuffer");function OW(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&J4(t.buffer),e}const NW=M0("string"),Oi=M0("function"),X4=M0("number"),I0=t=>t!==null&&typeof t=="object",LW=t=>t===!0||t===!1,C0=t=>{if(P0(t)!=="object")return!1;const e=dv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},kW=Ps("Date"),BW=Ps("File"),$W=Ps("Blob"),FW=Ps("FileList"),jW=t=>I0(t)&&Oi(t.pipe),UW=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Oi(t.append)&&((e=P0(t))==="formdata"||e==="object"&&Oi(t.toString)&&t.toString()==="[object FormData]"))},qW=Ps("URLSearchParams"),[zW,HW,WW,KW]=["ReadableStream","Request","Response","Headers"].map(Ps),VW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Kl(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Nu(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function Z4(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Q4=t=>!Wl(t)&&t!==wc;function pv(){const{caseless:t}=Q4(this)&&this||{},e={},r=(n,i)=>{const s=t&&Z4(e,i)||i;C0(e[s])&&C0(n)?e[s]=pv(e[s],n):C0(n)?e[s]=pv({},n):Nu(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Kl(arguments[n],r);return e}const GW=(t,e,r,{allOwnKeys:n}={})=>(Kl(e,(i,s)=>{r&&Oi(i)?t[s]=Y4(i,r):t[s]=i},{allOwnKeys:n}),t),YW=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),JW=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},XW=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&dv(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},ZW=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},QW=t=>{if(!t)return null;if(Nu(t))return t;let e=t.length;if(!X4(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},eK=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&dv(Uint8Array)),tK=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},rK=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},nK=Ps("HTMLFormElement"),iK=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),e8=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),sK=Ps("RegExp"),t8=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Kl(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},oK=t=>{t8(t,(e,r)=>{if(Oi(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Oi(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},aK=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Nu(t)?n(t):n(String(t).split(e)),r},cK=()=>{},uK=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,gv="abcdefghijklmnopqrstuvwxyz",r8="0123456789",n8={DIGIT:r8,ALPHA:gv,ALPHA_DIGIT:gv+gv.toUpperCase()+r8},fK=(t=16,e=n8.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function lK(t){return!!(t&&Oi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const hK=t=>{const e=new Array(10),r=(n,i)=>{if(I0(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Nu(n)?[]:{};return Kl(n,(o,a)=>{const u=r(o,i+1);!Wl(u)&&(s[a]=u)}),e[i]=void 0,s}}return n};return r(t,0)},dK=Ps("AsyncFunction"),pK=t=>t&&(I0(t)||Oi(t))&&Oi(t.then)&&Oi(t.catch),i8=((t,e)=>t?setImmediate:e?((r,n)=>(wc.addEventListener("message",({source:i,data:s})=>{i===wc&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),wc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Oi(wc.postMessage)),gK=typeof queueMicrotask<"u"?queueMicrotask.bind(wc):typeof process<"u"&&process.nextTick||i8,Oe={isArray:Nu,isArrayBuffer:J4,isBuffer:DW,isFormData:UW,isArrayBufferView:OW,isString:NW,isNumber:X4,isBoolean:LW,isObject:I0,isPlainObject:C0,isReadableStream:zW,isRequest:HW,isResponse:WW,isHeaders:KW,isUndefined:Wl,isDate:kW,isFile:BW,isBlob:$W,isRegExp:sK,isFunction:Oi,isStream:jW,isURLSearchParams:qW,isTypedArray:eK,isFileList:FW,forEach:Kl,merge:pv,extend:GW,trim:VW,stripBOM:YW,inherits:JW,toFlatObject:XW,kindOf:P0,kindOfTest:Ps,endsWith:ZW,toArray:QW,forEachEntry:tK,matchAll:rK,isHTMLForm:nK,hasOwnProperty:e8,hasOwnProp:e8,reduceDescriptors:t8,freezeMethods:oK,toObjectSet:aK,toCamelCase:iK,noop:cK,toFiniteNumber:uK,findKey:Z4,global:wc,isContextDefined:Q4,ALPHABET:n8,generateString:fK,isSpecCompliantForm:lK,toJSONObject:hK,isAsyncFn:dK,isThenable:pK,setImmediate:i8,asap:gK};function ar(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Oe.inherits(ar,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oe.toJSONObject(this.config),code:this.code,status:this.status}}});const s8=ar.prototype,o8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{o8[t]={value:t}}),Object.defineProperties(ar,o8),Object.defineProperty(s8,"isAxiosError",{value:!0}),ar.from=(t,e,r,n,i,s)=>{const o=Object.create(s8);return Oe.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),ar.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const mK=null;function mv(t){return Oe.isPlainObject(t)||Oe.isArray(t)}function a8(t){return Oe.endsWith(t,"[]")?t.slice(0,-2):t}function c8(t,e,r){return t?t.concat(e).map(function(i,s){return i=a8(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function vK(t){return Oe.isArray(t)&&!t.some(mv)}const bK=Oe.toFlatObject(Oe,{},null,function(e){return/^is[A-Z]/.test(e)});function T0(t,e,r){if(!Oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Oe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,L){return!Oe.isUndefined(L[O])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&Oe.isSpecCompliantForm(e);if(!Oe.isFunction(i))throw new TypeError("visitor must be a function");function l(M){if(M===null)return"";if(Oe.isDate(M))return M.toISOString();if(!u&&Oe.isBlob(M))throw new ar("Blob is not supported. Use a Buffer instead.");return Oe.isArrayBuffer(M)||Oe.isTypedArray(M)?u&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function d(M,O,L){let B=M;if(M&&!L&&typeof M=="object"){if(Oe.endsWith(O,"{}"))O=n?O:O.slice(0,-2),M=JSON.stringify(M);else if(Oe.isArray(M)&&vK(M)||(Oe.isFileList(M)||Oe.endsWith(O,"[]"))&&(B=Oe.toArray(M)))return O=a8(O),B.forEach(function(H,U){!(Oe.isUndefined(H)||H===null)&&e.append(o===!0?c8([O],U,s):o===null?O:O+"[]",l(H))}),!1}return mv(M)?!0:(e.append(c8(L,O,s),l(M)),!1)}const p=[],y=Object.assign(bK,{defaultVisitor:d,convertValue:l,isVisitable:mv});function _(M,O){if(!Oe.isUndefined(M)){if(p.indexOf(M)!==-1)throw Error("Circular reference detected in "+O.join("."));p.push(M),Oe.forEach(M,function(B,k){(!(Oe.isUndefined(B)||B===null)&&i.call(e,B,Oe.isString(k)?k.trim():k,O,y))===!0&&_(B,O?O.concat(k):[k])}),p.pop()}}if(!Oe.isObject(t))throw new TypeError("data must be an object");return _(t),e}function u8(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function vv(t,e){this._pairs=[],t&&T0(t,this,e)}const f8=vv.prototype;f8.append=function(e,r){this._pairs.push([e,r])},f8.toString=function(e){const r=e?function(n){return e.call(this,n,u8)}:u8;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function yK(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function l8(t,e,r){if(!e)return t;const n=r&&r.encode||yK;Oe.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=Oe.isURLSearchParams(e)?e.toString():new vv(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class h8{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Oe.forEach(this.handlers,function(n){n!==null&&e(n)})}}const d8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wK={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:vv,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},bv=typeof window<"u"&&typeof document<"u",yv=typeof navigator=="object"&&navigator||void 0,xK=bv&&(!yv||["ReactNative","NativeScript","NS"].indexOf(yv.product)<0),_K=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",EK=bv&&window.location.href||"http://localhost",Yn={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bv,hasStandardBrowserEnv:xK,hasStandardBrowserWebWorkerEnv:_K,navigator:yv,origin:EK},Symbol.toStringTag,{value:"Module"})),...wK};function SK(t,e){return T0(t,new Yn.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return Yn.isNode&&Oe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function AK(t){return Oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function PK(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function p8(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=r.length;return o=!o&&Oe.isArray(i)?i.length:o,u?(Oe.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!Oe.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&Oe.isArray(i[o])&&(i[o]=PK(i[o])),!a)}if(Oe.isFormData(t)&&Oe.isFunction(t.entries)){const r={};return Oe.forEachEntry(t,(n,i)=>{e(AK(n),i,r,0)}),r}return null}function MK(t,e,r){if(Oe.isString(t))try{return(e||JSON.parse)(t),Oe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Vl={transitional:d8,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=Oe.isObject(e);if(s&&Oe.isHTMLForm(e)&&(e=new FormData(e)),Oe.isFormData(e))return i?JSON.stringify(p8(e)):e;if(Oe.isArrayBuffer(e)||Oe.isBuffer(e)||Oe.isStream(e)||Oe.isFile(e)||Oe.isBlob(e)||Oe.isReadableStream(e))return e;if(Oe.isArrayBufferView(e))return e.buffer;if(Oe.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return SK(e,this.formSerializer).toString();if((a=Oe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return T0(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),MK(e)):e}],transformResponse:[function(e){const r=this.transitional||Vl.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Oe.isResponse(e)||Oe.isReadableStream(e))return e;if(e&&Oe.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ar.from(a,ar.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yn.classes.FormData,Blob:Yn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Oe.forEach(["delete","get","head","post","put","patch"],t=>{Vl.headers[t]={}});const IK=Oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),CK=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&IK[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},g8=Symbol("internals");function Gl(t){return t&&String(t).trim().toLowerCase()}function R0(t){return t===!1||t==null?t:Oe.isArray(t)?t.map(R0):String(t)}function TK(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const RK=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wv(t,e,r,n,i){if(Oe.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!Oe.isString(e)){if(Oe.isString(n))return e.indexOf(n)!==-1;if(Oe.isRegExp(n))return n.test(e)}}function DK(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function OK(t,e){const r=Oe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let yi=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,u,l){const d=Gl(u);if(!d)throw new Error("header name must be a non-empty string");const p=Oe.findKey(i,d);(!p||i[p]===void 0||l===!0||l===void 0&&i[p]!==!1)&&(i[p||u]=R0(a))}const o=(a,u)=>Oe.forEach(a,(l,d)=>s(l,d,u));if(Oe.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(Oe.isString(e)&&(e=e.trim())&&!RK(e))o(CK(e),r);else if(Oe.isHeaders(e))for(const[a,u]of e.entries())s(u,a,n);else e!=null&&s(r,e,n);return this}get(e,r){if(e=Gl(e),e){const n=Oe.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return TK(i);if(Oe.isFunction(r))return r.call(this,i,n);if(Oe.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Gl(e),e){const n=Oe.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||wv(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Gl(o),o){const a=Oe.findKey(n,o);a&&(!r||wv(n,n[a],a,r))&&(delete n[a],i=!0)}}return Oe.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||wv(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return Oe.forEach(this,(i,s)=>{const o=Oe.findKey(n,s);if(o){r[o]=R0(i),delete r[s];return}const a=e?DK(s):String(s).trim();a!==s&&delete r[s],r[a]=R0(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Oe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&Oe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[g8]=this[g8]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Gl(o);n[a]||(OK(i,o),n[a]=!0)}return Oe.isArray(e)?e.forEach(s):s(e),this}};yi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Oe.reduceDescriptors(yi.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}}),Oe.freezeMethods(yi);function xv(t,e){const r=this||Vl,n=e||r,i=yi.from(n.headers);let s=n.data;return Oe.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function m8(t){return!!(t&&t.__CANCEL__)}function Lu(t,e,r){ar.call(this,t??"canceled",ar.ERR_CANCELED,e,r),this.name="CanceledError"}Oe.inherits(Lu,ar,{__CANCEL__:!0});function v8(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ar("Request failed with status code "+r.status,[ar.ERR_BAD_REQUEST,ar.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function NK(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function LK(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),d=n[s];o||(o=l),r[i]=u,n[i]=l;let p=s,y=0;for(;p!==i;)y+=r[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-o<e)return;const _=d&&l-d;return _?Math.round(y*1e3/_):void 0}}function kK(t,e){let r=0,n=1e3/e,i,s;const o=(l,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,l)};return[(...l)=>{const d=Date.now(),p=d-r;p>=n?o(l,d):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},n-p)))},()=>i&&o(i)]}const D0=(t,e,r=3)=>{let n=0;const i=LK(50,250);return kK(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-n,l=i(u),d=o<=a;n=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:l||void 0,estimated:l&&a&&d?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},r)},b8=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},y8=t=>(...e)=>Oe.asap(()=>t(...e)),BK=Yn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Yn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Yn.origin),Yn.navigator&&/(msie|trident)/i.test(Yn.navigator.userAgent)):()=>!0,$K=Yn.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const o=[t+"="+encodeURIComponent(e)];Oe.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Oe.isString(n)&&o.push("path="+n),Oe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function FK(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function jK(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function w8(t,e){return t&&!FK(e)?jK(t,e):e}const x8=t=>t instanceof yi?{...t}:t;function xc(t,e){e=e||{};const r={};function n(l,d,p,y){return Oe.isPlainObject(l)&&Oe.isPlainObject(d)?Oe.merge.call({caseless:y},l,d):Oe.isPlainObject(d)?Oe.merge({},d):Oe.isArray(d)?d.slice():d}function i(l,d,p,y){if(Oe.isUndefined(d)){if(!Oe.isUndefined(l))return n(void 0,l,p,y)}else return n(l,d,p,y)}function s(l,d){if(!Oe.isUndefined(d))return n(void 0,d)}function o(l,d){if(Oe.isUndefined(d)){if(!Oe.isUndefined(l))return n(void 0,l)}else return n(void 0,d)}function a(l,d,p){if(p in e)return n(l,d);if(p in t)return n(void 0,l)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,d,p)=>i(x8(l),x8(d),p,!0)};return Oe.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=u[d]||i,y=p(t[d],e[d],d);Oe.isUndefined(y)&&p!==a||(r[d]=y)}),r}const _8=t=>{const e=xc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=yi.from(o),e.url=l8(w8(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(Oe.isFormData(r)){if(Yn.hasStandardBrowserEnv||Yn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[l,...d]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...d].join("; "))}}if(Yn.hasStandardBrowserEnv&&(n&&Oe.isFunction(n)&&(n=n(e)),n||n!==!1&&BK(e.url))){const l=i&&s&&$K.read(s);l&&o.set(i,l)}return e},UK=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,n){const i=_8(t);let s=i.data;const o=yi.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:l}=i,d,p,y,_,M;function O(){_&&_(),M&&M(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let L=new XMLHttpRequest;L.open(i.method.toUpperCase(),i.url,!0),L.timeout=i.timeout;function B(){if(!L)return;const H=yi.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),z={data:!a||a==="text"||a==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:H,config:t,request:L};v8(function(R){r(R),O()},function(R){n(R),O()},z),L=null}"onloadend"in L?L.onloadend=B:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(B)},L.onabort=function(){L&&(n(new ar("Request aborted",ar.ECONNABORTED,t,L)),L=null)},L.onerror=function(){n(new ar("Network Error",ar.ERR_NETWORK,t,L)),L=null},L.ontimeout=function(){let U=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const z=i.transitional||d8;i.timeoutErrorMessage&&(U=i.timeoutErrorMessage),n(new ar(U,z.clarifyTimeoutError?ar.ETIMEDOUT:ar.ECONNABORTED,t,L)),L=null},s===void 0&&o.setContentType(null),"setRequestHeader"in L&&Oe.forEach(o.toJSON(),function(U,z){L.setRequestHeader(z,U)}),Oe.isUndefined(i.withCredentials)||(L.withCredentials=!!i.withCredentials),a&&a!=="json"&&(L.responseType=i.responseType),l&&([y,M]=D0(l,!0),L.addEventListener("progress",y)),u&&L.upload&&([p,_]=D0(u),L.upload.addEventListener("progress",p),L.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(d=H=>{L&&(n(!H||H.type?new Lu(null,t,L):H),L.abort(),L=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const k=NK(i.url);if(k&&Yn.protocols.indexOf(k)===-1){n(new ar("Unsupported protocol "+k+":",ar.ERR_BAD_REQUEST,t));return}L.send(s||null)})},qK=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(l){if(!i){i=!0,a();const d=l instanceof Error?l:this.reason;n.abort(d instanceof ar?d:new Lu(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new ar(`timeout ${e} of ms exceeded`,ar.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),t=null)};t.forEach(l=>l.addEventListener("abort",s));const{signal:u}=n;return u.unsubscribe=()=>Oe.asap(a),u}},zK=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},HK=async function*(t,e){for await(const r of WK(t))yield*zK(r,e)},WK=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},E8=(t,e,r,n)=>{const i=HK(t,e);let s=0,o,a=u=>{o||(o=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:l,value:d}=await i.next();if(l){a(),u.close();return}let p=d.byteLength;if(r){let y=s+=p;r(y)}u.enqueue(new Uint8Array(d))}catch(l){throw a(l),l}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},O0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",S8=O0&&typeof ReadableStream=="function",KK=O0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),A8=(t,...e)=>{try{return!!t(...e)}catch{return!1}},VK=S8&&A8(()=>{let t=!1;const e=new Request(Yn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),P8=64*1024,_v=S8&&A8(()=>Oe.isReadableStream(new Response("").body)),N0={stream:_v&&(t=>t.body)};O0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!N0[e]&&(N0[e]=Oe.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new ar(`Response type '${e}' is not supported`,ar.ERR_NOT_SUPPORT,n)})})})(new Response);const GK=async t=>{if(t==null)return 0;if(Oe.isBlob(t))return t.size;if(Oe.isSpecCompliantForm(t))return(await new Request(Yn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Oe.isArrayBufferView(t)||Oe.isArrayBuffer(t))return t.byteLength;if(Oe.isURLSearchParams(t)&&(t=t+""),Oe.isString(t))return(await KK(t)).byteLength},YK=async(t,e)=>{const r=Oe.toFiniteNumber(t.getContentLength());return r??GK(e)},Ev={http:mK,xhr:UK,fetch:O0&&(async t=>{let{url:e,method:r,data:n,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:l,headers:d,withCredentials:p="same-origin",fetchOptions:y}=_8(t);l=l?(l+"").toLowerCase():"text";let _=qK([i,s&&s.toAbortSignal()],o),M;const O=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let L;try{if(u&&VK&&r!=="get"&&r!=="head"&&(L=await YK(d,n))!==0){let z=new Request(e,{method:"POST",body:n,duplex:"half"}),Z;if(Oe.isFormData(n)&&(Z=z.headers.get("content-type"))&&d.setContentType(Z),z.body){const[R,W]=b8(L,D0(y8(u)));n=E8(z.body,P8,R,W)}}Oe.isString(p)||(p=p?"include":"omit");const B="credentials"in Request.prototype;M=new Request(e,{...y,signal:_,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:B?p:void 0});let k=await fetch(M);const H=_v&&(l==="stream"||l==="response");if(_v&&(a||H&&O)){const z={};["status","statusText","headers"].forEach(ie=>{z[ie]=k[ie]});const Z=Oe.toFiniteNumber(k.headers.get("content-length")),[R,W]=a&&b8(Z,D0(y8(a),!0))||[];k=new Response(E8(k.body,P8,R,()=>{W&&W(),O&&O()}),z)}l=l||"text";let U=await N0[Oe.findKey(N0,l)||"text"](k,t);return!H&&O&&O(),await new Promise((z,Z)=>{v8(z,Z,{data:U,headers:yi.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:M})})}catch(B){throw O&&O(),B&&B.name==="TypeError"&&/fetch/i.test(B.message)?Object.assign(new ar("Network Error",ar.ERR_NETWORK,t,M),{cause:B.cause||B}):ar.from(B,B&&B.code,t,M)}})};Oe.forEach(Ev,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const M8=t=>`- ${t}`,JK=t=>Oe.isFunction(t)||t===null||t===!1,I8={getAdapter:t=>{t=Oe.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let o;if(n=r,!JK(r)&&(n=Ev[(o=String(r)).toLowerCase()],n===void 0))throw new ar(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){const s=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(M8).join(`
`):" "+M8(s[0]):"as no adapter specified";throw new ar("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Ev};function Sv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Lu(null,t)}function C8(t){return Sv(t),t.headers=yi.from(t.headers),t.data=xv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),I8.getAdapter(t.adapter||Vl.adapter)(t).then(function(n){return Sv(t),n.data=xv.call(t,t.transformResponse,n),n.headers=yi.from(n.headers),n},function(n){return m8(n)||(Sv(t),n&&n.response&&(n.response.data=xv.call(t,t.transformResponse,n.response),n.response.headers=yi.from(n.response.headers))),Promise.reject(n)})}const T8="1.7.8",L0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{L0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const R8={};L0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+T8+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new ar(i(o," has been removed"+(r?" in "+r:"")),ar.ERR_DEPRECATED);return r&&!R8[o]&&(R8[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}},L0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function XK(t,e,r){if(typeof t!="object")throw new ar("options must be an object",ar.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new ar("option "+s+" must be "+u,ar.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ar("Unknown option "+s,ar.ERR_BAD_OPTION)}}const k0={assertOptions:XK,validators:L0},ro=k0.validators;let _c=class{constructor(e){this.defaults=e,this.interceptors={request:new h8,response:new h8}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=xc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&k0.assertOptions(n,{silentJSONParsing:ro.transitional(ro.boolean),forcedJSONParsing:ro.transitional(ro.boolean),clarifyTimeoutError:ro.transitional(ro.boolean)},!1),i!=null&&(Oe.isFunction(i)?r.paramsSerializer={serialize:i}:k0.assertOptions(i,{encode:ro.function,serialize:ro.function},!0)),k0.assertOptions(r,{baseUrl:ro.spelling("baseURL"),withXsrfToken:ro.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&Oe.merge(s.common,s[r.method]);s&&Oe.forEach(["delete","get","head","post","put","patch","common"],M=>{delete s[M]}),r.headers=yi.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(r)===!1||(u=u&&O.synchronous,a.unshift(O.fulfilled,O.rejected))});const l=[];this.interceptors.response.forEach(function(O){l.push(O.fulfilled,O.rejected)});let d,p=0,y;if(!u){const M=[C8.bind(this),void 0];for(M.unshift.apply(M,a),M.push.apply(M,l),y=M.length,d=Promise.resolve(r);p<y;)d=d.then(M[p++],M[p++]);return d}y=a.length;let _=r;for(p=0;p<y;){const M=a[p++],O=a[p++];try{_=M(_)}catch(L){O.call(this,L);break}}try{d=C8.call(this,_)}catch(M){return Promise.reject(M)}for(p=0,y=l.length;p<y;)d=d.then(l[p++],l[p++]);return d}getUri(e){e=xc(this.defaults,e);const r=w8(e.baseURL,e.url);return l8(r,e.params,e.paramsSerializer)}};Oe.forEach(["delete","get","head","options"],function(e){_c.prototype[e]=function(r,n){return this.request(xc(n||{},{method:e,url:r,data:(n||{}).data}))}}),Oe.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(xc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}_c.prototype[e]=r(),_c.prototype[e+"Form"]=r(!0)});let ZK=class AP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Lu(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new AP(function(i){e=i}),cancel:e}}};function QK(t){return function(r){return t.apply(null,r)}}function eV(t){return Oe.isObject(t)&&t.isAxiosError===!0}const Av={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Av).forEach(([t,e])=>{Av[e]=t});function D8(t){const e=new _c(t),r=Y4(_c.prototype.request,e);return Oe.extend(r,_c.prototype,e,{allOwnKeys:!0}),Oe.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return D8(xc(t,i))},r}const un=D8(Vl);un.Axios=_c,un.CanceledError=Lu,un.CancelToken=ZK,un.isCancel=m8,un.VERSION=T8,un.toFormData=T0,un.AxiosError=ar,un.Cancel=un.CanceledError,un.all=function(e){return Promise.all(e)},un.spread=QK,un.isAxiosError=eV,un.mergeConfig=xc,un.AxiosHeaders=yi,un.formToJSON=t=>p8(Oe.isHTMLForm(t)?new FormData(t):t),un.getAdapter=I8.getAdapter,un.HttpStatusCode=Av,un.default=un;const{Axios:vae,AxiosError:O8,CanceledError:bae,isCancel:yae,CancelToken:wae,VERSION:xae,all:_ae,Cancel:Eae,isAxiosError:Sae,spread:Aae,toFormData:Pae,AxiosHeaders:Mae,HttpStatusCode:Iae,formToJSON:Cae,getAdapter:Tae,mergeConfig:Rae}=un,N8=un.create({timeout:6e4,headers:{"Content-Type":"application/json",token:localStorage.getItem("auth")}});function tV(t){var e,r,n;if(((e=t.data)==null?void 0:e.success)!==!0){const i=new O8((r=t.data)==null?void 0:r.errorMessage,(n=t.data)==null?void 0:n.errorCode,t.config,t.request,t);return Promise.reject(i)}else return t}function rV(t){var r;console.log(t);const e=(r=t.response)==null?void 0:r.data;if(e){console.log(e,"responseData");const n=new O8(e.errorMessage,t.code,t.config,t.request,t.response);return Promise.reject(n)}else return Promise.reject(t)}N8.interceptors.response.use(tV,rV);class nV{constructor(e){Ns(this,"_apiBase","");this.request=e}setApiBase(e){this._apiBase=e||""}async getNonce(e){const{data:r}=await this.request.post(`${this._apiBase}/api/v2/user/nonce`,e);return r.data}async getEmailCode(e,r){const{data:n}=await this.request.post(`${this._apiBase}/api/v2/user/get_code`,e,{headers:{"Captcha-Param":r}});return n.data}async emailLogin(e){return(await this.request.post(`${this._apiBase}/api/v2/user/login`,e)).data}async walletLogin(e){return e.account_enum==="C"?(await this.request.post(`${this._apiBase}/api/v2/user/login`,e)).data:(await this.request.post(`${this._apiBase}/api/v2/business/login`,e)).data}async tonLogin(e){return(await this.request.post(`${this._apiBase}/api/v2/user/login`,e)).data}async bindEmail(e){return(await this.request.post("/api/v2/user/account/bind",e)).data}async bindTonWallet(e){return(await this.request.post("/api/v2/user/account/bind",e)).data}async bindEvmWallet(e){return(await this.request.post("/api/v2/user/account/bind",e)).data}}const xa=new nV(N8),iV={projectId:"7a4434fefbcc9af474fb5c995e47d286",metadata:{name:"codatta",description:"codatta",url:"https://codatta.io/",icons:["https://avatars.githubusercontent.com/u/171659315"]}},L8=TW({appName:"codatta",appLogoUrl:"https://avatars.githubusercontent.com/u/171659315"}),k8=Ee.createContext({saveLastUsedWallet:()=>{},lastUsedWallet:null,wallets:[],initialized:!1,featuredWallets:[],chains:[]});function Yl(){return Ee.useContext(k8)}function sV(t){const{apiBaseUrl:e}=t,[r,n]=Ee.useState([]),[i,s]=Ee.useState([]),[o,a]=Ee.useState(null),[u,l]=Ee.useState(!1),[d,p]=Ee.useState([]),y=O=>{a(O);const B={provider:O.provider instanceof j1?"UniversalProvider":"EIP1193Provider",key:O.key,timestamp:Date.now()};localStorage.setItem("xn-last-used-info",JSON.stringify(B))};function _(O){const L=O.find(B=>{var k;return((k=B.config)==null?void 0:k.name)===t.singleWalletName});if(L)s([L]);else{const B=O.filter(U=>U.featured||U.installed),k=O.filter(U=>!U.featured&&!U.installed),H=[...B,...k];n(H),s(B)}}async function M(){const O=[],L=new Map;IP.forEach(k=>{const H=new ru(k);k.name==="Coinbase Wallet"&&H.EIP6963Detected({info:{name:"Coinbase Wallet",uuid:"coinbase",icon:k.image,rdns:"coinbase"},provider:L8.getProvider()}),L.set(H.key,H),O.push(H)}),(await Wz()).forEach(k=>{const H=L.get(k.info.name);if(H)H.EIP6963Detected(k);else{const U=new ru(k);L.set(U.key,U),O.push(U)}});try{const k=JSON.parse(localStorage.getItem("xn-last-used-info")||"{}"),H=L.get(k.key);if(H){if(H.lastUsed=!0,k.provider==="UniversalProvider"){const U=await j1.init(iV);U.session&&(H.setUniversalProvider(U),console.log("Restored UniversalProvider for wallet:",H.key))}else k.provider==="EIP1193Provider"&&H.installed&&console.log("Using detected EIP1193Provider for wallet:",H.key);a(H)}}catch(k){console.log(k)}t.chains&&p(t.chains),_(O),l(!0)}return Ee.useEffect(()=>{M(),xa.setApiBase(e)},[]),le.jsx(k8.Provider,{value:{saveLastUsedWallet:y,wallets:r,initialized:u,lastUsedWallet:o,featuredWallets:i,chains:d},children:t.children})}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B8=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=Ee.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...a},u)=>Ee.createElement("svg",{ref:u,...aV,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:B8("lucide",i),...a},[...o.map(([l,d])=>Ee.createElement(l,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=(t,e)=>{const r=Ee.forwardRef(({className:n,...i},s)=>Ee.createElement(cV,{ref:s,iconNode:e,className:B8(`lucide-${oV(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=ns("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=ns("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=ns("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=ns("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=ns("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=ns("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=ns("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=ns("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ns("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=ns("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=ns("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=ns("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]),U8=new Set;function B0(t,e,r){t||U8.has(e)||(console.warn(e),U8.add(e))}function vV(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>(process.env.NODE_ENV!=="production"&&B0(!1,"motion() is deprecated. Use motion.create() instead."),t(...n));return new Proxy(r,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function $0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Pv=t=>Array.isArray(t);function q8(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Jl(t){return typeof t=="string"||Array.isArray(t)}function z8(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function Mv(t,e,r,n){if(typeof e=="function"){const[i,s]=z8(n);e=e(r!==void 0?r:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=z8(n);e=e(r!==void 0?r:t.custom,i,s)}return e}function F0(t,e,r){const n=t.getProps();return Mv(n,e,r!==void 0?r:n.custom,t)}const Iv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cv=["initial",...Iv],Xl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sc=new Set(Xl),no=t=>t*1e3,Do=t=>t/1e3,bV={type:"spring",stiffness:500,damping:25,restSpeed:10},yV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wV={type:"keyframes",duration:.8},xV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_V=(t,{keyframes:e})=>e.length>2?wV:Sc.has(t)?t.startsWith("scale")?yV(e[1]):bV:xV;function Tv(t,e){return t?t[e]||t.default||t:void 0}const EV={useManualTiming:!1},SV=t=>t!==null;function j0(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(SV),s=e&&r!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const qn=t=>t;function AV(t){let e=new Set,r=new Set,n=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(l){s.has(l)&&(u.schedule(l),t()),l(o)}const u={schedule:(l,d=!1,p=!1)=>{const _=p&&n?e:r;return d&&s.add(l),_.has(l)||_.add(l),l},cancel:l=>{r.delete(l),s.delete(l)},process:l=>{if(o=l,n){i=!0;return}n=!0,[e,r]=[r,e],r.clear(),e.forEach(a),n=!1,i&&(i=!1,u.process(l))}};return u}const U0=["read","resolveKeyframes","update","preRender","render","postRender"],PV=40;function H8(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=U0.reduce((B,k)=>(B[k]=AV(s),B),{}),{read:a,resolveKeyframes:u,update:l,preRender:d,render:p,postRender:y}=o,_=()=>{const B=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(B-i.timestamp,PV),1),i.timestamp=B,i.isProcessing=!0,a.process(i),u.process(i),l.process(i),d.process(i),p.process(i),y.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(_))},M=()=>{r=!0,n=!0,i.isProcessing||t(_)};return{schedule:U0.reduce((B,k)=>{const H=o[k];return B[k]=(U,z=!1,Z=!1)=>(r||M(),H.schedule(U,z,Z)),B},{}),cancel:B=>{for(let k=0;k<U0.length;k++)o[U0[k]].cancel(B)},state:i,steps:o}}const{schedule:Nr,cancel:_a,state:zn,steps:Rv}=H8(typeof requestAnimationFrame<"u"?requestAnimationFrame:qn,!0),W8=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,MV=1e-7,IV=12;function CV(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=W8(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>MV&&++a<IV);return o}function Zl(t,e,r,n){if(t===e&&r===n)return qn;const i=s=>CV(s,0,1,t,r);return s=>s===0||s===1?s:W8(i(s),e,n)}const K8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,V8=t=>e=>1-t(1-e),G8=Zl(.33,1.53,.69,.99),Dv=V8(G8),Y8=K8(Dv),J8=t=>(t*=2)<1?.5*Dv(t):.5*(2-Math.pow(2,-10*(t-1))),Ov=t=>1-Math.sin(Math.acos(t)),X8=V8(Ov),Z8=K8(Ov),Q8=t=>/^0[^.\s]+$/u.test(t);function TV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Q8(t):!0}let ku=qn,Oo=qn;process.env.NODE_ENV!=="production"&&(ku=(t,e)=>{!t&&typeof console<"u"&&console.warn(e)},Oo=(t,e)=>{if(!t)throw new Error(e)});const eE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),tE=t=>e=>typeof e=="string"&&e.startsWith(t),rE=tE("--"),RV=tE("var(--"),Nv=t=>RV(t)?DV.test(t.split("/*")[0].trim()):!1,DV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,OV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NV(t){const e=OV.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}const LV=4;function nE(t,e,r=1){Oo(r<=LV,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);const[n,i]=NV(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return eE(o)?parseFloat(o):o}return Nv(i)?nE(i,e,r+1):i}const Ea=(t,e,r)=>r>e?e:r<t?t:r,Bu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ql={...Bu,transform:t=>Ea(0,1,t)},q0={...Bu,default:1},eh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sa=eh("deg"),io=eh("%"),zt=eh("px"),kV=eh("vh"),BV=eh("vw"),iE={...io,parse:t=>io.parse(t)/100,transform:t=>io.transform(t*100)},$V=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),sE=t=>t===Bu||t===zt,oE=(t,e)=>parseFloat(t.split(", ")[e]),aE=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return oE(i[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?oE(s[1],t):0}},FV=new Set(["x","y","z"]),jV=Xl.filter(t=>!FV.has(t));function UV(t){const e=[];return jV.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const $u={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:aE(4,13),y:aE(5,14)};$u.translateX=$u.x,$u.translateY=$u.y;const cE=t=>e=>e.test(t),uE=[Bu,zt,io,Sa,BV,kV,{test:t=>t==="auto",parse:t=>t}],fE=t=>uE.find(cE(t)),Ac=new Set;let Lv=!1,kv=!1;function lE(){if(kv){const t=Array.from(Ac).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=UV(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,o])=>{var a;(a=n.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}kv=!1,Lv=!1,Ac.forEach(t=>t.complete()),Ac.clear()}function hE(){Ac.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(kv=!0)})}function qV(){hE(),lE()}class Bv{constructor(e,r,n,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ac.add(this),Lv||(Lv=!0,Nr.read(hE),Nr.resolveKeyframes(lE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const u=n.readValue(r,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ac.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ac.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const th=t=>Math.round(t*1e5)/1e5,$v=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zV(t){return t==null}const HV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fv=(t,e)=>r=>!!(typeof r=="string"&&HV.test(r)&&r.startsWith(t)||e&&!zV(r)&&Object.prototype.hasOwnProperty.call(r,e)),dE=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,s,o,a]=n.match($v);return{[t]:parseFloat(i),[e]:parseFloat(s),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},WV=t=>Ea(0,255,t),jv={...Bu,transform:t=>Math.round(WV(t))},Pc={test:Fv("rgb","red"),parse:dE("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+jv.transform(t)+", "+jv.transform(e)+", "+jv.transform(r)+", "+th(Ql.transform(n))+")"};function KV(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Uv={test:Fv("#"),parse:KV,transform:Pc.transform},Fu={test:Fv("hsl","hue"),parse:dE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+io.transform(th(e))+", "+io.transform(th(r))+", "+th(Ql.transform(n))+")"},Jn={test:t=>Pc.test(t)||Uv.test(t)||Fu.test(t),parse:t=>Pc.test(t)?Pc.parse(t):Fu.test(t)?Fu.parse(t):Uv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Pc.transform(t):Fu.transform(t)},VV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GV(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match($v))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(VV))===null||r===void 0?void 0:r.length)||0)>0}const pE="number",gE="color",YV="var",JV="var(",mE="${}",XV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rh(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(XV,u=>(Jn.test(u)?(n.color.push(s),i.push(gE),r.push(Jn.parse(u))):u.startsWith(JV)?(n.var.push(s),i.push(YV),r.push(u)):(n.number.push(s),i.push(pE),r.push(parseFloat(u))),++s,mE)).split(mE);return{values:r,split:a,indexes:n,types:i}}function vE(t){return rh(t).values}function bE(t){const{split:e,types:r}=rh(t),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const a=r[o];a===pE?s+=th(i[o]):a===gE?s+=Jn.transform(i[o]):s+=i[o]}return s}}const ZV=t=>typeof t=="number"?0:t;function QV(t){const e=vE(t);return bE(t)(e.map(ZV))}const Aa={test:GV,parse:vE,createTransformer:bE,getAnimatableNone:QV},eG=new Set(["brightness","contrast","saturate","opacity"]);function tG(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match($v)||[];if(!n)return t;const i=r.replace(n,"");let s=eG.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+i+")"}const rG=/\b([a-z-]*)\(.*?\)/gu,qv={...Aa,getAnimatableNone:t=>{const e=t.match(rG);return e?e.map(tG).join(" "):t}},nG={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,backgroundPositionX:zt,backgroundPositionY:zt},iG={rotate:Sa,rotateX:Sa,rotateY:Sa,rotateZ:Sa,scale:q0,scaleX:q0,scaleY:q0,scaleZ:q0,skew:Sa,skewX:Sa,skewY:Sa,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:Ql,originX:iE,originY:iE,originZ:zt},yE={...Bu,transform:Math.round},zv={...nG,...iG,zIndex:yE,size:zt,fillOpacity:Ql,strokeOpacity:Ql,numOctaves:yE},sG={...zv,color:Jn,backgroundColor:Jn,outlineColor:Jn,fill:Jn,stroke:Jn,borderColor:Jn,borderTopColor:Jn,borderRightColor:Jn,borderBottomColor:Jn,borderLeftColor:Jn,filter:qv,WebkitFilter:qv},Hv=t=>sG[t];function wE(t,e){let r=Hv(t);return r!==qv&&(r=Aa),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const oG=new Set(["auto","none","0"]);function aG(t,e,r){let n=0,i;for(;n<t.length&&!i;){const s=t[n];typeof s=="string"&&!oG.has(s)&&rh(s).values.length&&(i=t[n]),n++}if(i&&r)for(const s of e)t[s]=wE(r,i)}class xE extends Bv{constructor(e,r,n,i,s){super(e,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let l=e[u];if(typeof l=="string"&&(l=l.trim(),Nv(l))){const d=nE(l,r.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!$V.has(n)||e.length!==2)return;const[i,s]=e,o=fE(i),a=fE(s);if(o!==a)if(sE(o)&&sE(a))for(let u=0;u<e.length;u++){const l=e[u];typeof l=="string"&&(e[u]=parseFloat(l))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)TV(e[i])&&n.push(i);n.length&&aG(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$u[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=$u[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,l])=>{r.getValue(u).set(l)}),this.resolveNoneKeyframes()}}function Wv(t){return typeof t=="function"}let z0;function cG(){z0=void 0}const so={now:()=>(z0===void 0&&so.set(zn.isProcessing||EV.useManualTiming?zn.timestamp:performance.now()),z0),set:t=>{z0=t,queueMicrotask(cG)}},_E=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Aa.test(t)||t==="0")&&!t.startsWith("url("));function uG(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function fG(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=_E(i,e),a=_E(s,e);return ku(o===a,`You are trying to animate ${e} from "${i}" to "${s}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${s} via the \`style\` property.`),!o||!a?!1:uG(t)||(r==="spring"||Wv(r))&&n}const lG=40;class EE{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=so.now(),this.options={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>lG?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&qV(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=so.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:o,onComplete:a,onUpdate:u,isGenerator:l}=this.options;if(!l&&!fG(e,n,i,s))if(o)this.options.duration=0;else{u==null||u(j0(e,this.options,r)),a==null||a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,r);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...d},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function SE(t,e){return e?t*(1e3/e):0}const hG=5;function AE(t,e,r){const n=Math.max(e-hG,0);return SE(r-t(n),e-n)}const Kv=.001,dG=.01,PE=10,pG=.05,gG=1;function mG({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,s;ku(t<=no(PE),"Spring duration must be 10 seconds or less");let o=1-e;o=Ea(pG,gG,o),t=Ea(dG,PE,Do(t)),o<1?(i=l=>{const d=l*o,p=d*t,y=d-r,_=Vv(l,o),M=Math.exp(-p);return Kv-y/_*M},s=l=>{const p=l*o*t,y=p*r+r,_=Math.pow(o,2)*Math.pow(l,2)*t,M=Math.exp(-p),O=Vv(Math.pow(l,2),o);return(-i(l)+Kv>0?-1:1)*((y-_)*M)/O}):(i=l=>{const d=Math.exp(-l*t),p=(l-r)*t+1;return-Kv+d*p},s=l=>{const d=Math.exp(-l*t),p=(r-l)*(t*t);return d*p});const a=5/t,u=bG(i,s,a);if(t=no(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const vG=12;function bG(t,e,r){let n=r;for(let i=1;i<vG;i++)n=n-t(n)/e(n);return n}function Vv(t,e){return t*Math.sqrt(1-e*e)}const yG=["duration","bounce"],wG=["stiffness","damping","mass"];function ME(t,e){return e.some(r=>t[r]!==void 0)}function xG(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!ME(t,wG)&&ME(t,yG)){const r=mG(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function IE({keyframes:t,restDelta:e,restSpeed:r,...n}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:u,mass:l,duration:d,velocity:p,isResolvedFromDuration:y}=xG({...n,velocity:-Do(n.velocity||0)}),_=p||0,M=u/(2*Math.sqrt(a*l)),O=s-i,L=Do(Math.sqrt(a/l)),B=Math.abs(O)<5;r||(r=B?.01:2),e||(e=B?.005:.5);let k;if(M<1){const H=Vv(L,M);k=U=>{const z=Math.exp(-M*L*U);return s-z*((_+M*L*O)/H*Math.sin(H*U)+O*Math.cos(H*U))}}else if(M===1)k=H=>s-Math.exp(-L*H)*(O+(_+L*O)*H);else{const H=L*Math.sqrt(M*M-1);k=U=>{const z=Math.exp(-M*L*U),Z=Math.min(H*U,300);return s-z*((_+M*L*O)*Math.sinh(Z)+H*O*Math.cosh(Z))/H}}return{calculatedDuration:y&&d||null,next:H=>{const U=k(H);if(y)o.done=H>=d;else{let z=0;M<1&&(z=H===0?no(_):AE(k,H,U));const Z=Math.abs(z)<=r,R=Math.abs(s-U)<=e;o.done=Z&&R}return o.value=o.done?s:U,o}}}function CE({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:l=.5,restSpeed:d}){const p=t[0],y={done:!1,value:p},_=W=>a!==void 0&&W<a||u!==void 0&&W>u,M=W=>a===void 0?u:u===void 0||Math.abs(a-W)<Math.abs(u-W)?a:u;let O=r*e;const L=p+O,B=o===void 0?L:o(L);B!==L&&(O=B-p);const k=W=>-O*Math.exp(-W/n),H=W=>B+k(W),U=W=>{const ie=k(W),me=H(W);y.done=Math.abs(ie)<=l,y.value=y.done?B:me};let z,Z;const R=W=>{_(y.value)&&(z=W,Z=IE({keyframes:[y.value,M(y.value)],velocity:AE(H,W,y.value),damping:i,stiffness:s,restDelta:l,restSpeed:d}))};return R(0),{calculatedDuration:null,next:W=>{let ie=!1;return!Z&&z===void 0&&(ie=!0,U(W),R(W)),z!==void 0&&W>=z?Z.next(W-z):(!ie&&U(W),y)}}}const _G=Zl(.42,0,1,1),EG=Zl(0,0,.58,1),TE=Zl(.42,0,.58,1),SG=t=>Array.isArray(t)&&typeof t[0]!="number",Gv=t=>Array.isArray(t)&&typeof t[0]=="number",RE={linear:qn,easeIn:_G,easeInOut:TE,easeOut:EG,circIn:Ov,circInOut:Z8,circOut:X8,backIn:Dv,backInOut:Y8,backOut:G8,anticipate:J8},DE=t=>{if(Gv(t)){Oo(t.length===4,"Cubic bezier arrays must contain four numerical values.");const[e,r,n,i]=t;return Zl(e,r,n,i)}else if(typeof t=="string")return Oo(RE[t]!==void 0,`Invalid easing type '${t}'`),RE[t];return t},AG=(t,e)=>r=>e(t(r)),No=(...t)=>t.reduce(AG),ju=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},Zr=(t,e,r)=>t+(e-t)*r;function Yv(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function PG({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,s=0,o=0;if(!e)i=s=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,u=2*r-a;i=Yv(u,a,t+1/3),s=Yv(u,a,t),o=Yv(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function H0(t,e){return r=>r>0?e:t}const Jv=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},MG=[Uv,Pc,Fu],IG=t=>MG.find(e=>e.test(t));function OE(t){const e=IG(t);if(ku(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`),!e)return!1;let r=e.parse(t);return e===Fu&&(r=PG(r)),r}const NE=(t,e)=>{const r=OE(t),n=OE(e);if(!r||!n)return H0(t,e);const i={...r};return s=>(i.red=Jv(r.red,n.red,s),i.green=Jv(r.green,n.green,s),i.blue=Jv(r.blue,n.blue,s),i.alpha=Zr(r.alpha,n.alpha,s),Pc.transform(i))},Xv=new Set(["none","hidden"]);function CG(t,e){return Xv.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function TG(t,e){return r=>Zr(t,e,r)}function Zv(t){return typeof t=="number"?TG:typeof t=="string"?Nv(t)?H0:Jn.test(t)?NE:OG:Array.isArray(t)?LE:typeof t=="object"?Jn.test(t)?NE:RG:H0}function LE(t,e){const r=[...t],n=r.length,i=t.map((s,o)=>Zv(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)r[o]=i[o](s);return r}}function RG(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=Zv(t[i])(t[i],e[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function DG(t,e){var r;const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],u=(r=t.values[a])!==null&&r!==void 0?r:0;n[s]=u,i[o]++}return n}const OG=(t,e)=>{const r=Aa.createTransformer(e),n=rh(t),i=rh(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Xv.has(t)&&!i.values.length||Xv.has(e)&&!n.values.length?CG(t,e):No(LE(DG(n,i),i.values),r):(ku(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),H0(t,e))};function kE(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Zr(t,e,r):Zv(t)(t,e)}function NG(t,e,r){const n=[],i=r||kE,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||qn:e;a=No(u,a)}n.push(a)}return n}function LG(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const s=t.length;if(Oo(s===e.length,"Both input and output ranges must be the same length"),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=NG(e,n,i),a=o.length,u=l=>{let d=0;if(a>1)for(;d<t.length-2&&!(l<t[d+1]);d++);const p=ju(t[d],t[d+1],l);return o[d](p)};return r?l=>u(Ea(t[0],t[s-1],l)):u}function kG(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=ju(0,e,n);t.push(Zr(r,1,i))}}function BG(t){const e=[0];return kG(e,t.length-1),e}function $G(t,e){return t.map(r=>r*e)}function FG(t,e){return t.map(()=>e||TE).splice(0,t.length-1)}function W0({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=SG(n)?n.map(DE):DE(n),s={done:!1,value:e[0]},o=$G(r&&r.length===e.length?r:BG(e),t),a=LG(o,e,{ease:Array.isArray(i)?i:FG(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const BE=2e4;function jG(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<BE;)e+=r,n=t.next(e);return e>=BE?1/0:e}const UG=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Nr.update(e,!0),stop:()=>_a(e),now:()=>zn.isProcessing?zn.timestamp:so.now()}},qG={decay:CE,inertia:CE,tween:W0,keyframes:W0,spring:IE},zG=t=>t/100;class Qv extends EE{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:r,motionValue:n,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Bv,a=(u,l)=>this.onKeyframesResolved(u,l);this.resolver=new o(s,a,r,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Wv(r)?r:qG[r]||W0;let u,l;a!==W0&&typeof e[0]!="number"&&(process.env.NODE_ENV!=="production"&&Oo(e.length===2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${e}`),u=No(zG,kE(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});s==="mirror"&&(l=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=jG(d));const{calculatedDuration:p}=d,y=p+i,_=y*(n+1)-i;return{generator:d,mirroredGenerator:l,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:y,totalDuration:_}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:W}=this.options;return{done:!0,value:W[W.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:l,totalDuration:d,resolvedDuration:p}=n;if(this.startTime===null)return s.next(0);const{delay:y,repeat:_,repeatType:M,repeatDelay:O,onUpdate:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const B=this.currentTime-y*(this.speed>=0?1:-1),k=this.speed>=0?B<0:B>d;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let H=this.currentTime,U=s;if(_){const W=Math.min(this.currentTime,d)/p;let ie=Math.floor(W),me=W%1;!me&&W>=1&&(me=1),me===1&&ie--,ie=Math.min(ie,_+1),!!(ie%2)&&(M==="reverse"?(me=1-me,O&&(me-=O/p)):M==="mirror"&&(U=o)),H=Ea(0,1,me)*p}const z=k?{done:!1,value:u[0]}:U.next(H);a&&(z.value=a(z.value));let{done:Z}=z;!k&&l!==null&&(Z=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return R&&i!==void 0&&(z.value=j0(u,this.options,i)),L&&L(z.value),R&&this.finish(),z}get duration(){const{resolved:e}=this;return e?Do(e.calculatedDuration):0}get time(){return Do(this.currentTime)}set time(e){e=no(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Do(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=UG,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const HG=new Set(["opacity","clipPath","filter","transform"]),WG=10,KG=(t,e)=>{let r="";const n=Math.max(Math.round(e/WG),2);for(let i=0;i<n;i++)r+=t(ju(0,n-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function eb(t){let e;return()=>(e===void 0&&(e=t()),e)}const VG={linearEasing:void 0};function GG(t,e){const r=eb(t);return()=>{var n;return(n=VG[e])!==null&&n!==void 0?n:r()}}const K0=GG(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function $E(t){return!!(typeof t=="function"&&K0()||!t||typeof t=="string"&&(t in tb||K0())||Gv(t)||Array.isArray(t)&&t.every($E))}const nh=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,tb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nh([0,.65,.55,1]),circOut:nh([.55,0,1,.45]),backIn:nh([.31,.01,.66,-.59]),backOut:nh([.33,1.53,.69,.99])};function FE(t,e){if(t)return typeof t=="function"&&K0()?KG(t,e):Gv(t)?nh(t):Array.isArray(t)?t.map(r=>FE(r,e)||tb.easeOut):tb[t]}function YG(t,e,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:u}={}){const l={[e]:r};u&&(l.offset=u);const d=FE(a,i);return Array.isArray(d)&&(l.easing=d),t.animate(l,{delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function jE(t,e){t.timeline=e,t.onfinish=null}const JG=eb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),V0=10,XG=2e4;function ZG(t){return Wv(t.type)||t.type==="spring"||!$E(t.ease)}function QG(t,e){const r=new Qv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const i=[];let s=0;for(;!n.done&&s<XG;)n=r.sample(s),i.push(n.value),s+=V0;return{times:void 0,keyframes:i,duration:s-V0,ease:"linear"}}const UE={anticipate:J8,backInOut:Y8,circInOut:Z8};function eY(t){return t in UE}class qE extends EE{constructor(e){super(e);const{name:r,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new xE(s,(o,a)=>this.onKeyframesResolved(o,a),r,n,i),this.resolver.scheduleResolve()}initPlayback(e,r){var n;let{duration:i=300,times:s,ease:o,type:a,motionValue:u,name:l,startTime:d}=this.options;if(!(!((n=u.owner)===null||n===void 0)&&n.current))return!1;if(typeof o=="string"&&K0()&&eY(o)&&(o=UE[o]),ZG(this.options)){const{onComplete:y,onUpdate:_,motionValue:M,element:O,...L}=this.options,B=QG(e,L);e=B.keyframes,e.length===1&&(e[1]=e[0]),i=B.duration,s=B.times,o=B.ease,a="keyframes"}const p=YG(u.owner.current,l,e,{...this.options,duration:i,times:s,ease:o});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(jE(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:y}=this.options;u.set(j0(e,this.options,r)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return Do(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return Do(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=no(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return qn;const{animation:n}=r;jE(n,e)}return qn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:i,type:s,ease:o,times:a}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:l,onUpdate:d,onComplete:p,element:y,..._}=this.options,M=new Qv({..._,keyframes:n,duration:i,type:s,ease:o,times:a,isGenerator:!0}),O=no(this.time);l.setWithVelocity(M.sample(O-V0).value,M.sample(O).value,V0)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return JG()&&n&&HG.has(n)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const tY=eb(()=>window.ScrollTimeline!==void 0);class rY{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,r){return Promise.all(this.animations).then(e).catch(r)}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(i=>tY()&&i.attachTimeline?i.attachTimeline(e):r(i));return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function nY({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:l,...d}){return!!Object.keys(d).length}const rb=(t,e,r,n={},i,s)=>o=>{const a=Tv(n,t)||{},u=a.delay||n.delay||0;let{elapsed:l=0}=n;l=l-no(u);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:y=>{e.set(y),a.onUpdate&&a.onUpdate(y)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};nY(a)||(d={...d,..._V(t,d)}),d.duration&&(d.duration=no(d.duration)),d.repeatDelay&&(d.repeatDelay=no(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const y=j0(d.keyframes,a);if(y!==void 0)return Nr.update(()=>{d.onUpdate(y),d.onComplete()}),new rY([])}return!s&&qE.supports(d)?new qE(d):new Qv(d)},iY=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),sY=t=>Pv(t)?t[t.length-1]||0:t;function nb(t,e){t.indexOf(e)===-1&&t.push(e)}function ib(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class sb{constructor(){this.subscriptions=[]}add(e){return nb(this.subscriptions,e),()=>ib(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zE=30,oY=t=>!isNaN(parseFloat(t));class aY{constructor(e,r={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=so.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=so.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=oY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return process.env.NODE_ENV!=="production"&&B0(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new sb);const n=this.events[e].add(r);return e==="change"?()=>{n(),Nr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=so.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zE)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,zE);return SE(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ih(t,e){return new aY(t,e)}function cY(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,ih(r))}function uY(t,e){const r=F0(t,e);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const o in s){const a=sY(s[o]);cY(t,o,a)}}const ob=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HE="data-"+ob("framerAppearId");function WE(t){return t.props[HE]}const Xn=t=>!!(t&&t.getVelocity);function fY(t){return!!(Xn(t)&&t.add)}function ab(t,e){const r=t.getValue("willChange");if(fY(r))return r.add(e)}function lY({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function KE(t,e,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=e;n&&(o=n);const l=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const p in u){const y=t.getValue(p,(s=t.latestValues[p])!==null&&s!==void 0?s:null),_=u[p];if(_===void 0||d&&lY(d,p))continue;const M={delay:r,...Tv(o||{},p)};let O=!1;if(window.MotionHandoffAnimation){const B=WE(t);if(B){const k=window.MotionHandoffAnimation(B,p,Nr);k!==null&&(M.startTime=k,O=!0)}}ab(t,p),y.start(rb(p,y,_,t.shouldReduceMotion&&Sc.has(p)?{type:!1}:M,t,O));const L=y.animation;L&&l.push(L)}return a&&Promise.all(l).then(()=>{Nr.update(()=>{a&&uY(t,a)})}),l}function cb(t,e,r={}){var n;const i=F0(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const o=i?()=>Promise.all(KE(t,i,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:y}=s;return hY(t,e,d+l,p,y,r)}:()=>Promise.resolve(),{when:u}=s;if(u){const[l,d]=u==="beforeChildren"?[o,a]:[a,o];return l().then(()=>d())}else return Promise.all([o(),a(r.delay)])}function hY(t,e,r=0,n=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*n,u=i===1?(l=0)=>l*n:(l=0)=>a-l*n;return Array.from(t.variantChildren).sort(dY).forEach((l,d)=>{l.notify("AnimationStart",e),o.push(cb(l,e,{...s,delay:r+u(d)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(o)}function dY(t,e){return t.sortNodePosition(e)}function pY(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>cb(t,s,r));n=Promise.all(i)}else if(typeof e=="string")n=cb(t,e,r);else{const i=typeof e=="function"?F0(t,e,r.custom):e;n=Promise.all(KE(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const gY=Cv.length;function VE(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?VE(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<gY;r++){const n=Cv[r],i=t.props[n];(Jl(i)||i===!1)&&(e[n]=i)}return e}const mY=[...Iv].reverse(),vY=Iv.length;function bY(t){return e=>Promise.all(e.map(({animation:r,options:n})=>pY(t,r,n)))}function yY(t){let e=bY(t),r=GE(),n=!0;const i=u=>(l,d)=>{var p;const y=F0(t,d,u==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(y){const{transition:_,transitionEnd:M,...O}=y;l={...l,...O,...M}}return l};function s(u){e=u(t)}function o(u){const{props:l}=t,d=VE(t.parent)||{},p=[],y=new Set;let _={},M=1/0;for(let L=0;L<vY;L++){const B=mY[L],k=r[B],H=l[B]!==void 0?l[B]:d[B],U=Jl(H),z=B===u?k.isActive:null;z===!1&&(M=L);let Z=H===d[B]&&H!==l[B]&&U;if(Z&&n&&t.manuallyAnimateOnMount&&(Z=!1),k.protectedKeys={..._},!k.isActive&&z===null||!H&&!k.prevProp||$0(H)||typeof H=="boolean")continue;const R=wY(k.prevProp,H);let W=R||B===u&&k.isActive&&!Z&&U||L>M&&U,ie=!1;const me=Array.isArray(H)?H:[H];let j=me.reduce(i(B),{});z===!1&&(j={});const{prevResolvedValues:E={}}=k,m={...E,...j},f=x=>{W=!0,y.has(x)&&(ie=!0,y.delete(x)),k.needsAnimating[x]=!0;const S=t.getValue(x);S&&(S.liveStyle=!1)};for(const x in m){const S=j[x],A=E[x];if(_.hasOwnProperty(x))continue;let b=!1;Pv(S)&&Pv(A)?b=!q8(S,A):b=S!==A,b?S!=null?f(x):y.add(x):S!==void 0&&y.has(x)?f(x):k.protectedKeys[x]=!0}k.prevProp=H,k.prevResolvedValues=j,k.isActive&&(_={..._,...j}),n&&t.blockInitialAnimation&&(W=!1),W&&(!(Z&&R)||ie)&&p.push(...me.map(x=>({animation:x,options:{type:B}})))}if(y.size){const L={};y.forEach(B=>{const k=t.getBaseTarget(B),H=t.getValue(B);H&&(H.liveStyle=!0),L[B]=k??null}),p.push({animation:L})}let O=!!p.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(O=!1),n=!1,O?e(p):Promise.resolve()}function a(u,l){var d;if(r[u].isActive===l)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(y=>{var _;return(_=y.animationState)===null||_===void 0?void 0:_.setActive(u,l)}),r[u].isActive=l;const p=o(u);for(const y in r)r[y].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>r,reset:()=>{r=GE(),n=!0}}}function wY(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!q8(e,t):!1}function Mc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GE(){return{animate:Mc(!0),whileInView:Mc(),whileHover:Mc(),whileTap:Mc(),whileDrag:Mc(),whileFocus:Mc(),exit:Mc()}}class Pa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xY extends Pa{constructor(e){super(e),e.animationState||(e.animationState=yY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _Y=0;class EY extends Pa{constructor(){super(...arguments),this.id=_Y++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const SY={animation:{Feature:xY},exit:{Feature:EY}},YE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function G0(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const AY=t=>e=>YE(e)&&t(e,G0(e));function Lo(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function ko(t,e,r,n){return Lo(t,e,AY(r),n)}const JE=(t,e)=>Math.abs(t-e);function PY(t,e){const r=JE(t.x,e.x),n=JE(t.y,e.y);return Math.sqrt(r**2+n**2)}class XE{constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=fb(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,_=PY(p.offset,{x:0,y:0})>=3;if(!y&&!_)return;const{point:M}=p,{timestamp:O}=zn;this.history.push({...M,timestamp:O});const{onStart:L,onMove:B}=this.handlers;y||(L&&L(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,p)},this.handlePointerMove=(p,y)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=ub(y,this.transformPagePoint),Nr.update(this.updatePoint,!0)},this.handlePointerUp=(p,y)=>{this.end();const{onEnd:_,onSessionEnd:M,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=fb(p.type==="pointercancel"?this.lastMoveEventInfo:ub(y,this.transformPagePoint),this.history);this.startEvent&&_&&_(p,L),M&&M(p,L)},!YE(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const o=G0(e),a=ub(o,this.transformPagePoint),{point:u}=a,{timestamp:l}=zn;this.history=[{...u,timestamp:l}];const{onSessionStart:d}=r;d&&d(e,fb(a,this.history)),this.removeListeners=No(ko(this.contextWindow,"pointermove",this.handlePointerMove),ko(this.contextWindow,"pointerup",this.handlePointerUp),ko(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_a(this.updatePoint)}}function ub(t,e){return e?{point:e(t.point)}:t}function ZE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fb({point:t},e){return{point:t,delta:ZE(t,QE(e)),offset:ZE(t,MY(e)),velocity:IY(e,.1)}}function MY(t){return t[0]}function QE(t){return t[t.length-1]}function IY(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=QE(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>no(e)));)r--;if(!n)return{x:0,y:0};const s=Do(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function eS(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const tS=eS("dragHorizontal"),rS=eS("dragVertical");function nS(t){let e=!1;if(t==="y")e=rS();else if(t==="x")e=tS();else{const r=tS(),n=rS();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function iS(){const t=nS(!0);return t?(t(),!1):!0}function Uu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const sS=1e-4,CY=1-sS,TY=1+sS,oS=.01,RY=0-oS,DY=0+oS;function Ni(t){return t.max-t.min}function OY(t,e,r){return Math.abs(t-e)<=r}function aS(t,e,r,n=.5){t.origin=n,t.originPoint=Zr(e.min,e.max,t.origin),t.scale=Ni(r)/Ni(e),t.translate=Zr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=CY&&t.scale<=TY||isNaN(t.scale))&&(t.scale=1),(t.translate>=RY&&t.translate<=DY||isNaN(t.translate))&&(t.translate=0)}function sh(t,e,r,n){aS(t.x,e.x,r.x,n?n.originX:void 0),aS(t.y,e.y,r.y,n?n.originY:void 0)}function cS(t,e,r){t.min=r.min+e.min,t.max=t.min+Ni(e)}function NY(t,e,r){cS(t.x,e.x,r.x),cS(t.y,e.y,r.y)}function uS(t,e,r){t.min=e.min-r.min,t.max=t.min+Ni(e)}function oh(t,e,r){uS(t.x,e.x,r.x),uS(t.y,e.y,r.y)}function LY(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Zr(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Zr(r,t,n.max):Math.min(t,r)),t}function fS(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function kY(t,{top:e,left:r,bottom:n,right:i}){return{x:fS(t.x,r,i),y:fS(t.y,e,n)}}function lS(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function BY(t,e){return{x:lS(t.x,e.x),y:lS(t.y,e.y)}}function $Y(t,e){let r=.5;const n=Ni(t),i=Ni(e);return i>n?r=ju(e.min,e.max-n,t.min):n>i&&(r=ju(t.min,t.max-i,e.min)),Ea(0,1,r)}function FY(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const lb=.35;function jY(t=lb){return t===!1?t=0:t===!0&&(t=lb),{x:hS(t,"left","right"),y:hS(t,"top","bottom")}}function hS(t,e,r){return{min:dS(t,e),max:dS(t,r)}}function dS(t,e){return typeof t=="number"?t:t[e]||0}const pS=()=>({translate:0,scale:1,origin:0,originPoint:0}),qu=()=>({x:pS(),y:pS()}),gS=()=>({min:0,max:0}),fn=()=>({x:gS(),y:gS()});function is(t){return[t("x"),t("y")]}function mS({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function UY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function qY(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function hb(t){return t===void 0||t===1}function db({scale:t,scaleX:e,scaleY:r}){return!hb(t)||!hb(e)||!hb(r)}function Ic(t){return db(t)||vS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vS(t){return bS(t.x)||bS(t.y)}function bS(t){return t&&t!=="0%"}function Y0(t,e,r){const n=t-r,i=e*n;return r+i}function yS(t,e,r,n,i){return i!==void 0&&(t=Y0(t,i,n)),Y0(t,r,n)+e}function pb(t,e=0,r=1,n,i){t.min=yS(t.min,e,r,n,i),t.max=yS(t.max,e,r,n,i)}function wS(t,{x:e,y:r}){pb(t.x,e.translate,e.scale,e.originPoint),pb(t.y,r.translate,r.scale,r.originPoint)}const xS=.999999999999,_S=1.0000000000001;function zY(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=r[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Hu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,wS(t,o)),n&&Ic(s.latestValues)&&Hu(t,s.latestValues))}e.x<_S&&e.x>xS&&(e.x=1),e.y<_S&&e.y>xS&&(e.y=1)}function zu(t,e){t.min=t.min+e,t.max=t.max+e}function ES(t,e,r,n,i=.5){const s=Zr(t.min,t.max,i);pb(t,e,r,s,n)}function Hu(t,e){ES(t.x,e.x,e.scaleX,e.scale,e.originX),ES(t.y,e.y,e.scaleY,e.scale,e.originY)}function SS(t,e){return mS(qY(t.getBoundingClientRect(),e))}function HY(t,e,r){const n=SS(t,r),{scroll:i}=e;return i&&(zu(n.x,i.offset.x),zu(n.y,i.offset.y)),n}const AS=({current:t})=>t?t.ownerDocument.defaultView:null,WY=new WeakMap;class KY{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fn(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(G0(d,"page").point)},s=(d,p)=>{const{drag:y,dragPropagation:_,onDragStart:M}=this.getProps();if(y&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=nS(y),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),is(L=>{let B=this.getAxisMotionValue(L).get()||0;if(io.test(B)){const{projection:k}=this.visualElement;if(k&&k.layout){const H=k.layout.layoutBox[L];H&&(B=Ni(H)*(parseFloat(B)/100))}}this.originPoint[L]=B}),M&&Nr.postRender(()=>M(d,p)),ab(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},o=(d,p)=>{const{dragPropagation:y,dragDirectionLock:_,onDirectionLock:M,onDrag:O}=this.getProps();if(!y&&!this.openGlobalLock)return;const{offset:L}=p;if(_&&this.currentDirection===null){this.currentDirection=VY(L),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",p.point,L),this.updateAxis("y",p.point,L),this.visualElement.render(),O&&O(d,p)},a=(d,p)=>this.stop(d,p),u=()=>is(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new XE(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:AS(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Nr.postRender(()=>s(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!J0(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=LY(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;r&&Uu(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=kY(i.layoutBox,r):this.constraints=!1,this.elastic=jY(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&is(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=FY(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Uu(e))return!1;const n=e.current;Oo(n!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=HY(n,i.root,this.visualElement.getTransformPagePoint());let o=BY(i.layout.layoutBox,s);if(r){const a=r(UY(o));this.hasMutatedConstraints=!!a,a&&(o=mS(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},l=is(d=>{if(!J0(d,r,this.currentDirection))return;let p=u&&u[d]||{};o&&(p={min:0,max:0});const y=i?200:1e6,_=i?40:1e7,M={type:"inertia",velocity:n?e[d]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(d,M)});return Promise.all(l).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return ab(this.visualElement,e),n.start(rb(e,n,0,r,this.visualElement,!1))}stopAnimation(){is(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){is(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){is(r=>{const{drag:n}=this.getProps();if(!J0(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[r];s.set(e[r]-Zr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Uu(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};is(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=$Y({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),is(o=>{if(!J0(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:l}=this.constraints[o];a.set(Zr(u,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;WY.set(this.visualElement,this);const e=this.visualElement.current,r=ko(e,"pointerdown",u=>{const{drag:l,dragListener:d=!0}=this.getProps();l&&d&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Uu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Nr.read(n);const o=Lo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(is(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=u[d].translate,p.set(p.get()+u[d].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=lb,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function J0(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function VY(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class GY extends Pa{constructor(e){super(e),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new KY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const PS=t=>(e,r)=>{t&&Nr.postRender(()=>t(e,r))};class YY extends Pa{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(e){this.session=new XE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:PS(e),onStart:PS(r),onMove:n,onEnd:(s,o)=>{delete this.session,i&&Nr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ko(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const X0=Ee.createContext(null);function JY(){const t=Ee.useContext(X0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,i=Ee.useId();Ee.useEffect(()=>n(i),[]);const s=Ee.useCallback(()=>r&&r(i),[i,r]);return!e&&r?[!1,s]:[!0]}const gb=Ee.createContext({}),MS=Ee.createContext({}),Z0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ah={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(zt.test(t))t=parseFloat(t);else return t;const r=IS(t,e.target.x),n=IS(t,e.target.y);return`${r}% ${n}%`}},XY={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=Aa.parse(t);if(i.length>5)return n;const s=Aa.createTransformer(t),o=typeof i[0]!="number"?1:0,a=r.x.scale*e.x,u=r.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const l=Zr(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),s(i)}},Q0={};function ZY(t){Object.assign(Q0,t)}const{schedule:mb}=H8(queueMicrotask,!1);class QY extends Ee.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;ZY(eJ),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Z0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Nr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),mb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function CS(t){const[e,r]=JY(),n=Ee.useContext(gb);return le.jsx(QY,{...t,layoutGroup:n,switchLayoutGroup:Ee.useContext(MS),isPresent:e,safeToRemove:r})}const eJ={borderRadius:{...ah,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ah,borderTopRightRadius:ah,borderBottomLeftRadius:ah,borderBottomRightRadius:ah,boxShadow:XY},TS=["TopLeft","TopRight","BottomLeft","BottomRight"],tJ=TS.length,RS=t=>typeof t=="string"?parseFloat(t):t,DS=t=>typeof t=="number"||zt.test(t);function rJ(t,e,r,n,i,s){i?(t.opacity=Zr(0,r.opacity!==void 0?r.opacity:1,nJ(n)),t.opacityExit=Zr(e.opacity!==void 0?e.opacity:1,0,iJ(n))):s&&(t.opacity=Zr(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<tJ;o++){const a=`border${TS[o]}Radius`;let u=OS(e,a),l=OS(r,a);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||DS(u)===DS(l)?(t[a]=Math.max(Zr(RS(u),RS(l),n),0),(io.test(l)||io.test(u))&&(t[a]+="%")):t[a]=l}(e.rotate||r.rotate)&&(t.rotate=Zr(e.rotate||0,r.rotate||0,n))}function OS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const nJ=NS(0,.5,X8),iJ=NS(.5,.95,qn);function NS(t,e,r){return n=>n<t?0:n>e?1:r(ju(t,e,n))}function LS(t,e){t.min=e.min,t.max=e.max}function ss(t,e){LS(t.x,e.x),LS(t.y,e.y)}function kS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function BS(t,e,r,n,i){return t-=e,t=Y0(t,1/r,n),i!==void 0&&(t=Y0(t,1/i,n)),t}function sJ(t,e=0,r=1,n=.5,i,s=t,o=t){if(io.test(e)&&(e=parseFloat(e),e=Zr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Zr(s.min,s.max,n);t===s&&(a-=e),t.min=BS(t.min,e,r,a,i),t.max=BS(t.max,e,r,a,i)}function $S(t,e,[r,n,i],s,o){sJ(t,e[r],e[n],e[i],e.scale,s,o)}const oJ=["x","scaleX","originX"],aJ=["y","scaleY","originY"];function FS(t,e,r,n){$S(t.x,e,oJ,r?r.x:void 0,n?n.x:void 0),$S(t.y,e,aJ,r?r.y:void 0,n?n.y:void 0)}function jS(t){return t.translate===0&&t.scale===1}function US(t){return jS(t.x)&&jS(t.y)}function qS(t,e){return t.min===e.min&&t.max===e.max}function cJ(t,e){return qS(t.x,e.x)&&qS(t.y,e.y)}function zS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function HS(t,e){return zS(t.x,e.x)&&zS(t.y,e.y)}function WS(t){return Ni(t.x)/Ni(t.y)}function KS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uJ{constructor(){this.members=[]}add(e){nb(this.members,e),e.scheduleRender()}remove(e){if(ib(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fJ(t,e,r){let n="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:l,rotate:d,rotateX:p,rotateY:y,skewX:_,skewY:M}=r;l&&(n=`perspective(${l}px) ${n}`),d&&(n+=`rotate(${d}deg) `),p&&(n+=`rotateX(${p}deg) `),y&&(n+=`rotateY(${y}deg) `),_&&(n+=`skewX(${_}deg) `),M&&(n+=`skewY(${M}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(n+=`scale(${a}, ${u})`),n||"none"}const lJ=(t,e)=>t.depth-e.depth;class hJ{constructor(){this.children=[],this.isDirty=!1}add(e){nb(this.children,e),this.isDirty=!0}remove(e){ib(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lJ),this.isDirty=!1,this.children.forEach(e)}}function ep(t){const e=Xn(t)?t.get():t;return iY(e)?e.toValue():e}function dJ(t,e){const r=so.now(),n=({timestamp:i})=>{const s=i-r;s>=e&&(_a(n),t(s-e))};return Nr.read(n,!0),()=>_a(n)}function pJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}function gJ(t,e,r){const n=Xn(t)?t:ih(t);return n.start(rb("",n,e,r)),n.animation}const Cc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ch=typeof window<"u"&&window.MotionDebug!==void 0,vb=["","X","Y","Z"],mJ={visibility:"hidden"},VS=1e3;let vJ=0;function bb(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function GS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=WE(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Nr,!(i||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&GS(n)}function YS({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=vJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ch&&(Cc.totalNodes=Cc.resolvedTargetDeltas=Cc.recalculatedProjection=0),this.nodes.forEach(wJ),this.nodes.forEach(AJ),this.nodes.forEach(PJ),this.nodes.forEach(xJ),ch&&window.MotionDebug.record(Cc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new hJ)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new sb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=pJ(o),this.instance=o;const{layoutId:u,layout:l,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||u)&&(this.isLayoutDirty=!0),t){let p;const y=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=dJ(y,250),Z0.hasAnimatedSinceResize&&(Z0.hasAnimatedSinceResize=!1,this.nodes.forEach(XS))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||l)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeTargetChanged:_,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||d.getDefaultTransition()||RJ,{onLayoutAnimationStart:L,onLayoutAnimationComplete:B}=d.getProps(),k=!this.targetLayout||!HS(this.targetLayout,M)||_,H=!y&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||H||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,H);const U={...Tv(O,"layout"),onPlay:L,onComplete:B};(d.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U)}else y||XS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_a(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MJ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(JS);return}this.isUpdating||this.nodes.forEach(EJ),this.isUpdating=!1,this.nodes.forEach(SJ),this.nodes.forEach(bJ),this.nodes.forEach(yJ),this.clearAllSnapshots();const a=so.now();zn.delta=Ea(0,1e3/60,a-zn.timestamp),zn.timestamp=a,zn.isProcessing=!0,Rv.update.process(zn),Rv.preRender.process(zn),Rv.render.process(zn),zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_J),this.sharedNodes.forEach(IJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!US(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,d=l!==this.prevTransformTemplateValue;o&&(a||Ic(this.latestValues)||d)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),DJ(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return fn();const u=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(OJ))){const{scroll:d}=this.root;d&&(zu(u.x,d.offset.x),zu(u.y,d.offset.y))}return u}removeElementScroll(o){var a;const u=fn();if(ss(u,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let l=0;l<this.path.length;l++){const d=this.path[l],{scroll:p,options:y}=d;d!==this.root&&p&&y.layoutScroll&&(p.wasRoot&&ss(u,o),zu(u.x,p.offset.x),zu(u.y,p.offset.y))}return u}applyTransform(o,a=!1){const u=fn();ss(u,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Hu(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ic(d.latestValues)&&Hu(u,d.latestValues)}return Ic(this.latestValues)&&Hu(u,this.latestValues),u}removeTransform(o){const a=fn();ss(a,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!Ic(l.latestValues))continue;db(l.latestValues)&&l.updateSnapshot();const d=fn(),p=l.measurePageBox();ss(d,p),FS(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,d)}return Ic(this.latestValues)&&FS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=zn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),oh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fn(),this.targetWithTransforms=fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),NY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ss(this.target,this.layout.layoutBox),wS(this.target,this.targetDelta)):ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),oh(this.relativeTargetOrigin,this.target,_.target),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ch&&Cc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||db(this.parent.latestValues)||vS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===zn.timestamp&&(l=!1),l)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;ss(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,_=this.treeScale.y;zY(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=fn());const{target:M}=a;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kS(this.prevProjectionDelta.x,this.projectionDelta.x),kS(this.prevProjectionDelta.y,this.projectionDelta.y)),sh(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==_||!KS(this.projectionDelta.x,this.prevProjectionDelta.x)||!KS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",M)),ch&&Cc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qu(),this.projectionDelta=qu(),this.projectionDeltaWithTransform=qu()}setAnimationOrigin(o,a=!1){const u=this.snapshot,l=u?u.latestValues:{},d={...this.latestValues},p=qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const y=fn(),_=u?u.source:void 0,M=this.layout?this.layout.source:void 0,O=_!==M,L=this.getStack(),B=!L||L.members.length<=1,k=!!(O&&!B&&this.options.crossfade===!0&&!this.path.some(TJ));this.animationProgress=0;let H;this.mixTargetDelta=U=>{const z=U/1e3;ZS(p.x,o.x,z),ZS(p.y,o.y,z),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oh(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CJ(this.relativeTarget,this.relativeTargetOrigin,y,z),H&&cJ(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=fn()),ss(H,this.relativeTarget)),O&&(this.animationValues=d,rJ(d,l,this.latestValues,z,k,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_a(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nr.update(()=>{Z0.hasAnimatedSinceResize=!0,this.currentAnimation=gJ(0,VS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:l,latestValues:d}=o;if(!(!a||!u||!l)){if(this!==o&&this.layout&&l&&n7(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||fn();const p=Ni(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const y=Ni(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+y}ss(a,u),Hu(a,d),sh(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uJ),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const l={};u.z&&bb("z",o,l,this.animationValues);for(let d=0;d<vb.length;d++)bb(`rotate${vb[d]}`,o,l,this.animationValues),bb(`skew${vb[d]}`,o,l,this.animationValues);o.render();for(const d in l)o.setStaticValue(d,l[d]),this.animationValues&&(this.animationValues[d]=l[d]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return mJ;const l={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=ep(o==null?void 0:o.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none",l;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=ep(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ic(this.latestValues)&&(O.transform=d?d({},""):"none",this.hasProjected=!1),O}const y=p.animationValues||p.latestValues;this.applyTransformsToTarget(),l.transform=fJ(this.projectionDeltaWithTransform,this.treeScale,y),d&&(l.transform=d(y,l.transform));const{x:_,y:M}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${M.origin*100}% 0`,p.animationValues?l.opacity=p===this?(u=(a=y.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:l.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const O in Q0){if(y[O]===void 0)continue;const{correct:L,applyTo:B}=Q0[O],k=l.transform==="none"?y[O]:L(y[O],p);if(B){const H=B.length;for(let U=0;U<H;U++)l[B[U]]=k}else l[O]=k}return this.options.layoutId&&(l.pointerEvents=p===this?ep(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(JS),this.root.sharedNodes.clear()}}}function bJ(t){t.updateLayout()}function yJ(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,o=r.source!==t.layout.source;s==="size"?is(p=>{const y=o?r.measuredBox[p]:r.layoutBox[p],_=Ni(y);y.min=n[p].min,y.max=y.min+_}):n7(s,r.layoutBox,n)&&is(p=>{const y=o?r.measuredBox[p]:r.layoutBox[p],_=Ni(n[p]);y.max=y.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+_)});const a=qu();sh(a,n,r.layoutBox);const u=qu();o?sh(u,t.applyTransform(i,!0),r.measuredBox):sh(u,n,r.layoutBox);const l=!US(a);let d=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:y,layout:_}=p;if(y&&_){const M=fn();oh(M,r.layoutBox,y.layoutBox);const O=fn();oh(O,n,_.layoutBox),HS(M,O)||(d=!0),p.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=M,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:u,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function wJ(t){ch&&Cc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _J(t){t.clearSnapshot()}function JS(t){t.clearMeasurements()}function EJ(t){t.isLayoutDirty=!1}function SJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function XS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AJ(t){t.resolveTargetDelta()}function PJ(t){t.calcProjection()}function MJ(t){t.resetSkewAndRotation()}function IJ(t){t.removeLeadSnapshot()}function ZS(t,e,r){t.translate=Zr(e.translate,0,r),t.scale=Zr(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function QS(t,e,r,n){t.min=Zr(e.min,r.min,n),t.max=Zr(e.max,r.max,n)}function CJ(t,e,r,n){QS(t.x,e.x,r.x,n),QS(t.y,e.y,r.y,n)}function TJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const RJ={duration:.45,ease:[.4,0,.1,1]},e7=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),t7=e7("applewebkit/")&&!e7("chrome/")?Math.round:qn;function r7(t){t.min=t7(t.min),t.max=t7(t.max)}function DJ(t){r7(t.x),r7(t.y)}function n7(t,e,r){return t==="position"||t==="preserve-aspect"&&!OY(WS(e),WS(r),.2)}function OJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const NJ=YS({attachResizeListener:(t,e)=>Lo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yb={current:void 0},i7=YS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!yb.current){const t=new NJ({});t.mount(window),t.setOptions({layoutScroll:!0}),yb.current=t}return yb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LJ={pan:{Feature:YY},drag:{Feature:GY,ProjectionNode:i7,MeasureLayout:CS}};function s7(t,e){const r=e?"pointerenter":"pointerleave",n=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||iS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const u=a[n];u&&Nr.postRender(()=>u(s,o))};return ko(t.current,r,i,{passive:!t.getProps()[n]})}class kJ extends Pa{mount(){this.unmount=No(s7(this.node,!0),s7(this.node,!1))}unmount(){}}class BJ extends Pa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=No(Lo(this.node.current,"focus",()=>this.onFocus()),Lo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const o7=(t,e)=>e?t===e?!0:o7(t,e.parentElement):!1;function wb(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,G0(r))}class $J extends Pa{constructor(){super(...arguments),this.removeStartListeners=qn,this.removeEndListeners=qn,this.removeAccessibleListeners=qn,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=ko(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:d,globalTapTarget:p}=this.node.getProps(),y=!p&&!o7(this.node.current,a.target)?d:l;y&&Nr.update(()=>y(a,u))},{passive:!(n.onTap||n.onPointerUp)}),o=ko(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=No(s,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||wb("up",(u,l)=>{const{onTap:d}=this.node.getProps();d&&Nr.postRender(()=>d(u,l))})};this.removeEndListeners(),this.removeEndListeners=Lo(this.node.current,"keyup",o),wb("down",(a,u)=>{this.startPress(a,u)})},r=Lo(this.node.current,"keydown",e),n=()=>{this.isPressing&&wb("cancel",(s,o)=>this.cancelPress(s,o))},i=Lo(this.node.current,"blur",n);this.removeAccessibleListeners=No(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Nr.postRender(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!iS()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Nr.postRender(()=>n(e,r))}mount(){const e=this.node.getProps(),r=ko(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Lo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=No(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const xb=new WeakMap,_b=new WeakMap,FJ=t=>{const e=xb.get(t.target);e&&e(t)},jJ=t=>{t.forEach(FJ)};function UJ({root:t,...e}){const r=t||document;_b.has(r)||_b.set(r,{});const n=_b.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(jJ,{root:t,...e})),n[i]}function qJ(t,e,r){const n=UJ(e);return xb.set(t,r),n.observe(t),()=>{xb.delete(t),n.unobserve(t)}}const zJ={some:0,all:1};class HJ extends Pa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:zJ[i]},a=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),y=l?d:p;y&&y(u)};return qJ(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(WJ(e,r))&&this.startObserver()}unmount(){}}function WJ({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const KJ={inView:{Feature:HJ},tap:{Feature:$J},focus:{Feature:BJ},hover:{Feature:kJ}},VJ={layout:{ProjectionNode:i7,MeasureLayout:CS}},Eb=Ee.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),tp=Ee.createContext({}),Sb=typeof window<"u",a7=Sb?Ee.useLayoutEffect:Ee.useEffect,c7=Ee.createContext({strict:!1});function GJ(t,e,r,n,i){var s,o;const{visualElement:a}=Ee.useContext(tp),u=Ee.useContext(c7),l=Ee.useContext(X0),d=Ee.useContext(Eb).reducedMotion,p=Ee.useRef();n=n||u.renderer,!p.current&&n&&(p.current=n(t,{visualState:e,parent:a,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const y=p.current,_=Ee.useContext(MS);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&YJ(p.current,r,i,_);const M=Ee.useRef(!1);Ee.useInsertionEffect(()=>{y&&M.current&&y.update(r,l)});const O=r[HE],L=Ee.useRef(!!O&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,O))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,O)));return a7(()=>{y&&(M.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),mb.render(y.render),L.current&&y.animationState&&y.animationState.animateChanges())}),Ee.useEffect(()=>{y&&(!L.current&&y.animationState&&y.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)===null||B===void 0||B.call(window,O)}),L.current=!1))}),y}function YJ(t,e,r,n){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:l}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:u7(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Uu(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:u,layoutRoot:l})}function u7(t){if(t)return t.options.allowProjection!==!1?t.projection:u7(t.parent)}function JJ(t,e,r){return Ee.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Uu(r)&&(r.current=n))},[e])}function rp(t){return $0(t.animate)||Cv.some(e=>Jl(t[e]))}function f7(t){return!!(rp(t)||t.variants)}function XJ(t,e){if(rp(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Jl(r)?r:void 0,animate:Jl(n)?n:void 0}}return t.inherit!==!1?e:{}}function ZJ(t){const{initial:e,animate:r}=XJ(t,Ee.useContext(tp));return Ee.useMemo(()=>({initial:e,animate:r}),[l7(e),l7(r)])}function l7(t){return Array.isArray(t)?t.join(" "):t}const h7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wu={};for(const t in h7)Wu[t]={isEnabled:e=>h7[t].some(r=>!!e[r])};function QJ(t){for(const e in t)Wu[e]={...Wu[e],...t[e]}}const eX=Symbol.for("motionComponentSymbol");function tX({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){t&&QJ(t);function s(a,u){let l;const d={...Ee.useContext(Eb),...a,layoutId:rX(a)},{isStatic:p}=d,y=ZJ(a),_=n(a,p);if(!p&&Sb){nX(d,t);const M=iX(d);l=M.MeasureLayout,y.visualElement=GJ(i,_,d,e,M.ProjectionNode)}return le.jsxs(tp.Provider,{value:y,children:[l&&y.visualElement?le.jsx(l,{visualElement:y.visualElement,...d}):null,r(i,a,JJ(_,y.visualElement,u),_,p,y.visualElement)]})}const o=Ee.forwardRef(s);return o[eX]=i,o}function rX({layoutId:t}){const e=Ee.useContext(gb).id;return e&&t!==void 0?e+"-"+t:t}function nX(t,e){const r=Ee.useContext(c7).strict;if(process.env.NODE_ENV!=="production"&&e&&r){const n="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";t.ignoreStrict?ku(!1,n):Oo(!1,n)}}function iX(t){const{drag:e,layout:r}=Wu;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const sX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ab(t){return typeof t!="string"||t.includes("-")?!1:!!(sX.indexOf(t)>-1||/[A-Z]/u.test(t))}function d7(t,{style:e,vars:r},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const s in r)t.style.setProperty(s,r[s])}const p7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function g7(t,e,r,n){d7(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(p7.has(i)?i:ob(i),e.attrs[i])}function m7(t,{layout:e,layoutId:r}){return Sc.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Q0[t]||t==="opacity")}function Pb(t,e,r){var n;const{style:i}=t,s={};for(const o in i)(Xn(i[o])||e.style&&Xn(e.style[o])||m7(o,t)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function v7(t,e,r){const n=Pb(t,e,r);for(const i in t)if(Xn(t[i])||Xn(e[i])){const s=Xl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=t[i]}return n}function Mb(t){const e=Ee.useRef(null);return e.current===null&&(e.current=t()),e.current}function oX({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,i,s){const o={latestValues:aX(n,i,s,t),renderState:e()};return r&&(o.mount=a=>r(n,a,o)),o}const b7=t=>(e,r)=>{const n=Ee.useContext(tp),i=Ee.useContext(X0),s=()=>oX(t,e,n,i);return r?s():Mb(s)};function aX(t,e,r,n){const i={},s=n(t,{});for(const y in s)i[y]=ep(s[y]);let{initial:o,animate:a}=t;const u=rp(t),l=f7(t);e&&l&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const p=d?a:o;if(p&&typeof p!="boolean"&&!$0(p)){const y=Array.isArray(p)?p:[p];for(let _=0;_<y.length;_++){const M=Mv(t,y[_]);if(M){const{transitionEnd:O,transition:L,...B}=M;for(const k in B){let H=B[k];if(Array.isArray(H)){const U=d?H.length-1:0;H=H[U]}H!==null&&(i[k]=H)}for(const k in O)i[k]=O[k]}}}return i}const Ib=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),y7=()=>({...Ib(),attrs:{}}),w7=(t,e)=>e&&typeof t=="number"?e.transform(t):t,cX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uX=Xl.length;function fX(t,e,r){let n="",i=!0;for(let s=0;s<uX;s++){const o=Xl[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||r){const l=w7(a,zv[o]);if(!u){i=!1;const d=cX[o]||o;n+=`${d}(${l}) `}r&&(e[o]=l)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function Cb(t,e,r){const{style:n,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const l=e[u];if(Sc.has(u)){o=!0;continue}else if(rE(u)){i[u]=l;continue}else{const d=w7(l,zv[u]);u.startsWith("origin")?(a=!0,s[u]=d):n[u]=d}}if(e.transform||(o||r?n.transform=fX(e,t.transform,r):n.transform&&(n.transform="none")),a){const{originX:u="50%",originY:l="50%",originZ:d=0}=s;n.transformOrigin=`${u} ${l} ${d}`}}function x7(t,e,r){return typeof t=="string"?t:zt.transform(e+r*t)}function lX(t,e,r){const n=x7(e,t.x,t.width),i=x7(r,t.y,t.height);return`${n} ${i}`}const hX={offset:"stroke-dashoffset",array:"stroke-dasharray"},dX={offset:"strokeDashoffset",array:"strokeDasharray"};function pX(t,e,r=1,n=0,i=!0){t.pathLength=1;const s=i?hX:dX;t[s.offset]=zt.transform(-n);const o=zt.transform(e),a=zt.transform(r);t[s.array]=`${o} ${a}`}function Tb(t,{attrX:e,attrY:r,attrScale:n,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...l},d,p){if(Cb(t,l,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:_,dimensions:M}=t;y.transform&&(M&&(_.transform=y.transform),delete y.transform),M&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=lX(M,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),r!==void 0&&(y.y=r),n!==void 0&&(y.scale=n),o!==void 0&&pX(y,o,a,u,!1)}const Rb=t=>typeof t=="string"&&t.toLowerCase()==="svg",gX={useVisualState:b7({scrapeMotionValuesFromProps:v7,createRenderState:y7,onMount:(t,e,{renderState:r,latestValues:n})=>{Nr.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Nr.render(()=>{Tb(r,n,Rb(e.tagName),t.transformTemplate),g7(e,r)})}})},mX={useVisualState:b7({scrapeMotionValuesFromProps:Pb,createRenderState:Ib})};function _7(t,e,r){for(const n in e)!Xn(e[n])&&!m7(n,r)&&(t[n]=e[n])}function vX({transformTemplate:t},e){return Ee.useMemo(()=>{const r=Ib();return Cb(r,e,t),Object.assign({},r.vars,r.style)},[e])}function bX(t,e){const r=t.style||{},n={};return _7(n,r,t),Object.assign(n,vX(t,e)),n}function yX(t,e){const r={},n=bX(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const wX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function np(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wX.has(t)}let E7=t=>!np(t);function xX(t){t&&(E7=e=>e.startsWith("on")?!np(e):t(e))}try{xX(require("@emotion/is-prop-valid").default)}catch{}function _X(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(E7(i)||r===!0&&np(i)||!e&&!np(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function EX(t,e,r,n){const i=Ee.useMemo(()=>{const s=y7();return Tb(s,e,Rb(n),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};_7(s,t.style,t),i.style={...s,...i.style}}return i}function SX(t=!1){return(r,n,i,{latestValues:s},o)=>{const u=(Ab(r)?EX:yX)(n,s,o,r),l=_X(n,typeof r=="string",t),d=r!==Ee.Fragment?{...l,...u,ref:i}:{},{children:p}=n,y=Ee.useMemo(()=>Xn(p)?p.get():p,[p]);return Ee.createElement(r,{...d,children:y})}}function AX(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Ab(n)?gX:mX,preloadedFeatures:t,useRender:SX(i),createVisualElement:e,Component:n};return tX(o)}}const Db={current:null},S7={current:!1};function PX(){if(S7.current=!0,!!Sb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Db.current=t.matches;t.addListener(e),e()}else Db.current=!1}function MX(t,e,r){for(const n in e){const i=e[n],s=r[n];if(Xn(i))t.addValue(n,i),process.env.NODE_ENV==="development"&&B0(i.version==="11.11.17",`Attempting to mix Motion versions ${i.version} with 11.11.17 may not work as expected.`);else if(Xn(s))t.addValue(n,ih(i,{owner:t}));else if(s!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,ih(o!==void 0?o:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const A7=new WeakMap,IX=[...uE,Jn,Aa],CX=t=>IX.find(cE(t)),P7=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TX{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Bv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=so.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Nr.render(this.render,!1,!0))};const{latestValues:u,renderState:l}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=rp(r),this.isVariantNode=f7(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(r,{},this);for(const y in p){const _=p[y];u[y]!==void 0&&Xn(_)&&_.set(u[y],!1)}}mount(e){this.current=e,A7.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),S7.current||PX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Db.current,process.env.NODE_ENV!=="production"&&B0(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected."),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){A7.delete(this.current),this.projection&&this.projection.unmount(),_a(this.notifyUpdate),_a(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Sc.has(e),i=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Nr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Wu){const r=Wu[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<P7.length;n++){const i=P7[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=MX(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=ih(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(eE(i)||Q8(i))?i=parseFloat(i):!CX(i)&&Aa.test(r)&&(i=wE(e,r)),this.setBaseTarget(e,Xn(i)?i.get():i)),Xn(i)?i.get():i}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=Mv(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new sb),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class M7 extends TX{constructor(){super(...arguments),this.KeyframeResolver=xE}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}}function RX(t){return window.getComputedStyle(t)}class DX extends M7{constructor(){super(...arguments),this.type="html",this.renderInstance=d7}readValueFromInstance(e,r){if(Sc.has(r)){const n=Hv(r);return n&&n.default||0}else{const n=RX(e),i=(rE(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return SS(e,r)}build(e,r,n){Cb(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return Pb(e,r,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class OX extends M7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fn}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Sc.has(r)){const n=Hv(r);return n&&n.default||0}return r=p7.has(r)?r:ob(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return v7(e,r,n)}build(e,r,n){Tb(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,i){g7(e,r,n,i)}mount(e){this.isSVGTag=Rb(e.tagName),super.mount(e)}}const NX=(t,e)=>Ab(t)?new OX(e):new DX(e,{allowProjection:t!==Ee.Fragment}),LX=AX({...SY,...KJ,...LJ,...VJ},NX),kX=vV(LX);class BX extends Yt.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $X({children:t,isPresent:e}){const r=Ee.useId(),n=Ee.useRef(null),i=Ee.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Ee.useContext(Eb);return Ee.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:l}=i.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),le.jsx(BX,{isPresent:e,childRef:n,sizeRef:i,children:Yt.cloneElement(t,{ref:n})})}const FX=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Mb(jX),u=Ee.useId(),l=Ee.useCallback(p=>{a.set(p,!0);for(const y of a.values())if(!y)return;n&&n()},[a,n]),d=Ee.useMemo(()=>({id:u,initial:e,isPresent:r,custom:i,onExitComplete:l,register:p=>(a.set(p,!1),()=>a.delete(p))}),s?[Math.random(),l]:[r,l]);return Ee.useMemo(()=>{a.forEach((p,y)=>a.set(y,!1))},[r]),Yt.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(t=le.jsx($X,{isPresent:r,children:t})),le.jsx(X0.Provider,{value:d,children:t})};function jX(){return new Map}const ip=t=>t.key||"";function I7(t){const e=[];return Ee.Children.forEach(t,r=>{Ee.isValidElement(r)&&e.push(r)}),e}const UX=({children:t,exitBeforeEnter:e,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{Oo(!e,"Replace exitBeforeEnter with mode='wait'");const a=Ee.useMemo(()=>I7(t),[t]),u=a.map(ip),l=Ee.useRef(!0),d=Ee.useRef(a),p=Mb(()=>new Map),[y,_]=Ee.useState(a),[M,O]=Ee.useState(a);a7(()=>{l.current=!1,d.current=a;for(let k=0;k<M.length;k++){const H=ip(M[k]);u.includes(H)?p.delete(H):p.get(H)!==!0&&p.set(H,!1)}},[M,u.length,u.join("-")]);const L=[];if(a!==y){let k=[...a];for(let H=0;H<M.length;H++){const U=M[H],z=ip(U);u.includes(z)||(k.splice(H,0,U),L.push(U))}o==="wait"&&L.length&&(k=L),O(I7(k)),_(a);return}process.env.NODE_ENV!=="production"&&o==="wait"&&M.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:B}=Ee.useContext(gb);return le.jsx(le.Fragment,{children:M.map(k=>{const H=ip(k),U=a===M||u.includes(H),z=()=>{if(p.has(H))p.set(H,!0);else return;let Z=!0;p.forEach(R=>{R||(Z=!1)}),Z&&(B==null||B(),O(d.current),i&&i())};return le.jsx(FX,{isPresent:U,initial:!l.current||n?void 0:!1,custom:U?void 0:r,presenceAffectsLayout:s,mode:o,onExitComplete:U?void 0:z,children:k},H)})})},Ms=t=>le.jsx(UX,{children:le.jsx(kX.div,{initial:{x:0,opacity:0},animate:{x:0,opacity:1},exit:{x:30,opacity:0},transition:{duration:.3},className:t.className,children:t.children})});function Ob(t){const{icon:e,title:r,extra:n,onClick:i}=t;function s(){i&&i()}return le.jsxs("div",{className:"xc-rounded-lg xc-group xc-flex xc-cursor-pointer xc-items-center xc-gap-2 xc-border xc-border-white xc-border-opacity-15 xc-px-4 xc-py-2 xc-transition-all hover:xc-shadow-lg",onClick:s,children:[e,r,le.jsxs("div",{className:"xc-relative xc-ml-auto xc-h-6",children:[le.jsx("div",{className:"xc-relative xc-left-0 xc-opacity-100 xc-transition-all group-hover:xc-left-2 group-hover:xc-opacity-0",children:n}),le.jsx("div",{className:"xc-absolute xc-right-2 xc-top-0 xc-text-gray-400 xc-opacity-0 xc-transition-all group-hover:xc-right-0 group-hover:xc-opacity-100",children:le.jsx(fV,{})})]})]})}function qX(t){return t.lastUsed?le.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2 xc-rounded-full xc-py-1 xc-text-xs xc-text-gray-500",children:[le.jsx("div",{className:"xc-h-1 xc-w-1 xc-rounded-full xc-bg-[#009E8C]"}),"Last Used"]}):t.installed?le.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2 xc-rounded-full xc-py-1 xc-text-xs xc-text-gray-500",children:[le.jsx("div",{className:"xc-h-1 xc-w-1 xc-rounded-full xc-bg-[#2596FF]"}),"Installed"]}):null}function C7(t){var o,a;const{wallet:e,onClick:r}=t,n=le.jsx("img",{className:"xc-rounded-md xc-h-5 xc-w-5",src:(o=e.config)==null?void 0:o.image}),i=((a=e.config)==null?void 0:a.name)||"",s=Ee.useMemo(()=>qX(e),[e]);return le.jsx(Ob,{icon:n,title:i,extra:s,onClick:()=>r(e)})}function T7(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=T7(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function zX(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=T7(t))&&(n&&(n+=" "),n+=e);return n}const HX=zX,Nb="-",WX=t=>{const e=VX(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const a=o.split(Nb);return a[0]===""&&a.length!==1&&a.shift(),R7(a,e)||KX(o)},getConflictingClassGroupIds:(o,a)=>{const u=r[o]||[];return a&&n[o]?[...u,...n[o]]:u}}},R7=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?R7(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Nb);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},D7=/^\[(.+)\]$/,KX=t=>{if(D7.test(t)){const e=D7.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},VX=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return YX(Object.entries(t.classGroups),r).forEach(([s,o])=>{Lb(o,n,s,e)}),n},Lb=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:O7(e,i);s.classGroupId=r;return}if(typeof i=="function"){if(GX(i)){Lb(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,o])=>{Lb(o,O7(e,s),r,n)})})},O7=(t,e)=>{let r=t;return e.split(Nb).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},GX=t=>t.isThemeGetter,YX=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[r,i]}):t,JX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,o)=>{r.set(s,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){r.has(s)?r.set(s,o):i(s,o)}}},N7="!",XX=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,o=a=>{const u=[];let l=0,d=0,p;for(let L=0;L<a.length;L++){let B=a[L];if(l===0){if(B===i&&(n||a.slice(L,L+s)===e)){u.push(a.slice(d,L)),d=L+s;continue}if(B==="/"){p=L;continue}}B==="["?l++:B==="]"&&l--}const y=u.length===0?a:a.substring(d),_=y.startsWith(N7),M=_?y.substring(1):y,O=p&&p>d?p-d:void 0;return{modifiers:u,hasImportantModifier:_,baseClassName:M,maybePostfixModifierPosition:O}};return r?a=>r({className:a,parseClassName:o}):o},ZX=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},QX=t=>({cache:JX(t.cacheSize),parseClassName:XX(t),...WX(t)}),eZ=/\s+/,tZ=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(eZ);let a="";for(let u=o.length-1;u>=0;u-=1){const l=o[u],{modifiers:d,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:_}=r(l);let M=!!_,O=n(M?y.substring(0,_):y);if(!O){if(!M){a=l+(a.length>0?" "+a:a);continue}if(O=n(y),!O){a=l+(a.length>0?" "+a:a);continue}M=!1}const L=ZX(d).join(":"),B=p?L+N7:L,k=B+O;if(s.includes(k))continue;s.push(k);const H=i(O,M);for(let U=0;U<H.length;++U){const z=H[U];s.push(B+z)}a=l+(a.length>0?" "+a:a)}return a};function rZ(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=L7(e))&&(n&&(n+=" "),n+=r);return n}const L7=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=L7(t[n]))&&(r&&(r+=" "),r+=e);return r};function nZ(t,...e){let r,n,i,s=o;function o(u){const l=e.reduce((d,p)=>p(d),t());return r=QX(l),n=r.cache.get,i=r.cache.set,s=a,a(u)}function a(u){const l=n(u);if(l)return l;const d=tZ(u,r);return i(u,d),d}return function(){return s(rZ.apply(null,arguments))}}const Gr=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},k7=/^\[(?:([a-z-]+):)?(.+)\]$/i,iZ=/^\d+\/\d+$/,sZ=new Set(["px","full","screen"]),oZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,uZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bo=t=>Ku(t)||sZ.has(t)||iZ.test(t),Ma=t=>Vu(t,"length",bZ),Ku=t=>!!t&&!Number.isNaN(Number(t)),kb=t=>Vu(t,"number",Ku),uh=t=>!!t&&Number.isInteger(Number(t)),lZ=t=>t.endsWith("%")&&Ku(t.slice(0,-1)),cr=t=>k7.test(t),Ia=t=>oZ.test(t),hZ=new Set(["length","size","percentage"]),dZ=t=>Vu(t,hZ,B7),pZ=t=>Vu(t,"position",B7),gZ=new Set(["image","url"]),mZ=t=>Vu(t,gZ,wZ),vZ=t=>Vu(t,"",yZ),fh=()=>!0,Vu=(t,e,r)=>{const n=k7.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},bZ=t=>aZ.test(t)&&!cZ.test(t),B7=()=>!1,yZ=t=>uZ.test(t),wZ=t=>fZ.test(t),xZ=nZ(()=>{const t=Gr("colors"),e=Gr("spacing"),r=Gr("blur"),n=Gr("brightness"),i=Gr("borderColor"),s=Gr("borderRadius"),o=Gr("borderSpacing"),a=Gr("borderWidth"),u=Gr("contrast"),l=Gr("grayscale"),d=Gr("hueRotate"),p=Gr("invert"),y=Gr("gap"),_=Gr("gradientColorStops"),M=Gr("gradientColorStopPositions"),O=Gr("inset"),L=Gr("margin"),B=Gr("opacity"),k=Gr("padding"),H=Gr("saturate"),U=Gr("scale"),z=Gr("sepia"),Z=Gr("skew"),R=Gr("space"),W=Gr("translate"),ie=()=>["auto","contain","none"],me=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",cr,e],E=()=>[cr,e],m=()=>["",Bo,Ma],f=()=>["auto",Ku,cr],g=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],v=()=>["solid","dashed","dotted","double","none"],x=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",cr],b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>[Ku,cr];return{cacheSize:500,separator:":",theme:{colors:[fh],spacing:[Bo,Ma],blur:["none","",Ia,cr],brightness:P(),borderColor:[t],borderRadius:["none","","full",Ia,cr],borderSpacing:E(),borderWidth:m(),contrast:P(),grayscale:A(),hueRotate:P(),invert:A(),gap:E(),gradientColorStops:[t],gradientColorStopPositions:[lZ,Ma],inset:j(),margin:j(),opacity:P(),padding:E(),saturate:P(),scale:P(),sepia:A(),skew:P(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",cr]}],container:["container"],columns:[{columns:[Ia]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...g(),cr]}],overflow:[{overflow:me()}],"overflow-x":[{"overflow-x":me()}],"overflow-y":[{"overflow-y":me()}],overscroll:[{overscroll:ie()}],"overscroll-x":[{"overscroll-x":ie()}],"overscroll-y":[{"overscroll-y":ie()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[O]}],"inset-x":[{"inset-x":[O]}],"inset-y":[{"inset-y":[O]}],start:[{start:[O]}],end:[{end:[O]}],top:[{top:[O]}],right:[{right:[O]}],bottom:[{bottom:[O]}],left:[{left:[O]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uh,cr]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",cr]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",uh,cr]}],"grid-cols":[{"grid-cols":[fh]}],"col-start-end":[{col:["auto",{span:["full",uh,cr]},cr]}],"col-start":[{"col-start":f()}],"col-end":[{"col-end":f()}],"grid-rows":[{"grid-rows":[fh]}],"row-start-end":[{row:["auto",{span:[uh,cr]},cr]}],"row-start":[{"row-start":f()}],"row-end":[{"row-end":f()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",cr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",cr]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...S()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...S(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...S(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[L]}],mx:[{mx:[L]}],my:[{my:[L]}],ms:[{ms:[L]}],me:[{me:[L]}],mt:[{mt:[L]}],mr:[{mr:[L]}],mb:[{mb:[L]}],ml:[{ml:[L]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",cr,e]}],"min-w":[{"min-w":[cr,e,"min","max","fit"]}],"max-w":[{"max-w":[cr,e,"none","full","min","max","fit","prose",{screen:[Ia]},Ia]}],h:[{h:[cr,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[cr,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[cr,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[cr,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ia,Ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",kb]}],"font-family":[{font:[fh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",cr]}],"line-clamp":[{"line-clamp":["none",Ku,kb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Bo,cr]}],"list-image":[{"list-image":["none",cr]}],"list-style-type":[{list:["none","disc","decimal",cr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...v(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Bo,Ma]}],"underline-offset":[{"underline-offset":["auto",Bo,cr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",cr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",cr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...g(),pZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",dZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mZ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[M]}],"gradient-via-pos":[{via:[M]}],"gradient-to-pos":[{to:[M]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...v(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:v()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...v()]}],"outline-offset":[{"outline-offset":[Bo,cr]}],"outline-w":[{outline:[Bo,Ma]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:m()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[Bo,Ma]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ia,vZ]}],"shadow-color":[{shadow:[fh]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...x(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":x()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Ia,cr]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[H]}],sepia:[{sepia:[z]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[H]}],"backdrop-sepia":[{"backdrop-sepia":[z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",cr]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",cr]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",cr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[U]}],"scale-x":[{"scale-x":[U]}],"scale-y":[{"scale-y":[U]}],rotate:[{rotate:[uh,cr]}],"translate-x":[{"translate-x":[W]}],"translate-y":[{"translate-y":[W]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",cr]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",cr]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",cr]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Bo,Ma,kb]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function $o(...t){return xZ(HX(t))}function $7(t){const{className:e}=t;return le.jsxs("div",{className:$o("xc-flex xc-items-center xc-gap-2"),children:[le.jsx("hr",{className:$o("xc-flex-1 xc-border-gray-200",e)}),le.jsx("div",{className:"xc-shrink-0",children:t.children}),le.jsx("hr",{className:$o("xc-flex-1 xc-border-gray-200",e)})]})}function _Z(t){var n,i;const{wallet:e,onClick:r}=t;return le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-gap-4",children:[le.jsx("img",{className:"xc-rounded-md xc-h-16 xc-w-16",src:(n=e.config)==null?void 0:n.image,alt:""}),le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[le.jsxs("p",{className:"xc-text-danger xc-mb-2 xc-text-center",children:["Connect to ",(i=e.config)==null?void 0:i.name]}),le.jsx("div",{className:"xc-flex xc-gap-2",children:le.jsx("button",{className:"xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1",onClick:()=>r(e),children:"Connect"})})]})]})}const EZ="https://static.codatta.io/codatta-connect/wallet-icons.svg?v=2#ton";function SZ(t){const{onClick:e}=t;function r(){e&&e()}return le.jsx($7,{className:"xc-opacity-20",children:le.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2 xc-cursor-pointer",onClick:r,children:[le.jsx("span",{className:"xc-text-sm",children:"View more wallets"}),le.jsx($8,{size:16})]})})}function F7(t){const[e,r]=Ee.useState(""),{featuredWallets:n,initialized:i}=Yl(),{onEmailConfirm:s,onSelectWallet:o,onSelectMoreWallets:a,onSelectTonConnect:u,config:l}=t,d=Ee.useMemo(()=>{const O=/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\u{20000}-\u{2a6df}]|[\u{2a700}-\u{2b73f}]|[\u{2b740}-\u{2b81f}]|[\u{2b820}-\u{2ceaf}]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]/gu,L=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!O.test(e)&&L.test(e)},[e]);function p(O){o(O)}function y(O){r(O.target.value)}async function _(){s(e)}function M(O){O.key==="Enter"&&d&&_()}return le.jsx(Ms,{children:i&&le.jsxs(le.Fragment,{children:[t.header||le.jsx("div",{className:"xc-mb-6 xc-text-xl xc-font-bold",children:"Log in or sign up"}),n.length===1&&le.jsx("div",{className:"xc-mb-4 xc-flex xc-max-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:n.map(O=>le.jsx(_Z,{wallet:O,onClick:p},`feature-${O.key}`))}),n.length>1&&le.jsxs(le.Fragment,{children:[le.jsxs("div",{children:[le.jsxs("div",{className:"xc-mb-4 xc-flex xc-max-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:[l.showFeaturedWallets&&n&&n.map(O=>le.jsx(C7,{wallet:O,onClick:p},`feature-${O.key}`)),l.showTonConnect&&le.jsx(Ob,{icon:le.jsx("img",{className:"xc-h-5 xc-w-5",src:EZ}),title:"TON Connect",onClick:u})]}),l.showMoreWallets&&le.jsx(SZ,{onClick:a})]}),l.showEmailSignIn&&(l.showFeaturedWallets||l.showTonConnect)&&le.jsx("div",{className:"xc-mb-4 xc-mt-4",children:le.jsxs($7,{className:"xc-opacity-20",children:[" ",le.jsx("span",{className:"xc-text-sm xc-opacity-20",children:"OR"})]})}),l.showEmailSignIn&&le.jsxs("div",{className:"xc-mb-4",children:[le.jsx("input",{className:"xc-w-full xc-bg-transparent xc-border-white xc-border xc-border-opacity-15 xc-h-10 xc-rounded-lg xc-px-3 xc-mb-3",placeholder:"Enter your email",type:"email",onChange:y,onKeyDown:M}),le.jsx("button",{disabled:!d,className:"xc-bg-[rgb(135,93,255)] xc-text-white xc-w-full xc-rounded-lg xc-py-2 disabled:xc-bg-opacity-10 disabled:xc-text-opacity-50 disabled:xc-bg-white xc-transition-all",onClick:_,children:"Continue"})]})]})]})})}function Tc(t){const{title:e}=t;return le.jsxs("div",{className:"xc-flex xc-items-center xc-gap-2",children:[le.jsx(uV,{onClick:t.onBack,size:20,className:"xc-cursor-pointer"}),le.jsx("span",{children:e})]})}const j7=Ee.createContext({channel:"",device:"WEB",app:"",inviterCode:"",role:"C"});function Bb(){return Ee.useContext(j7)}function AZ(t){const{config:e}=t,[r,n]=Ee.useState(e.channel),[i,s]=Ee.useState(e.device),[o,a]=Ee.useState(e.app),[u,l]=Ee.useState(e.role||"C"),[d,p]=Ee.useState(e.inviterCode);return Ee.useEffect(()=>{n(e.channel),s(e.device),a(e.app),p(e.inviterCode),l(e.role||"C")},[e]),le.jsx(j7.Provider,{value:{channel:r,device:i,app:o,inviterCode:d,role:u},children:t.children})}var PZ=Object.defineProperty,MZ=Object.defineProperties,IZ=Object.getOwnPropertyDescriptors,sp=Object.getOwnPropertySymbols,U7=Object.prototype.hasOwnProperty,q7=Object.prototype.propertyIsEnumerable,z7=(t,e,r)=>e in t?PZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,CZ=(t,e)=>{for(var r in e||(e={}))U7.call(e,r)&&z7(t,r,e[r]);if(sp)for(var r of sp(e))q7.call(e,r)&&z7(t,r,e[r]);return t},TZ=(t,e)=>MZ(t,IZ(e)),RZ=(t,e)=>{var r={};for(var n in t)U7.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&sp)for(var n of sp(t))e.indexOf(n)<0&&q7.call(t,n)&&(r[n]=t[n]);return r};function DZ(t){let e=setTimeout(t,0),r=setTimeout(t,10),n=setTimeout(t,50);return[e,r,n]}function OZ(t){let e=Yt.useRef();return Yt.useEffect(()=>{e.current=t}),e.current}var NZ=18,H7=40,LZ=`${H7}px`,kZ=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function BZ({containerRef:t,inputRef:e,pushPasswordManagerStrategy:r,isFocused:n}){let[i,s]=Yt.useState(!1),[o,a]=Yt.useState(!1),[u,l]=Yt.useState(!1),d=Yt.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&i&&o,[i,o,r]),p=Yt.useCallback(()=>{let y=t.current,_=e.current;if(!y||!_||u||r==="none")return;let M=y,O=M.getBoundingClientRect().left+M.offsetWidth,L=M.getBoundingClientRect().top+M.offsetHeight/2,B=O-NZ,k=L;document.querySelectorAll(kZ).length===0&&document.elementFromPoint(B,k)===y||(s(!0),l(!0))},[t,e,u,r]);return Yt.useEffect(()=>{let y=t.current;if(!y||r==="none")return;function _(){let O=window.innerWidth-y.getBoundingClientRect().right;a(O>=H7)}_();let M=setInterval(_,1e3);return()=>{clearInterval(M)}},[t,r]),Yt.useEffect(()=>{let y=n||document.activeElement===e.current;if(r==="none"||!y)return;let _=setTimeout(p,0),M=setTimeout(p,2e3),O=setTimeout(p,5e3),L=setTimeout(()=>{l(!0)},6e3);return()=>{clearTimeout(_),clearTimeout(M),clearTimeout(O),clearTimeout(L)}},[e,n,r,p]),{hasPWMBadge:i,willPushPWMBadge:d,PWM_BADGE_SPACE_WIDTH:LZ}}var W7=Yt.createContext({}),K7=Yt.forwardRef((t,e)=>{var r=t,{value:n,onChange:i,maxLength:s,textAlign:o="left",pattern:a,placeholder:u,inputMode:l="numeric",onComplete:d,pushPasswordManagerStrategy:p="increase-width",pasteTransformer:y,containerClassName:_,noScriptCSSFallback:M=$Z,render:O,children:L}=r,B=RZ(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),k,H,U,z,Z;let[R,W]=Yt.useState(typeof B.defaultValue=="string"?B.defaultValue:""),ie=n??R,me=OZ(ie),j=Yt.useCallback(oe=>{i==null||i(oe),W(oe)},[i]),E=Yt.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),m=Yt.useRef(null),f=Yt.useRef(null),g=Yt.useRef({value:ie,onChange:j,isIOS:typeof window<"u"&&((H=(k=window==null?void 0:window.CSS)==null?void 0:k.supports)==null?void 0:H.call(k,"-webkit-touch-callout","none"))}),v=Yt.useRef({prev:[(U=m.current)==null?void 0:U.selectionStart,(z=m.current)==null?void 0:z.selectionEnd,(Z=m.current)==null?void 0:Z.selectionDirection]});Yt.useImperativeHandle(e,()=>m.current,[]),Yt.useEffect(()=>{let oe=m.current,fe=f.current;if(!oe||!fe)return;g.current.value!==oe.value&&g.current.onChange(oe.value),v.current.prev=[oe.selectionStart,oe.selectionEnd,oe.selectionDirection];function be(){if(document.activeElement!==oe){I(null),ce(null);return}let Te=oe.selectionStart,$e=oe.selectionEnd,Ie=oe.selectionDirection,Le=oe.maxLength,Ve=oe.value,ke=v.current.prev,ze=-1,He=-1,Se;if(Ve.length!==0&&Te!==null&&$e!==null){let et=Te===$e,rt=Te===Ve.length&&Ve.length<Le;if(et&&!rt){let Je=Te;if(Je===0)ze=0,He=1,Se="forward";else if(Je===Le)ze=Je-1,He=Je,Se="backward";else if(Le>1&&Ve.length>1){let gt=0;if(ke[0]!==null&&ke[1]!==null){Se=Je<ke[1]?"backward":"forward";let ht=ke[0]===ke[1]&&ke[0]<Le;Se==="backward"&&!ht&&(gt=-1)}ze=gt+Je,He=gt+Je+1}}ze!==-1&&He!==-1&&ze!==He&&m.current.setSelectionRange(ze,He,Se)}let Qe=ze!==-1?ze:Te,ct=He!==-1?He:$e,Be=Se??Ie;I(Qe),ce(ct),v.current.prev=[Qe,ct,Be]}if(document.addEventListener("selectionchange",be,{capture:!0}),be(),document.activeElement===oe&&b(!0),!document.getElementById("input-otp-style")){let Te=document.createElement("style");if(Te.id="input-otp-style",document.head.appendChild(Te),Te.sheet){let $e="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";lh(Te.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),lh(Te.sheet,`[data-input-otp]:autofill { ${$e} }`),lh(Te.sheet,`[data-input-otp]:-webkit-autofill { ${$e} }`),lh(Te.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),lh(Te.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Me=()=>{fe&&fe.style.setProperty("--root-height",`${oe.clientHeight}px`)};Me();let Ne=new ResizeObserver(Me);return Ne.observe(oe),()=>{document.removeEventListener("selectionchange",be,{capture:!0}),Ne.disconnect()}},[]);let[x,S]=Yt.useState(!1),[A,b]=Yt.useState(!1),[P,I]=Yt.useState(null),[F,ce]=Yt.useState(null);Yt.useEffect(()=>{DZ(()=>{var oe,fe,be,Me;(oe=m.current)==null||oe.dispatchEvent(new Event("input"));let Ne=(fe=m.current)==null?void 0:fe.selectionStart,Te=(be=m.current)==null?void 0:be.selectionEnd,$e=(Me=m.current)==null?void 0:Me.selectionDirection;Ne!==null&&Te!==null&&(I(Ne),ce(Te),v.current.prev=[Ne,Te,$e])})},[ie,A]),Yt.useEffect(()=>{me!==void 0&&ie!==me&&me.length<s&&ie.length===s&&(d==null||d(ie))},[s,d,me,ie]);let D=BZ({containerRef:f,inputRef:m,pushPasswordManagerStrategy:p,isFocused:A}),se=Yt.useCallback(oe=>{let fe=oe.currentTarget.value.slice(0,s);if(fe.length>0&&E&&!E.test(fe)){oe.preventDefault();return}typeof me=="string"&&fe.length<me.length&&document.dispatchEvent(new Event("selectionchange")),j(fe)},[s,j,me,E]),ee=Yt.useCallback(()=>{var oe;if(m.current){let fe=Math.min(m.current.value.length,s-1),be=m.current.value.length;(oe=m.current)==null||oe.setSelectionRange(fe,be),I(fe),ce(be)}b(!0)},[s]),J=Yt.useCallback(oe=>{var fe,be;let Me=m.current;if(!y&&(!g.current.isIOS||!oe.clipboardData||!Me))return;let Ne=oe.clipboardData.getData("text/plain"),Te=y?y(Ne):Ne;console.log({_content:Ne,content:Te}),oe.preventDefault();let $e=(fe=m.current)==null?void 0:fe.selectionStart,Ie=(be=m.current)==null?void 0:be.selectionEnd,Le=($e!==Ie?ie.slice(0,$e)+Te+ie.slice(Ie):ie.slice(0,$e)+Te+ie.slice($e)).slice(0,s);if(Le.length>0&&E&&!E.test(Le))return;Me.value=Le,j(Le);let Ve=Math.min(Le.length,s-1),ke=Le.length;Me.setSelectionRange(Ve,ke),I(Ve),ce(ke)},[s,j,E,ie]),Q=Yt.useMemo(()=>({position:"relative",cursor:B.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[B.disabled]),T=Yt.useMemo(()=>({position:"absolute",inset:0,width:D.willPushPWMBadge?`calc(100% + ${D.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:D.willPushPWMBadge?`inset(0 ${D.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[D.PWM_BADGE_SPACE_WIDTH,D.willPushPWMBadge,o]),X=Yt.useMemo(()=>Yt.createElement("input",TZ(CZ({autoComplete:B.autoComplete||"one-time-code"},B),{"data-input-otp":!0,"data-input-otp-placeholder-shown":ie.length===0||void 0,"data-input-otp-mss":P,"data-input-otp-mse":F,inputMode:l,pattern:E==null?void 0:E.source,"aria-placeholder":u,style:T,maxLength:s,value:ie,ref:m,onPaste:oe=>{var fe;J(oe),(fe=B.onPaste)==null||fe.call(B,oe)},onChange:se,onMouseOver:oe=>{var fe;S(!0),(fe=B.onMouseOver)==null||fe.call(B,oe)},onMouseLeave:oe=>{var fe;S(!1),(fe=B.onMouseLeave)==null||fe.call(B,oe)},onFocus:oe=>{var fe;ee(),(fe=B.onFocus)==null||fe.call(B,oe)},onBlur:oe=>{var fe;b(!1),(fe=B.onBlur)==null||fe.call(B,oe)}})),[se,ee,J,l,T,s,F,P,B,E==null?void 0:E.source,ie]),re=Yt.useMemo(()=>({slots:Array.from({length:s}).map((oe,fe)=>{var be;let Me=A&&P!==null&&F!==null&&(P===F&&fe===P||fe>=P&&fe<F),Ne=ie[fe]!==void 0?ie[fe]:null,Te=ie[0]!==void 0?null:(be=u==null?void 0:u[fe])!=null?be:null;return{char:Ne,placeholderChar:Te,isActive:Me,hasFakeCaret:Me&&Ne===null}}),isFocused:A,isHovering:!B.disabled&&x}),[A,x,s,F,P,B.disabled,ie]),ge=Yt.useMemo(()=>O?O(re):Yt.createElement(W7.Provider,{value:re},L),[L,re,O]);return Yt.createElement(Yt.Fragment,null,M!==null&&Yt.createElement("noscript",null,Yt.createElement("style",null,M)),Yt.createElement("div",{ref:f,"data-input-otp-container":!0,style:Q,className:_},ge,Yt.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},X)))});K7.displayName="Input";function lh(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var $Z=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const V7=Yt.forwardRef(({className:t,containerClassName:e,...r},n)=>le.jsx(K7,{ref:n,containerClassName:$o("xc-flex xc-items-center xc-gap-2 xc-has-[:disabled]:opacity-50",e),className:$o("disabled:xc-cursor-not-allowed",t),...r}));V7.displayName="InputOTP";const G7=Yt.forwardRef(({className:t,...e},r)=>le.jsx("div",{ref:r,className:$o("xc-flex xc-items-center",t),...e}));G7.displayName="InputOTPGroup";const Rc=Yt.forwardRef(({index:t,className:e,...r},n)=>{const i=Yt.useContext(W7),{char:s,hasFakeCaret:o,isActive:a}=i.slots[t];return le.jsxs("div",{ref:n,className:$o("xc-relative xc-rounded-xl xc-text-2xl xc-flex xc-h-12 xc-w-12 xc-items-center xc-justify-center xc-border xc-border-white xc-border-opacity-20 xc-transition-all",a&&"xc-z-10 xc-ring-2 xc-ring-ring xc-ring-[rgb(135,93,255)] xc-ring-offset-background",e),...r,children:[s,o&&le.jsx("div",{className:"xc-pointer-events-none xc-absolute xc-inset-0 xc-flex xc-items-center xc-justify-center",children:le.jsx("div",{className:"xc-h-4 xc-w-px xc-animate-caret-blink xc-bg-foreground xc-duration-1000"})})]})});Rc.displayName="InputOTPSlot";function FZ(t){const{spinning:e,children:r,className:n}=t;return le.jsxs("div",{className:"xc-inline-block xc-relative",children:[r,e&&le.jsx("div",{className:$o("xc-absolute xc-top-0 xc-left-0 xc-w-full xc-h-full xc-bg-black xc-bg-opacity-10 xc-flex xc-items-center xc-justify-center",n),children:le.jsx(Ec,{className:"xc-animate-spin"})})]})}function Y7(t){const{email:e}=t,[r,n]=Ee.useState(0),[i,s]=Ee.useState(!1),[o,a]=Ee.useState("");async function u(){n(60);const d=setInterval(()=>{n(p=>p===0?(clearInterval(d),0):p-1)},1e3)}async function l(d){if(a(""),!(d.length<6)){s(!0);try{await t.onInputCode(e,d)}catch(p){a(p.message)}s(!1)}}return Ee.useEffect(()=>{u()},[]),le.jsxs(Ms,{children:[le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-12",children:[le.jsx(gV,{className:"xc-mb-4",size:60}),le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-8 xc-h-16",children:[le.jsx("p",{className:"xc-text-lg xc-mb-1",children:"Weve sent a verification code to"}),le.jsx("p",{className:"xc-font-bold xc-text-center",children:e})]}),le.jsx("div",{className:"xc-mb-2 xc-h-12",children:le.jsx(FZ,{spinning:i,className:"xc-rounded-xl",children:le.jsx(V7,{maxLength:6,onChange:l,disabled:i,className:"disabled:xc-opacity-20",children:le.jsx(G7,{children:le.jsxs("div",{className:$o("xc-flex xc-gap-2",i?"xc-opacity-20":""),children:[le.jsx(Rc,{index:0}),le.jsx(Rc,{index:1}),le.jsx(Rc,{index:2}),le.jsx(Rc,{index:3}),le.jsx(Rc,{index:4}),le.jsx(Rc,{index:5})]})})})})}),o&&le.jsx("div",{className:"xc-text-[#ff0000] xc-text-center",children:le.jsx("p",{children:o})})]}),le.jsxs("div",{className:"xc-text-center xc-text-sm xc-text-gray-400",children:["Not get it? ",r?`Resend in ${r}s`:le.jsx("button",{id:"sendCodeButton",onClick:t.onResendCode,children:"Send again"})]}),le.jsx("div",{id:"captcha-element"})]})}function J7(t){const{email:e}=t,[r,n]=Ee.useState(!1),[i,s]=Ee.useState(""),o=Ee.useMemo(()=>`xn-btn-${new Date().getTime()}`,[e]);async function a(y,_){n(!0),s(""),await xa.getEmailCode({account_type:"email",email:y},_),n(!1)}async function u(y){try{return await a(e,JSON.stringify(y)),{captchaResult:!0,bizResult:!0}}catch(_){return s(_.message),{captchaResult:!1,bizResult:!1}}}async function l(y){y&&t.onCodeSend()}const d=Ee.useRef();function p(y){d.current=y}return Ee.useEffect(()=>{if(e)return window.initAliyunCaptcha({SceneId:"tqyu8129d",prefix:"1mfsn5f",mode:"popup",element:"#captcha-element",button:`#${o}`,captchaVerifyCallback:u,onBizResultCallback:l,getInstance:p,slideStyle:{width:360,height:40},language:"en",region:"cn"}),()=>{var y,_;(y=document.getElementById("aliyunCaptcha-mask"))==null||y.remove(),(_=document.getElementById("aliyunCaptcha-window-popup"))==null||_.remove()}},[e]),le.jsxs(Ms,{children:[le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-mb-12",children:[le.jsx(mV,{className:"xc-mb-4",size:60}),le.jsx("button",{className:"xc-border xc-rounded-full xc-bg-white xc-text-black xc-px-8 xc-py-2",id:o,children:r?le.jsx(Ec,{className:"xc-animate-spin"}):"I'm not a robot"})]}),i&&le.jsx("div",{className:"xc-text-[#ff0000] xc-text-center",children:le.jsx("p",{children:i})})]})}function jZ(t){const{email:e}=t,r=Bb(),[n,i]=Ee.useState("captcha");async function s(o,a){const u=await xa.emailLogin({account_type:"email",connector:"codatta_email",account_enum:"C",email_code:a,email:o,inviter_code:r.inviterCode,source:{device:r.device,channel:r.channel,app:r.app}});t.onLogin(u.data)}return le.jsxs(Ms,{children:[le.jsx("div",{className:"xc-mb-12",children:le.jsx(Tc,{title:"Sign in with email",onBack:t.onBack})}),n==="captcha"&&le.jsx(J7,{email:e,onCodeSend:()=>i("verify-email")}),n==="verify-email"&&le.jsx(Y7,{email:e,onInputCode:s,onResendCode:()=>i("captcha")})]})}var X7={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(nn,()=>(()=>{var r={873:(o,a)=>{var u,l,d=function(){var p=function(f,g){var v=f,x=B[g],S=null,A=0,b=null,P=[],I={},F=function(re,ge){S=function(oe){for(var fe=new Array(oe),be=0;be<oe;be+=1){fe[be]=new Array(oe);for(var Me=0;Me<oe;Me+=1)fe[be][Me]=null}return fe}(A=4*v+17),ce(0,0),ce(A-7,0),ce(0,A-7),se(),D(),J(re,ge),v>=7&&ee(re),b==null&&(b=T(v,x,P)),Q(b,ge)},ce=function(re,ge){for(var oe=-1;oe<=7;oe+=1)if(!(re+oe<=-1||A<=re+oe))for(var fe=-1;fe<=7;fe+=1)ge+fe<=-1||A<=ge+fe||(S[re+oe][ge+fe]=0<=oe&&oe<=6&&(fe==0||fe==6)||0<=fe&&fe<=6&&(oe==0||oe==6)||2<=oe&&oe<=4&&2<=fe&&fe<=4)},D=function(){for(var re=8;re<A-8;re+=1)S[re][6]==null&&(S[re][6]=re%2==0);for(var ge=8;ge<A-8;ge+=1)S[6][ge]==null&&(S[6][ge]=ge%2==0)},se=function(){for(var re=k.getPatternPosition(v),ge=0;ge<re.length;ge+=1)for(var oe=0;oe<re.length;oe+=1){var fe=re[ge],be=re[oe];if(S[fe][be]==null)for(var Me=-2;Me<=2;Me+=1)for(var Ne=-2;Ne<=2;Ne+=1)S[fe+Me][be+Ne]=Me==-2||Me==2||Ne==-2||Ne==2||Me==0&&Ne==0}},ee=function(re){for(var ge=k.getBCHTypeNumber(v),oe=0;oe<18;oe+=1){var fe=!re&&(ge>>oe&1)==1;S[Math.floor(oe/3)][oe%3+A-8-3]=fe}for(oe=0;oe<18;oe+=1)fe=!re&&(ge>>oe&1)==1,S[oe%3+A-8-3][Math.floor(oe/3)]=fe},J=function(re,ge){for(var oe=x<<3|ge,fe=k.getBCHTypeInfo(oe),be=0;be<15;be+=1){var Me=!re&&(fe>>be&1)==1;be<6?S[be][8]=Me:be<8?S[be+1][8]=Me:S[A-15+be][8]=Me}for(be=0;be<15;be+=1)Me=!re&&(fe>>be&1)==1,be<8?S[8][A-be-1]=Me:be<9?S[8][15-be-1+1]=Me:S[8][15-be-1]=Me;S[A-8][8]=!re},Q=function(re,ge){for(var oe=-1,fe=A-1,be=7,Me=0,Ne=k.getMaskFunction(ge),Te=A-1;Te>0;Te-=2)for(Te==6&&(Te-=1);;){for(var $e=0;$e<2;$e+=1)if(S[fe][Te-$e]==null){var Ie=!1;Me<re.length&&(Ie=(re[Me]>>>be&1)==1),Ne(fe,Te-$e)&&(Ie=!Ie),S[fe][Te-$e]=Ie,(be-=1)==-1&&(Me+=1,be=7)}if((fe+=oe)<0||A<=fe){fe-=oe,oe=-oe;break}}},T=function(re,ge,oe){for(var fe=z.getRSBlocks(re,ge),be=Z(),Me=0;Me<oe.length;Me+=1){var Ne=oe[Me];be.put(Ne.getMode(),4),be.put(Ne.getLength(),k.getLengthInBits(Ne.getMode(),re)),Ne.write(be)}var Te=0;for(Me=0;Me<fe.length;Me+=1)Te+=fe[Me].dataCount;if(be.getLengthInBits()>8*Te)throw"code length overflow. ("+be.getLengthInBits()+">"+8*Te+")";for(be.getLengthInBits()+4<=8*Te&&be.put(0,4);be.getLengthInBits()%8!=0;)be.putBit(!1);for(;!(be.getLengthInBits()>=8*Te||(be.put(236,8),be.getLengthInBits()>=8*Te));)be.put(17,8);return function($e,Ie){for(var Le=0,Ve=0,ke=0,ze=new Array(Ie.length),He=new Array(Ie.length),Se=0;Se<Ie.length;Se+=1){var Qe=Ie[Se].dataCount,ct=Ie[Se].totalCount-Qe;Ve=Math.max(Ve,Qe),ke=Math.max(ke,ct),ze[Se]=new Array(Qe);for(var Be=0;Be<ze[Se].length;Be+=1)ze[Se][Be]=255&$e.getBuffer()[Be+Le];Le+=Qe;var et=k.getErrorCorrectPolynomial(ct),rt=U(ze[Se],et.getLength()-1).mod(et);for(He[Se]=new Array(et.getLength()-1),Be=0;Be<He[Se].length;Be+=1){var Je=Be+rt.getLength()-He[Se].length;He[Se][Be]=Je>=0?rt.getAt(Je):0}}var gt=0;for(Be=0;Be<Ie.length;Be+=1)gt+=Ie[Be].totalCount;var ht=new Array(gt),ft=0;for(Be=0;Be<Ve;Be+=1)for(Se=0;Se<Ie.length;Se+=1)Be<ze[Se].length&&(ht[ft]=ze[Se][Be],ft+=1);for(Be=0;Be<ke;Be+=1)for(Se=0;Se<Ie.length;Se+=1)Be<He[Se].length&&(ht[ft]=He[Se][Be],ft+=1);return ht}(be,fe)};I.addData=function(re,ge){var oe=null;switch(ge=ge||"Byte"){case"Numeric":oe=R(re);break;case"Alphanumeric":oe=W(re);break;case"Byte":oe=ie(re);break;case"Kanji":oe=me(re);break;default:throw"mode:"+ge}P.push(oe),b=null},I.isDark=function(re,ge){if(re<0||A<=re||ge<0||A<=ge)throw re+","+ge;return S[re][ge]},I.getModuleCount=function(){return A},I.make=function(){if(v<1){for(var re=1;re<40;re++){for(var ge=z.getRSBlocks(re,x),oe=Z(),fe=0;fe<P.length;fe++){var be=P[fe];oe.put(be.getMode(),4),oe.put(be.getLength(),k.getLengthInBits(be.getMode(),re)),be.write(oe)}var Me=0;for(fe=0;fe<ge.length;fe++)Me+=ge[fe].dataCount;if(oe.getLengthInBits()<=8*Me)break}v=re}F(!1,function(){for(var Ne=0,Te=0,$e=0;$e<8;$e+=1){F(!0,$e);var Ie=k.getLostPoint(I);($e==0||Ne>Ie)&&(Ne=Ie,Te=$e)}return Te}())},I.createTableTag=function(re,ge){re=re||2;var oe="";oe+='<table style="',oe+=" border-width: 0px; border-style: none;",oe+=" border-collapse: collapse;",oe+=" padding: 0px; margin: "+(ge=ge===void 0?4*re:ge)+"px;",oe+='">',oe+="<tbody>";for(var fe=0;fe<I.getModuleCount();fe+=1){oe+="<tr>";for(var be=0;be<I.getModuleCount();be+=1)oe+='<td style="',oe+=" border-width: 0px; border-style: none;",oe+=" border-collapse: collapse;",oe+=" padding: 0px; margin: 0px;",oe+=" width: "+re+"px;",oe+=" height: "+re+"px;",oe+=" background-color: ",oe+=I.isDark(fe,be)?"#000000":"#ffffff",oe+=";",oe+='"/>';oe+="</tr>"}return(oe+="</tbody>")+"</table>"},I.createSvgTag=function(re,ge,oe,fe){var be={};typeof arguments[0]=="object"&&(re=(be=arguments[0]).cellSize,ge=be.margin,oe=be.alt,fe=be.title),re=re||2,ge=ge===void 0?4*re:ge,(oe=typeof oe=="string"?{text:oe}:oe||{}).text=oe.text||null,oe.id=oe.text?oe.id||"qrcode-description":null,(fe=typeof fe=="string"?{text:fe}:fe||{}).text=fe.text||null,fe.id=fe.text?fe.id||"qrcode-title":null;var Me,Ne,Te,$e,Ie=I.getModuleCount()*re+2*ge,Le="";for($e="l"+re+",0 0,"+re+" -"+re+",0 0,-"+re+"z ",Le+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Le+=be.scalable?"":' width="'+Ie+'px" height="'+Ie+'px"',Le+=' viewBox="0 0 '+Ie+" "+Ie+'" ',Le+=' preserveAspectRatio="xMinYMin meet"',Le+=fe.text||oe.text?' role="img" aria-labelledby="'+X([fe.id,oe.id].join(" ").trim())+'"':"",Le+=">",Le+=fe.text?'<title id="'+X(fe.id)+'">'+X(fe.text)+"</title>":"",Le+=oe.text?'<description id="'+X(oe.id)+'">'+X(oe.text)+"</description>":"",Le+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Le+='<path d="',Ne=0;Ne<I.getModuleCount();Ne+=1)for(Te=Ne*re+ge,Me=0;Me<I.getModuleCount();Me+=1)I.isDark(Ne,Me)&&(Le+="M"+(Me*re+ge)+","+Te+$e);return(Le+='" stroke="transparent" fill="black"/>')+"</svg>"},I.createDataURL=function(re,ge){re=re||2,ge=ge===void 0?4*re:ge;var oe=I.getModuleCount()*re+2*ge,fe=ge,be=oe-ge;return m(oe,oe,function(Me,Ne){if(fe<=Me&&Me<be&&fe<=Ne&&Ne<be){var Te=Math.floor((Me-fe)/re),$e=Math.floor((Ne-fe)/re);return I.isDark($e,Te)?0:1}return 1})},I.createImgTag=function(re,ge,oe){re=re||2,ge=ge===void 0?4*re:ge;var fe=I.getModuleCount()*re+2*ge,be="";return be+="<img",be+=' src="',be+=I.createDataURL(re,ge),be+='"',be+=' width="',be+=fe,be+='"',be+=' height="',be+=fe,be+='"',oe&&(be+=' alt="',be+=X(oe),be+='"'),be+"/>"};var X=function(re){for(var ge="",oe=0;oe<re.length;oe+=1){var fe=re.charAt(oe);switch(fe){case"<":ge+="&lt;";break;case">":ge+="&gt;";break;case"&":ge+="&amp;";break;case'"':ge+="&quot;";break;default:ge+=fe}}return ge};return I.createASCII=function(re,ge){if((re=re||1)<2)return function(ze){ze=ze===void 0?2:ze;var He,Se,Qe,ct,Be,et=1*I.getModuleCount()+2*ze,rt=ze,Je=et-ze,gt={"":""," ":""," ":"","  ":" "},ht={"":""," ":""," ":" ","  ":" "},ft="";for(He=0;He<et;He+=2){for(Qe=Math.floor((He-rt)/1),ct=Math.floor((He+1-rt)/1),Se=0;Se<et;Se+=1)Be="",rt<=Se&&Se<Je&&rt<=He&&He<Je&&I.isDark(Qe,Math.floor((Se-rt)/1))&&(Be=" "),rt<=Se&&Se<Je&&rt<=He+1&&He+1<Je&&I.isDark(ct,Math.floor((Se-rt)/1))?Be+=" ":Be+="",ft+=ze<1&&He+1>=Je?ht[Be]:gt[Be];ft+=`
`}return et%2&&ze>0?ft.substring(0,ft.length-et-1)+Array(et+1).join(""):ft.substring(0,ft.length-1)}(ge);re-=1,ge=ge===void 0?2*re:ge;var oe,fe,be,Me,Ne=I.getModuleCount()*re+2*ge,Te=ge,$e=Ne-ge,Ie=Array(re+1).join(""),Le=Array(re+1).join("  "),Ve="",ke="";for(oe=0;oe<Ne;oe+=1){for(be=Math.floor((oe-Te)/re),ke="",fe=0;fe<Ne;fe+=1)Me=1,Te<=fe&&fe<$e&&Te<=oe&&oe<$e&&I.isDark(be,Math.floor((fe-Te)/re))&&(Me=0),ke+=Me?Ie:Le;for(be=0;be<re;be+=1)Ve+=ke+`
`}return Ve.substring(0,Ve.length-1)},I.renderTo2dContext=function(re,ge){ge=ge||2;for(var oe=I.getModuleCount(),fe=0;fe<oe;fe++)for(var be=0;be<oe;be++)re.fillStyle=I.isDark(fe,be)?"black":"white",re.fillRect(fe*ge,be*ge,ge,ge)},I};p.stringToBytes=(p.stringToBytesFuncs={default:function(f){for(var g=[],v=0;v<f.length;v+=1){var x=f.charCodeAt(v);g.push(255&x)}return g}}).default,p.createStringToBytes=function(f,g){var v=function(){for(var S=E(f),A=function(){var D=S.read();if(D==-1)throw"eof";return D},b=0,P={};;){var I=S.read();if(I==-1)break;var F=A(),ce=A()<<8|A();P[String.fromCharCode(I<<8|F)]=ce,b+=1}if(b!=g)throw b+" != "+g;return P}(),x=63;return function(S){for(var A=[],b=0;b<S.length;b+=1){var P=S.charCodeAt(b);if(P<128)A.push(P);else{var I=v[S.charAt(b)];typeof I=="number"?(255&I)==I?A.push(I):(A.push(I>>>8),A.push(255&I)):A.push(x)}}return A}};var y,_,M,O,L,B={L:1,M:0,Q:3,H:2},k=(y=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],_=1335,M=7973,L=function(f){for(var g=0;f!=0;)g+=1,f>>>=1;return g},(O={}).getBCHTypeInfo=function(f){for(var g=f<<10;L(g)-L(_)>=0;)g^=_<<L(g)-L(_);return 21522^(f<<10|g)},O.getBCHTypeNumber=function(f){for(var g=f<<12;L(g)-L(M)>=0;)g^=M<<L(g)-L(M);return f<<12|g},O.getPatternPosition=function(f){return y[f-1]},O.getMaskFunction=function(f){switch(f){case 0:return function(g,v){return(g+v)%2==0};case 1:return function(g,v){return g%2==0};case 2:return function(g,v){return v%3==0};case 3:return function(g,v){return(g+v)%3==0};case 4:return function(g,v){return(Math.floor(g/2)+Math.floor(v/3))%2==0};case 5:return function(g,v){return g*v%2+g*v%3==0};case 6:return function(g,v){return(g*v%2+g*v%3)%2==0};case 7:return function(g,v){return(g*v%3+(g+v)%2)%2==0};default:throw"bad maskPattern:"+f}},O.getErrorCorrectPolynomial=function(f){for(var g=U([1],0),v=0;v<f;v+=1)g=g.multiply(U([1,H.gexp(v)],0));return g},O.getLengthInBits=function(f,g){if(1<=g&&g<10)switch(f){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+f}else if(g<27)switch(f){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+f}else{if(!(g<41))throw"type:"+g;switch(f){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+f}}},O.getLostPoint=function(f){for(var g=f.getModuleCount(),v=0,x=0;x<g;x+=1)for(var S=0;S<g;S+=1){for(var A=0,b=f.isDark(x,S),P=-1;P<=1;P+=1)if(!(x+P<0||g<=x+P))for(var I=-1;I<=1;I+=1)S+I<0||g<=S+I||P==0&&I==0||b==f.isDark(x+P,S+I)&&(A+=1);A>5&&(v+=3+A-5)}for(x=0;x<g-1;x+=1)for(S=0;S<g-1;S+=1){var F=0;f.isDark(x,S)&&(F+=1),f.isDark(x+1,S)&&(F+=1),f.isDark(x,S+1)&&(F+=1),f.isDark(x+1,S+1)&&(F+=1),F!=0&&F!=4||(v+=3)}for(x=0;x<g;x+=1)for(S=0;S<g-6;S+=1)f.isDark(x,S)&&!f.isDark(x,S+1)&&f.isDark(x,S+2)&&f.isDark(x,S+3)&&f.isDark(x,S+4)&&!f.isDark(x,S+5)&&f.isDark(x,S+6)&&(v+=40);for(S=0;S<g;S+=1)for(x=0;x<g-6;x+=1)f.isDark(x,S)&&!f.isDark(x+1,S)&&f.isDark(x+2,S)&&f.isDark(x+3,S)&&f.isDark(x+4,S)&&!f.isDark(x+5,S)&&f.isDark(x+6,S)&&(v+=40);var ce=0;for(S=0;S<g;S+=1)for(x=0;x<g;x+=1)f.isDark(x,S)&&(ce+=1);return v+Math.abs(100*ce/g/g-50)/5*10},O),H=function(){for(var f=new Array(256),g=new Array(256),v=0;v<8;v+=1)f[v]=1<<v;for(v=8;v<256;v+=1)f[v]=f[v-4]^f[v-5]^f[v-6]^f[v-8];for(v=0;v<255;v+=1)g[f[v]]=v;return{glog:function(x){if(x<1)throw"glog("+x+")";return g[x]},gexp:function(x){for(;x<0;)x+=255;for(;x>=256;)x-=255;return f[x]}}}();function U(f,g){if(f.length===void 0)throw f.length+"/"+g;var v=function(){for(var S=0;S<f.length&&f[S]==0;)S+=1;for(var A=new Array(f.length-S+g),b=0;b<f.length-S;b+=1)A[b]=f[b+S];return A}(),x={getAt:function(S){return v[S]},getLength:function(){return v.length},multiply:function(S){for(var A=new Array(x.getLength()+S.getLength()-1),b=0;b<x.getLength();b+=1)for(var P=0;P<S.getLength();P+=1)A[b+P]^=H.gexp(H.glog(x.getAt(b))+H.glog(S.getAt(P)));return U(A,0)},mod:function(S){if(x.getLength()-S.getLength()<0)return x;for(var A=H.glog(x.getAt(0))-H.glog(S.getAt(0)),b=new Array(x.getLength()),P=0;P<x.getLength();P+=1)b[P]=x.getAt(P);for(P=0;P<S.getLength();P+=1)b[P]^=H.gexp(H.glog(S.getAt(P))+A);return U(b,0).mod(S)}};return x}var z=function(){var f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],g=function(x,S){var A={};return A.totalCount=x,A.dataCount=S,A},v={getRSBlocks:function(x,S){var A=function(ee,J){switch(J){case B.L:return f[4*(ee-1)+0];case B.M:return f[4*(ee-1)+1];case B.Q:return f[4*(ee-1)+2];case B.H:return f[4*(ee-1)+3];default:return}}(x,S);if(A===void 0)throw"bad rs block @ typeNumber:"+x+"/errorCorrectionLevel:"+S;for(var b=A.length/3,P=[],I=0;I<b;I+=1)for(var F=A[3*I+0],ce=A[3*I+1],D=A[3*I+2],se=0;se<F;se+=1)P.push(g(ce,D));return P}};return v}(),Z=function(){var f=[],g=0,v={getBuffer:function(){return f},getAt:function(x){var S=Math.floor(x/8);return(f[S]>>>7-x%8&1)==1},put:function(x,S){for(var A=0;A<S;A+=1)v.putBit((x>>>S-A-1&1)==1)},getLengthInBits:function(){return g},putBit:function(x){var S=Math.floor(g/8);f.length<=S&&f.push(0),x&&(f[S]|=128>>>g%8),g+=1}};return v},R=function(f){var g=f,v={getMode:function(){return 1},getLength:function(A){return g.length},write:function(A){for(var b=g,P=0;P+2<b.length;)A.put(x(b.substring(P,P+3)),10),P+=3;P<b.length&&(b.length-P==1?A.put(x(b.substring(P,P+1)),4):b.length-P==2&&A.put(x(b.substring(P,P+2)),7))}},x=function(A){for(var b=0,P=0;P<A.length;P+=1)b=10*b+S(A.charAt(P));return b},S=function(A){if("0"<=A&&A<="9")return A.charCodeAt(0)-48;throw"illegal char :"+A};return v},W=function(f){var g=f,v={getMode:function(){return 2},getLength:function(S){return g.length},write:function(S){for(var A=g,b=0;b+1<A.length;)S.put(45*x(A.charAt(b))+x(A.charAt(b+1)),11),b+=2;b<A.length&&S.put(x(A.charAt(b)),6)}},x=function(S){if("0"<=S&&S<="9")return S.charCodeAt(0)-48;if("A"<=S&&S<="Z")return S.charCodeAt(0)-65+10;switch(S){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+S}};return v},ie=function(f){var g=p.stringToBytes(f);return{getMode:function(){return 4},getLength:function(v){return g.length},write:function(v){for(var x=0;x<g.length;x+=1)v.put(g[x],8)}}},me=function(f){var g=p.stringToBytesFuncs.SJIS;if(!g)throw"sjis not supported.";(function(){var S=g("");if(S.length!=2||(S[0]<<8|S[1])!=38726)throw"sjis not supported."})();var v=g(f),x={getMode:function(){return 8},getLength:function(S){return~~(v.length/2)},write:function(S){for(var A=v,b=0;b+1<A.length;){var P=(255&A[b])<<8|255&A[b+1];if(33088<=P&&P<=40956)P-=33088;else{if(!(57408<=P&&P<=60351))throw"illegal char at "+(b+1)+"/"+P;P-=49472}P=192*(P>>>8&255)+(255&P),S.put(P,13),b+=2}if(b<A.length)throw"illegal char at "+(b+1)}};return x},j=function(){var f=[],g={writeByte:function(v){f.push(255&v)},writeShort:function(v){g.writeByte(v),g.writeByte(v>>>8)},writeBytes:function(v,x,S){x=x||0,S=S||v.length;for(var A=0;A<S;A+=1)g.writeByte(v[A+x])},writeString:function(v){for(var x=0;x<v.length;x+=1)g.writeByte(v.charCodeAt(x))},toByteArray:function(){return f},toString:function(){var v="";v+="[";for(var x=0;x<f.length;x+=1)x>0&&(v+=","),v+=f[x];return v+"]"}};return g},E=function(f){var g=f,v=0,x=0,S=0,A={read:function(){for(;S<8;){if(v>=g.length){if(S==0)return-1;throw"unexpected end of file./"+S}var P=g.charAt(v);if(v+=1,P=="=")return S=0,-1;P.match(/^\s$/)||(x=x<<6|b(P.charCodeAt(0)),S+=6)}var I=x>>>S-8&255;return S-=8,I}},b=function(P){if(65<=P&&P<=90)return P-65;if(97<=P&&P<=122)return P-97+26;if(48<=P&&P<=57)return P-48+52;if(P==43)return 62;if(P==47)return 63;throw"c:"+P};return A},m=function(f,g,v){for(var x=function(ce,D){var se=ce,ee=D,J=new Array(ce*D),Q={setPixel:function(re,ge,oe){J[ge*se+re]=oe},write:function(re){re.writeString("GIF87a"),re.writeShort(se),re.writeShort(ee),re.writeByte(128),re.writeByte(0),re.writeByte(0),re.writeByte(0),re.writeByte(0),re.writeByte(0),re.writeByte(255),re.writeByte(255),re.writeByte(255),re.writeString(","),re.writeShort(0),re.writeShort(0),re.writeShort(se),re.writeShort(ee),re.writeByte(0);var ge=T(2);re.writeByte(2);for(var oe=0;ge.length-oe>255;)re.writeByte(255),re.writeBytes(ge,oe,255),oe+=255;re.writeByte(ge.length-oe),re.writeBytes(ge,oe,ge.length-oe),re.writeByte(0),re.writeString(";")}},T=function(re){for(var ge=1<<re,oe=1+(1<<re),fe=re+1,be=X(),Me=0;Me<ge;Me+=1)be.add(String.fromCharCode(Me));be.add(String.fromCharCode(ge)),be.add(String.fromCharCode(oe));var Ne,Te,$e,Ie=j(),Le=(Ne=Ie,Te=0,$e=0,{write:function(He,Se){if(He>>>Se)throw"length over";for(;Te+Se>=8;)Ne.writeByte(255&(He<<Te|$e)),Se-=8-Te,He>>>=8-Te,$e=0,Te=0;$e|=He<<Te,Te+=Se},flush:function(){Te>0&&Ne.writeByte($e)}});Le.write(ge,fe);var Ve=0,ke=String.fromCharCode(J[Ve]);for(Ve+=1;Ve<J.length;){var ze=String.fromCharCode(J[Ve]);Ve+=1,be.contains(ke+ze)?ke+=ze:(Le.write(be.indexOf(ke),fe),be.size()<4095&&(be.size()==1<<fe&&(fe+=1),be.add(ke+ze)),ke=ze)}return Le.write(be.indexOf(ke),fe),Le.write(oe,fe),Le.flush(),Ie.toByteArray()},X=function(){var re={},ge=0,oe={add:function(fe){if(oe.contains(fe))throw"dup key:"+fe;re[fe]=ge,ge+=1},size:function(){return ge},indexOf:function(fe){return re[fe]},contains:function(fe){return re[fe]!==void 0}};return oe};return Q}(f,g),S=0;S<g;S+=1)for(var A=0;A<f;A+=1)x.setPixel(A,S,v(A,S));var b=j();x.write(b);for(var P=function(){var ce=0,D=0,se=0,ee="",J={},Q=function(X){ee+=String.fromCharCode(T(63&X))},T=function(X){if(!(X<0)){if(X<26)return 65+X;if(X<52)return X-26+97;if(X<62)return X-52+48;if(X==62)return 43;if(X==63)return 47}throw"n:"+X};return J.writeByte=function(X){for(ce=ce<<8|255&X,D+=8,se+=1;D>=6;)Q(ce>>>D-6),D-=6},J.flush=function(){if(D>0&&(Q(ce<<6-D),ce=0,D=0),se%3!=0)for(var X=3-se%3,re=0;re<X;re+=1)ee+="="},J.toString=function(){return ee},J}(),I=b.toByteArray(),F=0;F<I.length;F+=1)P.writeByte(I[F]);return P.flush(),"data:image/gif;base64,"+P};return p}();d.stringToBytesFuncs["UTF-8"]=function(p){return function(y){for(var _=[],M=0;M<y.length;M++){var O=y.charCodeAt(M);O<128?_.push(O):O<2048?_.push(192|O>>6,128|63&O):O<55296||O>=57344?_.push(224|O>>12,128|O>>6&63,128|63&O):(M++,O=65536+((1023&O)<<10|1023&y.charCodeAt(M)),_.push(240|O>>18,128|O>>12&63,128|O>>6&63,128|63&O))}return _}(p)},(l=typeof(u=function(){return d})=="function"?u.apply(a,[]):u)===void 0||(o.exports=l)}},n={};function i(o){var a=n[o];if(a!==void 0)return a.exports;var u=n[o]={exports:{}};return r[o](u,u.exports,i),u.exports}i.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return i.d(a,{a}),a},i.d=(o,a)=>{for(var u in a)i.o(a,u)&&!i.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:a[u]})},i.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a);var s={};return(()=>{i.d(s,{default:()=>j});const o=E=>!!E&&typeof E=="object"&&!Array.isArray(E);function a(E,...m){if(!m.length)return E;const f=m.shift();return f!==void 0&&o(E)&&o(f)?(E=Object.assign({},E),Object.keys(f).forEach(g=>{const v=E[g],x=f[g];Array.isArray(v)&&Array.isArray(x)?E[g]=x:o(v)&&o(x)?E[g]=a(Object.assign({},v),x):E[g]=x}),a(E,...m)):E}function u(E,m){const f=document.createElement("a");f.download=m,f.href=E,document.body.appendChild(f),f.click(),document.body.removeChild(f)}const l={L:.07,M:.15,Q:.25,H:.3};class d{constructor({svg:m,type:f,window:g}){this._svg=m,this._type=f,this._window=g}draw(m,f,g,v){let x;switch(this._type){case"dots":x=this._drawDot;break;case"classy":x=this._drawClassy;break;case"classy-rounded":x=this._drawClassyRounded;break;case"rounded":x=this._drawRounded;break;case"extra-rounded":x=this._drawExtraRounded;break;default:x=this._drawSquare}x.call(this,{x:m,y:f,size:g,getNeighbor:v})}_rotateFigure({x:m,y:f,size:g,rotation:v=0,draw:x}){var S;const A=m+g/2,b=f+g/2;x(),(S=this._element)===null||S===void 0||S.setAttribute("transform",`rotate(${180*v/Math.PI},${A},${b})`)}_basicDot(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(g+f/2)),this._element.setAttribute("cy",String(v+f/2)),this._element.setAttribute("r",String(f/2))}}))}_basicSquare(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(g)),this._element.setAttribute("y",String(v)),this._element.setAttribute("width",String(f)),this._element.setAttribute("height",String(f))}}))}_basicSideRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h `+f/2+`a ${f/2} ${f/2}, 0, 0, 0, 0 ${-f}`)}}))}_basicCornerRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h ${f}v `+-f/2+`a ${f/2} ${f/2}, 0, 0, 0, ${-f/2} ${-f/2}`)}}))}_basicCornerExtraRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h ${f}a ${f} ${f}, 0, 0, 0, ${-f} ${-f}`)}}))}_basicCornersRounded(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${g} ${v}v `+f/2+`a ${f/2} ${f/2}, 0, 0, 0, ${f/2} ${f/2}h `+f/2+"v "+-f/2+`a ${f/2} ${f/2}, 0, 0, 0, ${-f/2} ${-f/2}`)}}))}_drawDot({x:m,y:f,size:g}){this._basicDot({x:m,y:f,size:g,rotation:0})}_drawSquare({x:m,y:f,size:g}){this._basicSquare({x:m,y:f,size:g,rotation:0})}_drawRounded({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,S=v?+v(1,0):0,A=v?+v(0,-1):0,b=v?+v(0,1):0,P=x+S+A+b;if(P!==0)if(P>2||x&&S||A&&b)this._basicSquare({x:m,y:f,size:g,rotation:0});else{if(P===2){let I=0;return x&&A?I=Math.PI/2:A&&S?I=Math.PI:S&&b&&(I=-Math.PI/2),void this._basicCornerRounded({x:m,y:f,size:g,rotation:I})}if(P===1){let I=0;return A?I=Math.PI/2:S?I=Math.PI:b&&(I=-Math.PI/2),void this._basicSideRounded({x:m,y:f,size:g,rotation:I})}}else this._basicDot({x:m,y:f,size:g,rotation:0})}_drawExtraRounded({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,S=v?+v(1,0):0,A=v?+v(0,-1):0,b=v?+v(0,1):0,P=x+S+A+b;if(P!==0)if(P>2||x&&S||A&&b)this._basicSquare({x:m,y:f,size:g,rotation:0});else{if(P===2){let I=0;return x&&A?I=Math.PI/2:A&&S?I=Math.PI:S&&b&&(I=-Math.PI/2),void this._basicCornerExtraRounded({x:m,y:f,size:g,rotation:I})}if(P===1){let I=0;return A?I=Math.PI/2:S?I=Math.PI:b&&(I=-Math.PI/2),void this._basicSideRounded({x:m,y:f,size:g,rotation:I})}}else this._basicDot({x:m,y:f,size:g,rotation:0})}_drawClassy({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,S=v?+v(1,0):0,A=v?+v(0,-1):0,b=v?+v(0,1):0;x+S+A+b!==0?x||A?S||b?this._basicSquare({x:m,y:f,size:g,rotation:0}):this._basicCornerRounded({x:m,y:f,size:g,rotation:Math.PI/2}):this._basicCornerRounded({x:m,y:f,size:g,rotation:-Math.PI/2}):this._basicCornersRounded({x:m,y:f,size:g,rotation:Math.PI/2})}_drawClassyRounded({x:m,y:f,size:g,getNeighbor:v}){const x=v?+v(-1,0):0,S=v?+v(1,0):0,A=v?+v(0,-1):0,b=v?+v(0,1):0;x+S+A+b!==0?x||A?S||b?this._basicSquare({x:m,y:f,size:g,rotation:0}):this._basicCornerExtraRounded({x:m,y:f,size:g,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:m,y:f,size:g,rotation:-Math.PI/2}):this._basicCornersRounded({x:m,y:f,size:g,rotation:Math.PI/2})}}class p{constructor({svg:m,type:f,window:g}){this._svg=m,this._type=f,this._window=g}draw(m,f,g,v){let x;switch(this._type){case"square":x=this._drawSquare;break;case"extra-rounded":x=this._drawExtraRounded;break;default:x=this._drawDot}x.call(this,{x:m,y:f,size:g,rotation:v})}_rotateFigure({x:m,y:f,size:g,rotation:v=0,draw:x}){var S;const A=m+g/2,b=f+g/2;x(),(S=this._element)===null||S===void 0||S.setAttribute("transform",`rotate(${180*v/Math.PI},${A},${b})`)}_basicDot(m){const{size:f,x:g,y:v}=m,x=f/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${g+f/2} ${v}a ${f/2} ${f/2} 0 1 0 0.1 0zm 0 ${x}a ${f/2-x} ${f/2-x} 0 1 1 -0.1 0Z`)}}))}_basicSquare(m){const{size:f,x:g,y:v}=m,x=f/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${g} ${v}v ${f}h ${f}v `+-f+`zM ${g+x} ${v+x}h `+(f-2*x)+"v "+(f-2*x)+"h "+(2*x-f)+"z")}}))}_basicExtraRounded(m){const{size:f,x:g,y:v}=m,x=f/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${g} ${v+2.5*x}v `+2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*x} ${2.5*x}h `+2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*x} ${2.5*-x}v `+-2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*-x} ${2.5*-x}h `+-2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*-x} ${2.5*x}M ${g+2.5*x} ${v+x}h `+2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*x} ${1.5*x}v `+2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*-x} ${1.5*x}h `+-2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*-x} ${1.5*-x}v `+-2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*x} ${1.5*-x}`)}}))}_drawDot({x:m,y:f,size:g,rotation:v}){this._basicDot({x:m,y:f,size:g,rotation:v})}_drawSquare({x:m,y:f,size:g,rotation:v}){this._basicSquare({x:m,y:f,size:g,rotation:v})}_drawExtraRounded({x:m,y:f,size:g,rotation:v}){this._basicExtraRounded({x:m,y:f,size:g,rotation:v})}}class y{constructor({svg:m,type:f,window:g}){this._svg=m,this._type=f,this._window=g}draw(m,f,g,v){let x;x=this._type==="square"?this._drawSquare:this._drawDot,x.call(this,{x:m,y:f,size:g,rotation:v})}_rotateFigure({x:m,y:f,size:g,rotation:v=0,draw:x}){var S;const A=m+g/2,b=f+g/2;x(),(S=this._element)===null||S===void 0||S.setAttribute("transform",`rotate(${180*v/Math.PI},${A},${b})`)}_basicDot(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(g+f/2)),this._element.setAttribute("cy",String(v+f/2)),this._element.setAttribute("r",String(f/2))}}))}_basicSquare(m){const{size:f,x:g,y:v}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(g)),this._element.setAttribute("y",String(v)),this._element.setAttribute("width",String(f)),this._element.setAttribute("height",String(f))}}))}_drawDot({x:m,y:f,size:g,rotation:v}){this._basicDot({x:m,y:f,size:g,rotation:v})}_drawSquare({x:m,y:f,size:g,rotation:v}){this._basicSquare({x:m,y:f,size:g,rotation:v})}}const _="circle",M=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],O=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class L{constructor(m,f){this._roundSize=g=>this._options.dotsOptions.roundSize?Math.floor(g):g,this._window=f,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(m.width)),this._element.setAttribute("height",String(m.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),m.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${m.width} ${m.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=m.image,this._instanceId=L.instanceCount++,this._options=m}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(m){const f=m.getModuleCount(),g=Math.min(this._options.width,this._options.height)-2*this._options.margin,v=this._options.shape===_?g/Math.sqrt(2):g,x=this._roundSize(v/f);let S={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=m,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:A,qrOptions:b}=this._options,P=A.imageSize*l[b.errorCorrectionLevel],I=Math.floor(P*f*f);S=function({originalHeight:F,originalWidth:ce,maxHiddenDots:D,maxHiddenAxisDots:se,dotSize:ee}){const J={x:0,y:0},Q={x:0,y:0};if(F<=0||ce<=0||D<=0||ee<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const T=F/ce;return J.x=Math.floor(Math.sqrt(D/T)),J.x<=0&&(J.x=1),se&&se<J.x&&(J.x=se),J.x%2==0&&J.x--,Q.x=J.x*ee,J.y=1+2*Math.ceil((J.x*T-1)/2),Q.y=Math.round(Q.x*T),(J.y*J.x>D||se&&se<J.y)&&(se&&se<J.y?(J.y=se,J.y%2==0&&J.x--):J.y-=2,Q.y=J.y*ee,J.x=1+2*Math.ceil((J.y/T-1)/2),Q.x=Math.round(Q.y/T)),{height:Q.y,width:Q.x,hideYDots:J.y,hideXDots:J.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:I,maxHiddenAxisDots:f-14,dotSize:x})}this.drawBackground(),this.drawDots((A,b)=>{var P,I,F,ce,D,se;return!(this._options.imageOptions.hideBackgroundDots&&A>=(f-S.hideYDots)/2&&A<(f+S.hideYDots)/2&&b>=(f-S.hideXDots)/2&&b<(f+S.hideXDots)/2||!((P=M[A])===null||P===void 0)&&P[b]||!((I=M[A-f+7])===null||I===void 0)&&I[b]||!((F=M[A])===null||F===void 0)&&F[b-f+7]||!((ce=O[A])===null||ce===void 0)&&ce[b]||!((D=O[A-f+7])===null||D===void 0)&&D[b]||!((se=O[A])===null||se===void 0)&&se[b-f+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:S.width,height:S.height,count:f,dotSize:x})}drawBackground(){var m,f,g;const v=this._element,x=this._options;if(v){const S=(m=x.backgroundOptions)===null||m===void 0?void 0:m.gradient,A=(f=x.backgroundOptions)===null||f===void 0?void 0:f.color;let b=x.height,P=x.width;if(S||A){const I=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((g=x.backgroundOptions)===null||g===void 0)&&g.round&&(b=P=Math.min(x.width,x.height),I.setAttribute("rx",String(b/2*x.backgroundOptions.round))),I.setAttribute("x",String(this._roundSize((x.width-P)/2))),I.setAttribute("y",String(this._roundSize((x.height-b)/2))),I.setAttribute("width",String(P)),I.setAttribute("height",String(b)),this._backgroundClipPath.appendChild(I),this._createColor({options:S,color:A,additionalRotation:0,x:0,y:0,height:x.height,width:x.width,name:`background-color-${this._instanceId}`})}}}drawDots(m){var f,g;if(!this._qr)throw"QR code is not defined";const v=this._options,x=this._qr.getModuleCount();if(x>v.width||x>v.height)throw"The canvas is too small.";const S=Math.min(v.width,v.height)-2*v.margin,A=v.shape===_?S/Math.sqrt(2):S,b=this._roundSize(A/x),P=this._roundSize((v.width-x*b)/2),I=this._roundSize((v.height-x*b)/2),F=new d({svg:this._element,type:v.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(f=v.dotsOptions)===null||f===void 0?void 0:f.gradient,color:v.dotsOptions.color,additionalRotation:0,x:0,y:0,height:v.height,width:v.width,name:`dot-color-${this._instanceId}`});for(let ce=0;ce<x;ce++)for(let D=0;D<x;D++)m&&!m(ce,D)||!((g=this._qr)===null||g===void 0)&&g.isDark(ce,D)&&(F.draw(P+D*b,I+ce*b,b,(se,ee)=>!(D+se<0||ce+ee<0||D+se>=x||ce+ee>=x)&&!(m&&!m(ce+ee,D+se))&&!!this._qr&&this._qr.isDark(ce+ee,D+se)),F._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(F._element));if(v.shape===_){const ce=this._roundSize((S/b-x)/2),D=x+2*ce,se=P-ce*b,ee=I-ce*b,J=[],Q=this._roundSize(D/2);for(let T=0;T<D;T++){J[T]=[];for(let X=0;X<D;X++)T>=ce-1&&T<=D-ce&&X>=ce-1&&X<=D-ce||Math.sqrt((T-Q)*(T-Q)+(X-Q)*(X-Q))>Q?J[T][X]=0:J[T][X]=this._qr.isDark(X-2*ce<0?X:X>=x?X-2*ce:X-ce,T-2*ce<0?T:T>=x?T-2*ce:T-ce)?1:0}for(let T=0;T<D;T++)for(let X=0;X<D;X++)J[T][X]&&(F.draw(se+X*b,ee+T*b,b,(re,ge)=>{var oe;return!!(!((oe=J[T+ge])===null||oe===void 0)&&oe[X+re])}),F._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(F._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const m=this._element,f=this._options;if(!m)throw"Element code is not defined";const g=this._qr.getModuleCount(),v=Math.min(f.width,f.height)-2*f.margin,x=f.shape===_?v/Math.sqrt(2):v,S=this._roundSize(x/g),A=7*S,b=3*S,P=this._roundSize((f.width-g*S)/2),I=this._roundSize((f.height-g*S)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([F,ce,D])=>{var se,ee,J,Q,T,X,re,ge,oe,fe,be,Me;const Ne=P+F*S*(g-7),Te=I+ce*S*(g-7);let $e=this._dotsClipPath,Ie=this._dotsClipPath;if((!((se=f.cornersSquareOptions)===null||se===void 0)&&se.gradient||!((ee=f.cornersSquareOptions)===null||ee===void 0)&&ee.color)&&($e=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),$e.setAttribute("id",`clip-path-corners-square-color-${F}-${ce}-${this._instanceId}`),this._defs.appendChild($e),this._cornersSquareClipPath=this._cornersDotClipPath=Ie=$e,this._createColor({options:(J=f.cornersSquareOptions)===null||J===void 0?void 0:J.gradient,color:(Q=f.cornersSquareOptions)===null||Q===void 0?void 0:Q.color,additionalRotation:D,x:Ne,y:Te,height:A,width:A,name:`corners-square-color-${F}-${ce}-${this._instanceId}`})),(T=f.cornersSquareOptions)===null||T===void 0?void 0:T.type){const Le=new p({svg:this._element,type:f.cornersSquareOptions.type,window:this._window});Le.draw(Ne,Te,A,D),Le._element&&$e&&$e.appendChild(Le._element)}else{const Le=new d({svg:this._element,type:f.dotsOptions.type,window:this._window});for(let Ve=0;Ve<M.length;Ve++)for(let ke=0;ke<M[Ve].length;ke++)!((X=M[Ve])===null||X===void 0)&&X[ke]&&(Le.draw(Ne+ke*S,Te+Ve*S,S,(ze,He)=>{var Se;return!!(!((Se=M[Ve+He])===null||Se===void 0)&&Se[ke+ze])}),Le._element&&$e&&$e.appendChild(Le._element))}if((!((re=f.cornersDotOptions)===null||re===void 0)&&re.gradient||!((ge=f.cornersDotOptions)===null||ge===void 0)&&ge.color)&&(Ie=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Ie.setAttribute("id",`clip-path-corners-dot-color-${F}-${ce}-${this._instanceId}`),this._defs.appendChild(Ie),this._cornersDotClipPath=Ie,this._createColor({options:(oe=f.cornersDotOptions)===null||oe===void 0?void 0:oe.gradient,color:(fe=f.cornersDotOptions)===null||fe===void 0?void 0:fe.color,additionalRotation:D,x:Ne+2*S,y:Te+2*S,height:b,width:b,name:`corners-dot-color-${F}-${ce}-${this._instanceId}`})),(be=f.cornersDotOptions)===null||be===void 0?void 0:be.type){const Le=new y({svg:this._element,type:f.cornersDotOptions.type,window:this._window});Le.draw(Ne+2*S,Te+2*S,b,D),Le._element&&Ie&&Ie.appendChild(Le._element)}else{const Le=new d({svg:this._element,type:f.dotsOptions.type,window:this._window});for(let Ve=0;Ve<O.length;Ve++)for(let ke=0;ke<O[Ve].length;ke++)!((Me=O[Ve])===null||Me===void 0)&&Me[ke]&&(Le.draw(Ne+ke*S,Te+Ve*S,S,(ze,He)=>{var Se;return!!(!((Se=O[Ve+He])===null||Se===void 0)&&Se[ke+ze])}),Le._element&&Ie&&Ie.appendChild(Le._element))}})}loadImage(){return new Promise((m,f)=>{var g;const v=this._options;if(!v.image)return f("Image is not defined");if(!((g=v.nodeCanvas)===null||g===void 0)&&g.loadImage)v.nodeCanvas.loadImage(v.image).then(x=>{var S,A;if(this._image=x,this._options.imageOptions.saveAsBlob){const b=(S=v.nodeCanvas)===null||S===void 0?void 0:S.createCanvas(this._image.width,this._image.height);(A=b==null?void 0:b.getContext("2d"))===null||A===void 0||A.drawImage(x,0,0),this._imageUri=b==null?void 0:b.toDataURL()}m()}).catch(f);else{const x=new this._window.Image;typeof v.imageOptions.crossOrigin=="string"&&(x.crossOrigin=v.imageOptions.crossOrigin),this._image=x,x.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await async function(S,A){return new Promise(b=>{const P=new A.XMLHttpRequest;P.onload=function(){const I=new A.FileReader;I.onloadend=function(){b(I.result)},I.readAsDataURL(P.response)},P.open("GET",S),P.responseType="blob",P.send()})}(v.image||"",this._window)),m()},x.src=v.image}})}async drawImage({width:m,height:f,count:g,dotSize:v}){const x=this._options,S=this._roundSize((x.width-g*v)/2),A=this._roundSize((x.height-g*v)/2),b=S+this._roundSize(x.imageOptions.margin+(g*v-m)/2),P=A+this._roundSize(x.imageOptions.margin+(g*v-f)/2),I=m-2*x.imageOptions.margin,F=f-2*x.imageOptions.margin,ce=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");ce.setAttribute("href",this._imageUri||""),ce.setAttribute("x",String(b)),ce.setAttribute("y",String(P)),ce.setAttribute("width",`${I}px`),ce.setAttribute("height",`${F}px`),this._element.appendChild(ce)}_createColor({options:m,color:f,additionalRotation:g,x:v,y:x,height:S,width:A,name:b}){const P=A>S?A:S,I=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(I.setAttribute("x",String(v)),I.setAttribute("y",String(x)),I.setAttribute("height",String(S)),I.setAttribute("width",String(A)),I.setAttribute("clip-path",`url('#clip-path-${b}')`),m){let F;if(m.type==="radial")F=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),F.setAttribute("id",b),F.setAttribute("gradientUnits","userSpaceOnUse"),F.setAttribute("fx",String(v+A/2)),F.setAttribute("fy",String(x+S/2)),F.setAttribute("cx",String(v+A/2)),F.setAttribute("cy",String(x+S/2)),F.setAttribute("r",String(P/2));else{const ce=((m.rotation||0)+g)%(2*Math.PI),D=(ce+2*Math.PI)%(2*Math.PI);let se=v+A/2,ee=x+S/2,J=v+A/2,Q=x+S/2;D>=0&&D<=.25*Math.PI||D>1.75*Math.PI&&D<=2*Math.PI?(se-=A/2,ee-=S/2*Math.tan(ce),J+=A/2,Q+=S/2*Math.tan(ce)):D>.25*Math.PI&&D<=.75*Math.PI?(ee-=S/2,se-=A/2/Math.tan(ce),Q+=S/2,J+=A/2/Math.tan(ce)):D>.75*Math.PI&&D<=1.25*Math.PI?(se+=A/2,ee+=S/2*Math.tan(ce),J-=A/2,Q-=S/2*Math.tan(ce)):D>1.25*Math.PI&&D<=1.75*Math.PI&&(ee+=S/2,se+=A/2/Math.tan(ce),Q-=S/2,J-=A/2/Math.tan(ce)),F=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),F.setAttribute("id",b),F.setAttribute("gradientUnits","userSpaceOnUse"),F.setAttribute("x1",String(Math.round(se))),F.setAttribute("y1",String(Math.round(ee))),F.setAttribute("x2",String(Math.round(J))),F.setAttribute("y2",String(Math.round(Q)))}m.colorStops.forEach(({offset:ce,color:D})=>{const se=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");se.setAttribute("offset",100*ce+"%"),se.setAttribute("stop-color",D),F.appendChild(se)}),I.setAttribute("fill",`url('#${b}')`),this._defs.appendChild(F)}else f&&I.setAttribute("fill",f);this._element.appendChild(I)}}L.instanceCount=0;const B=L,k="canvas",H={};for(let E=0;E<=40;E++)H[E]=E;const U={type:k,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:H[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function z(E){const m=Object.assign({},E);if(!m.colorStops||!m.colorStops.length)throw"Field 'colorStops' is required in gradient";return m.rotation?m.rotation=Number(m.rotation):m.rotation=0,m.colorStops=m.colorStops.map(f=>Object.assign(Object.assign({},f),{offset:Number(f.offset)})),m}function Z(E){const m=Object.assign({},E);return m.width=Number(m.width),m.height=Number(m.height),m.margin=Number(m.margin),m.imageOptions=Object.assign(Object.assign({},m.imageOptions),{hideBackgroundDots:!!m.imageOptions.hideBackgroundDots,imageSize:Number(m.imageOptions.imageSize),margin:Number(m.imageOptions.margin)}),m.margin>Math.min(m.width,m.height)&&(m.margin=Math.min(m.width,m.height)),m.dotsOptions=Object.assign({},m.dotsOptions),m.dotsOptions.gradient&&(m.dotsOptions.gradient=z(m.dotsOptions.gradient)),m.cornersSquareOptions&&(m.cornersSquareOptions=Object.assign({},m.cornersSquareOptions),m.cornersSquareOptions.gradient&&(m.cornersSquareOptions.gradient=z(m.cornersSquareOptions.gradient))),m.cornersDotOptions&&(m.cornersDotOptions=Object.assign({},m.cornersDotOptions),m.cornersDotOptions.gradient&&(m.cornersDotOptions.gradient=z(m.cornersDotOptions.gradient))),m.backgroundOptions&&(m.backgroundOptions=Object.assign({},m.backgroundOptions),m.backgroundOptions.gradient&&(m.backgroundOptions.gradient=z(m.backgroundOptions.gradient))),m}var R=i(873),W=i.n(R);function ie(E){if(!E)throw new Error("Extension must be defined");E[0]==="."&&(E=E.substring(1));const m={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[E.toLowerCase()];if(!m)throw new Error(`Extension "${E}" is not supported`);return m}class me{constructor(m){m!=null&&m.jsdom?this._window=new m.jsdom("",{resources:"usable"}).window:this._window=window,this._options=m?Z(a(U,m)):U,this.update()}static _clearContainer(m){m&&(m.innerHTML="")}_setupSvg(){if(!this._qr)return;const m=new B(this._options,this._window);this._svg=m.getElement(),this._svgDrawingPromise=m.drawQR(this._qr).then(()=>{var f;this._svg&&((f=this._extension)===null||f===void 0||f.call(this,m.getElement(),this._options))})}_setupCanvas(){var m,f;this._qr&&(!((m=this._options.nodeCanvas)===null||m===void 0)&&m.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(f=this._svgDrawingPromise)===null||f===void 0?void 0:f.then(()=>{var g;if(!this._svg)return;const v=this._svg,x=new this._window.XMLSerializer().serializeToString(v),S=btoa(x),A=`data:${ie("svg")};base64,${S}`;if(!((g=this._options.nodeCanvas)===null||g===void 0)&&g.loadImage)return this._options.nodeCanvas.loadImage(A).then(b=>{var P,I;b.width=this._options.width,b.height=this._options.height,(I=(P=this._nodeCanvas)===null||P===void 0?void 0:P.getContext("2d"))===null||I===void 0||I.drawImage(b,0,0)});{const b=new this._window.Image;return new Promise(P=>{b.onload=()=>{var I,F;(F=(I=this._domCanvas)===null||I===void 0?void 0:I.getContext("2d"))===null||F===void 0||F.drawImage(b,0,0),P()},b.src=A})}}))}async _getElement(m="png"){if(!this._qr)throw"QR code is empty";return m.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(m){me._clearContainer(this._container),this._options=m?Z(a(this._options,m)):this._options,this._options.data&&(this._qr=W()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(f){switch(!0){case/^[0-9]*$/.test(f):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(f):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===k?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(m){if(m){if(typeof m.appendChild!="function")throw"Container should be a single DOM node";this._options.type===k?this._domCanvas&&m.appendChild(this._domCanvas):this._svg&&m.appendChild(this._svg),this._container=m}}applyExtension(m){if(!m)throw"Extension function should be defined.";this._extension=m,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(m="png"){if(!this._qr)throw"QR code is empty";const f=await this._getElement(m),g=ie(m);if(!f)return null;if(m.toLowerCase()==="svg"){const v=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(f)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(v):new Blob([v],{type:g})}return new Promise(v=>{const x=f;if("toBuffer"in x)if(g==="image/png")v(x.toBuffer(g));else if(g==="image/jpeg")v(x.toBuffer(g));else{if(g!=="application/pdf")throw Error("Unsupported extension");v(x.toBuffer(g))}else"toBlob"in x&&x.toBlob(v,g,1)})}async download(m){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let f="png",g="qr";typeof m=="string"?(f=m,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof m=="object"&&m!==null&&(m.name&&(g=m.name),m.extension&&(f=m.extension));const v=await this._getElement(f);if(v)if(f.toLowerCase()==="svg"){let x=new XMLSerializer().serializeToString(v);x=`<?xml version="1.0" standalone="no"?>\r
`+x,u(`data:${ie(f)};charset=utf-8,${encodeURIComponent(x)}`,`${g}.svg`)}else u(v.toDataURL(ie(f)),`${g}.${f}`)}}const j=me})(),s.default})())})(X7);var UZ=X7.exports;const Z7=ji(UZ);class Ca extends pt{constructor(e){const{docsPath:r,field:n,metaMessages:i}=e;super(`Invalid Sign-In with Ethereum message field "${n}".`,{docsPath:r,metaMessages:i,name:"SiweInvalidMessageFieldError"})}}function Q7(t){if(/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(t)||/%[^0-9a-f]/i.test(t)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(t))return!1;const e=qZ(t),r=e[1],n=e[2],i=e[3],s=e[4],o=e[5];if(!(r!=null&&r.length&&i.length>=0))return!1;if(n!=null&&n.length){if(!(i.length===0||/^\//.test(i)))return!1}else if(/^\/\//.test(i))return!1;if(!/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase()))return!1;let a="";return a+=`${r}:`,n!=null&&n.length&&(a+=`//${n}`),a+=i,s!=null&&s.length&&(a+=`?${s}`),o!=null&&o.length&&(a+=`#${o}`),a}function qZ(t){return t.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}function e9(t){const{chainId:e,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:a,resources:u,scheme:l,uri:d,version:p}=t;{if(e!==Math.floor(e))throw new Ca({field:"chainId",metaMessages:["- Chain ID must be a EIP-155 chain ID.","- See https://eips.ethereum.org/EIPS/eip-155","",`Provided value: ${e}`]});if(!(zZ.test(r)||HZ.test(r)||WZ.test(r)))throw new Ca({field:"domain",metaMessages:["- Domain must be an RFC 3986 authority.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${r}`]});if(!KZ.test(s))throw new Ca({field:"nonce",metaMessages:["- Nonce must be at least 8 characters.","- Nonce must be alphanumeric.","",`Provided value: ${s}`]});if(!Q7(d))throw new Ca({field:"uri",metaMessages:["- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${d}`]});if(p!=="1")throw new Ca({field:"version",metaMessages:["- Version must be '1'.","",`Provided value: ${p}`]});if(l&&!VZ.test(l))throw new Ca({field:"scheme",metaMessages:["- Scheme must be an RFC 3986 URI scheme.","- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1","",`Provided value: ${l}`]});const B=t.statement;if(B!=null&&B.includes(`
`))throw new Ca({field:"statement",metaMessages:["- Statement must not include '\\n'.","",`Provided value: ${B}`]})}const y=yg(t.address),_=l?`${l}://${r}`:r,M=t.statement?`${t.statement}
`:"",O=`${_} wants you to sign in with your Ethereum account:
${y}

${M}`;let L=`URI: ${d}
Version: ${p}
Chain ID: ${e}
Nonce: ${s}
Issued At: ${i.toISOString()}`;if(n&&(L+=`
Expiration Time: ${n.toISOString()}`),o&&(L+=`
Not Before: ${o.toISOString()}`),a&&(L+=`
Request ID: ${a}`),u){let B=`
Resources:`;for(const k of u){if(!Q7(k))throw new Ca({field:"resources",metaMessages:["- Every resource must be a RFC 3986 URI.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${k}`]});B+=`
- ${k}`}L+=B}return`${O}
${L}`}const zZ=/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,HZ=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,WZ=/^localhost(:[0-9]{1,5})?$/,KZ=/^[a-zA-Z0-9]{8,}$/,VZ=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/,t9="7a4434fefbcc9af474fb5c995e47d286",GZ={projectId:t9,metadata:{name:"codatta",description:"codatta",url:"https://codatta.io/",icons:["https://avatars.githubusercontent.com/u/171659315"]}},YZ={namespaces:{eip155:{methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData"],chains:["eip155:1"],events:["chainChanged","accountsChanged","disconnect"],rpcMap:{1:`https://rpc.walletconnect.com?chainId=eip155:1&projectId=${t9}`}}},skipPairing:!1};function JZ(t,e){const r=window.location.host,n=window.location.href;return e9({address:t,chainId:1,domain:r,nonce:e,uri:n,version:"1"})}function r9(t){var ie,me,j;const e=Ee.useRef(null),{wallet:r,onGetExtension:n,onSignFinish:i}=t,[s,o]=Ee.useState(""),[a,u]=Ee.useState(!1),[l,d]=Ee.useState(""),[p,y]=Ee.useState("scan"),_=Ee.useRef(),[M,O]=Ee.useState((ie=r.config)==null?void 0:ie.image),[L,B]=Ee.useState(!1),{saveLastUsedWallet:k}=Yl();async function H(E){var f,g,v,x;u(!0);const m=await Hz.init(GZ);m.session&&await m.disconnect();try{if(y("scan"),m.on("display_uri",ce=>{o(ce),u(!1),y("scan")}),m.on("error",ce=>{console.log(ce)}),m.on("session_update",ce=>{console.log("session_update",ce)}),!await m.connect(YZ))throw new Error("Walletconnect init failed");const A=new ru(m);O(((f=A.config)==null?void 0:f.image)||((g=E.config)==null?void 0:g.image));const b=await A.getAddress(),P=await xa.getNonce({account_type:"block_chain"});console.log("get nonce",P);const I=JZ(b,P);y("sign");const F=await A.signMessage(I,b);y("waiting"),await i(A,{message:I,nonce:P,signature:F,address:b,wallet_name:((v=A.config)==null?void 0:v.name)||((x=E.config)==null?void 0:x.name)||""}),k(A)}catch(S){console.log("err",S),d(S.details||S.message)}}function U(){_.current=new Z7({width:264,height:264,margin:0,type:"svg",qrOptions:{errorCorrectionLevel:"M"},dotsOptions:{color:"black",type:"rounded"},backgroundOptions:{color:"transparent"}}),_.current.append(e.current)}function z(E){var m;console.log(_.current),(m=_.current)==null||m.update({data:E})}Ee.useEffect(()=>{s&&z(s)},[s]),Ee.useEffect(()=>{H(r)},[r]),Ee.useEffect(()=>{U()},[]);function Z(){d(""),z(""),H(r)}function R(){B(!0),navigator.clipboard.writeText(s),setTimeout(()=>{B(!1)},2500)}function W(){var f;const E=(f=r.config)==null?void 0:f.desktop_link;if(!E)return;const m=`${E}?uri=${encodeURIComponent(s)}`;window.open(m,"_blank")}return le.jsxs("div",{children:[le.jsx("div",{className:"xc-text-center",children:le.jsxs("div",{className:"xc-relative xc-mx-auto xc-mb-6 xc-block xc-max-h-[272px] xc-max-w-[272px] xc-rounded-xl xc-bg-white xc-p-1",children:[le.jsx("div",{className:"xc-aspect-[1/1] xc-flex xc-h-full xc-w-full xc-justify-center",ref:e}),le.jsx("div",{className:"xc-absolute xc-left-0 xc-top-0 xc-flex xc-h-full xc-w-full xc-items-center xc-justify-center",children:a?le.jsx(Ec,{className:"xc-h-6 xc-w-6 xc-animate-spin xc-text-black",size:20}):le.jsx("img",{className:"xc-h-10 xc-w-10",src:M})})]})}),le.jsxs("div",{className:"xc-m-auto xc-mb-6 xc-flex xc-max-w-[400px] xc-flex-wrap xc-items-center xc-justify-between xc-gap-3",children:[le.jsx("button",{disabled:!s,onClick:R,className:"xc-disabled:hover-text-white xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black xc-disabled:cursor-not-allowed xc-disabled:opacity-40 xc-disabled:hover:bg-transparent",children:L?le.jsxs(le.Fragment,{children:[" ",le.jsx(lV,{})," Copied!"]}):le.jsxs(le.Fragment,{children:[le.jsx(pV,{}),"Copy QR URL"]})}),((me=r.config)==null?void 0:me.getWallet)&&le.jsxs("button",{className:"xc-rounded-2 xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black",onClick:n,children:[le.jsx(hV,{}),"Get Extension"]}),((j=r.config)==null?void 0:j.desktop_link)&&le.jsxs("button",{disabled:!s,className:"xc-rounded-2 xc-flex xc-min-w-[160px] xc-flex-1 xc-shrink-0 xc-items-center xc-justify-center xc-gap-2 xc-rounded-full xc-border xc-py-2 xc-text-sm xc-transition-all xc-hover:bg-white xc-hover:text-black",onClick:W,children:[le.jsx(F8,{}),"Desktop"]})]}),le.jsx("div",{className:"xc-text-center",children:l?le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[le.jsx("p",{className:"xc-text-danger xc-mb-2 xc-text-center",children:l}),le.jsx("button",{className:"xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1",onClick:Z,children:"Retry"})]}):le.jsxs(le.Fragment,{children:[p==="scan"&&le.jsx("p",{children:"Scan this QR code from your mobile wallet or phone's camera to connect."}),p==="connect"&&le.jsx("p",{children:"Click connect in your wallet app"}),p==="sign"&&le.jsx("p",{children:"Click sign-in in your wallet to confirm you own this wallet."}),p==="waiting"&&le.jsx("div",{className:"xc-text-center",children:le.jsx(Ec,{className:"xc-inline-block xc-animate-spin"})})]})})]})}const XZ="Accept connection request in the wallet",ZZ="Accept sign-in request in your wallet";function QZ(t,e,r){const n=window.location.host,i=window.location.href;return e9({address:t,chainId:r,domain:n,nonce:e,uri:i,version:"1"})}function n9(t){var y;const[e,r]=Ee.useState(),{wallet:n,onSignFinish:i}=t,s=Ee.useRef(),[o,a]=Ee.useState("connect"),{saveLastUsedWallet:u,chains:l}=Yl();async function d(_){var M;try{a("connect");const O=await n.connect();if(!O||O.length===0)throw new Error("Wallet connect error");const L=await n.getChain(),B=l.find(Z=>Z.id===L),k=l[0];B||(console.log("switch chain",l[0]),a("switch-chain"),await n.switchChain(l[0]));const H=yg(O[0]),U=QZ(H,_,k.id);a("sign");const z=await n.signMessage(U,H);if(!z||z.length===0)throw new Error("user sign error");a("waiting"),await i(n,{address:H,signature:z,message:U,nonce:_,wallet_name:((M=n.config)==null?void 0:M.name)||""}),u(n)}catch(O){console.log("walletSignin error",O.stack),console.log(O.details||O.message),r(O.details||O.message)}}async function p(){try{r("");const _=await xa.getNonce({account_type:"block_chain"});s.current=_,d(s.current)}catch(_){console.log(_.details),r(_.message)}}return Ee.useEffect(()=>{p()},[]),le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center xc-justify-center xc-gap-4",children:[le.jsx("img",{className:"xc-rounded-md xc-h-16 xc-w-16",src:(y=n.config)==null?void 0:y.image,alt:""}),e&&le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[le.jsx("p",{className:"xc-text-danger xc-mb-2 xc-text-center",children:e}),le.jsx("div",{className:"xc-flex xc-gap-2",children:le.jsx("button",{className:"xc-rounded-full xc-bg-white xc-bg-opacity-10 xc-px-6 xc-py-1",onClick:p,children:"Retry"})})]}),!e&&le.jsxs(le.Fragment,{children:[o==="connect"&&le.jsx("span",{className:"xc-text-center",children:XZ}),o==="sign"&&le.jsx("span",{className:"xc-text-center",children:ZZ}),o==="waiting"&&le.jsx("span",{className:"xc-text-center",children:le.jsx(Ec,{className:"xc-animate-spin"})}),o==="switch-chain"&&le.jsxs("span",{className:"xc-text-center",children:["Switch to ",l[0].name]})]})]})}const Gu="https://static.codatta.io/codatta-connect/wallet-icons.svg",eQ="https://itunes.apple.com/app/",tQ="https://play.google.com/store/apps/details?id=",rQ="https://chromewebstore.google.com/detail/",nQ="https://chromewebstore.google.com/detail/",iQ="https://addons.mozilla.org/en-US/firefox/addon/",sQ="https://microsoftedge.microsoft.com/addons/detail/";function Yu(t){const{icon:e,title:r,link:n}=t;return le.jsxs("a",{href:n,target:"_blank",className:"xc-flex xc-w-full xc-cursor-pointer xc-items-center xc-gap-2 xc-rounded-full xc-border xc-border-white xc-border-opacity-15 xc-px-6 xc-py-3 xc-transition-all xc-hover:bg-white xc-hover:bg-opacity-5",children:[le.jsx("img",{className:"xc-rounded-1 xc-h-6 xc-w-6",src:e,alt:""}),r,le.jsx($8,{className:"xc-ml-auto xc-text-gray-400"})]})}function oQ(t){const e={appStoreLink:"",playStoreLink:"",chromeStoreLink:"",braveStoreLink:"",firefoxStoreLink:"",edgeStoreLink:""};return t!=null&&t.app_store_id&&(e.appStoreLink=`${eQ}${t.app_store_id}`),t!=null&&t.play_store_id&&(e.playStoreLink=`${tQ}${t.play_store_id}`),t!=null&&t.chrome_store_id&&(e.chromeStoreLink=`${rQ}${t.chrome_store_id}`),t!=null&&t.brave_store_id&&(e.braveStoreLink=`${nQ}${t.brave_store_id}`),t!=null&&t.firefox_addon_id&&(e.firefoxStoreLink=`${iQ}${t.firefox_addon_id}`),t!=null&&t.edge_addon_id&&(e.edgeStoreLink=`${sQ}${t.edge_addon_id}`),e}function i9(t){var i,s,o;const{wallet:e}=t,r=(i=e.config)==null?void 0:i.getWallet,n=oQ(r);return le.jsxs("div",{className:"xc-flex xc-flex-col xc-items-center",children:[le.jsx("img",{className:"xc-rounded-md xc-mb-2 xc-h-12 xc-w-12",src:(s=e.config)==null?void 0:s.image,alt:""}),le.jsxs("p",{className:"xc-text-lg xc-font-bold",children:["Install ",(o=e.config)==null?void 0:o.name," to connect"]}),le.jsx("p",{className:"xc-mb-6 xc-text-sm xc-text-gray-500",children:"Select from your preferred options below:"}),le.jsxs("div",{className:"xc-grid xc-w-full xc-grid-cols-1 xc-gap-3",children:[(r==null?void 0:r.chrome_store_id)&&le.jsx(Yu,{link:n.chromeStoreLink,icon:`${Gu}#chrome`,title:"Google Play Store"}),(r==null?void 0:r.app_store_id)&&le.jsx(Yu,{link:n.appStoreLink,icon:`${Gu}#apple-dark`,title:"Apple App Store"}),(r==null?void 0:r.play_store_id)&&le.jsx(Yu,{link:n.playStoreLink,icon:`${Gu}#android`,title:"Google Play Store"}),(r==null?void 0:r.edge_addon_id)&&le.jsx(Yu,{link:n.edgeStoreLink,icon:`${Gu}#edge`,title:"Microsoft Edge"}),(r==null?void 0:r.brave_store_id)&&le.jsx(Yu,{link:n.braveStoreLink,icon:`${Gu}#brave`,title:"Brave extension"}),(r==null?void 0:r.firefox_addon_id)&&le.jsx(Yu,{link:n.firefoxStoreLink,icon:`${Gu}#firefox`,title:"Mozilla Firefox"})]})]})}function aQ(t){const{wallet:e}=t,[r,n]=Ee.useState(e.installed?"connect":"qr"),i=Bb();async function s(o,a){var l;const u=await xa.walletLogin({account_type:"block_chain",account_enum:i.role,connector:"codatta_wallet",inviter_code:i.inviterCode,wallet_name:((l=o.config)==null?void 0:l.name)||o.key,address:await o.getAddress(),chain:(await o.getChain()).toString(),nonce:a.nonce,signature:a.signature,message:a.message,source:{device:i.device,channel:i.channel,app:i.app}});await t.onLogin(u.data)}return le.jsxs(Ms,{children:[le.jsx("div",{className:"xc-mb-6",children:le.jsx(Tc,{title:"Connect wallet",onBack:t.onBack})}),r==="qr"&&le.jsx(r9,{wallet:e,onGetExtension:()=>n("get-extension"),onSignFinish:s}),r==="connect"&&le.jsx(n9,{onShowQrCode:()=>n("qr"),wallet:e,onSignFinish:s}),r==="get-extension"&&le.jsx(i9,{wallet:e})]})}function cQ(t){const{wallet:e,onClick:r}=t,n=le.jsx("img",{className:"xc-rounded-md xc-h-5 xc-w-5",src:e.imageUrl}),i=e.name||"";return le.jsx(Ob,{icon:n,title:i,onClick:()=>r(e)})}function s9(t){const{connector:e}=t,[r,n]=Ee.useState(),[i,s]=Ee.useState([]),o=Ee.useMemo(()=>r?i.filter(d=>d.name.toLowerCase().includes(r.toLowerCase())):i,[r,i]);function a(d){n(d.target.value)}async function u(){const d=await e.getWallets();s(d)}Ee.useEffect(()=>{u()},[]);function l(d){t.onSelect(d)}return le.jsxs(Ms,{children:[le.jsx("div",{className:"xc-mb-6",children:le.jsx(Tc,{title:"Select wallet",onBack:t.onBack})}),le.jsxs("div",{className:"xc-mb-6 xc-flex xc-gap-3 xc-px-4 xc-py-2 xc-border xc-rounded-xl xc-w-full xc-overflow-hidden xc-items-center xc-border-opacity-15 xc-border-white focus-within:xc-border-opacity-40",children:[le.jsx(j8,{className:"xc-shrink-0 xc-opacity-50"}),le.jsx("input",{type:"text",className:"xc-flex-1 xc-bg-transparent xc-appearance-none xc-outline-none",placeholder:"Search wallet",onInput:a})]}),le.jsx("div",{className:"xc-mb-4 xc-flex xc-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:o==null?void 0:o.map(d=>le.jsx(cQ,{wallet:d,onClick:l},d.name))})]})}var o9={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():(e.nacl||(e.nacl={}),e.nacl.util=r())})(nn,function(){var e={};function r(n){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(n){if(typeof n!="string")throw new TypeError("expected string");var i,s=unescape(encodeURIComponent(n)),o=new Uint8Array(s.length);for(i=0;i<s.length;i++)o[i]=s.charCodeAt(i);return o},e.encodeUTF8=function(n){var i,s=[];for(i=0;i<n.length;i++)s.push(String.fromCharCode(n[i]));return decodeURIComponent(escape(s.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(n){return Buffer.from(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(Buffer.from(n,"base64"),0))}):(e.encodeBase64=function(n){return new Buffer(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(new Buffer(n,"base64"),0))}):(e.encodeBase64=function(n){var i,s=[],o=n.length;for(i=0;i<o;i++)s.push(String.fromCharCode(n[i]));return btoa(s.join(""))},e.decodeBase64=function(n){r(n);var i,s=atob(n),o=new Uint8Array(s.length);for(i=0;i<s.length;i++)o[i]=s.charCodeAt(i);return o}),e})})(o9);var uQ=o9.exports;const hh=ji(uQ);var a9={exports:{}};(function(t){(function(e){var r=function($){var K,G=new Float64Array(16);if($)for(K=0;K<$.length;K++)G[K]=$[K];return G},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=r(),a=r([1]),u=r([56129,1]),l=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M($,K,G,C){$[K]=G>>24&255,$[K+1]=G>>16&255,$[K+2]=G>>8&255,$[K+3]=G&255,$[K+4]=C>>24&255,$[K+5]=C>>16&255,$[K+6]=C>>8&255,$[K+7]=C&255}function O($,K,G,C,Y){var q,ae=0;for(q=0;q<Y;q++)ae|=$[K+q]^G[C+q];return(1&ae-1>>>8)-1}function L($,K,G,C){return O($,K,G,C,16)}function B($,K,G,C){return O($,K,G,C,32)}function k($,K,G,C){for(var Y=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,q=G[0]&255|(G[1]&255)<<8|(G[2]&255)<<16|(G[3]&255)<<24,ae=G[4]&255|(G[5]&255)<<8|(G[6]&255)<<16|(G[7]&255)<<24,pe=G[8]&255|(G[9]&255)<<8|(G[10]&255)<<16|(G[11]&255)<<24,_e=G[12]&255|(G[13]&255)<<8|(G[14]&255)<<16|(G[15]&255)<<24,Re=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,De=K[0]&255|(K[1]&255)<<8|(K[2]&255)<<16|(K[3]&255)<<24,it=K[4]&255|(K[5]&255)<<8|(K[6]&255)<<16|(K[7]&255)<<24,Ue=K[8]&255|(K[9]&255)<<8|(K[10]&255)<<16|(K[11]&255)<<24,mt=K[12]&255|(K[13]&255)<<8|(K[14]&255)<<16|(K[15]&255)<<24,st=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,tt=G[16]&255|(G[17]&255)<<8|(G[18]&255)<<16|(G[19]&255)<<24,At=G[20]&255|(G[21]&255)<<8|(G[22]&255)<<16|(G[23]&255)<<24,Rt=G[24]&255|(G[25]&255)<<8|(G[26]&255)<<16|(G[27]&255)<<24,Mt=G[28]&255|(G[29]&255)<<8|(G[30]&255)<<16|(G[31]&255)<<24,Et=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,dt=Y,_t=q,ot=ae,wt=pe,lt=_e,at=Re,Ae=De,Pe=it,Ge=Ue,je=mt,qe=st,Xe=tt,kt=At,Wt=Rt,Zt=Mt,Kt=Et,de,nr=0;nr<20;nr+=2)de=dt+kt|0,lt^=de<<7|de>>>25,de=lt+dt|0,Ge^=de<<9|de>>>23,de=Ge+lt|0,kt^=de<<13|de>>>19,de=kt+Ge|0,dt^=de<<18|de>>>14,de=at+_t|0,je^=de<<7|de>>>25,de=je+at|0,Wt^=de<<9|de>>>23,de=Wt+je|0,_t^=de<<13|de>>>19,de=_t+Wt|0,at^=de<<18|de>>>14,de=qe+Ae|0,Zt^=de<<7|de>>>25,de=Zt+qe|0,ot^=de<<9|de>>>23,de=ot+Zt|0,Ae^=de<<13|de>>>19,de=Ae+ot|0,qe^=de<<18|de>>>14,de=Kt+Xe|0,wt^=de<<7|de>>>25,de=wt+Kt|0,Pe^=de<<9|de>>>23,de=Pe+wt|0,Xe^=de<<13|de>>>19,de=Xe+Pe|0,Kt^=de<<18|de>>>14,de=dt+wt|0,_t^=de<<7|de>>>25,de=_t+dt|0,ot^=de<<9|de>>>23,de=ot+_t|0,wt^=de<<13|de>>>19,de=wt+ot|0,dt^=de<<18|de>>>14,de=at+lt|0,Ae^=de<<7|de>>>25,de=Ae+at|0,Pe^=de<<9|de>>>23,de=Pe+Ae|0,lt^=de<<13|de>>>19,de=lt+Pe|0,at^=de<<18|de>>>14,de=qe+je|0,Xe^=de<<7|de>>>25,de=Xe+qe|0,Ge^=de<<9|de>>>23,de=Ge+Xe|0,je^=de<<13|de>>>19,de=je+Ge|0,qe^=de<<18|de>>>14,de=Kt+Zt|0,kt^=de<<7|de>>>25,de=kt+Kt|0,Wt^=de<<9|de>>>23,de=Wt+kt|0,Zt^=de<<13|de>>>19,de=Zt+Wt|0,Kt^=de<<18|de>>>14;dt=dt+Y|0,_t=_t+q|0,ot=ot+ae|0,wt=wt+pe|0,lt=lt+_e|0,at=at+Re|0,Ae=Ae+De|0,Pe=Pe+it|0,Ge=Ge+Ue|0,je=je+mt|0,qe=qe+st|0,Xe=Xe+tt|0,kt=kt+At|0,Wt=Wt+Rt|0,Zt=Zt+Mt|0,Kt=Kt+Et|0,$[0]=dt>>>0&255,$[1]=dt>>>8&255,$[2]=dt>>>16&255,$[3]=dt>>>24&255,$[4]=_t>>>0&255,$[5]=_t>>>8&255,$[6]=_t>>>16&255,$[7]=_t>>>24&255,$[8]=ot>>>0&255,$[9]=ot>>>8&255,$[10]=ot>>>16&255,$[11]=ot>>>24&255,$[12]=wt>>>0&255,$[13]=wt>>>8&255,$[14]=wt>>>16&255,$[15]=wt>>>24&255,$[16]=lt>>>0&255,$[17]=lt>>>8&255,$[18]=lt>>>16&255,$[19]=lt>>>24&255,$[20]=at>>>0&255,$[21]=at>>>8&255,$[22]=at>>>16&255,$[23]=at>>>24&255,$[24]=Ae>>>0&255,$[25]=Ae>>>8&255,$[26]=Ae>>>16&255,$[27]=Ae>>>24&255,$[28]=Pe>>>0&255,$[29]=Pe>>>8&255,$[30]=Pe>>>16&255,$[31]=Pe>>>24&255,$[32]=Ge>>>0&255,$[33]=Ge>>>8&255,$[34]=Ge>>>16&255,$[35]=Ge>>>24&255,$[36]=je>>>0&255,$[37]=je>>>8&255,$[38]=je>>>16&255,$[39]=je>>>24&255,$[40]=qe>>>0&255,$[41]=qe>>>8&255,$[42]=qe>>>16&255,$[43]=qe>>>24&255,$[44]=Xe>>>0&255,$[45]=Xe>>>8&255,$[46]=Xe>>>16&255,$[47]=Xe>>>24&255,$[48]=kt>>>0&255,$[49]=kt>>>8&255,$[50]=kt>>>16&255,$[51]=kt>>>24&255,$[52]=Wt>>>0&255,$[53]=Wt>>>8&255,$[54]=Wt>>>16&255,$[55]=Wt>>>24&255,$[56]=Zt>>>0&255,$[57]=Zt>>>8&255,$[58]=Zt>>>16&255,$[59]=Zt>>>24&255,$[60]=Kt>>>0&255,$[61]=Kt>>>8&255,$[62]=Kt>>>16&255,$[63]=Kt>>>24&255}function H($,K,G,C){for(var Y=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,q=G[0]&255|(G[1]&255)<<8|(G[2]&255)<<16|(G[3]&255)<<24,ae=G[4]&255|(G[5]&255)<<8|(G[6]&255)<<16|(G[7]&255)<<24,pe=G[8]&255|(G[9]&255)<<8|(G[10]&255)<<16|(G[11]&255)<<24,_e=G[12]&255|(G[13]&255)<<8|(G[14]&255)<<16|(G[15]&255)<<24,Re=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,De=K[0]&255|(K[1]&255)<<8|(K[2]&255)<<16|(K[3]&255)<<24,it=K[4]&255|(K[5]&255)<<8|(K[6]&255)<<16|(K[7]&255)<<24,Ue=K[8]&255|(K[9]&255)<<8|(K[10]&255)<<16|(K[11]&255)<<24,mt=K[12]&255|(K[13]&255)<<8|(K[14]&255)<<16|(K[15]&255)<<24,st=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,tt=G[16]&255|(G[17]&255)<<8|(G[18]&255)<<16|(G[19]&255)<<24,At=G[20]&255|(G[21]&255)<<8|(G[22]&255)<<16|(G[23]&255)<<24,Rt=G[24]&255|(G[25]&255)<<8|(G[26]&255)<<16|(G[27]&255)<<24,Mt=G[28]&255|(G[29]&255)<<8|(G[30]&255)<<16|(G[31]&255)<<24,Et=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,dt=Y,_t=q,ot=ae,wt=pe,lt=_e,at=Re,Ae=De,Pe=it,Ge=Ue,je=mt,qe=st,Xe=tt,kt=At,Wt=Rt,Zt=Mt,Kt=Et,de,nr=0;nr<20;nr+=2)de=dt+kt|0,lt^=de<<7|de>>>25,de=lt+dt|0,Ge^=de<<9|de>>>23,de=Ge+lt|0,kt^=de<<13|de>>>19,de=kt+Ge|0,dt^=de<<18|de>>>14,de=at+_t|0,je^=de<<7|de>>>25,de=je+at|0,Wt^=de<<9|de>>>23,de=Wt+je|0,_t^=de<<13|de>>>19,de=_t+Wt|0,at^=de<<18|de>>>14,de=qe+Ae|0,Zt^=de<<7|de>>>25,de=Zt+qe|0,ot^=de<<9|de>>>23,de=ot+Zt|0,Ae^=de<<13|de>>>19,de=Ae+ot|0,qe^=de<<18|de>>>14,de=Kt+Xe|0,wt^=de<<7|de>>>25,de=wt+Kt|0,Pe^=de<<9|de>>>23,de=Pe+wt|0,Xe^=de<<13|de>>>19,de=Xe+Pe|0,Kt^=de<<18|de>>>14,de=dt+wt|0,_t^=de<<7|de>>>25,de=_t+dt|0,ot^=de<<9|de>>>23,de=ot+_t|0,wt^=de<<13|de>>>19,de=wt+ot|0,dt^=de<<18|de>>>14,de=at+lt|0,Ae^=de<<7|de>>>25,de=Ae+at|0,Pe^=de<<9|de>>>23,de=Pe+Ae|0,lt^=de<<13|de>>>19,de=lt+Pe|0,at^=de<<18|de>>>14,de=qe+je|0,Xe^=de<<7|de>>>25,de=Xe+qe|0,Ge^=de<<9|de>>>23,de=Ge+Xe|0,je^=de<<13|de>>>19,de=je+Ge|0,qe^=de<<18|de>>>14,de=Kt+Zt|0,kt^=de<<7|de>>>25,de=kt+Kt|0,Wt^=de<<9|de>>>23,de=Wt+kt|0,Zt^=de<<13|de>>>19,de=Zt+Wt|0,Kt^=de<<18|de>>>14;$[0]=dt>>>0&255,$[1]=dt>>>8&255,$[2]=dt>>>16&255,$[3]=dt>>>24&255,$[4]=at>>>0&255,$[5]=at>>>8&255,$[6]=at>>>16&255,$[7]=at>>>24&255,$[8]=qe>>>0&255,$[9]=qe>>>8&255,$[10]=qe>>>16&255,$[11]=qe>>>24&255,$[12]=Kt>>>0&255,$[13]=Kt>>>8&255,$[14]=Kt>>>16&255,$[15]=Kt>>>24&255,$[16]=Ae>>>0&255,$[17]=Ae>>>8&255,$[18]=Ae>>>16&255,$[19]=Ae>>>24&255,$[20]=Pe>>>0&255,$[21]=Pe>>>8&255,$[22]=Pe>>>16&255,$[23]=Pe>>>24&255,$[24]=Ge>>>0&255,$[25]=Ge>>>8&255,$[26]=Ge>>>16&255,$[27]=Ge>>>24&255,$[28]=je>>>0&255,$[29]=je>>>8&255,$[30]=je>>>16&255,$[31]=je>>>24&255}function U($,K,G,C){k($,K,G,C)}function z($,K,G,C){H($,K,G,C)}var Z=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function R($,K,G,C,Y,q,ae){var pe=new Uint8Array(16),_e=new Uint8Array(64),Re,De;for(De=0;De<16;De++)pe[De]=0;for(De=0;De<8;De++)pe[De]=q[De];for(;Y>=64;){for(U(_e,pe,ae,Z),De=0;De<64;De++)$[K+De]=G[C+De]^_e[De];for(Re=1,De=8;De<16;De++)Re=Re+(pe[De]&255)|0,pe[De]=Re&255,Re>>>=8;Y-=64,K+=64,C+=64}if(Y>0)for(U(_e,pe,ae,Z),De=0;De<Y;De++)$[K+De]=G[C+De]^_e[De];return 0}function W($,K,G,C,Y){var q=new Uint8Array(16),ae=new Uint8Array(64),pe,_e;for(_e=0;_e<16;_e++)q[_e]=0;for(_e=0;_e<8;_e++)q[_e]=C[_e];for(;G>=64;){for(U(ae,q,Y,Z),_e=0;_e<64;_e++)$[K+_e]=ae[_e];for(pe=1,_e=8;_e<16;_e++)pe=pe+(q[_e]&255)|0,q[_e]=pe&255,pe>>>=8;G-=64,K+=64}if(G>0)for(U(ae,q,Y,Z),_e=0;_e<G;_e++)$[K+_e]=ae[_e];return 0}function ie($,K,G,C,Y){var q=new Uint8Array(32);z(q,C,Y,Z);for(var ae=new Uint8Array(8),pe=0;pe<8;pe++)ae[pe]=C[pe+16];return W($,K,G,ae,q)}function me($,K,G,C,Y,q,ae){var pe=new Uint8Array(32);z(pe,q,ae,Z);for(var _e=new Uint8Array(8),Re=0;Re<8;Re++)_e[Re]=q[Re+16];return R($,K,G,C,Y,_e,pe)}var j=function($){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var K,G,C,Y,q,ae,pe,_e;K=$[0]&255|($[1]&255)<<8,this.r[0]=K&8191,G=$[2]&255|($[3]&255)<<8,this.r[1]=(K>>>13|G<<3)&8191,C=$[4]&255|($[5]&255)<<8,this.r[2]=(G>>>10|C<<6)&7939,Y=$[6]&255|($[7]&255)<<8,this.r[3]=(C>>>7|Y<<9)&8191,q=$[8]&255|($[9]&255)<<8,this.r[4]=(Y>>>4|q<<12)&255,this.r[5]=q>>>1&8190,ae=$[10]&255|($[11]&255)<<8,this.r[6]=(q>>>14|ae<<2)&8191,pe=$[12]&255|($[13]&255)<<8,this.r[7]=(ae>>>11|pe<<5)&8065,_e=$[14]&255|($[15]&255)<<8,this.r[8]=(pe>>>8|_e<<8)&8191,this.r[9]=_e>>>5&127,this.pad[0]=$[16]&255|($[17]&255)<<8,this.pad[1]=$[18]&255|($[19]&255)<<8,this.pad[2]=$[20]&255|($[21]&255)<<8,this.pad[3]=$[22]&255|($[23]&255)<<8,this.pad[4]=$[24]&255|($[25]&255)<<8,this.pad[5]=$[26]&255|($[27]&255)<<8,this.pad[6]=$[28]&255|($[29]&255)<<8,this.pad[7]=$[30]&255|($[31]&255)<<8};j.prototype.blocks=function($,K,G){for(var C=this.fin?0:2048,Y,q,ae,pe,_e,Re,De,it,Ue,mt,st,tt,At,Rt,Mt,Et,dt,_t,ot,wt=this.h[0],lt=this.h[1],at=this.h[2],Ae=this.h[3],Pe=this.h[4],Ge=this.h[5],je=this.h[6],qe=this.h[7],Xe=this.h[8],kt=this.h[9],Wt=this.r[0],Zt=this.r[1],Kt=this.r[2],de=this.r[3],nr=this.r[4],pr=this.r[5],gr=this.r[6],Qt=this.r[7],mr=this.r[8],lr=this.r[9];G>=16;)Y=$[K+0]&255|($[K+1]&255)<<8,wt+=Y&8191,q=$[K+2]&255|($[K+3]&255)<<8,lt+=(Y>>>13|q<<3)&8191,ae=$[K+4]&255|($[K+5]&255)<<8,at+=(q>>>10|ae<<6)&8191,pe=$[K+6]&255|($[K+7]&255)<<8,Ae+=(ae>>>7|pe<<9)&8191,_e=$[K+8]&255|($[K+9]&255)<<8,Pe+=(pe>>>4|_e<<12)&8191,Ge+=_e>>>1&8191,Re=$[K+10]&255|($[K+11]&255)<<8,je+=(_e>>>14|Re<<2)&8191,De=$[K+12]&255|($[K+13]&255)<<8,qe+=(Re>>>11|De<<5)&8191,it=$[K+14]&255|($[K+15]&255)<<8,Xe+=(De>>>8|it<<8)&8191,kt+=it>>>5|C,Ue=0,mt=Ue,mt+=wt*Wt,mt+=lt*(5*lr),mt+=at*(5*mr),mt+=Ae*(5*Qt),mt+=Pe*(5*gr),Ue=mt>>>13,mt&=8191,mt+=Ge*(5*pr),mt+=je*(5*nr),mt+=qe*(5*de),mt+=Xe*(5*Kt),mt+=kt*(5*Zt),Ue+=mt>>>13,mt&=8191,st=Ue,st+=wt*Zt,st+=lt*Wt,st+=at*(5*lr),st+=Ae*(5*mr),st+=Pe*(5*Qt),Ue=st>>>13,st&=8191,st+=Ge*(5*gr),st+=je*(5*pr),st+=qe*(5*nr),st+=Xe*(5*de),st+=kt*(5*Kt),Ue+=st>>>13,st&=8191,tt=Ue,tt+=wt*Kt,tt+=lt*Zt,tt+=at*Wt,tt+=Ae*(5*lr),tt+=Pe*(5*mr),Ue=tt>>>13,tt&=8191,tt+=Ge*(5*Qt),tt+=je*(5*gr),tt+=qe*(5*pr),tt+=Xe*(5*nr),tt+=kt*(5*de),Ue+=tt>>>13,tt&=8191,At=Ue,At+=wt*de,At+=lt*Kt,At+=at*Zt,At+=Ae*Wt,At+=Pe*(5*lr),Ue=At>>>13,At&=8191,At+=Ge*(5*mr),At+=je*(5*Qt),At+=qe*(5*gr),At+=Xe*(5*pr),At+=kt*(5*nr),Ue+=At>>>13,At&=8191,Rt=Ue,Rt+=wt*nr,Rt+=lt*de,Rt+=at*Kt,Rt+=Ae*Zt,Rt+=Pe*Wt,Ue=Rt>>>13,Rt&=8191,Rt+=Ge*(5*lr),Rt+=je*(5*mr),Rt+=qe*(5*Qt),Rt+=Xe*(5*gr),Rt+=kt*(5*pr),Ue+=Rt>>>13,Rt&=8191,Mt=Ue,Mt+=wt*pr,Mt+=lt*nr,Mt+=at*de,Mt+=Ae*Kt,Mt+=Pe*Zt,Ue=Mt>>>13,Mt&=8191,Mt+=Ge*Wt,Mt+=je*(5*lr),Mt+=qe*(5*mr),Mt+=Xe*(5*Qt),Mt+=kt*(5*gr),Ue+=Mt>>>13,Mt&=8191,Et=Ue,Et+=wt*gr,Et+=lt*pr,Et+=at*nr,Et+=Ae*de,Et+=Pe*Kt,Ue=Et>>>13,Et&=8191,Et+=Ge*Zt,Et+=je*Wt,Et+=qe*(5*lr),Et+=Xe*(5*mr),Et+=kt*(5*Qt),Ue+=Et>>>13,Et&=8191,dt=Ue,dt+=wt*Qt,dt+=lt*gr,dt+=at*pr,dt+=Ae*nr,dt+=Pe*de,Ue=dt>>>13,dt&=8191,dt+=Ge*Kt,dt+=je*Zt,dt+=qe*Wt,dt+=Xe*(5*lr),dt+=kt*(5*mr),Ue+=dt>>>13,dt&=8191,_t=Ue,_t+=wt*mr,_t+=lt*Qt,_t+=at*gr,_t+=Ae*pr,_t+=Pe*nr,Ue=_t>>>13,_t&=8191,_t+=Ge*de,_t+=je*Kt,_t+=qe*Zt,_t+=Xe*Wt,_t+=kt*(5*lr),Ue+=_t>>>13,_t&=8191,ot=Ue,ot+=wt*lr,ot+=lt*mr,ot+=at*Qt,ot+=Ae*gr,ot+=Pe*pr,Ue=ot>>>13,ot&=8191,ot+=Ge*nr,ot+=je*de,ot+=qe*Kt,ot+=Xe*Zt,ot+=kt*Wt,Ue+=ot>>>13,ot&=8191,Ue=(Ue<<2)+Ue|0,Ue=Ue+mt|0,mt=Ue&8191,Ue=Ue>>>13,st+=Ue,wt=mt,lt=st,at=tt,Ae=At,Pe=Rt,Ge=Mt,je=Et,qe=dt,Xe=_t,kt=ot,K+=16,G-=16;this.h[0]=wt,this.h[1]=lt,this.h[2]=at,this.h[3]=Ae,this.h[4]=Pe,this.h[5]=Ge,this.h[6]=je,this.h[7]=qe,this.h[8]=Xe,this.h[9]=kt},j.prototype.finish=function($,K){var G=new Uint16Array(10),C,Y,q,ae;if(this.leftover){for(ae=this.leftover,this.buffer[ae++]=1;ae<16;ae++)this.buffer[ae]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(C=this.h[1]>>>13,this.h[1]&=8191,ae=2;ae<10;ae++)this.h[ae]+=C,C=this.h[ae]>>>13,this.h[ae]&=8191;for(this.h[0]+=C*5,C=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=C,C=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=C,G[0]=this.h[0]+5,C=G[0]>>>13,G[0]&=8191,ae=1;ae<10;ae++)G[ae]=this.h[ae]+C,C=G[ae]>>>13,G[ae]&=8191;for(G[9]-=8192,Y=(C^1)-1,ae=0;ae<10;ae++)G[ae]&=Y;for(Y=~Y,ae=0;ae<10;ae++)this.h[ae]=this.h[ae]&Y|G[ae];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,q=this.h[0]+this.pad[0],this.h[0]=q&65535,ae=1;ae<8;ae++)q=(this.h[ae]+this.pad[ae]|0)+(q>>>16)|0,this.h[ae]=q&65535;$[K+0]=this.h[0]>>>0&255,$[K+1]=this.h[0]>>>8&255,$[K+2]=this.h[1]>>>0&255,$[K+3]=this.h[1]>>>8&255,$[K+4]=this.h[2]>>>0&255,$[K+5]=this.h[2]>>>8&255,$[K+6]=this.h[3]>>>0&255,$[K+7]=this.h[3]>>>8&255,$[K+8]=this.h[4]>>>0&255,$[K+9]=this.h[4]>>>8&255,$[K+10]=this.h[5]>>>0&255,$[K+11]=this.h[5]>>>8&255,$[K+12]=this.h[6]>>>0&255,$[K+13]=this.h[6]>>>8&255,$[K+14]=this.h[7]>>>0&255,$[K+15]=this.h[7]>>>8&255},j.prototype.update=function($,K,G){var C,Y;if(this.leftover){for(Y=16-this.leftover,Y>G&&(Y=G),C=0;C<Y;C++)this.buffer[this.leftover+C]=$[K+C];if(G-=Y,K+=Y,this.leftover+=Y,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(G>=16&&(Y=G-G%16,this.blocks($,K,Y),K+=Y,G-=Y),G){for(C=0;C<G;C++)this.buffer[this.leftover+C]=$[K+C];this.leftover+=G}};function E($,K,G,C,Y,q){var ae=new j(q);return ae.update(G,C,Y),ae.finish($,K),0}function m($,K,G,C,Y,q){var ae=new Uint8Array(16);return E(ae,0,G,C,Y,q),L($,K,ae,0)}function f($,K,G,C,Y){var q;if(G<32)return-1;for(me($,0,K,0,G,C,Y),E($,16,$,32,G-32,$),q=0;q<16;q++)$[q]=0;return 0}function g($,K,G,C,Y){var q,ae=new Uint8Array(32);if(G<32||(ie(ae,0,32,C,Y),m(K,16,K,32,G-32,ae)!==0))return-1;for(me($,0,K,0,G,C,Y),q=0;q<32;q++)$[q]=0;return 0}function v($,K){var G;for(G=0;G<16;G++)$[G]=K[G]|0}function x($){var K,G,C=1;for(K=0;K<16;K++)G=$[K]+C+65535,C=Math.floor(G/65536),$[K]=G-C*65536;$[0]+=C-1+37*(C-1)}function S($,K,G){for(var C,Y=~(G-1),q=0;q<16;q++)C=Y&($[q]^K[q]),$[q]^=C,K[q]^=C}function A($,K){var G,C,Y,q=r(),ae=r();for(G=0;G<16;G++)ae[G]=K[G];for(x(ae),x(ae),x(ae),C=0;C<2;C++){for(q[0]=ae[0]-65517,G=1;G<15;G++)q[G]=ae[G]-65535-(q[G-1]>>16&1),q[G-1]&=65535;q[15]=ae[15]-32767-(q[14]>>16&1),Y=q[15]>>16&1,q[14]&=65535,S(ae,q,1-Y)}for(G=0;G<16;G++)$[2*G]=ae[G]&255,$[2*G+1]=ae[G]>>8}function b($,K){var G=new Uint8Array(32),C=new Uint8Array(32);return A(G,$),A(C,K),B(G,0,C,0)}function P($){var K=new Uint8Array(32);return A(K,$),K[0]&1}function I($,K){var G;for(G=0;G<16;G++)$[G]=K[2*G]+(K[2*G+1]<<8);$[15]&=32767}function F($,K,G){for(var C=0;C<16;C++)$[C]=K[C]+G[C]}function ce($,K,G){for(var C=0;C<16;C++)$[C]=K[C]-G[C]}function D($,K,G){var C,Y,q=0,ae=0,pe=0,_e=0,Re=0,De=0,it=0,Ue=0,mt=0,st=0,tt=0,At=0,Rt=0,Mt=0,Et=0,dt=0,_t=0,ot=0,wt=0,lt=0,at=0,Ae=0,Pe=0,Ge=0,je=0,qe=0,Xe=0,kt=0,Wt=0,Zt=0,Kt=0,de=G[0],nr=G[1],pr=G[2],gr=G[3],Qt=G[4],mr=G[5],lr=G[6],Lr=G[7],vr=G[8],xr=G[9],Br=G[10],$r=G[11],Ir=G[12],ln=G[13],hn=G[14],dn=G[15];C=K[0],q+=C*de,ae+=C*nr,pe+=C*pr,_e+=C*gr,Re+=C*Qt,De+=C*mr,it+=C*lr,Ue+=C*Lr,mt+=C*vr,st+=C*xr,tt+=C*Br,At+=C*$r,Rt+=C*Ir,Mt+=C*ln,Et+=C*hn,dt+=C*dn,C=K[1],ae+=C*de,pe+=C*nr,_e+=C*pr,Re+=C*gr,De+=C*Qt,it+=C*mr,Ue+=C*lr,mt+=C*Lr,st+=C*vr,tt+=C*xr,At+=C*Br,Rt+=C*$r,Mt+=C*Ir,Et+=C*ln,dt+=C*hn,_t+=C*dn,C=K[2],pe+=C*de,_e+=C*nr,Re+=C*pr,De+=C*gr,it+=C*Qt,Ue+=C*mr,mt+=C*lr,st+=C*Lr,tt+=C*vr,At+=C*xr,Rt+=C*Br,Mt+=C*$r,Et+=C*Ir,dt+=C*ln,_t+=C*hn,ot+=C*dn,C=K[3],_e+=C*de,Re+=C*nr,De+=C*pr,it+=C*gr,Ue+=C*Qt,mt+=C*mr,st+=C*lr,tt+=C*Lr,At+=C*vr,Rt+=C*xr,Mt+=C*Br,Et+=C*$r,dt+=C*Ir,_t+=C*ln,ot+=C*hn,wt+=C*dn,C=K[4],Re+=C*de,De+=C*nr,it+=C*pr,Ue+=C*gr,mt+=C*Qt,st+=C*mr,tt+=C*lr,At+=C*Lr,Rt+=C*vr,Mt+=C*xr,Et+=C*Br,dt+=C*$r,_t+=C*Ir,ot+=C*ln,wt+=C*hn,lt+=C*dn,C=K[5],De+=C*de,it+=C*nr,Ue+=C*pr,mt+=C*gr,st+=C*Qt,tt+=C*mr,At+=C*lr,Rt+=C*Lr,Mt+=C*vr,Et+=C*xr,dt+=C*Br,_t+=C*$r,ot+=C*Ir,wt+=C*ln,lt+=C*hn,at+=C*dn,C=K[6],it+=C*de,Ue+=C*nr,mt+=C*pr,st+=C*gr,tt+=C*Qt,At+=C*mr,Rt+=C*lr,Mt+=C*Lr,Et+=C*vr,dt+=C*xr,_t+=C*Br,ot+=C*$r,wt+=C*Ir,lt+=C*ln,at+=C*hn,Ae+=C*dn,C=K[7],Ue+=C*de,mt+=C*nr,st+=C*pr,tt+=C*gr,At+=C*Qt,Rt+=C*mr,Mt+=C*lr,Et+=C*Lr,dt+=C*vr,_t+=C*xr,ot+=C*Br,wt+=C*$r,lt+=C*Ir,at+=C*ln,Ae+=C*hn,Pe+=C*dn,C=K[8],mt+=C*de,st+=C*nr,tt+=C*pr,At+=C*gr,Rt+=C*Qt,Mt+=C*mr,Et+=C*lr,dt+=C*Lr,_t+=C*vr,ot+=C*xr,wt+=C*Br,lt+=C*$r,at+=C*Ir,Ae+=C*ln,Pe+=C*hn,Ge+=C*dn,C=K[9],st+=C*de,tt+=C*nr,At+=C*pr,Rt+=C*gr,Mt+=C*Qt,Et+=C*mr,dt+=C*lr,_t+=C*Lr,ot+=C*vr,wt+=C*xr,lt+=C*Br,at+=C*$r,Ae+=C*Ir,Pe+=C*ln,Ge+=C*hn,je+=C*dn,C=K[10],tt+=C*de,At+=C*nr,Rt+=C*pr,Mt+=C*gr,Et+=C*Qt,dt+=C*mr,_t+=C*lr,ot+=C*Lr,wt+=C*vr,lt+=C*xr,at+=C*Br,Ae+=C*$r,Pe+=C*Ir,Ge+=C*ln,je+=C*hn,qe+=C*dn,C=K[11],At+=C*de,Rt+=C*nr,Mt+=C*pr,Et+=C*gr,dt+=C*Qt,_t+=C*mr,ot+=C*lr,wt+=C*Lr,lt+=C*vr,at+=C*xr,Ae+=C*Br,Pe+=C*$r,Ge+=C*Ir,je+=C*ln,qe+=C*hn,Xe+=C*dn,C=K[12],Rt+=C*de,Mt+=C*nr,Et+=C*pr,dt+=C*gr,_t+=C*Qt,ot+=C*mr,wt+=C*lr,lt+=C*Lr,at+=C*vr,Ae+=C*xr,Pe+=C*Br,Ge+=C*$r,je+=C*Ir,qe+=C*ln,Xe+=C*hn,kt+=C*dn,C=K[13],Mt+=C*de,Et+=C*nr,dt+=C*pr,_t+=C*gr,ot+=C*Qt,wt+=C*mr,lt+=C*lr,at+=C*Lr,Ae+=C*vr,Pe+=C*xr,Ge+=C*Br,je+=C*$r,qe+=C*Ir,Xe+=C*ln,kt+=C*hn,Wt+=C*dn,C=K[14],Et+=C*de,dt+=C*nr,_t+=C*pr,ot+=C*gr,wt+=C*Qt,lt+=C*mr,at+=C*lr,Ae+=C*Lr,Pe+=C*vr,Ge+=C*xr,je+=C*Br,qe+=C*$r,Xe+=C*Ir,kt+=C*ln,Wt+=C*hn,Zt+=C*dn,C=K[15],dt+=C*de,_t+=C*nr,ot+=C*pr,wt+=C*gr,lt+=C*Qt,at+=C*mr,Ae+=C*lr,Pe+=C*Lr,Ge+=C*vr,je+=C*xr,qe+=C*Br,Xe+=C*$r,kt+=C*Ir,Wt+=C*ln,Zt+=C*hn,Kt+=C*dn,q+=38*_t,ae+=38*ot,pe+=38*wt,_e+=38*lt,Re+=38*at,De+=38*Ae,it+=38*Pe,Ue+=38*Ge,mt+=38*je,st+=38*qe,tt+=38*Xe,At+=38*kt,Rt+=38*Wt,Mt+=38*Zt,Et+=38*Kt,Y=1,C=q+Y+65535,Y=Math.floor(C/65536),q=C-Y*65536,C=ae+Y+65535,Y=Math.floor(C/65536),ae=C-Y*65536,C=pe+Y+65535,Y=Math.floor(C/65536),pe=C-Y*65536,C=_e+Y+65535,Y=Math.floor(C/65536),_e=C-Y*65536,C=Re+Y+65535,Y=Math.floor(C/65536),Re=C-Y*65536,C=De+Y+65535,Y=Math.floor(C/65536),De=C-Y*65536,C=it+Y+65535,Y=Math.floor(C/65536),it=C-Y*65536,C=Ue+Y+65535,Y=Math.floor(C/65536),Ue=C-Y*65536,C=mt+Y+65535,Y=Math.floor(C/65536),mt=C-Y*65536,C=st+Y+65535,Y=Math.floor(C/65536),st=C-Y*65536,C=tt+Y+65535,Y=Math.floor(C/65536),tt=C-Y*65536,C=At+Y+65535,Y=Math.floor(C/65536),At=C-Y*65536,C=Rt+Y+65535,Y=Math.floor(C/65536),Rt=C-Y*65536,C=Mt+Y+65535,Y=Math.floor(C/65536),Mt=C-Y*65536,C=Et+Y+65535,Y=Math.floor(C/65536),Et=C-Y*65536,C=dt+Y+65535,Y=Math.floor(C/65536),dt=C-Y*65536,q+=Y-1+37*(Y-1),Y=1,C=q+Y+65535,Y=Math.floor(C/65536),q=C-Y*65536,C=ae+Y+65535,Y=Math.floor(C/65536),ae=C-Y*65536,C=pe+Y+65535,Y=Math.floor(C/65536),pe=C-Y*65536,C=_e+Y+65535,Y=Math.floor(C/65536),_e=C-Y*65536,C=Re+Y+65535,Y=Math.floor(C/65536),Re=C-Y*65536,C=De+Y+65535,Y=Math.floor(C/65536),De=C-Y*65536,C=it+Y+65535,Y=Math.floor(C/65536),it=C-Y*65536,C=Ue+Y+65535,Y=Math.floor(C/65536),Ue=C-Y*65536,C=mt+Y+65535,Y=Math.floor(C/65536),mt=C-Y*65536,C=st+Y+65535,Y=Math.floor(C/65536),st=C-Y*65536,C=tt+Y+65535,Y=Math.floor(C/65536),tt=C-Y*65536,C=At+Y+65535,Y=Math.floor(C/65536),At=C-Y*65536,C=Rt+Y+65535,Y=Math.floor(C/65536),Rt=C-Y*65536,C=Mt+Y+65535,Y=Math.floor(C/65536),Mt=C-Y*65536,C=Et+Y+65535,Y=Math.floor(C/65536),Et=C-Y*65536,C=dt+Y+65535,Y=Math.floor(C/65536),dt=C-Y*65536,q+=Y-1+37*(Y-1),$[0]=q,$[1]=ae,$[2]=pe,$[3]=_e,$[4]=Re,$[5]=De,$[6]=it,$[7]=Ue,$[8]=mt,$[9]=st,$[10]=tt,$[11]=At,$[12]=Rt,$[13]=Mt,$[14]=Et,$[15]=dt}function se($,K){D($,K,K)}function ee($,K){var G=r(),C;for(C=0;C<16;C++)G[C]=K[C];for(C=253;C>=0;C--)se(G,G),C!==2&&C!==4&&D(G,G,K);for(C=0;C<16;C++)$[C]=G[C]}function J($,K){var G=r(),C;for(C=0;C<16;C++)G[C]=K[C];for(C=250;C>=0;C--)se(G,G),C!==1&&D(G,G,K);for(C=0;C<16;C++)$[C]=G[C]}function Q($,K,G){var C=new Uint8Array(32),Y=new Float64Array(80),q,ae,pe=r(),_e=r(),Re=r(),De=r(),it=r(),Ue=r();for(ae=0;ae<31;ae++)C[ae]=K[ae];for(C[31]=K[31]&127|64,C[0]&=248,I(Y,G),ae=0;ae<16;ae++)_e[ae]=Y[ae],De[ae]=pe[ae]=Re[ae]=0;for(pe[0]=De[0]=1,ae=254;ae>=0;--ae)q=C[ae>>>3]>>>(ae&7)&1,S(pe,_e,q),S(Re,De,q),F(it,pe,Re),ce(pe,pe,Re),F(Re,_e,De),ce(_e,_e,De),se(De,it),se(Ue,pe),D(pe,Re,pe),D(Re,_e,it),F(it,pe,Re),ce(pe,pe,Re),se(_e,pe),ce(Re,De,Ue),D(pe,Re,u),F(pe,pe,De),D(Re,Re,pe),D(pe,De,Ue),D(De,_e,Y),se(_e,it),S(pe,_e,q),S(Re,De,q);for(ae=0;ae<16;ae++)Y[ae+16]=pe[ae],Y[ae+32]=Re[ae],Y[ae+48]=_e[ae],Y[ae+64]=De[ae];var mt=Y.subarray(32),st=Y.subarray(16);return ee(mt,mt),D(st,st,mt),A($,st),0}function T($,K){return Q($,K,s)}function X($,K){return n(K,32),T($,K)}function re($,K,G){var C=new Uint8Array(32);return Q(C,G,K),z($,i,C,Z)}var ge=f,oe=g;function fe($,K,G,C,Y,q){var ae=new Uint8Array(32);return re(ae,Y,q),ge($,K,G,C,ae)}function be($,K,G,C,Y,q){var ae=new Uint8Array(32);return re(ae,Y,q),oe($,K,G,C,ae)}var Me=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ne($,K,G,C){for(var Y=new Int32Array(16),q=new Int32Array(16),ae,pe,_e,Re,De,it,Ue,mt,st,tt,At,Rt,Mt,Et,dt,_t,ot,wt,lt,at,Ae,Pe,Ge,je,qe,Xe,kt=$[0],Wt=$[1],Zt=$[2],Kt=$[3],de=$[4],nr=$[5],pr=$[6],gr=$[7],Qt=K[0],mr=K[1],lr=K[2],Lr=K[3],vr=K[4],xr=K[5],Br=K[6],$r=K[7],Ir=0;C>=128;){for(lt=0;lt<16;lt++)at=8*lt+Ir,Y[lt]=G[at+0]<<24|G[at+1]<<16|G[at+2]<<8|G[at+3],q[lt]=G[at+4]<<24|G[at+5]<<16|G[at+6]<<8|G[at+7];for(lt=0;lt<80;lt++)if(ae=kt,pe=Wt,_e=Zt,Re=Kt,De=de,it=nr,Ue=pr,mt=gr,st=Qt,tt=mr,At=lr,Rt=Lr,Mt=vr,Et=xr,dt=Br,_t=$r,Ae=gr,Pe=$r,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=(de>>>14|vr<<18)^(de>>>18|vr<<14)^(vr>>>9|de<<23),Pe=(vr>>>14|de<<18)^(vr>>>18|de<<14)^(de>>>9|vr<<23),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=de&nr^~de&pr,Pe=vr&xr^~vr&Br,Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=Me[lt*2],Pe=Me[lt*2+1],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=Y[lt%16],Pe=q[lt%16],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,ot=qe&65535|Xe<<16,wt=Ge&65535|je<<16,Ae=ot,Pe=wt,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=(kt>>>28|Qt<<4)^(Qt>>>2|kt<<30)^(Qt>>>7|kt<<25),Pe=(Qt>>>28|kt<<4)^(kt>>>2|Qt<<30)^(kt>>>7|Qt<<25),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,Ae=kt&Wt^kt&Zt^Wt&Zt,Pe=Qt&mr^Qt&lr^mr&lr,Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,mt=qe&65535|Xe<<16,_t=Ge&65535|je<<16,Ae=Re,Pe=Rt,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=ot,Pe=wt,Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,Re=qe&65535|Xe<<16,Rt=Ge&65535|je<<16,Wt=ae,Zt=pe,Kt=_e,de=Re,nr=De,pr=it,gr=Ue,kt=mt,mr=st,lr=tt,Lr=At,vr=Rt,xr=Mt,Br=Et,$r=dt,Qt=_t,lt%16===15)for(at=0;at<16;at++)Ae=Y[at],Pe=q[at],Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=Y[(at+9)%16],Pe=q[(at+9)%16],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,ot=Y[(at+1)%16],wt=q[(at+1)%16],Ae=(ot>>>1|wt<<31)^(ot>>>8|wt<<24)^ot>>>7,Pe=(wt>>>1|ot<<31)^(wt>>>8|ot<<24)^(wt>>>7|ot<<25),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,ot=Y[(at+14)%16],wt=q[(at+14)%16],Ae=(ot>>>19|wt<<13)^(wt>>>29|ot<<3)^ot>>>6,Pe=(wt>>>19|ot<<13)^(ot>>>29|wt<<3)^(wt>>>6|ot<<26),Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,Y[at]=qe&65535|Xe<<16,q[at]=Ge&65535|je<<16;Ae=kt,Pe=Qt,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[0],Pe=K[0],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[0]=kt=qe&65535|Xe<<16,K[0]=Qt=Ge&65535|je<<16,Ae=Wt,Pe=mr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[1],Pe=K[1],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[1]=Wt=qe&65535|Xe<<16,K[1]=mr=Ge&65535|je<<16,Ae=Zt,Pe=lr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[2],Pe=K[2],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[2]=Zt=qe&65535|Xe<<16,K[2]=lr=Ge&65535|je<<16,Ae=Kt,Pe=Lr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[3],Pe=K[3],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[3]=Kt=qe&65535|Xe<<16,K[3]=Lr=Ge&65535|je<<16,Ae=de,Pe=vr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[4],Pe=K[4],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[4]=de=qe&65535|Xe<<16,K[4]=vr=Ge&65535|je<<16,Ae=nr,Pe=xr,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[5],Pe=K[5],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[5]=nr=qe&65535|Xe<<16,K[5]=xr=Ge&65535|je<<16,Ae=pr,Pe=Br,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[6],Pe=K[6],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[6]=pr=qe&65535|Xe<<16,K[6]=Br=Ge&65535|je<<16,Ae=gr,Pe=$r,Ge=Pe&65535,je=Pe>>>16,qe=Ae&65535,Xe=Ae>>>16,Ae=$[7],Pe=K[7],Ge+=Pe&65535,je+=Pe>>>16,qe+=Ae&65535,Xe+=Ae>>>16,je+=Ge>>>16,qe+=je>>>16,Xe+=qe>>>16,$[7]=gr=qe&65535|Xe<<16,K[7]=$r=Ge&65535|je<<16,Ir+=128,C-=128}return C}function Te($,K,G){var C=new Int32Array(8),Y=new Int32Array(8),q=new Uint8Array(256),ae,pe=G;for(C[0]=1779033703,C[1]=3144134277,C[2]=1013904242,C[3]=2773480762,C[4]=1359893119,C[5]=2600822924,C[6]=528734635,C[7]=1541459225,Y[0]=4089235720,Y[1]=2227873595,Y[2]=4271175723,Y[3]=1595750129,Y[4]=2917565137,Y[5]=725511199,Y[6]=4215389547,Y[7]=327033209,Ne(C,Y,K,G),G%=128,ae=0;ae<G;ae++)q[ae]=K[pe-G+ae];for(q[G]=128,G=256-128*(G<112?1:0),q[G-9]=0,M(q,G-8,pe/536870912|0,pe<<3),Ne(C,Y,q,G),ae=0;ae<8;ae++)M($,8*ae,C[ae],Y[ae]);return 0}function $e($,K){var G=r(),C=r(),Y=r(),q=r(),ae=r(),pe=r(),_e=r(),Re=r(),De=r();ce(G,$[1],$[0]),ce(De,K[1],K[0]),D(G,G,De),F(C,$[0],$[1]),F(De,K[0],K[1]),D(C,C,De),D(Y,$[3],K[3]),D(Y,Y,d),D(q,$[2],K[2]),F(q,q,q),ce(ae,C,G),ce(pe,q,Y),F(_e,q,Y),F(Re,C,G),D($[0],ae,pe),D($[1],Re,_e),D($[2],_e,pe),D($[3],ae,Re)}function Ie($,K,G){var C;for(C=0;C<4;C++)S($[C],K[C],G)}function Le($,K){var G=r(),C=r(),Y=r();ee(Y,K[2]),D(G,K[0],Y),D(C,K[1],Y),A($,C),$[31]^=P(G)<<7}function Ve($,K,G){var C,Y;for(v($[0],o),v($[1],a),v($[2],a),v($[3],o),Y=255;Y>=0;--Y)C=G[Y/8|0]>>(Y&7)&1,Ie($,K,C),$e(K,$),$e($,$),Ie($,K,C)}function ke($,K){var G=[r(),r(),r(),r()];v(G[0],p),v(G[1],y),v(G[2],a),D(G[3],p,y),Ve($,G,K)}function ze($,K,G){var C=new Uint8Array(64),Y=[r(),r(),r(),r()],q;for(G||n(K,32),Te(C,K,32),C[0]&=248,C[31]&=127,C[31]|=64,ke(Y,C),Le($,Y),q=0;q<32;q++)K[q+32]=$[q];return 0}var He=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Se($,K){var G,C,Y,q;for(C=63;C>=32;--C){for(G=0,Y=C-32,q=C-12;Y<q;++Y)K[Y]+=G-16*K[C]*He[Y-(C-32)],G=Math.floor((K[Y]+128)/256),K[Y]-=G*256;K[Y]+=G,K[C]=0}for(G=0,Y=0;Y<32;Y++)K[Y]+=G-(K[31]>>4)*He[Y],G=K[Y]>>8,K[Y]&=255;for(Y=0;Y<32;Y++)K[Y]-=G*He[Y];for(C=0;C<32;C++)K[C+1]+=K[C]>>8,$[C]=K[C]&255}function Qe($){var K=new Float64Array(64),G;for(G=0;G<64;G++)K[G]=$[G];for(G=0;G<64;G++)$[G]=0;Se($,K)}function ct($,K,G,C){var Y=new Uint8Array(64),q=new Uint8Array(64),ae=new Uint8Array(64),pe,_e,Re=new Float64Array(64),De=[r(),r(),r(),r()];Te(Y,C,32),Y[0]&=248,Y[31]&=127,Y[31]|=64;var it=G+64;for(pe=0;pe<G;pe++)$[64+pe]=K[pe];for(pe=0;pe<32;pe++)$[32+pe]=Y[32+pe];for(Te(ae,$.subarray(32),G+32),Qe(ae),ke(De,ae),Le($,De),pe=32;pe<64;pe++)$[pe]=C[pe];for(Te(q,$,G+64),Qe(q),pe=0;pe<64;pe++)Re[pe]=0;for(pe=0;pe<32;pe++)Re[pe]=ae[pe];for(pe=0;pe<32;pe++)for(_e=0;_e<32;_e++)Re[pe+_e]+=q[pe]*Y[_e];return Se($.subarray(32),Re),it}function Be($,K){var G=r(),C=r(),Y=r(),q=r(),ae=r(),pe=r(),_e=r();return v($[2],a),I($[1],K),se(Y,$[1]),D(q,Y,l),ce(Y,Y,$[2]),F(q,$[2],q),se(ae,q),se(pe,ae),D(_e,pe,ae),D(G,_e,Y),D(G,G,q),J(G,G),D(G,G,Y),D(G,G,q),D(G,G,q),D($[0],G,q),se(C,$[0]),D(C,C,q),b(C,Y)&&D($[0],$[0],_),se(C,$[0]),D(C,C,q),b(C,Y)?-1:(P($[0])===K[31]>>7&&ce($[0],o,$[0]),D($[3],$[0],$[1]),0)}function et($,K,G,C){var Y,q=new Uint8Array(32),ae=new Uint8Array(64),pe=[r(),r(),r(),r()],_e=[r(),r(),r(),r()];if(G<64||Be(_e,C))return-1;for(Y=0;Y<G;Y++)$[Y]=K[Y];for(Y=0;Y<32;Y++)$[Y+32]=C[Y];if(Te(ae,$,G),Qe(ae),Ve(pe,_e,ae),ke(_e,K.subarray(32)),$e(pe,_e),Le(q,pe),G-=64,B(K,0,q,0)){for(Y=0;Y<G;Y++)$[Y]=0;return-1}for(Y=0;Y<G;Y++)$[Y]=K[Y+64];return G}var rt=32,Je=24,gt=32,ht=16,ft=32,Ht=32,Jt=32,St=32,er=32,Xt=Je,Ot=gt,Bt=ht,Tt=64,bt=32,Dt=64,Lt=32,yt=64;e.lowlevel={crypto_core_hsalsa20:z,crypto_stream_xor:me,crypto_stream:ie,crypto_stream_salsa20_xor:R,crypto_stream_salsa20:W,crypto_onetimeauth:E,crypto_onetimeauth_verify:m,crypto_verify_16:L,crypto_verify_32:B,crypto_secretbox:f,crypto_secretbox_open:g,crypto_scalarmult:Q,crypto_scalarmult_base:T,crypto_box_beforenm:re,crypto_box_afternm:ge,crypto_box:fe,crypto_box_open:be,crypto_box_keypair:X,crypto_hash:Te,crypto_sign:ct,crypto_sign_keypair:ze,crypto_sign_open:et,crypto_secretbox_KEYBYTES:rt,crypto_secretbox_NONCEBYTES:Je,crypto_secretbox_ZEROBYTES:gt,crypto_secretbox_BOXZEROBYTES:ht,crypto_scalarmult_BYTES:ft,crypto_scalarmult_SCALARBYTES:Ht,crypto_box_PUBLICKEYBYTES:Jt,crypto_box_SECRETKEYBYTES:St,crypto_box_BEFORENMBYTES:er,crypto_box_NONCEBYTES:Xt,crypto_box_ZEROBYTES:Ot,crypto_box_BOXZEROBYTES:Bt,crypto_sign_BYTES:Tt,crypto_sign_PUBLICKEYBYTES:bt,crypto_sign_SECRETKEYBYTES:Dt,crypto_sign_SEEDBYTES:Lt,crypto_hash_BYTES:yt,gf:r,D:l,L:He,pack25519:A,unpack25519:I,M:D,A:F,S:se,Z:ce,pow2523:J,add:$e,set25519:v,modL:Se,scalarmult:Ve,scalarbase:ke};function $t($,K){if($.length!==rt)throw new Error("bad key size");if(K.length!==Je)throw new Error("bad nonce size")}function jt($,K){if($.length!==Jt)throw new Error("bad public key size");if(K.length!==St)throw new Error("bad secret key size")}function nt(){for(var $=0;$<arguments.length;$++)if(!(arguments[$]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ft($){for(var K=0;K<$.length;K++)$[K]=0}e.randomBytes=function($){var K=new Uint8Array($);return n(K,$),K},e.secretbox=function($,K,G){nt($,K,G),$t(G,K);for(var C=new Uint8Array(gt+$.length),Y=new Uint8Array(C.length),q=0;q<$.length;q++)C[q+gt]=$[q];return f(Y,C,C.length,K,G),Y.subarray(ht)},e.secretbox.open=function($,K,G){nt($,K,G),$t(G,K);for(var C=new Uint8Array(ht+$.length),Y=new Uint8Array(C.length),q=0;q<$.length;q++)C[q+ht]=$[q];return C.length<32||g(Y,C,C.length,K,G)!==0?null:Y.subarray(gt)},e.secretbox.keyLength=rt,e.secretbox.nonceLength=Je,e.secretbox.overheadLength=ht,e.scalarMult=function($,K){if(nt($,K),$.length!==Ht)throw new Error("bad n size");if(K.length!==ft)throw new Error("bad p size");var G=new Uint8Array(ft);return Q(G,$,K),G},e.scalarMult.base=function($){if(nt($),$.length!==Ht)throw new Error("bad n size");var K=new Uint8Array(ft);return T(K,$),K},e.scalarMult.scalarLength=Ht,e.scalarMult.groupElementLength=ft,e.box=function($,K,G,C){var Y=e.box.before(G,C);return e.secretbox($,K,Y)},e.box.before=function($,K){nt($,K),jt($,K);var G=new Uint8Array(er);return re(G,$,K),G},e.box.after=e.secretbox,e.box.open=function($,K,G,C){var Y=e.box.before(G,C);return e.secretbox.open($,K,Y)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var $=new Uint8Array(Jt),K=new Uint8Array(St);return X($,K),{publicKey:$,secretKey:K}},e.box.keyPair.fromSecretKey=function($){if(nt($),$.length!==St)throw new Error("bad secret key size");var K=new Uint8Array(Jt);return T(K,$),{publicKey:K,secretKey:new Uint8Array($)}},e.box.publicKeyLength=Jt,e.box.secretKeyLength=St,e.box.sharedKeyLength=er,e.box.nonceLength=Xt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function($,K){if(nt($,K),K.length!==Dt)throw new Error("bad secret key size");var G=new Uint8Array(Tt+$.length);return ct(G,$,$.length,K),G},e.sign.open=function($,K){if(nt($,K),K.length!==bt)throw new Error("bad public key size");var G=new Uint8Array($.length),C=et(G,$,$.length,K);if(C<0)return null;for(var Y=new Uint8Array(C),q=0;q<Y.length;q++)Y[q]=G[q];return Y},e.sign.detached=function($,K){for(var G=e.sign($,K),C=new Uint8Array(Tt),Y=0;Y<C.length;Y++)C[Y]=G[Y];return C},e.sign.detached.verify=function($,K,G){if(nt($,K,G),K.length!==Tt)throw new Error("bad signature size");if(G.length!==bt)throw new Error("bad public key size");var C=new Uint8Array(Tt+$.length),Y=new Uint8Array(Tt+$.length),q;for(q=0;q<Tt;q++)C[q]=K[q];for(q=0;q<$.length;q++)C[q+Tt]=$[q];return et(Y,C,C.length,G)>=0},e.sign.keyPair=function(){var $=new Uint8Array(bt),K=new Uint8Array(Dt);return ze($,K),{publicKey:$,secretKey:K}},e.sign.keyPair.fromSecretKey=function($){if(nt($),$.length!==Dt)throw new Error("bad secret key size");for(var K=new Uint8Array(bt),G=0;G<K.length;G++)K[G]=$[32+G];return{publicKey:K,secretKey:new Uint8Array($)}},e.sign.keyPair.fromSeed=function($){if(nt($),$.length!==Lt)throw new Error("bad seed size");for(var K=new Uint8Array(bt),G=new Uint8Array(Dt),C=0;C<32;C++)G[C]=$[C];return ze(K,G,!0),{publicKey:K,secretKey:G}},e.sign.publicKeyLength=bt,e.sign.secretKeyLength=Dt,e.sign.seedLength=Lt,e.sign.signatureLength=Tt,e.hash=function($){nt($);var K=new Uint8Array(yt);return Te(K,$,$.length),K},e.hash.hashLength=yt,e.verify=function($,K){return nt($,K),$.length===0||K.length===0||$.length!==K.length?!1:O($,0,K,0,$.length)===0},e.setPRNG=function($){n=$},function(){var $=typeof self<"u"?self.crypto||self.msCrypto:null;if($&&$.getRandomValues){var K=65536;e.setPRNG(function(G,C){var Y,q=new Uint8Array(C);for(Y=0;Y<C;Y+=K)$.getRandomValues(q.subarray(Y,Y+Math.min(C-Y,K)));for(Y=0;Y<C;Y++)G[Y]=q[Y];Ft(q)})}else typeof Tx<"u"&&($=il,$&&$.randomBytes&&e.setPRNG(function(G,C){var Y,q=$.randomBytes(C);for(Y=0;Y<C;Y++)G[Y]=q[Y];Ft(q)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(a9);var fQ=a9.exports;const op=ji(fQ);var Ta;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",t[t.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Ta||(Ta={}));var c9;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(c9||(c9={}));var Ju;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Ju||(Ju={}));var u9;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(u9||(u9={}));var f9;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(f9||(f9={}));var l9;(function(t){t.MAINNET="-239",t.TESTNET="-3"})(l9||(l9={}));function lQ(t,e){const r=hh.encodeBase64(t);return e?encodeURIComponent(r):r}function hQ(t,e){return e&&(t=decodeURIComponent(t)),hh.decodeBase64(t)}function dQ(t,e=!1){let r;return t instanceof Uint8Array?r=t:(typeof t!="string"&&(t=JSON.stringify(t)),r=hh.decodeUTF8(t)),lQ(r,e)}function pQ(t,e=!1){const r=hQ(t,e);return{toString(){return hh.encodeUTF8(r)},toObject(){try{return JSON.parse(hh.encodeUTF8(r))}catch{return null}},toUint8Array(){return r}}}const h9={encode:dQ,decode:pQ};function gQ(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function mQ(t,e){if(e>=t.length)throw new Error("Index is out of buffer");const r=t.slice(0,e),n=t.slice(e);return[r,n]}function $b(t){let e="";return t.forEach(r=>{e+=("0"+(r&255).toString(16)).slice(-2)}),e}function ap(t){if(t.length%2!==0)throw new Error(`Cannot convert ${t} to bytesArray`);const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=parseInt(t.slice(r,r+2),16);return e}class Fb{constructor(e){this.nonceLength=24,this.keyPair=e?this.createKeypairFromString(e):this.createKeypair(),this.sessionId=$b(this.keyPair.publicKey)}createKeypair(){return op.box.keyPair()}createKeypairFromString(e){return{publicKey:ap(e.publicKey),secretKey:ap(e.secretKey)}}createNonce(){return op.randomBytes(this.nonceLength)}encrypt(e,r){const n=new TextEncoder().encode(e),i=this.createNonce(),s=op.box(n,i,r,this.keyPair.secretKey);return gQ(i,s)}decrypt(e,r){const[n,i]=mQ(e,this.nonceLength),s=op.box.open(i,n,r,this.keyPair.secretKey);if(!s)throw new Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${r.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(s)}stringifyKeypair(){return{publicKey:$b(this.keyPair.publicKey),secretKey:$b(this.keyPair.secretKey)}}}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function vQ(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Pt(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{l(n.next(d))}catch(p){o(p)}}function u(d){try{l(n.throw(d))}catch(p){o(p)}}function l(d){d.done?s(d.value):i(d.value).then(a,u)}l((n=n.apply(t,[])).next())})}class Ut extends Error{constructor(e,r){super(e,r),this.message=`${Ut.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${e?`
`+e:""}`,Object.setPrototypeOf(this,Ut.prototype)}get info(){return""}}Ut.prefix="[TON_CONNECT_SDK_ERROR]";class jb extends Ut{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,jb.prototype)}}class cp extends Ut{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,cp.prototype)}}class up extends Ut{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,up.prototype)}}class Ub extends Ut{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...e){super(...e),Object.setPrototypeOf(this,Ub.prototype)}}class fp extends Ut{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,fp.prototype)}}function bQ(t){return"jsBridgeKey"in t}class lp extends Ut{get info(){return"User rejects the action in the wallet."}constructor(...e){super(...e),Object.setPrototypeOf(this,lp.prototype)}}class hp extends Ut{get info(){return"Request to the wallet contains errors."}constructor(...e){super(...e),Object.setPrototypeOf(this,hp.prototype)}}class dp extends Ut{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,dp.prototype)}}class qb extends Ut{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...e){super(...e),Object.setPrototypeOf(this,qb.prototype)}}class zb extends Ut{get info(){return"An error occurred while fetching the wallets list."}constructor(...e){super(...e),Object.setPrototypeOf(this,zb.prototype)}}class Ra extends Ut{constructor(...e){super(...e),Object.setPrototypeOf(this,Ra.prototype)}}const d9={[Ta.UNKNOWN_ERROR]:Ra,[Ta.USER_REJECTS_ERROR]:lp,[Ta.BAD_REQUEST_ERROR]:hp,[Ta.UNKNOWN_APP_ERROR]:dp,[Ta.MANIFEST_NOT_FOUND_ERROR]:up,[Ta.MANIFEST_CONTENT_ERROR]:cp};class yQ{parseError(e){let r=Ra;return e.code in d9&&(r=d9[e.code]||Ra),new r(e.message)}}const wQ=new yQ;class xQ{isError(e){return"error"in e}}const p9={[Ju.UNKNOWN_ERROR]:Ra,[Ju.USER_REJECTS_ERROR]:lp,[Ju.BAD_REQUEST_ERROR]:hp,[Ju.UNKNOWN_APP_ERROR]:dp};class _Q extends xQ{convertToRpcRequest(e){return{method:"sendTransaction",params:[JSON.stringify(e)]}}parseAndThrowError(e){let r=Ra;throw e.error.code in p9&&(r=p9[e.error.code]||Ra),new r(e.error.message)}convertFromRpcResponse(e){return{boc:e.result}}}const pp=new _Q;class EQ{constructor(e,r){this.storage=e,this.storeKey="ton-connect-storage_http-bridge-gateway::"+r}storeLastEventId(e){return Pt(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,e)})}removeLastEventId(){return Pt(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return Pt(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);return e||null})}}function SQ(t){return t.slice(-1)==="/"?t.slice(0,-1):t}function g9(t,e){return SQ(t)+"/"+e}function AQ(t){if(!t)return!1;const e=new URL(t);return e.protocol==="tg:"||e.hostname==="t.me"}function PQ(t){return t.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--")}function m9(t,e){return Pt(this,void 0,void 0,function*(){return new Promise((r,n)=>{var i,s;if(!((i=void 0)===null||i===void 0)&&i.aborted){n(new Ut("Delay aborted"));return}const o=setTimeout(()=>r(),t);(s=void 0)===null||s===void 0||s.addEventListener("abort",()=>{clearTimeout(o),n(new Ut("Delay aborted"))})})})}function Is(t){const e=new AbortController;return t!=null&&t.aborted?e.abort():t==null||t.addEventListener("abort",()=>e.abort(),{once:!0}),e}function dh(t,e){var r,n;return Pt(this,void 0,void 0,function*(){const i=(r=e==null?void 0:e.attempts)!==null&&r!==void 0?r:10,s=(n=e==null?void 0:e.delayMs)!==null&&n!==void 0?n:200,o=Is(e==null?void 0:e.signal);if(typeof t!="function")throw new Ut(`Expected a function, got ${typeof t}`);let a=0,u;for(;a<i;){if(o.signal.aborted)throw new Ut(`Aborted after attempts ${a}`);try{return yield t({signal:o.signal})}catch(l){u=l,a++,a<i&&(yield m9(s))}}throw u})}function En(...t){try{console.debug("[TON_CONNECT_SDK]",...t)}catch{}}function Fo(...t){try{console.error("[TON_CONNECT_SDK]",...t)}catch{}}function MQ(...t){try{console.warn("[TON_CONNECT_SDK]",...t)}catch{}}function IQ(t,e){let r=null,n=null,i=null,s=null,o=null;const a=(p,...y)=>Pt(this,void 0,void 0,function*(){if(s=p??null,o==null||o.abort(),o=Is(p),o.signal.aborted)throw new Ut("Resource creation was aborted");n=y??null;const _=t(o.signal,...y);i=_;const M=yield _;if(i!==_&&M!==r)throw yield e(M),new Ut("Resource creation was aborted by a new resource creation");return r=M,r});return{create:a,current:()=>r??null,dispose:()=>Pt(this,void 0,void 0,function*(){try{const p=r;r=null;const y=i;i=null;try{o==null||o.abort()}catch{}yield Promise.allSettled([p?e(p):Promise.resolve(),y?e(yield y):Promise.resolve()])}catch{}}),recreate:p=>Pt(this,void 0,void 0,function*(){const y=r,_=i,M=n,O=s;if(yield m9(p),y===r&&_===i&&M===n&&O===s)return yield a(s,...M??[]);throw new Ut("Resource recreation was aborted by a new resource creation")})}}function CQ(t,e){const r=e==null?void 0:e.timeout,n=e==null?void 0:e.signal,i=Is(n);return new Promise((s,o)=>Pt(this,void 0,void 0,function*(){if(i.signal.aborted){o(new Ut("Operation aborted"));return}let a;typeof r<"u"&&(a=setTimeout(()=>{i.abort(),o(new Ut(`Timeout after ${r}ms`))},r)),i.signal.addEventListener("abort",()=>{clearTimeout(a),o(new Ut("Operation aborted"))},{once:!0});const u={timeout:r,abort:i.signal};yield t((...l)=>{clearTimeout(a),s(...l)},()=>{clearTimeout(a),o()},u)}))}class Hb{constructor(e,r,n,i,s){this.bridgeUrl=r,this.sessionId=n,this.listener=i,this.errorsListener=s,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=2e3,this.defaultResendDelay=5e3,this.eventSource=IQ((o,a)=>Pt(this,void 0,void 0,function*(){const u={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:o,openingDeadlineMS:a};return yield TQ(u)}),o=>Pt(this,void 0,void 0,function*(){o.close()})),this.bridgeGatewayStorage=new EQ(e,r)}get isReady(){const e=this.eventSource.current();return(e==null?void 0:e.readyState)===EventSource.OPEN}get isClosed(){const e=this.eventSource.current();return(e==null?void 0:e.readyState)!==EventSource.OPEN}get isConnecting(){const e=this.eventSource.current();return(e==null?void 0:e.readyState)===EventSource.CONNECTING}registerSession(e){return Pt(this,void 0,void 0,function*(){yield this.eventSource.create(e==null?void 0:e.signal,e==null?void 0:e.openingDeadlineMS)})}send(e,r,n,i){var s;return Pt(this,void 0,void 0,function*(){const o={};typeof i=="number"?o.ttl=i:(o.ttl=i==null?void 0:i.ttl,o.signal=i==null?void 0:i.signal,o.attempts=i==null?void 0:i.attempts);const a=new URL(g9(this.bridgeUrl,this.postPath));a.searchParams.append("client_id",this.sessionId),a.searchParams.append("to",r),a.searchParams.append("ttl",((o==null?void 0:o.ttl)||this.defaultTtl).toString()),a.searchParams.append("topic",n);const u=h9.encode(e);yield dh(l=>Pt(this,void 0,void 0,function*(){const d=yield this.post(a,u,l.signal);if(!d.ok)throw new Ut(`Bridge send failed, status ${d.status}`)}),{attempts:(s=o==null?void 0:o.attempts)!==null&&s!==void 0?s:Number.MAX_SAFE_INTEGER,delayMs:this.defaultResendDelay,signal:o==null?void 0:o.signal})})}pause(){this.eventSource.dispose().catch(e=>Fo(`Bridge pause failed, ${e}`))}unPause(){return Pt(this,void 0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return Pt(this,void 0,void 0,function*(){yield this.eventSource.dispose().catch(e=>Fo(`Bridge close failed, ${e}`))})}setListener(e){this.listener=e}setErrorsListener(e){this.errorsListener=e}post(e,r,n){return Pt(this,void 0,void 0,function*(){const i=yield fetch(e,{method:"post",body:r,signal:n});if(!i.ok)throw new Ut(`Bridge send failed, status ${i.status}`);return i})}errorsHandler(e,r){return Pt(this,void 0,void 0,function*(){if(this.isConnecting)throw e.close(),new Ut("Bridge error, failed to connect");if(this.isReady){try{this.errorsListener(r)}catch{}return}if(this.isClosed)return e.close(),En(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new Ut("Bridge error, unknown state")})}messagesHandler(e){return Pt(this,void 0,void 0,function*(){if(e.data===this.heartbeatMessage||(yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId),this.isClosed))return;let r;try{r=JSON.parse(e.data)}catch(n){throw new Ut(`Bridge message parse failed, message ${n.data}`)}this.listener(r)})}}function TQ(t){return Pt(this,void 0,void 0,function*(){return yield CQ((e,r,n)=>Pt(this,void 0,void 0,function*(){var i;const o=Is(n.signal).signal;if(o.aborted){r(new Ut("Bridge connection aborted"));return}const a=new URL(g9(t.bridgeUrl,t.ssePath));a.searchParams.append("client_id",t.sessionId);const u=yield t.bridgeGatewayStorage.getLastEventId();if(u&&a.searchParams.append("last_event_id",u),o.aborted){r(new Ut("Bridge connection aborted"));return}const l=new EventSource(a.toString());l.onerror=d=>Pt(this,void 0,void 0,function*(){if(o.aborted){l.close(),r(new Ut("Bridge connection aborted"));return}try{const p=yield t.errorHandler(l,d);p!==l&&l.close(),p&&p!==l&&e(p)}catch(p){l.close(),r(p)}}),l.onopen=()=>{if(o.aborted){l.close(),r(new Ut("Bridge connection aborted"));return}e(l)},l.onmessage=d=>{if(o.aborted){l.close(),r(new Ut("Bridge connection aborted"));return}t.messageHandler(d)},(i=t.signal)===null||i===void 0||i.addEventListener("abort",()=>{l.close(),r(new Ut("Bridge connection aborted"))})}),{timeout:t.openingDeadlineMS,signal:t.signal})})}function ph(t){return!("connectEvent"in t)}class gh{constructor(e){this.storage=e,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(e){return Pt(this,void 0,void 0,function*(){if(e.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(e));if(!ph(e)){const n={sessionKeyPair:e.session.sessionCrypto.stringifyKeypair(),walletPublicKey:e.session.walletPublicKey,bridgeUrl:e.session.bridgeUrl},i={type:"http",connectEvent:e.connectEvent,session:n,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(i))}const r={type:"http",connectionSource:e.connectionSource,sessionCrypto:e.sessionCrypto.stringifyKeypair()};return this.storage.setItem(this.storeKey,JSON.stringify(r))})}removeConnection(){return Pt(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);if(!e)return null;const r=JSON.parse(e);if(r.type==="injected")return r;if("connectEvent"in r){const n=new Fb(r.session.sessionKeyPair);return{type:"http",connectEvent:r.connectEvent,lastWalletEventId:r.lastWalletEventId,nextRpcRequestId:r.nextRpcRequestId,session:{sessionCrypto:n,bridgeUrl:r.session.bridgeUrl,walletPublicKey:r.session.walletPublicKey}}}return{type:"http",sessionCrypto:new Fb(r.sessionCrypto),connectionSource:r.connectionSource}})}getHttpConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new Ut("Trying to read HTTP connection source while nothing is stored");if(e.type==="injected")throw new Ut("Trying to read HTTP connection source while injected connection is stored");return e})}getHttpPendingConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new Ut("Trying to read HTTP connection source while nothing is stored");if(e.type==="injected")throw new Ut("Trying to read HTTP connection source while injected connection is stored");if(!ph(e))throw new Ut("Trying to read HTTP-pending connection while http connection is stored");return e})}getInjectedConnection(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new Ut("Trying to read Injected bridge connection source while nothing is stored");if((e==null?void 0:e.type)==="http")throw new Ut("Trying to read Injected bridge connection source while HTTP connection is stored");return e})}storedConnectionType(){return Pt(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);return e?JSON.parse(e).type:null})}storeLastWalletEventId(e){return Pt(this,void 0,void 0,function*(){const r=yield this.getConnection();if(r&&r.type==="http"&&!ph(r))return r.lastWalletEventId=e,this.storeConnection(r)})}getLastWalletEventId(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId})}increaseNextRpcRequestId(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();if(e&&"nextRpcRequestId"in e){const r=e.nextRpcRequestId||0;return e.nextRpcRequestId=r+1,this.storeConnection(e)}})}getNextRpcRequestId(){return Pt(this,void 0,void 0,function*(){const e=yield this.getConnection();return e&&"nextRpcRequestId"in e&&e.nextRpcRequestId||0})}}const v9=2;class mh{constructor(e,r){this.storage=e,this.walletConnectionSource=r,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=12e3,this.defaultRetryTimeoutMS=2e3,this.connectionStorage=new gh(e)}static fromStorage(e){return Pt(this,void 0,void 0,function*(){const n=yield new gh(e).getHttpConnection();return ph(n)?new mh(e,n.connectionSource):new mh(e,{bridgeUrl:n.session.bridgeUrl})})}connect(e,r){var n;const i=Is(r==null?void 0:r.signal);(n=this.abortController)===null||n===void 0||n.abort(),this.abortController=i,this.closeGateways();const s=new Fb;this.session={sessionCrypto:s,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:s}).then(()=>Pt(this,void 0,void 0,function*(){i.signal.aborted||(yield dh(a=>{var u;return this.openGateways(s,{openingDeadlineMS:(u=r==null?void 0:r.openingDeadlineMS)!==null&&u!==void 0?u:this.defaultOpeningDeadlineMS,signal:a==null?void 0:a.signal})},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:i.signal}))}));const o="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(o,e)}restoreConnection(e){var r,n;return Pt(this,void 0,void 0,function*(){const i=Is(e==null?void 0:e.signal);if((r=this.abortController)===null||r===void 0||r.abort(),this.abortController=i,i.signal.aborted)return;this.closeGateways();const s=yield this.connectionStorage.getHttpConnection();if(!s||i.signal.aborted)return;const o=(n=e==null?void 0:e.openingDeadlineMS)!==null&&n!==void 0?n:this.defaultOpeningDeadlineMS;if(ph(s))return this.session={sessionCrypto:s.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(s.sessionCrypto,{openingDeadlineMS:o,signal:i==null?void 0:i.signal});if(Array.isArray(this.walletConnectionSource))throw new Ut("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=s.session,this.gateway&&(En("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Hb(this.storage,this.walletConnectionSource.bridgeUrl,s.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),!i.signal.aborted){this.listeners.forEach(a=>a(s.connectEvent));try{yield dh(a=>this.gateway.registerSession({openingDeadlineMS:o,signal:a.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:i.signal})}catch{yield this.disconnect({signal:i.signal});return}}})}sendRequest(e,r){const n={};return typeof r=="function"?n.onRequestSent=r:(n.onRequestSent=r==null?void 0:r.onRequestSent,n.signal=r==null?void 0:r.signal,n.attempts=r==null?void 0:r.attempts),new Promise((i,s)=>Pt(this,void 0,void 0,function*(){var o;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new Ut("Trying to send bridge request without session");const a=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),En("Send http-bridge request:",Object.assign(Object.assign({},e),{id:a}));const u=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{id:a})),ap(this.session.walletPublicKey));try{yield this.gateway.send(u,this.session.walletPublicKey,e.method,{attempts:n==null?void 0:n.attempts,signal:n==null?void 0:n.signal}),(o=n==null?void 0:n.onRequestSent)===null||o===void 0||o.call(n),this.pendingRequests.set(a.toString(),i)}catch(l){s(l)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(e){return Pt(this,void 0,void 0,function*(){return new Promise(r=>Pt(this,void 0,void 0,function*(){let n=!1,i=null;const s=()=>{n||(n=!0,this.removeBridgeAndSession().then(r))};try{this.closeGateways();const o=Is(e==null?void 0:e.signal);i=setTimeout(()=>{o.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:s,signal:o.signal,attempts:1})}catch(o){En("Disconnect error:",o),n||this.removeBridgeAndSession().then(r)}finally{i&&clearTimeout(i),s()}}))})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(r=>r!==e)}pause(){var e;(e=this.gateway)===null||e===void 0||e.pause(),this.pendingGateways.forEach(r=>r.pause())}unPause(){return Pt(this,void 0,void 0,function*(){const e=this.pendingGateways.map(r=>r.unPause());this.gateway&&e.push(this.gateway.unPause()),yield Promise.all(e)})}pendingGatewaysListener(e,r,n){return Pt(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(e)){yield e.close();return}return this.closeGateways({except:e}),this.gateway&&(En("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=r,this.gateway=e,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(n)})}gatewayListener(e){return Pt(this,void 0,void 0,function*(){const r=JSON.parse(this.session.sessionCrypto.decrypt(h9.decode(e.message).toUint8Array(),ap(e.from)));if(En("Wallet message received:",r),!("event"in r)){const i=r.id.toString(),s=this.pendingRequests.get(i);if(!s){En(`Response id ${i} doesn't match any request's id`);return}s(r),this.pendingRequests.delete(i);return}if(r.id!==void 0){const i=yield this.connectionStorage.getLastWalletEventId();if(i!==void 0&&r.id<=i){Fo(`Received event id (=${r.id}) must be greater than stored last wallet event id (=${i}) `);return}r.event!=="connect"&&(yield this.connectionStorage.storeLastWalletEventId(r.id))}const n=this.listeners;r.event==="connect"&&(yield this.updateSession(r,e.from)),r.event==="disconnect"&&(En("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),n.forEach(i=>i(r))})}gatewayErrorsListener(e){return Pt(this,void 0,void 0,function*(){throw new Ut(`Bridge error ${JSON.stringify(e)}`)})}updateSession(e,r){return Pt(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:r});const n=e.payload.items.find(s=>s.name==="ton_addr"),i=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{items:[n]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:e.id,connectEvent:i,nextRpcRequestId:0})})}removeBridgeAndSession(){return Pt(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(e,r){return AQ(e)?this.generateTGUniversalLink(e,r):this.generateRegularUniversalLink(e,r)}generateRegularUniversalLink(e,r){const n=new URL(e);return n.searchParams.append("v",v9.toString()),n.searchParams.append("id",this.session.sessionCrypto.sessionId),n.searchParams.append("r",JSON.stringify(r)),n.toString()}generateTGUniversalLink(e,r){const i=this.generateRegularUniversalLink("about:blank",r).split("?")[1],s="tonconnect-"+PQ(i),o=this.convertToDirectLink(e),a=new URL(o);return a.searchParams.append("startapp",s),a.toString()}convertToDirectLink(e){const r=new URL(e);return r.searchParams.has("attach")&&(r.searchParams.delete("attach"),r.pathname+="/start"),r.toString()}openGateways(e,r){return Pt(this,void 0,void 0,function*(){if(Array.isArray(this.walletConnectionSource)){this.pendingGateways.map(n=>n.close().catch()),this.pendingGateways=this.walletConnectionSource.map(n=>{const i=new Hb(this.storage,n.bridgeUrl,e.sessionId,()=>{},()=>{});return i.setListener(s=>this.pendingGatewaysListener(i,n.bridgeUrl,s)),i}),yield Promise.allSettled(this.pendingGateways.map(n=>dh(i=>{var s;return this.pendingGateways.some(o=>o===n)?n.registerSession({openingDeadlineMS:(s=r==null?void 0:r.openingDeadlineMS)!==null&&s!==void 0?s:this.defaultOpeningDeadlineMS,signal:i.signal}):n.close()},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:r==null?void 0:r.signal})));return}else return this.gateway&&(En("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Hb(this.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession({openingDeadlineMS:r==null?void 0:r.openingDeadlineMS,signal:r==null?void 0:r.signal})})}closeGateways(e){var r;(r=this.gateway)===null||r===void 0||r.close(),this.pendingGateways.filter(n=>n!==(e==null?void 0:e.except)).forEach(n=>n.close()),this.pendingGateways=[]}}function b9(t,e){return y9(t,[e])}function y9(t,e){return!t||typeof t!="object"?!1:e.every(r=>r in t)}function RQ(t){try{return!b9(t,"tonconnect")||!b9(t.tonconnect,"walletInfo")?!1:y9(t.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch{return!1}}class Xu{constructor(){this.storage={}}static getInstance(){return Xu.instance||(Xu.instance=new Xu),Xu.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var r;return(r=this.storage[e])!==null&&r!==void 0?r:null}key(e){var r;const n=Object.keys(this.storage);return e<0||e>=n.length?null:(r=n[e])!==null&&r!==void 0?r:null}removeItem(e){delete this.storage[e]}setItem(e,r){this.storage[e]=r}}function gp(){if(!(typeof window>"u"))return window}function DQ(){const t=gp();if(!t)return[];try{return Object.keys(t)}catch{return[]}}function OQ(){if(!(typeof document>"u"))return document}function NQ(){var t;const e=(t=gp())===null||t===void 0?void 0:t.location.origin;return e?e+"/tonconnect-manifest.json":""}function LQ(){if(kQ())return localStorage;if(BQ())throw new Ut("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return Xu.getInstance()}function kQ(){try{return typeof localStorage<"u"}catch{return!1}}function BQ(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}class wi{constructor(e,r){this.injectedWalletKey=r,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const n=wi.window;if(!wi.isWindowContainsWallet(n,r))throw new qb;this.connectionStorage=new gh(e),this.injectedWallet=n[r].tonconnect}static fromStorage(e){return Pt(this,void 0,void 0,function*(){const n=yield new gh(e).getInjectedConnection();return new wi(e,n.jsBridgeKey)})}static isWalletInjected(e){return wi.isWindowContainsWallet(this.window,e)}static isInsideWalletBrowser(e){return wi.isWindowContainsWallet(this.window,e)?this.window[e].tonconnect.isWalletBrowser:!1}static getCurrentlyInjectedWallets(){return this.window?DQ().filter(([n,i])=>RQ(i)).map(([n,i])=>({name:i.tonconnect.walletInfo.name,appName:i.tonconnect.walletInfo.app_name,aboutUrl:i.tonconnect.walletInfo.about_url,imageUrl:i.tonconnect.walletInfo.image,tondns:i.tonconnect.walletInfo.tondns,jsBridgeKey:n,injected:!0,embedded:i.tonconnect.isWalletBrowser,platforms:i.tonconnect.walletInfo.platforms})):[]}static isWindowContainsWallet(e,r){return!!e&&r in e&&typeof e[r]=="object"&&"tonconnect"in e[r]}connect(e){this._connect(v9,e)}restoreConnection(){return Pt(this,void 0,void 0,function*(){try{En("Injected Provider restoring connection...");const e=yield this.injectedWallet.restoreConnection();En("Injected Provider restoring connection response",e),e.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(r=>r(e))):yield this.connectionStorage.removeConnection()}catch(e){yield this.connectionStorage.removeConnection(),console.error(e)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return Pt(this,void 0,void 0,function*(){return new Promise(e=>{const r=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(e)};try{this.injectedWallet.disconnect(),r()}catch(n){En(n),this.sendRequest({method:"disconnect",params:[]},r)}})})}closeAllListeners(){var e;this.listenSubscriptions=!1,this.listeners=[],(e=this.unsubscribeCallback)===null||e===void 0||e.call(this)}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(r=>r!==e)}sendRequest(e,r){var n;return Pt(this,void 0,void 0,function*(){const i={};typeof r=="function"?i.onRequestSent=r:(i.onRequestSent=r==null?void 0:r.onRequestSent,i.signal=r==null?void 0:r.signal);const s=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),En("Send injected-bridge request:",Object.assign(Object.assign({},e),{id:s}));const o=this.injectedWallet.send(Object.assign(Object.assign({},e),{id:s}));return o.then(a=>En("Wallet message received:",a)),(n=i==null?void 0:i.onRequestSent)===null||n===void 0||n.call(i),o})}_connect(e,r){return Pt(this,void 0,void 0,function*(){try{En(`Injected Provider connect request: protocolVersion: ${e}, message:`,r);const n=yield this.injectedWallet.connect(e,r);En("Injected Provider connect response:",n),n.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(i=>i(n))}catch(n){En("Injected Provider connect error:",n);const i={event:"connect_error",payload:{code:0,message:n==null?void 0:n.toString()}};this.listeners.forEach(s=>s(i))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(e=>{En("Wallet message received:",e),this.listenSubscriptions&&this.listeners.forEach(r=>r(e)),e.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}wi.window=gp();class $Q{constructor(){this.localStorage=LQ()}getItem(e){return Pt(this,void 0,void 0,function*(){return this.localStorage.getItem(e)})}removeItem(e){return Pt(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}setItem(e,r){return Pt(this,void 0,void 0,function*(){this.localStorage.setItem(e,r)})}}function w9(t){return jQ(t)&&t.injected}function FQ(t){return w9(t)&&t.embedded}function jQ(t){return"jsBridgeKey"in t}const UQ=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.ton.space/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://static.mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"]},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"]},{app_name:"dewallet",name:"DeWallet",image:"https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",about_url:"https://delabwallet.com",universal_url:"https://t.me/dewallet?attach=wallet",bridge:[{type:"sse",url:"https://sse-bridge.delab.team/bridge"}],platforms:["ios","android"]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"]},{app_name:"bitgetTonWallet",name:"Bitget Wallet",image:"https://raw.githubusercontent.com/bitkeepwallet/download/main/logo/png/bitget_wallet_logo_0_gas_fee.png",about_url:"https://web3.bitget.com",deepLink:"bitkeep://",bridge:[{type:"js",key:"bitgetTonWallet"},{type:"sse",url:"https://bridge.tonapi.io/bridge"}],platforms:["ios","android","chrome"],universal_url:"https://bkcode.vip/ton-connect"},{app_name:"safepalwallet",name:"SafePal",image:"https://s.pvcliping.com/web/public_image/SafePal_x288.png",tondns:"",about_url:"https://www.safepal.com",universal_url:"https://link.safepal.io/ton-connect",deepLink:"safepal-tc://",bridge:[{type:"sse",url:"https://ton-bridge.safepal.com/tonbridge/v1/bridge"},{type:"js",key:"safepalwallet"}],platforms:["ios","android","chrome","firefox"]},{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]},{app_name:"okxTonWalletTr",name:"OKX TR Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/587A8296F0BB640F.png",about_url:"https://tr.okx.com/web3",universal_url:"https://tr.okx.com/download?appendQuery=true&deeplink=okxtr://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]}];class Wb{constructor(e){this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource="https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json",e!=null&&e.walletsListSource&&(this.walletsListSource=e.walletsListSource),e!=null&&e.cacheTTLMs&&(this.cacheTTLMs=e.cacheTTLMs)}getWallets(){return Pt(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return Pt(this,void 0,void 0,function*(){const r=(yield this.getWallets()).filter(FQ);return r.length!==1?null:r[0]})}fetchWalletsList(){return Pt(this,void 0,void 0,function*(){let e=[];try{if(e=yield(yield fetch(this.walletsListSource)).json(),!Array.isArray(e))throw new zb("Wrong wallets list format, wallets list must be an array.");const i=e.filter(s=>!this.isCorrectWalletConfigDTO(s));i.length&&(Fo(`Wallet(s) ${i.map(s=>s.name).join(", ")} config format is wrong. They were removed from the wallets list.`),e=e.filter(s=>this.isCorrectWalletConfigDTO(s)))}catch(n){Fo(n),e=UQ}let r=[];try{r=wi.getCurrentlyInjectedWallets()}catch(n){Fo(n)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(e),r)})}walletConfigDTOListToWalletConfigList(e){return e.map(r=>{const i={name:r.name,appName:r.app_name,imageUrl:r.image,aboutUrl:r.about_url,tondns:r.tondns,platforms:r.platforms};return r.bridge.forEach(s=>{if(s.type==="sse"&&(i.bridgeUrl=s.url,i.universalLink=r.universal_url,i.deepLink=r.deepLink),s.type==="js"){const o=s.key;i.jsBridgeKey=o,i.injected=wi.isWalletInjected(o),i.embedded=wi.isInsideWalletBrowser(o)}}),i})}mergeWalletsLists(e,r){return[...new Set(e.concat(r).map(i=>i.name)).values()].map(i=>{const s=e.find(a=>a.name===i),o=r.find(a=>a.name===i);return Object.assign(Object.assign({},s&&Object.assign({},s)),o&&Object.assign({},o))})}isCorrectWalletConfigDTO(e){if(!e||typeof e!="object")return!1;const r="name"in e,n="app_name"in e,i="image"in e,s="about_url"in e,o="platforms"in e;if(!r||!i||!s||!o||!n||!e.platforms||!Array.isArray(e.platforms)||!e.platforms.length||!("bridge"in e)||!Array.isArray(e.bridge)||!e.bridge.length)return!1;const a=e.bridge;if(a.some(d=>!d||typeof d!="object"||!("type"in d)))return!1;const u=a.find(d=>d.type==="sse");if(u&&(!("url"in u)||!u.url||!e.universal_url))return!1;const l=a.find(d=>d.type==="js");return!(l&&(!("key"in l)||!l.key))}}class mp extends Ut{get info(){return"Wallet doesn't support requested feature method."}constructor(...e){super(...e),Object.setPrototypeOf(this,mp.prototype)}}function qQ(t,e){const r=t.includes("SendTransaction"),n=t.find(i=>i&&typeof i=="object"&&i.name==="SendTransaction");if(!r&&!n)throw new mp("Wallet doesn't support SendTransaction feature.");if(n&&n.maxMessages!==void 0){if(n.maxMessages<e.requiredMessagesNumber)throw new mp(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${n.maxMessages}, but ${e.requiredMessagesNumber} is required.`);return}MQ("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}function zQ(){return{type:"request-version"}}function HQ(t){return{type:"response-version",version:t}}function Zu(t){return{ton_connect_sdk_lib:t.ton_connect_sdk_lib,ton_connect_ui_lib:t.ton_connect_ui_lib}}function Qu(t,e){var r,n,i,s,o,a,u,l;const p=((r=e==null?void 0:e.connectItems)===null||r===void 0?void 0:r.tonProof)&&"proof"in e.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:(i=(n=e==null?void 0:e.account)===null||n===void 0?void 0:n.address)!==null&&i!==void 0?i:null,wallet_type:(s=e==null?void 0:e.device.appName)!==null&&s!==void 0?s:null,wallet_version:(o=e==null?void 0:e.device.appVersion)!==null&&o!==void 0?o:null,auth_type:p,custom_data:Object.assign({chain_id:(u=(a=e==null?void 0:e.account)===null||a===void 0?void 0:a.chain)!==null&&u!==void 0?u:null,provider:(l=e==null?void 0:e.provider)!==null&&l!==void 0?l:null},Zu(t))}}function WQ(t){return{type:"connection-started",custom_data:Zu(t)}}function KQ(t,e){return Object.assign({type:"connection-completed",is_success:!0},Qu(t,e))}function VQ(t,e,r){return{type:"connection-error",is_success:!1,error_message:e,error_code:r??null,custom_data:Zu(t)}}function GQ(t){return{type:"connection-restoring-started",custom_data:Zu(t)}}function YQ(t,e){return Object.assign({type:"connection-restoring-completed",is_success:!0},Qu(t,e))}function JQ(t,e){return{type:"connection-restoring-error",is_success:!1,error_message:e,custom_data:Zu(t)}}function Kb(t,e){var r,n,i,s;return{valid_until:(r=String(e.validUntil))!==null&&r!==void 0?r:null,from:(s=(n=e.from)!==null&&n!==void 0?n:(i=t==null?void 0:t.account)===null||i===void 0?void 0:i.address)!==null&&s!==void 0?s:null,messages:e.messages.map(o=>{var a,u;return{address:(a=o.address)!==null&&a!==void 0?a:null,amount:(u=o.amount)!==null&&u!==void 0?u:null}})}}function XQ(t,e,r){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},Qu(t,e)),Kb(e,r))}function ZQ(t,e,r,n){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:n.boc},Qu(t,e)),Kb(e,r))}function QQ(t,e,r,n,i){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:n,error_code:i??null},Qu(t,e)),Kb(e,r))}function eee(t,e,r){return Object.assign({type:"disconnection",scope:r},Qu(t,e))}class tee{constructor(){this.window=gp()}dispatchEvent(e,r){var n;return Pt(this,void 0,void 0,function*(){const i=new CustomEvent(e,{detail:r});(n=this.window)===null||n===void 0||n.dispatchEvent(i)})}addEventListener(e,r,n){var i;return Pt(this,void 0,void 0,function*(){return(i=this.window)===null||i===void 0||i.addEventListener(e,r,n),()=>{var s;return(s=this.window)===null||s===void 0?void 0:s.removeEventListener(e,r)}})}}class ree{constructor(e){var r;this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=(r=e==null?void 0:e.eventDispatcher)!==null&&r!==void 0?r:new tee,this.tonConnectSdkVersion=e.tonConnectSdkVersion,this.init().catch()}get version(){return Zu({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return Pt(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch{}})}setRequestVersionHandler(){return Pt(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>Pt(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",HQ(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return Pt(this,void 0,void 0,function*(){return new Promise((e,r)=>Pt(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",n=>{e(n.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",zQ())}catch(n){r(n)}}))})}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch{}}trackConnectionStarted(...e){try{const r=WQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionCompleted(...e){try{const r=KQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionError(...e){try{const r=VQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringStarted(...e){try{const r=GQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringCompleted(...e){try{const r=YQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringError(...e){try{const r=JQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackDisconnection(...e){try{const r=eee(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSentForSignature(...e){try{const r=XQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSigned(...e){try{const r=ZQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSigningFailed(...e){try{const r=QQ(this.version,...e);this.dispatchUserActionEvent(r)}catch{}}}const nee="3.0.5";class vh{constructor(e){if(this.walletsList=new Wb,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(e==null?void 0:e.manifestUrl)||NQ(),storage:(e==null?void 0:e.storage)||new $Q},this.walletsList=new Wb({walletsListSource:e==null?void 0:e.walletsListSource,cacheTTLMs:e==null?void 0:e.walletsListCacheTTLMs}),this.tracker=new ree({eventDispatcher:e==null?void 0:e.eventDispatcher,tonConnectSdkVersion:nee}),!this.dappSettings.manifestUrl)throw new jb("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new gh(this.dappSettings.storage),e!=null&&e.disableAutoPauseConnection||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var e;return((e=this._wallet)===null||e===void 0?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(r=>r(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(e,r){return this.statusChangeSubscriptions.push(e),r&&this.statusChangeErrorSubscriptions.push(r),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(n=>n!==e),r&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(n=>n!==r))}}connect(e,r){var n,i;const s={};if(typeof r=="object"&&"tonProof"in r&&(s.request=r),typeof r=="object"&&("openingDeadlineMS"in r||"signal"in r||"request"in r)&&(s.request=r==null?void 0:r.request,s.openingDeadlineMS=r==null?void 0:r.openingDeadlineMS,s.signal=r==null?void 0:r.signal),this.connected)throw new Ub;const o=Is(s==null?void 0:s.signal);if((n=this.abortController)===null||n===void 0||n.abort(),this.abortController=o,o.signal.aborted)throw new Ut("Connection was aborted");return(i=this.provider)===null||i===void 0||i.closeConnection(),this.provider=this.createProvider(e),o.signal.addEventListener("abort",()=>{var a;(a=this.provider)===null||a===void 0||a.closeConnection(),this.provider=null}),this.tracker.trackConnectionStarted(),this.provider.connect(this.createConnectRequest(s==null?void 0:s.request),{openingDeadlineMS:s==null?void 0:s.openingDeadlineMS,signal:o.signal})}restoreConnection(e){var r,n;return Pt(this,void 0,void 0,function*(){this.tracker.trackConnectionRestoringStarted();const i=Is(e==null?void 0:e.signal);if((r=this.abortController)===null||r===void 0||r.abort(),this.abortController=i,i.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}const[s,o]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(i.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let a=null;try{switch(s){case"http":a=yield mh.fromStorage(this.dappSettings.storage);break;case"injected":a=yield wi.fromStorage(this.dappSettings.storage);break;default:if(o)a=this.createProvider(o);else return}}catch{this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),a==null||a.closeConnection(),a=null;return}if(i.signal.aborted){a==null||a.closeConnection(),this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}if(!a){Fo("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}(n=this.provider)===null||n===void 0||n.closeConnection(),this.provider=a,a.listen(this.walletEventsListener.bind(this));const u=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted"),a==null||a.closeConnection(),a=null};i.signal.addEventListener("abort",u);const l=dh(p=>Pt(this,void 0,void 0,function*(){yield a==null?void 0:a.restoreConnection({openingDeadlineMS:e==null?void 0:e.openingDeadlineMS,signal:p.signal}),i.signal.removeEventListener("abort",u),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:2e3,signal:e==null?void 0:e.signal}),d=new Promise(p=>setTimeout(()=>p(),12e3));return Promise.race([l,d])})}sendTransaction(e,r){return Pt(this,void 0,void 0,function*(){const n={};typeof r=="function"?n.onRequestSent=r:(n.onRequestSent=r==null?void 0:r.onRequestSent,n.signal=r==null?void 0:r.signal);const i=Is(n==null?void 0:n.signal);if(i.signal.aborted)throw new Ut("Transaction sending was aborted");this.checkConnection(),qQ(this.wallet.device.features,{requiredMessagesNumber:e.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,e);const{validUntil:s}=e,o=vQ(e,["validUntil"]),a=e.from||this.account.address,u=e.network||this.account.chain,l=yield this.provider.sendRequest(pp.convertToRpcRequest(Object.assign(Object.assign({},o),{valid_until:s,from:a,network:u})),{onRequestSent:n.onRequestSent,signal:i.signal});if(pp.isError(l))return this.tracker.trackTransactionSigningFailed(this.wallet,e,l.error.message,l.error.code),pp.parseAndThrowError(l);const d=pp.convertFromRpcResponse(l);return this.tracker.trackTransactionSigned(this.wallet,e,d),d})}disconnect(e){var r;return Pt(this,void 0,void 0,function*(){if(!this.connected)throw new fp;const n=Is(e==null?void 0:e.signal),i=this.abortController;if(this.abortController=n,n.signal.aborted)throw new Ut("Disconnect was aborted");this.onWalletDisconnected("dapp"),yield(r=this.provider)===null||r===void 0?void 0:r.disconnect({signal:n.signal}),i==null||i.abort()})}pauseConnection(){var e;((e=this.provider)===null||e===void 0?void 0:e.type)==="http"&&this.provider.pause()}unPauseConnection(){var e;return((e=this.provider)===null||e===void 0?void 0:e.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){const e=OQ();if(e)try{e.addEventListener("visibilitychange",()=>{e.hidden?this.pauseConnection():this.unPauseConnection().catch()})}catch(r){Fo("Cannot subscribe to the document.visibilitychange: ",r)}}createProvider(e){let r;return!Array.isArray(e)&&bQ(e)?r=new wi(this.dappSettings.storage,e.jsBridgeKey):r=new mh(this.dappSettings.storage,e),r.listen(this.walletEventsListener.bind(this)),r}walletEventsListener(e){switch(e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.onWalletConnectError(e.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){const r=e.items.find(s=>s.name==="ton_addr"),n=e.items.find(s=>s.name==="ton_proof");if(!r)throw new Ut("ton_addr connection item was not found");const i={device:e.device,provider:this.provider.type,account:{address:r.address,chain:r.network,walletStateInit:r.walletStateInit,publicKey:r.publicKey}};n&&(i.connectItems={tonProof:n}),this.wallet=i,this.tracker.trackConnectionCompleted(i)}onWalletConnectError(e){const r=wQ.parseError(e);if(this.statusChangeErrorSubscriptions.forEach(n=>n(r)),En(r),this.tracker.trackConnectionError(e.message,e.code),r instanceof up||r instanceof cp)throw Fo(r),r}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}checkConnection(){if(!this.connected)throw new fp}createConnectRequest(e){const r=[{name:"ton_addr"}];return e!=null&&e.tonProof&&r.push({name:"ton_proof",payload:e.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:r}}}vh.walletsList=new Wb,vh.isWalletInjected=t=>wi.isWalletInjected(t),vh.isInsideWalletBrowser=t=>wi.isInsideWalletBrowser(t);for(let t=0;t<=255;t++){let e=t.toString(16);e.length<2&&(e="0"+e)}function Vb(t){const{children:e,onClick:r}=t;return le.jsx("button",{onClick:r,className:"xc-border xc-px-4 xc-py-2 xc-rounded-full xc-text-sm xc-flex xc-gap-2 xc-items-center",children:e})}function x9(t){const{wallet:e,connector:r,loading:n}=t,i=Ee.useRef(null),s=Ee.useRef(),[o,a]=Ee.useState(),[u,l]=Ee.useState(),[d,p]=Ee.useState("connect"),[y,_]=Ee.useState(!1),[M,O]=Ee.useState();function L(W){var ie;(ie=s.current)==null||ie.update({data:W})}async function B(){_(!0);try{a("");const W=await xa.getNonce({account_type:"block_chain"});if("universalLink"in e&&e.universalLink){const ie=r.connect({universalLink:e.universalLink,bridgeUrl:e.bridgeUrl},{request:{tonProof:W}});if(!ie)return;O(ie),L(ie),l(W)}}catch(W){a(W.message)}_(!1)}function k(){s.current=new Z7({width:264,height:264,margin:0,type:"svg",qrOptions:{errorCorrectionLevel:"M"},dotsOptions:{color:"black",type:"rounded"},backgroundOptions:{color:"transparent"}}),s.current.append(i.current)}function H(){r.connect(e,{request:{tonProof:u}})}function U(){if("deepLink"in e){if(!e.deepLink||!M)return;const W=new URL(M),ie=`${e.deepLink}${W.search}`;window.open(ie)}}function z(){"universalLink"in e&&e.universalLink&&/t.me/.test(e.universalLink)&&window.open(M)}const Z=Ee.useMemo(()=>!!("deepLink"in e&&e.deepLink),[e]),R=Ee.useMemo(()=>!!("universalLink"in e&&e.universalLink&&/t.me/.test(e.universalLink)),[e]);return Ee.useEffect(()=>{k(),B()},[]),le.jsxs(Ms,{children:[le.jsx("div",{className:"xc-mb-6",children:le.jsx(Tc,{title:"Connect wallet",onBack:t.onBack})}),le.jsxs("div",{className:"xc-text-center xc-mb-6",children:[le.jsxs("div",{className:"xc-relative xc-mx-auto xc-mb-6 xc-block xc-max-h-[272px] xc-max-w-[272px] xc-rounded-xl xc-bg-white xc-p-1",children:[le.jsx("div",{className:"xc-aspect-[1/1] xc-flex xc-h-full xc-w-full xc-justify-center",ref:i}),le.jsx("div",{className:"xc-absolute xc-left-0 xc-top-0 xc-flex xc-h-full xc-w-full xc-items-center xc-justify-center",children:y?le.jsx(Ec,{className:"xc-h-6 xc-w-6 xc-animate-spin xc-text-black",size:20}):le.jsx("img",{className:"xc-h-10 xc-w-10 xc-rounded-md",src:e.imageUrl})})]}),le.jsx("p",{className:"xc-text-center",children:"Scan the QR code below with your phone's camera. "})]}),le.jsxs("div",{className:"xc-flex xc-justify-center xc-gap-2",children:[n&&le.jsx(Ec,{className:"xc-animate-spin"}),!y&&!n&&le.jsxs(le.Fragment,{children:[w9(e)&&le.jsxs(Vb,{onClick:H,children:[le.jsx(dV,{className:"xc-opacity-80"}),"Extension"]}),Z&&le.jsxs(Vb,{onClick:U,children:[le.jsx(F8,{className:"xc-opacity-80"}),"Desktop"]}),R&&le.jsx(Vb,{onClick:z,children:"Telegram Mini App"})]})]})]})}function iee(t){const[e,r]=Ee.useState(""),[n,i]=Ee.useState(),[s,o]=Ee.useState(),a=Bb(),[u,l]=Ee.useState(!1);async function d(y){var M,O;if(!y||!((M=y.connectItems)!=null&&M.tonProof))return;l(!0);const _=await xa.tonLogin({account_type:"block_chain",connector:"codatta_ton",account_enum:"C",wallet_name:y==null?void 0:y.device.appName,inviter_code:a.inviterCode,address:y.account.address,chain:y.account.chain,connect_info:[{name:"ton_addr",network:y.account.chain,...y.account},(O=y.connectItems)==null?void 0:O.tonProof],source:{device:a.device,channel:a.channel,app:a.app}});await t.onLogin(_.data),l(!1)}Ee.useEffect(()=>{const y=new vh({manifestUrl:"https://static.codatta.io/static/tonconnect-manifest.json?v=2"}),_=y.onStatusChange(d);return o(y),r("select"),_},[]);function p(y){r("connect"),i(y)}return le.jsxs(Ms,{children:[e==="select"&&le.jsx(s9,{connector:s,onSelect:p,onBack:t.onBack}),e==="connect"&&le.jsx(x9,{connector:s,wallet:n,onBack:t.onBack,loading:u})]})}function _9(t){const{children:e,className:r}=t,n=Ee.useRef(null),[i,s]=Ee.useState(0);function o(){var a;try{const u=((a=n.current)==null?void 0:a.children)||[];let l=0;for(let d=0;d<u.length;d++)l+=u[d].offsetHeight;s(l)}catch(u){console.error(u)}}return Ee.useEffect(()=>{const a=new MutationObserver(o);return a.observe(n.current,{childList:!0,subtree:!0}),()=>a.disconnect()},[]),Ee.useEffect(()=>{console.log("maxHeight",i)},[i]),le.jsx("div",{ref:n,className:r,style:{transition:"all 0.2s ease-in-out",overflow:"hidden",height:i},children:e})}function see(){return le.jsxs("svg",{width:"121",height:"120",viewBox:"0 0 121 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[le.jsx("rect",{x:"0.5",width:"120",height:"120",rx:"60",fill:"#404049"}),le.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M52.8709 61.106C52.8208 61.4482 52.7948 61.7979 52.7948 62.1535C52.7948 66.2529 56.2445 69.5761 60.5 69.5761C64.7554 69.5761 68.2052 66.2529 68.2052 62.1535C68.2052 61.7979 68.1792 61.4482 68.129 61.106H86.826V77.6174C86.826 78.6422 85.9636 79.473 84.8997 79.473H36.1002C35.0364 79.473 34.174 78.6422 34.174 77.6174V61.106H52.8709Z",fill:"#252532"}),le.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M69.061 60.9416C69.061 65.6697 65.2281 69.5026 60.5 69.5026C55.7719 69.5026 51.939 65.6697 51.939 60.9416C51.939 60.7884 51.943 60.6362 51.951 60.485H33.5L39.7959 41.8696C40.0673 41.0671 40.8202 40.527 41.6674 40.527H79.3326C80.1798 40.527 80.9327 41.0671 81.2041 41.8696L87.5 60.485H69.049C69.057 60.6362 69.061 60.7884 69.061 60.9416Z",fill:"#252532"}),le.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M67.8081 61.5708C67.8081 65.2243 64.5361 68.8446 60.4999 68.8446C56.4637 68.8446 53.1918 65.2243 53.1918 61.5708C53.1918 61.4524 53.1952 60.6762 53.202 60.5594H39.4268L44.8013 47.4919C45.033 46.8717 45.6757 46.4543 46.3989 46.4543H74.601C75.3242 46.4543 75.9669 46.8717 76.1986 47.4919L81.5731 60.5594H67.7979C67.8046 60.6762 67.8081 61.4524 67.8081 61.5708Z",fill:"#404049"}),le.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M34.3232 60.6199V78.063C34.3232 78.6995 34.8392 79.2155 35.4757 79.2155H85.5245C86.1609 79.2155 86.6769 78.6995 86.6769 78.063V60.6199L80.4244 42.1328C80.2661 41.6647 79.8269 41.3496 79.3327 41.3496H41.6674C41.1733 41.3496 40.7341 41.6647 40.5758 42.1328L34.3232 60.6199Z",stroke:"#77777D","stroke-width":"2"}),le.jsx("path",{d:"M34.817 60.2823C37.4094 60.2823 48.1095 60.2823 51.1124 60.2823C52.348 60.2823 52.348 61.1507 52.348 61.5994C52.348 65.9638 55.9675 69.5019 60.4323 69.5019C64.8971 69.5019 68.5165 65.9638 68.5165 61.5994C68.5165 61.1507 68.5165 60.2823 69.7521 60.2823H86.1829",stroke:"#77777D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]})}function E9(t){const{wallets:e}=Yl(),[r,n]=Ee.useState(),i=Ee.useMemo(()=>r?e.filter(a=>a.key.toLowerCase().includes(r.toLowerCase())):e,[r]);function s(a){t.onSelectWallet(a)}function o(a){n(a.target.value)}return le.jsxs(Ms,{children:[le.jsx("div",{className:"xc-mb-6",children:le.jsx(Tc,{title:"Select wallet",onBack:t.onBack})}),le.jsxs("div",{className:"xc-mb-6 xc-flex xc-gap-3 xc-px-4 xc-py-2 xc-border xc-rounded-xl xc-w-full xc-overflow-hidden xc-items-center xc-border-opacity-15 xc-border-white focus-within:xc-border-opacity-40",children:[le.jsx(j8,{className:"xc-shrink-0 xc-opacity-50"}),le.jsx("input",{type:"text",className:"xc-flex-1 xc-bg-transparent xc-appearance-none xc-outline-none",placeholder:"Search wallet",onInput:o})]}),le.jsx("div",{className:"xc-mb-4 xc-flex xc-h-[309px] xc-flex-col xc-gap-4 xc-overflow-scroll no-scrollbar",children:i.length?i.map(a=>le.jsx(C7,{wallet:a,onClick:s},`feature-${a.key}`)):le.jsx(see,{})})]})}function oee(t){const{onLogin:e,header:r,showEmailSignIn:n=!0,showMoreWallets:i=!0,showTonConnect:s=!0,showFeaturedWallets:o=!0}=t,[a,u]=Ee.useState(""),[l,d]=Ee.useState(null),[p,y]=Ee.useState("");function _(B){d(B),u("evm-wallet")}function M(B){u("email"),y(B)}async function O(B){await e(B)}function L(){u("ton-wallet")}return Ee.useEffect(()=>{u("index")},[]),le.jsx(AZ,{config:t.config,children:le.jsxs(_9,{className:"xc-rounded-2xl xc-transition-height xc-box-content xc-w-full xc-min-w-[277px] xc-max-w-[420px] xc-p-6 xc-bg-[rgb(28,28,38)] xc-text-white",children:[a==="evm-wallet"&&le.jsx(aQ,{onBack:()=>u("index"),onLogin:O,wallet:l}),a==="ton-wallet"&&le.jsx(iee,{onBack:()=>u("index"),onLogin:O}),a==="email"&&le.jsx(jZ,{email:p,onBack:()=>u("index"),onLogin:O}),a==="index"&&le.jsx(F7,{header:r,onEmailConfirm:M,onSelectWallet:_,onSelectMoreWallets:()=>{u("all-wallet")},onSelectTonConnect:L,config:{showEmailSignIn:n,showFeaturedWallets:o,showMoreWallets:i,showTonConnect:s}}),a==="all-wallet"&&le.jsx(E9,{onBack:()=>u("index"),onSelectWallet:_})]})})}function aee(t){const{wallet:e,onConnect:r}=t,[n,i]=Ee.useState(e.installed?"connect":"qr");async function s(o,a){await r(o,a)}return le.jsxs(Ms,{children:[le.jsx("div",{className:"xc-mb-6",children:le.jsx(Tc,{title:"Connect wallet",onBack:t.onBack})}),n==="qr"&&le.jsx(r9,{wallet:e,onGetExtension:()=>i("get-extension"),onSignFinish:s}),n==="connect"&&le.jsx(n9,{onShowQrCode:()=>i("qr"),wallet:e,onSignFinish:s}),n==="get-extension"&&le.jsx(i9,{wallet:e})]})}function cee(t){const{email:e}=t,[r,n]=Ee.useState("captcha");return le.jsxs(Ms,{children:[le.jsx("div",{className:"xc-mb-12",children:le.jsx(Tc,{title:"Sign in with email",onBack:t.onBack})}),r==="captcha"&&le.jsx(J7,{email:e,onCodeSend:()=>n("verify-email")}),r==="verify-email"&&le.jsx(Y7,{email:e,onInputCode:t.onInputCode,onResendCode:()=>n("captcha")})]})}function uee(t){const{onEvmWalletConnect:e,onTonWalletConnect:r,onEmailConnect:n,config:i={showEmailSignIn:!1,showFeaturedWallets:!0,showMoreWallets:!0,showTonConnect:!0}}=t,[s,o]=Ee.useState(""),[a,u]=Ee.useState(),[l,d]=Ee.useState(),p=Ee.useRef(),[y,_]=Ee.useState("");function M(U){u(U),o("evm-wallet-connect")}function O(U){_(U),o("email-connect")}async function L(U,z){await(e==null?void 0:e({chain_type:"eip155",client:U.client,connect_info:z,wallet:U})),o("index")}async function B(U,z){await(n==null?void 0:n(U,z))}function k(U){d(U),o("ton-wallet-connect")}async function H(U){U&&await(r==null?void 0:r({chain_type:"ton",client:p.current,connect_info:U,wallet:U}))}return Ee.useEffect(()=>{p.current=new vh({manifestUrl:"https://static.codatta.io/static/tonconnect-manifest.json?v=2"});const U=p.current.onStatusChange(H);return o("index"),U},[]),le.jsxs(_9,{className:"xc-rounded-2xl xc-transition-height xc-box-content xc-w-full xc-min-w-[277px] xc-max-w-[420px] xc-p-6 xc-bg-[rgb(28,28,38)] xc-text-white",children:[s==="evm-wallet-select"&&le.jsx(E9,{onBack:()=>o("index"),onSelectWallet:M}),s==="evm-wallet-connect"&&le.jsx(aee,{onBack:()=>o("index"),onConnect:L,wallet:a}),s==="ton-wallet-select"&&le.jsx(s9,{connector:p.current,onSelect:k,onBack:()=>o("index")}),s==="ton-wallet-connect"&&le.jsx(x9,{connector:p.current,wallet:l,onBack:()=>o("index")}),s==="email-connect"&&le.jsx(cee,{email:y,onBack:()=>o("index"),onInputCode:B}),s==="index"&&le.jsx(F7,{onEmailConfirm:O,onSelectWallet:M,onSelectMoreWallets:()=>o("evm-wallet-select"),onSelectTonConnect:()=>o("ton-wallet-select"),config:i})]})}Pn.CodattaConnect=uee,Pn.CodattaConnectContextProvider=sV,Pn.CodattaSignin=oee,Pn.WalletItem=ru,Pn.coinbaseWallet=L8,Pn.useCodattaConnectContext=Yl,Object.defineProperty(Pn,Symbol.toStringTag,{value:"Module"})});
